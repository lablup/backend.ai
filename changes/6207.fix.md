Fix race conditions in test container port allocation by using dynamic port assignment