Add structured IntegrityError parser and SQLSTATE-based error types for repository layer
