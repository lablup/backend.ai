Separate repository layer from group service