Separate repository layer from domain service