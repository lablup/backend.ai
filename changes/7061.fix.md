Replace assert statements with BackendAIError exceptions in agent