Handle cancel and timeout when creating kernels
