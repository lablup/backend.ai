Introduce the `db_source` pattern to `UserRepository`, extracting all DB session-opening logic into `UserDBSource` for improved separation of concerns