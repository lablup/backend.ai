/*! For license information please see 6858.7854222f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[6858],{15715:(e,n,i)=>{i.d(n,{A:()=>t});const t=(0,i(61099).A)("folder-input",[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]])},46858:(e,n,i)=>{i.r(n),i.d(n,{default:()=>ae});const t=function(){var e={defaultValue:null,kind:"LocalArgument",name:"filter"},n={defaultValue:null,kind:"LocalArgument",name:"id"},i={defaultValue:null,kind:"LocalArgument",name:"limit"},t={defaultValue:null,kind:"LocalArgument",name:"offset"},a=[{kind:"Variable",name:"id",variableName:"id"}],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},s=[l,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],d={alias:null,args:null,concreteType:"SourceInfo",kind:"LinkedField",name:"registry",plural:!1,selections:s,storageKey:null},c={alias:null,args:null,concreteType:"SourceInfo",kind:"LinkedField",name:"source",plural:!1,selections:s,storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"updatedAt",storageKey:null},m={kind:"Literal",name:"orderBy",value:[{direction:"DESC",field:"VERSION"},{direction:"DESC",field:"UPDATED_AT"}]},g=[{kind:"Literal",name:"filter",value:{status:{equals:"PULLING"}}},m],f={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},F={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasPreviousPage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"startCursor",storageKey:null}],storageKey:null},y={kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]},k=[{kind:"Literal",name:"limit",value:1},m],R={alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},T={args:null,kind:"FragmentSpread",name:"BAIImportArtifactModalArtifactRevisionFragment"},h=[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"},m],S=[{kind:"Literal",name:"is_active",value:!0},{kind:"Literal",name:"type",value:["MODEL_STORE"]}];return{fragment:{argumentDefinitions:[e,n,i,t],kind:"Fragment",metadata:null,name:"ReservoirArtifactDetailPageQuery",selections:[{alias:null,args:a,concreteType:"Artifact",kind:"LinkedField",name:"artifact",plural:!1,selections:[r,l,{args:null,kind:"FragmentSpread",name:"BAIArtifactTypeTagFragment"},o,d,c,u,{alias:"pullingArtifactRevisions",args:g,concreteType:"ArtifactRevisionConnection",kind:"LinkedField",name:"__ReservoirArtifactDetailPage_pullingArtifactRevisions_connection",plural:!1,selections:[f,{alias:null,args:null,concreteType:"ArtifactRevisionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ArtifactRevision",kind:"LinkedField",name:"node",plural:!1,selections:[r,v,{args:null,kind:"FragmentSpread",name:"BAIPullingArtifactRevisionAlertFragment"},p],storageKey:null},A],storageKey:null},F,y],storageKey:'__ReservoirArtifactDetailPage_pullingArtifactRevisions_connection(filter:{"status":{"equals":"PULLING"}},orderBy:[{"direction":"DESC","field":"VERSION"},{"direction":"DESC","field":"UPDATED_AT"}])'},{alias:"latestVersion",args:k,concreteType:"ArtifactRevisionConnection",kind:"LinkedField",name:"revisions",plural:!1,selections:[{alias:null,args:null,concreteType:"ArtifactRevisionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ArtifactRevision",kind:"LinkedField",name:"node",plural:!1,selections:[r,R,I,v,T,{args:null,kind:"FragmentSpread",name:"BAIArtifactRevisionTableLatestRevisionFragment"}],storageKey:null}],storageKey:null}],storageKey:'revisions(limit:1,orderBy:[{"direction":"DESC","field":"VERSION"},{"direction":"DESC","field":"UPDATED_AT"}])'},{alias:null,args:h,concreteType:"ArtifactRevisionConnection",kind:"LinkedField",name:"revisions",plural:!1,selections:[f,{alias:null,args:null,concreteType:"ArtifactRevisionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ArtifactRevision",kind:"LinkedField",name:"node",plural:!1,selections:[r,v,{args:null,kind:"FragmentSpread",name:"BAIArtifactRevisionTableArtifactRevisionFragment"},T,{args:null,kind:"FragmentSpread",name:"BAIDeleteArtifactRevisionsModalArtifactRevisionFragment"},{args:null,kind:"FragmentSpread",name:"BAIArtifactRevisionDeleteButtonFragment"},{args:null,kind:"FragmentSpread",name:"BAIArtifactRevisionDownloadButtonFragment"},{args:null,kind:"FragmentSpread",name:"ImportArtifactRevisionToFolderButtonFragment"},{args:null,kind:"FragmentSpread",name:"ImportArtifactRevisionToFolderModalArtifactRevisionFragment"}],storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"BAIImportArtifactModalArtifactFragment"},{args:null,kind:"FragmentSpread",name:"BAIDeleteArtifactRevisionsModalArtifactFragment"}],storageKey:null},{alias:null,args:S,concreteType:"Group",kind:"LinkedField",name:"groups",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"ImportArtifactRevisionToFolderModalModelStoreProjectsFragment"}],storageKey:'groups(is_active:true,type:["MODEL_STORE"])'}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,t,i,e],kind:"Operation",name:"ReservoirArtifactDetailPageQuery",selections:[{alias:null,args:a,concreteType:"Artifact",kind:"LinkedField",name:"artifact",plural:!1,selections:[r,l,{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},o,d,c,u,{alias:"pullingArtifactRevisions",args:g,concreteType:"ArtifactRevisionConnection",kind:"LinkedField",name:"revisions",plural:!1,selections:[f,{alias:null,args:null,concreteType:"ArtifactRevisionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ArtifactRevision",kind:"LinkedField",name:"node",plural:!1,selections:[r,v,I,p],storageKey:null},A],storageKey:null},F,y],storageKey:'revisions(filter:{"status":{"equals":"PULLING"}},orderBy:[{"direction":"DESC","field":"VERSION"},{"direction":"DESC","field":"UPDATED_AT"}])'},{alias:"pullingArtifactRevisions",args:g,filters:["filter","orderBy"],handle:"connection",key:"ReservoirArtifactDetailPage_pullingArtifactRevisions",kind:"LinkedHandle",name:"revisions"},{alias:"latestVersion",args:k,concreteType:"ArtifactRevisionConnection",kind:"LinkedField",name:"revisions",plural:!1,selections:[{alias:null,args:null,concreteType:"ArtifactRevisionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ArtifactRevision",kind:"LinkedField",name:"node",plural:!1,selections:[r,R,I,v],storageKey:null}],storageKey:null}],storageKey:'revisions(limit:1,orderBy:[{"direction":"DESC","field":"VERSION"},{"direction":"DESC","field":"UPDATED_AT"}])'},{alias:null,args:h,concreteType:"ArtifactRevisionConnection",kind:"LinkedField",name:"revisions",plural:!1,selections:[f,{alias:null,args:null,concreteType:"ArtifactRevisionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ArtifactRevision",kind:"LinkedField",name:"node",plural:!1,selections:[r,v,I,R,u],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:S,concreteType:"Group",kind:"LinkedField",name:"groups",plural:!0,selections:[r,l],storageKey:'groups(is_active:true,type:["MODEL_STORE"])'}]},params:{cacheID:"857082c87bcf47bbc7556f86a4ab6e29",id:null,metadata:{connection:[{count:null,cursor:null,direction:"bidirectional",path:["artifact","pullingArtifactRevisions"]}]},name:"ReservoirArtifactDetailPageQuery",operationKind:"query",text:'query ReservoirArtifactDetailPageQuery(\n  $id: ID!\n  $offset: Int!\n  $limit: Int!\n  $filter: ArtifactRevisionFilter!\n) {\n  artifact(id: $id) {\n    id\n    name\n    ...BAIArtifactTypeTagFragment\n    description\n    registry {\n      name\n      url\n    }\n    source {\n      name\n      url\n    }\n    updatedAt\n    pullingArtifactRevisions: revisions(filter: {status: {equals: PULLING}}, orderBy: [{field: VERSION, direction: DESC}, {field: UPDATED_AT, direction: DESC}]) {\n      count\n      edges {\n        node {\n          id\n          status\n          ...BAIPullingArtifactRevisionAlertFragment\n          __typename\n        }\n        cursor\n      }\n      pageInfo {\n        endCursor\n        hasNextPage\n        hasPreviousPage\n        startCursor\n      }\n    }\n    latestVersion: revisions(limit: 1, orderBy: [{field: VERSION, direction: DESC}, {field: UPDATED_AT, direction: DESC}]) {\n      edges {\n        node {\n          id\n          size\n          version\n          status\n          ...BAIImportArtifactModalArtifactRevisionFragment\n          ...BAIArtifactRevisionTableLatestRevisionFragment\n        }\n      }\n    }\n    revisions(offset: $offset, limit: $limit, orderBy: [{field: VERSION, direction: DESC}, {field: UPDATED_AT, direction: DESC}], filter: $filter) {\n      count\n      edges {\n        node {\n          id\n          status\n          ...BAIArtifactRevisionTableArtifactRevisionFragment\n          ...BAIImportArtifactModalArtifactRevisionFragment\n          ...BAIDeleteArtifactRevisionsModalArtifactRevisionFragment\n          ...BAIArtifactRevisionDeleteButtonFragment\n          ...BAIArtifactRevisionDownloadButtonFragment\n          ...ImportArtifactRevisionToFolderButtonFragment\n          ...ImportArtifactRevisionToFolderModalArtifactRevisionFragment\n        }\n      }\n    }\n    ...BAIImportArtifactModalArtifactFragment\n    ...BAIDeleteArtifactRevisionsModalArtifactFragment\n  }\n  groups(is_active: true, type: ["MODEL_STORE"]) {\n    ...ImportArtifactRevisionToFolderModalModelStoreProjectsFragment\n  }\n}\n\nfragment BAIArtifactDescriptionsFragment on Artifact {\n  name\n  description\n  source {\n    name\n    url\n  }\n  ...BAIArtifactTypeTagFragment\n}\n\nfragment BAIArtifactRevisionDeleteButtonFragment on ArtifactRevision {\n  status\n}\n\nfragment BAIArtifactRevisionDownloadButtonFragment on ArtifactRevision {\n  status\n}\n\nfragment BAIArtifactRevisionTableArtifactRevisionFragment on ArtifactRevision {\n  id\n  version\n  size\n  status\n  updatedAt\n  ...BAIArtifactStatusTagFragment\n  ...BAIArtifactRevisionDownloadButtonFragment\n  ...BAIArtifactRevisionDeleteButtonFragment\n}\n\nfragment BAIArtifactRevisionTableLatestRevisionFragment on ArtifactRevision {\n  id\n}\n\nfragment BAIArtifactStatusTagFragment on ArtifactRevision {\n  status\n}\n\nfragment BAIArtifactTypeTagFragment on Artifact {\n  type\n}\n\nfragment BAIDeleteArtifactRevisionsModalArtifactFragment on Artifact {\n  id\n  ...BAIArtifactDescriptionsFragment\n}\n\nfragment BAIDeleteArtifactRevisionsModalArtifactRevisionFragment on ArtifactRevision {\n  id\n  version\n  size\n  status\n}\n\nfragment BAIImportArtifactModalArtifactFragment on Artifact {\n  id\n  name\n  ...BAIArtifactDescriptionsFragment\n}\n\nfragment BAIImportArtifactModalArtifactRevisionFragment on ArtifactRevision {\n  id\n  version\n  size\n  status\n}\n\nfragment BAIPullingArtifactRevisionAlertFragment on ArtifactRevision {\n  id\n  status\n  version\n}\n\nfragment ImportArtifactRevisionToFolderButtonFragment on ArtifactRevision {\n  status\n}\n\nfragment ImportArtifactRevisionToFolderModalArtifactRevisionFragment on ArtifactRevision {\n  id\n}\n\nfragment ImportArtifactRevisionToFolderModalModelStoreProjectsFragment on Group {\n  id\n  name\n}\n'}}}();t.hash="b72980f66c5575c9b3946d349410ddd2";const a=t;var r=i(56276),l=i(11863);const o={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ImportArtifactRevisionToFolderButtonFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],type:"ArtifactRevision",abstractKey:null,hash:"fb4797e7e04df882a22890d1e13925c2"},s=o;var d=i(87272),c=i(7265),u=i(60669),m=i.n(u),g=i(15715),f=i(29262),v=i(84372),p=i(26862);const A=["revisionsFrgmt"],F=e=>{let{revisionsFrgmt:n}=e,i=(0,l.A)(e,A);const{token:t}=d.A.useToken(),a=(0,v.useFragment)(s,n),o=!m().some(a,(e=>"SCANNED"===e.status))||i.disabled||i.loading;return(0,p.jsx)(c.Fvl,(0,r.A)({icon:(0,p.jsx)(g.A,{}),disabled:o,type:"text",style:(0,r.A)({color:o?t.colorTextDisabled:t.colorInfo,background:o?t.colorBgContainerDisabled:t.colorInfoBg},i.style)},m().omit(i,["disabled","loading"])))};var y=i(69319),k=i(69266),R=i(37717),I=i(49969),T=i(47671),h=i.n(T),S=i(34977),D=i.n(S),b=i(86714),x=i(99118),P=i(55812);const j=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"ImportArtifactsPayload",kind:"LinkedField",name:"importArtifacts",plural:!1,selections:[{alias:null,args:null,concreteType:"ArtifactRevisionConnection",kind:"LinkedField",name:"artifactRevisions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArtifactRevisionImportTask",kind:"LinkedField",name:"tasks",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"taskId",storageKey:null},{alias:null,args:null,concreteType:"ArtifactRevision",kind:"LinkedField",name:"artifactRevision",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null},{alias:null,args:null,concreteType:"Artifact",kind:"LinkedField",name:"artifact",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ImportArtifactRevisionToFolderModalMutation",selections:i,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ImportArtifactRevisionToFolderModalMutation",selections:i},params:{cacheID:"f9ff42231591012ef364ce645c6a4085",id:null,metadata:{},name:"ImportArtifactRevisionToFolderModalMutation",operationKind:"mutation",text:"mutation ImportArtifactRevisionToFolderModalMutation(\n  $input: ImportArtifactsInput!\n) {\n  importArtifacts(input: $input) {\n    artifactRevisions {\n      count\n    }\n    tasks {\n      taskId\n      artifactRevision {\n        id\n        version\n        size\n        artifact {\n          id\n          name\n        }\n      }\n    }\n  }\n}\n"}}}();j.hash="7fe96d604fbbf3730d8f1088a7ef1c15";const L=j,M={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ImportArtifactRevisionToFolderModalModelStoreProjectsFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],type:"Group",abstractKey:null,hash:"55dc19bd0c05c3aaf314215595f0c8a0"},E=M,B={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ImportArtifactRevisionToFolderModalArtifactRevisionFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},action:"THROW"}],type:"ArtifactRevision",abstractKey:null,hash:"911b8e7ffb3a0042ecb970a90018b1e8"},K=B;var C=i(15584),_=i(54585),O=i(80391),N=i(36961),V=i(52251),w=i(66203),z=i(95655),G=i(87894),q=i(52053);const U=["selectedArtifactRevisionFrgmt","modelStoreProjectsFrgmt","onOk"],$=e=>{const n=(0,C.c)(76);let i,t,a,o;if(n[0]!==e){var s=e;({selectedArtifactRevisionFrgmt:o,modelStoreProjectsFrgmt:t,onOk:a}=s),i=(0,l.A)(s,U),n[0]=e,n[1]=i,n[2]=t,n[3]=a,n[4]=o}else i=n[1],t=n[2],a=n[3],o=n[4];const{t:u}=(0,x.Bd)(),{token:g}=d.A.useToken(),{message:A}=N.A.useApp(),F=(0,f.useRef)(null),y=(0,f.useRef)(null),[k,I]=(0,O.A)(!1),{toggle:T}=I,{logger:h}=(0,c.Q7t)(),S=(0,q.hd)(),D=(0,q.iT)();let b;n[5]===Symbol.for("react.memo_cache_sentinel")?(b=K,n[5]=b):b=n[5];const P=(0,v.useFragment)(b,o);let j;n[6]===Symbol.for("react.memo_cache_sentinel")?(j=E,n[6]=j):j=n[6];const M=(0,v.useFragment)(j,t);let B;n[7]===Symbol.for("react.memo_cache_sentinel")?(B=L,n[7]=B):B=n[7];const[$,Y]=(0,v.useMutation)(B);let X;n[8]!==P?(X=m().map(P,Q),n[8]=P,n[9]=X):X=n[9];const ee=X;let ne,ie,te,ae,re,le,oe,se,de,ce,ue;n[10]!==u?(ne=u("importArtifactRevisionToFolderModal.ImportToFolder"),n[10]=u,n[11]=ne):ne=n[11],n[12]!==u?(ie=u("importArtifactRevisionToFolderModal.Import"),n[12]=u,n[13]=ie):ie=n[13],n[14]!==Y||n[15]!==P?(te=Y||m().isEmpty(P),n[14]=Y,n[15]=P,n[16]=te):te=n[16],n[17]!==Y||n[18]!==te?(ae={loading:Y,disabled:te},n[17]=Y,n[18]=te,n[19]=ae):ae=n[19],n[20]!==$||n[21]!==h||n[22]!==A||n[23]!==a||n[24]!==ee||n[25]!==P||n[26]!==u?(re=e=>{var n;null===(n=F.current)||void 0===n||n.validateFields().then((n=>{m().isEmpty(P)?A.error(u("importArtifactRevisionToFolderModal.NoArtifactsSelected")):$({variables:{input:{artifactRevisionIds:m().map(ee,W),vfolderId:n.vfolderId?(0,c.omW)(n.vfolderId):null,options:{force:!0}}},onCompleted:(i,t)=>{var r;if(t&&t.length>0)t.forEach((e=>{var n;return A.error(null!==(n=e.message)&&void 0!==n?n:u("importArtifactRevisionToFolderModal.FailedToImport"))}));else if((null===(r=i.importArtifacts.artifactRevisions)||void 0===r?void 0:r.count)>0&&!m().some(i.importArtifacts.tasks,H)){var l;A.success(u("importArtifactRevisionToFolderModal.SuccessfullyImported"));const t=i.importArtifacts.tasks.filter(J).map(Z);null===(l=a)||void 0===l||l(e,t,n.vfolderId)}else A.error(u("importArtifactRevisionToFolderModal.FailedToImport"))},onError:e=>{var n;A.error(null!==(n=e.message)&&void 0!==n?n:u("importArtifactRevisionToFolderModal.FailedToImport"))}})})).catch((e=>{h.error("ImportArtifactRevisionToFolderModal: Form validation failed",{error:e})}))},n[20]=$,n[21]=h,n[22]=A,n[23]=a,n[24]=ee,n[25]=P,n[26]=u,n[27]=re):re=n[27],n[28]===Symbol.for("react.memo_cache_sentinel")?(le=["onChange","onBlur"],n[28]=le):le=n[28],n[29]!==u?(oe=u("importArtifactRevisionToFolderModal.OverwriteWarning"),n[29]=u,n[30]=oe):oe=n[30],n[31]!==g.marginMD?(se={marginBottom:g.marginMD},n[31]=g.marginMD,n[32]=se):se=n[32],n[33]!==oe||n[34]!==se?(de=(0,p.jsx)(V.A,{type:"warning",title:oe,showIcon:!0,style:se}),n[33]=oe,n[34]=se,n[35]=de):de=n[35],n[36]!==u?(ce=u("importArtifactRevisionToFolderModal.FolderMountForModelStore"),n[36]=u,n[37]=ce):ce=n[37],n[38]===Symbol.for("react.memo_cache_sentinel")?(ue=[{required:!0}],n[38]=ue):ue=n[38];const me=null!==M&&void 0!==M&&M.id?'group == "'.concat(M.id,'"'):null;let ge,fe,ve,pe,Ae,Fe,ye,ke,Re,Ie,Te,he;return n[39]!==me?(ge=(0,c.r2g)(['ownership_type == "group"',me]),n[39]=me,n[40]=ge):ge=n[40],n[41]!==ge?(fe=(0,p.jsx)(w.A.Item,{name:"vfolderId",noStyle:!0,children:(0,p.jsx)(c.Tiw,{ref:y,excludeDeleted:!0,filter:ge})}),n[41]=ge,n[42]=fe):fe=n[42],n[43]!==S.id||n[44]!==A||n[45]!==M||n[46]!==D||n[47]!==u||n[48]!==T?(ve=S.id===(null===M||void 0===M?void 0:M.id)?(0,p.jsx)(R.Ay,{icon:(0,p.jsx)(G.A,{}),onClick:()=>{T()}}):(0,p.jsx)(z.A,{title:u("importArtifactRevisionToFolderModal.ModelStoreProjectRequired"),description:u("importArtifactRevisionToFolderModal.ModelStoreProjectRequiredDescription"),okText:u("button.ChangeProject"),cancelText:u("button.Cancel"),onConfirm:()=>{M&&M.id&&M.name?(0,f.startTransition)((()=>{D({projectId:M.id,projectName:M.name}),A.success(u("importArtifactRevisionToFolderModal.CurrentProjectChangedSuccessfully")),T()})):A.error(u("importArtifactRevisionToFolderModal.FailedToRetrieveModelStoreProject"))},children:(0,p.jsx)(R.Ay,{icon:(0,p.jsx)(G.A,{})})}),n[43]=S.id,n[44]=A,n[45]=M,n[46]=D,n[47]=u,n[48]=T,n[49]=ve):ve=n[49],n[50]!==fe||n[51]!==ve?(pe=(0,p.jsxs)(c.OOm,{gap:"xs",align:"center",children:[fe,ve]}),n[50]=fe,n[51]=ve,n[52]=pe):pe=n[52],n[53]!==ce||n[54]!==pe?(Ae=(0,p.jsx)(w.A.Item,{label:ce,name:"vfolderId",rules:ue,children:pe}),n[53]=ce,n[54]=pe,n[55]=Ae):Ae=n[55],n[56]!==de||n[57]!==Ae?(Fe=(0,p.jsx)(w.A,{ref:F,layout:"vertical",preserve:!1,validateTrigger:le,children:(0,p.jsxs)(c.OOm,{direction:"column",align:"stretch",children:[de,Ae]})}),n[56]=de,n[57]=Ae,n[58]=Fe):Fe=n[58],n[59]!==i||n[60]!==re||n[61]!==Fe||n[62]!==ne||n[63]!==ie||n[64]!==ae?(ye=(0,p.jsx)(c.IbE,(0,r.A)((0,r.A)({title:ne,okText:ie,centered:!0,destroyOnHidden:!0},i),{},{okButtonProps:ae,onOk:re,children:Fe})),n[59]=i,n[60]=re,n[61]=Fe,n[62]=ne,n[63]=ie,n[64]=ae,n[65]=ye):ye=n[65],n[66]===Symbol.for("react.memo_cache_sentinel")?(ke={usage_mode:"model",type:"project",permission:"ro",cloneable:!0},Re=["usage_mode_general","usage_mode_automount","type_user","permission_rw"],n[66]=ke,n[67]=Re):(ke=n[66],Re=n[67]),n[68]!==T?(Ie=e=>{var n,i;(T(),e)&&(null===(n=F.current)||void 0===n||n.setFieldsValue({vfolderId:(0,c.wcZ)("VirtualFolderNode",(0,c.GlR)(e.id))}),null===(i=y.current)||void 0===i||i.refetch())},n[68]=T,n[69]=Ie):Ie=n[69],n[70]!==k||n[71]!==Ie?(Te=(0,p.jsx)(_.A,{open:k,initialValidate:!0,initialValues:ke,hiddenFormItems:Re,onRequestClose:Ie}),n[70]=k,n[71]=Ie,n[72]=Te):Te=n[72],n[73]!==ye||n[74]!==Te?(he=(0,p.jsxs)(p.Fragment,{children:[ye,Te]}),n[73]=ye,n[74]=Te,n[75]=he):he=n[75],he};function Q(e){return e.id}function W(e){return(0,c.omW)(e)}function H(e){var n;return 0===m().toNumber(null===e||void 0===e||null===(n=e.artifactRevision)||void 0===n?void 0:n.size)}function J(e){return null!=e.taskId}function Z(e){return{taskId:e.taskId,version:e.artifactRevision.version,artifact:{id:(0,c.omW)(e.artifactRevision.artifact.id),name:e.artifactRevision.artifact.name}}}var Y=i(30105),X=i(62601),ee=i(31495);h().extend(D());const{Title:ne,Text:ie,Paragraph:te}=y.A,ae=()=>{var e,n,i,t,r,l,o,s;const{token:u}=d.A.useToken(),{t:g}=(0,x.Bd)(),{upsertNotification:A}=(0,X.js)(),{artifactId:T}=(0,P.g)(),[S,D]=(0,c.TwB)(c.eIE),[j,L]=(0,f.useState)([]),[M,E]=(0,f.useState)([]),[B,K]=(0,f.useState)([]),[C,_]=(0,f.useState)([]),[O,N]=(0,ee.useQueryParams)({filter:(0,ee.withDefault)(ee.JsonParam,{})}),V=JSON.stringify(O.filter),{baiPaginationOption:w,tablePaginationOption:z,setTablePaginationOption:G}=(0,Y.L0)({current:1,pageSize:10}),q=(0,f.useMemo)((()=>({id:null!==T&&void 0!==T?T:"",offset:w.offset,limit:w.limit,filter:JSON.parse(V||"{}")})),[T,w.limit,w.offset,V]),U=(0,f.useDeferredValue)(q),Q=(0,f.useDeferredValue)(S),{artifact:W,groups:H}=(0,v.useLazyLoadQuery)(a,U,{fetchKey:Q===c.eIE?void 0:Q,fetchPolicy:Q===c.eIE?"store-and-network":"network-only"}),J=null===W||void 0===W||null===(e=W.latestVersion.edges[0])||void 0===e?void 0:e.node,Z=(0,c.faj)(null===W||void 0===W?void 0:W.pullingArtifactRevisions.edges.map((e=>null===e||void 0===e?void 0:e.node))),ae={key:"control",title:g("general.Control"),fixed:!0,required:!0,render:(e,n)=>{var i;const t=n.status;return(0,p.jsxs)(c.OOm,{gap:"xs",children:[(0,p.jsx)(k.A,{title:g("reservoirPage.PullThisVersion"),children:(0,p.jsx)(c.eMo,{size:"small",revisionsFrgmt:[n],loading:"PULLING"===t||"VERIFYING"===t,onClick:()=>{var e,i;null===W||void 0===W||null===(e=W.revisions)||void 0===e||null===(i=e.edges)||void 0===i||i.forEach((e=>{e.node.id===n.id&&K([e.node])}))}})}),(0,p.jsx)(k.A,{title:g("importArtifactRevisionToFolderModal.ImportToFolder"),children:(0,p.jsx)(F,{size:"small",revisionsFrgmt:m().map(m().filter(null===W||void 0===W||null===(i=W.revisions)||void 0===i?void 0:i.edges,(e=>e.node.id===n.id)),"node"),onClick:()=>{var e,i;null===W||void 0===W||null===(e=W.revisions)||void 0===e||null===(i=e.edges)||void 0===i||i.forEach((e=>{e.node.id===n.id&&_([e.node])}))}})}),(0,p.jsx)(k.A,{title:g("reservoirPage.RemoveThisVersion"),children:(0,p.jsx)(c.Ty7,{size:"small",title:g("reservoirPage.RemoveThisVersion"),revisionsFrgmt:[n],onClick:()=>{var e,i;null===W||void 0===W||null===(e=W.revisions)||void 0===e||null===(i=e.edges)||void 0===i||i.forEach((e=>{e.node.id===n.id&&E([e.node])}))}})})]})}};return(0,p.jsxs)("div",{children:[(0,p.jsxs)(c.OOm,{align:"center",style:{marginBottom:u.marginLG},justify:"between",children:[(0,p.jsxs)(c.OOm,{align:"center",gap:"xs",children:[(0,p.jsx)(ne,{level:3,style:{margin:0},children:null===W||void 0===W?void 0:W.name}),W&&(0,p.jsx)(c.bk_,{artifactTypeFrgmt:W})]}),(0,p.jsx)(c.u81,{value:S,autoUpdateDelay:1e4,loading:Q!==S,onChange:()=>{D()}})]}),Z.length>0&&(0,p.jsx)(c.OOm,{direction:"column",gap:"sm",align:"stretch",style:{marginBottom:u.marginMD},children:Z.map((e=>(0,p.jsx)(c.vy4,{pullingArtifactRevisionFrgmt:e,onOk:()=>{D()}},e.id)))}),(0,p.jsx)(c.Zuv,{title:g("reservoirPage.BasicInformation"),showDivider:!0,extra:(0,p.jsx)(R.Ay,{type:"primary",icon:(0,p.jsx)(b.A,{size:16}),onClick:()=>{J&&K([J])},disabled:!J||"SCANNED"!==J.status,children:J?g("reservoirPage.PullLatestVersion",{version:J.version}):"N/A"}),style:{marginBottom:u.marginMD},children:(0,p.jsxs)(I.A,{column:2,bordered:!0,children:[(0,p.jsx)(I.A.Item,{label:g("reservoirPage.Name"),children:null===W||void 0===W?void 0:W.name}),(0,p.jsx)(I.A.Item,{label:g("reservoirPage.Type"),children:W&&(0,p.jsx)(c.bk_,{artifactTypeFrgmt:W})}),(0,p.jsx)(I.A.Item,{label:g("reservoirPage.Size"),children:(0,p.jsx)(c.mQ0,{monospace:!0,children:null!==J&&void 0!==J&&J.size?null===(n=(0,c.GhK)(J.size,"auto"))||void 0===n?void 0:n.displayValue:"N/A"})}),(0,p.jsx)(I.A.Item,{label:g("reservoirPage.Source"),children:null!==W&&void 0!==W&&W.source?(0,p.jsx)(y.A.Link,{href:null!==(i=W.source.url)&&void 0!==i?i:"",target:"_blank",rel:"noopener noreferrer",children:W.source.name||"N/A"}):"N/A"}),(0,p.jsx)(I.A.Item,{label:g("reservoirPage.Registry"),children:(0,p.jsx)(y.A,{children:null!==W&&void 0!==W&&W.registry?"".concat(W.registry.name," (").concat(W.registry.url,")"):"N/A"})}),(0,p.jsx)(I.A.Item,{label:g("reservoirPage.LastUpdated"),span:2,children:null!==W&&void 0!==W&&W.updatedAt?h()(null===W||void 0===W?void 0:W.updatedAt).format("lll"):"N/A"}),(0,p.jsx)(I.A.Item,{label:g("reservoirPage.Description"),span:2,children:null!==W&&void 0!==W&&W.description?(0,p.jsx)(te,{children:W.description}):"N/A"})]})}),(0,p.jsx)(c.Zuv,{title:g("reservoirPage.VersionList"),showDivider:!0,style:{marginBottom:u.marginMD},styles:{body:{padding:"".concat(u.paddingSM,"px ").concat(u.paddingLG,"px ").concat(u.paddingLG,"px ").concat(u.paddingLG,"px")}},children:(0,p.jsxs)(c.OOm,{direction:"column",gap:"sm",align:"stretch",children:[(0,p.jsxs)(c.OOm,{align:"stretch",justify:"between",children:[(0,p.jsx)(c.tXd,{combinationMode:"AND",onChange:e=>{N({filter:null!==e&&void 0!==e?e:{}},"replaceIn")},filterProperties:[{fixedOperator:"equals",propertyLabel:g("reservoirPage.Status"),key:"status",type:"enum",options:m().map(["SCANNED","PULLING","PULLED","VERIFYING","NEEDS_APPROVAL","FAILED","AVAILABLE","REJECTED"],(e=>({label:e,value:e})))},{fixedOperator:"contains",propertyLabel:g("reservoirPage.Version"),key:"version",type:"string"},{propertyLabel:g("reservoirPage.Size"),key:"size",type:"number",operators:["equals","greaterThan","greaterOrEqual","lessThan","lessOrEqual"]}]}),j.length>0?(0,p.jsxs)(c.OOm,{gap:"xs",children:[(0,p.jsxs)(ie,{children:[j.length," selected"]}),(0,p.jsx)(k.A,{title:g("reservoirPage.PullSelectedVersions"),children:(0,p.jsx)(c.eMo,{type:"default",revisionsFrgmt:j.flatMap((e=>e.data)),onClick:()=>{W&&K(j.flatMap((e=>e.data)))}})}),(0,p.jsx)(k.A,{title:g("importArtifactRevisionToFolderModal.ImportToFolder"),children:(0,p.jsx)(F,{type:"default",revisionsFrgmt:j.flatMap((e=>e.data)),onClick:()=>{W&&_(m().flatMap(j,(e=>e.data)))}})}),(0,p.jsx)(k.A,{title:g("reservoirPage.RemoveSelectedVersions"),children:(0,p.jsx)(c.Ty7,{style:{borderColor:u.colorBorder},revisionsFrgmt:j.flatMap((e=>e.data)),onClick:()=>{W&&E(j.flatMap((e=>e.data)))}})})]}):null]}),(0,p.jsx)(c.eUh,{artifactRevisionFrgmt:(0,c.faj)(null===W||void 0===W||null===(t=W.revisions)||void 0===t||null===(r=t.edges)||void 0===r?void 0:r.map((e=>e.node))),latestRevisionFrgmt:null===W||void 0===W?void 0:W.latestVersion.edges[0].node,loading:U!==q,pagination:{current:z.current,pageSize:z.pageSize,total:null!==(l=null===W||void 0===W||null===(o=W.revisions)||void 0===o?void 0:o.count)&&void 0!==l?l:0,onChange:(e,n)=>{m().isNumber(e)&&m().isNumber(n)&&G({current:e,pageSize:n})}},onRow:e=>({onClick:n=>{var i;n.stopPropagation();const t=n.target;if(t.closest("button")||t.closest("a"))return;if(!W)return;const a=null===(i=W.revisions.edges.find((n=>n.node.id===e.id)))||void 0===i?void 0:i.node;a&&L((n=>{const i=n.filter((n=>n.id!==e.id));return i.length===n.length?[...n,{id:e.id,data:a}]:i}))}}),rowSelection:{type:"checkbox",onChange:e=>{if(!W)return;const n=W.revisions,i=n.edges.map((e=>e.node.id));L((t=>{const a=t.filter((e=>!i.includes(e.id))),r=n.edges.filter((n=>e.includes(n.node.id))).map((e=>({id:e.node.id,data:e.node})));return a.concat(r)}))},selectedRowKeys:j.map((e=>e.id))},customizeColumns:e=>[e[0],e[1],ae,...e.slice(2)]})]})}),(0,p.jsx)(c.VCx,{selectedArtifactFrgmt:null!==W&&void 0!==W?W:null,selectedArtifactRevisionFrgmt:B,open:!!W&&!m().isEmpty(B),connectionIds:W?[W.pullingArtifactRevisions.__id]:void 0,onOk:(e,n)=>{K([]),n.forEach((e=>{A({message:g("reservoirPage.PullingArtifact",{name:e.artifact.name,version:e.version}),type:"info",open:!0,duration:0,backgroundTask:{status:"pending",taskId:e.taskId,promise:null,percent:0,onChange:{resolved:(n,i)=>({type:"success",message:g("reservoirPage.SuccessFullyPulledArtifact",{name:e.artifact.name,version:e.version}),showIcon:!0,toText:g("reservoirPage.GoToArtifact"),to:"/reservoir/".concat(e.artifact.id)}),rejected:(n,i)=>g("reservoirPage.FailedToPullArtifact",{name:e.artifact.name,version:e.version})}}})}))},onCancel:()=>{K([])}}),(0,p.jsx)(c.L$P,{selectedArtifactFrgmt:null!==W&&void 0!==W?W:null,selectedArtifactRevisionFrgmt:M,onOk:()=>{E([])},onCancel:()=>{E([])},open:!!W&&!m().isEmpty(M)}),(0,p.jsx)($,{selectedArtifactRevisionFrgmt:C,modelStoreProjectsFrgmt:null!==(s=null===H||void 0===H?void 0:H[0])&&void 0!==s?s:void 0,onOk:(e,n,i)=>{_([]),D(),n.forEach((e=>{A({message:g("importArtifactRevisionToFolderModal.ImportingArtifact",{name:e.artifact.name,version:e.version}),type:"info",open:!0,duration:0,backgroundTask:{status:"pending",taskId:e.taskId,promise:null,percent:0,onChange:{resolved:(n,t)=>({type:"success",message:g("importArtifactRevisionToFolderModal.SuccessfullyImportedArtifact",{name:e.artifact.name,version:e.version}),showIcon:!0,toText:g(i?"data.folders.OpenAFolder":"reservoirPage.GoToArtifact"),to:i?{search:new URLSearchParams({folder:(0,c.omW)(i)}).toString()}:"/reservoir/".concat(e.artifact.id)}),rejected:(n,i)=>g("importArtifactRevisionToFolderModal.FailedToImportArtifact",{name:e.artifact.name,version:e.version})}}})}))},onCancel:()=>{_([])},open:!!W&&!m().isEmpty(C)})]})}}}]);
//# sourceMappingURL=6858.7854222f.chunk.js.map