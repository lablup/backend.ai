"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[9630],{65239:(e,a,n)=>{n.r(a),n.d(a,{default:()=>l});const t=function(){var e=[{alias:null,args:[{kind:"Literal",name:"is_active",value:!0}],concreteType:"Domain",kind:"LinkedField",name:"domains",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:"domains(is_active:true)"}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DomainSelectorQuery",selections:e,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"DomainSelectorQuery",selections:e},params:{cacheID:"9df762094b74dc3eb8079edfcc73765f",id:null,metadata:{},name:"DomainSelectorQuery",operationKind:"query",text:"query DomainSelectorQuery {\n  domains(is_active: true) {\n    name\n  }\n}\n"}}}();t.hash="c14d362fa40cf9a3cef5d1d71202cc5f";const l=t},60342:(e,a,n)=>{n.r(a),n.d(a,{default:()=>l});const t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"QuotaScopeCardFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"quota_scope_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storage_host_name",storageKey:null},{alias:null,args:null,concreteType:"QuotaDetails",kind:"LinkedField",name:"details",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hard_limit_bytes",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"usage_bytes",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"QuotaSettingModalFragment"}],type:"QuotaScope",abstractKey:null,hash:"78fe420c92ce5b9c8d5c133d1f9c389f"},l=t},90272:(e,a,n)=>{n.r(a),n.d(a,{default:()=>l});const t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"quota_scope_id"},{defaultValue:null,kind:"LocalArgument",name:"storage_host_name"}],a=[{alias:null,args:[{kind:"Variable",name:"quota_scope_id",variableName:"quota_scope_id"},{kind:"Variable",name:"storage_host_name",variableName:"storage_host_name"}],concreteType:"UnsetQuotaScope",kind:"LinkedField",name:"unset_quota_scope",plural:!1,selections:[{alias:null,args:null,concreteType:"QuotaScope",kind:"LinkedField",name:"quota_scope",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"quota_scope_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storage_host_name",storageKey:null},{alias:null,args:null,concreteType:"QuotaDetails",kind:"LinkedField",name:"details",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hard_limit_bytes",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"QuotaScopeCardUnsetMutation",selections:a,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"QuotaScopeCardUnsetMutation",selections:a},params:{cacheID:"338836966362b14e823520f40fa56a73",id:null,metadata:{},name:"QuotaScopeCardUnsetMutation",operationKind:"mutation",text:"mutation QuotaScopeCardUnsetMutation(\n  $quota_scope_id: String!\n  $storage_host_name: String!\n) {\n  unset_quota_scope(quota_scope_id: $quota_scope_id, storage_host_name: $storage_host_name) {\n    quota_scope {\n      id\n      quota_scope_id\n      storage_host_name\n      details {\n        hard_limit_bytes\n      }\n    }\n  }\n}\n"}}}();t.hash="272001cc642518fb66015dcc367b9f65";const l=t},51009:(e,a,n)=>{n.r(a),n.d(a,{default:()=>l});const t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"QuotaSettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"quota_scope_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storage_host_name",storageKey:null},{alias:null,args:null,concreteType:"QuotaDetails",kind:"LinkedField",name:"details",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hard_limit_bytes",storageKey:null}],storageKey:null}],type:"QuotaScope",abstractKey:null,hash:"1c5ad8315a2d78cb376e7436dc6a8627"},l=t},54768:(e,a,n)=>{n.r(a),n.d(a,{default:()=>l});const t=function(){var e={defaultValue:null,kind:"LocalArgument",name:"props"},a={defaultValue:null,kind:"LocalArgument",name:"quota_scope_id"},n={defaultValue:null,kind:"LocalArgument",name:"storage_host_name"},t=[{alias:null,args:[{kind:"Variable",name:"props",variableName:"props"},{kind:"Variable",name:"quota_scope_id",variableName:"quota_scope_id"},{kind:"Variable",name:"storage_host_name",variableName:"storage_host_name"}],concreteType:"SetQuotaScope",kind:"LinkedField",name:"set_quota_scope",plural:!1,selections:[{alias:null,args:null,concreteType:"QuotaScope",kind:"LinkedField",name:"quota_scope",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"quota_scope_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storage_host_name",storageKey:null},{alias:null,args:null,concreteType:"QuotaDetails",kind:"LinkedField",name:"details",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hard_limit_bytes",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,a,n],kind:"Fragment",metadata:null,name:"QuotaSettingModalSetMutation",selections:t,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,n,e],kind:"Operation",name:"QuotaSettingModalSetMutation",selections:t},params:{cacheID:"d337cab9be9523bfde2bfb7d6bed595b",id:null,metadata:{},name:"QuotaSettingModalSetMutation",operationKind:"mutation",text:"mutation QuotaSettingModalSetMutation(\n  $quota_scope_id: String!\n  $storage_host_name: String!\n  $props: QuotaScopeInput!\n) {\n  set_quota_scope(quota_scope_id: $quota_scope_id, storage_host_name: $storage_host_name, props: $props) {\n    quota_scope {\n      id\n      quota_scope_id\n      storage_host_name\n      details {\n        hard_limit_bytes\n      }\n    }\n  }\n}\n"}}}();t.hash="0e8509b3174920c1dd917ece91d41161";const l=t},30439:(e,a,n)=>{n.r(a),n.d(a,{default:()=>l});const t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StorageHostResourcePanelFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backend",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"usage",storageKey:null}],type:"StorageVolume",abstractKey:null,hash:"30a1b4101eeb2fae45385780dbc0ddcc"},l=t},4972:(e,a,n)=>{n.r(a),n.d(a,{default:()=>l});const t=function(){var e={defaultValue:null,kind:"LocalArgument",name:"quota_scope_id"},a={defaultValue:null,kind:"LocalArgument",name:"skipQuotaScope"},n={defaultValue:null,kind:"LocalArgument",name:"storage_host_name"},t=[{kind:"Variable",name:"quota_scope_id",variableName:"quota_scope_id"},{kind:"Variable",name:"storage_host_name",variableName:"storage_host_name"}];return{fragment:{argumentDefinitions:[e,a,n],kind:"Fragment",metadata:null,name:"StorageHostSettingsPanelQuery",selections:[{condition:"skipQuotaScope",kind:"Condition",passingValue:!1,selections:[{alias:null,args:t,concreteType:"QuotaScope",kind:"LinkedField",name:"quota_scope",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"QuotaSettingModalFragment"},{args:null,kind:"FragmentSpread",name:"QuotaScopeCardFragment"}],storageKey:null}]}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,n,a],kind:"Operation",name:"StorageHostSettingsPanelQuery",selections:[{condition:"skipQuotaScope",kind:"Condition",passingValue:!1,selections:[{alias:null,args:t,concreteType:"QuotaScope",kind:"LinkedField",name:"quota_scope",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"quota_scope_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storage_host_name",storageKey:null},{alias:null,args:null,concreteType:"QuotaDetails",kind:"LinkedField",name:"details",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hard_limit_bytes",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"usage_bytes",storageKey:null}],storageKey:null}],storageKey:null}]}]},params:{cacheID:"378699d92e64ba9559bfbe8e533d6c6a",id:null,metadata:{},name:"StorageHostSettingsPanelQuery",operationKind:"query",text:"query StorageHostSettingsPanelQuery(\n  $quota_scope_id: String!\n  $storage_host_name: String!\n  $skipQuotaScope: Boolean!\n) {\n  quota_scope(storage_host_name: $storage_host_name, quota_scope_id: $quota_scope_id) @skip(if: $skipQuotaScope) {\n    ...QuotaSettingModalFragment\n    ...QuotaScopeCardFragment\n    id\n  }\n}\n\nfragment QuotaScopeCardFragment on QuotaScope {\n  id\n  quota_scope_id\n  storage_host_name\n  details {\n    hard_limit_bytes\n    usage_bytes\n  }\n  ...QuotaSettingModalFragment\n}\n\nfragment QuotaSettingModalFragment on QuotaScope {\n  id\n  quota_scope_id\n  storage_host_name\n  details {\n    hard_limit_bytes\n  }\n}\n"}}}();t.hash="ef16372a7f5bf0c1844a65d4b63fe4d9";const l=t},63040:(e,a,n)=>{n.r(a),n.d(a,{default:()=>l});const t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StorageHostSettingsPanel_storageVolumeFrgmt",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null}],type:"StorageVolume",abstractKey:null,hash:"2f9e5e6060806e6f9265e5cbbd325afe"},l=t},14554:(e,a,n)=>{n.r(a),n.d(a,{default:()=>l});const t=function(){var e={defaultValue:null,kind:"LocalArgument",name:"filter"},a={defaultValue:null,kind:"LocalArgument",name:"limit"},n={defaultValue:null,kind:"LocalArgument",name:"offset"},t=[{alias:null,args:[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Literal",name:"is_active",value:!0},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"}],concreteType:"UserList",kind:"LinkedField",name:"user_list",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"resource_policy",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,a,n],kind:"Fragment",metadata:null,name:"UserSelectorQuery",selections:t,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,n,e],kind:"Operation",name:"UserSelectorQuery",selections:t},params:{cacheID:"f552e13a727e58f49a7a7e49a466d4d2",id:null,metadata:{},name:"UserSelectorQuery",operationKind:"query",text:"query UserSelectorQuery(\n  $limit: Int!\n  $offset: Int!\n  $filter: String\n) {\n  user_list(limit: $limit, offset: $offset, filter: $filter, is_active: true) {\n    items {\n      id\n      is_active\n      email\n      resource_policy\n    }\n  }\n}\n"}}}();t.hash="323d93fb2d8eb4ee2d1d3677121f9ad2";const l=t},79630:(e,a,n)=>{n.r(a),n.d(a,{default:()=>ne});var t,l=n(72338),o=n(72375),i=n(8227),s=n(24713),r=n(50128),d=n(24798),u=n(46976),c=n.n(u),m=n(91788),g=n(22018),p=n(60598);const y=e=>{let{storageVolumeFrgmt:a}=e;const{t:l}=(0,m.Bd)(),u=(0,g.useFragment)(void 0!==t?t:t=n(30439),a),y=JSON.parse((null===u||void 0===u?void 0:u.usage)||"{}"),_=null===y||void 0===y?void 0:y.used_bytes,v=null===y||void 0===y?void 0:y.capacity_bytes,S={used_bytes:_,capacity_bytes:v,percent:Number((100*(v>0?_/v:0)).toFixed(1))};return(0,p.jsxs)(i.A,{size:"small",bordered:!0,column:3,children:[(0,p.jsxs)(i.A.Item,{label:l("storageHost.Usage"),span:3,children:[(null===S||void 0===S?void 0:S.percent)<100?(0,p.jsx)(s.A,{size:[200,15],percent:null===S||void 0===S?void 0:S.percent,strokeColor:(0,o.yc)(null===S||void 0===S?void 0:S.percent)}):(0,p.jsx)(s.A,{size:[200,15],percent:null===S||void 0===S?void 0:S.percent,status:"exception"}),(0,p.jsxs)(r.A.Text,{type:"secondary",children:[l("storageHost.Used"),":"," "]}),(0,o.sB)(null===S||void 0===S?void 0:S.used_bytes),(0,p.jsx)(r.A.Text,{type:"secondary",children:" / "}),(0,p.jsxs)(r.A.Text,{type:"secondary",children:[l("storageHost.Total"),":"," "]}),(0,o.sB)(null===S||void 0===S?void 0:S.capacity_bytes)]}),(0,p.jsx)(i.A.Item,{label:l("agent.Endpoint"),children:null===u||void 0===u?void 0:u.path}),(0,p.jsx)(i.A.Item,{label:l("agent.BackendType"),children:null===u||void 0===u?void 0:u.backend}),(0,p.jsx)(i.A.Item,{label:l("agent.Capabilities"),children:c().map(null===u||void 0===u?void 0:u.capabilities,(e=>(0,p.jsx)(d.A,{children:e},e)))})]})};var _,v=n(23441),S=n(1581),f=n(53350);const b=e=>{let{onSelectDomain:a,...t}=e;const{t:l}=(0,m.Bd)(),{domains:o}=(0,g.useLazyLoadQuery)(void 0!==_?_:_=n(65239),{},{fetchPolicy:"store-and-network"});return(0,p.jsxs)(S.A,{onChange:(e,n)=>{null===a||void 0===a||a(n)},placeholder:l("storageHost.quotaSettings.SelectDomain"),...t,children:[c().map(o,(e=>(0,p.jsx)(S.A.Option,{domainName:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.name))),";"]})};var k=n(85084);const h=e=>{let{...a}=e;return(0,p.jsx)(k.A,{...a,disableDefaultFilter:!0})};var F=n(53051),x=n(40991),A=n(38936),j=n(90055),q=function(e,a){return f.createElement(j.A,(0,x.A)({},e,{ref:a,icon:A.A}))};const Q=f.forwardRef(q);var K,C,O=n(59203),L=n(9571),P=n(4833),V=n(52335),D=n(37826),E=n(24034),H=n(66972);const T=e=>{let{quotaScopeFrgmt:a,showAddButtonWhenEmpty:t,onClickEdit:i,...s}=e;const{t:r}=(0,m.Bd)(),{token:d}=L.A.useToken(),u=(0,g.useFragment)(void 0!==K?K:K=n(60342),a),[c,y]=(0,g.useMutation)(void 0!==C?C:C=n(90272)),_=(0,p.jsx)(P.A,{style:{width:"100%"},image:P.A.PRESENTED_IMAGE_SIMPLE,description:(0,p.jsx)("div",{children:r("storageHost.quotaSettings.SelectFirst")})}),v=(0,p.jsx)(P.A,{style:{width:"100%"},image:P.A.PRESENTED_IMAGE_SIMPLE,description:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{style:{margin:10},children:r("storageHost.quotaSettings.ClickSettingButton")}),(0,p.jsx)(V.Ay,{icon:(0,p.jsx)(F.A,{}),onClick:()=>i&&i(),children:r("storageHost.quotaSettings.AddQuotaConfigs")})]})});return(0,p.jsx)(D.A,{bordered:!0,rowKey:"id",columns:[{title:r("storageHost.quotaSettings.QuotaScopeId"),dataIndex:"quota_scope_id",key:"quota_scope_id",render:e=>(0,p.jsx)("code",{children:e})},{title:r("storageHost.HardLimit")+" (GB)",dataIndex:["details","hard_limit_bytes"],key:"hard_limit_bytes",render:e=>(0,p.jsx)(p.Fragment,{children:(0,o.wb)(e)})},{title:r("storageHost.Usage")+" (GB)",dataIndex:["details","usage_bytes"],key:"usage_bytes",render:e=>(0,p.jsx)(p.Fragment,{children:(0,o.wb)(e)})},{title:r("general.Control"),key:"control",render:()=>(0,p.jsxs)(l.A,{gap:d.marginSM,children:[(0,p.jsx)(V.Ay,{icon:(0,p.jsx)(Q,{}),onClick:()=>i&&i(),children:r("button.Edit")}),(0,p.jsx)(E.A,{title:r("storageHost.quotaSettings.UnsetCustomSettings"),description:r("storageHost.quotaSettings.ConfirmUnsetCustomQuota"),placement:"bottom",onConfirm:()=>{u&&c({variables:{quota_scope_id:u.quota_scope_id,storage_host_name:u.storage_host_name},onCompleted(){H.Ay.success(r("storageHost.quotaSettings.QuotaScopeSuccessfullyUpdated"))},onError(e){H.Ay.error(null===e||void 0===e?void 0:e.message)}})},children:(0,p.jsx)(V.Ay,{loading:y,danger:!0,icon:(0,p.jsx)(O.A,{}),children:r("button.Unset")})})]})}],dataSource:u?[u]:[],locale:{emptyText:t?v:_},pagination:!1})};var w,N,$=n(9189),I=n(13170),M=n(83978);const B=e=>{var a;let{quotaScopeFrgmt:t=null,onRequestClose:l,...i}=e;const{t:s}=(0,m.Bd)(),r=(0,f.useRef)(null),d=(0,g.useFragment)(void 0!==w?w:w=n(51009),t),[u,c]=(0,g.useMutation)(void 0!==N?N:N=n(54768));return(0,p.jsx)($.A,{...i,destroyOnClose:!0,onOk:e=>{var a;null===(a=r.current)||void 0===a||a.validateFields().then((e=>{u({variables:{quota_scope_id:(null===d||void 0===d?void 0:d.quota_scope_id)||"",storage_host_name:(null===d||void 0===d?void 0:d.storage_host_name)||"",props:{hard_limit_bytes:(0,o._S)(null===e||void 0===e?void 0:e.hard_limit_bytes)}},onCompleted(e){var a,n;null!==e&&void 0!==e&&null!==(a=e.set_quota_scope)&&void 0!==a&&null!==(n=a.quota_scope)&&void 0!==n&&n.id?H.Ay.success(s("storageHost.quotaSettings.QuotaScopeSuccessfullyUpdated")):H.Ay.error(s("dialog.ErrorOccurred")),l()},onError(e){console.log(e),H.Ay.error(null===e||void 0===e?void 0:e.message)}})}))},confirmLoading:c,onCancel:l,title:s("storageHost.quotaSettings.QuotaSettings"),children:(0,p.jsx)(I.A,{ref:r,preserve:!1,labelCol:{span:6},wrapperCol:{span:20},validateTrigger:["onChange","onBlur"],style:{marginBottom:40,marginTop:20},children:(0,p.jsx)(I.A.Item,{name:"hard_limit_bytes",label:s("storageHost.HardLimit"),initialValue:(0,o.wb)(null===d||void 0===d||null===(a=d.details)||void 0===a?void 0:a.hard_limit_bytes),rules:[{pattern:/^\d+(\.\d+)?$/,message:s("storageHost.quotaSettings.AllowNumberAndDot")||"Allows numbers and .(dot) only"}],children:(0,p.jsx)(M.A,{addonAfter:"GB",type:"number",step:.25,style:{width:"70%"}})})})})};var U;const R=e=>{let{onSelectUser:a,...t}=e;const{t:l}=(0,m.Bd)(),[o,i]=(0,f.useState)(""),s=(0,f.useDeferredValue)(o),{user_list:r}=(0,g.useLazyLoadQuery)(void 0!==U?U:U=n(14554),{limit:150,offset:0,filter:0===(null===s||void 0===s?void 0:s.length)?null:'email ilike "%'+s+'%"'},{fetchPolicy:"store-and-network"});return(0,p.jsx)(S.A,{filterOption:!1,searchValue:o,loading:s!==o,onSearch:e=>{i(e)},onChange:e=>{a(c().find(null===r||void 0===r?void 0:r.items,(a=>(null===a||void 0===a?void 0:a.email)===e)))},showSearch:!0,placeholder:l("storageHost.quotaSettings.SelectUser"),options:c().map(null===r||void 0===r?void 0:r.items,(e=>({value:null===e||void 0===e?void 0:e.email,label:null===e||void 0===e?void 0:e.email}))).sort(((e,a)=>e.value&&a.value&&e.value>a.value?1:-1)),...t})};var z,W,G=n(40915),X=n(20418),Z=n(49978);const J=e=>{let{storageVolumeFrgmt:a}=e;const{t:t}=(0,m.Bd)(),i=(0,g.useFragment)(void 0!==z?z:z=n(63040),a),[s,r]=(0,f.useTransition)(),d=(0,v.eZ)(),[u,c]=(0,f.useState)("user"),[y,_]=(0,f.useState)(d),[S,k]=(0,f.useState)();(0,f.useState)();const[F,x]=(0,f.useState)(),[A,j]=(0,f.useState)();(0,f.useState)();const q=(0,o.sZ)(u,("project"===u?S:F)||""),[Q,{toggle:K}]=(0,G.A)(!1),[C]=(0,v.Tw)("default"),{quota_scope:O}=(0,g.useLazyLoadQuery)(void 0!==W?W:W=n(4972),{quota_scope_id:q,skipQuotaScope:void 0===q||""===q,storage_host_name:(null===i||void 0===i?void 0:i.id)||""},{fetchPolicy:"network-only",fetchKey:C});return(0,p.jsx)(l.A,{direction:"column",align:"stretch",children:(0,p.jsxs)(X.A,{title:t("storageHost.QuotaSettings"),tabList:[{key:"user",tab:t("storageHost.ForUser")},{key:"project",tab:t("storageHost.ForProject")}],activeTabKey:u,onTabChange:e=>{r((()=>{c(e)}))},children:[(0,p.jsx)(l.A,{justify:"between",children:"project"===u?(0,p.jsx)(l.A,{style:{marginBottom:10},children:(0,p.jsxs)(I.A,{layout:"inline",children:[(0,p.jsx)(I.A.Item,{label:t("resourceGroup.Domain"),children:(0,p.jsx)(b,{style:{width:"20vw",marginRight:10},value:y,onSelectDomain:e=>{r((()=>{_(null===e||void 0===e?void 0:e.domainName),k(void 0)}))}})}),(0,p.jsx)(I.A.Item,{label:t("webui.menu.Project"),children:(0,p.jsx)(h,{value:S,disabled:!y,domain:y||"",onSelectProject:e=>{r((()=>{k(null===e||void 0===e?void 0:e.projectId)}))}})})]})}):(0,p.jsx)(I.A,{layout:"inline",children:(0,p.jsx)(I.A.Item,{label:t("data.User"),children:(0,p.jsx)(R,{style:{width:"30vw",marginBottom:10},value:A,onSelectUser:e=>{j(null===e||void 0===e?void 0:e.email),r((()=>{x(null===e||void 0===e?void 0:e.id)}))}})})})}),(0,p.jsx)(Z.A,{spinning:s,children:(0,p.jsx)(T,{quotaScopeFrgmt:O||null,onClickEdit:()=>{K()},showAddButtonWhenEmpty:"project"===u&&!!S||"user"===u&&!!F})}),(0,p.jsx)(B,{open:Q,quotaScopeFrgmt:O||null,onRequestClose:()=>{K()}})]})})};var Y,ee=n(41170),ae=n(50423);const ne=()=>{var e,a;const{hostname:t}=(0,ae.g)(),o=(0,v.CX)(),i=(0,v.f0)(),{t:s}=(0,m.Bd)(),{storage_volume:d}=(0,g.useLazyLoadQuery)(void 0!==Y?Y:Y=n(13872),{id:t||""}),u=null!==(e=null===d||void 0===d||null===(a=d.capabilities)||void 0===a?void 0:a.includes("quota"))&&void 0!==e&&e;return(0,p.jsxs)(l.A,{direction:"column",align:"stretch",gap:"sm",children:[(0,p.jsx)(ee.A,{items:[{title:s("webui.menu.Resources"),onClick:e=>{e.preventDefault(),i("/agent")},href:"/agent"},{title:s("storageHost.StorageSetting")}]}),(0,p.jsx)(r.A.Title,{level:3,style:{margin:0},children:t||""}),(0,p.jsx)(y,{storageVolumeFrgmt:d||null}),o.supports("quota-scope")&&(0,p.jsx)(p.Fragment,{children:u?(0,p.jsx)(f.Suspense,{fallback:(0,p.jsx)("div",{children:"loading..."}),children:(0,p.jsx)(J,{storageVolumeFrgmt:d||null})}):(0,p.jsx)(X.A,{title:s("storageHost.QuotaSettings"),children:(0,p.jsx)(P.A,{image:P.A.PRESENTED_IMAGE_SIMPLE,description:s("storageHost.QuotaDoesNotSupported")})})})]})}},13872:(e,a,n)=>{n.r(a),n.d(a,{default:()=>l});const t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],a=[{kind:"Variable",name:"id",variableName:"id"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"StorageHostSettingPageQuery",selections:[{alias:null,args:a,concreteType:"StorageVolume",kind:"LinkedField",name:"storage_volume",plural:!1,selections:[n,t,{args:null,kind:"FragmentSpread",name:"StorageHostResourcePanelFragment"},{args:null,kind:"FragmentSpread",name:"StorageHostSettingsPanel_storageVolumeFrgmt"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"StorageHostSettingPageQuery",selections:[{alias:null,args:a,concreteType:"StorageVolume",kind:"LinkedField",name:"storage_volume",plural:!1,selections:[n,t,{alias:null,args:null,kind:"ScalarField",name:"backend",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"usage",storageKey:null}],storageKey:null}]},params:{cacheID:"821175f86743d9d81be2a55aca371919",id:null,metadata:{},name:"StorageHostSettingPageQuery",operationKind:"query",text:"query StorageHostSettingPageQuery(\n  $id: String\n) {\n  storage_volume(id: $id) {\n    id\n    capabilities\n    ...StorageHostResourcePanelFragment\n    ...StorageHostSettingsPanel_storageVolumeFrgmt\n  }\n}\n\nfragment StorageHostResourcePanelFragment on StorageVolume {\n  id\n  backend\n  capabilities\n  path\n  usage\n}\n\nfragment StorageHostSettingsPanel_storageVolumeFrgmt on StorageVolume {\n  id\n  capabilities\n}\n"}}}();t.hash="f6e77057e83b0449ef99e8918e794b24";const l=t},38936:(e,a,n)=>{n.d(a,{A:()=>t});const t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z"}}]},name:"edit",theme:"filled"}},59203:(e,a,n)=>{n.d(a,{A:()=>r});var t=n(40991),l=n(53350),o=n(73768),i=n(90055),s=function(e,a){return l.createElement(i.A,(0,t.A)({},e,{ref:a,icon:o.A}))};const r=l.forwardRef(s)},24034:(e,a,n)=>{n.d(a,{A:()=>j});var t=n(53350),l=n(33310),o=n(62097),i=n.n(o),s=n(5596),r=n(79876),d=n(22028),u=n(12510),c=n(79442),m=n(52110),g=n(52335),p=n(59036),y=n(10582),_=n(43),v=n(45762),S=n(14275);const f=(0,S.OF)("Popconfirm",(e=>(e=>{const{componentCls:a,iconCls:n,antCls:t,zIndexPopup:l,colorText:o,colorWarning:i,marginXXS:s,marginXS:r,fontSize:d,fontWeightStrong:u,colorTextHeading:c}=e;return{[a]:{zIndex:l,[`&${t}-popover`]:{fontSize:d},[`${a}-message`]:{marginBottom:r,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${a}-message-icon ${n}`]:{color:i,fontSize:d,lineHeight:1,marginInlineEnd:r},[`${a}-title`]:{fontWeight:u,color:c,"&:only-child":{fontWeight:"normal"}},[`${a}-description`]:{marginTop:s,color:o}},[`${a}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:r}}}}})(e)),(e=>{const{zIndexPopupBase:a}=e;return{zIndexPopup:a+60}}),{resetStyle:!1});var b=function(e,a){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(t=Object.getOwnPropertySymbols(e);l<t.length;l++)a.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]])}return n};const k=e=>{const{prefixCls:a,okButtonProps:n,cancelButtonProps:o,title:i,description:s,cancelText:r,okText:u,okType:v="primary",icon:S=t.createElement(l.A,null),showCancel:f=!0,close:b,onConfirm:k,onCancel:h,onPopupClick:F}=e,{getPrefixCls:x}=t.useContext(d.QO),[A]=(0,y.A)("Popconfirm",_.A.Popconfirm),j=(0,m.b)(i),q=(0,m.b)(s);return t.createElement("div",{className:`${a}-inner-content`,onClick:F},t.createElement("div",{className:`${a}-message`},S&&t.createElement("span",{className:`${a}-message-icon`},S),t.createElement("div",{className:`${a}-message-text`},j&&t.createElement("div",{className:`${a}-title`},j),q&&t.createElement("div",{className:`${a}-description`},q))),t.createElement("div",{className:`${a}-buttons`},f&&t.createElement(g.Ay,Object.assign({onClick:h,size:"small"},o),r||(null===A||void 0===A?void 0:A.cancelText)),t.createElement(c.A,{buttonProps:Object.assign(Object.assign({size:"small"},(0,p.DU)(v)),n),actionFn:k,close:b,prefixCls:x("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},u||(null===A||void 0===A?void 0:A.okText))))},h=e=>{const{prefixCls:a,placement:n,className:l,style:o}=e,s=b(e,["prefixCls","placement","className","style"]),{getPrefixCls:r}=t.useContext(d.QO),u=r("popconfirm",a),[c]=f(u);return c(t.createElement(v.Ay,{placement:n,className:i()(u,l),style:o,content:t.createElement(k,Object.assign({prefixCls:u},s))}))};var F=function(e,a){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(t=Object.getOwnPropertySymbols(e);l<t.length;l++)a.indexOf(t[l])<0&&Object.prototype.propertyIsEnumerable.call(e,t[l])&&(n[t[l]]=e[t[l]])}return n};const x=t.forwardRef(((e,a)=>{var n,o,c,m,g,p;const{prefixCls:y,placement:_="top",trigger:v="click",okType:S="primary",icon:b=t.createElement(l.A,null),children:h,overlayClassName:x,onOpenChange:A,onVisibleChange:j,overlayStyle:q,styles:Q,classNames:K}=e,C=F(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange","overlayStyle","styles","classNames"]),{getPrefixCls:O,popconfirm:L}=t.useContext(d.QO),[P,V]=(0,s.A)(!1,{value:null!==(n=e.open)&&void 0!==n?n:e.visible,defaultValue:null!==(o=e.defaultOpen)&&void 0!==o?o:e.defaultVisible}),D=(e,a)=>{V(e,!0),null===j||void 0===j||j(e),null===A||void 0===A||A(e,a)},E=O("popconfirm",y),H=i()(E,x,null===(c=null===L||void 0===L?void 0:L.classNames)||void 0===c?void 0:c.root,null===K||void 0===K?void 0:K.root),T=i()(null===(m=null===L||void 0===L?void 0:L.classNames)||void 0===m?void 0:m.body,null===K||void 0===K?void 0:K.body),[w]=f(E);return w(t.createElement(u.A,Object.assign({},(0,r.A)(C,["title"]),{trigger:v,placement:_,onOpenChange:(a,n)=>{const{disabled:t=!1}=e;t||D(a,n)},open:P,ref:a,classNames:{root:H,body:T},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},null===(g=null===L||void 0===L?void 0:L.styles)||void 0===g?void 0:g.root),null===L||void 0===L?void 0:L.style),q),null===Q||void 0===Q?void 0:Q.root),body:Object.assign(Object.assign({},null===(p=null===L||void 0===L?void 0:L.styles)||void 0===p?void 0:p.body),null===Q||void 0===Q?void 0:Q.body)},content:t.createElement(k,Object.assign({okType:S,icon:b},e,{prefixCls:E,close:e=>{D(!1,e)},onConfirm:a=>{var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(void 0,a)},onCancel:a=>{var n;D(!1,a),null===(n=e.onCancel)||void 0===n||n.call(void 0,a)}})),"data-popover-inject":!0}),h))})),A=x;A._InternalPanelDoNotUseOrYouWillBeFired=h;const j=A}}]);
//# sourceMappingURL=9630.31f1ee55.chunk.js.map