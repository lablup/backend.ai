"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[2812],{39667:(e,n,o)=>{o.d(n,{A:()=>_});var l=o(58452),i=o(80310),a=o(87447),s=o(74400),r=o(83757),t=o(37632),u=o(27484),c=o.n(u),d=o(1426),m=o(9976),p=o(42906);const _=e=>{var n;let{open:o,onRequestClose:u,columns:_,hiddenColumnKeys:y,...g}=e;const v=(0,d.useRef)(null),{t:x}=(0,m.Bd)(),{token:f}=a.A.useToken(),k=c().map(_,(e=>{return"string"===typeof e.title?{label:e.title,value:c().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(n=e.title,d.Children.map(n.props.children,(e=>{if("string"===typeof e)return e}))),value:c().toString(e.key)}:{label:void 0,value:c().toString(e.key)};var n}));return(0,p.jsx)(l.A,{title:x("table.SettingTable"),open:o,destroyOnClose:!0,centered:!0,onOk:()=>{var e;null===(e=v.current)||void 0===e||e.validateFields().then((e=>{u(e)})).catch((()=>{}))},onCancel:()=>{u()},...g,children:(0,p.jsxs)(s.A,{ref:v,preserve:!1,initialValues:{selectedColumnKeys:null===(n=c().map(k,"value"))||void 0===n?void 0:n.filter((e=>!c().includes(y,e)))},layout:"vertical",children:[(0,p.jsx)(s.A.Item,{name:"searchInput",label:x("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,p.jsx)(r.A,{prefix:(0,p.jsx)(i.A,{}),style:{marginBottom:f.marginSM},placeholder:x("table.SearchTableColumn")})}),(0,p.jsx)(s.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>e.searchInput!==n.searchInput,children:e=>{let{getFieldValue:n}=e;const o=n("searchInput")?c().toLower(n("searchInput")):void 0,l=c().map(k,(e=>c().toLower(c().toString(e.label)).includes(o||"")?e:{...e,style:{display:"none"}}));return(0,p.jsx)(s.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},children:(0,p.jsx)(t.A.Group,{options:l,style:{flexDirection:"column"}})})}})]})})}},77156:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteKeyPairResourcePolicy",kind:"LinkedField",name:"delete_keypair_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"KeypairResourcePolicyListMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"KeypairResourcePolicyListMutation",selections:n},params:{cacheID:"fe182323e364c317f26c7193239af22b",id:null,metadata:{},name:"KeypairResourcePolicyListMutation",operationKind:"mutation",text:"mutation KeypairResourcePolicyListMutation(\n  $name: String!\n) {\n  delete_keypair_resource_policy(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="5771729a12a204d27a9cdf5ad31e707f";const i=l},59545:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"total_resource_slots",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"max_session_lifetime",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"max_concurrent_sessions",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"max_containers_per_session",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"idle_timeout",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"allowed_vfolder_hosts",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"max_pending_session_count",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"max_concurrent_sftp_sessions",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KeypairResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"KeyPairResourcePolicy",kind:"LinkedField",name:"keypair_resource_policies",plural:!0,selections:[e,n,o,l,i,a,s,r,t,{args:null,kind:"FragmentSpread",name:"KeypairResourcePolicySettingModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"KeypairResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"KeyPairResourcePolicy",kind:"LinkedField",name:"keypair_resource_policies",plural:!0,selections:[e,n,o,l,i,a,s,r,t,{alias:null,args:null,kind:"ScalarField",name:"default_for_unspecified",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null}],storageKey:null}]},params:{cacheID:"1581b7316a56c496c8c5f5e6d2f7e7fc",id:null,metadata:{},name:"KeypairResourcePolicyListQuery",operationKind:"query",text:'query KeypairResourcePolicyListQuery {\n  keypair_resource_policies {\n    name\n    total_resource_slots\n    max_session_lifetime\n    max_concurrent_sessions\n    max_containers_per_session\n    idle_timeout\n    allowed_vfolder_hosts\n    max_pending_session_count @since(version: "24.03.4")\n    max_concurrent_sftp_sessions @since(version: "24.03.4")\n    ...KeypairResourcePolicySettingModalFragment\n  }\n}\n\nfragment KeypairResourcePolicySettingModalFragment on KeyPairResourcePolicy {\n  name\n  default_for_unspecified\n  total_resource_slots\n  max_session_lifetime\n  max_concurrent_sessions\n  max_containers_per_session\n  idle_timeout\n  allowed_vfolder_hosts\n  max_vfolder_count @deprecatedSince(version: "23.09.4")\n  max_pending_session_count @since(version: "24.03.4")\n  max_concurrent_sftp_sessions @since(version: "24.03.4")\n}\n'}}}();l.hash="b373b40176617564bca5bfca8091dbcb";const i=l},84953:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateKeyPairResourcePolicy",kind:"LinkedField",name:"create_keypair_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"KeypairResourcePolicySettingModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"KeypairResourcePolicySettingModalCreateMutation",selections:n},params:{cacheID:"b52e3e869ccfabb393fb45a48074767e",id:null,metadata:{},name:"KeypairResourcePolicySettingModalCreateMutation",operationKind:"mutation",text:"mutation KeypairResourcePolicySettingModalCreateMutation(\n  $name: String!\n  $props: CreateKeyPairResourcePolicyInput!\n) {\n  create_keypair_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="7c4c5be505f02fa76e7b4db73a1f4b14";const i=l},55990:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KeypairResourcePolicySettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"default_for_unspecified",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"total_resource_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_session_lifetime",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_concurrent_sessions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_containers_per_session",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_timeout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allowed_vfolder_hosts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_pending_session_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_concurrent_sftp_sessions",storageKey:null}],type:"KeyPairResourcePolicy",abstractKey:null,hash:"a69e5217597269e6b0c96d2410d9f85b"},i=l},79068:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyKeyPairResourcePolicy",kind:"LinkedField",name:"modify_keypair_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"KeypairResourcePolicySettingModalModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"KeypairResourcePolicySettingModalModifyMutation",selections:n},params:{cacheID:"72be648e07857dd6923d7c81f3f19948",id:null,metadata:{},name:"KeypairResourcePolicySettingModalModifyMutation",operationKind:"mutation",text:"mutation KeypairResourcePolicySettingModalModifyMutation(\n  $name: String!\n  $props: ModifyKeyPairResourcePolicyInput!\n) {\n  modify_keypair_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="8c99c8be8781f93fed817a67c86ea966";const i=l},41870:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteProjectResourcePolicy",kind:"LinkedField",name:"delete_project_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProjectResourcePolicyListMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProjectResourcePolicyListMutation",selections:n},params:{cacheID:"9f1218faa2207eff18f5a145f12f87ac",id:null,metadata:{},name:"ProjectResourcePolicyListMutation",operationKind:"mutation",text:"mutation ProjectResourcePolicyListMutation(\n  $name: String!\n) {\n  delete_project_resource_policy(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="2c5a20c6c463174bbfc726a27cdfdcac";const i=l},78211:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"max_network_count",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProjectResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"ProjectResourcePolicy",kind:"LinkedField",name:"project_resource_policies",plural:!0,selections:[e,n,o,l,i,a,{args:null,kind:"FragmentSpread",name:"ProjectResourcePolicySettingModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"ProjectResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"ProjectResourcePolicy",kind:"LinkedField",name:"project_resource_policies",plural:!0,selections:[e,n,o,l,i,a],storageKey:null}]},params:{cacheID:"6aea9773e50cdfa81562c7a8322c8faa",id:null,metadata:{},name:"ProjectResourcePolicyListQuery",operationKind:"query",text:'query ProjectResourcePolicyListQuery {\n  project_resource_policies {\n    id\n    name\n    created_at\n    max_vfolder_count @since(version: "23.09.6")\n    max_quota_scope_size @since(version: "23.09.2")\n    max_network_count @since(version: "24.12.0")\n    ...ProjectResourcePolicySettingModalFragment\n  }\n}\n\nfragment ProjectResourcePolicySettingModalFragment on ProjectResourcePolicy {\n  id\n  name\n  created_at\n  max_vfolder_count @since(version: "23.09.6")\n  max_quota_scope_size @since(version: "23.09.2")\n  max_network_count @since(version: "24.12.0")\n}\n'}}}();l.hash="4c7451b05822ee2f8c5e2c8d35ed57db";const i=l},91247:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateProjectResourcePolicy",kind:"LinkedField",name:"create_project_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProjectResourcePolicySettingModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProjectResourcePolicySettingModalCreateMutation",selections:n},params:{cacheID:"b94d7a4b8e8341df4e396784abba4203",id:null,metadata:{},name:"ProjectResourcePolicySettingModalCreateMutation",operationKind:"mutation",text:"mutation ProjectResourcePolicySettingModalCreateMutation(\n  $name: String!\n  $props: CreateProjectResourcePolicyInput!\n) {\n  create_project_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="c0683608e8a527146563ba5bd9fcad33";const i=l},78212:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProjectResourcePolicySettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_network_count",storageKey:null}],type:"ProjectResourcePolicy",abstractKey:null,hash:"949f6a93198024700bf15197f3b613f0"},i=l},81453:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyProjectResourcePolicy",kind:"LinkedField",name:"modify_project_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProjectResourcePolicySettingModalModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProjectResourcePolicySettingModalModifyMutation",selections:n},params:{cacheID:"aedc4eab77206f7ab189ccd3f2d938b3",id:null,metadata:{},name:"ProjectResourcePolicySettingModalModifyMutation",operationKind:"mutation",text:"mutation ProjectResourcePolicySettingModalModifyMutation(\n  $name: String!\n  $props: ModifyProjectResourcePolicyInput!\n) {\n  modify_project_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="3cd62195489eba58dd9693f1fc9df8ff";const i=l},60656:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteUserResourcePolicy",kind:"LinkedField",name:"delete_user_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserResourcePolicyListMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserResourcePolicyListMutation",selections:n},params:{cacheID:"7be7fa4bc2e6ce7666489318e415d769",id:null,metadata:{},name:"UserResourcePolicyListMutation",operationKind:"mutation",text:"mutation UserResourcePolicyListMutation(\n  $name: String!\n) {\n  delete_user_resource_policy(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="5b565e4db37c96850ac85a92cd4e0290";const i=l},90413:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"max_session_count_per_model_session",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"max_customized_image_count",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"user_resource_policies",plural:!0,selections:[e,n,o,l,i,a,s,{args:null,kind:"FragmentSpread",name:"UserResourcePolicySettingModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UserResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"user_resource_policies",plural:!0,selections:[e,n,o,l,i,a,s],storageKey:null}]},params:{cacheID:"00b0583474f74c417b06d53115787d3b",id:null,metadata:{},name:"UserResourcePolicyListQuery",operationKind:"query",text:'query UserResourcePolicyListQuery {\n  user_resource_policies {\n    id\n    name\n    created_at\n    max_vfolder_count @since(version: "23.09.6")\n    max_session_count_per_model_session @since(version: "23.09.10")\n    max_quota_scope_size @since(version: "23.09.2")\n    max_customized_image_count @since(version: "24.03.0")\n    ...UserResourcePolicySettingModalFragment\n  }\n}\n\nfragment UserResourcePolicySettingModalFragment on UserResourcePolicy {\n  id\n  name\n  max_vfolder_count @since(version: "23.09.6")\n  max_session_count_per_model_session @since(version: "23.09.10")\n  max_quota_scope_size @since(version: "23.09.2")\n  max_customized_image_count @since(version: "24.03.0")\n}\n'}}}();l.hash="be57da0a1c15efb970cb1e828500e6dc";const i=l},12565:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateUserResourcePolicy",kind:"LinkedField",name:"create_user_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserResourcePolicySettingModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserResourcePolicySettingModalCreateMutation",selections:n},params:{cacheID:"129c4a570d8ae1a075d9aa9261094c48",id:null,metadata:{},name:"UserResourcePolicySettingModalCreateMutation",operationKind:"mutation",text:"mutation UserResourcePolicySettingModalCreateMutation(\n  $name: String!\n  $props: CreateUserResourcePolicyInput!\n) {\n  create_user_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="9c00928ca86d4779838243df247257aa";const i=l},17402:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserResourcePolicySettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_session_count_per_model_session",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_customized_image_count",storageKey:null}],type:"UserResourcePolicy",abstractKey:null,hash:"d93790c2b9fef92baa6999ce770cd9da"},i=l},96083:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyUserResourcePolicy",kind:"LinkedField",name:"modify_user_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserResourcePolicySettingModalModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserResourcePolicySettingModalModifyMutation",selections:n},params:{cacheID:"f33ed379f4871e357183803b340a938a",id:null,metadata:{},name:"UserResourcePolicySettingModalModifyMutation",operationKind:"mutation",text:"mutation UserResourcePolicySettingModalModifyMutation(\n  $name: String!\n  $props: ModifyUserResourcePolicyInput!\n) {\n  modify_user_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="d50cbcfb63bfd30da81fea8968bb6436";const i=l},60696:(e,n,o)=>{o.d(n,{RM:()=>r,WN:()=>s});var l=o(27484),i=o.n(l);function a(e){return null===e||void 0===e?"":"number"===typeof e||"boolean"===typeof e?String(e):`"${(e=i().isString(e)?e:JSON.stringify(e)).replace(/"/g,'""')}"`}const s=(e,n)=>{const o=URL.createObjectURL(e),l=document.createElement("a");l.href=o,l.download=n,l.click(),URL.revokeObjectURL(o)},r=(e,n,o)=>{const l=((e,n)=>{const o=i().map(e,(e=>i().omit(e,"__fragments","__fragmentOwner","__id"))),l=i().keys(o[0]),s=i().map(o,(e=>i().map(e,((e,o)=>{var l;return null!==n&&void 0!==n&&n[o]&&(null===(l=n[o])||void 0===l?void 0:l.call(n,e))||e})))).map((e=>e.map(a).join(","))).join("\n");return[l.map(a).join(","),s].join("\n")})(e,o),r=new Blob([l],{type:"text/csv"});s(r,`${n}.csv`)}},50738:(e,n,o)=>{o.d(n,{a:()=>i});var l=o(46606);const i=e=>{const[n,o]=(0,l.q)(`hiddenColumnKeys.${e}`);return[n,o]}},22812:(e,n,o)=>{o.r(n),o.d(n,{default:()=>he});var l=o(48248),i=o(75045),a=o(86387),s=o(60696),r=o(32967),t=o(50738),u=o(90840),c=o(88653),d=o(6194),m=o(27484),p=o.n(m),_=o(1426),y=o(42906);const g=e=>{let{...n}=e;const o=(0,c._V)();return(0,y.jsx)(d.A,{...n,children:p().map(o,(e=>(0,y.jsx)(d.A.Option,{value:e,children:e},e)))})};var v=o(58452),x=o(15161),f=o(74400),k=o(37632),h=o(9976);const P=e=>{let{name:n,unlimitedValue:o,disableUnlimited:l,children:i,...a}=e;const{t:s}=(0,h.Bd)(),[r,t]=(0,_.useState)(!1),c=f.A.useFormInstance();(0,_.useEffect)((()=>{const e=c.getFieldValue(n);t(e===o)}),[c,n,o]);const d=(0,_.isValidElement)(i)?(0,_.cloneElement)(i,{disabled:r}):i,m=r&&(0,_.isValidElement)(i)?(0,_.cloneElement)(i,{value:void 0,disabled:r}):void 0;return(0,y.jsxs)(u.A,{direction:"column",align:"start",children:[(0,y.jsx)(f.A.Item,{style:{margin:0},name:n,hidden:r,...a,children:d}),r?(0,y.jsx)(f.A.Item,{style:{margin:0},...a,children:m}):null,(0,y.jsx)(k.A,{checked:r,disabled:l,onChange:e=>{const l=e.target.checked;t(l),l?c.setFieldValue(n,o):c.resetFields([n])},children:s("resourcePolicy.Unlimited")})]})};var j,S,b,A=o(39111),R=o(52212),M=o(87447),C=o(83757),K=o(40262),F=o(8296),w=o(59067),L=o(61004),I=o(90158),q=o(94750),D=o(18347);const z=e=>{let{existingPolicyNames:n,keypairResourcePolicyFrgmt:l=null,onRequestClose:s,...t}=e;const{t:m}=(0,h.Bd)(),{message:k}=R.A.useApp(),{token:z}=M.A.useToken(),T=(0,_.useRef)(null),[V]=(0,c.bL)(),{mergedResourceSlots:U}=(0,c.Hv)(),N=(0,r.CX)(),E=null===N||void 0===N?void 0:N.supports("deprecated-max-vfolder-count-in-keypair-resource-policy"),O=(0,D.useFragment)(void 0!==j?j:j=o(55990),l),[$,B]=(0,D.useMutation)(void 0!==S?S:S=o(84953)),[Q,H]=(0,D.useMutation)(void 0!==b?b:b=o(79068)),X=(0,_.useMemo)((()=>{var e,n,o,l,a,s,r,t,u,c;const d=JSON.parse(null!==(e=null===O||void 0===O?void 0:O.allowed_vfolder_hosts)&&void 0!==e?e:"{}"),m=JSON.parse(null!==(n=null===O||void 0===O?void 0:O.total_resource_slots)&&void 0!==n?n:"{}");if(null!==m&&void 0!==m&&m.mem){var _,y,g;let e=(0,i.Is)((null===m||void 0===m?void 0:m.mem)+"b","auto",2,!0);"B"!==(null===(_=e)||void 0===_?void 0:_.unit)&&"K"!==(null===(y=e)||void 0===y?void 0:y.unit)||(e=(0,i.Is)((null===m||void 0===m?void 0:m.mem)+"b","M",3,!0)),m.mem=(null===(g=e)||void 0===g?void 0:g.numberUnit)||"0G"}return{name:null!==(o=null===O||void 0===O?void 0:O.name)&&void 0!==o?o:"",default_for_unspecified:(null===O||void 0===O?void 0:O.default_for_unspecified)||"UNLIMITED",total_resource_slots:null!==m&&void 0!==m?m:{},max_session_lifetime:null!==(l=null===O||void 0===O?void 0:O.max_session_lifetime)&&void 0!==l?l:0,max_concurrent_sessions:null!==(a=null===O||void 0===O?void 0:O.max_concurrent_sessions)&&void 0!==a?a:0,max_containers_per_session:null!==(s=null===O||void 0===O?void 0:O.max_containers_per_session)&&void 0!==s?s:1,idle_timeout:null!==(r=null===O||void 0===O?void 0:O.idle_timeout)&&void 0!==r?r:0,allowed_vfolder_hosts:null!==(t=p().keys(d))&&void 0!==t?t:[],max_pending_session_count:null!==(u=null===O||void 0===O?void 0:O.max_pending_session_count)&&void 0!==u?u:null,max_concurrent_sftp_sessions:null!==(c=null===O||void 0===O?void 0:O.max_concurrent_sftp_sessions)&&void 0!==c?c:0}}),[O]);return(0,y.jsx)(v.A,{width:800,title:m(null===O?"resourcePolicy.CreateResourcePolicy":"resourcePolicy.UpdateResourcePolicy"),onOk:()=>{var e;return null===T||void 0===T||null===(e=T.current)||void 0===e?void 0:e.validateFields().then((e=>{const n=p().mapValues(p().pickBy(e.total_resource_slots,(e=>!p().isUndefined(e))),((e,n)=>{var o;return p().includes(n,"mem")?null===(o=(0,i.Is)(e,"b",0))||void 0===o?void 0:o.numberFixed:e})),o=p().fromPairs(p().map(e.allowed_vfolder_hosts,(n=>{var o;if(null!==X&&void 0!==X&&null!==(o=X.allowed_vfolder_hosts)&&void 0!==o&&o.includes(n)){return[n,JSON.parse((null===O||void 0===O?void 0:O.allowed_vfolder_hosts)||"{}")[n]]}return[n,p().get(e,n,["create-vfolder","modify-vfolder","delete-vfolder","mount-in-session","upload-file","download-file","invite-others","set-user-specific-permission"])]}))),{name:l,...a}=e,r={...p().omit(a,"parsedTotalResourceSlots"),total_resource_slots:JSON.stringify(n),allowed_vfolder_hosts:JSON.stringify(o)};E||(r.max_vfolder_count=null===e||void 0===e?void 0:e.max_vfolder_count),N.supports("max-pending-session-count")||null===r||void 0===r||delete r.max_pending_session_count,N.supports("max-concurrent-sftp-sessions")||null===r||void 0===r||delete r.max_concurrent_sftp_sessions,null===O?$({variables:{name:null===e||void 0===e?void 0:e.name,props:r},onCompleted:(e,n)=>{var o,l,i,a;return(null!==e&&void 0!==e&&null!==(o=e.create_keypair_resource_policy)&&void 0!==o&&o.ok||null===(l=e.create_keypair_resource_policy)||void 0===l||!l.msg)&&(null!==e&&void 0!==e&&null!==(i=e.create_keypair_resource_policy)&&void 0!==i&&i.ok||null===(a=e.create_keypair_resource_policy)||void 0===a||!a.msg)?(k.success(m("resourcePolicy.SuccessfullyCreated")),void s(!0)):(k.error(e.create_keypair_resource_policy.msg),void s(!1))},onError(e){k.error((null===e||void 0===e?void 0:e.message)||m("resourcePolicy.CannotCreateResourcePolicy"))}}):Q({variables:{name:null===e||void 0===e?void 0:e.name,props:r},onCompleted:(e,n)=>{var o,l;return null!==e&&void 0!==e&&null!==(o=e.modify_keypair_resource_policy)&&void 0!==o&&o.ok||null===(l=e.modify_keypair_resource_policy)||void 0===l||!l.msg?n&&n.length>0?(n.forEach((e=>k.error(e.message))),void s(!1)):(k.success(m("resourcePolicy.SuccessfullyUpdated")),void s(!0)):(k.error(e.modify_keypair_resource_policy.msg),void s(!1))},onError(e){k.error((null===e||void 0===e?void 0:e.message)||m("resourcePolicy.CannotUpdateResourcePolicy"))}})})).catch((()=>{}))},onCancel:()=>s(),destroyOnClose:!0,confirmLoading:B||H,...t,children:(0,y.jsxs)(f.A,{requiredMark:!1,ref:T,layout:"vertical",initialValues:X,preserve:!1,children:[(0,y.jsx)(f.A.Item,{label:m("resourcePolicy.Name"),name:"name",required:!0,rules:[{required:!0,message:m("data.explorer.ValueRequired")},{max:64},{validator:(e,o)=>!O&&null!==n&&void 0!==n&&n.includes(o)?Promise.reject(m("resourcePolicy.ResourcePolicyNameAlreadyExists")):Promise.resolve()}],children:(0,y.jsx)(C.A,{disabled:!!O})}),(0,y.jsx)(f.A.Item,{label:(0,y.jsxs)(u.A,{gap:"xxs",children:[(0,y.jsx)(K.A.Text,{children:m("resourcePolicy.DefaultForUnspecified")}),(0,y.jsx)(F.A,{title:(0,y.jsxs)(y.Fragment,{children:[m("resourcePolicy.DefaultForUnspecifiedTooltipDesc1"),(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),m("resourcePolicy.DefaultForUnspecifiedTooltipDesc2")]}),placement:"right",children:(0,y.jsx)(A.A,{style:{color:z.colorTextSecondary,cursor:"pointer"}})})]}),name:"default_for_unspecified",children:(0,y.jsx)(d.A,{options:[{key:"unlimited",label:"UNLIMITED",value:"UNLIMITED"},{key:"limited",label:"LIMITED",value:"LIMITED"}]})}),(0,y.jsx)(f.A.Item,{label:m("resourcePolicy.ResourcePolicy"),required:!0,children:(0,y.jsx)(w.A,{children:p().chain(V).keys().chunk(3).map(((e,n)=>(0,y.jsx)(L.A,{gutter:[24,16],children:p().map(e,(e=>{var n,o;return(0,y.jsx)(I.A,{xs:{span:12},md:{span:8},style:{alignSelf:"end",marginBottom:z.marginLG},children:(0,y.jsx)(P,{unlimitedValue:void 0,label:(null===(n=p().get(U,e))||void 0===n?void 0:n.description)||e,name:["total_resource_slots",e],rules:[{validator:(n,o)=>p().includes(e,"mem")&&o&&(0,i.Is)(o,"p").number>(0,i.Is)("300p","p").number?Promise.reject(new Error(m("resourcePolicy.MemorySizeExceedsLimit"))):Promise.resolve()}],style:{margin:0,width:"100%"},children:p().includes(e,"mem")?(0,y.jsx)(x.A,{style:{width:"100%"}}):(0,y.jsx)(q.A,{min:0,max:a.d7,step:p().includes(e,".shares")?.1:1,addonAfter:null===(o=p().get(U,e))||void 0===o?void 0:o.display_unit,style:{width:"100%"}})})},e)}))},n))).value()})}),(0,y.jsx)(f.A.Item,{label:m("resourcePolicy.Sessions"),required:!0,children:(0,y.jsx)(w.A,{children:(0,y.jsxs)(L.A,{gutter:[24,16],style:{alignSelf:"end"},children:[(0,y.jsx)(I.A,{xs:{span:12},md:{span:8},style:{alignSelf:"end"},children:(0,y.jsx)(P,{label:m("resourcePolicy.ClusterSize"),name:"max_containers_per_session",style:{margin:0,width:"100%"},disableUnlimited:!0,children:(0,y.jsx)(q.A,{min:0,max:a.tu,style:{width:"100%"}})})}),(0,y.jsx)(I.A,{xs:{span:12},md:{span:8},style:{alignSelf:"end"},children:(0,y.jsx)(P,{name:"max_session_lifetime",unlimitedValue:0,label:m("resourcePolicy.MaxSessionLifetime"),style:{margin:0,width:"100%"},children:(0,y.jsx)(q.A,{min:0,max:100,style:{width:"100%"}})})}),N.supports("max-pending-session-count")?(0,y.jsx)(I.A,{xs:{span:12},md:{span:8},style:{alignSelf:"end"},children:(0,y.jsx)(P,{name:"max_pending_session_count",unlimitedValue:null,label:m("resourcePolicy.MaxPendingSessionCount"),style:{margin:0,width:"100%"},children:(0,y.jsx)(q.A,{min:0,max:a.tu,style:{width:"100%"}})})}):null,(0,y.jsx)(I.A,{xs:{span:12},md:{span:8},style:{alignSelf:"end"},children:(0,y.jsx)(P,{name:"max_concurrent_sessions",label:m("resourcePolicy.ConcurrentJobs"),unlimitedValue:0,style:{margin:0,width:"100%"},children:(0,y.jsx)(q.A,{min:0,max:a.tu,style:{width:"100%"}})})}),(0,y.jsx)(I.A,{xs:{span:12},md:{span:8},style:{alignSelf:"end"},children:(0,y.jsx)(P,{name:"idle_timeout",unlimitedValue:0,label:m("resourcePolicy.IdleTimeoutSec"),style:{margin:0,width:"100%"},children:(0,y.jsx)(q.A,{min:0,max:Number.MAX_SAFE_INTEGER,style:{width:"100%"}})})}),N.supports("max-concurrent-sftp-sessions")?(0,y.jsx)(I.A,{xs:{span:12},md:{span:8},style:{alignSelf:"end"},children:(0,y.jsx)(P,{name:"max_concurrent_sftp_sessions",unlimitedValue:0,label:m("resourcePolicy.MaxConcurrentSFTPSessions"),style:{margin:0,width:"100%"},children:(0,y.jsx)(q.A,{min:0,max:a.tu,style:{width:"100%"}})})}):null]})})}),(0,y.jsx)(f.A.Item,{label:m("resourcePolicy.Folders"),required:!0,children:(0,y.jsxs)(w.A,{children:[(0,y.jsx)(f.A.Item,{label:m("resourcePolicy.AllowedHosts"),name:"allowed_vfolder_hosts",children:(0,y.jsx)(g,{mode:"multiple"})}),E?void 0:(0,y.jsx)(f.A.Item,{label:m("credential.Max#"),name:"max_vfolder_count",children:(0,y.jsx)(q.A,{min:0,max:50})})]})})]})})};var T,V,U=o(4525),N=o(39667),E=o(59706),O=o(46841),$=o(41735),B=o(45554),Q=o(39651),H=o(67884),X=o(44323),J=o(20140),G=o(72046),Y=o(60608),W=o(61252);const Z=e=>{const{token:n}=M.A.useToken(),{t:l}=(0,h.Bd)(),{message:c,modal:d}=R.A.useApp(),[m,g]=(0,r.Tw)("initial-fetch"),[v,x]=(0,_.useTransition)(),[f,{toggle:k}]=(0,H.A)(),[P,j]=(0,_.useState)(!1),[S,b]=(0,_.useState)(),[A,C]=(0,_.useState)(),F=(0,r.CX)(),{keypair_resource_policies:w}=(0,D.useLazyLoadQuery)(void 0!==T?T:T=o(59545),{},{fetchPolicy:"initial-fetch"===m?"store-and-network":"network-only",fetchKey:m}),[L,I]=(0,D.useMutation)(void 0!==V?V:V=o(77156)),q=(0,i.LY)([{title:l("resourcePolicy.Name"),dataIndex:"name",key:"name",fixed:"left",sorter:(e,n)=>(0,i._f)(null===e||void 0===e?void 0:e.name,null===n||void 0===n?void 0:n.name)},{title:l("resourcePolicy.Resources"),dataIndex:"total_resource_slots",key:"total_resource_slots",render:(e,n)=>(0,y.jsx)(u.A,{gap:"xxs",children:p().isEmpty(JSON.parse((null===n||void 0===n?void 0:n.total_resource_slots)||"{}"))?"-":p().map(JSON.parse((null===n||void 0===n?void 0:n.total_resource_slots)||"{}"),((e,n)=>(0,y.jsx)(U.A,{type:n,value:p().toString(e)},n)))})},{title:l("resourcePolicy.Concurrency"),dataIndex:"max_concurrent_sessions",key:"max_concurrent_sessions",sorter:(e,n)=>null!==e&&void 0!==e&&e.max_concurrent_sessions&&null!==n&&void 0!==n&&n.max_concurrent_sessions?e.max_concurrent_sessions-n.max_concurrent_sessions:1,render:e=>e||"\u221e"},{title:l("resourcePolicy.ClusterSize"),dataIndex:"max_containers_per_session",key:"max_containers_per_session",sorter:(e,n)=>null!==e&&void 0!==e&&e.max_containers_per_session&&null!==n&&void 0!==n&&n.max_containers_per_session?e.max_containers_per_session-n.max_containers_per_session:1,render:e=>e===a.tu?"\u221e":e},{title:l("resourcePolicy.IdleTimeout"),dataIndex:"idle_timeout",key:"idle_timeout",sorter:(e,n)=>null!==e&&void 0!==e&&e.idle_timeout&&null!==n&&void 0!==n&&n.idle_timeout?e.idle_timeout-n.idle_timeout:1,render:e=>e||"\u221e"},{title:l("session.MaxSessionLifetime"),dataIndex:"max_session_lifetime",key:"max_session_lifetime",sorter:(e,n)=>(0,i.Oe)(null===e||void 0===e?void 0:e.max_session_lifetime,null===n||void 0===n?void 0:n.max_session_lifetime,0),render:e=>e||"\u221e"},{title:l("resourcePolicy.StorageNodes"),dataIndex:"allowed_vfolder_hosts",key:"allowed_vfolder_hosts",render:(e,n)=>{const o=null!==F&&void 0!==F&&F.supports("fine-grained-storage-permissions")?p().keys(JSON.parse((null===n||void 0===n?void 0:n.allowed_vfolder_hosts)||"{}")):JSON.parse((null===n||void 0===n?void 0:n.allowed_vfolder_hosts)||"{}");return(0,y.jsx)(y.Fragment,{children:p().map(o,(e=>(0,y.jsx)(X.A,{children:e},e)))})}},(null===F||void 0===F?void 0:F.supports("max-pending-session-count"))&&{title:l("resourcePolicy.MaxPendingSessionCount"),dataIndex:"max_pending_session_count",key:"max_pending_session_count",sorter:(e,n)=>(0,i.Oe)(null===e||void 0===e?void 0:e.max_pending_session_count,null===n||void 0===n?void 0:n.max_pending_session_count,0),render:e=>e||"\u221e"},(null===F||void 0===F?void 0:F.supports("max-concurrent-sftp-sessions"))&&{title:l("resourcePolicy.MaxConcurrentSFTPSessions"),dataIndex:"max_concurrent_sftp_sessions",key:"max_concurrent_sftp_sessions",sorter:(e,n)=>(0,i.Oe)(null===e||void 0===e?void 0:e.max_concurrent_sftp_sessions,null===n||void 0===n?void 0:n.max_concurrent_sftp_sessions,0),render:e=>e||"\u221e"},{title:l("general.Control"),key:"control",fixed:"right",render:(e,o)=>(0,y.jsxs)(u.A,{direction:"row",align:"stretch",children:[(0,y.jsx)(J.Ay,{type:"text",size:"large",icon:(0,y.jsx)(E.A,{}),style:{color:n.colorInfo},onClick:()=>{C(o)}}),(0,y.jsx)(J.Ay,{type:"text",size:"large",icon:(0,y.jsx)(O.A,{style:{color:n.colorError}}),loading:I&&S===(null===o||void 0===o?void 0:o.name)+m,disabled:I&&S!==(null===o||void 0===o?void 0:o.name)+m,onClick:()=>{d.confirm({title:l("resourcePolicy.DeletePolicy"),content:(0,y.jsxs)(u.A,{direction:"column",align:"stretch",children:[(0,y.jsxs)(u.A,{gap:"xxs",children:[(0,y.jsx)(K.A.Text,{children:l("resourcePolicy.DeletePolicyDescription")}),(0,y.jsx)(K.A.Text,{strong:!0,children:null===o||void 0===o?void 0:o.name})]}),(0,y.jsx)("br",{}),(0,y.jsx)(K.A.Text,{type:"danger",children:l("dialog.warning.CannotBeUndone")})]}),okButtonProps:{danger:!0},okText:l("button.Delete"),onOk:()=>{null!==o&&void 0!==o&&o.name&&(b(o.name+m),L({variables:{name:o.name},onCompleted:(e,n)=>{var o,i;if(null!==e&&void 0!==e&&null!==(o=e.delete_keypair_resource_policy)&&void 0!==o&&o.ok)if(n&&(null===n||void 0===n?void 0:n.length)>0){const e=p().map(n,(e=>e.message));for(const n of e)c.error(n)}else x((()=>g())),c.success(l("resourcePolicy.SuccessfullyDeleted"));else c.error(null===e||void 0===e||null===(i=e.delete_keypair_resource_policy)||void 0===i?void 0:i.msg)},onError(e){c.error(null===e||void 0===e?void 0:e.message)}}))}})}})]})}]),[Z,ee]=(0,t.a)("KeypairResourcePolicyList");return(0,y.jsxs)(u.A,{direction:"column",align:"stretch",...e,children:[(0,y.jsxs)(u.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:n.paddingContentVertical,paddingLeft:n.paddingContentHorizontalSM,paddingRight:n.paddingContentHorizontalSM},children:[(0,y.jsx)(u.A,{direction:"column",align:"start",children:(0,y.jsx)(G.A,{menu:{items:[{key:"exportCSV",label:l("resourcePolicy.ExportCSV"),onClick:()=>{(()=>{if(!w)return void c.error(l("resourcePolicy.NoDataToExport"));const e=p().without(p().map(q,(e=>p().toString(e.key))),"control"),n=p().map(w,(n=>p().pick(n,e.map((e=>e)))));(0,s.RM)(n,"keypair_resource_policies",{total_resource_slots:e=>p().isEmpty(e)?"-":JSON.stringify(e),max_concurrent_sessions:e=>e||"-",max_containers_per_session:e=>e===a.tu?"\u221e":e,idle_timeout:e=>e||"-",max_session_lifetime:e=>e||"-",allowed_vfolder_hosts:e=>p().isEmpty(e)?"-":p().keys(JSON.parse(e)).join(", ")})})()}}]},children:(0,y.jsx)(J.Ay,{type:"link",style:{padding:0},onClick:e=>e.preventDefault(),children:(0,y.jsxs)(Y.A,{style:{color:n.colorLinkHover},children:[l("resourcePolicy.Tools"),(0,y.jsx)($.A,{})]})})})}),(0,y.jsx)(u.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:(0,y.jsxs)(u.A,{gap:"xs",children:[(0,y.jsx)(J.Ay,{icon:(0,y.jsx)(B.A,{}),loading:v,onClick:()=>{x((()=>g()))}}),(0,y.jsx)(J.Ay,{type:"primary",icon:(0,y.jsx)(Q.A,{}),onClick:()=>{j(!0)},children:l("button.Create")})]})})]}),(0,y.jsx)(W.A,{columns:p().filter(q,(e=>!p().includes(Z,p().toString(null===e||void 0===e?void 0:e.key)))),dataSource:w,rowKey:"name",scroll:{x:"max-content"},pagination:!1,showSorterTooltip:!1}),(0,y.jsx)(u.A,{justify:"end",style:{padding:n.paddingXXS},children:(0,y.jsx)(J.Ay,{type:"text",icon:(0,y.jsx)(E.A,{}),onClick:()=>{k()}})}),(0,y.jsx)(N.A,{open:f,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&ee(p().difference(q.map((e=>p().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),k()},columns:q,hiddenColumnKeys:Z}),(0,y.jsx)(_.Suspense,{children:(0,y.jsx)(z,{existingPolicyNames:p().map(w,(e=>(null===e||void 0===e?void 0:e.name)||"")),open:!!A||P,keypairResourcePolicyFrgmt:A||null,onRequestClose:e=>{C(null),j(!1),e&&x((()=>{g()}))}})})]})};var ee,ne,oe,le=o(77123);const ie=e=>{let{existingPolicyNames:n,projectResourcePolicyFrgmt:l=null,onRequestClose:s,...t}=e;const{t:c}=(0,h.Bd)(),{token:d}=M.A.useToken(),{message:m}=R.A.useApp(),g=(0,_.useRef)(null),x=(0,r.CX)(),k=null===x||void 0===x?void 0:x.supports("max-vfolder-count-in-user-and-project-resource-policy"),j=null===x||void 0===x?void 0:x.supports("max-quota-scope-size"),S=null===x||void 0===x?void 0:x.supports("max_network_count"),b=(0,D.useFragment)(void 0!==ee?ee:ee=o(78212),l),[A,K]=(0,D.useMutation)(void 0!==ne?ne:ne=o(91247)),[F,w]=(0,D.useMutation)(void 0!==oe?oe:oe=o(81453)),L=(0,_.useMemo)((()=>{let e={};null===b&&(e={max_vfolder_count:0,max_quota_scope_size:-1,max_network_count:-1});let n=null===b||void 0===b?void 0:b.max_quota_scope_size;return n=p().isUndefined(n)||-1===n?-1:(0,i.wb)(n),{...e,...b,max_quota_scope_size:n}}),[b,null===b||void 0===b?void 0:b.max_vfolder_count,null===b||void 0===b?void 0:b.max_quota_scope_size]);return(0,y.jsxs)(v.A,{title:c(null===b?"resourcePolicy.CreateResourcePolicy":"resourcePolicy.UpdateResourcePolicy"),onOk:e=>{var n;return null===g||void 0===g||null===(n=g.current)||void 0===n?void 0:n.validateFields().then((e=>{const n={max_vfolder_count:(null===e||void 0===e?void 0:e.max_vfolder_count)||0,max_quota_scope_size:-1===(null===e||void 0===e?void 0:e.max_quota_scope_size)?-1:(0,i._S)(null===e||void 0===e?void 0:e.max_quota_scope_size),max_network_count:(null===e||void 0===e?void 0:e.max_network_count)||-1};k||delete n.max_vfolder_count,j||delete n.max_quota_scope_size,S||delete n.max_network_count,null===b?A({variables:{name:null===e||void 0===e?void 0:e.name,props:n},onCompleted(e,n){var o,l;null===e||void 0===e||null===(o=e.create_project_resource_policy)||void 0===o||!o.ok||n?(m.error((null===e||void 0===e||null===(l=e.create_project_resource_policy)||void 0===l?void 0:l.msg)||c("resourcePolicy.CannotCreateResourcePolicy")),s()):(m.success(c("storageHost.ResourcePolicySuccessfullyUpdated")),s(!0))},onError(e){m.error((null===e||void 0===e?void 0:e.message)||c("resourcePolicy.CannotCreateResourcePolicy"))}}):F({variables:{name:null===e||void 0===e?void 0:e.name,props:n},onCompleted(e,n){var o,l;null===e||void 0===e||null===(o=e.modify_project_resource_policy)||void 0===o||!o.ok||n?(m.error((null===e||void 0===e||null===(l=e.modify_project_resource_policy)||void 0===l?void 0:l.msg)||c("resourcePolicy.CannotUpdateResourcePolicy")),s()):(m.success(c("storageHost.ResourcePolicySuccessfullyUpdated")),s(!0))},onError(e){m.error((null===e||void 0===e?void 0:e.message)||c("resourcePolicy.CannotUpdateResourcePolicy"))}})})).catch((()=>{}))},onCancel:()=>s(),destroyOnClose:!0,confirmLoading:K||w,...t,children:[(0,y.jsx)(le.A,{message:c("storageHost.BeCarefulToSetProjectResourcePolicy"),type:"warning",showIcon:!0,style:{marginBottom:d.marginMD}}),(0,y.jsxs)(f.A,{ref:g,layout:"vertical",requiredMark:"optional",initialValues:L,preserve:!1,children:[(0,y.jsx)(f.A.Item,{label:c("resourcePolicy.Name"),name:"name",required:!0,rules:[{required:!0,message:c("data.explorer.ValueRequired")},{max:255},{validator:(e,o)=>!b&&null!==n&&void 0!==n&&n.includes(o)?Promise.reject(c("resourcePolicy.ResourcePolicyNameAlreadyExists")):Promise.resolve()}],children:(0,y.jsx)(C.A,{disabled:!!b})}),(0,y.jsxs)(u.A,{direction:"column",align:"stretch",gap:"md",style:{marginBottom:d.marginMD},children:[k?(0,y.jsx)(P,{name:"max_vfolder_count",unlimitedValue:0,label:c("resourcePolicy.MaxFolderCount"),style:{width:"100%",margin:0},children:(0,y.jsx)(q.A,{min:0,max:a.tu,style:{width:"100%"}})}):null,j?(0,y.jsx)(P,{name:"max_quota_scope_size",unlimitedValue:-1,label:c("storageHost.MaxFolderSize"),style:{width:"100%",margin:0},children:(0,y.jsx)(q.A,{min:0,max:Math.floor(Number.MAX_SAFE_INTEGER/Math.pow(10,9)),addonAfter:"GB",style:{width:"100%"}})}):null,S?(0,y.jsx)(P,{name:"max_network_count",unlimitedValue:-1,label:c("resourcePolicy.MaxNetworkCount"),style:{width:"100%",margin:0},children:(0,y.jsx)(q.A,{min:0,max:a.tu,style:{width:"100%"}})}):null]})]})]})};var ae,se,re=o(19586),te=o(83011),ue=o(89762),ce=o.n(ue);const de=()=>{const{token:e}=M.A.useToken(),{t:n}=(0,h.Bd)(),[l,a]=(0,_.useTransition)(),[c,d]=(0,r.Tw)("initial-fetch"),[m,g]=(0,_.useState)(!1),[v,{toggle:x}]=(0,H.A)(),[f,k]=(0,_.useState)(),[P,j]=(0,_.useState)(),S=(0,r.CX)(),b=null===S||void 0===S?void 0:S.supports("max-vfolder-count-in-user-and-project-resource-policy"),A=null===S||void 0===S?void 0:S.supports("max-quota-scope-size"),R=null===S||void 0===S?void 0:S.supports("max_network_count"),{project_resource_policies:C}=(0,D.useLazyLoadQuery)(void 0!==ae?ae:ae=o(78211),{},{fetchPolicy:"initial-fetch"===c?"store-and-network":"network-only",fetchKey:c}),[K,F]=(0,D.useMutation)(void 0!==se?se:se=o(41870)),w=(0,i.LY)([{title:n("resourcePolicy.Name"),dataIndex:"name",key:"name",fixed:"left",sorter:(e,n)=>(0,i._f)(null===e||void 0===e?void 0:e.name,null===n||void 0===n?void 0:n.name)},b?{title:n("resourcePolicy.MaxVFolderCount"),dataIndex:"max_vfolder_count",key:"max_vfolder_count",render:e=>0===p().toNumber(e)?"\u221e":e,sorter:(e,n)=>(0,i.Oe)(null===e||void 0===e?void 0:e.max_vfolder_count,null===n||void 0===n?void 0:n.max_vfolder_count,0)}:{},A?{title:n("resourcePolicy.MaxQuotaScopeSize"),dataIndex:"max_quota_scope_size",key:"max_quota_scope_size",render:e=>-1===e?"\u221e":(0,i.wb)(e),sorter:(e,n)=>(0,i.Oe)(null===e||void 0===e?void 0:e.max_quota_scope_size,null===n||void 0===n?void 0:n.max_quota_scope_size,-1)}:{},R?{title:n("resourcePolicy.MaxNetworkCount"),dataIndex:"max_network_count",key:"max_network_count",render:e=>-1===e?"\u221e":e,sorter:(e,n)=>!0}:{},{title:"ID",dataIndex:"id",key:"id",sorter:(e,n)=>(0,i._f)(null===e||void 0===e?void 0:e.id,null===n||void 0===n?void 0:n.id)},{title:n("resourcePolicy.CreatedAt"),dataIndex:"created_at",key:"created_at",render:e=>ce()(e).format("lll"),sorter:(e,n)=>(0,i._f)(null===e||void 0===e?void 0:e.created_at,null===n||void 0===n?void 0:n.created_at)},{title:n("general.Control"),fixed:"right",key:"control",render:(o,l)=>(0,y.jsxs)(u.A,{direction:"row",align:"stretch",children:[(0,y.jsx)(J.Ay,{type:"text",icon:(0,y.jsx)(E.A,{}),style:{color:e.colorInfo},onClick:()=>{j(l)}}),(0,y.jsx)(re.A,{title:n("dialog.ask.DoYouWantToProceed"),description:n("dialog.warning.CannotBeUndone"),okType:"danger",okText:n("button.Delete"),onConfirm:()=>{null!==l&&void 0!==l&&l.name&&(k(l.name+c),K({variables:{name:l.name},onCompleted:(e,o)=>{var l,i;if(null!==e&&void 0!==e&&null!==(l=e.delete_project_resource_policy)&&void 0!==l&&l.ok)if(o&&(null===o||void 0===o?void 0:o.length)>0){const e=p().map(o,(e=>e.message));for(const n of e)te.Ay.error(n)}else a((()=>d())),te.Ay.success(n("resourcePolicy.SuccessfullyDeleted"));else te.Ay.error(null===e||void 0===e||null===(i=e.delete_project_resource_policy)||void 0===i?void 0:i.msg)},onError(e){te.Ay.error(null===e||void 0===e?void 0:e.message)}}))},children:(0,y.jsx)(J.Ay,{type:"text",icon:(0,y.jsx)(O.A,{style:{color:e.colorError}}),loading:F&&f===(null===l||void 0===l?void 0:l.name)+c,disabled:F&&f!==(null===l||void 0===l?void 0:l.name)+c})})]})}]),[L,I]=(0,t.a)("ProjectResourcePolicyList");return(0,y.jsxs)(u.A,{direction:"column",align:"stretch",children:[(0,y.jsxs)(u.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:e.paddingContentVertical,paddingLeft:e.paddingContentHorizontalSM,paddingRight:e.paddingContentHorizontalSM},children:[(0,y.jsx)(u.A,{direction:"column",align:"start",children:(0,y.jsx)(G.A,{menu:{items:[{key:"exportCSV",label:n("resourcePolicy.ExportCSV"),onClick:()=>{(()=>{if(!C)return void te.Ay.error(n("resourcePolicy.NoDataToExport"));const e=p().without(p().map(w,(e=>p().toString(e.key))),"control"),o=p().map(C,(n=>p().pick(n,e.map((e=>e)))));(0,s.RM)(o,"project_resource_polices",{max_vfolder_count:e=>0===p().toNumber(e)?"-":e,max_quota_scope_size:e=>-1===e?"-":(0,i.wb)(e)})})()}}]},children:(0,y.jsx)(J.Ay,{type:"link",style:{padding:0},onClick:e=>e.preventDefault(),children:(0,y.jsxs)(Y.A,{style:{color:e.colorLinkHover},children:[n("resourcePolicy.Tools"),(0,y.jsx)($.A,{})]})})})}),(0,y.jsx)(u.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:(0,y.jsxs)(u.A,{gap:"xs",children:[(0,y.jsx)(J.Ay,{icon:(0,y.jsx)(B.A,{}),loading:l,onClick:()=>{a((()=>d()))}}),(0,y.jsx)(J.Ay,{type:"primary",icon:(0,y.jsx)(Q.A,{}),onClick:()=>{g(!0)},children:n("button.Create")})]})})]}),(0,y.jsx)(W.A,{rowKey:"id",showSorterTooltip:!1,columns:p().filter(w,(e=>!p().includes(L,p().toString(null===e||void 0===e?void 0:e.key)))),dataSource:(0,i.tS)(C),scroll:{x:"max-content"},pagination:!1}),(0,y.jsx)(u.A,{justify:"end",style:{padding:e.paddingXXS},children:(0,y.jsx)(J.Ay,{type:"text",icon:(0,y.jsx)(E.A,{}),onClick:()=>{x()}})}),(0,y.jsx)(N.A,{open:v,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&I(p().difference(w.map((e=>p().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),x()},columns:w,hiddenColumnKeys:L}),(0,y.jsx)(ie,{existingPolicyNames:p().map(C,"name"),open:!!P||m,projectResourcePolicyFrgmt:P||null,onRequestClose:e=>{e&&a((()=>d())),j(null),g(!1)}})]})};var me,pe,_e;const ye=e=>{let{existingPolicyNames:n,userResourcePolicyFrgmt:l=null,onRequestClose:s,...t}=e;const{t:c}=(0,h.Bd)(),{token:d}=M.A.useToken(),{message:m}=R.A.useApp(),g=(0,_.useRef)(null),x=(0,r.CX)(),k=null===x||void 0===x?void 0:x.supports("max-vfolder-count-in-user-and-project-resource-policy"),j=null===x||void 0===x?void 0:x.supports("max-quota-scope-size"),S=null===x||void 0===x?void 0:x.supports("max-session-count-per-model-session"),b=null===x||void 0===x?void 0:x.supports("max-customized-image-count"),A=(0,D.useFragment)(void 0!==me?me:me=o(17402),l),[K,F]=(0,D.useMutation)(void 0!==pe?pe:pe=o(12565)),[w,L]=(0,D.useMutation)(void 0!==_e?_e:_e=o(96083)),I=(0,_.useMemo)((()=>{let e={};null===A&&(e={max_vfolder_count:0,max_quota_scope_size:-1});let n=null===A||void 0===A?void 0:A.max_quota_scope_size;return n=p().isUndefined(n)||-1===n?-1:(0,i.wb)(n),{...e,...A,max_quota_scope_size:n}}),[A,null===A||void 0===A?void 0:A.max_vfolder_count,null===A||void 0===A?void 0:A.max_quota_scope_size]);return(0,y.jsxs)(v.A,{title:c(null===A?"resourcePolicy.CreateResourcePolicy":"resourcePolicy.UpdateResourcePolicy"),onOk:e=>{var n;return null===g||void 0===g||null===(n=g.current)||void 0===n?void 0:n.validateFields().then((e=>{const n={max_vfolder_count:(null===e||void 0===e?void 0:e.max_vfolder_count)||0,max_quota_scope_size:-1===(null===e||void 0===e?void 0:e.max_quota_scope_size)?-1:(0,i._S)(null===e||void 0===e?void 0:e.max_quota_scope_size),max_session_count_per_model_session:null===e||void 0===e?void 0:e.max_session_count_per_model_session,max_customized_image_count:null===e||void 0===e?void 0:e.max_customized_image_count};k||delete n.max_vfolder_count,j||delete n.max_quota_scope_size,S||delete n.max_session_count_per_model_session,b||delete n.max_customized_image_count,null===A?K({variables:{name:null===e||void 0===e?void 0:e.name,props:n},onCompleted(e,n){var o,l;null===e||void 0===e||null===(o=e.create_user_resource_policy)||void 0===o||!o.ok||n?(m.error((null===e||void 0===e||null===(l=e.create_user_resource_policy)||void 0===l?void 0:l.msg)||c("resourcePolicy.CannotCreateResourcePolicy")),s()):(m.success(c("storageHost.ResourcePolicySuccessfullyUpdated")),s(!0))},onError(e){m.error((null===e||void 0===e?void 0:e.message)||c("resourcePolicy.CannotCreateResourcePolicy"))}}):w({variables:{name:null===e||void 0===e?void 0:e.name,props:n},onCompleted(e,n){var o,l;null===e||void 0===e||null===(o=e.modify_user_resource_policy)||void 0===o||!o.ok||n?(m.error((null===e||void 0===e||null===(l=e.modify_user_resource_policy)||void 0===l?void 0:l.msg)||c("resourcePolicy.CannotUpdateResourcePolicy")),s()):(m.success(c("storageHost.ResourcePolicySuccessfullyUpdated")),s(!0))},onError(e){m.error((null===e||void 0===e?void 0:e.message)||c("resourcePolicy.CannotUpdateResourcePolicy"))}})})).catch((()=>{}))},onCancel:()=>s(),destroyOnClose:!0,confirmLoading:F||L,...t,children:[(0,y.jsx)(le.A,{message:c("storageHost.BeCarefulToSetUserResourcePolicy"),type:"warning",showIcon:!0,style:{marginBottom:d.marginMD}}),(0,y.jsxs)(f.A,{ref:g,layout:"vertical",requiredMark:"optional",initialValues:I,preserve:!1,children:[(0,y.jsx)(f.A.Item,{label:c("resourcePolicy.Name"),name:"name",required:!0,rules:[{required:!0,message:c("data.explorer.ValueRequired")},{max:255},{validator:(e,o)=>!A&&null!==n&&void 0!==n&&n.includes(o)?Promise.reject(c("resourcePolicy.ResourcePolicyNameAlreadyExists")):Promise.resolve()}],children:(0,y.jsx)(C.A,{disabled:!!A})}),(0,y.jsxs)(u.A,{direction:"column",align:"stretch",gap:"md",style:{marginBottom:d.marginMD},children:[k?(0,y.jsx)(P,{name:"max_vfolder_count",unlimitedValue:0,label:c("resourcePolicy.MaxFolderCount"),style:{width:"100%",margin:0},children:(0,y.jsx)(q.A,{min:0,max:a.tu,style:{width:"100%"}})}):null,j?(0,y.jsx)(P,{name:"max_quota_scope_size",unlimitedValue:-1,label:c("storageHost.MaxFolderSize"),style:{width:"100%",margin:0},children:(0,y.jsx)(q.A,{min:0,max:Math.floor(Number.MAX_SAFE_INTEGER/Math.pow(10,9)),addonAfter:"GB",style:{width:"100%"}})}):null]}),S?(0,y.jsx)(f.A.Item,{name:"max_session_count_per_model_session",label:c("resourcePolicy.MaxSessionCountPerModelSession"),rules:[{required:!0,message:c("data.explorer.ValueRequired")}],children:(0,y.jsx)(q.A,{min:0,max:a.tu,style:{width:"100%"}})}):null,b?(0,y.jsx)(f.A.Item,{name:"max_customized_image_count",label:c("resourcePolicy.MaxCustomizedImageCount"),rules:[{required:!0,message:c("data.explorer.ValueRequired")}],children:(0,y.jsx)(q.A,{min:0,max:a.tu,style:{width:"100%"}})}):null]})]})};var ge,ve;const xe=()=>{const{token:e}=M.A.useToken(),{t:n}=(0,h.Bd)(),{message:l}=R.A.useApp(),[a,c]=(0,_.useTransition)(),[d,m]=(0,r.Tw)("initial-fetch"),[g,v]=(0,_.useState)(!1),[x,{toggle:f}]=(0,H.A)(),[k,P]=(0,_.useState)(),[j,S]=(0,_.useState)(),b=(0,r.CX)(),A=null===b||void 0===b?void 0:b.supports("max-vfolder-count-in-user-and-project-resource-policy"),C=null===b||void 0===b?void 0:b.supports("max-quota-scope-size"),K=null===b||void 0===b?void 0:b.supports("max-session-count-per-model-session"),F=null===b||void 0===b?void 0:b.supports("max-customized-image-count"),{user_resource_policies:w}=(0,D.useLazyLoadQuery)(void 0!==ge?ge:ge=o(90413),{},{fetchPolicy:"initial-fetch"===d?"store-and-network":"network-only",fetchKey:d}),[L,I]=(0,D.useMutation)(void 0!==ve?ve:ve=o(60656)),q=(0,i.LY)([{title:n("resourcePolicy.Name"),dataIndex:"name",key:"name",fixed:"left",sorter:(e,n)=>(0,i._f)(null===e||void 0===e?void 0:e.name,null===n||void 0===n?void 0:n.name)},A&&{title:n("resourcePolicy.MaxVFolderCount"),dataIndex:"max_vfolder_count",key:"max_vfolder_count",render:e=>0===p().toNumber(e)?"\u221e":e,sorter:(e,n)=>(0,i.Oe)(null===e||void 0===e?void 0:e.max_vfolder_count,null===n||void 0===n?void 0:n.max_vfolder_count,0)},K&&{title:n("resourcePolicy.MaxSessionCountPerModelSession"),dataIndex:"max_session_count_per_model_session",key:"max_session_count_per_model_session",sorter:(e,n)=>{var o,l;return(null!==(o=null===e||void 0===e?void 0:e.max_session_count_per_model_session)&&void 0!==o?o:0)-(null!==(l=null===n||void 0===n?void 0:n.max_session_count_per_model_session)&&void 0!==l?l:0)}},C&&{title:n("resourcePolicy.MaxQuotaScopeSize"),dataIndex:"max_quota_scope_size",key:"max_quota_scope_size",render:e=>-1===e?"\u221e":(0,i.wb)(e),sorter:(e,n)=>(0,i.Oe)(null===e||void 0===e?void 0:e.max_quota_scope_size,null===n||void 0===n?void 0:n.max_quota_scope_size,-1)},F&&{title:n("resourcePolicy.MaxCustomizedImageCount"),key:"max_customized_image_count",dataIndex:"max_customized_image_count",sorter:(e,n)=>{var o,l;return(null!==(o=null===e||void 0===e?void 0:e.max_customized_image_count)&&void 0!==o?o:0)-(null!==(l=null===n||void 0===n?void 0:n.max_customized_image_count)&&void 0!==l?l:0)}},{title:"ID",dataIndex:"id",key:"id",sorter:(e,n)=>(0,i._f)(null===e||void 0===e?void 0:e.id,null===n||void 0===n?void 0:n.id)},{title:n("resourcePolicy.CreatedAt"),dataIndex:"created_at",key:"created_at",render:e=>ce()(e).format("lll"),sorter:(e,n)=>(0,i._f)(null===e||void 0===e?void 0:e.created_at,null===n||void 0===n?void 0:n.created_at)},{title:n("general.Control"),fixed:"right",key:"control",render:(o,i)=>(0,y.jsxs)(u.A,{direction:"row",align:"stretch",children:[(0,y.jsx)(J.Ay,{type:"text",icon:(0,y.jsx)(E.A,{}),style:{color:e.colorInfo},onClick:()=>{S(i)}}),(0,y.jsx)(re.A,{title:n("dialog.ask.DoYouWantToProceed"),description:n("dialog.warning.CannotBeUndone"),okType:"danger",okText:n("button.Delete"),onConfirm:()=>{null!==i&&void 0!==i&&i.name&&(P(i.name+d),L({variables:{name:i.name},onCompleted:(e,o)=>{var i,a;if(null!==e&&void 0!==e&&null!==(i=e.delete_user_resource_policy)&&void 0!==i&&i.ok)if(o&&o.length>0){const e=o.map((e=>e.message));for(const n of e)l.error(n)}else c((()=>m())),l.success(n("resourcePolicy.SuccessfullyDeleted"));else l.error(null===e||void 0===e||null===(a=e.delete_user_resource_policy)||void 0===a?void 0:a.msg)},onError(e){l.error(null===e||void 0===e?void 0:e.message)}}))},children:(0,y.jsx)(J.Ay,{type:"text",icon:(0,y.jsx)(O.A,{style:{color:e.colorError}}),loading:I&&k===(null===i||void 0===i?void 0:i.name)+d,disabled:I&&k!==(null===i||void 0===i?void 0:i.name)+d})})]})}]),[z,T]=(0,t.a)("UserResourcePolicyList");return(0,y.jsxs)(u.A,{direction:"column",align:"stretch",children:[(0,y.jsxs)(u.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:e.paddingContentVertical,paddingLeft:e.paddingContentHorizontalSM,paddingRight:e.paddingContentHorizontalSM},children:[(0,y.jsx)(u.A,{direction:"column",align:"start",children:(0,y.jsx)(G.A,{menu:{items:[{key:"exportCSV",label:n("resourcePolicy.ExportCSV"),onClick:()=>{(()=>{if(!w||w.length===(null===z||void 0===z?void 0:z.length))return void l.error(n("resourcePolicy.NoDataToExport"));const e=p().without(p().map(q,(e=>p().toString(e.key))),"control"),o=p().map(w,(n=>p().pick(n,e.map((e=>e)))));(0,s.RM)(o,"user-resource-policies",{max_vfolder_count:e=>0===p().toNumber(e)?"-":e,max_quota_scope_size:e=>-1===e?"-":(0,i.wb)(e)})})()}}]},children:(0,y.jsx)(J.Ay,{type:"link",style:{padding:0},onClick:e=>e.preventDefault(),children:(0,y.jsxs)(Y.A,{style:{color:e.colorLinkHover},children:[n("resourcePolicy.Tools"),(0,y.jsx)($.A,{})]})})})}),(0,y.jsx)(u.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:(0,y.jsxs)(u.A,{gap:"xs",children:[(0,y.jsx)(J.Ay,{icon:(0,y.jsx)(B.A,{}),loading:a,onClick:()=>{c((()=>m()))}}),(0,y.jsx)(J.Ay,{type:"primary",icon:(0,y.jsx)(Q.A,{}),onClick:()=>{v(!0)},children:n("button.Create")})]})})]}),(0,y.jsx)(W.A,{rowKey:"id",showSorterTooltip:!1,columns:p().filter(q,(e=>!p().includes(z,p().toString(null===e||void 0===e?void 0:e.key)))),dataSource:(0,i.tS)(w),scroll:{x:"max-content"},pagination:!1}),(0,y.jsx)(u.A,{justify:"end",style:{padding:e.paddingXXS},children:(0,y.jsx)(J.Ay,{type:"text",icon:(0,y.jsx)(E.A,{}),onClick:()=>{f()}})}),(0,y.jsx)(N.A,{open:x,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&T(p().difference(q.map((e=>p().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),f()},columns:q,hiddenColumnKeys:z}),(0,y.jsx)(ye,{existingPolicyNames:p().map(w,"name"),open:!!j||g,userResourcePolicyFrgmt:j||null,onRequestClose:e=>{e&&c((()=>m())),S(null),v(!1)}})]})};var fe=o(86289);const ke=(0,fe.withDefault)(fe.StringParam,"keypair"),he=()=>{const{t:e}=(0,h.Bd)(),[n]=(0,fe.useQueryParam)("tab",ke),o=(0,r.f0)(),a=(0,r.CX)(),s=null===a||void 0===a?void 0:a.supports("configure-user-resource-policy");return(0,y.jsx)(w.A,{activeTabKey:n,onTabChange:e=>{o({pathname:"/resource-policy",search:new URLSearchParams({tab:e}).toString()},{params:{tab:e}})},tabList:(0,i.LY)([{key:"keypair",label:e("resourcePolicy.Keypair")},s&&{key:"user",label:e("resourcePolicy.User")},{key:"project",label:e("resourcePolicy.Project")}]),styles:{body:{padding:0,paddingTop:1,overflow:"hidden"}},children:(0,y.jsxs)(_.Suspense,{fallback:(0,y.jsx)(l.A,{}),children:["keypair"===n&&(0,y.jsx)(Z,{}),"user"===n&&(0,y.jsx)(xe,{}),"project"===n&&(0,y.jsx)(de,{})]})})}}}]);
//# sourceMappingURL=2812.f0d746d8.chunk.js.map