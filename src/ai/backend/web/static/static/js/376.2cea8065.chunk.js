/*! For license information please see 376.2cea8065.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[376],{41610:(e,l,n)=>{n.d(l,{A:()=>d});var i=n(89130),t=n(50868),a=n(85690),r=n(89608),o=n.n(r),s=(n(43373),n(73689));const d=e=>{let{title:l,valueLabel:n,percent:r=0,width:d,strokeColor:u,labelStyle:c,size:g="small"}=e;const{token:m}=t.A.useToken(),v="small"===g?m.fontSizeSM:"middle"===g?m.fontSize:m.fontSizeLG;return(0,s.jsxs)(i.A,{style:{padding:1,border:`1px solid ${m.colorBorder}`,borderRadius:3,backgroundColor:m.colorBgContainerDisabled,...o().isNumber(d)||o().isString(d)?{width:d}:{flex:1}},direction:"column",align:"stretch",children:[(0,s.jsx)(i.A,{style:{height:"100%",width:`${r>100?100:r}%`,position:"absolute",left:0,top:0,backgroundColor:null!==u&&void 0!==u?u:m.colorSuccess,opacity:.7,zIndex:0,overflow:"hidden"}}),(0,s.jsxs)(i.A,{direction:"row",justify:"between",children:[(0,s.jsx)(a.A.Text,{style:{fontSize:v,...c},children:l}),(0,s.jsx)(a.A.Text,{style:{fontSize:v,...c},children:n})]})]})}},98401:(e,l,n)=>{n.d(l,{A:()=>d});var i=n(89130),t=n(15934),a=n(89608),r=n.n(a),o=n(43373),s=n(73689);const d=e=>{let l,{values:n=[]}=e;return 0===n.length?null:(l=n[0]&&("string"===typeof n[0]||o.isValidElement(n[0]))?n.map((e=>({label:e,color:"blue"}))):n,(0,s.jsx)(i.A,{direction:"row",children:r().map(l,((e,n)=>(0,s.jsx)(t.A,{style:r().last(l)===e?void 0:{margin:0,marginRight:-1},color:e.color,children:e.label},n)))}))}},76604:(e,l,n)=>{n.d(l,{A:()=>y,s:()=>h});var i=n(58879),t=n(11899),a=n(15634),r=n(89130),o=n(50868),s=n(85690),d=n(33789),u=n(89608),c=n.n(u),g=n(8652),m=n(43373),v=n(73689);const p=e=>{var l,n;let{type:d,value:u,extra:g,opts:m,hideTooltip:p=!1,max:x}=e;const{token:y}=o.A.useToken(),b=(0,a.Nw)(),{mergedResourceSlots:A}=(0,t.Hv)(b||void 0),j=e=>{var l,n,t;return null!==A&&void 0!==A&&null!==(l=A[d])&&void 0!==l&&l.number_format.binary?Number(null===(n=(0,i.Js)(e,"g",3,!0))||void 0===n?void 0:n.numberFixed).toString():((null===A||void 0===A||null===(t=A[d])||void 0===t?void 0:t.number_format.round_length)||0)>0?parseFloat(e).toFixed(2):e};return(0,v.jsxs)(r.A,{direction:"row",gap:"xxs",children:[null!==A&&void 0!==A&&A[d]?(0,v.jsx)(h,{type:d,showTooltip:!p}):d,(0,v.jsxs)(s.A.Text,{children:[j(u),c().isUndefined(x)?null:"Infinity"===x?"~\u221e":`~${j(x)}`]}),(0,v.jsx)(s.A.Text,{type:"secondary",children:(null===A||void 0===A||null===(l=A[d])||void 0===l?void 0:l.display_unit)||""}),"mem"===d&&null!==m&&void 0!==m&&m.shmem&&(null===m||void 0===m?void 0:m.shmem)>0?(0,v.jsxs)(s.A.Text,{type:"secondary",style:{fontSize:y.fontSizeSM},children:["(SHM: ",null===(n=(0,i.Js)(m.shmem+"b","g",2,!0))||void 0===n?void 0:n.numberFixed,"GiB)"]}):null,g]})},x=e=>{let{size:l=16,children:n}=e;return(0,v.jsx)("mwc-icon",{style:{"--mdc-icon-size":`${l+2}px`,width:l,height:l},children:n})},h=e=>{var l;let{type:n,size:i=16,showIcon:t=!0,showUnit:a=!0,showTooltip:o=!0,...s}=e;const u={cpu:(0,v.jsx)(x,{size:i,children:"developer_board"}),mem:(0,v.jsx)(x,{size:i,children:"memory"}),"cuda.device":"/resources/icons/file_type_cuda.svg","cuda.shares":"/resources/icons/file_type_cuda.svg","rocm.device":"/resources/icons/rocm.svg","tpu.device":(0,v.jsx)(x,{size:i,children:"view_module"}),"ipu.device":(0,v.jsx)(x,{size:i,children:"view_module"}),"atom.device":"/resources/icons/rebel.svg","atom-plus.device":"/resources/icons/rebel.svg","gaudi2.device":"/resources/icons/gaudi.svg","warboy.device":"/resources/icons/furiosa.svg","hyperaccel-lpu.device":"/resources/icons/npu_generic.svg"},c=null!==(l=u[n])&&void 0!==l?l:(0,v.jsx)(g.A,{}),m="string"===typeof c?(0,v.jsx)("img",{...s,style:{height:i,alignSelf:"center",...s.style||{}},src:u[n]||"",alt:n}):(0,v.jsx)(r.A,{style:{width:16,height:16},children:c||n});return o?(0,v.jsx)(d.A,{title:n,children:m}):(0,v.jsx)(r.A,{style:{pointerEvents:"none"},children:m})},y=m.memo(p)},5521:(e,l,n)=>{n.r(l),n.d(l,{default:()=>t});const i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentDetailModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"available_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cpu_cur_pct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mem_cur_bytes",storageKey:null}],type:"Agent",abstractKey:null,hash:"cb343a0290034803cca4c2b82a1c1b68"},t=i},99595:(e,l,n)=>{n.r(l),n.d(l,{default:()=>t});const i=function(){var e={defaultValue:null,kind:"LocalArgument",name:"filter"},l={defaultValue:null,kind:"LocalArgument",name:"limit"},n={defaultValue:null,kind:"LocalArgument",name:"offset"},i={defaultValue:null,kind:"LocalArgument",name:"order"},t={defaultValue:null,kind:"LocalArgument",name:"status"},a=[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"},{kind:"Variable",name:"order",variableName:"order"},{kind:"Variable",name:"status",variableName:"status"}],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"addr",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"compute_plugins",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"first_contact",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"lost_at",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"status_changed",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"cpu_cur_pct",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"mem_cur_bytes",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"available_slots",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"schedulable",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null};return{fragment:{argumentDefinitions:[e,l,n,i,t],kind:"Fragment",metadata:null,name:"AgentListQuery",selections:[{alias:null,args:a,concreteType:"AgentList",kind:"LinkedField",name:"agent_list",plural:!1,selections:[{alias:null,args:null,concreteType:"Agent",kind:"LinkedField",name:"items",plural:!0,selections:[r,o,s,d,u,c,g,m,v,p,x,h,y,b,A,j,f,{args:null,kind:"FragmentSpread",name:"AgentDetailModalFragment"},{args:null,kind:"FragmentSpread",name:"AgentSettingModalFragment"}],storageKey:null},_],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,n,e,t,i],kind:"Operation",name:"AgentListQuery",selections:[{alias:null,args:a,concreteType:"AgentList",kind:"LinkedField",name:"agent_list",plural:!1,selections:[{alias:null,args:null,concreteType:"Agent",kind:"LinkedField",name:"items",plural:!0,selections:[r,o,s,d,u,c,g,m,v,p,x,h,y,b,A,j,f],storageKey:null},_],storageKey:null}]},params:{cacheID:"e1a551c0261ce59a4b187a3bbb29b86b",id:null,metadata:{},name:"AgentListQuery",operationKind:"query",text:"query AgentListQuery(\n  $limit: Int!\n  $offset: Int!\n  $filter: String\n  $status: String\n  $order: String\n) {\n  agent_list(limit: $limit, offset: $offset, filter: $filter, status: $status, order: $order) {\n    items {\n      id\n      status\n      version\n      addr\n      architecture\n      region\n      compute_plugins\n      first_contact\n      lost_at\n      status_changed\n      live_stat\n      cpu_cur_pct\n      mem_cur_bytes\n      available_slots\n      occupied_slots\n      scaling_group\n      schedulable\n      ...AgentDetailModalFragment\n      ...AgentSettingModalFragment\n    }\n    total_count\n  }\n}\n\nfragment AgentDetailModalFragment on Agent {\n  id\n  live_stat\n  available_slots\n  occupied_slots\n  cpu_cur_pct\n  mem_cur_bytes\n}\n\nfragment AgentSettingModalFragment on Agent {\n  id\n  schedulable\n}\n"}}}();i.hash="1d6c6a390aad71e4b7815a623ca61d86";const t=i},64732:(e,l,n)=>{n.r(l),n.d(l,{default:()=>t});const i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentSettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"schedulable",storageKey:null}],type:"Agent",abstractKey:null,hash:"303f8ee06508c3b28511ab1a24a305d5"},t=i},25099:(e,l,n)=>{n.r(l),n.d(l,{default:()=>t});const i=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"props"}],l=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyAgent",kind:"LinkedField",name:"modify_agent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"AgentSettingModalMutation",selections:l,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"AgentSettingModalMutation",selections:l},params:{cacheID:"1a9e43d4bc6e78f3949d1a2a397ff00e",id:null,metadata:{},name:"AgentSettingModalMutation",operationKind:"mutation",text:"mutation AgentSettingModalMutation(\n  $id: String!\n  $props: ModifyAgentInput!\n) {\n  modify_agent(id: $id, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();i.hash="13b2a6a91c7f08bbced5fde155ded60e";const t=i},90376:(e,l,n)=>{n.r(l),n.d(l,{default:()=>ee});var i,t=n(58879),a=n(51593),r=n(11899),o=n(16522),s=n(84553),d=n(94126),u=n(41610),c=n(89130),g=n(50868),m=n(98038),v=n(52932),p=n(85690),x=n(89608),h=n.n(x),y=n(43373),b=n(56762),A=n(88522),j=n(73689);const f=e=>{var l,a,o,s,x,y,f,_,k,S,F,w,T,z,L,M,K;let{agentDetailModalFrgmt:C=null,onRequestClose:N,...D}=e;const{t:I}=(0,b.Bd)(),{token:$}=g.A.useToken(),{mergedResourceSlots:R}=(0,r.Hv)(),J=(0,A.useFragment)(void 0!==i?i:i=n(5521),C),V=JSON.parse((null===J||void 0===J?void 0:J.live_stat)||"{}"),E=JSON.parse((null===J||void 0===J?void 0:J.available_slots)||"{}");return(0,j.jsx)(d.A,{...D,centered:!0,title:`${I("agent.DetailedInformation")}: ${null===J||void 0===J?void 0:J.id}`,onCancel:N,destroyOnClose:!0,footer:null,children:(0,j.jsxs)(c.A,{direction:"column",align:"stretch",gap:"md",children:[(0,j.jsxs)(m.A,{gutter:[24,24],children:[(0,j.jsx)(v.A,{xs:24,sm:12,children:null!==V&&void 0!==V&&null!==(l=V.devices)&&void 0!==l&&l.cpu_util?(0,j.jsxs)(c.A,{direction:"column",gap:"xxs",align:"stretch",children:[(0,j.jsx)(p.A.Title,{level:5,style:{marginTop:0},children:null===R||void 0===R||null===(a=R.cpu)||void 0===a?void 0:a.human_readable_name}),h().map(null===V||void 0===V||null===(o=V.devices)||void 0===o?void 0:o.cpu_util,((e,l)=>{var n;return(0,j.jsxs)(c.A,{justify:"between",children:[(0,j.jsxs)(p.A.Text,{type:"secondary",style:{flex:.5},children:[null===R||void 0===R||null===(n=R.cpu)||void 0===n?void 0:n.human_readable_name,l]},l),(0,j.jsx)(u.A,{percent:null===e||void 0===e?void 0:e.pct,valueLabel:(null===e||void 0===e?void 0:e.pct)+"%"})]})}))]}):null}),(0,j.jsxs)(v.A,{xs:24,sm:12,children:[null!==E&&void 0!==E&&E.mem?(0,j.jsxs)(c.A,{direction:"column",gap:"xxs",align:"stretch",children:[(0,j.jsx)(p.A.Title,{level:5,style:{marginTop:0},children:null===R||void 0===R||null===(s=R.mem)||void 0===s?void 0:s.human_readable_name}),(0,j.jsx)(u.A,{percent:null!==(x=(null!==(y=null===(f=(0,t.Js)(h().toString(null===J||void 0===J?void 0:J.mem_cur_bytes),"g"))||void 0===f?void 0:f.number)&&void 0!==y?y:0)/(null!==(_=null===(k=(0,t.Js)(null===E||void 0===E?void 0:E.mem,"g"))||void 0===k?void 0:k.number)&&void 0!==_?_:0)*100)&&void 0!==x?x:0,valueLabel:`${null===(S=(0,t.Js)(h().toString(null===J||void 0===J?void 0:J.mem_cur_bytes),"g"))||void 0===S?void 0:S.numberUnit}iB / ${null===(F=(0,t.Js)(null===E||void 0===E?void 0:E.mem,"g"))||void 0===F?void 0:F.numberUnit}iB`})]}):null,null!==V&&void 0!==V&&V.node?(0,j.jsxs)(c.A,{direction:"column",gap:"xxs",align:"start",children:[(0,j.jsx)(p.A.Title,{level:5,style:{marginTop:0},children:I("session.launcher.Network")}),(0,j.jsxs)(c.A,{gap:"xl",children:[(0,j.jsx)(p.A.Text,{children:"TX:"}),(0,j.jsxs)(p.A.Text,{children:[null===(w=(0,t.Js)(null===V||void 0===V||null===(T=V.node)||void 0===T||null===(z=T.net_tx)||void 0===z?void 0:z.current,"m",1))||void 0===w?void 0:w.numberUnit,"iB"]})]}),(0,j.jsxs)(c.A,{gap:"xl",children:[(0,j.jsx)(p.A.Text,{children:"RX:"}),(0,j.jsxs)(p.A.Text,{children:[null===(L=(0,t.Js)(null===V||void 0===V||null===(M=V.node)||void 0===M||null===(K=M.net_rx)||void 0===K?void 0:K.current,"m",1))||void 0===L?void 0:L.numberUnit,"iB"]})]})]}):null]})]}),(0,j.jsx)(m.A,{gutter:[24,24],style:{marginBottom:$.marginSM},children:h().map(h().keys(null===V||void 0===V?void 0:V.devices),(e=>{if(["cpu_util","mem","disk","net_rx","net_tx"].includes(e))return null;if(h().includes(e,"_util")){var l;const n=h().split(e,"_")[0]+".device";return(0,j.jsx)(v.A,{xs:24,sm:12,children:(0,j.jsxs)(c.A,{direction:"column",gap:"xxs",align:"stretch",children:[(0,j.jsxs)(p.A.Title,{level:5,style:{marginTop:0},children:[null===R||void 0===R||null===(l=R[n])||void 0===l?void 0:l.human_readable_name," ",I("session.Utilization")]}),h().map(h().toPairs(null===V||void 0===V?void 0:V.devices[e]),((e,l)=>{var i,t,a;return(0,j.jsxs)(c.A,{justify:"between",children:[(0,j.jsxs)(p.A.Text,{type:"secondary",style:{flex:.5},children:[null===R||void 0===R||null===(i=R[n])||void 0===i?void 0:i.human_readable_name,l]},l),(0,j.jsx)(u.A,{percent:h().toFinite(null===e||void 0===e||null===(t=e[1])||void 0===t?void 0:t.pct),valueLabel:(null===e||void 0===e||null===(a=e[1])||void 0===a?void 0:a.pct)+"%"})]})}))]})})}if(h().includes(e,"_mem")){var n;const l=h().split(e,"_")[0]+".device";return(0,j.jsx)(v.A,{xs:24,sm:12,children:(0,j.jsxs)(c.A,{direction:"column",gap:"xxs",align:"stretch",children:[(0,j.jsxs)(p.A.Title,{level:5,style:{marginTop:0},children:[null===R||void 0===R||null===(n=R[l])||void 0===n?void 0:n.human_readable_name," ",I("session.launcher.Memory")]}),h().map(h().toPairs(null===V||void 0===V?void 0:V.devices[e]),((e,n)=>{var i,t,a;return(0,j.jsxs)(c.A,{justify:"between",children:[(0,j.jsxs)(p.A.Text,{type:"secondary",style:{flex:.5},children:[null===R||void 0===R||null===(i=R[l])||void 0===i?void 0:i.human_readable_name,n]},n),(0,j.jsx)(u.A,{percent:h().toFinite(null===e||void 0===e||null===(t=e[1])||void 0===t?void 0:t.pct),valueLabel:(null===e||void 0===e||null===(a=e[1])||void 0===a?void 0:a.pct)+"%"})]})}))]})})}}))})]})})};var _,k,S=n(44733),F=n(23702),w=n(15480);const T=e=>{let{agentSettingModalFrgmt:l=null,onRequestClose:i,...t}=e;const{t:a}=(0,b.Bd)(),{message:r}=S.A.useApp(),o=(0,y.useRef)(null),s=(0,A.useFragment)(void 0!==_?_:_=n(64732),l),[u,c]=(0,A.useMutation)(void 0!==k?k:k=n(25099));return(0,j.jsx)(d.A,{...t,title:`${a("agent.AgentSetting")}: ${null===s||void 0===s?void 0:s.id}`,onCancel:()=>i(),destroyOnClose:!0,width:300,confirmLoading:c,onOk:()=>{var e;null===(e=o.current)||void 0===e||e.validateFields().then((e=>{u({variables:{id:(null===s||void 0===s?void 0:s.id)||"",props:{schedulable:e.schedulable}},onCompleted(e,l){var n,t;null===e||void 0===e||null===(n=e.modify_agent)||void 0===n||!n.ok||l?(r.error(null===e||void 0===e||null===(t=e.modify_agent)||void 0===t?void 0:t.msg),i()):(r.success(a("agent.AgentSettingUpdated")),i(!0))},onError(e){r.error(null===e||void 0===e?void 0:e.message)}})})).catch((()=>{}))},children:(0,j.jsx)(F.A,{ref:o,preserve:!1,initialValues:{...s},children:(0,j.jsx)(F.A.Item,{name:"schedulable",label:a("agent.Schedulable"),valuePropName:"checked",children:(0,j.jsx)(w.A,{})})})})};var z,L=n(94016),M=n(10546),K=n(98401),C=n(76604),N=n(30957),D=n(68154),I=n(67318),$=n(74539),R=n(81850),J=n(40567),V=n(44954),E=n(55429),B=n(15934),O=n(60822),P=n(78792),G=n(33789),U=n(77731),q=n(12731),X=n.n(q);const Z=e=>{let{containerStyle:l,tableProps:i}=e;const{t:d}=(0,b.Bd)(),{token:m}=g.A.useToken(),{isDarkMode:v}=(0,s.e)(),{mergedResourceSlots:x}=(0,r.Hv)(),[_,k]=(0,y.useState)(),[S,F]=(0,y.useState)(),[w,q]=(0,y.useState)(!1),Z=(0,a.CX)(),[W,Q]=(0,y.useTransition)(),[H,Y]=(0,y.useTransition)(),[ee,le]=(0,y.useTransition)(),[ne,ie]=(0,y.useState)("ALIVE"),[te,ae]=(0,y.useState)(ne),[re,oe]=(0,y.useTransition)(),[se,de]=(0,y.useState)(),{baiPaginationOption:ue,tablePaginationOption:ce,setTablePaginationOption:ge}=(0,o.w4)({current:1,pageSize:20}),[me,ve]=(0,y.useState)(),[pe,xe]=(0,a.Tw)("first"),[he]=(0,y.useState)("network-only"),ye=()=>Y((()=>{xe()})),{agent_list:be}=(0,A.useLazyLoadQuery)(void 0!==z?z:z=n(99595),{limit:ue.limit,offset:ue.offset,filter:se,order:me,status:ne},{fetchKey:pe,fetchPolicy:he}),Ae=[{title:"#",fixed:"left",render:(e,l,n)=>n+1+(ce.current-1)*ce.pageSize,showSorterTooltip:!1,rowScope:"row"},{title:(0,j.jsxs)(j.Fragment,{children:["ID / ",d("agent.Endpoint")]}),key:"id",dataIndex:"id",fixed:"left",render:(e,l)=>(0,j.jsxs)(c.A,{direction:"column",align:"start",children:[(0,j.jsx)(p.A.Text,{children:e}),(0,j.jsx)(p.A.Text,{type:"secondary",children:null===l||void 0===l?void 0:l.addr})]}),sorter:!0},{title:d("agent.Region"),key:"region",dataIndex:"region",render:e=>{const l=h().split(e,"/"),n=null===l||void 0===l?void 0:l[0],i=(null===l||void 0===l?void 0:l.length)>1?l[1]:"",{color:t,icon:a}={aws:{color:"orange",icon:"aws"},amazon:{color:"orange",icon:"aws"},azure:{color:"blue",icon:"azure"},gcp:{color:"lightblue",icon:"gcp"},google:{color:"lightblue",icon:"gcp"},nbp:{color:"green",icon:"nbp"},naver:{color:"green",icon:"nbp"},openstack:{color:"red",icon:"openstack"},dgx:{color:"green",icon:"local"},local:{color:"yellow",icon:"local"}}[n]||{color:"yellow",icon:"local"};return(0,j.jsxs)(c.A,{gap:"xxs",children:[(0,j.jsx)("img",{alt:e,src:`/resources/icons/${a}.png`,style:{width:"32px",height:"32px",filter:v&&"local"===a?"invert(1)":""}}),""!==i?(0,j.jsx)(K.A,{values:[{label:i,color:t},{label:n,color:t}]}):(0,j.jsx)(B.A,{color:t,children:n})]})}},{title:d("agent.Architecture"),key:"architecture",dataIndex:"architecture"},{title:d("agent.Starts"),key:"first_contact",dataIndex:"first_contact",render:e=>(0,j.jsxs)(c.A,{direction:"column",children:[(0,j.jsx)(p.A.Text,{children:X()(e).format("ll LTS")}),(0,j.jsx)(K.A,{values:[d("agent.Running"),(0,j.jsx)(L.A,{callback:()=>Z.utils.elapsedTime(e,Date.now()),delay:1e3})]})]}),sorter:!0},{title:d("agent.Allocation"),key:"allocation",render:(e,l)=>{const n=JSON.parse((null===l||void 0===l?void 0:l.occupied_slots)||"{}"),i=JSON.parse((null===l||void 0===l?void 0:l.available_slots)||"{}");return(0,j.jsx)(c.A,{direction:"column",gap:"xxs",children:h().map(i,((e,l)=>{if("cpu"===l){var a;const e=h().toFinite(h().toNumber(n.cpu)/h().toNumber(i.cpu)*100);return(0,j.jsxs)(c.A,{justify:"between",style:{minWidth:220},children:[(0,j.jsxs)(c.A,{gap:"xxs",children:[(0,j.jsx)(C.s,{type:l},l),(0,j.jsxs)(p.A.Text,{children:[(0,t.Z1)(n.cpu||0,0),"/",(0,t.Z1)(i.cpu||0,0)]}),(0,j.jsx)(p.A.Text,{type:"secondary",style:{fontSize:m.sizeXS},children:null===x||void 0===x||null===(a=x.cpu)||void 0===a?void 0:a.display_unit})]}),(0,j.jsx)(u.A,{percent:e,strokeColor:e>80?m.colorError:m.colorSuccess,width:120,valueLabel:(0,t.Z1)(e,1)+" %"})]},l)}if("mem"===l){var r,o,s,d;const e=h().toFinite(h().toNumber(n.mem)/h().toNumber(i.mem)*100);return(0,j.jsxs)(c.A,{justify:"between",style:{minWidth:220},children:[(0,j.jsxs)(c.A,{gap:"xxs",children:[(0,j.jsx)(C.s,{type:"mem"}),(0,j.jsxs)(p.A.Text,{children:[null!==(r=null===(o=(0,t.Js)(n.mem,"g",0))||void 0===o?void 0:o.numberFixed)&&void 0!==r?r:0,"/",null!==(s=null===(d=(0,t.Js)(i.mem,"g",0))||void 0===d?void 0:d.numberFixed)&&void 0!==s?s:0]}),(0,j.jsx)(p.A.Text,{type:"secondary",style:{fontSize:m.sizeXS},children:"GiB"})]}),(0,j.jsx)(u.A,{percent:e,strokeColor:e>80?m.colorError:m.colorSuccess,width:120,valueLabel:(0,t.Z1)(e,1)+" %"})]},"mem")}if(i[l]){var g;const e=h().toFinite(h().toNumber(n[l])/h().toNumber(i[l])*100);return(0,j.jsxs)(c.A,{justify:"between",style:{minWidth:220},gap:"xxs",children:[(0,j.jsxs)(c.A,{gap:"xxs",children:[(0,j.jsx)(C.s,{type:l},l),(0,j.jsxs)(p.A.Text,{children:[(0,t.Z1)(n[l]||0,2),"/",(0,t.Z1)(i[l],2)]}),(0,j.jsx)(p.A.Text,{type:"secondary",style:{fontSize:m.sizeXS},children:null===x||void 0===x||null===(g=x[l])||void 0===g?void 0:g.display_unit})]}),(0,j.jsx)(u.A,{percent:e,strokeColor:e>80?m.colorError:m.colorSuccess,width:120,valueLabel:(0,t.Z1)(e,1)+" %"})]},l)}}))})}},{title:d("agent.Utilization"),key:"live_stat",dataIndex:"live_stat",render:(e,l)=>{const n=JSON.parse(e||"{}"),i=JSON.parse((null===l||void 0===l?void 0:l.available_slots)||"{}");if("ALIVE"===(null===l||void 0===l?void 0:l.status)){var a,r,o,s;const e={cpu_util:{capacity:0,current:0,ratio:0},mem_util:{capacity:0,current:0,ratio:0}};if(n&&n.node&&n.devices){const l=h().keys(n.devices.cpu_util).length;e.cpu_util.capacity=h().toFinite(n.node.cpu_util.capacity),e.cpu_util.current=h().toFinite(n.node.cpu_util.current),e.cpu_util.ratio=e.cpu_util.current/e.cpu_util.capacity/l||0,e.mem_util.capacity=h().toInteger(i.mem||n.node.mem.capacity),e.mem_util.current=h().toInteger(n.node.mem.current),e.mem_util.ratio=e.mem_util.current/e.mem_util.capacity||0}return h().forEach(h().keys(null===n||void 0===n?void 0:n.node),(l=>{["cpu_util","mem","disk","net_rx","net_tx"].includes(l)||(h().includes(l,"_util")?e[l]={capacity:"cuda_util"===l?h().toFinite(n.node[l]["stats.max"]):h().toFinite(n.node[l].capacity),current:h().toFinite(n.node[l].current),ratio:h().toFinite(n.node[l].current)/100||0}:l.includes("_mem")&&(e[l]={capacity:h().toFinite(n.node[l].capacity),current:h().toFinite(n.node[l].current),ratio:h().toFinite(n.node[l].pct)/100||0}))})),(0,j.jsxs)(c.A,{direction:"column",gap:"xxs",children:[(0,j.jsxs)(c.A,{justify:"between",style:{minWidth:200},children:[(0,j.jsx)(p.A.Text,{children:null===x||void 0===x||null===(a=x.cpu)||void 0===a?void 0:a.human_readable_name}),(0,j.jsx)(u.A,{percent:100*e.cpu_util.ratio,width:120,valueLabel:(0,t.Z1)(h().toFinite(100*e.cpu_util.ratio),1)+" %"})]}),(0,j.jsxs)(c.A,{justify:"between",style:{minWidth:200},children:[(0,j.jsx)(p.A.Text,{children:null===x||void 0===x||null===(r=x.mem)||void 0===r?void 0:r.human_readable_name}),(0,j.jsx)(u.A,{percent:e.mem_util.ratio,width:120,valueLabel:(null===(o=(0,t.Js)(h().toString(e.mem_util.current),"g"))||void 0===o?void 0:o.numberFixed)+"/"+(null===(s=(0,t.Js)(h().toString(e.mem_util.capacity),"g"))||void 0===s?void 0:s.numberFixed)+" GiB"})]}),h().map(h().keys(null===n||void 0===n?void 0:n.node),(l=>{if(!["cpu_util","mem"].includes(l)){if(h().includes(l,"_util")){var n;const i=h().split(l,"_")[0]+".device";return(0,j.jsxs)(c.A,{justify:"between",style:{minWidth:200,width:"min-content"},gap:"xxs",children:[(0,j.jsxs)(p.A.Text,{children:[null===x||void 0===x||null===(n=x[i])||void 0===n?void 0:n.human_readable_name,"(util)"]}),(0,j.jsx)(u.A,{width:120,percent:e[l].current/e[l].capacity*100||0,valueLabel:h().toFinite((0,t.Z1)(100*e[l].ratio,1))+" %"})]})}if(h().includes(l,"_mem")){var i,a,r;const n=h().split(l,"_")[0]+".device";return(0,j.jsxs)(c.A,{justify:"between",style:{minWidth:200,width:"min-content"},gap:"xxs",children:[(0,j.jsxs)(p.A.Text,{children:[null===x||void 0===x||null===(i=x[n])||void 0===i?void 0:i.human_readable_name,"(mem)"]}),(0,j.jsx)(u.A,{width:120,percent:e[l].current/e[l].capacity*100||0,valueLabel:(null===(a=(0,t.Js)(h().toString(e[l].current),"g"))||void 0===a?void 0:a.numberFixed)+"/"+(null===(r=(0,t.Js)(h().toString(e[l].capacity),"g"))||void 0===r?void 0:r.numberFixed)+" GiB"})]})}}}))]})}return d("agent.NoAvailableLiveStat")}},{title:d("agent.DiskPerc"),key:"disk_perc",render:(e,l)=>{var n,i,a;const r=null!==(n=null===(i=JSON.parse((null===l||void 0===l?void 0:l.live_stat)||"{}"))||void 0===i||null===(a=i.node)||void 0===a?void 0:a.disk)&&void 0!==n?n:{},o=h().toFinite(r.pct)||0,s=h().toFinite((0,t.Z1)(o,2)),d=s>80?m.colorError:m.colorSuccess;return(0,j.jsxs)(c.A,{direction:"column",children:[(0,j.jsx)(u.A,{valueLabel:(0,t.Z1)(s,1)+" %",percent:s,strokeColor:d,width:120}),(0,j.jsxs)(p.A.Text,{style:{fontSize:m.fontSizeSM},children:[(0,t.wb)(null===r||void 0===r?void 0:r.current),"GB /"," ",(0,t.wb)(null===r||void 0===r?void 0:r.capacity),"GB"]})]})}},{title:d("general.ResourceGroup"),key:"resource_group",dataIndex:"scaling_group",sorter:!0},{title:d("agent.Status"),key:"status",dataIndex:"status",render:(e,l)=>{var n,i,t;const a=JSON.parse((null===l||void 0===l?void 0:l.compute_plugins)||"{}"),r=JSON.parse((null===l||void 0===l?void 0:l.available_slots)||"{}");return(0,j.jsxs)(c.A,{direction:"column",gap:"xxs",align:"start",children:[(0,j.jsx)(K.A,{values:[{label:"Agent"},{label:null===l||void 0===l?void 0:l.version,color:"ALIVE"===e?"green":"TERMINATED"===e?"red":"blue"}]}),null!==a&&void 0!==a&&a.cuda?(0,j.jsxs)(j.Fragment,{children:[null!==a&&void 0!==a&&null!==(n=a.cuda)&&void 0!==n&&n.cuda_version?(0,j.jsx)(K.A,{values:[{label:"CUDA"},{label:null===a||void 0===a||null===(i=a.cuda)||void 0===i?void 0:i.cuda_version,color:"green"}]}):(0,j.jsx)(B.A,{color:"green",children:"CUDA Disabled"}),(0,j.jsx)(K.A,{values:[{label:"CUDA Plugin"},{label:null===a||void 0===a||null===(t=a.cuda)||void 0===t?void 0:t.version,color:"blue"}]}),h().includes(h().keys(r),"cuda.shares")?(0,j.jsx)(B.A,{color:"blue",children:"Fractional GPU\u2122"}):null]}):null]})}},{title:d("agent.Schedulable"),key:"schedulable",dataIndex:"schedulable",render:e=>(0,j.jsx)(c.A,{justify:"center",children:!0===e?(0,j.jsx)(D.A,{style:{color:m.colorPrimary,fontSize:m.fontSizeXL}}):(0,j.jsx)(I.A,{style:{color:m.colorError,fontSize:m.fontSizeXL}})}),sorter:!0},{title:d("general.Control"),key:"control",fixed:"right",render:(e,l)=>(0,j.jsxs)(c.A,{children:[(0,j.jsx)(O.Ay,{size:"large",style:{color:m.colorSuccess},type:"text",icon:(0,j.jsx)($.A,{}),onClick:()=>k(l)}),(0,j.jsx)(O.Ay,{size:"large",style:{color:m.colorInfo},type:"text",icon:(0,j.jsx)(R.A,{}),onClick:()=>F(l)})]})}],[je,fe]=(0,E.A)("backendaiwebui.AgentList.displayedColumnKeys",{defaultValue:Ae.map((e=>h().toString(e.key)))});return(0,j.jsxs)(c.A,{direction:"column",align:"stretch",style:l,children:[(0,j.jsxs)(c.A,{justify:"between",align:"start",gap:"xs",style:{padding:m.paddingXS},wrap:"wrap",children:[(0,j.jsxs)(c.A,{direction:"row",gap:"sm",align:"start",style:{flex:1},wrap:"wrap",children:[(0,j.jsx)(P.A,{options:[{label:d("agent.Connected"),value:"ALIVE"},{label:d("agent.Terminated"),value:"TERMINATED"}],value:W?te:ne,onChange:e=>{ae(e),Q((()=>{ie(e)}))}}),(0,j.jsx)(M.A,{filterProperties:[{key:"id",propertyLabel:"ID",type:"string"},{key:"addr",propertyLabel:d("agent.Endpoint"),type:"string"},{key:"schedulable",propertyLabel:d("agent.Schedulable"),type:"boolean",options:[{label:d("general.Enabled"),value:"true"},{label:d("general.Disabled"),value:"false"}]}],value:se,onChange:e=>{oe((()=>{de(e)}))}})]}),(0,j.jsx)(c.A,{gap:"xs",children:(0,j.jsx)(G.A,{title:d("button.Refresh"),children:(0,j.jsx)(O.Ay,{loading:H,onClick:()=>ye(),icon:(0,j.jsx)(J.A,{})})})})]}),(0,j.jsx)(U.A,{bordered:!0,scroll:{x:"max-content"},rowKey:"id",dataSource:null===be||void 0===be?void 0:be.items,showSorterTooltip:!1,columns:h().filter(Ae,(e=>null===je||void 0===je?void 0:je.includes(h().toString(e.key)))),pagination:{pageSize:ce.pageSize,showSizeChanger:!0,total:null===be||void 0===be?void 0:be.total_count,current:ce.current,showTotal:(e,l)=>`${l[0]}-${l[1]} of ${e} items`,pageSizeOptions:["10","20","50"],style:{marginRight:m.marginXS}},onChange:(e,l,n)=>{let{pageSize:i,current:a}=e;le((()=>{h().isNumber(a)&&h().isNumber(i)&&ge({current:a,pageSize:i}),ve((0,t.Wh)(n))}))},loading:{spinning:ee||W||re,indicator:(0,j.jsx)(V.A,{})},...i}),(0,j.jsx)(c.A,{justify:"end",style:{padding:m.paddingXXS},children:(0,j.jsx)(O.Ay,{type:"text",icon:(0,j.jsx)(R.A,{}),onClick:()=>{q(!0)}})}),(0,j.jsx)(f,{agentDetailModalFrgmt:_,open:!!_,onRequestClose:()=>k(null)}),(0,j.jsx)(T,{agentSettingModalFrgmt:S,open:!!S,onRequestClose:e=>{e&&ye(),F(null)}}),(0,j.jsx)(N.A,{open:w,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&fe(null===e||void 0===e?void 0:e.selectedColumnKeys),q(!1)},columns:Ae,displayedColumnKeys:je||[]})]})};var W=n(55368),Q=n(34948),H=n(12121);const Y=(0,H.withDefault)(H.StringParam,"agents"),ee=e=>{const{t:l}=(0,b.Bd)(),[n,i]=(0,H.useQueryParam)("tab",Y,{updateType:"replace"}),{token:t}=g.A.useToken();return(0,j.jsxs)(W.A,{activeTabKey:n,onTabChange:e=>i(e),tabList:[{key:"agents",tab:l("agent.Agent")},{key:"storages",tab:l("general.StorageProxies")},{key:"resourceGroup",tab:l("general.ResourceGroup")}],styles:{body:{padding:0,paddingTop:1,overflow:"hidden"}},children:["agents"===n?(0,j.jsx)(y.Suspense,{fallback:(0,j.jsx)(Q.A,{active:!0,style:{padding:t.paddingContentVerticalLG}}),children:(0,j.jsx)(Z,{containerStyle:{marginLeft:-1,marginRight:-1}})}):null,"storages"===n?(0,j.jsx)("backend-ai-storage-proxy-list",{active:!0}):null,"resourceGroup"===n?(0,j.jsx)("backend-ai-resource-group-list",{active:!0}):null]})}},67318:(e,l,n)=>{n.d(l,{A:()=>s});var i=n(40991),t=n(43373);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};var r=n(64098),o=function(e,l){return t.createElement(r.A,(0,i.A)({},e,{ref:l,icon:a}))};const s=t.forwardRef(o)},52932:(e,l,n)=>{n.d(l,{A:()=>i});const i=n(33496).A},98038:(e,l,n)=>{n.d(l,{A:()=>i});const i=n(40578).A},8652:(e,l,n)=>{n.d(l,{A:()=>i});const i=(0,n(43106).A)("Microchip",[["path",{d:"M18 12h2",key:"quuxs7"}],["path",{d:"M18 16h2",key:"zsn3lv"}],["path",{d:"M18 20h2",key:"9x5y9y"}],["path",{d:"M18 4h2",key:"1luxfb"}],["path",{d:"M18 8h2",key:"nxqzg"}],["path",{d:"M4 12h2",key:"1ltxp0"}],["path",{d:"M4 16h2",key:"8a5zha"}],["path",{d:"M4 20h2",key:"27dk57"}],["path",{d:"M4 4h2",key:"10groj"}],["path",{d:"M4 8h2",key:"18vq6w"}],["path",{d:"M8 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-1.5c-.276 0-.494.227-.562.495a2 2 0 0 1-3.876 0C9.994 2.227 9.776 2 9.5 2z",key:"1681fp"}]])}}]);
//# sourceMappingURL=376.2cea8065.chunk.js.map