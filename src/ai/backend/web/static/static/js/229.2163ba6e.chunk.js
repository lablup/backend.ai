"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[229,502],{61502:function(n,e,t){t.r(e),t.d(e,{default:function(){return U},useShadowRoot:function(){return $},useWebComponentInfo:function(){return Y}});var i=t(29439),o=t(74165),r=t(15861),a=t(24530),l=t(24717),u=t(61724);function s(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,i=(0,a.Qc)(n),o=(0,l.Vn)(i,{Field:{enter:function(n){var i;if(null!==n&&void 0!==n&&null!==(i=n.directives)&&void 0!==i&&i.find((function(n){var i,o,r,a,l=n.name.value,u=null===(i=n.arguments)||void 0===i?void 0:i[0].name.value,s=null===(o=n.arguments)||void 0===o||null===(r=o[0].value)||void 0===r?void 0:r.value,c=null===(a=n.arguments)||void 0===a?void 0:a[0];if("since"===l&&"version"===u){if(t(s))return!0}else if("deprecatedSince"===l&&"version"===u){var d="StringValue"===(null===c||void 0===c?void 0:c.value.kind)?null===c||void 0===c?void 0:c.value.value:e[null===c||void 0===c?void 0:c.value.name.value];if(!t(d))return!0}else if("skipOnClient"===l&&"if"===u){if("BooleanValue"===(null===c||void 0===c?void 0:c.value.kind)&&c.value.value)return!0;if("Variable"===(null===c||void 0===c?void 0:c.value.kind)&&e[c.value.name.value])return!0}return!1})))return null},leave:function(n){var e;if(n.selectionSet&&"SelectionSet"===n.selectionSet.kind&&0===(null===(e=n.selectionSet.selections)||void 0===e?void 0:e.length))return null}},Directive:{leave:function(n){var e=n.name.value;if(["since","deprecatedSince","skipOnClient"].includes(e))return null}}}),r={};return(0,l.Vn)(o,{Variable:function(n){r[n.name.value]=(r[n.name.value]||0)+1}}),o=(0,l.Vn)(o,{VariableDefinition:{enter:function(n){if(r[n.variable.name.value]<=1)return null}}}),(0,u.S)(o)}var c=t(41011);c.RelayFeatureFlags.ENABLE_RELAY_RESOLVERS=!0;var d=function(){var n=(0,r.Z)((0,o.Z)().mark((function n(e,t){var i,r,a,l,u,c;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==globalThis.backendaiclient){n.next=3;break}return n.next=3,new Promise((function(n){document.addEventListener("backend-ai-connected",(function e(){document.removeEventListener("backend-ai-connected",e),n(void 0)}))}));case 3:return a=s(e.text||"",t,(function(n){var e;return!(null!==(e=globalThis.backendaiclient)&&void 0!==e&&e.isManagerVersionCompatibleWith(n))})),l={query:a,variables:t},u=null===(i=globalThis.backendaiclient)||void 0===i?void 0:i.newSignedRequest("POST","/admin/gql",l),n.next=8,null===(r=globalThis.backendaiclient)||void 0===r?void 0:r._wrapWithPromise(u,!1,null,1e4,0).catch((function(n){}));case 8:if(n.t0=n.sent,n.t0){n.next=11;break}n.t0={};case 11:return c=n.t0,n.abrupt("return",c);case 13:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();var v,f=new c.Environment({network:c.Network.create(d,void 0),store:new c.Store(new c.RecordSource)}),m=t(80382),g=t(27340),p=t(41239),h=t(47226),b=t(49883),k=t(66670),x=t(99517),w=t.n(x),y=(t(24989),t(79354)),Z=t.n(y),E=t(79748),j=t.n(E),C=t(51714),S=t.n(C),_=t(63540),L=t.n(_),T=t(18272),P=t.n(T),F=t(9666),V=t.n(F),R=t(64447),A=t(13881),O=t(4519),D=t(81748),N=t(87112),q=t(16980),B=t(51843),M=t(12674),z=t(55144),I=t(73181),Q=t(2556);w().extend(V()),w().extend(Z()),w().extend(j()),w().extend(S()),w().extend(P()),w().extend(L());var W=O.createContext(null),K=O.createContext(null),$=function(){return O.useContext(K)},Y=function(){return O.useContext(W)},G=new N.QueryClient({defaultOptions:{queries:{suspense:!0,refetchOnWindowFocus:!1,retry:!1}}});R.ZP.use(D.Db).use(A.Z).init({backend:{loadPath:"/resources/i18n/{{lng}}.json"},lng:(null===globalThis||void 0===globalThis||null===(v=globalThis.backendaioptions)||void 0===v?void 0:v.get("current_language"))||"en",fallbackLng:"en",interpolation:{escapeValue:!1},react:{transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","span","code","p"]}});var H=function(){var n=(0,M.s0)();return(0,O.useLayoutEffect)((function(){var e=function(e){var t=e.detail;n(t,{replace:!0})};return document.addEventListener("react-navigate",e),function(){document.removeEventListener("react-navigate",e)}}),[n]),null},U=function(n){var e=n.children,t=n.value,o=n.styles,r=n.shadowRoot,a=n.dispatchEvent,l=(0,O.useMemo)((function(){return(0,g.Df)()}),[]),u=function(){var n,e=(0,O.useState)(null===globalThis||void 0===globalThis||null===(n=globalThis.backendaioptions)||void 0===n?void 0:n.get("current_language")),t=(0,i.Z)(e,2),o=t[0],r=t[1],a=(0,D.$G)().i18n;return(0,O.useEffect)((function(){setTimeout((function(){return null===a||void 0===a?void 0:a.changeLanguage(o)}),0),w().locale(o)}),[]),(0,O.useEffect)((function(){var n=function(n){var e,t;r(null===n||void 0===n||null===(e=n.detail)||void 0===e?void 0:e.lang);var i=(null===n||void 0===n||null===(t=n.detail)||void 0===t?void 0:t.lang)||"en";null===a||void 0===a||a.changeLanguage(i),w().locale(i)};return window.addEventListener("langChanged",n),function(){return window.removeEventListener("langChanged",n)}}),[a]),[o]}(),s=(0,i.Z)(u,1)[0],c=(0,m.x)(),d=(0,O.useMemo)((function(){return{value:t,dispatchEvent:a,moveTo:function(n,e){a("moveTo",{path:n,params:e})}}}),[t,a]);return(0,Q.jsx)(Q.Fragment,{children:f&&(0,Q.jsx)(q.RelayEnvironmentProvider,{environment:f,children:(0,Q.jsxs)(O.StrictMode,{children:[(0,Q.jsxs)("style",{children:[o,".anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n/* fix: fixed column shadow display outside of a table wrapper */\n.ant-table-wrapper {\n  border-radius: 8px 8px 0 0;\n  overflow: hidden;\n}\n\n/* fix: the tooltip does not appear in the `<Form.Item tooltip={'something'}` when the popup container is a parent node of the trigger node. */\n.ant-form-item-label {\n  overflow: unset !important;\n}\n"]}),(0,Q.jsx)(N.QueryClientProvider,{client:G,children:(0,Q.jsx)(K.Provider,{value:r,children:(0,Q.jsx)(W.Provider,{value:d,children:(0,Q.jsx)(p.ZP,{getPopupContainer:function(n){return(null===n||void 0===n?void 0:n.parentNode)||r},locale:"ko"===s?k.Z:b.Z,theme:c,children:(0,Q.jsx)(h.Z,{children:(0,Q.jsx)(g.V9,{container:r,cache:l,children:(0,Q.jsx)(O.Suspense,{fallback:"",children:(0,Q.jsx)(B.VK,{children:(0,Q.jsxs)(z.QueryParamProvider,{adapter:I.Q,options:{},children:[(0,Q.jsx)(H,{}),e]})})})})})})})})})]})})})}},27229:function(n,e,t){t.r(e);var i=t(29439),o=t(87760),r=t(1839),a=t(50164),l=t(61502),u=t(99277),s=t(50708),c=t(67848),d=t(64846),v=t(33405),f=t(30485),m=t(89786),g=t(80220),p=t(43514),h=t(35027),b=t(46734),k=t(3501),x=t(28499),w=t(58834),y=t(4519),Z=t(81748),E=t(2556);e.default=function(){var n=(0,Z.$G)().t,e=(0,l.useWebComponentInfo)().dispatchEvent,t=(0,o.Dj)(),j=(0,r.jC)(),C=(0,i.Z)(j,1)[0],S=(0,y.useState)(!1),_=(0,i.Z)(S,2),L=_[0],T=_[1],P=b.ZP.useBreakpoint(),F=(0,h.Z)(L,{wait:100,leading:!0,trailing:!1}),V=(0,a.h)("getUserRole",(function(){return t.user.get(C.email,["role"])}),{suspense:!1}).data,R=null===V||void 0===V?void 0:V.user.role,A=[{label:C.username,key:"userFullName",icon:(0,E.jsx)(s.Z,{}),disabled:!0,style:{color:"#1f1f1f",cursor:"default"}},{label:C.email,key:"userEmail",icon:(0,E.jsx)(c.Z,{}),disabled:!0,style:{cursor:"default"}},{type:"divider"},{label:R,key:"userRole",icon:(0,E.jsx)(d.Z,{}),disabled:!0,style:{cursor:"default"}},{type:"divider"},{label:n("webui.menu.AboutBackendAI"),key:"description",icon:(0,E.jsx)(v.Z,{}),onClick:function(){var n=new CustomEvent("backend-ai-show-splash");document.dispatchEvent(n)}},{label:n("webui.menu.MyAccount"),key:"userProfileSetting",icon:(0,E.jsx)(f.Z,{}),onClick:function(){e("moveTo",{path:"#userprofile"})}},{label:n("webui.menu.Preferences"),key:"preferences",icon:(0,E.jsx)(m.Z,{}),onClick:function(){e("moveTo",{path:"/usersettings",params:{tab:"general"}})}},{label:n("webui.menu.LogsErrors"),key:"logs",icon:(0,E.jsx)(g.Z,{}),onClick:function(){e("moveTo",{path:"/usersettings",params:{tab:"logs"}})}},{label:n("webui.menu.LogOut"),key:"logout",icon:(0,E.jsx)(p.Z,{}),onClick:function(){var n=new CustomEvent("backend-ai-logout");document.dispatchEvent(n)}}];return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(k.Z,{menu:{items:A},trigger:["click"],open:F,onOpenChange:function(n){return T(n)},children:(0,E.jsxs)(u.Z,{direction:"row",gap:"sm",style:{cursor:"pointer"},children:[P.md&&(0,E.jsx)(x.Z.Text,{strong:!0,children:C.username}),(0,E.jsx)(w.C,{icon:(0,E.jsx)(s.Z,{})})]})})})}},1839:function(n,e,t){t.d(e,{T6:function(){return d},jC:function(){return v}});var i=t(1413),o=t(29439),r=t(87760),a=t(43255),l=t(50164),u=t(32048),s=t.n(u),c=t(4519),d=function(){var n=(0,r.Kr)("first"),e=(0,o.Z)(n,2),t=e[0],i=e[1],a=(0,r.Dj)();return[(0,l.h)({queryKey:["useResourceSlots",t],queryFn:function(){return a.get_resource_slots()},staleTime:0}).data,{refresh:function(){return i()}}]},v=function(){var n=(0,r.Dj)(),e=(0,c.useState)({full_name:n.full_name,email:n.email}),t=(0,o.Z)(e,2),u=t[0],d=t[1];(0,c.useEffect)((function(){var e=function(e){if(n.supports("change-user-name")){var t=e.detail;d((function(n){return(0,i.Z)((0,i.Z)({},n),{},{full_name:t})}))}};return document.addEventListener("current-user-info-changed",e),function(){document.removeEventListener("current-user-info-changed",e)}}),[n]);var v=(0,l.Y)({mutationFn:function(e){return n.update_full_name(e.email,e.full_name)}}),f=(0,l.Y)({mutationFn:function(e){return n.update_password(e.old_password,e.new_password,e.new_password2)}});return[(0,i.Z)((0,i.Z)({},u),{},{username:function(){var e=s().trim(u.full_name).length>0?u.full_name:u.email;if(n._config.maskUserInfo){var t=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)?e.split("@")[0].length-2:e.length-2;e=(0,a.Cd)(e,"*",2,t)}return e}(),isPendingMutation:v.isLoading||f.isLoading}),{updateFullName:function(e,t){v.mutate({full_name:e,email:n.email},{onSuccess:function(){(null===t||void 0===t?void 0:t.onSuccess)&&t.onSuccess(e),document.dispatchEvent(new CustomEvent("current-user-info-changed",{detail:e})),d((function(n){return(0,i.Z)((0,i.Z)({},n),{},{full_name:e})}))},onError:function(n){(null===t||void 0===t?void 0:t.onError)&&t.onError(n)}})},updatePassword:function(n,e){f.mutate(n,{onSuccess:function(){(null===e||void 0===e?void 0:e.onSuccess)&&e.onSuccess(void 0)},onError:function(n){(null===e||void 0===e?void 0:e.onError)&&e.onError(n)}})}}]}}}]);
//# sourceMappingURL=229.2163ba6e.chunk.js.map