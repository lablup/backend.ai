{"version":3,"file":"static/js/3124.b872887f.chunk.js","mappings":"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","sources":["components/FolderInvitationResponseModal.tsx"],"sourcesContent":["import { useSuspendedBackendaiClient } from '../hooks';\nimport {\n  InvitationItem,\n  useVFolderInvitations,\n} from '../hooks/useVFolderInvitations';\nimport VFolderPermissionCell from './VFolderPermissionCell';\nimport { FolderOutlined } from '@ant-design/icons';\nimport { List, Typography, theme, Descriptions, App } from 'antd';\nimport {\n  BAIButton,\n  BAIFlex,\n  BAIModal,\n  BAIModalProps,\n  useErrorMessageResolver,\n} from 'backend.ai-ui';\nimport React, { useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface FolderInvitationResponseModalProps extends BAIModalProps {}\n\nconst FolderInvitationResponseModal: React.FC<\n  FolderInvitationResponseModalProps\n> = (baiModalProps) => {\n  'use memo';\n  const { token } = theme.useToken();\n  const { message } = App.useApp();\n  const { t } = useTranslation();\n  const [\n    invitations,\n    { acceptInvitation, rejectInvitation, updateInvitations },\n  ] = useVFolderInvitations();\n  const baiClient = useSuspendedBackendaiClient();\n  const hasInviterEmail = baiClient.supports('invitation-inviter-email');\n  const { getErrorMessage } = useErrorMessageResolver();\n\n  useEffect(() => {\n    updateInvitations();\n  }, [updateInvitations]);\n\n  const renderInvitationItem = (item: InvitationItem) => (\n    <List.Item\n      key={item.id}\n      actions={[\n        <BAIButton\n          type=\"primary\"\n          action={async () => {\n            try {\n              await acceptInvitation(item.id);\n              message.success(\n                t('data.invitation.SuccessfullyAcceptedInvitation'),\n              );\n            } catch (e: any) {\n              if (\n                e?.statusCode === 409 ||\n                e?.error_code === 'vfolder_create_already-exists'\n              ) {\n                message.error(t('data.FolderAlreadyExists'));\n                return;\n              }\n              message.error(\n                getErrorMessage(\n                  e.message || t('data.invitation.FailedToAcceptInvitation'),\n                ),\n              );\n            }\n          }}\n          key=\"accept\"\n        >\n          {t('summary.Accept')}\n        </BAIButton>,\n        <BAIButton\n          danger\n          action={async () => {\n            try {\n              await rejectInvitation(item.id);\n              message.success(\n                t('data.invitation.SuccessfullyDeclinedInvitation'),\n              );\n            } catch (e: any) {\n              message.error(\n                getErrorMessage(\n                  e?.message || t('data.invitation.FailedToDeclineInvitation'),\n                ),\n              );\n            }\n          }}\n          key=\"decline\"\n        >\n          {t('summary.Decline')}\n        </BAIButton>,\n      ]}\n      style={{\n        padding: token.paddingSM,\n      }}\n    >\n      <List.Item.Meta\n        title={\n          <BAIFlex gap={'xxs'}>\n            <FolderOutlined />\n            <Typography.Text strong>{item.vfolder_name}</Typography.Text>\n          </BAIFlex>\n        }\n        description={\n          <Descriptions\n            size=\"small\"\n            column={1}\n            items={[\n              {\n                key: 'from',\n                label: t('data.From'),\n                children: hasInviterEmail\n                  ? item.inviter_user_email\n                  : item.inviter,\n              },\n              {\n                key: 'permission',\n                label: t('data.Permission'),\n                children: <VFolderPermissionCell permission={item.perm} />,\n              },\n            ]}\n          />\n        }\n      />\n    </List.Item>\n  );\n\n  return (\n    <BAIModal title={t('data.InvitedFolders')} footer={null} {...baiModalProps}>\n      <List\n        dataSource={invitations}\n        renderItem={renderInvitationItem}\n        locale={{\n          emptyText: t('data.invitation.NoMoreInvitation'),\n        }}\n      />\n    </BAIModal>\n  );\n};\n\nexport default FolderInvitationResponseModal;\n"],"names":["baiModalProps","$","_c","token","theme","useToken","message","App","useApp","t","useTranslation","invitations","t0","useVFolderInvitations","acceptInvitation","rejectInvitation","updateInvitations","baiClient","useSuspendedBackendaiClient","t1","supports","hasInviterEmail","getErrorMessage","useErrorMessageResolver","t2","t3","t4","useEffect","paddingSM","item","_jsx","List","Item","actions","BAIButton","type","action","async","id","success","t5","e","statusCode","error_code","error","children","danger","t6","style","padding","Meta","title","_jsxs","BAIFlex","gap","FolderOutlined","Typography","Text","strong","vfolder_name","description","Descriptions","size","column","items","key","label","inviter_user_email","inviter","VFolderPermissionCell","permission","perm","renderInvitationItem","t7","t8","t9","emptyText","locale","BAIModal","footer"],"sourceRoot":""}