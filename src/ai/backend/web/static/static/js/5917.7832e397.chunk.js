"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[5917],{98401:(e,n,t)=>{t.d(n,{A:()=>c});var l=t(89130),a=t(15934),i=t(89608),r=t.n(i),o=t(43373),s=t(73689);const c=e=>{let n,{values:t=[]}=e;return 0===t.length?null:(n=t[0]&&("string"===typeof t[0]||o.isValidElement(t[0]))?t.map((e=>({label:e,color:"blue"}))):t,(0,s.jsx)(l.A,{direction:"row",children:r().map(n,((e,t)=>(0,s.jsx)(a.A,{style:r().last(n)===e?void 0:{margin:0,marginRight:-1},color:e.color,children:e.label},t)))}))}},69715:(e,n,t)=>{t.d(n,{Ay:()=>b,Kk:()=>p,p3:()=>y,sT:()=>g,vB:()=>u});var l=t(51593),a=t(98401),i=t(89130),r=t(6597),o=t(15934),s=t(43373),c=t(73689);const d=e=>{let{image:n,...t}=e;n=n||"";const[,{getImageAliasName:i,getBaseVersion:r,tagAlias:o}]=(0,l.Gj)();return(0,c.jsx)(a.A,{values:[{label:o(i(n)),color:"blue"},{label:r(n),color:"green"}],...t})},u=e=>{let{image:n,...t}=e;n=n||"";const[,{getBaseVersion:a,tagAlias:i}]=(0,l.Gj)();return(0,c.jsx)(o.A,{color:"green",...t,children:i(a(n))})},g=e=>{let{image:n,...t}=e;n=n||"";const[,{getBaseImage:a,tagAlias:i}]=(0,l.Gj)();return(0,c.jsx)(o.A,{color:"green",...t,children:i(a(n))})},m=e=>{let{image:n,...t}=e;n=n||"";const[,{getArchitecture:a,tagAlias:i}]=(0,l.Gj)();return(0,c.jsx)(o.A,{color:"green",...t,children:i(a(n))})},p=e=>{let{image:n,...t}=e;n=n||"";const[,{getImageLang:a,tagAlias:i}]=(0,l.Gj)();return(0,c.jsx)(o.A,{color:"green",...t,children:i(a(n))})},y=e=>{let{tag:n,labels:t,highlightKeyword:s,...d}=e;t=t||[];const[,{getConstraints:u}]=(0,l.Gj)(),g=u(n,t);return(0,c.jsxs)(i.A,{direction:"row",align:"start",children:[g[0]?(0,c.jsx)(o.A,{color:"blue",...d,children:(0,c.jsx)(r.A,{keyword:s,children:g[0]})}):null,g[1]?(0,c.jsx)(a.A,{color:"cyan",values:[{label:(0,c.jsx)(r.A,{keyword:s,children:"Customized"}),color:"cyan"},{label:(0,c.jsx)(r.A,{keyword:s,children:g[1]}),color:"cyan"}],...d}):null]})},v=(e,n)=>{let{image:t,style:l={}}=e;return t=t||"",(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d,{image:t}),(0,c.jsx)(g,{image:t}),(0,c.jsx)(m,{image:t})]})},b=s.memo(v)},30957:(e,n,t)=>{t.d(n,{A:()=>p});var l=t(94126),a=t(1499),i=t(50868),r=t(23702),o=t(67378),s=t(9833),c=t(89608),d=t.n(c),u=t(43373),g=t(56762),m=t(73689);const p=e=>{let{open:n,onRequestClose:t,columns:c,displayedColumnKeys:p,...y}=e;const v=(0,u.useRef)(null),{t:b}=(0,g.Bd)(),{token:f}=i.A.useToken(),x=c.map((e=>{return"string"===typeof e.title?{label:e.title,value:d().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(n=e.title,u.Children.map(n.props.children,(e=>{if("string"===typeof e)return e}))),value:d().toString(e.key)}:{label:void 0,value:d().toString(e.key)};var n}));return(0,m.jsx)(l.A,{title:b("table.SettingTable"),open:n,destroyOnClose:!0,centered:!0,onOk:()=>{var e;null===(e=v.current)||void 0===e||e.validateFields().then((e=>{t(e)})).catch((()=>{}))},onCancel:()=>{t()},...y,children:(0,m.jsxs)(r.A,{ref:v,preserve:!1,initialValues:{selectedColumnKeys:p||x.map((e=>e.value))},layout:"vertical",children:[(0,m.jsx)(r.A.Item,{name:"searchInput",label:b("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,m.jsx)(o.A,{prefix:(0,m.jsx)(a.A,{}),style:{marginBottom:f.marginSM},placeholder:b("table.SearchTableColumn")})}),(0,m.jsx)(r.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>e.searchInput!==n.searchInput,children:e=>{let{getFieldValue:n}=e;const t=n("searchInput")?d().toLower(n("searchInput")):void 0,l=x.map((e=>d().toLower(d().toString(e.label)).includes(t||"")?e:{...e,style:{display:"none"}}));return(0,m.jsx)(r.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},children:(0,m.jsx)(s.A.Group,{options:l,style:{flexDirection:"column"}})})}})]})})}},15917:(e,n,t)=>{t.r(n),t.d(n,{default:()=>O});var l,a,i=t(89130),r=t(55182),o=t(69715),s=t(30957),c=t(58879),d=t(51593),u=t(64703),g=t(81850),m=t(55429),p=t(50868),y=t(44733),v=t(85690),b=t(51548),f=t(60822),x=t(55368),h=t(77731),k=t(89608),A=t.n(k),j=t(43373),C=t(56762),S=t(88522),_=t(73689);const O=e=>{let{children:n}=e;const{t:k}=(0,C.Bd)(),{token:O}=p.A.useToken(),{message:I}=y.A.useApp(),[K,P]=(0,j.useState)(!1),[w]=(0,j.useState)("images"),[T,E]=(0,j.useTransition)(),[F,B]=(0,d.Tw)("initial-fetch"),[N,z]=(0,j.useState)(),[,{getNamespace:$,getImageLang:M,getBaseVersion:V,getBaseImage:D,getConstraints:L}]=(0,d.Gj)(),{customized_images:R}=(0,S.useLazyLoadQuery)(void 0!==l?l:l=t(16166),{},{fetchPolicy:"initial-fetch"===F?"store-and-network":"network-only",fetchKey:F}),[Q,U]=(0,S.useMutation)(void 0!==a?a:a=t(38134)),X=[{title:k("environment.Registry"),dataIndex:"registry",key:"registry",sorter:(e,n)=>null!==e&&void 0!==e&&e.registry&&null!==n&&void 0!==n&&n.registry?e.registry.localeCompare(n.registry):0},{title:k("environment.Architecture"),dataIndex:"architecture",key:"architecture",sorter:(e,n)=>null!==e&&void 0!==e&&e.architecture&&null!==n&&void 0!==n&&n.architecture?e.architecture.localeCompare(n.architecture):0},{title:k("environment.Namespace"),key:"namespace",sorter:(e,n)=>{const t=$((0,c.A_)(e)||""),l=$((0,c.A_)(n)||"");return t&&l?t.localeCompare(l):0},render:(e,n)=>(0,_.jsx)("span",{children:$((0,c.A_)(n)||"")})},{title:k("environment.Language"),key:"lang",sorter:(e,n)=>{const t=M((0,c.A_)(e)||""),l=M((0,c.A_)(n)||"");return t&&l?t.localeCompare(l):0},render:(e,n)=>(0,_.jsx)(o.Kk,{image:(0,c.A_)(n)||"",color:"green"})},{title:k("environment.Version"),key:"baseversion",sorter:(e,n)=>{const t=V((0,c.A_)(e)||""),l=V((0,c.A_)(n)||"");return t&&l?t.localeCompare(l):0},render:(e,n)=>(0,_.jsx)(o.vB,{image:(0,c.A_)(n)||"",color:"green"})},{title:k("environment.Base"),key:"baseimage",sorter:(e,n)=>{const t=D((0,c.A_)(e)||""),l=D((0,c.A_)(n)||"");return t&&l?t.localeCompare(l):0},render:(e,n)=>(0,_.jsx)(o.sT,{image:(0,c.A_)(n)||""})},{title:k("environment.Constraint"),key:"constraint",sorter:(e,n)=>{const t=null!==e&&void 0!==e&&e.tag&&null!==n&&void 0!==n&&n.labels&&L(null===e||void 0===e?void 0:e.tag,null===e||void 0===e?void 0:e.labels)[0]||"",l=null!==n&&void 0!==n&&n.tag&&null!==n&&void 0!==n&&n.labels&&L(null===n||void 0===n?void 0:n.tag,null===n||void 0===n?void 0:n.labels)[0]||"";return""===t&&""===l?0:""===t?-1:""===l?1:t.localeCompare(l)},render:(e,n)=>null!==n&&void 0!==n&&n.tag?(0,_.jsx)(o.p3,{tag:n.tag,labels:null===n||void 0===n?void 0:n.labels}):null},{title:k("environment.Digest"),dataIndex:"digest",key:"digest",sorter:(e,n)=>null!==e&&void 0!==e&&e.digest&&null!==n&&void 0!==n&&n.digest?e.digest.localeCompare(n.digest):0},{title:k("general.Control"),key:"control",fixed:"right",render:(e,n)=>(0,_.jsxs)(i.A,{direction:"row",align:"stretch",justify:"center",gap:"xxs",children:[(0,_.jsx)(v.A.Text,{copyable:{text:(0,c.A_)(n)||""},style:{paddingTop:O.paddingXXS,paddingBottom:O.paddingXXS}}),(0,_.jsx)(b.A,{title:k("dialog.ask.DoYouWantToProceed"),description:k("dialog.warning.CannotBeUndone"),okType:"danger",okText:k("button.Delete"),onConfirm:()=>{null!==n&&void 0!==n&&n.id&&(z(n.id+F),Q({variables:{id:n.id},onCompleted(e,n){var t;n?I.error(null===(t=n[0])||void 0===t?void 0:t.message):(E((()=>{B()})),I.success(k("environment.CustomizedImageSuccessfullyDeleted")))},onError(e){I.error(null===e||void 0===e?void 0:e.message)}}))},children:(0,_.jsx)(f.Ay,{type:"text",icon:(0,_.jsx)(u.A,{}),danger:!0,loading:U&&N===(null===n||void 0===n?void 0:n.id)+F,disabled:U&&N!==(null===n||void 0===n?void 0:n.id)+F})})]})}],[G,q]=(0,m.A)("backendaiwebui.MyEnvironmentPage.displayedColumnKeys",{defaultValue:X.map((e=>A().toString(e.key)))});return(0,_.jsxs)(i.A,{direction:"column",align:"stretch",gap:"xs",children:[(0,_.jsx)(i.A,{direction:"column",align:"stretch",children:(0,_.jsx)(x.A,{tabList:[{key:"images",label:k("environment.Images")}],activeTabKey:w,styles:{body:{padding:0,paddingTop:1}},children:(0,_.jsxs)(j.Suspense,{fallback:(0,_.jsx)(r.A,{}),children:[(0,_.jsx)(h.A,{loading:T,columns:X.filter((e=>null===G||void 0===G?void 0:G.includes(A().toString(e.key)))),dataSource:R,rowKey:"id",scroll:{x:"max-content"},pagination:!1}),(0,_.jsx)(i.A,{justify:"end",style:{padding:O.paddingXXS},children:(0,_.jsx)(f.Ay,{type:"text",icon:(0,_.jsx)(g.A,{}),onClick:()=>{P(!0)}})})]})})}),(0,_.jsx)(s.A,{open:K,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&q(null===e||void 0===e?void 0:e.selectedColumnKeys),P(!K)},columns:X,displayedColumnKeys:G||[]})]})}},38134:(e,n,t)=>{t.r(n),t.d(n,{default:()=>a});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],n=[{kind:"Variable",name:"image_id",variableName:"id"}],t=[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],l=[{alias:null,args:n,concreteType:"UntagImageFromRegistry",kind:"LinkedField",name:"untag_image_from_registry",plural:!1,selections:t,storageKey:null},{alias:null,args:n,concreteType:"ForgetImageById",kind:"LinkedField",name:"forget_image_by_id",plural:!1,selections:t,storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MyEnvironmentPageForgetAndUntagMutation",selections:l,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MyEnvironmentPageForgetAndUntagMutation",selections:l},params:{cacheID:"5b4f7c5bc899b115592fccdc6efe534d",id:null,metadata:{},name:"MyEnvironmentPageForgetAndUntagMutation",operationKind:"mutation",text:"mutation MyEnvironmentPageForgetAndUntagMutation(\n  $id: String!\n) {\n  untag_image_from_registry(image_id: $id) {\n    ok\n    msg\n  }\n  forget_image_by_id(image_id: $id) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="c32a5d49badf02c6b0693522e8e84c82";const a=l},16166:(e,n,t)=>{t.r(n),t.d(n,{default:()=>a});const l=function(){var e=[{alias:null,args:null,concreteType:"ImageNode",kind:"LinkedField",name:"customized_images",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"humanized_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tag",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"registry",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"digest",storageKey:null},{alias:null,args:null,concreteType:"KVPair",kind:"LinkedField",name:"labels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"supported_accelerators",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MyEnvironmentPageQuery",selections:e,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MyEnvironmentPageQuery",selections:e},params:{cacheID:"c1773ff683a165a627b1084bb7f99dfc",id:null,metadata:{},name:"MyEnvironmentPageQuery",operationKind:"query",text:"query MyEnvironmentPageQuery {\n  customized_images {\n    id\n    name\n    humanized_name\n    tag\n    registry\n    architecture\n    digest\n    labels {\n      key\n      value\n    }\n    supported_accelerators\n  }\n}\n"}}}();l.hash="239a93f593bbc6b5d31bbe53ca71e10d";const a=l},51548:(e,n,t)=>{t.d(n,{A:()=>S});var l=t(43373),a=t(67592),i=t(13001),r=t.n(i),o=t(90049),s=t(76633),c=t(67085),d=t(84131),u=t(565),g=t(781),m=t(60822),p=t(44123),y=t(89689),v=t(47272),b=t(83451),f=t(64188);const x=(0,f.OF)("Popconfirm",(e=>(e=>{const{componentCls:n,iconCls:t,antCls:l,zIndexPopup:a,colorText:i,colorWarning:r,marginXXS:o,marginXS:s,fontSize:c,fontWeightStrong:d,colorTextHeading:u}=e;return{[n]:{zIndex:a,[`&${l}-popover`]:{fontSize:c},[`${n}-message`]:{marginBottom:s,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${n}-message-icon ${t}`]:{color:r,fontSize:c,lineHeight:1,marginInlineEnd:s},[`${n}-title`]:{fontWeight:d,color:u,"&:only-child":{fontWeight:"normal"}},[`${n}-description`]:{marginTop:o,color:i}},[`${n}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:s}}}}})(e)),(e=>{const{zIndexPopupBase:n}=e;return{zIndexPopup:n+60}}),{resetStyle:!1});var h=function(e,n){var t={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&n.indexOf(l)<0&&(t[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(e);a<l.length;a++)n.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(t[l[a]]=e[l[a]])}return t};const k=e=>{const{prefixCls:n,okButtonProps:t,cancelButtonProps:i,title:r,description:o,cancelText:s,okText:d,okType:b="primary",icon:f=l.createElement(a.A,null),showCancel:x=!0,close:h,onConfirm:k,onCancel:A,onPopupClick:j}=e,{getPrefixCls:C}=l.useContext(c.QO),[S]=(0,y.A)("Popconfirm",v.A.Popconfirm),_=(0,g.b)(r),O=(0,g.b)(o);return l.createElement("div",{className:`${n}-inner-content`,onClick:j},l.createElement("div",{className:`${n}-message`},f&&l.createElement("span",{className:`${n}-message-icon`},f),l.createElement("div",{className:`${n}-message-text`},_&&l.createElement("div",{className:`${n}-title`},_),O&&l.createElement("div",{className:`${n}-description`},O))),l.createElement("div",{className:`${n}-buttons`},x&&l.createElement(m.Ay,Object.assign({onClick:A,size:"small"},i),s||(null===S||void 0===S?void 0:S.cancelText)),l.createElement(u.A,{buttonProps:Object.assign(Object.assign({size:"small"},(0,p.DU)(b)),t),actionFn:k,close:h,prefixCls:C("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},d||(null===S||void 0===S?void 0:S.okText))))},A=e=>{const{prefixCls:n,placement:t,className:a,style:i}=e,o=h(e,["prefixCls","placement","className","style"]),{getPrefixCls:s}=l.useContext(c.QO),d=s("popconfirm",n),[u]=x(d);return u(l.createElement(b.Ay,{placement:t,className:r()(d,a),style:i,content:l.createElement(k,Object.assign({prefixCls:d},o))}))};var j=function(e,n){var t={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&n.indexOf(l)<0&&(t[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(e);a<l.length;a++)n.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(t[l[a]]=e[l[a]])}return t};const C=l.forwardRef(((e,n)=>{var t,i;const{prefixCls:u,placement:g="top",trigger:m="click",okType:p="primary",icon:y=l.createElement(a.A,null),children:v,overlayClassName:b,onOpenChange:f,onVisibleChange:h}=e,A=j(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:C}=l.useContext(c.QO),[S,_]=(0,o.A)(!1,{value:null!==(t=e.open)&&void 0!==t?t:e.visible,defaultValue:null!==(i=e.defaultOpen)&&void 0!==i?i:e.defaultVisible}),O=(e,n)=>{_(e,!0),null===h||void 0===h||h(e),null===f||void 0===f||f(e,n)},I=C("popconfirm",u),K=r()(I,b),[P]=x(I);return P(l.createElement(d.A,Object.assign({},(0,s.A)(A,["title"]),{trigger:m,placement:g,onOpenChange:(n,t)=>{const{disabled:l=!1}=e;l||O(n,t)},open:S,ref:n,overlayClassName:K,content:l.createElement(k,Object.assign({okType:p,icon:y},e,{prefixCls:I,close:e=>{O(!1,e)},onConfirm:n=>{var t;return null===(t=e.onConfirm)||void 0===t?void 0:t.call(void 0,n)},onCancel:n=>{var t;O(!1,n),null===(t=e.onCancel)||void 0===t||t.call(void 0,n)}})),"data-popover-inject":!0}),v))}));C._InternalPanelDoNotUseOrYouWillBeFired=A;const S=C}}]);
//# sourceMappingURL=5917.7832e397.chunk.js.map