"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[23],{9687:(e,n,l)=>{l.d(n,{A:()=>A});var a=l(40648),s=l(81751),i=l(78909),t=l(7885),r=l(55202);var o,d=l(38053),u=l(76385),c=l(96520),m=l(24262),g=l(96325),p=l(37090),y=l(40152),h=l(18959),v=l(55616),k=l(86663),f=l(90086),x=l(64428),F=l.n(x),S=l(86304),_=l(44617),C=l(18139),j=l(52426);const A=e=>{var n,x,A,b,K,T;let{sessionFrgmt:w,defaultKernelId:L,...N}=e;const I=(0,s.CX)(),{token:E}=p.A.useToken(),D=(0,i.Am)(),M=(0,C.useFragment)(void 0!==o?o:o=l(4916),w),R=(null===M||void 0===M||null===(n=M.kernel_nodes)||void 0===n||null===(x=n.edges)||void 0===x?void 0:x.map((e=>null===e||void 0===e?void 0:e.node)))||[],[V,P]=(0,r.useState)(L||(null===(A=F().find(R,(e=>"main"===(null===e||void 0===e?void 0:e.cluster_role))))||void 0===A?void 0:A.row_id)||(null===(b=R[0])||void 0===b?void 0:b.row_id));(0,r.useEffect)((()=>{!1===N.open&&P(void 0)}),[N.open]);const{data:O,refetch:U,isPending:B,isRefetching:q,dataUpdatedAt:$}=(0,t.nN)({queryKey:["containerLog",null===M||void 0===M?void 0:M.row_id,null===M||void 0===M?void 0:M.access_key,V,N.open],queryFn:async()=>N.open&&null!==M&&void 0!==M&&M.row_id&&null!==M&&void 0!==M&&M.access_key&&V?await I.get_logs(null===M||void 0===M?void 0:M.row_id,null===M||void 0===M?void 0:M.access_key,V,15e3).then((e=>e.result.logs)):"",staleTime:5e3}),[Q,{resetPrevious:H}]=function(e,n){let{initialPrev:l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=(0,r.useRef)(l),[s,i]=(0,r.useState)({}),t=(0,r.useMemo)(e,n),o=(0,r.useMemo)((()=>a.current),[...n,s]);return(0,r.useEffect)((()=>{a.current=t}),n),[{previous:o,current:t},{resetPrevious:()=>{a.current=l,i({})}}]}((()=>(null===O||void 0===O?void 0:O.split("\n").length)||0),[O]),{md:z}=y.Ay.useBreakpoint(),{t:G}=(0,_.Bd)();return(0,j.jsx)(d.A,{title:(0,j.jsxs)(c.A,{style:{maxWidth:"100%"},gap:"sm",children:[(0,j.jsx)(h.A.Title,{level:4,style:{margin:0,flexShrink:0},children:"Logs"}),M?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(h.A.Text,{style:{fontWeight:"normal"},ellipsis:!0,children:null===M||void 0===M?void 0:M.name}),(0,j.jsxs)(h.A.Text,{style:{fontWeight:"normal",fontFamily:"monospace"},copyable:{text:null===M||void 0===M?void 0:M.row_id,tooltips:G("button.CopySomething",{name:G("session.SessionId")})},children:["(",z?null===M||void 0===M?void 0:M.row_id:null===M||void 0===M||null===(K=M.row_id.split("-"))||void 0===K?void 0:K[0],")"]})]}):null]}),width:"100%",styles:{header:{width:"100%"},body:{height:"calc(100vh - 100px)",maxHeight:"calc(100vh - 100px)"}},...N,footer:null,destroyOnClose:!0,children:(0,j.jsxs)(c.A,{direction:"column",align:"start",style:{height:"100%"},gap:"sm",children:[(0,j.jsxs)(c.A,{gap:"sm",wrap:"wrap",children:["Kernel Role",(0,j.jsx)(u.A,{value:V,onChange:e=>{P(e),H()},autoSelectOption:!0,options:F().chain(null===M||void 0===M||null===(T=M.kernel_nodes)||void 0===T?void 0:T.edges).sortBy((e=>{var n,l;return`${null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.cluster_role} ${null===e||void 0===e||null===(l=e.node)||void 0===l?void 0:l.cluster_idx}`})).map((e=>{var n,l,a,s,i;return{label:(0,j.jsxs)(j.Fragment,{children:[null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.cluster_role,"main"!==(null===e||void 0===e||null===(l=e.node)||void 0===l?void 0:l.cluster_role)?null===e||void 0===e||null===(a=e.node)||void 0===a?void 0:a.cluster_idx:"","admin"===D||"superadmin"===D?(0,j.jsxs)(h.A.Text,{style:{fontFamily:"monospace",fontSize:E.fontSizeSM},type:"secondary",children:["(",((null===e||void 0===e||null===(s=e.node)||void 0===s?void 0:s.row_id)||"").substring(0,5),")"]}):null]}),value:null===e||void 0===e||null===(i=e.node)||void 0===i?void 0:i.row_id}})).value()}),(0,j.jsx)(v.A,{type:"vertical"}),(0,j.jsx)(k.A,{title:G("button.Download"),children:(0,j.jsx)(f.Ay,{size:"middle",icon:(0,j.jsx)(S.A,{}),disabled:B||q,onClick:()=>{const e=new Blob([O||""],{type:"text/plain"});(0,a.WN)(e,`${(null===M||void 0===M?void 0:M.name)||"session"}-logs-${V}-${(new Date).toISOString()}.txt`)}})}),(0,j.jsx)(k.A,{title:G("button.Refresh"),children:(0,j.jsx)(f.Ay,{size:"middle",loading:B||q,icon:(0,j.jsx)(m.A,{}),onClick:()=>U()})})]}),(0,j.jsx)("div",{style:{height:"calc(100% - 50px)",alignSelf:"stretch",border:`1px solid ${E.colorBorder}`,overflow:"hidden"},children:(0,j.jsx)(g.jB,{startFollowing:!0,render:e=>{let{follow:n,onScroll:l}=e;return(0,j.jsx)(g.FT,{caseInsensitive:!0,enableSearch:!0,enableSearchNavigation:!0,selectableLines:!0,text:O||"",highlight:Q.previous,extraLines:1,follow:n,onScroll:l})}},$)})]})})}},78348:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AppLauncherModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"5851a2f65c24221db8a7dddee2487e40"},s=a},60267:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AppLauncherModalLegacyFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"session_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null}],type:"ComputeSession",abstractKey:null,hash:"bddd947be7d376d760a70160a4d2c62a"},s=a},74879:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"uuid"}],n=[{kind:"Variable",name:"id",variableName:"uuid"}],l={alias:null,args:null,kind:"ScalarField",name:"group_id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ConnectedKernelListLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ConnectedKernelListLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"b8db3f5005362f059f55439e393c1838",id:null,metadata:{},name:"ConnectedKernelListLegacyQuery",operationKind:"query",text:"query ConnectedKernelListLegacyQuery(\n  $uuid: UUID!\n) {\n  session_for_project_id: compute_session(id: $uuid) {\n    group_id\n    id\n  }\n}\n"}}}();a.hash="19ed5dde0fb95d8ff8cfbe9114129348";const s=a},22074:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"project_id"}],n=[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"project_id",variableName:"project_id"}],l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"status_info",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"agent_id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ConnectedKernelListQuery",selections:[{alias:"session",args:n,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[l,a,s,i,t,r,o],storageKey:null}],storageKey:null},d],storageKey:null},{args:null,kind:"FragmentSpread",name:"ContainerLogModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ConnectedKernelListQuery",selections:[{alias:"session",args:n,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[l,a,s,i,t,r,o,{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null}],storageKey:null}],storageKey:null},d],storageKey:null},l,a,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null}],storageKey:null}]},params:{cacheID:"2e6cc39dd042b4d260abf65705f92cb5",id:null,metadata:{},name:"ConnectedKernelListQuery",operationKind:"query",text:"query ConnectedKernelListQuery(\n  $id: GlobalIDField!\n  $project_id: UUID!\n) {\n  session: compute_session_node(id: $id, project_id: $project_id) {\n    kernel_nodes {\n      edges {\n        node {\n          id\n          row_id\n          cluster_role\n          status\n          status_info\n          agent_id\n          container_id\n        }\n      }\n      count\n    }\n    ...ContainerLogModalFragment\n    id\n  }\n}\n\nfragment ContainerLogModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  status\n  access_key\n  kernel_nodes {\n    edges {\n      node {\n        id\n        row_id\n        container_id\n        cluster_idx\n        cluster_role\n      }\n    }\n  }\n}\n"}}}();a.hash="d7ddfbcf29d38fad8451d13a176ce279";const s=a},93372:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ContainerCommitModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},action:"NONE"}],type:"ComputeSessionNode",abstractKey:null,hash:"8bcd294de1ffd3f00f6ec0ed7177c304"},s=a},4916:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ContainerLogModalFragment",selections:[e,{kind:"RequiredField",field:n,action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"ComputeSessionNode",abstractKey:null}}();a.hash="59dda81185d3d874cd635adcae2ae9d4";const s=a},4384:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"filter"},n={defaultValue:null,kind:"LocalArgument",name:"projectId"},l=[{alias:null,args:[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"project_id",variableName:"projectId"}],concreteType:"ComputeSessionConnection",kind:"LinkedField",name:"compute_session_nodes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"EditableSessionNameDuplicatedCheckQuery",selections:l,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"EditableSessionNameDuplicatedCheckQuery",selections:l},params:{cacheID:"ce3849a33aefe8ee28e3b0c421c9e88a",id:null,metadata:{},name:"EditableSessionNameDuplicatedCheckQuery",operationKind:"query",text:"query EditableSessionNameDuplicatedCheckQuery(\n  $projectId: UUID!\n  $filter: String\n) {\n  compute_session_nodes(project_id: $projectId, filter: $filter) {\n    count\n  }\n}\n"}}}();a.hash="6d2fa3588d8065b057cd83aa0278d840";const s=a},9011:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditableSessionNameFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"priority",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"9c053b92b568a9b132f7615d1869f32b"},s=a},8014:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"sessionId"}],n=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"sessionId"}],concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"EditableSessionNameRefetchQuery",selections:n,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"EditableSessionNameRefetchQuery",selections:n},params:{cacheID:"97f9f15d5b3bbdeb5fa21b269885bbfd",id:null,metadata:{},name:"EditableSessionNameRefetchQuery",operationKind:"query",text:"query EditableSessionNameRefetchQuery(\n  $sessionId: GlobalIDField!\n) {\n  compute_session_node(id: $sessionId) {\n    id\n    name\n  }\n}\n"}}}();a.hash="281ac16f3aace1f2312a73fc95d3f68c";const s=a},23679:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionActionButtonsFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commit_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},{args:null,kind:"FragmentSpread",name:"TerminateSessionModalFragment"},{args:null,kind:"FragmentSpread",name:"ContainerLogModalFragment"},{args:null,kind:"FragmentSpread",name:"ContainerCommitModalFragment"},{args:null,kind:"FragmentSpread",name:"AppLauncherModalFragment"}],type:"ComputeSessionNode",abstractKey:null,hash:"103a9b6ca717c568c1cdfc2dcde10f1a"},s=a},31344:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionActionButtonsLegacyFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null},{args:null,kind:"FragmentSpread",name:"AppLauncherModalLegacyFragment"}],type:"ComputeSession",abstractKey:null,hash:"1c247e641be508999bac664d7f289a4f"},s=a},78023:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionIdleChecksFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null}],type:"ComputeSession",abstractKey:null,hash:"d2bf721ec94f22eba99980925b3f9656"},s=a},51471:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionIdleChecksNodeFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"09a1dd685c8942ebb5c69e6dddaf6da0"},s=a},79156:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionTypeTagFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"6d4ab2b738125ee81d47483324695349"},s=a},70023:(e,n,l)=>{l.d(n,{A:()=>xn});var a,s,i=l(81751),t=l(654),r=l(3413),o=l(77813),d=l(78909),u=l(43992),c=l(24045),m=l(38773),g=l(34384),p=l(96520),y=l(70344),h=l(9687),v=l(37090),k=l(18959),f=l(86663),x=l(90086),F=l(36290),S=l(64428),_=l.n(S),C=l(43813),j=l(55202),A=l(44617),b=l(18139),K=l(52426);const T={PREPARING:"blue",BUILDING:"blue",PULLING:"blue",PREPARED:"blue",CREATING:"blue",PENDING:"green",SCHEDULED:"green",RUNNING:"green",RESTARTING:"green",RESIZING:"green",SUSPENDED:"green",TERMINATING:"default",TERMINATED:"default",CANCELLED:"default",ERROR:"red"},w=e=>{let{id:n,fetchKey:i}=e;const{t:t}=(0,A.Bd)(),r=(0,u.hd)(),[d,c]=(0,j.useState)(),{token:S}=v.A.useToken(),{session_for_project_id:w}=(0,b.useLazyLoadQuery)(void 0!==a?a:a=l(74879),{uuid:n},{fetchPolicy:"network-only"}),{session:L}=(0,b.useLazyLoadQuery)(void 0!==s?s:s=l(22074),{id:(0,o.wc)("ComputeSessionNode",n),project_id:(null===w||void 0===w?void 0:w.group_id)||r.id},{fetchPolicy:"network-only",fetchKey:i}),N=null===L||void 0===L?void 0:L.kernel_nodes,I=(0,o.LY)([{title:t("kernel.KernelId"),fixed:"left",dataIndex:"row_id",render:e=>(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(k.A.Text,{copyable:!0,ellipsis:!0,children:e}),(0,K.jsx)(f.A,{title:t("session.SeeContainerLogs"),children:(0,K.jsx)(x.Ay,{icon:(0,K.jsx)(C.A,{}),type:"link",onClick:()=>{c(e)},style:{width:"auto",height:"auto",marginInlineStart:S.marginXXS,border:"none"}})})]})},{title:t("kernel.Role"),dataIndex:"cluster_role",render:e=>(0,K.jsx)(F.A,{children:e})},{title:t("kernel.Status"),dataIndex:"status",render:(e,n)=>{var l;return(0,K.jsx)(K.Fragment,{children:""!==(null===n||void 0===n?void 0:n.status_info)?(0,K.jsx)(g.A,{values:[{label:e,color:_().get(T,e)},{label:null===n||void 0===n?void 0:n.status_info,color:_().get(T,null!==(l=null===n||void 0===n?void 0:n.status_info)&&void 0!==l?l:"")}]}):(0,K.jsx)(F.A,{color:_().get(T,e),children:e})})}},{title:t("kernel.ContainerId"),dataIndex:"container_id",onCell:()=>({style:{maxWidth:250}}),render:e=>_().isEmpty(e)?"-":(0,K.jsx)(k.A.Text,{copyable:!0,ellipsis:!0,children:e})},{title:t("kernel.AgentId"),dataIndex:"agent_id",render:e=>(0,K.jsx)(k.A.Text,{copyable:!0,children:e})}]);return(0,K.jsxs)(p.A,{direction:"column",align:"stretch",gap:"sm",children:[(0,K.jsx)(m.A,{bordered:!0,rowKey:"id",scroll:{x:"max-content"},columns:I,dataSource:(0,o.tS)(null===N||void 0===N?void 0:N.edges.map((e=>null===e||void 0===e?void 0:e.node))),style:{width:"100%"},pagination:!1}),(0,K.jsx)(y.A,{children:(0,K.jsx)(h.A,{open:!!d,sessionFrgmt:L||null,defaultKernelId:d,onCancel:()=>{c(void 0)}})})]})};var L,N,I,E=l(7885),D=l(20103),M=l(24480),R=l(79837),V=l(294),P=l(63342),O=l(90278);const U=e=>{let{component:n=P.A,sessionFrgmt:a,editable:s,style:i,...t}=e;const r=(0,b.useRelayEnvironment)(),c=(0,u.hd)(),m=(0,b.useFragment)(void 0!==L?L:L=l(9011),a),[g,p]=(0,j.useState)(m.name),[y]=(0,d.U6)(),h=(0,o.QE)(),k=(0,E.ET)({mutationFn:e=>h({method:"POST",url:`/session/${m.name}/rename`,body:{name:e}})}),{t:f}=(0,A.Bd)(),{token:x}=v.A.useToken(),{message:F}=M.A.useApp(),[S,_]=(0,j.useState)(!1),C=!["RESTARTING","PREPARING","PREPARED","CREATING","PULLING"].includes(m.status||""),T=s&&y.uuid===m.user_id&&C,w=k.isPending||g!==m.name;return(0,K.jsxs)(K.Fragment,{children:[(!S||w)&&(0,K.jsx)(n,{editable:!(!T||w)&&{onStart:()=>{_(!0)},triggerType:["icon","text"]},copyable:!0,style:{...i,color:w?x.colorTextTertiary:null===i||void 0===i?void 0:i.color},...t,children:k.isPending||g!==m.name?g:m.name}),S&&!w&&(0,K.jsx)(R.A,{onFinish:e=>{_(!1),p(e.sessionName),k.mutate(e.sessionName,{onSuccess:()=>{(0,b.fetchQuery)(r,void 0!==N?N:N=l(8014),{sessionId:m.id}).toPromise().catch(),document.dispatchEvent(new CustomEvent("backend-ai-session-list-refreshed"))},onError:e=>{F.error(f("session.FailToRenameSession"))}})},initialValues:{sessionName:m.name},style:{flex:1},children:(0,K.jsx)(R.A.Item,{name:"sessionName",validateDebounce:1e3,rules:[...(0,D.j)(f),{validator:async(e,n)=>{if(n===m.name)return Promise.resolve();return await(0,b.fetchQuery)(r,void 0!==I?I:I=l(4384),{projectId:c.id,filter:`status != "TERMINATED" & status != "CANCELLED" & name == "${n}"`}).toPromise().then((e=>{var n;return 0!==(null===e||void 0===e||null===(n=e.compute_session_nodes)||void 0===n?void 0:n.count)})).catch((()=>!1))?Promise.reject(f("session.launcher.SessionAlreadyExists")):Promise.resolve()}}],style:{margin:0},children:(0,K.jsx)(V.A,{size:"large",suffix:(0,K.jsx)(O.A,{style:{fontSize:"0.8em",color:x.colorTextTertiary}}),autoFocus:!0,onKeyDown:e=>{"Escape"===e.key&&_(!1)}})})})]})};var B,q,$,Q;function H(){return H=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var a in l)({}).hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},H.apply(null,arguments)}function z(e,n){let{title:l,titleId:a,...s}=e;return j.createElement("svg",H({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":a},s),l?j.createElement("title",{id:a},l):null,B||(B=j.createElement("path",{d:"M2.93855 2.32715H9.95845C10.2637 2.32715 10.5689 2.63236 10.5689 2.93757V9.95747C10.5689 10.2627 10.2637 10.5679 9.95845 10.5679H2.93855C2.63334 10.5679 2.32812 10.2627 2.32812 9.95747V2.93757C2.32813 2.63236 2.63334 2.32715 2.93855 2.32715Z",fill:"currentColor"})),q||(q=j.createElement("path",{d:"M13.3155 2.32715H20.3354C20.6406 2.32715 20.9458 2.63236 20.9458 2.93757V9.95747C20.9458 10.2627 20.6406 10.5679 20.3354 10.5679H13.3155C13.0103 10.5679 12.7051 10.2627 12.7051 9.95747V2.93757C12.7051 2.63236 13.0103 2.32715 13.3155 2.32715Z",fill:"currentColor"})),$||($=j.createElement("path",{d:"M2.93855 12.7046H9.95845C10.2637 12.7046 10.5689 13.0098 10.5689 13.315V20.3349C10.5689 20.6401 10.2637 20.9453 9.95845 20.9453H2.93855C2.63334 20.9453 2.32812 20.6401 2.32812 20.3349V13.315C2.32813 13.0098 2.63334 12.7046 2.93855 12.7046Z",fill:"currentColor"})),Q||(Q=j.createElement("path",{d:"M13.3155 12.7046H20.3354C20.6406 12.7046 20.9458 13.0098 20.9458 13.315V20.3349C20.9458 20.6401 20.6406 20.9453 20.3354 20.9453H13.3155C13.0103 20.9453 12.7051 20.6401 12.7051 20.3349V13.315C12.7051 13.0098 13.0103 12.7046 13.3155 12.7046Z",fill:"currentColor"})))}const G=j.forwardRef(z);l.p;var Z=l(87729);const W=e=>(0,K.jsx)(Z.A,{component:G,...e});var X,J,Y,ee;function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var a in l)({}).hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},ne.apply(null,arguments)}function le(e,n){let{title:l,titleId:a,...s}=e;return j.createElement("svg",ne({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":a},s),l?j.createElement("title",{id:a},l):null,X||(X=j.createElement("path",{d:"M8.20078 5.99951H6.19967C6.08939 5.99951 6 6.0889 6 6.19918V17.7998C6 17.9101 6.08939 17.9995 6.19967 17.9995H8.20078C8.31105 17.9995 8.40045 17.9101 8.40045 17.7998V6.19918C8.40045 6.0889 8.31105 5.99951 8.20078 5.99951Z",fill:"currentColor"})),J||(J=j.createElement("path",{d:"M13.0016 5.99951H11.0004C10.8902 5.99951 10.8008 6.0889 10.8008 6.19918V17.7998C10.8008 17.9101 10.8902 17.9995 11.0004 17.9995H13.0016C13.1118 17.9995 13.2012 17.9101 13.2012 17.7998V6.19918C13.2012 6.0889 13.1118 5.99951 13.0016 5.99951Z",fill:"currentColor"})),Y||(Y=j.createElement("path",{d:"M17.8004 5.99951H15.7993C15.689 5.99951 15.5996 6.0889 15.5996 6.19918V17.7998C15.5996 17.9101 15.689 17.9995 15.7993 17.9995H17.8004C17.9107 17.9995 18.0001 17.9101 18.0001 17.7998V6.19918C18.0001 6.0889 17.9107 5.99951 17.8004 5.99951Z",fill:"currentColor"})),ee||(ee=j.createElement("path",{d:"M21.2002 2H2.79978C2.35694 2 2 2.35694 2 2.79978V21.2002C2 21.6431 2.35694 22 2.79978 22H21.2002C21.6431 22 22 21.6419 22 21.2002V2.79978C22 2.35694 21.6419 2 21.2002 2ZM20.2008 20.2008H3.80033V3.80033H20.2008V20.2008Z",fill:"currentColor"})))}const ae=j.forwardRef(le),se=(l.p,e=>(0,K.jsx)(Z.A,{component:ae,...e}));var ie;function te(){return te=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var a in l)({}).hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},te.apply(null,arguments)}function re(e,n){let{title:l,titleId:a,...s}=e;return j.createElement("svg",te({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:n,"aria-labelledby":a},s),l?j.createElement("title",{id:a},l):null,ie||(ie=j.createElement("g",{fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},j.createElement("path",{d:"M15 12H10"}),j.createElement("path",{d:"M15 8H10"}),j.createElement("path",{d:"M19 17V5C19 4.46957 18.7893 3.96086 18.4142 3.58579C18.0391 3.21071 17.5304 3 17 3H4"}),j.createElement("path",{d:"M8 21H20C20.5304 21 21.0391 20.7893 21.4142 20.4142C21.7893 20.0391 22 19.5304 22 19V18C22 17.7348 21.8946 17.4804 21.7071 17.2929C21.5196 17.1054 21.2652 17 21 17H11C10.7348 17 10.4804 17.1054 10.2929 17.2929C10.1054 17.4804 10 17.7348 10 18V19C10 19.5304 9.78929 20.0391 9.41421 20.4142C9.03914 20.7893 8.53043 21 8 21ZM8 21C7.46957 21 6.96086 20.7893 6.58579 20.4142C6.21071 20.0391 6 19.5304 6 19V5C6 4.46957 5.78929 3.96086 5.41421 3.58579C5.03914 3.21071 4.53043 3 4 3C3.46957 3 2.96086 3.21071 2.58579 3.58579C2.21071 3.96086 2 4.46957 2 5V7C2 7.26522 2.10536 7.51957 2.29289 7.70711C2.48043 7.89464 2.73478 8 3 8H6"}))))}const oe=j.forwardRef(re),de=(l.p,e=>(0,K.jsx)(Z.A,{component:oe,...e}));var ue,ce;function me(){return me=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var a in l)({}).hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},me.apply(null,arguments)}function ge(e,n){let{title:l,titleId:a,...s}=e;return j.createElement("svg",me({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":a},s),l?j.createElement("title",{id:a},l):null,ue||(ue=j.createElement("path",{d:"M19.7639 16.6396H11.9259C11.7133 16.6396 11.541 16.812 11.541 17.0245V19.0089C11.541 19.2215 11.7133 19.3938 11.9259 19.3938H19.7639C19.9765 19.3938 20.1488 19.2215 20.1488 19.0089V17.0245C20.1488 16.812 19.9765 16.6396 19.7639 16.6396Z",fill:"currentColor"})),ce||(ce=j.createElement("path",{d:"M11.5231 12.122C11.5231 12.122 11.526 12.1161 11.526 12.1132H11.5187C11.5187 12.0035 11.485 11.8937 11.3928 11.8176C11.3928 11.8176 3.52112 5.23958 3.33088 5.08446C3.1421 4.92934 3.04698 4.81666 2.80844 4.87958C2.57576 4.94105 2.586 5.23812 2.586 5.39471C2.586 5.55129 2.58747 7.88982 2.58747 7.88982C2.58747 7.98933 2.63137 8.08299 2.70747 8.14738L7.44014 12.122L2.70747 16.0966C2.63137 16.161 2.58747 16.2547 2.58747 16.3542C2.58747 16.3542 2.586 18.6927 2.586 18.8493C2.586 19.0059 2.57576 19.303 2.80844 19.3644C3.04698 19.4273 3.1421 19.3147 3.33088 19.1595C3.51966 19.0044 11.3928 12.4264 11.3928 12.4264C11.485 12.3488 11.5187 12.2391 11.5187 12.1308H11.526C11.526 12.1308 11.5231 12.1249 11.5231 12.122Z",fill:"currentColor"})))}const pe=j.forwardRef(ge),ye=(l.p,e=>(0,K.jsx)(Z.A,{component:pe,...e}));var he,ve;function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var a in l)({}).hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},ke.apply(null,arguments)}function fe(e,n){let{title:l,titleId:a,...s}=e;return j.createElement("svg",ke({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":a},s),l?j.createElement("title",{id:a},l):null,he||(he=j.createElement("path",{d:"M21.0504 12.8503C21.0595 9.6413 19.3992 6.81833 16.8899 5.20326C16.7783 5.13238 16.6305 5.21231 16.6305 5.3435V6.82285C16.6305 6.92389 16.6742 7.01889 16.7526 7.08223C16.9321 7.23001 17.104 7.38684 17.2684 7.55423C17.9515 8.24037 18.4913 9.0381 18.8653 9.92631C19.2529 10.8432 19.4504 11.8204 19.4504 12.8277C19.4504 13.835 19.2544 14.8122 18.8653 15.7291C18.4913 16.6173 17.9515 17.415 17.2684 18.1012C16.5852 18.7873 15.7875 19.3242 14.9008 19.6997C13.9839 20.0887 13.0098 20.2848 12.0009 20.2848C10.9921 20.2848 10.0194 20.0872 9.10104 19.6997C8.21584 19.3257 7.41811 18.7858 6.73348 18.1012C6.05036 17.415 5.51049 16.6173 5.13651 15.7291C4.74895 14.8107 4.5499 13.8245 4.5514 12.8277C4.5514 11.8204 4.74895 10.8432 5.13651 9.92631C5.51049 9.03961 6.05337 8.23434 6.73348 7.55423C6.89936 7.38835 7.07278 7.23303 7.24921 7.08223C7.32763 7.01889 7.37136 6.92238 7.37136 6.82285V5.3435C7.37136 5.2108 7.22358 5.12937 7.11199 5.20326C4.61021 6.81531 2.95142 9.62622 2.95142 12.8262C2.95142 17.7966 6.95214 21.832 11.9074 21.8832C16.9426 21.9345 21.0353 17.8916 21.0474 12.8503H21.0504Z",fill:"currentColor",stroke:"currentColor",strokeWidth:.7,strokeMiterlimit:10})),ve||(ve=j.createElement("path",{d:"M12.6253 1.88867H11.3797C11.2465 1.88867 11.1384 1.9967 11.1384 2.12995V11.1599C11.1384 11.2931 11.2465 11.4011 11.3797 11.4011H12.6253C12.7586 11.4011 12.8666 11.2931 12.8666 11.1599V2.12995C12.8666 1.9967 12.7586 1.88867 12.6253 1.88867Z",fill:"currentColor",stroke:"currentColor",strokeWidth:.7,strokeMiterlimit:10})))}const xe=j.forwardRef(fe),Fe=(l.p,e=>(0,K.jsx)(Z.A,{component:xe,...e}));var Se,_e,Ce=l(38053),je=l(58915),Ae=l(4828),be=l(56222),Ke=l(6679),Te=l(36256),we=l(23917);const Le=e=>{var n,a,s;let{onRequestClose:t,sessionFrgmt:r,legacySessionFrgmt:o,...d}=e;const{t:u}=(0,A.Bd)(),c=(0,i.CX)(),m=(0,j.useRef)(null),[g,y]=(0,j.useState)(!1),[h,v]=(0,j.useState)(!1),[F,S]=(0,j.useState)(!1),[C,T]=(0,j.useState)(!1),[w,L]=(0,j.useState)(!1),N=(0,b.useFragment)(void 0!==Se?Se:Se=l(78348),r),I=(0,b.useFragment)(void 0!==_e?_e:_e=l(60267),o),D=JSON.parse(null!==(n=null!==(a=null===N||void 0===N?void 0:N.service_ports)&&void 0!==a?a:null===I||void 0===I?void 0:I.service_ports)&&void 0!==n?n:"{}"),{preOpenAppTemplate:M,baseAppTemplate:P}=(e=>{const{data:n={}}=(0,E.nj)({queryKey:["backendai-app-template"],queryFn:()=>fetch("resources/app_template.json").then((e=>e.json())).then((e=>e.appTemplate)),staleTime:864e5}),l=(0,i.CX)(),a=globalThis.isElectron||l._config.allowNonAuthTCP,s=_().filter(e,(e=>"preopen"===e.protocol&&!1===e.is_inference)),t=_().map(s,(e=>({name:e.name,title:e.name,src:"/resources/icons/default_app.svg"}))),r=_().filter(e,(e=>e.is_inference)),o=_().map(r,(e=>({name:e.name,title:e.name,src:"/resources/icons/default_app.svg"}))),d=_().filter(e,(e=>!_().includes(s,e)&&!_().includes(r,e)));let u=_().chain(d).map((e=>{const l=_().find(_().flatten(Object.values(n)),(n=>n.name===e.name));return _().includes(s,e)||e.is_inference?null:"sshd"!==e.name||a?{name:e.name,title:(null===l||void 0===l?void 0:l.title)||e.name,category:(null===l||void 0===l?void 0:l.category)||"99.Custom",redirect:(null===l||void 0===l?void 0:l.redirect)||"",src:(null===l||void 0===l?void 0:l.src)||"./resources/icons/default_app.svg"}:null})).filter(Boolean).value();_().some(d,{name:"ttyd"})||u.push({name:n.ttyd[0].name,title:n.ttyd[0].title,category:"99.Custom",redirect:n.ttyd[0].redirect,src:n.ttyd[0].src}),l.supports("local-vscode-remote-connection")&&a&&u.push({name:"vscode-desktop",title:"Visual Studio Code (Desktop)",category:"2.Development",redirect:"",src:"./resources/icons/vscode.svg"});const c=_().chain(u).sortBy("category").groupBy("category").value();return{appTemplate:n,preOpenAppTemplate:t,inferenceAppTemplate:o,baseAppTemplate:c}})(D),O=async e=>{var n,l,a,s,i;if(null===e||void 0===e||!e.name)return;await(null===(n=m.current)||void 0===n?void 0:n.validateFields().then((e=>{var n;(g&&(globalThis.appLauncher.clientIps=e.clientIps),h)&&(globalThis.appLauncher.userPort=null!==(n=e.preferredPort)&&void 0!==n?n:10250);w&&(globalThis.appLauncher.subDomain=e.subDomain),F&&(globalThis.appLauncher.forceUseV1Proxy=!0),C&&(globalThis.appLauncher.forceUseV2Proxy=!0)})));const r={"app-name":null!==(l=null===e||void 0===e?void 0:e.name)&&void 0!==l?l:"","session-uuid":null!==(a=null===N||void 0===N?void 0:N.row_id)&&void 0!==a?a:"","url-postfix":null!==(s=null===e||void 0===e?void 0:e.redirect)&&void 0!==s?s:""};if(["nniboard","mlflow-ui"].includes(null!==(i=null===e||void 0===e?void 0:e.name)&&void 0!==i?i:""))globalThis.appLauncher._openAppLaunchConfirmationDialog(r);else{if("tensorboard"===(null===e||void 0===e?void 0:e.name))return globalThis.appLauncher._openTensorboardDialog(),void t();globalThis.appLauncher._runApp(r).then((()=>{})),y(!1),v(!1),t()}};return(0,K.jsx)(Ce.A,{title:u("session.appLauncher.App"),width:450,onCancel:t,footer:null,destroyOnClose:!0,...d,children:(0,K.jsxs)(p.A,{direction:"column",gap:"md",align:"stretch",children:[_().map(P,((e,n)=>(0,K.jsxs)("div",{children:[(0,K.jsx)(k.A.Title,{level:5,style:{marginTop:0},children:n.split(".")[1]}),(0,K.jsx)(Ae.A,{gutter:[24,24],children:_().map(e,(e=>(0,K.jsx)(be.A,{span:6,style:{alignContent:"center"},children:(0,K.jsxs)(p.A,{direction:"column",gap:"xs",style:{height:"100%"},children:[(0,K.jsx)(x.Ay,{icon:(0,K.jsx)(Ke.A,{src:null===e||void 0===e?void 0:e.src,alt:null===e||void 0===e?void 0:e.name,preview:!1,style:{height:36,width:36}}),onClick:()=>{O(e)},style:{height:72,width:72}}),(0,K.jsx)(k.A.Text,{style:{textAlign:"center"},children:null===e||void 0===e?void 0:e.title})]})},null===e||void 0===e?void 0:e.name)))})]},n))),M.length>0?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(k.A.Title,{level:5,style:{marginTop:0},children:u("session.launcher.PreOpenPortTitle")}),(0,K.jsx)(Ae.A,{gutter:[12,12],children:_().map(M,(e=>(0,K.jsx)(be.A,{span:6,style:{alignContent:"center"},children:(0,K.jsxs)(p.A,{direction:"column",gap:"xs",style:{height:"100%"},children:[(0,K.jsx)(x.Ay,{icon:(0,K.jsx)(Ke.A,{src:null===e||void 0===e?void 0:e.src,alt:null===e||void 0===e?void 0:e.name,preview:!1,style:{height:36,width:36}}),onClick:()=>{O(e)},style:{height:72,width:72}}),(0,K.jsx)(k.A.Text,{style:{textAlign:"center"},children:null===e||void 0===e?void 0:e.title})]})},null===e||void 0===e?void 0:e.name)))})]}):null,(0,K.jsx)(R.A,{ref:m,layout:"vertical",children:(0,K.jsxs)(Ae.A,{gutter:16,children:[!globalThis.isElectron&&c._config.openPortToPublic?(0,K.jsx)(be.A,{span:12,children:(0,K.jsx)(R.A.Item,{name:"clientIps",label:(0,K.jsxs)(p.A,{gap:"xs",children:[(0,K.jsx)(Te.A,{value:g,onChange:e=>y(e.target.checked)}),u("session.OpenToPublic"),(0,K.jsx)(f.A,{title:(0,K.jsx)(A.x6,{i18nKey:"session.OpenToPublicDesc"}),children:(0,K.jsx)(je.A,{style:{cursor:"pointer"}})})]}),children:(0,K.jsx)(V.A,{disabled:!g,placeholder:u("session.AllowedClientIps")})})}):null,c._config.allowPreferredPort?(0,K.jsx)(be.A,{span:12,children:(0,K.jsx)(R.A.Item,{name:"preferredPort",label:(0,K.jsxs)(p.A,{gap:"xs",children:[(0,K.jsx)(Te.A,{value:h,onChange:e=>v(e.target.checked)}),u("session.TryPreferredPort")]}),rules:[{type:"number",min:1025},{type:"number",max:65534}],children:(0,K.jsx)(we.A,{placeholder:"10250",disabled:!h,style:{width:"100%"}})})}):null,null!==globalThis&&void 0!==globalThis&&null!==(s=globalThis.backendaiwebui)&&void 0!==s&&s.debug?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(be.A,{span:12,children:(0,K.jsx)(R.A.Item,{name:"subDomain",label:(0,K.jsxs)(p.A,{gap:"xs",children:[(0,K.jsx)(Te.A,{value:w,onChange:e=>L(e.target.checked)}),u("session.UseSubdomain")]}),children:(0,K.jsx)(V.A,{disabled:!w})})}),(0,K.jsx)(be.A,{}),(0,K.jsx)(be.A,{span:12,children:(0,K.jsx)(R.A.Item,{name:"forceUseV1Proxy",children:(0,K.jsx)(Te.A,{disabled:C,onChange:e=>S(e.target.checked),children:u("session.ForceUseV1Proxy")})})}),(0,K.jsx)(be.A,{span:12,children:(0,K.jsx)(R.A.Item,{name:"forceUseV2Proxy",children:(0,K.jsx)(Te.A,{disabled:F,onChange:e=>T(e.target.checked),children:u("session.ForceUseV2Proxy")})})})]}):null]})})]})})};var Ne,Ie=l(6017),Ee=l(69788),De=l(55616);const Me=e=>{let{sessionFrgmt:n,onRequestClose:a,...s}=e;const{t:t}=(0,A.Bd)(),{upsertNotification:r}=(0,Ie.js)(),[o,d]=(0,j.useState)(!1),u=(0,j.useRef)(null),c=(0,i.CX)(),m=(0,b.useFragment)(void 0!==Ne?Ne:Ne=l(93372),n);return(0,K.jsx)(Ce.A,{title:t("session.CommitSession"),onOk:()=>(()=>{var e;d(!0),null===u||void 0===u||null===(e=u.current)||void 0===e||e.validateFields().then((e=>{var n;r({message:"commitSession: "+(null===m||void 0===m?void 0:m.name),open:!0,backgroundTask:{status:"pending",promise:c.computeSession.convertSessionToImage(null!==(n=null===m||void 0===m?void 0:m.name)&&void 0!==n?n:"",e.imageName),onChange:{pending:t("session.CommitOnGoing"),resolved:e=>{const n=e.task_id;return a(),{backgroundTask:{status:"pending",taskId:n,promise:null,percent:0,onChange:{pending:t("session.CommitOnGoing"),resolved:t("session.CommitFinished"),rejected:t("session.CommitFailed")}}}},rejected:e=>({open:!0,type:"error",message:"commitSession: "+(null===m||void 0===m?void 0:m.name),description:null===e||void 0===e?void 0:e.message,toText:t("button.SeeErrorLogs"),to:"/usersettings?tab=logs"})}}})})).catch((()=>{})).finally((()=>{d(!1)}))})(),okButtonProps:{loading:o},onCancel:a,...s,destroyOnClose:!0,children:(0,K.jsxs)(p.A,{direction:"column",gap:"xs",align:"stretch",style:{overflow:"hidden"},children:[(0,K.jsx)(k.A.Text,{children:t("session.DescCommitSession")}),(0,K.jsxs)(Ee.A,{bordered:!0,size:"small",column:1,children:[(0,K.jsx)(Ee.A.Item,{label:t("session.SessionName"),children:null===m||void 0===m?void 0:m.name}),(0,K.jsx)(Ee.A.Item,{label:t("session.SessionId"),children:null===m||void 0===m?void 0:m.row_id})]}),(0,K.jsx)(De.A,{style:{marginTop:12,marginBottom:12}}),(0,K.jsx)(R.A,{ref:u,children:(0,K.jsx)(R.A.Item,{label:t("session.CommitImageName"),name:"imageName",required:!0,rules:[{required:!0},{min:4,max:32},{pattern:/^[a-zA-Z0-9-_.]+$/,message:t("session.validation.EnterValidSessionName")}],children:(0,K.jsx)(V.A,{placeholder:t("inputLimit.4to32chars")})})})]})})};var Re,Ve,Pe=l(76547);const Oe=e=>!["TERMINATED","CANCELLED","TERMINATING"].includes((null===e||void 0===e?void 0:e.status)||""),Ue=(e,n)=>{var l,a;return["batch","interactive","inference","system","running"].includes((null===e||void 0===e?void 0:e.type)||"")&&!_().isEmpty(JSON.parse(null!==(l=null!==(a=null===e||void 0===e?void 0:e.service_ports)&&void 0!==a?a:null===n||void 0===n?void 0:n.service_ports)&&void 0!==l?l:"{}"))},Be=e=>{var n;const{t:a}=(0,A.Bd)(),{token:s}=v.A.useToken(),t={runTerminal:e=>{globalThis.appLauncher.runTerminal(e)},showLauncher:e=>{}},r=(0,i.CX)(),o=(0,b.useFragment)(void 0!==Re?Re:Re=l(23679),e.sessionFrgmt),u=(0,b.useFragment)(void 0!==Ve?Ve:Ve=l(31344),e.legacySessionFrgmt),[c,m]=(0,j.useState)(!1),[g,p]=(0,j.useState)(!1),[y,k]=(0,j.useState)(!1),[F,S]=(0,j.useState)(!1),_=(null===(n=(0,d.U6)()[0])||void 0===n?void 0:n.uuid)===(null===o||void 0===o?void 0:o.user_id);return o&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(f.A,{title:a("session.SeeAppDialog"),children:(0,K.jsx)(x.Ay,{disabled:!Ue(o,u)||!Oe(o)||!_,icon:(0,K.jsx)(W,{}),onClick:()=>{m(!0)}})}),(0,K.jsx)(j.Suspense,{fallback:null,children:(0,K.jsx)(Le,{sessionFrgmt:o,legacySessionFrgmt:u,open:c,onRequestClose:()=>{m(!1)}})}),(0,K.jsx)(f.A,{title:a("session.ExecuteTerminalApp"),children:(0,K.jsx)(x.Ay,{disabled:!Ue(o,u)||!Oe(o)||!_,icon:(0,K.jsx)(ye,{}),onClick:()=>{t.runTerminal(null===o||void 0===o?void 0:o.row_id)}})}),(0,K.jsx)(Pe.A,{sessionFrgmts:[o],open:g,onRequestClose:()=>{p(!1)}}),(0,K.jsx)(f.A,{title:a("session.SeeContainerLogs"),children:(0,K.jsx)(x.Ay,{icon:(0,K.jsx)(de,{}),onClick:()=>{k(!0)}})}),(0,K.jsx)(h.A,{sessionFrgmt:o,open:y,onCancel:()=>{k(!1)}}),(0,K.jsx)(f.A,{title:a("session.RequestContainerCommit"),children:(0,K.jsx)(x.Ay,{disabled:!r.supports("image-commit")||!r._config.enableContainerCommit||"system"===o.type||!Oe(o)||!_,icon:(0,K.jsx)(se,{}),onClick:()=>{S(!0)}})}),(0,K.jsx)(Me,{sessionFrgmt:o,open:F,onRequestClose:()=>S(!1)}),(0,K.jsx)(f.A,{title:a("session.TerminateSession"),children:(0,K.jsx)(x.Ay,{disabled:!Oe(o),icon:(0,K.jsx)(Fe,{style:{color:Oe(o)?s.colorError:void 0}}),onClick:()=>{p(!0)}})})]})};var qe,$e,Qe=l(42519);function He(e){let n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!l){const[n,l]=e;return n<2*l?"red":n<10*l?"orange":"green"}return"and"===l&&_().every(e,(e=>{let[l,a]=e;return l<Math.min(2*a,a+5)?(n="red",!0):l<Math.min(10*a,a+10)?(n="orange",!0):(n="green",!0)})),"or"===l&&_().some(e,(e=>{let[l,a]=e;return l<Math.min(2*a,a+5)?(n="red",!0):l<Math.min(10*a,a+10)?(n="orange",!0):(n="green",!0)})),n}function ze(e,n){return"remaining"===n?!e.remaining||e.remaining<3600?"red":e.remaining<14400?"orange":"green":e.extra&&(!e.remaining||e.remaining<14400)?He(e.extra.resources,e.extra.thresholds_check_operator):void 0}const Ge=e=>{let{sessionNodeFrgmt:n=null,sessionFrgmt:a=null,direction:s="row"}=e;const{t:i}=(0,A.Bd)(),{token:t}=v.A.useToken(),{mergedResourceSlots:r}=(0,d.Hv)(),u=(0,b.useFragment)(void 0!==qe?qe:qe=l(51471),n),c=(0,b.useFragment)(void 0!==$e?$e:$e=l(78023),a),m=JSON.parse((null===u||void 0===u?void 0:u.idle_checks)||(null===c||void 0===c?void 0:c.idle_checks)||"{}"),y=e=>i("network_timeout"===e?"session.NetworkIdleTimeout":"session_lifetime"===e?"session.MaxSessionLifetime":"session.UtilizationIdleTimeout");return(0,K.jsx)(p.A,{direction:s,align:"stretch",gap:"sm",children:_().map(m,((e,n)=>{var l,a;return e.remaining?(0,K.jsxs)(p.A,{style:{flex:1},direction:"column",align:"stretch",children:[(0,K.jsxs)(p.A,{gap:"xxs",children:[(0,K.jsx)(k.A.Text,{children:y(n)}),"utilization"===n&&(0,K.jsx)(f.A,{title:(0,K.jsxs)(K.Fragment,{children:[`${i("session.Utilization")} / ${i("session.Threshold")} (%)`,(0,K.jsx)("br",{}),_().map(null===(l=e.extra)||void 0===l?void 0:l.resources,((e,n)=>{var l;const a=["cpu_util","mem"].includes(n)?_().split(n,"_")[0]:_().split(n,"_")[0]+".device",[s,i]=e;return(0,K.jsxs)(p.A,{gap:"xs",children:[(0,K.jsx)(k.A.Text,{style:{color:t.colorWhite},children:`${null===r||void 0===r||null===(l=r[a])||void 0===l?void 0:l.human_readable_name}:`}),(0,K.jsx)(k.A.Text,{style:{color:He(e)},children:`${s>=0?(0,o.Z1)(s,1):"-"} / ${i}`}),(0,K.jsx)("br",{})]},n)}))]}),children:(0,K.jsx)(Qe.A,{style:{color:t.colorTextSecondary,cursor:"pointer"}})})]}),e.remaining>=0?(0,K.jsx)(g.A,{values:[{label:(a=e.remaining_time_type,i("expire_after"===a?"session.ExpiresAfter":"session.GracePeriod")),color:ze(e,"utilization"===n?"utilization":"remaining")},{label:(0,o.bB)((new Date).toISOString(),new Date((new Date).getTime()+1e3*(e.remaining||0)).toISOString()),color:ze(e,"utilization"===n?"utilization":"remaining")}]}):(0,K.jsx)(k.A.Text,{type:"danger",children:i("session.TimeoutExceeded")})]},n):null}))})};var Ze,We=l(80561),Xe=l(58251),Je=l(65637);const Ye={INTERACTIVE:"green",BATCH:"darkgreen",INFERENCE:"blue"},en=e=>{let{sessionFrgmt:n}=e;const a=(0,b.useFragment)(void 0!==Ze?Ze:Ze=l(79156),n);return(0,K.jsx)(F.A,{color:_().get(Ye,_().toUpper(a.type||"")),children:_().toUpper(a.type||"")})};var nn,ln=l(54145),an=l(21765),sn=l(17280);const tn=e=>{var n,a;let{vfolderNodeFragment:s,folderId:i,folderName:t,showIcon:r}=e;const{generateFolderPath:o}=(0,an.useFolderExplorerOpener)(),d=(0,b.useFragment)(void 0!==nn?nn:nn=l(96947),s);return(0,K.jsxs)(ln.A,{to:o(null!==(n=null!==i&&void 0!==i?i:null===d||void 0===d?void 0:d.row_id)&&void 0!==n?n:""),style:{wordBreak:"break-all"},children:[r&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(sn.A,{})," \xa0"]}),null!==(a=null!==t&&void 0!==t?t:null===d||void 0===d?void 0:d.name)&&void 0!==a?a:""]})},rn=e=>{let{...n}=e;const{t:l}=(0,A.Bd)(),{token:a}=v.A.useToken();return(0,K.jsxs)(Ce.A,{title:l("session.IdleChecks"),footer:null,width:700,...n,children:[(0,K.jsx)(k.A.Text,{children:l("session.IdleChecksDesc")}),(0,K.jsx)(k.A.Title,{level:5,children:l("session.MaxSessionLifetime")}),(0,K.jsx)("p",{children:l("session.MaxSessionLifetimeDesc")}),(0,K.jsx)(k.A.Title,{level:5,children:l("session.NetworkIdleTimeout")}),(0,K.jsx)("p",{children:l("session.NetworkIdleTimeoutDesc")}),(0,K.jsx)(k.A.Title,{level:5,children:l("session.UtilizationIdleTimeout")}),(0,K.jsx)("p",{children:l("session.UtilizationIdleTimeoutDesc")}),(0,K.jsxs)(p.A,{direction:"column",align:"stretch",style:{marginLeft:a.marginMD},children:[(0,K.jsx)(k.A.Title,{level:5,style:{margin:0},children:l("session.GracePeriod")}),(0,K.jsx)("p",{children:l("session.GracePeriodDesc")}),(0,K.jsx)(k.A.Title,{level:5,style:{margin:0},children:l("session.UtilizationThreshold")}),(0,K.jsx)("p",{children:l("session.UtilizationThresholdDesc")})]})]})};var on,dn,un=l(51598),cn=l(67152),mn=l(40152),gn=l(43299),pn=l(41961),yn=l(60073),hn=l(38871);const vn=e=>{var n;let{id:a,fetchKey:s}=e;const{t:t}=(0,A.Bd)(),{token:m}=v.A.useToken(),{md:g}=mn.Ay.useBreakpoint(),y=(0,u.hd)(),h=(0,d.Am)(),S=(0,i.CX)(),[C,T]=(0,j.useState)(!1),[L,N]=(0,j.useState)(!1),[I,E]=(0,j.useState)("current"),{session_for_project_id:D}=(0,b.useLazyLoadQuery)(void 0!==on?on:on=l(2753),{uuid:a},{fetchPolicy:"network-only"}),{session:M,legacy_session:R}=(0,b.useLazyLoadQuery)(void 0!==dn?dn:dn=l(51636),{id:(0,o.wc)("ComputeSessionNode",a),uuid:a,project_id:(null===D||void 0===D?void 0:D.group_id)||y.id},{fetchPolicy:"network-only",fetchKey:s}),V=(null===R||void 0===R?void 0:R.image)&&(null===R||void 0===R?void 0:R.architecture)&&R.image+"@"+R.architecture,P=JSON.parse((null===M||void 0===M?void 0:M.idle_checks)||(null===R||void 0===R?void 0:R.idle_checks)||"{}"),O=_().min(_().values(P).map((e=>e.remaining)).filter(Boolean));return M?(0,K.jsxs)(p.A,{direction:"column",gap:"lg",align:"stretch",children:[(null===D||void 0===D?void 0:D.group_id)!==y.id&&(0,K.jsx)(gn.A,{message:t("session.NotInProject"),type:"warning",showIcon:!0}),O&&O<3600&&(0,K.jsx)(gn.A,{message:t("session.IdleCheckExpirationWarning"),type:"warning",showIcon:!0}),(0,K.jsxs)(p.A,{direction:"column",gap:"sm",align:"stretch",children:[(0,K.jsxs)(p.A,{direction:"row",justify:"between",align:"start",style:{alignSelf:"stretch"},gap:"sm",children:[(0,K.jsx)(U,{sessionFrgmt:M,component:hn.A,level:3,style:{margin:0,color:["TERMINATED","CANCELLED"].includes(M.status||"")?m.colorTextTertiary:void 0},editable:!["TERMINATED","CANCELLED"].includes(M.status||"")}),(0,K.jsx)(x.Ay.Group,{size:"large",children:(0,K.jsx)(Be,{sessionFrgmt:M,legacySessionFrgmt:R})})]}),(0,K.jsxs)(Ee.A,{bordered:!0,column:g?2:1,children:[(0,K.jsx)(Ee.A.Item,{label:t("session.SessionId"),span:g?2:1,children:(0,K.jsx)(k.A.Text,{ellipsis:!0,copyable:!0,style:{fontFamily:"monospace"},children:M.row_id})}),("admin"===h||"superadmin"===h)&&(0,K.jsx)(Ee.A.Item,{label:t("credential.UserID"),span:g?2:1,children:(0,K.jsx)(k.A.Text,{copyable:!0,children:null===R||void 0===R?void 0:R.user_email})}),(0,K.jsx)(Ee.A.Item,{label:t("session.Status"),children:(0,K.jsxs)(p.A,{children:[(0,K.jsx)(Je.A,{sessionFrgmt:M,showInfo:!0}),null!==M&&void 0!==M&&M.status_data&&"{}"!==(null===M||void 0===M?void 0:M.status_data)?(0,K.jsx)(f.A,{title:t("button.ClickForMoreDetails"),children:(0,K.jsx)(x.Ay,{type:"link",icon:(0,K.jsx)(Qe.A,{}),onClick:()=>{N(!0)}})}):null]})}),(0,K.jsx)(Ee.A.Item,{label:t("session.SessionType"),children:(0,K.jsx)(en,{sessionFrgmt:M})}),(0,K.jsx)(Ee.A.Item,{label:t("session.launcher.Environments"),children:V?(0,K.jsxs)(p.A,{gap:["xs",0],wrap:"wrap",children:[(0,K.jsx)(un.A,{image:V,style:{marginRight:m.marginXS}}),(0,K.jsx)(r.Ay,{image:V})]}):"-"}),(0,K.jsx)(Ee.A.Item,{label:t("session.launcher.MountedFolders"),children:(0,K.jsx)(p.A,{gap:"xs",wrap:"wrap",children:M.vfolder_nodes?M.vfolder_nodes.edges.map(((e,n)=>(null===e||void 0===e?void 0:e.node)&&(0,K.jsx)(tn,{showIcon:!0,vfolderNodeFragment:e.node},`mounted-vfolder-${n}`))):S.supports("vfolder-mounts")?_().map(_().zip(null===R||void 0===R?void 0:R.mounts,null===M||void 0===M?void 0:M.vfolder_mounts),(e=>{const[n,l]=e;return(0,K.jsx)(tn,{folderId:null!==l&&void 0!==l?l:"",folderName:null!==n&&void 0!==n?n:"",showIcon:!0},l)})):null===R||void 0===R||null===(n=R.mounts)||void 0===n?void 0:n.join(", ")})}),(0,K.jsx)(Ee.A.Item,{label:t("session.launcher.ResourceAllocation"),children:(0,K.jsxs)(p.A,{gap:"sm",wrap:"wrap",children:[(0,K.jsx)(f.A,{title:t("session.ResourceGroup"),children:(0,K.jsx)(F.A,{children:M.scaling_group})}),(0,K.jsx)(c.ResourceNumbersOfSession,{resource:JSON.parse(M.requested_slots||"{}")})]})}),(0,K.jsx)(Ee.A.Item,{label:t("session.Agent"),children:_().uniq(M.agent_ids).join(", ")||"-"}),(0,K.jsx)(Ee.A.Item,{label:t("session.Reservation"),span:g?2:1,children:(0,K.jsx)(p.A,{gap:"xs",wrap:"wrap",children:(0,K.jsx)(We.A,{sessionFrgmt:M})})}),S.supports("idle-checks-gql")&&"RUNNING"===M.status&&O?(0,K.jsx)(Ee.A.Item,{label:(0,K.jsxs)(p.A,{gap:"xxs",children:[t("session.IdleChecks"),(0,K.jsx)(f.A,{title:t("button.ClickForMoreDetails"),children:(0,K.jsx)(je.A,{style:{cursor:"pointer"},onClick:()=>T(!0)})})]}),span:g?2:1,children:(0,K.jsx)(Ge,{sessionNodeFrgmt:M,sessionFrgmt:R,direction:g?"row":"column"})}):null,(0,K.jsx)(Ee.A.Item,{label:(0,K.jsxs)(p.A,{direction:"column",align:"start",gap:m.marginSM,children:[(0,K.jsx)(k.A.Text,{style:{color:m.colorTextSecondary},children:t("session.ResourceUsage")}),(0,K.jsx)(pn.A,{size:"small",popupMatchSelectWidth:!1,style:{width:"100%",display:"none"},variant:"filled",defaultValue:"current",options:[{label:t("session.CurrentUsage"),value:"current"},{label:t("session.MaxUsage"),value:"max"},{label:t("session.AverageUsage"),value:"avg"}],onChange:e=>{E(e)}})]}),span:g?2:1,children:(0,K.jsx)(cn.A,{sessionFrgmt:M,displayTarget:I})})]})]}),(0,K.jsx)(j.Suspense,{fallback:(0,K.jsx)(yn.A,{}),children:(0,K.jsxs)(p.A,{direction:"column",gap:"sm",align:"stretch",children:[(0,K.jsx)(k.A.Title,{level:4,style:{margin:0},children:t("kernel.Kernels")}),(0,K.jsx)(w,{id:a,fetchKey:s})]})}),(0,K.jsx)(rn,{open:C,onCancel:()=>T(!1)}),(0,K.jsx)(Xe.A,{sessionFrgmt:M,open:L,onCancel:()=>N(!1)})]}):(0,K.jsx)(gn.A,{showIcon:!0,message:t("session.SessionNotFound"),type:"error",description:a})};var kn=l(24262),fn=l(94558);const xn=e=>{let{sessionId:n,...l}=e;const{t:a}=(0,A.Bd)();(0,i.CX)();const[s,r]=(0,j.useTransition)(),[o,d]=(0,i.Tw)("first");return(0,t.$)((()=>{r((()=>{d()}))}),7e3),(0,K.jsx)(fn.A,{title:a("session.SessionInfo"),width:800,keyboard:!1,...l,open:!!n,onClose:e=>{var n;null===(n=l.onClose)||void 0===n||n.call(l,e)},extra:(0,K.jsx)(f.A,{title:a("button.Refresh"),children:(0,K.jsx)(x.Ay,{loading:s,icon:(0,K.jsx)(kn.A,{}),onClick:()=>{r((()=>{d()}))}})}),children:(0,K.jsx)(j.Suspense,{fallback:(0,K.jsx)(yn.A,{}),children:n&&(0,K.jsx)(vn,{id:n,fetchKey:o})})})}},96947:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FolderLink_vfolderNode",selections:[{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],type:"VirtualFolderNode",abstractKey:null,hash:"a8ea258e8c3e20439b53af93ec37be13"},s=a},2753:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"uuid"}],n=[{kind:"Variable",name:"id",variableName:"uuid"}],l={alias:null,args:null,kind:"ScalarField",name:"group_id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"SessionDetailContentLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"SessionDetailContentLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"1c0255a2836eb7e492954c7ab0212c7f",id:null,metadata:{},name:"SessionDetailContentLegacyQuery",operationKind:"query",text:"query SessionDetailContentLegacyQuery(\n  $uuid: UUID!\n) {\n  session_for_project_id: compute_session(id: $uuid) {\n    group_id\n    id\n  }\n}\n"}}}();a.hash="d6a0dfbccdec8393f1a058dab48a0757";const s=a},51636:(e,n,l)=>{l.r(n),l.d(n,{default:()=>s});const a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"id"},n={defaultValue:null,kind:"LocalArgument",name:"project_id"},l={defaultValue:null,kind:"LocalArgument",name:"uuid"},a=[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"project_id",variableName:"project_id"}],s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"project_id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"resource_opts",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"status_data",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"vfolder_mounts",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"terminated_at",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"agent_ids",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"requested_slots",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null},x=[{kind:"Variable",name:"id",variableName:"uuid"}],F={alias:null,args:null,kind:"ScalarField",name:"image",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"mounts",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"user_email",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null};return{fragment:{argumentDefinitions:[e,n,l],kind:"Fragment",metadata:null,name:"SessionDetailContentQuery",selections:[{alias:"session",args:a,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[s,i,t,r,o,d,u,c,m,{alias:null,args:null,concreteType:"VirtualFolderConnection",kind:"LinkedField",name:"vfolder_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"VirtualFolderEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"VirtualFolderNode",kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"FolderLink_vfolderNode"}],storageKey:null}],storageKey:null},g],storageKey:null},{kind:"RequiredField",field:p,action:"NONE"},y,h,v,k,f,{args:null,kind:"FragmentSpread",name:"SessionStatusTagFragment"},{args:null,kind:"FragmentSpread",name:"SessionActionButtonsFragment"},{args:null,kind:"FragmentSpread",name:"SessionTypeTagFragment"},{args:null,kind:"FragmentSpread",name:"EditableSessionNameFragment"},{args:null,kind:"FragmentSpread",name:"SessionReservationFragment"},{args:null,kind:"FragmentSpread",name:"ContainerLogModalFragment"},{args:null,kind:"FragmentSpread",name:"SessionUsageMonitorFragment"},{args:null,kind:"FragmentSpread",name:"ContainerCommitModalFragment"},{args:null,kind:"FragmentSpread",name:"SessionIdleChecksNodeFragment"},{args:null,kind:"FragmentSpread",name:"SessionStatusDetailModalFragment"},{args:null,kind:"FragmentSpread",name:"AppLauncherModalFragment"}],storageKey:null},{alias:"legacy_session",args:x,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[F,S,_,C,f,{args:null,kind:"FragmentSpread",name:"SessionIdleChecksFragment"},{args:null,kind:"FragmentSpread",name:"SessionActionButtonsLegacyFragment"},{args:null,kind:"FragmentSpread",name:"AppLauncherModalLegacyFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,l,n],kind:"Operation",name:"SessionDetailContentQuery",selections:[{alias:"session",args:a,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[s,i,t,r,o,d,u,c,m,{alias:null,args:null,concreteType:"VirtualFolderConnection",kind:"LinkedField",name:"vfolder_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"VirtualFolderEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"VirtualFolderNode",kind:"LinkedField",name:"node",plural:!1,selections:[i,t,s],storageKey:null}],storageKey:null},g],storageKey:null},p,y,h,v,k,f,{alias:null,args:null,kind:"ScalarField",name:"status_info",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},j,A,{alias:null,args:null,kind:"ScalarField",name:"commit_status",storageKey:null},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"agent_id",storageKey:null},s,i,{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"priority",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"starts_at",storageKey:null}],storageKey:null},{alias:"legacy_session",args:x,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[F,S,_,C,f,s,A,{alias:null,args:null,kind:"ScalarField",name:"session_id",storageKey:null},j],storageKey:null}]},params:{cacheID:"e71532958f6f296a82dc75c507b21afd",id:null,metadata:{},name:"SessionDetailContentQuery",operationKind:"query",text:'query SessionDetailContentQuery(\n  $id: GlobalIDField!\n  $uuid: UUID!\n  $project_id: UUID!\n) {\n  session: compute_session_node(id: $id, project_id: $project_id) {\n    id\n    row_id\n    name\n    project_id\n    user_id\n    resource_opts\n    status\n    status_data\n    vfolder_mounts\n    vfolder_nodes @since(version: "25.4.0") {\n      edges {\n        node {\n          ...FolderLink_vfolderNode\n          id\n        }\n      }\n      count\n    }\n    created_at\n    terminated_at\n    scaling_group\n    agent_ids\n    requested_slots\n    idle_checks @since(version: "24.12.0")\n    ...SessionStatusTagFragment\n    ...SessionActionButtonsFragment\n    ...SessionTypeTagFragment\n    ...EditableSessionNameFragment\n    ...SessionReservationFragment\n    ...ContainerLogModalFragment\n    ...SessionUsageMonitorFragment\n    ...ContainerCommitModalFragment\n    ...SessionIdleChecksNodeFragment\n    ...SessionStatusDetailModalFragment\n    ...AppLauncherModalFragment\n  }\n  legacy_session: compute_session(id: $uuid) {\n    image\n    mounts\n    user_email\n    architecture\n    idle_checks @since(version: "24.09.0")\n    ...SessionIdleChecksFragment\n    ...SessionActionButtonsLegacyFragment\n    ...AppLauncherModalLegacyFragment\n    id\n  }\n}\n\nfragment AppLauncherModalFragment on ComputeSessionNode {\n  id\n  row_id\n  service_ports\n  access_key\n}\n\nfragment AppLauncherModalLegacyFragment on ComputeSession {\n  id\n  session_id\n  service_ports\n  access_key\n}\n\nfragment ContainerCommitModalFragment on ComputeSessionNode {\n  id\n  name\n  row_id\n}\n\nfragment ContainerLogModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  status\n  access_key\n  kernel_nodes {\n    edges {\n      node {\n        id\n        row_id\n        container_id\n        cluster_idx\n        cluster_role\n      }\n    }\n  }\n}\n\nfragment EditableSessionNameFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  priority\n  user_id\n  status\n}\n\nfragment FolderLink_vfolderNode on VirtualFolderNode {\n  row_id\n  name\n}\n\nfragment SessionActionButtonsFragment on ComputeSessionNode {\n  id\n  row_id\n  type\n  status\n  access_key\n  service_ports\n  commit_status\n  user_id\n  ...TerminateSessionModalFragment\n  ...ContainerLogModalFragment\n  ...ContainerCommitModalFragment\n  ...AppLauncherModalFragment\n}\n\nfragment SessionActionButtonsLegacyFragment on ComputeSession {\n  id\n  service_ports\n  ...AppLauncherModalLegacyFragment\n}\n\nfragment SessionIdleChecksFragment on ComputeSession {\n  id\n  idle_checks @since(version: "24.09.0")\n}\n\nfragment SessionIdleChecksNodeFragment on ComputeSessionNode {\n  id\n  idle_checks @since(version: "24.12.0")\n}\n\nfragment SessionReservationFragment on ComputeSessionNode {\n  id\n  created_at\n  starts_at\n  terminated_at\n}\n\nfragment SessionStatusDetailModalFragment on ComputeSessionNode {\n  id\n  name\n  status\n  status_info\n  status_data\n  starts_at\n}\n\nfragment SessionStatusTagFragment on ComputeSessionNode {\n  id\n  status\n  status_info\n  status_data\n}\n\nfragment SessionTypeTagFragment on ComputeSessionNode {\n  type\n}\n\nfragment SessionUsageMonitorFragment on ComputeSessionNode {\n  kernel_nodes {\n    edges {\n      node {\n        live_stat\n        occupied_slots\n        id\n      }\n    }\n  }\n}\n\nfragment TerminateSessionModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  scaling_group\n  access_key\n  kernel_nodes {\n    edges {\n      node {\n        container_id\n        agent_id\n        id\n      }\n    }\n  }\n}\n'}}}();a.hash="8d51f2b43cd63c7bd6f9ed6fdac08e5c";const s=a},40648:(e,n,l)=>{l.d(n,{RM:()=>r,WN:()=>t});var a=l(64428),s=l.n(a);function i(e){return null===e||void 0===e?"":"number"===typeof e||"boolean"===typeof e?String(e):`"${(e=s().isString(e)?e:JSON.stringify(e)).replace(/"/g,'""')}"`}const t=(e,n)=>{const l=URL.createObjectURL(e),a=document.createElement("a");a.href=l,a.download=n,a.click(),URL.revokeObjectURL(l)},r=(e,n,l)=>{const a=((e,n)=>{const l=s().map(e,(e=>s().omit(e,"__fragments","__fragmentOwner","__id"))),a=s().keys(l[0]),t=s().map(l,(e=>s().map(e,((e,l)=>{var a;return null!==n&&void 0!==n&&n[l]&&(null===(a=n[l])||void 0===a?void 0:a.call(n,e))||e})))).map((e=>e.map(i).join(","))).join("\n");return[a.map(i).join(","),t].join("\n")})(e,l),r=new Blob([a],{type:"text/csv"});t(r,`${n}.csv`)}}}]);
//# sourceMappingURL=23.9a3c2756.chunk.js.map