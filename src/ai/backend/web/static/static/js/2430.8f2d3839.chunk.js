"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[2430],{42430:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var r=n(83468),l=n(34103),i=n(29871),s=n(34680),o=n(81638),a=n(83786),d=n(94519),c=n(97041),u=n(43336),g=n(63718),h=n(44355),p=n(50840),x=n(97080),y=n(63284),m=n(87627),j=n(6932),A=n(94120),k=n(41856),f=n(14455),w=n.n(f),v=n(45901),S=n.n(v),C=n(76998),b=n(77678),T=n(23446);const I=()=>{const{t:e}=(0,b.Bd)(),{token:t}=p.A.useToken(),[n,f]=(0,C.useState)(!1),[v,I]=(0,C.useState)(!1),[E,L]=(0,C.useState)(!1),[R,M]=(0,C.useState)(""),[q,U]=(0,r.Tw)("first"),[W,B]=(0,C.useTransition)(),[K,_]=(0,C.useTransition)(),[O,D]=(0,C.useTransition)();(0,r.CX)();const P=[{title:e("logs.TimeStamp"),dataIndex:"formattedTimeStamp",key:"timeStamp",render:e=>(0,T.jsx)("div",{style:{minWidth:50},children:S().isUndefined(e)?"-":(0,T.jsx)(o.A,{keyword:R,children:e})}),fixed:"left"},{title:e("logs.Status"),dataIndex:"statusCode",key:"status",render:(e,t)=>(0,T.jsx)("div",{style:{minWidth:50},children:S().isUndefined(e)?"-":(0,T.jsx)(o.A,{keyword:R,children:e+" "+t.statusText})})},{title:e("logs.ErrorTitle"),dataIndex:"title",key:"errorTitle",render:e=>(0,T.jsx)("div",{style:{minWidth:50},children:e?(0,T.jsx)(o.A,{keyword:R,children:S().toString(e)}):"-"})},{title:e("logs.ErrorMessage"),dataIndex:"message",key:"errorMessage",render:e=>(0,T.jsx)("div",{style:{minWidth:70},children:e?(0,T.jsx)(o.A,{keyword:R,children:e}):"-"})},{title:e("logs.ErrorType"),dataIndex:"type",key:"errorType",render:e=>(0,T.jsx)("div",{style:{minWidth:60},children:e?(0,T.jsx)(o.A,{keyword:R,children:e}):"-"})},{title:e("logs.Method"),dataIndex:"requestMethod",key:"method",render:e=>(0,T.jsx)("div",{style:{minWidth:60},children:e?(0,T.jsx)(o.A,{keyword:R,children:e}):"-"})},{title:e("logs.RequestUrl"),dataIndex:"requestUrl",key:"requestUrl",render:e=>(0,T.jsx)("div",{style:{minWidth:60},children:e?(0,T.jsx)(o.A,{keyword:R,children:e}):"-"})},{title:e("logs.Parameters"),dataIndex:"requestParameters",key:"requestParameter",render:e=>(0,T.jsx)("div",{style:{minWidth:100},children:e?(0,T.jsx)(o.A,{keyword:R,children:e}):"-"})}],[V,z]=(0,h.A)("backendaiwebui.ErrorLogList.displayedColumnKeys",{defaultValue:P.map((e=>S().toString(e.key)))}),F=(0,C.useMemo)((()=>{const e=JSON.parse(localStorage.getItem("backendaiwebui.logs")||"[]");return S().map(e,(e=>({...e,formattedTimeStamp:w()(e.timestamp).format("ll LTS")})))}),[q]),H=(0,C.useMemo)((()=>{if(S().isEmpty(R))return F;const e=new RegExp("".concat(S().escapeRegExp(R)),"i");return S().filter(F,(t=>S().some(t,((t,n)=>"timestamp"!==n&&e.test(S().toString(t))))))}),[R,F]);return(0,T.jsxs)(i.A,{direction:"column",align:"stretch",children:[(0,T.jsxs)(i.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:t.paddingContentVertical,paddingLeft:t.paddingContentHorizontalSM,paddingRight:t.paddingContentHorizontalSM},children:[(0,T.jsxs)(i.A,{direction:"column",align:"start",children:[(0,T.jsx)(x.A.Title,{level:4,style:{margin:0,padding:0},children:e("logs.LogMessages")}),(0,T.jsx)(x.A.Text,{type:"secondary",children:e("logs.UpTo3000Logs")})]}),(0,T.jsxs)(i.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:[(0,T.jsxs)(i.A,{gap:"xs",children:[(0,T.jsx)(y.A,{allowClear:!0,prefix:(0,T.jsx)(a.A,{}),placeholder:e("logs.SearchLogs"),onChange:e=>{_((()=>M(e.target.value)))},style:{width:200}}),(0,T.jsx)(m.A,{onChange:e=>L(e.target.checked),children:e("logs.ShowOnlyError")})]}),(0,T.jsxs)(i.A,{gap:"xs",children:[(0,T.jsx)(j.Ay,{icon:(0,T.jsx)(d.A,{}),loading:W,onClick:()=>{B((()=>U()))},children:e("button.Refresh")}),(0,T.jsx)(j.Ay,{danger:!0,icon:(0,T.jsx)(c.A,{}),onClick:()=>{f(!0)},children:e("button.ClearLogs")})]})]})]}),(0,T.jsx)(A.A,{pagination:{showSizeChanger:!1,style:{marginBottom:0}},loading:!!K&&{indicator:(0,T.jsx)(u.A,{})},scroll:{x:"max-content",y:"calc(100vh - 400px)"},dataSource:E?S().filter(H,(e=>e.isError)):H,columns:P.filter((e=>null===V||void 0===V?void 0:V.includes(S().toString(e.key)))),onRow:e=>({style:{color:e.isError?t.colorError:""}})}),(0,T.jsx)(i.A,{justify:"end",style:{paddingRight:t.paddingXS},children:(0,T.jsx)(j.Ay,{type:"text",icon:(0,T.jsx)(g.A,{}),onClick:()=>{I(!0)}})}),(0,T.jsx)(l.A,{open:n,title:e("dialog.warning.LogDeletion"),okText:e("button.Delete"),okButtonProps:{danger:!0},confirmLoading:O,onOk:()=>{D((()=>{localStorage.removeItem("backendaiwebui.logs"),U(),f(!1)}))},cancelText:e("button.Cancel"),onCancel:()=>f(!1),children:(0,T.jsx)(k.A,{message:e("dialog.warning.CannotBeUndone"),type:"warning"})}),(0,T.jsx)(s.A,{open:v,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&z(null===e||void 0===e?void 0:e.selectedColumnKeys),I(!1)},columns:P,displayedColumnKeys:V||[]})]})}},34680:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(34103),l=n(83786),i=n(50840),s=n(7121),o=n(63284),a=n(87627),d=n(45901),c=n.n(d),u=n(76998),g=n(77678),h=n(23446);const p=e=>{let{open:t,onRequestClose:n,columns:d,displayedColumnKeys:p,...x}=e;const y=(0,u.useRef)(null),{t:m}=(0,g.Bd)(),{token:j}=i.A.useToken(),A=d.map((e=>{return"string"===typeof e.title?{label:e.title,value:c().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(t=e.title,u.Children.map(t.props.children,(e=>{if("string"===typeof e)return e}))),value:c().toString(e.key)}:{label:void 0,value:c().toString(e.key)};var t}));return(0,h.jsx)(r.A,{title:m("table.SettingTable"),open:t,destroyOnClose:!0,centered:!0,onOk:()=>{var e;null===(e=y.current)||void 0===e||e.validateFields().then((e=>{n(e)})).catch((()=>{}))},onCancel:()=>{n()},...x,children:(0,h.jsxs)(s.A,{ref:y,preserve:!1,initialValues:{selectedColumnKeys:p||A.map((e=>e.value))},layout:"vertical",children:[(0,h.jsx)(s.A.Item,{name:"searchInput",label:m("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,h.jsx)(o.A,{prefix:(0,h.jsx)(l.A,{}),style:{marginBottom:j.marginSM},placeholder:m("table.SearchTableColumn")})}),(0,h.jsx)(s.A.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.searchInput!==t.searchInput,children:e=>{let{getFieldValue:t}=e;const n=t("searchInput")?c().toLower(t("searchInput")):void 0,r=A.map((e=>c().toLower(c().toString(e.label)).includes(n||"")?e:{...e,style:{display:"none"}}));return(0,h.jsx)(s.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},children:(0,h.jsx)(a.A.Group,{options:r,style:{flexDirection:"column"}})})}})]})})}},83786:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(58168),l=n(76998),i=n(70253),s=n(13410),o=function(e,t){return l.createElement(s.A,(0,r.A)({},e,{ref:t,icon:i.A}))};const a=l.forwardRef(o)}}]);
//# sourceMappingURL=2430.8f2d3839.chunk.js.map