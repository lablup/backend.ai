"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[7045],{10546:(e,t,n)=>{n.d(t,{A:()=>x});var r=n(7194),l=n(89130),o=n(23672),a=n(54880),i=n(50868),c=n(45296),u=n(69056),s=n(86047),p=n(67378),f=n(15934),d=n(33789),y=n(60822),v=n(89608),h=n.n(v),m=n(43373),b=n(56762),g=n(73689);const C={string:"ilike",boolean:"=="},k={boolean:[{label:"True",value:"true"},{label:"False",value:"false"}],string:void 0};const x=e=>{let{filterProperties:t,value:n,onChange:v,defaultValue:x,loading:A,...S}=e;const[j,w]=(0,r.A)({}),O=(0,m.useRef)(null),[E,I]=(0,m.useState)(!1),[z,L]=(0,r.A)({value:n,defaultValue:x,onChange:v}),_=(0,m.useMemo)((()=>{if(void 0===z)return[];return z.split("&").map((e=>e.trim())).map((e=>{var n,r;const{property:l,operator:o,value:a}=function(e){const[t,...n]=e.split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)/),[r,...l]=n.join(" ").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)/);return{property:t,operator:r,value:l.join(" ").replace(/^"|"$/g,"")}}(e);return{property:l,operator:o,value:a,propertyLabel:(null===(n=h().find(t,(e=>e.key===l)))||void 0===n?void 0:n.propertyLabel)||l,type:(null===(r=h().find(t,(e=>e.key===l)))||void 0===r?void 0:r.type)||"string"}}))}),[z,t]),{t:$}=(0,b.Bd)(),R=h().map(t,(e=>({label:e.propertyLabel,value:e.key,filter:e}))),[T,F]=(0,m.useState)(R[0].filter),{list:N,remove:B,push:P,resetList:V,getKey:X}=(0,a.A)(_),{token:D}=i.A.useToken();(0,m.useEffect)((()=>{0===N.length?L(void 0):L(h().map(N,(e=>{const t="string"===e.type?`"${e.value}"`:e.value;return`${e.property} ${e.operator} ${t}`})).join(" & "))}),[N,L]);const K=e=>{var t,n;if(h().isEmpty(e))return;w("");const r=T.defaultOperator||C[T.type],l="ilike"===r||"like"===r?`%${e}%`:`${e}`;P({property:T.key,propertyLabel:T.propertyLabel,operator:r,value:l,label:null===(t=T.options)||void 0===t||null===(n=t.find((t=>t.value===e)))||void 0===n?void 0:n.label,type:T.type})};return(0,g.jsxs)(l.A,{direction:"column",gap:"xs",style:{flex:1},align:"start",children:[(0,g.jsxs)(c.A.Compact,{children:[(0,g.jsx)(u.A,{popupMatchSelectWidth:!1,options:R,value:T.key,onChange:(e,t)=>{F(h().castArray(t)[0].filter)},onSelect:()=>{var e;null===(e=O.current)||void 0===e||e.focus(),I(!0)},showSearch:!0,optionFilterProp:"label"}),(0,g.jsx)(s.A,{ref:O,value:j,open:E,onDropdownVisibleChange:I,onSelect:K,onChange:e=>{w(e)},style:{minWidth:200},options:h().filter(T.options||k[T.type],(e=>{var t;return!!h().isEmpty(j)||(null===(t=e.label)||void 0===t?void 0:t.toString().includes(j))})),placeholder:$("propertyFilter.placeHolder"),children:(0,g.jsx)(p.A.Search,{onSearch:K,allowClear:!0})})]}),N.length>0&&(0,g.jsxs)(l.A,{direction:"row",gap:"xs",wrap:"wrap",style:{alignSelf:"stretch"},children:[h().map(N,((e,t)=>{return(0,g.jsxs)(f.A,{closable:!0,onClose:()=>{B(t)},style:{margin:0},children:[e.propertyLabel,":"," ",e.label||(n=e.value,n.replace(/^%|%$/g,""))]},X(t));var n})),N.length>1&&(0,g.jsx)(d.A,{title:$("propertyFilter.ResetFilter"),children:(0,g.jsx)(y.Ay,{size:"small",icon:(0,g.jsx)(o.A,{style:{color:D.colorTextSecondary}}),type:"text",onClick:()=>{V([])}})})]})]})}},30957:(e,t,n)=>{n.d(t,{A:()=>y});var r=n(94126),l=n(1499),o=n(50868),a=n(23702),i=n(67378),c=n(9833),u=n(89608),s=n.n(u),p=n(43373),f=n(56762),d=n(73689);const y=e=>{let{open:t,onRequestClose:n,columns:u,displayedColumnKeys:y,...v}=e;const h=(0,p.useRef)(null),{t:m}=(0,f.Bd)(),{token:b}=o.A.useToken(),g=u.map((e=>{return"string"===typeof e.title?{label:e.title,value:s().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(t=e.title,p.Children.map(t.props.children,(e=>{if("string"===typeof e)return e}))),value:s().toString(e.key)}:{label:void 0,value:s().toString(e.key)};var t}));return(0,d.jsx)(r.A,{title:m("table.SettingTable"),open:t,destroyOnClose:!0,centered:!0,onOk:()=>{var e;null===(e=h.current)||void 0===e||e.validateFields().then((e=>{n(e)})).catch((()=>{}))},onCancel:()=>{n()},...v,children:(0,d.jsxs)(a.A,{ref:h,preserve:!1,initialValues:{selectedColumnKeys:y||g.map((e=>e.value))},layout:"vertical",children:[(0,d.jsx)(a.A.Item,{name:"searchInput",label:m("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,d.jsx)(i.A,{prefix:(0,d.jsx)(l.A,{}),style:{marginBottom:b.marginSM},placeholder:m("table.SearchTableColumn")})}),(0,d.jsx)(a.A.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.searchInput!==t.searchInput,children:e=>{let{getFieldValue:t}=e;const n=t("searchInput")?s().toLower(t("searchInput")):void 0,r=g.map((e=>s().toLower(s().toString(e.label)).includes(n||"")?e:{...e,style:{display:"none"}}));return(0,d.jsx)(a.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},children:(0,d.jsx)(c.A.Group,{options:r,style:{flexDirection:"column"}})})}})]})})}},16522:(e,t,n)=>{n.d(t,{w4:()=>a});var r=n(89608),l=n.n(r),o=n(43373);n(88522),n(12121);const a=e=>{const[t,n]=(0,o.useState)(e);return{baiPaginationOption:{limit:t.pageSize,offset:t.current>1?(t.current-1)*t.pageSize:0},tablePaginationOption:{pageSize:t.pageSize,current:t.current},setTablePaginationOption:e=>{l().isEqual(e,t)||n((t=>({...t,...e})))}}}},54880:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(81949),l=n(43373),o=n(77418);const a=function(e){void 0===e&&(e=[]);var t=(0,l.useRef)(-1),n=(0,l.useRef)([]),a=(0,l.useCallback)((function(e){t.current+=1,n.current.splice(e,0,t.current)}),[]),i=(0,r.zs)((0,l.useState)((function(){return e.forEach((function(e,t){a(t)})),e})),2),c=i[0],u=i[1],s=(0,l.useCallback)((function(e){n.current=[],u((function(){return e.forEach((function(e,t){a(t)})),e}))}),[]),p=(0,l.useCallback)((function(e,t){u((function(n){var l=(0,r.fX)([],(0,r.zs)(n),!1);return l.splice(e,0,t),a(e),l}))}),[]),f=(0,l.useCallback)((function(e){return n.current[e]}),[]),d=(0,l.useCallback)((function(e){return n.current.findIndex((function(t){return t===e}))}),[]),y=(0,l.useCallback)((function(e,t){u((function(n){var l=(0,r.fX)([],(0,r.zs)(n),!1);return t.forEach((function(t,n){a(e+n)})),l.splice.apply(l,(0,r.fX)([e,0],(0,r.zs)(t),!1)),l}))}),[]),v=(0,l.useCallback)((function(e,t){u((function(n){var l=(0,r.fX)([],(0,r.zs)(n),!1);return l[e]=t,l}))}),[]),h=(0,l.useCallback)((function(e){u((function(t){var l=(0,r.fX)([],(0,r.zs)(t),!1);l.splice(e,1);try{n.current.splice(e,1)}catch(o){console.error(o)}return l}))}),[]),m=(0,l.useCallback)((function(e){Array.isArray(e)?e.length&&u((function(t){var r=[],l=t.filter((function(t,n){var l=!e.includes(n);return l&&r.push(f(n)),l}));return n.current=r,l})):o.A&&console.error('`indexes` parameter of `batchRemove` function expected to be an array, but got "'.concat(typeof e,'".'))}),[]),b=(0,l.useCallback)((function(e,t){e!==t&&u((function(l){var o=(0,r.fX)([],(0,r.zs)(l),!1),a=o.filter((function(t,n){return n!==e}));a.splice(t,0,o[e]);try{var i=n.current.filter((function(t,n){return n!==e}));i.splice(t,0,n.current[e]),n.current=i}catch(c){console.error(c)}return a}))}),[]),g=(0,l.useCallback)((function(e){u((function(t){return a(t.length),t.concat([e])}))}),[]),C=(0,l.useCallback)((function(){try{n.current=n.current.slice(0,n.current.length-1)}catch(e){console.error(e)}u((function(e){return e.slice(0,e.length-1)}))}),[]),k=(0,l.useCallback)((function(e){u((function(t){return a(0),[e].concat(t)}))}),[]),x=(0,l.useCallback)((function(){try{n.current=n.current.slice(1,n.current.length)}catch(e){console.error(e)}u((function(e){return e.slice(1,e.length)}))}),[]),A=(0,l.useCallback)((function(e){return e.map((function(e,t){return{key:t,item:e}})).sort((function(e,t){return d(e.key)-d(t.key)})).filter((function(e){return!!e.item})).map((function(e){return e.item}))}),[]);return{list:c,insert:p,merge:y,replace:v,remove:h,batchRemove:m,getKey:f,getIndex:d,move:b,push:g,pop:C,unshift:k,shift:x,sortList:A,resetList:s}}},86047:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(43373),l=n(13001),o=n.n(l),a=n(92510),i=n(76633),c=n(45909),u=n(39067),s=n(67085),p=n(69056);const{Option:f}=p.A;function d(e){return(null===e||void 0===e?void 0:e.type)&&(e.type.isSelectOption||e.type.isSelectOptGroup)}const y=(e,t)=>{var n;const{prefixCls:l,className:u,popupClassName:y,dropdownClassName:v,children:h,dataSource:m}=e,b=(0,a.A)(h);let g;1===b.length&&r.isValidElement(b[0])&&!d(b[0])&&([g]=b);const C=g?()=>g:void 0;let k;k=b.length&&d(b[0])?h:m?m.map((e=>{if(r.isValidElement(e))return e;switch(typeof e){case"string":return r.createElement(f,{key:e,value:e},e);case"object":{const{value:t}=e;return r.createElement(f,{key:t,value:t},e.text)}default:return}})):[];const{getPrefixCls:x}=r.useContext(s.QO),A=x("select",l),[S]=(0,c.YK)("SelectLike",null===(n=e.dropdownStyle)||void 0===n?void 0:n.zIndex);return r.createElement(p.A,Object.assign({ref:t,suffixIcon:null},(0,i.A)(e,["dataSource","dropdownClassName"]),{prefixCls:A,popupClassName:y||v,dropdownStyle:Object.assign(Object.assign({},e.dropdownStyle),{zIndex:S}),className:o()(`${A}-auto-complete`,u),mode:p.A.SECRET_COMBOBOX_MODE_DO_NOT_USE,getInputElement:C}),k)},v=r.forwardRef(y),h=(0,u.A)(v);v.Option=f,v._InternalPanelDoNotUseOrYouWillBeFired=h;const m=v}}]);
//# sourceMappingURL=7045.edc85065.chunk.js.map