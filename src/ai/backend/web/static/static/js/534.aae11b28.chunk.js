/*! For license information please see 534.aae11b28.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[534],{22848(e,n,a){a.d(n,{A:()=>l});const l=(0,a(35637).A)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},28795(e,n,a){a.d(n,{A:()=>l});const l=(0,a(35637).A)("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]])},60534(e,n,a){a.r(n),a.d(n,{default:()=>he});var l=a(31160);const r=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteScalingGroup",kind:"LinkedField",name:"delete_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupListDeleteMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupListDeleteMutation",selections:n},params:{cacheID:"fdcd5026b9668171b8d52998b2c16c6d",id:null,metadata:{},name:"ResourceGroupListDeleteMutation",operationKind:"mutation",text:"mutation ResourceGroupListDeleteMutation(\n  $name: String!\n) {\n  delete_scaling_group(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();r.hash="40de35d5afd64c8d906e4970b10b722d";const i=r,o=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},n={defaultValue:null,kind:"LocalArgument",name:"name"},a=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"ModifyScalingGroup",kind:"LinkedField",name:"modify_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ResourceGroupListUpdateMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ResourceGroupListUpdateMutation",selections:a},params:{cacheID:"f2bb803220bb606aab5576ae85eed3c3",id:null,metadata:{},name:"ResourceGroupListUpdateMutation",operationKind:"mutation",text:"mutation ResourceGroupListUpdateMutation(\n  $name: String!\n  $input: ModifyScalingGroupInput!\n) {\n  modify_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="ac249dff8b2c9b629edb2ca40843c134";const t=o,s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"is_active"}],n=[{kind:"Variable",name:"is_active",variableName:"is_active"}],a={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"driver",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupListQuery",selections:[{alias:null,args:n,concreteType:"ScalingGroup",kind:"LinkedField",name:"scaling_groups",plural:!0,selections:[a,l,r,i,o,t,s,{args:null,kind:"FragmentSpread",name:"ResourceGroupInfoModalFragment"},{args:null,kind:"FragmentSpread",name:"ResourceGroupSettingModalFragment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupListQuery",selections:[{alias:null,args:n,concreteType:"ScalingGroup",kind:"LinkedField",name:"scaling_groups",plural:!0,selections:[a,l,r,i,o,t,s,{alias:null,args:null,kind:"ScalarField",name:"driver_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wsproxy_api_token",storageKey:null}],storageKey:null}]},params:{cacheID:"4f827b0e615ed9ed75e172a457fa86b2",id:null,metadata:{},name:"ResourceGroupListQuery",operationKind:"query",text:"query ResourceGroupListQuery(\n  $is_active: Boolean\n) {\n  scaling_groups(is_active: $is_active) {\n    name\n    description\n    is_active\n    is_public\n    driver\n    scheduler\n    wsproxy_addr\n    ...ResourceGroupInfoModalFragment\n    ...ResourceGroupSettingModalFragment\n  }\n}\n\nfragment ResourceGroupInfoModalFragment on ScalingGroup {\n  name\n  description\n  is_active\n  is_public\n  driver\n  driver_opts\n  scheduler\n  scheduler_opts\n  wsproxy_addr\n}\n\nfragment ResourceGroupSettingModalFragment on ScalingGroup {\n  name\n  description\n  is_active\n  is_public\n  wsproxy_addr\n  wsproxy_api_token\n  scheduler\n  scheduler_opts\n}\n"}}}();s.hash="73ad50968ae420ea2cd912e9fa046cf8";const u=s;var c=a(53045),d=a(56276),m=a(11863);const p={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ResourceGroupInfoModalFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"driver",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"driver_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null}],type:"ScalingGroup",abstractKey:null,hash:"32b9c1a86a13b37cf5abb7e88f1cd969"},g=p;var y=a(80229),v=a(36425),x=a(7749),k=a(54086),h=a(2616),b=a(68632),f=a(96337),_=a(47476),S=a.n(_),A=a(32397),j=a(94109),G=a(19869),F=a(33337);const w=["resourceGroupFrgmt","onRequestClose"],K=e=>{var n,a;let{resourceGroupFrgmt:l=null,onRequestClose:r}=e,i=(0,m.A)(e,w);const{t:o}=(0,j.Bd)(),{token:t}=x.A.useToken(),s=(0,G.useFragment)(g,l),u=(0,A.useMemo)((()=>JSON.parse((null===s||void 0===s?void 0:s.driver_opts)||"{}")),[null===s||void 0===s?void 0:s.driver_opts]),c=(0,A.useMemo)((()=>JSON.parse((null===s||void 0===s?void 0:s.scheduler_opts)||"{}")),[null===s||void 0===s?void 0:s.scheduler_opts]);return(0,F.jsxs)(f.IbE,(0,d.A)((0,d.A)({title:o("resourceGroup.ResourceGroupDetail"),onCancel:r,footer:null,centered:!0},i),{},{children:[(0,F.jsxs)(k.A,{column:1,size:"small",title:o("resourceGroup.Information"),labelStyle:{width:"50%"},children:[(0,F.jsx)(k.A.Item,{label:o("resourceGroup.Name"),children:null===s||void 0===s?void 0:s.name}),(0,F.jsx)(k.A.Item,{label:o("resourceGroup.Description"),children:(null===s||void 0===s?void 0:s.description)||"-"}),(0,F.jsx)(k.A.Item,{label:o("resourceGroup.Active"),children:null!==s&&void 0!==s&&s.is_active?(0,F.jsx)(y.A,{style:{color:t.colorSuccess}}):(0,F.jsx)(v.A,{style:{color:t.colorTextSecondary}})}),(0,F.jsx)(k.A.Item,{label:o("resourceGroup.Public"),children:null!==s&&void 0!==s&&s.is_public?(0,F.jsx)(y.A,{style:{color:t.colorSuccess}}):(0,F.jsx)(v.A,{style:{color:t.colorTextSecondary}})}),(0,F.jsx)(k.A.Item,{label:o("resourceGroup.Driver"),children:null===s||void 0===s?void 0:s.driver}),(0,F.jsx)(k.A.Item,{label:o("resourceGroup.Scheduler"),children:S().toUpper(null!==(n=null===s||void 0===s?void 0:s.scheduler)&&void 0!==n?n:"")}),(0,F.jsx)(k.A.Item,{label:o("resourceGroup.WsproxyAddress"),children:(null===s||void 0===s?void 0:s.wsproxy_addr)||"-"})]}),(0,F.jsx)("br",{}),(0,F.jsxs)(k.A,{column:1,size:"small",title:o("resourceGroup.SchedulerOptions"),labelStyle:{width:"50%"},children:[(0,F.jsx)(k.A.Item,{label:o("resourceGroup.AllowedSessionTypes"),children:(0,F.jsx)(f.OOm,{wrap:"wrap",direction:"row",gap:"xs",style:{width:"100%"},children:S().map(null===c||void 0===c?void 0:c.allowed_session_types,(e=>(0,F.jsx)(h.A,{style:{margin:0},children:S().startCase(e)},e)))})}),(0,F.jsx)(k.A.Item,{label:o("resourceGroup.PendingTimeout"),children:S().isNil(null===c||void 0===c?void 0:c.pending_timeout)?"-":(0,F.jsxs)(f.OOm,{gap:"xxs",align:"end",children:[(0,F.jsx)(b.A.Text,{children:"".concat(c.pending_timeout,"\n                ").concat(o("resourceGroup.TimeoutSeconds"))}),null!==c&&void 0!==c&&c.pending_timeout?null:(0,F.jsx)(b.A.Text,{style:{color:t.colorTextSecondary,fontSize:t.fontSizeSM},children:"(".concat(o("general.Disabled"),")")})]})}),(0,F.jsx)(k.A.Item,{label:o("resourceGroup.RetriesToSkipDesc"),children:null!==c&&void 0!==c&&null!==(a=c.config)&&void 0!==a&&a.num_retries_to_skip?"".concat(c.config.num_retries_to_skip," ").concat(o("resourceGroup.RetriesToSkip")):"-"})]}),S().isEmpty(u)?null:(0,F.jsx)(k.A,{column:1,size:"small",title:o("resourceGroup.DriverOptions"),labelStyle:{width:"50%"},children:S().map(u,((e,n)=>(0,F.jsx)(k.A.Item,{label:S().startCase(n),children:S().isArray(e)?(0,F.jsx)(f.OOm,{direction:"column",children:S().map(e,(e=>(0,F.jsx)(h.A,{children:e},e)))}):e},n)))})]}))},R=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"domain"},{defaultValue:null,kind:"LocalArgument",name:"scaling_group"}],n=[{alias:null,args:[{kind:"Variable",name:"domain",variableName:"domain"},{kind:"Variable",name:"scaling_group",variableName:"scaling_group"}],concreteType:"AssociateScalingGroupWithDomain",kind:"LinkedField",name:"associate_scaling_group_with_domain",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalAssociateDomainMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupSettingModalAssociateDomainMutation",selections:n},params:{cacheID:"72535173512804feacec89a7cabb4ac3",id:null,metadata:{},name:"ResourceGroupSettingModalAssociateDomainMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalAssociateDomainMutation(\n  $domain: String!\n  $scaling_group: String!\n) {\n  associate_scaling_group_with_domain(domain: $domain, scaling_group: $scaling_group) {\n    ok\n    msg\n  }\n}\n"}}}();R.hash="a1253f2e15bdfc1e59cdf2b26bc0a273";const T=R,I=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},n={defaultValue:null,kind:"LocalArgument",name:"name"},a=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"CreateScalingGroup",kind:"LinkedField",name:"create_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalCreateMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ResourceGroupSettingModalCreateMutation",selections:a},params:{cacheID:"6d6716d2dedf664e623006a2315b3c66",id:null,metadata:{},name:"ResourceGroupSettingModalCreateMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalCreateMutation(\n  $name: String!\n  $input: CreateScalingGroupInput!\n) {\n  create_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();I.hash="8642e40e794eaf1f4b0a84e05104d75c";const M=I,D=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},n={defaultValue:null,kind:"LocalArgument",name:"name"},a=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"ModifyScalingGroup",kind:"LinkedField",name:"modify_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalUpdateMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ResourceGroupSettingModalUpdateMutation",selections:a},params:{cacheID:"2352dc03b1acef2df9cf7c5f686665a3",id:null,metadata:{},name:"ResourceGroupSettingModalUpdateMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalUpdateMutation(\n  $name: String!\n  $input: ModifyScalingGroupInput!\n) {\n  modify_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();D.hash="510c22b428b17c9e16efd58a5f908c3d";const O=D,L={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wsproxy_api_token",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null}],type:"ScalingGroup",abstractKey:null,hash:"0ab802477d12e3999d4ed89849da6631"},C=L;var V=a(48648),N=a(18249),q=a(32128),P=a(81262),z=a(63745),$=a(22722),E=a(85895),Q=a(71489),B=a(89325),U=a(23755),J=a(21986),Z=a(94668),W=a(88957);const X=["resourceGroupFrgmt","onRequestClose"],H=e=>{var n,a,l,r,i,o;let{resourceGroupFrgmt:t,onRequestClose:s}=e,u=(0,m.A)(e,X);const{t:c}=(0,j.Bd)(),{token:p}=x.A.useToken(),{message:g}=P.A.useApp(),y=(0,N.eZ)(),v=(0,A.useRef)(null),k=(0,G.useFragment)(C,t),[h,b]=(0,G.useMutation)(O),[_,w]=(0,G.useMutation)(M),[K,R]=(0,G.useMutation)(T),I=(0,A.useMemo)((()=>JSON.parse((null===k||void 0===k?void 0:k.scheduler_opts)||"{}")),[null===k||void 0===k?void 0:k.scheduler_opts]),D=(0,f.N7u)({name:null===k||void 0===k?void 0:k.name,description:null===k||void 0===k?void 0:k.description,domain:y,scheduler:null!==(n=null===k||void 0===k?void 0:k.scheduler)&&void 0!==n?n:"fifo",allowedSessionTypes:null!==(a=null===I||void 0===I?void 0:I.allowed_session_types)&&void 0!==a?a:["batch","interactive"],active:null===(l=null===k||void 0===k?void 0:k.is_active)||void 0===l||l,public:null===(r=null===k||void 0===k?void 0:k.is_public)||void 0===r||r,pendingTimeout:null!==I&&void 0!==I&&I.pending_timeout?S().toNumber(null===I||void 0===I?void 0:I.pending_timeout):null,retriesToSkip:null!==I&&void 0!==I&&null!==(i=I.config)&&void 0!==i&&i.num_retries_to_skip?S().toNumber(null===I||void 0===I||null===(o=I.config)||void 0===o?void 0:o.num_retries_to_skip):null,wsProxyAddress:null===k||void 0===k?void 0:k.wsproxy_addr,wsProxyAPIToken:null===k||void 0===k?void 0:k.wsproxy_api_token});return(0,F.jsx)(f.IbE,(0,d.A)((0,d.A)({destroyOnHidden:!0,title:c(k?"resourceGroup.ModifyResourceGroup":"resourceGroup.CreateResourceGroup"),onCancel:()=>{null===s||void 0===s||s(!1)},okText:c(k?"button.Update":"button.Create"),okButtonProps:{loading:w||R||b},onOk:()=>{var e;null===(e=v.current)||void 0===e||e.validateFields().then((e=>{var n;const a={driver:"static",scheduler:e.scheduler,description:null!==(n=e.description)&&void 0!==n?n:null,driver_opts:"{}",scheduler_opts:JSON.stringify((0,d.A)((0,d.A)({allowed_session_types:e.allowedSessionTypes},e.pendingTimeout&&{pending_timeout:e.pendingTimeout}),e.retriesToSkip&&{config:{num_retries_to_skip:e.retriesToSkip}})),is_public:e.public,is_active:e.active,wsproxy_addr:e.wsProxyAddress,wsproxy_api_token:e.wsProxyAPIToken};k?h({variables:{name:k.name,input:a},onCompleted:(e,n)=>{let{modify_scaling_group:a}=e;if(null!==a&&void 0!==a&&a.ok)if(n&&n.length>0){const e=S().map(n,(e=>e.message));for(const n of e)g.error(n)}else g.success(c("resourceGroup.ResourceGroupModified")),null===s||void 0===s||s(!0);else g.error(null===a||void 0===a?void 0:a.msg)},onError:e=>{g.error(e.message)}}):_({variables:{name:e.name,input:a},onCompleted:(n,a)=>{let{create_scaling_group:l}=n;if(a&&a.length>0){const e=S().map(a,(e=>e.message));for(const n of e)g.error(n)}else null!==l&&void 0!==l&&l.ok?K({variables:{domain:e.domain,scaling_group:e.name},onCompleted:(e,n)=>{let{associate_scaling_group_with_domain:a}=e;if(null!==a&&void 0!==a&&a.ok)if(n&&n.length>0){const e=S().map(n,(e=>e.message));for(const n of e)g.error(n)}else g.success(c("resourceGroup.ResourceGroupCreated")),null===s||void 0===s||s(!0);else g.error(null===a||void 0===a?void 0:a.msg)},onError:e=>{g.error(e.message)}}):g.error(null===l||void 0===l?void 0:l.msg)},onError:e=>{g.error(e.message)}})})).catch((()=>{}))}},u),{},{children:(0,F.jsx)(A.Suspense,{fallback:(0,F.jsx)(z.A,{active:!0}),children:(0,F.jsxs)($.A,{ref:v,initialValues:D,layout:"vertical",children:[(0,F.jsx)($.A.Item,{label:c("resourceGroup.Name"),name:"name",rules:[{required:!0,message:c("general.ValueRequired",{name:c("resourceGroup.Name")})}],children:(0,F.jsx)(E.A,{disabled:!!k})}),k?null:(0,F.jsx)($.A.Item,{label:c("resourceGroup.Domain"),name:"domain",rules:[{required:!0,message:c("general.ValueRequired",{name:c("resourceGroup.Domain")})}],children:(0,F.jsx)(f.dbm,{})}),(0,F.jsx)($.A.Item,{label:c("resourceGroup.Description"),name:"description",children:(0,F.jsx)(E.A.TextArea,{})}),(0,F.jsx)($.A.Item,{label:c("resourceGroup.AllowedSessionTypes"),name:"allowedSessionTypes",rules:[{required:!0,message:c("general.ValueRequired",{name:c("resourceGroup.AllowedSessionTypes")})}],children:(0,F.jsx)(Q.A,{mode:"multiple",options:[{label:"Batch",value:"batch"},{label:"Interactive",value:"interactive"},{label:"Inference",value:"inference"},{label:"System",value:"system"}]})}),(0,F.jsx)($.A.Item,{label:c("resourceGroup.WsproxyAddress"),name:"wsProxyAddress",rules:[{type:"url",message:c("error.InvalidUrl")}],children:(0,F.jsx)(E.A,{placeholder:"http://localhost:10200"})}),(0,F.jsx)($.A.Item,{label:c("resourceGroup.WsproxyAPIToken"),name:"wsProxyAPIToken",children:(0,F.jsx)(E.A.Password,{placeholder:c("resourceGroup.EnterAPIToken")})}),(0,F.jsxs)(B.A,{children:[(0,F.jsx)(U.A,{span:12,children:(0,F.jsx)($.A.Item,{layout:"horizontal",label:c("resourceGroup.Active"),name:"active",children:(0,F.jsx)(J.A,{})})}),(0,F.jsx)(U.A,{span:12,children:(0,F.jsx)($.A.Item,{layout:"horizontal",label:c("resourceGroup.Public"),name:"public",children:(0,F.jsx)(J.A,{})})})]}),(0,F.jsx)($.A.Item,{label:c("resourceGroup.Scheduler"),name:"scheduler",rules:[{required:!0,message:c("general.ValueRequired",{name:c("resourceGroup.Scheduler")})}],children:(0,F.jsx)(Q.A,{options:[{label:"FIFO",value:"fifo"},{label:"LIFO",value:"lifo"},{label:"DRF",value:"drf"},{label:"Fair Share",value:"fair-share"}]})}),(0,F.jsx)($.A.Item,{label:c("resourceGroup.SchedulerOptions"),children:(0,F.jsxs)(f.Zuv,{styles:{body:{paddingBottom:0}},children:[(0,F.jsx)($.A.Item,{label:(0,F.jsxs)(f.OOm,{gap:"xxs",children:[c("resourceGroup.PendingTimeout"),(0,F.jsx)(Z.A,{title:(0,V.y1)(c("resourceGroup.PendingTimeoutDesc")),children:(0,F.jsx)(q.A,{style:{color:p.colorTextSecondary}})})]}),name:"pendingTimeout",children:(0,F.jsx)(W.A,{style:{width:"100%"},suffix:c("resourceGroup.TimeoutSeconds"),min:0})}),(0,F.jsx)($.A.Item,{label:(0,F.jsx)(f.OOm,{style:{whiteSpace:"pre"},children:c("resourceGroup.RetriesToSkipDesc")}),name:"retriesToSkip",children:(0,F.jsx)(W.A,{style:{width:"100%"},suffix:c("resourceGroup.RetriesToSkip"),min:0})})]})})]})})}))};var Y=a(88621),ee=a(90700),ne=a(95394),ae=a(65200),le=a(70975),re=a(21843),ie=a(10036),oe=a(60594),te=a(22848),se=a(28795);const ue=()=>{const{t:e}=(0,j.Bd)(),{token:n}=x.A.useToken(),{message:a}=P.A.useApp(),[l,r]=(0,A.useState)("active"),[o,{toggle:s}]=(0,le.A)(!1),[d,{toggle:m}]=(0,le.A)(!1),[p,g]=(0,A.useState)(),[k,h]=(0,A.useState)(),[_,w]=(0,f.TwB)("first"),[R,T]=(0,A.useTransition)(),[I,M]=(0,A.useTransition)(),{scaling_groups:D}=(0,G.useLazyLoadQuery)(u,{is_active:"active"===l},{fetchPolicy:"store-and-network",fetchKey:_}),[O,L]=(0,G.useMutation)(t),[C,V]=(0,G.useMutation)(i),N=(0,f.YM3)([{key:"name",title:e("resourceGroup.Name"),dataIndex:"name"},{key:"description",title:e("resourceGroup.Description"),dataIndex:"description",render:e=>e||"-"},{key:"is_public",title:e("resourceGroup.Public"),dataIndex:"is_public",render:e=>e?(0,F.jsx)(y.A,{style:{color:n.colorSuccess}}):(0,F.jsx)(v.A,{style:{color:n.colorTextSecondary}})},{key:"driver",title:e("resourceGroup.Driver"),dataIndex:"driver"},{key:"scheduler",title:e("resourceGroup.Scheduler"),dataIndex:"scheduler",render:e=>S().toUpper(e)},{key:"wsproxy_addr",title:e("resourceGroup.WsproxyAddress"),dataIndex:"wsproxy_addr",render:e=>e||"-"},{key:"controls",title:e("general.Control"),fixed:"right",render:(l,r)=>(0,F.jsxs)(f.OOm,{children:[(0,F.jsx)(re.Ay,{type:"text",icon:(0,F.jsx)(Y.A,{}),style:{color:n.colorSuccess},onClick:()=>{g(r),m()}}),(0,F.jsx)(re.Ay,{type:"text",icon:(0,F.jsx)(ee.A,{}),style:{color:n.colorInfo},onClick:()=>{g(r),s()}}),(0,F.jsx)(Z.A,{title:r.is_active?e("resourceGroup.Deactivate"):e("resourceGroup.Activate"),children:(0,F.jsx)(ie.A,{title:r.is_active?e("resourceGroup.DeactivateResourceGroup"):e("resourceGroup.ActivateResourceGroup"),placement:"left",okType:r.is_active?"danger":"primary",okText:r.is_active?e("resourceGroup.Deactivate"):e("resourceGroup.Activate"),description:null===r||void 0===r?void 0:r.name,onConfirm:()=>{var n;O({variables:{name:null!==(n=r.name)&&void 0!==n?n:"",input:{is_active:!r.is_active}},onCompleted:(n,r)=>{let{modify_scaling_group:i}=n;if(null!==i&&void 0!==i&&i.ok)if(r&&r.length>0){const e=l.map(r,(e=>e.message));for(const n of e)a.error(n)}else a.success(e("resourceGroup.ResourceGroupModified")),M((()=>{w()}));else a.error(null===i||void 0===i?void 0:i.msg)},onError:e=>{a.error(e.message)}})},children:(0,F.jsx)(re.Ay,{type:"text",danger:!!r.is_active,icon:r.is_active?(0,F.jsx)(te.A,{}):(0,F.jsx)(se.A,{}),loading:L})})}),(0,F.jsx)(Z.A,{title:e("button.Delete"),children:(0,F.jsx)(re.Ay,{type:"text",icon:(0,F.jsx)(ne.A,{style:{color:n.colorError}}),onClick:()=>{h((null===r||void 0===r?void 0:r.name)||"")}})})]})}]);return(0,F.jsxs)(f.OOm,{direction:"column",align:"stretch",gap:"sm",children:[(0,F.jsxs)(f.OOm,{justify:"between",children:[(0,F.jsx)(c.A,{value:l,onChange:e=>{T((()=>{r(e.target.value)}))},optionType:"button",options:[{label:e("general.Active"),value:"active"},{label:e("general.Inactive"),value:"inactive"}]}),(0,F.jsxs)(f.OOm,{gap:"sm",children:[(0,F.jsx)(f.u81,{loading:I,value:_,onChange:()=>{M((()=>{w()}))}}),(0,F.jsx)(re.Ay,{type:"primary",icon:(0,F.jsx)(ae.A,{}),onClick:()=>s(),children:e("button.Create")})]})]}),(0,F.jsx)(f.zxw,{rowKey:"name",resizable:!0,size:"small",scroll:{x:"max-content"},columns:N,dataSource:(0,f.faj)(D),loading:R}),(0,F.jsx)(f.Qox,{open:!!k,title:e("resourceGroup.DeleteResourceGroup"),content:(0,F.jsxs)(f.OOm,{direction:"column",gap:"md",align:"stretch",style:{marginBottom:n.marginXS,width:"100%"},children:[(0,F.jsx)(oe.A,{type:"warning",title:e("dialog.warning.DeleteForeverDesc"),style:{width:"100%"}}),(0,F.jsxs)(f.OOm,{children:[(0,F.jsx)(b.A.Text,{style:{marginRight:n.marginXXS},children:e("resourceGroup.TypeResourceGroupNameToDelete")}),"(",(0,F.jsx)(b.A.Text,{code:!0,children:k}),")"]})]}),confirmText:null!==k&&void 0!==k?k:"",onOk:()=>{C({variables:{name:null!==k&&void 0!==k?k:""},onCompleted:(n,l)=>{let{delete_scaling_group:r}=n;if(null!==r&&void 0!==r&&r.ok)if(l&&l.length>0){const e=S().map(l,(e=>e.message));for(const n of e)a.error(n)}else a.success(e("resourceGroup.ResourceGroupDeleted")),h(void 0),M((()=>{w()}));else a.error(null===r||void 0===r?void 0:r.msg)},onError:e=>{a.error(e.message)}})},okButtonProps:{loading:V},onCancel:()=>{h(void 0)}}),(0,F.jsx)(K,{open:d&&!!p,resourceGroupFrgmt:p,onRequestClose:()=>{m(),g(void 0)}}),(0,F.jsx)(H,{open:o,resourceGroupFrgmt:p,onRequestClose:e=>{s(),g(void 0),e&&M((()=>{w()}))}})]})},ce=function(){var e={defaultValue:null,kind:"LocalArgument",name:"limit"},n={defaultValue:null,kind:"LocalArgument",name:"offset"},a=[{alias:null,args:[{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"}],concreteType:"StorageVolumeList",kind:"LinkedField",name:"storage_volume_list",plural:!1,selections:[{alias:null,args:null,concreteType:"StorageVolume",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backend",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fsprefix",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"performance_metric",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"usage",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"StorageProxyListQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"StorageProxyListQuery",selections:a},params:{cacheID:"00f25e00fb3163b514baaa3ef857ead0",id:null,metadata:{},name:"StorageProxyListQuery",operationKind:"query",text:"query StorageProxyListQuery(\n  $offset: Int!\n  $limit: Int!\n) {\n  storage_volume_list(limit: $limit, offset: $offset) {\n    items {\n      id\n      backend\n      capabilities\n      path\n      fsprefix\n      performance_metric\n      usage\n    }\n    total_count\n  }\n}\n"}}}();ce.hash="8eea8c97cb39a266757eaa25705b6633";const de=ce;var me=a(96490);const pe=(0,a(35637).A)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),ge={xfs:{color:"blue",icon:(0,F.jsx)(pe,{})},ceph:{color:"geekblue",icon:(0,F.jsx)(f.qbz,{})},cephfs:{color:"geekblue",icon:(0,F.jsx)(f.qbz,{})},vfs:{color:"green",icon:(0,F.jsx)(pe,{})},nfs:{color:"green",icon:(0,F.jsx)(pe,{})},purestorage:{color:"red",icon:(0,F.jsx)(f.ZdG,{})},dgx:{color:"green",icon:(0,F.jsx)(pe,{})},spectrumscale:{color:"green",icon:(0,F.jsx)(pe,{})},weka:{color:"purple",icon:(0,F.jsx)(pe,{})}},ye=()=>{var e;const{token:n}=x.A.useToken(),{t:a}=(0,j.Bd)(),{baiPaginationOption:l,tablePaginationOption:r,setTablePaginationOption:i}=(0,me.L0)({current:1,pageSize:10}),[o,t]=(0,f.zui)(),s=(0,A.useMemo)((()=>({offset:l.offset,limit:l.limit})),[l.offset,l.limit]),u=(0,A.useDeferredValue)(s),c=(0,A.useDeferredValue)(o),{storage_volume_list:d}=(0,G.useLazyLoadQuery)(de,u,{fetchPolicy:c===f.eIE?"store-and-network":"network-only",fetchKey:c}),m=[{title:(0,F.jsxs)(F.Fragment,{children:["ID / ",a("agent.Endpoint")]}),key:"id",dataIndex:"id",render:(e,n)=>(0,F.jsxs)(f.OOm,{direction:"column",align:"start",children:[(0,F.jsx)(b.A.Text,{children:e}),(0,F.jsx)(b.A.Text,{type:"secondary",children:n.path})]})},{title:a("agent.BackendType"),key:"backend",dataIndex:"backend",render:e=>{var n;const a=null!==(n=ge[e])&&void 0!==n?n:{color:"gold",icon:(0,F.jsx)(pe,{})};return(0,F.jsxs)(f.OOm,{gap:"xxs",children:[a.icon,(0,F.jsx)(f.qnQ,{values:[{label:"Backend"},{label:e,color:a.color}]})]})}},{title:a("agent.Resources"),key:"usage",dataIndex:"usage",render:e=>{var a,l,r;const i=JSON.parse(e),o=(null===i||void 0===i?void 0:i.capacity_bytes)>0?i.used_bytes/i.capacity_bytes:0,t=S().toFinite((0,V.Z1)(100*o,2)),s=t>80?n.colorError:n.colorSuccess,u=(null===(a=(0,V.Ho)(S().toString(null===i||void 0===i?void 0:i.capacity_bytes),"auto",{base:1e3}))||void 0===a?void 0:a.unit)||"g";return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(f.E2g,{valueLabel:(0,V.Z1)(t,1)+" %",percent:t,strokeColor:s,width:120}),(0,F.jsxs)(b.A.Text,{style:{fontSize:n.fontSizeSM},children:[i.used_bytes?null===(l=(0,V.Gh)(i.used_bytes,u))||void 0===l?void 0:l.numberFixed:"-","\xa0/\xa0",i.capacity_bytes?null===(r=(0,V.Gh)(i.capacity_bytes,u))||void 0===r?void 0:r.displayValue:"-"]})]})}},{title:a("agent.Capabilities"),key:"capabilities",dataIndex:"capabilities",width:150,render:e=>(0,F.jsx)(f.OOm,{gap:"xxs",align:"start",wrap:"wrap",children:S().map(e,(e=>(0,F.jsx)(h.A,{color:"blue",children:e},e)))})},{title:a("general.Control"),key:"control",width:100,fixed:"right",render:(e,a)=>{let l;try{const e=JSON.parse(a.performance_metric||"{}");l=S().isEmpty(e)}catch(r){l=!0}return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(re.Ay,{disabled:l,style:{color:l?n.colorTextDisabled:n.colorSuccess},icon:(0,F.jsx)(Y.A,{}),onClick:()=>{const e=new CustomEvent("backend-ai-selected-storage-proxy",{detail:a.id});document.dispatchEvent(e)},type:"text"}),(0,F.jsx)(f.rmy,{to:"/storage-settings/".concat(a.id),children:(0,F.jsx)(re.Ay,{style:{color:n.colorInfo},icon:(0,F.jsx)(ee.A,{}),type:"text"})})]})}}];return(0,A.useEffect)((()=>{if(!S().isEmpty(null===d||void 0===d?void 0:d.items)){const e=new CustomEvent("backend-ai-storage-proxy-updated",{});document.dispatchEvent(e)}}),[d]),(0,F.jsxs)(f.OOm,{direction:"column",align:"stretch",gap:"sm",children:[(0,F.jsx)(f.OOm,{justify:"end",wrap:"wrap",gap:"sm",children:(0,F.jsx)(f.u81,{loading:c!==o||u!==s,autoUpdateDelay:15e3,value:o,onChange:()=>{t()}})}),(0,F.jsx)(f.zxw,{resizable:!0,size:"small",scroll:{x:"max-content"},rowKey:"id",dataSource:(0,f.faj)(null===d||void 0===d?void 0:d.items),columns:m,loading:u!==s||c!==o,pagination:{pageSize:r.pageSize,current:r.current,total:null!==(e=null===d||void 0===d?void 0:d.total_count)&&void 0!==e?e:0,onChange(e,n){S().isNumber(e)&&S().isNumber(n)&&i({pageSize:n,current:e})}}})]})};var ve=a(47718),xe=a(22905);const ke=(0,xe.withDefault)(xe.StringParam,"agents"),he=()=>{const{t:e}=(0,j.Bd)(),[n,a]=(0,xe.useQueryParam)("tab",ke,{updateType:"replace"});return(0,F.jsx)(f.Zuv,{activeTabKey:n,onTabChange:e=>a(e),tabList:[{key:"agents",tab:e("agent.Agent")},{key:"storages",tab:e("general.StorageProxies")},{key:"resourceGroup",tab:e("general.ResourceGroup")}],children:(0,F.jsxs)(A.Suspense,{fallback:(0,F.jsx)(z.A,{active:!0}),children:["agents"===n&&(0,F.jsx)(ve.A,{children:(0,F.jsx)(l.A,{})}),"storages"===n&&(0,F.jsx)(ve.A,{children:(0,F.jsx)(ye,{})}),"resourceGroup"===n&&(0,F.jsx)(ve.A,{children:(0,F.jsx)(ue,{})})]})})}}}]);
//# sourceMappingURL=534.aae11b28.chunk.js.map