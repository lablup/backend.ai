{"version":3,"file":"static/js/229.69683696.chunk.js","mappings":"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","sources":["helper/graphql-transformer.ts","RelayEnvironment.ts","components/DefaultProviders.tsx","components/UserDropdownMenu.tsx","helper/index.tsx","hooks/backendai.tsx","hooks/index.ts","hooks/reactQueryAlias.tsx"],"sourcesContent":["function parseDirectives(str: string) {\n  const pattern = /(\\w+)\\s@\\s*(\\w+)\\s*\\(\\s*(\\w+)\\s*:\\s*(\\$?\\w+)\\s*\\)/g;\n  const directives = [];\n\n  let result;\n  while ((result = pattern.exec(str)) !== null) {\n    const [originFieldStr, fieldName, directive, argumentName, argumentValue] =\n      result;\n    directives.push({\n      fieldName,\n      directive,\n      argumentName,\n      argumentValue,\n      originFieldStr,\n    });\n  }\n\n  return directives;\n}\n\nexport function removeSkipOnClientDirective(\n  query: string,\n  variables: {\n    [key: string]: any;\n  },\n) {\n  const filteredVariables = { ...variables };\n  const directives = parseDirectives(query);\n  directives.forEach((directive) => {\n    if (\n      directive.directive === 'skipOnClient' &&\n      directive.argumentName === 'if'\n    ) {\n      if (\n        directive.argumentValue &&\n        (variables[directive.argumentValue.substring(1)] === true ||\n          directive.argumentValue === 'true')\n      ) {\n        // remove all lines of query that contains directive\n        query = query.replace(directive.originFieldStr, '');\n      } else {\n        // remove directive only\n        query = query.replace(\n          directive.originFieldStr,\n          directive.originFieldStr.replace(\n            /@\\s*(skipOnClient)\\s*\\(\\s*(\\w+)\\s*:\\s*(\\$?\\w+)\\s*\\)/,\n            '',\n          ),\n        );\n      }\n\n      // if argumentValue is variable and it is not used in query, remove it from variables and argument definition\n      if (\n        directive.argumentValue.startsWith('$') &&\n        query.split(directive.argumentValue).length === 2\n      ) {\n        const argumentNameWithoutDollar = directive.argumentValue.substring(1);\n        const pattern = new RegExp(`.*${argumentNameWithoutDollar}.*\\n`, 'g');\n        query = query.replace(pattern, '');\n        delete filteredVariables[directive.argumentValue.substring(1)];\n      }\n    } else {\n    }\n  });\n  return {\n    query: query,\n    variables: filteredVariables,\n  };\n}\n","// import { createClient } from \"graphql-ws\";\nimport { removeSkipOnClientDirective } from './helper/graphql-transformer';\nimport {\n  Environment,\n  Network,\n  RecordSource,\n  Store,\n  FetchFunction,\n  SubscribeFunction,\n  RelayFeatureFlags,\n} from 'relay-runtime';\n\nRelayFeatureFlags.ENABLE_RELAY_RESOLVERS = true;\n\nconst fetchFn: FetchFunction = async (\n  request,\n  variables,\n  // cacheConfig,\n  // uploadables\n) => {\n  // @skipOnClient directive modifies GraphQL queries according to the availability of a supported field.\n  const transformedData = removeSkipOnClientDirective(\n    request.text || '',\n    variables,\n  );\n\n  const reqBody = {\n    query: transformedData.query,\n    variables: transformedData.variables,\n  };\n\n  //@ts-ignore\n  const reqInfo = globalThis.backendaiclient?.newSignedRequest(\n    'POST',\n    '/admin/gql',\n    reqBody,\n  );\n\n  //@ts-ignore\n  const result = await globalThis.backendaiclient?._wrapWithPromise(\n    reqInfo,\n    false,\n    null,\n    10000,\n    0,\n  );\n\n  return result;\n};\n\nlet subscribeFn: SubscribeFunction;\n\n// if (typeof window !== \"undefined\") {\n//   // We only want to setup subscriptions if we are on the client.\n//   const subscriptionsClient = createClient({\n//     url: WEBSOCKET_ENDPOINT,\n//   });\n\n//   subscribeFn = (request, variables) => {\n//     // To understand why we return Observable.create<any>,\n//     // please see: https://github.com/enisdenjo/graphql-ws/issues/316#issuecomment-1047605774\n//     return Observable.create<any>((sink) => {\n//       if (!request.text) {\n//         return sink.error(new Error(\"Operation text cannot be empty\"));\n//       }\n\n//       return subscriptionsClient.subscribe(\n//         {\n//           operationName: request.name,\n//           query: request.text,\n//           variables,\n//         },\n//         sink\n//       );\n//     });\n//   };\n// }\n\nfunction createRelayEnvironment() {\n  return new Environment({\n    network: Network.create(fetchFn, subscribeFn),\n    store: new Store(new RecordSource()),\n  });\n}\n\nexport const RelayEnvironment = createRelayEnvironment();\n","import { RelayEnvironment } from '../RelayEnvironment';\n// @ts-ignore\nimport rawFixAntCss from '../fix_antd.css?raw';\nimport { useCustomThemeConfig } from '../helper/customThemeConfig';\nimport { ReactWebComponentProps } from '../helper/react-to-webcomponent';\nimport { StyleProvider, createCache } from '@ant-design/cssinjs';\nimport { ConfigProvider } from 'antd';\nimport en_US from 'antd/locale/en_US';\nimport ko_KR from 'antd/locale/ko_KR';\nimport i18n from 'i18next';\nimport Backend from 'i18next-http-backend';\nimport React, {\n  Suspense,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport { useTranslation, initReactI18next } from 'react-i18next';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { RelayEnvironmentProvider } from 'react-relay';\nimport { BrowserRouter, useNavigate } from 'react-router-dom';\n\ninterface WebComponentContextType {\n  value?: ReactWebComponentProps['value'];\n  dispatchEvent: ReactWebComponentProps['dispatchEvent'];\n  moveTo: (path: string) => void;\n}\n\nconst WebComponentContext = React.createContext<WebComponentContextType>(null!);\nconst ShadowRootContext = React.createContext<ShadowRoot>(null!);\nexport const useShadowRoot = () => React.useContext(ShadowRootContext);\nexport const useWebComponentInfo = () => React.useContext(WebComponentContext);\n\n// Create a client\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      suspense: true,\n      refetchOnWindowFocus: false,\n      retry: false,\n    },\n  },\n});\n\nexport interface DefaultProvidersProps extends ReactWebComponentProps {\n  children?: React.ReactNode;\n}\n\ni18n\n  .use(initReactI18next) // passes i18n down to react-i18next\n  .use(Backend)\n  .init({\n    backend: {\n      loadPath: '/resources/i18n/{{lng}}.json',\n    },\n    //@ts-ignore\n    lng: globalThis?.backendaioptions?.get('current_language') || 'en',\n    fallbackLng: 'en',\n    interpolation: {\n      escapeValue: false, // react already safes from xss => https://www.i18next.com/translation-function/interpolation#unescape\n    },\n  });\n\nconst useCurrentLanguage = () => {\n  const [lang, _setLang] = useState(\n    //@ts-ignore\n    globalThis?.backendaioptions?.get('current_language'),\n  );\n  const { i18n } = useTranslation();\n\n  useEffect(() => {\n    // TODO: remove this hack to initialize i18next\n    setTimeout(() => i18n?.changeLanguage(lang), 0);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    const handler = (e: Event) => {\n      //@ts-ignore\n      _setLang(e?.detail?.lang);\n      //@ts-ignore\n      const lang: string = e?.detail?.lang || 'en';\n      i18n?.changeLanguage(lang);\n    };\n    window.addEventListener('langChanged', handler);\n    return () => window.removeEventListener('langChanged', handler);\n  }, [i18n]);\n\n  return [lang] as const;\n};\n\nconst DefaultProviders: React.FC<DefaultProvidersProps> = ({\n  children,\n  value,\n  styles,\n  shadowRoot,\n  dispatchEvent,\n}) => {\n  const cache = useMemo(() => createCache(), []);\n  const [lang] = useCurrentLanguage();\n  const themeConfig = useCustomThemeConfig();\n\n  const componentValues = useMemo(() => {\n    return {\n      value,\n      dispatchEvent,\n      moveTo: (path: string) => {\n        dispatchEvent('moveTo', { path });\n      },\n    };\n  }, [value, dispatchEvent]);\n  return (\n    <>\n      {RelayEnvironment && (\n        <RelayEnvironmentProvider environment={RelayEnvironment}>\n          <React.StrictMode>\n            <style>\n              {styles}\n              {rawFixAntCss}\n            </style>\n            <QueryClientProvider client={queryClient}>\n              <ShadowRootContext.Provider value={shadowRoot}>\n                <WebComponentContext.Provider value={componentValues}>\n                  <ConfigProvider\n                    // @ts-ignore\n                    getPopupContainer={(triggerNode) => {\n                      return shadowRoot;\n                    }}\n                    //TODO: apply other supported locales\n                    locale={'ko' === lang ? ko_KR : en_US}\n                    theme={themeConfig}\n                  >\n                    <StyleProvider container={shadowRoot} cache={cache}>\n                      <Suspense fallback=\"\">\n                        <BrowserRouter>\n                          <RoutingEventHandler />\n                          {children}\n                        </BrowserRouter>\n                      </Suspense>\n                    </StyleProvider>\n                  </ConfigProvider>\n                </WebComponentContext.Provider>\n              </ShadowRootContext.Provider>\n            </QueryClientProvider>\n          </React.StrictMode>\n        </RelayEnvironmentProvider>\n      )}\n    </>\n  );\n};\n\nconst RoutingEventHandler = () => {\n  const navigate = useNavigate();\n  useLayoutEffect(() => {\n    const handleNavigate = (e: any) => {\n      const { detail } = e;\n      navigate(detail, {\n        // we don't want to add duplicated one to history.\n        // On lit component side, it adds to history already.\n        replace: true,\n      });\n    };\n    document.addEventListener('react-navigate', handleNavigate);\n\n    return () => {\n      document.removeEventListener('react-navigate', handleNavigate);\n    };\n  }, [navigate]);\n\n  return null;\n};\n\nexport default DefaultProviders;\n","import { useSuspendedBackendaiClient } from '../hooks';\nimport { useCurrentUserInfo } from '../hooks/backendai';\nimport { useTanQuery } from '../hooks/reactQueryAlias';\nimport { useWebComponentInfo } from './DefaultProviders';\nimport Flex from './Flex';\nimport {\n  UserOutlined,\n  MailOutlined,\n  SecurityScanOutlined,\n  ExclamationCircleOutlined,\n  LockOutlined,\n  HolderOutlined,\n  FileTextOutlined,\n  LogoutOutlined,\n} from '@ant-design/icons';\nimport { useDebounce } from 'ahooks';\nimport { Avatar, Dropdown, Grid, MenuProps, Typography } from 'antd';\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nconst UserDropdownMenu: React.FC = () => {\n  const { t } = useTranslation();\n  const { dispatchEvent } = useWebComponentInfo();\n  const baiClient = useSuspendedBackendaiClient();\n  const [userInfo] = useCurrentUserInfo();\n  const [open, setOpen] = useState(false);\n  const screens = Grid.useBreakpoint();\n  const debouncedOpenToFixDropdownMenu = useDebounce(open, {\n    wait: 100,\n    leading: true,\n    trailing: false,\n  });\n\n  const { data: roleData } = useTanQuery<{\n    user: {\n      role: string;\n    };\n  }>(\n    'getUserRole',\n    () => {\n      return baiClient.user.get(userInfo.email, ['role']);\n    },\n    {\n      suspense: false,\n    },\n  );\n  const userRole = roleData?.user.role;\n\n  const items: MenuProps['items'] = [\n    {\n      label: userInfo.username,\n      key: 'userFullName',\n      icon: <UserOutlined />,\n      disabled: true,\n      style: {\n        color: '#1f1f1f',\n        cursor: 'default',\n      },\n    },\n    {\n      label: userInfo.email,\n      key: 'userEmail',\n      icon: <MailOutlined />,\n      disabled: true,\n      style: {\n        cursor: 'default',\n      },\n    },\n    {\n      type: 'divider',\n    },\n    {\n      label: userRole,\n      key: 'userRole',\n      icon: <SecurityScanOutlined />,\n      disabled: true,\n      style: {\n        cursor: 'default',\n      },\n    },\n    {\n      type: 'divider',\n    },\n    {\n      label: t('webui.menu.AboutBackendAI'),\n      key: 'description',\n      icon: <ExclamationCircleOutlined />,\n      onClick: () => {\n        const event: CustomEvent = new CustomEvent('backend-ai-show-splash');\n        document.dispatchEvent(event);\n      },\n    },\n    {\n      label: t('webui.menu.MyAccount'),\n      key: 'userProfileSetting',\n      icon: <LockOutlined />,\n      onClick: () => {\n        // toggleUserProfileModal();\n        dispatchEvent('moveTo', {\n          path: '#userprofile',\n        });\n      },\n    },\n    {\n      label: t('webui.menu.Preferences'),\n      key: 'preferences',\n      icon: <HolderOutlined />,\n      onClick: () => {\n        dispatchEvent('moveTo', {\n          path: '/usersettings',\n          params: { tab: 'general' },\n        });\n      },\n    },\n    {\n      label: t('webui.menu.LogsErrors'),\n      key: 'logs',\n      icon: <FileTextOutlined />,\n      onClick: () => {\n        dispatchEvent('moveTo', {\n          path: '/usersettings',\n          params: { tab: 'logs' },\n        });\n      },\n    },\n    {\n      label: t('webui.menu.LogOut'),\n      key: 'logout',\n      icon: <LogoutOutlined />,\n      onClick: () => {\n        const event: CustomEvent = new CustomEvent('backend-ai-logout');\n        document.dispatchEvent(event);\n      },\n    },\n  ];\n\n  return (\n    <>\n      <Dropdown\n        menu={{ items }}\n        trigger={['click']}\n        open={debouncedOpenToFixDropdownMenu}\n        onOpenChange={(v) => setOpen(v)}\n      >\n        <Flex direction=\"row\" gap=\"sm\" style={{ cursor: 'pointer' }}>\n          {screens.md && (\n            <Typography.Text strong>{userInfo.username}</Typography.Text>\n          )}\n          <Avatar icon={<UserOutlined />} />\n        </Flex>\n      </Dropdown>\n    </>\n  );\n};\n\nexport default UserDropdownMenu;\n","import { useSuspendedBackendaiClient } from '../hooks';\n\nexport const newLineToBrElement = (\n  text: string,\n  separatorRegExp = /(<br\\s*\\/?>|\\n)/,\n) => {\n  return text.split(separatorRegExp).map((line, index) => {\n    return line.match(separatorRegExp) ? <br key={index} /> : line;\n  });\n};\n\nexport const baiSignedRequestWithPromise = ({\n  method,\n  url,\n  body = null,\n  client,\n}: {\n  method: string;\n  url: string;\n  body?: any;\n  client: any;\n}) => {\n  let request = client?.newSignedRequest(method, url, body, null);\n  return client?._wrapWithPromise(request);\n};\n\nexport const useBaiSignedRequestWithPromise = () => {\n  const baiClient = useSuspendedBackendaiClient();\n  return ({\n    method,\n    url,\n    body = null,\n  }: {\n    method: string;\n    url: string;\n    body?: any;\n  }) =>\n    baiSignedRequestWithPromise({\n      method,\n      url,\n      body,\n      client: baiClient,\n    });\n};\n\n/**\n * Convert file size with binary unit to human readable unit and value\n *\n * @param {number} bytes\n * @param {number} decimalPoint decimal point set to 2 as a default\n * @return {string} converted file size to human readable value\n */\nexport const humanReadableDecimalSize = (bytes = 0, decimalPoint = 2) => {\n  if (bytes === 0) return '0 Bytes';\n  const k = Math.pow(10, 3);\n  decimalPoint = decimalPoint < 0 ? 0 : decimalPoint;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB'];\n  let i = Math.floor(Math.log(Math.round(bytes)) / Math.log(k));\n  i = i < 0 ? 0 : i; // avoid negative value\n  return (\n    parseFloat((bytes / Math.pow(k, i)).toFixed(decimalPoint)) + ' ' + sizes[i]\n  );\n};\n\nexport const humanReadableBinarySize = (\n  bytes = 0,\n  decimalPoint = 2,\n  compact = false,\n) => {\n  if (!bytes) return 0;\n  if (typeof bytes === 'string') bytes = parseInt(bytes);\n  const k = Math.pow(2, 10);\n  let i;\n  let unitList;\n  decimalPoint = decimalPoint < 0 || compact ? 0 : decimalPoint;\n  i = Math.floor(Math.log(Math.round(bytes)) / Math.log(k));\n  i = i < 0 ? 0 : i; // avoid negative value\n  if (compact) {\n    unitList = ['', 'Ki', 'Mi', 'Gi', 'Ti', 'Pi', 'Ei'];\n  } else {\n    unitList = ['Bytes', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB'];\n  }\n  return (\n    parseFloat((bytes / Math.pow(k, i)).toFixed(decimalPoint)) +\n    ' ' +\n    unitList[i]\n  );\n};\n\nexport function bytesToBinarySize(\n  bytes: number,\n  targetUnit?: 'Bytes' | 'KiB' | 'MiB' | 'GiB' | 'TiB' | 'PiB' | 'EiB',\n): {\n  number: number;\n  unit: string;\n} {\n  const sizes = ['Bytes', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB'];\n  if (bytes === 0)\n    return {\n      number: 0,\n      unit: 'Bytes',\n    };\n  const i = Math.floor(Math.log(bytes) / Math.log(1024));\n  return {\n    number: parseFloat((bytes / Math.pow(1024, i)).toFixed(2)),\n    unit: sizes[i],\n  };\n}\n\n/**\n * Change date of any type to human readable date time.\n *\n * @param {Date} d   - string or DateTime object to convert\n * @return {Date}   - Formatted date / time to be human-readable text.\n */\nexport const _humanReadableTime = (date: string) => {\n  return new Date(date).toUTCString();\n};\n\nexport const GBToBytes = (value = 0) => {\n  const gigabyte = Math.pow(10, 9);\n  return Math.round(gigabyte * value);\n};\n\nexport const bytesToGB = (\n  bytes: number,\n  decimalPoint = 2,\n  nullStr: string = '-',\n) => {\n  if (bytes === null || bytes === undefined) return nullStr;\n  if (!bytes) return bytes;\n  return (bytes / 10 ** 9).toFixed(decimalPoint);\n};\n\nexport function iSizeToSize(\n  size: string,\n  targetSizeUnit?: string,\n  fixed: number = 2,\n): {\n  number: number;\n  numberFixed: string;\n  unit: string;\n  numberUnit: string;\n} {\n  const sizes = ['B', 'K', 'M', 'G', 'T', 'P', 'E'];\n  const sizeUnit = size.slice(-1).toUpperCase();\n  const sizeValue = parseFloat(size.slice(0, -1));\n  const sizeIndex = sizes.indexOf(sizeUnit);\n  if (sizeIndex === -1 || isNaN(sizeValue)) {\n    throw new Error('Invalid size format');\n  }\n  const bytes = sizeValue * Math.pow(1024, sizeIndex);\n  const targetIndex = targetSizeUnit\n    ? sizes.indexOf(targetSizeUnit.toUpperCase())\n    : sizeIndex;\n  const targetBytes = bytes / Math.pow(1024, targetIndex);\n  const numberFixed = targetBytes.toFixed(fixed);\n  return {\n    number: targetBytes,\n    numberFixed,\n    unit: sizes[targetIndex],\n    numberUnit: `${numberFixed}${sizes[targetIndex]}`,\n  };\n}\n\nexport type QuotaScopeType = 'project' | 'user';\nexport const addQuotaScopeTypePrefix = (type: QuotaScopeType, str: string) => {\n  if (str === '' || str === undefined) return '';\n  if (str.startsWith(`${type}:`)) return str;\n  return `${type}:${str}`;\n};\n\nexport const usageIndicatorColor = (percentage: number) => {\n  return percentage < 70\n    ? 'rgba(58, 178, 97, 1)'\n    : percentage < 90\n    ? 'rgb(223, 179, 23)'\n    : '#ef5350';\n};\n\nexport const maskString = (\n  value = '',\n  maskChar = '*',\n  startFrom = 0,\n  maskLength = 0,\n) => {\n  // clamp mask length\n  maskLength =\n    startFrom + maskLength > value.length ? value.length : maskLength;\n  return (\n    value.substring(0, startFrom) +\n    maskChar.repeat(maskLength) +\n    value.substring(startFrom + maskLength, value.length)\n  );\n};\n\nexport const offset_to_cursor = (offset: number): string => {\n  return window.btoa(`arrayconnection:${offset}`);\n};\n","import { useSuspendedBackendaiClient, useUpdatableState } from '.';\nimport { maskString } from '../helper';\nimport { useTanMutation, useTanQuery } from './reactQueryAlias';\nimport _ from 'lodash';\nimport { useEffect, useState } from 'react';\n\nexport interface QuotaScope {\n  id: string;\n  quota_scope_id: string;\n  storage_host_name: string;\n  details: {\n    hard_limit_bytes: number | null;\n    usage_bytes: number | null;\n    usage_count: number | null;\n  };\n}\n\nexport const useResourceSlots = () => {\n  const [key, checkUpdate] = useUpdatableState('first');\n  // const baiRequestWithPromise = useBaiSignedRequestWithPromise();\n  const baiClient = useSuspendedBackendaiClient();\n  const { data: resourceSlots } = useTanQuery<{\n    cpu?: string;\n    mem?: string;\n    'cuda.shares'?: string;\n    'cuda.device'?: string;\n  }>({\n    queryKey: ['useResourceSlots', key],\n    queryFn: () => {\n      return baiClient.get_resource_slots();\n    },\n    staleTime: 0,\n  });\n  return [\n    resourceSlots,\n    {\n      refresh: () => checkUpdate(),\n    },\n  ] as const;\n};\n\ninterface UserInfo {\n  full_name: string;\n  email: string;\n}\n\ntype mutationOptions<T> = {\n  onSuccess?: (value: T) => void;\n  onError?: (error: any) => void;\n};\n\nexport const useCurrentUserInfo = () => {\n  const baiClient = useSuspendedBackendaiClient();\n\n  const [userInfo, _setUserInfo] = useState<UserInfo>({\n    full_name: baiClient.full_name,\n    email: baiClient.email,\n  });\n\n  const getUsername = () => {\n    let name: string =\n      _.trim(userInfo.full_name).length > 0\n        ? userInfo.full_name\n        : userInfo.email;\n    // mask username only when the configuration is enabled\n    if (baiClient._config.maskUserInfo) {\n      const maskStartIdx = 2;\n      const emailPattern =\n        /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\n      const isEmail: boolean = emailPattern.test(name);\n      const maskLength = isEmail\n        ? name.split('@')[0].length - maskStartIdx\n        : name.length - maskStartIdx;\n      name = maskString(name, '*', maskStartIdx, maskLength);\n    }\n    return name;\n  };\n\n  useEffect(() => {\n    const handler = (e: any) => {\n      if (baiClient.supports('change-user-name')) {\n        const input = e.detail;\n        _setUserInfo((v) => ({\n          ...v,\n          full_name: input,\n        }));\n      }\n    };\n    document.addEventListener('current-user-info-changed', handler);\n    return () => {\n      document.removeEventListener('current-user-info-changed', handler);\n    };\n  }, [baiClient]);\n\n  const mutationToUpdateUserFullName = useTanMutation({\n    mutationFn: (values: { email: string; full_name: string }) => {\n      return baiClient.update_full_name(values.email, values.full_name);\n    },\n  });\n  const mutationToUpdateUserPassword = useTanMutation({\n    mutationFn: (values: {\n      old_password: string;\n      new_password: string;\n      new_password2: string;\n    }) => {\n      return baiClient.update_password(\n        values.old_password,\n        values.new_password,\n        values.new_password2,\n      );\n    },\n  });\n\n  return [\n    {\n      ...userInfo,\n      username: getUsername(),\n      isPendingMutation:\n        mutationToUpdateUserFullName.isLoading ||\n        mutationToUpdateUserPassword.isLoading,\n    },\n    {\n      updateFullName: (\n        newFullName: string,\n        options?: mutationOptions<string>,\n      ) => {\n        mutationToUpdateUserFullName.mutate(\n          {\n            full_name: newFullName,\n            email: baiClient.email,\n          },\n          {\n            onSuccess: () => {\n              options?.onSuccess && options.onSuccess(newFullName);\n              document.dispatchEvent(\n                new CustomEvent('current-user-info-changed', {\n                  detail: newFullName,\n                }),\n              );\n              _setUserInfo((v) => ({\n                ...v,\n                full_name: newFullName,\n              }));\n            },\n            onError: (error: any) => {\n              options?.onError && options.onError(error);\n            },\n          },\n        );\n      },\n      updatePassword: (\n        params: {\n          old_password: string;\n          new_password: string;\n          new_password2: string;\n        },\n        options?: mutationOptions<undefined>,\n      ) => {\n        mutationToUpdateUserPassword.mutate(params, {\n          onSuccess: () => {\n            options?.onSuccess && options.onSuccess(undefined);\n          },\n          onError: (error: any) => {\n            options?.onError && options.onError(error);\n          },\n        });\n      },\n    },\n  ] as const;\n};\n","import { useEffect, useMemo, useState } from 'react';\nimport { useQuery } from 'react-query';\n\nexport const useBackendAIConnectedState = () => {\n  const [time, setTime] = useState<string>();\n\n  useEffect(() => {\n    const listener = () => {\n      setTime(new Date().toISOString());\n    };\n    document.addEventListener('backend-ai-connected', listener);\n    return () => {\n      document.removeEventListener('backend-ai-connected', listener);\n    };\n  }, []);\n\n  return time;\n};\n\nexport const useDateISOState = (initialValue?: string) => {\n  const [value, setValue] = useState(initialValue || new Date().toISOString());\n\n  const update = (newValue?: string) => {\n    setValue(newValue || new Date().toISOString());\n  };\n  return [value, update] as const;\n};\n\nexport const useUpdatableState = (initialValue: string) => {\n  return useDateISOState(initialValue);\n};\n\nexport const useCurrentDomainValue = () => {\n  const baiClient = useSuspendedBackendaiClient();\n  return baiClient._config.domainName;\n};\n\nexport const useCurrentProjectValue = () => {\n  const baiClient = useSuspendedBackendaiClient();\n  const [project, _setProject] = useState<{\n    name: string;\n    id: string;\n  }>({\n    name: baiClient.current_group,\n    id: baiClient.groupIds[baiClient.current_group],\n  });\n\n  useEffect(() => {\n    const listener = (e: any) => {\n      const newProjectName = e.detail;\n      _setProject({\n        name: newProjectName,\n        id: baiClient.groupIds[newProjectName],\n      });\n    };\n    document.addEventListener('backend-ai-group-changed', listener);\n    return () => {\n      document.removeEventListener('backend-ai-group-changed', listener);\n    };\n  });\n\n  return project;\n};\n\nexport const useAnonymousBackendaiClient = ({\n  api_endpoint,\n}: {\n  api_endpoint: string;\n}) => {\n  const client = useMemo(() => {\n    //@ts-ignore\n    const clientConfig = new globalThis.BackendAIClientConfig(\n      '',\n      '',\n      api_endpoint,\n      'SESSION',\n    );\n    //@ts-ignore\n    return new globalThis.BackendAIClient(clientConfig, 'Backend.AI Console.');\n  }, [api_endpoint]);\n\n  return client;\n};\n\nexport const useSuspendedBackendaiClient = () => {\n  const { data: client } = useQuery<any>({\n    queryKey: 'backendai-client-for-suspense',\n    queryFn: () =>\n      new Promise((resolve) => {\n        if (\n          //@ts-ignore\n          typeof globalThis.backendaiclient === 'undefined' ||\n          //@ts-ignore\n          globalThis.backendaiclient === null ||\n          //@ts-ignore\n          globalThis.backendaiclient.ready === false\n        ) {\n          const listener = () => {\n            // @ts-ignore\n            resolve(globalThis.backendaiclient);\n            document.removeEventListener('backend-ai-connected', listener);\n          };\n          document.addEventListener('backend-ai-connected', listener);\n        } else {\n          //@ts-ignore\n          return resolve(globalThis.backendaiclient);\n        }\n      }),\n    retry: false,\n    // enabled: false,\n    suspense: true,\n  });\n\n  return client;\n};\n\ninterface ImageMetadata {\n  name: string;\n  description: string;\n  group: string;\n  tags: string[];\n  icon: string;\n  label: {\n    category: string;\n    tag: string;\n    color: string;\n  }[];\n}\n\nexport const useBackendaiImageMetaData = () => {\n  const { data: metadata } = useQuery({\n    queryKey: 'backendai-metadata-for-suspense',\n    queryFn: () => {\n      return fetch('resources/image_metadata.json')\n        .then((response) => response.json())\n        .then(\n          (json: {\n            imageInfo: {\n              [key: string]: ImageMetadata;\n            };\n            tagAlias: {\n              [key: string]: string;\n            };\n            tagReplace: {\n              [key: string]: string;\n            };\n          }) => {\n            return json;\n          },\n        );\n    },\n    suspense: true,\n    retry: false,\n  });\n\n  const getImageMeta = (imageName: string) => {\n    // cr.backend.ai/multiarch/python:3.9-ubuntu20.04\n    // key = python, tags = [3.9, ubuntu20.04]\n    if (!imageName) {\n      return {\n        key: '',\n        tags: [],\n      };\n    }\n    const specs = imageName.split('/');\n\n    const [key, tag] = (specs[2] || specs[1]).split(':');\n    const tags = tag.split('-');\n\n    return { key, tags };\n  };\n\n  return [\n    metadata,\n    {\n      getImageAliasName: (imageName: string) => {\n        const { key } = getImageMeta(imageName);\n        return metadata?.imageInfo[key].name || key;\n      },\n      getImageIcon: (imageName?: string | null, path = 'resources/icons/') => {\n        if (!imageName) return 'default.png';\n        const { key } = getImageMeta(imageName);\n        return (\n          path +\n          (metadata?.imageInfo[key]?.icon !== undefined\n            ? metadata?.imageInfo[key]?.icon\n            : 'default.png')\n        );\n      },\n      getImageTags: (imageName: string) => {\n        // const { key, tags } = getImageMeta(imageName);\n      },\n      getBaseVersion: (imageName: string) => {\n        const { tags } = getImageMeta(imageName);\n        return tags[0];\n      },\n      getBaseImage: (imageName: string) => {\n        const { tags } = getImageMeta(imageName);\n        return tags[1];\n      },\n      getImageMeta,\n    },\n  ] as const;\n};\n","import { useQuery, useMutation } from 'react-query';\n\nexport const useTanQuery = useQuery;\nexport const useTanMutation = useMutation;\n"],"names":["removeSkipOnClientDirective","query","variables","filteredVariables","_objectSpread","str","result","pattern","directives","exec","_result","_result2","_slicedToArray","originFieldStr","fieldName","directive","argumentName","argumentValue","push","parseDirectives","forEach","substring","replace","startsWith","split","length","argumentNameWithoutDollar","RegExp","concat","RelayFeatureFlags","ENABLE_RELAY_RESOLVERS","fetchFn","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","request","_globalThis$backendai","_globalThis$backendai2","transformedData","reqBody","reqInfo","wrap","_context","prev","next","text","globalThis","backendaiclient","newSignedRequest","_wrapWithPromise","sent","abrupt","stop","_x","_x2","apply","arguments","RelayEnvironment","Environment","network","Network","create","subscribeFn","store","Store","RecordSource","WebComponentContext","React","ShadowRootContext","useShadowRoot","useWebComponentInfo","queryClient","QueryClient","defaultOptions","queries","suspense","refetchOnWindowFocus","retry","i18n","initReactI18next","use","Backend","init","backend","loadPath","lng","backendaioptions","get","fallbackLng","interpolation","escapeValue","RoutingEventHandler","navigate","useNavigate","useLayoutEffect","handleNavigate","e","detail","document","addEventListener","removeEventListener","children","value","styles","shadowRoot","dispatchEvent","cache","useMemo","createCache","_useCurrentLanguage","_useState","useState","_useState2","lang","_setLang","useTranslation","useEffect","setTimeout","changeLanguage","handler","_e$detail","_e$detail2","window","useCurrentLanguage","themeConfig","useCustomThemeConfig","componentValues","moveTo","path","_jsx","_Fragment","RelayEnvironmentProvider","environment","_jsxs","QueryClientProvider","client","Provider","ConfigProvider","getPopupContainer","triggerNode","locale","ko_KR","en_US","theme","StyleProvider","container","Suspense","fallback","BrowserRouter","t","baiClient","useSuspendedBackendaiClient","_useCurrentUserInfo","useCurrentUserInfo","userInfo","open","setOpen","screens","Grid","useBreakpoint","debouncedOpenToFixDropdownMenu","useDebounce","wait","leading","trailing","roleData","useTanQuery","user","email","data","userRole","role","items","label","username","key","icon","UserOutlined","disabled","style","color","cursor","MailOutlined","type","SecurityScanOutlined","ExclamationCircleOutlined","onClick","event","CustomEvent","LockOutlined","HolderOutlined","params","tab","FileTextOutlined","LogoutOutlined","Dropdown","menu","trigger","onOpenChange","v","Flex","direction","gap","md","Typography","Text","strong","Avatar","newLineToBrElement","separatorRegExp","undefined","map","line","index","match","baiSignedRequestWithPromise","method","url","_ref$body","body","useBaiSignedRequestWithPromise","_ref2","_ref2$body","humanReadableDecimalSize","bytes","decimalPoint","k","Math","pow","i","floor","log","round","parseFloat","toFixed","humanReadableBinarySize","compact","parseInt","unitList","GBToBytes","gigabyte","bytesToGB","iSizeToSize","size","targetSizeUnit","fixed","sizes","sizeUnit","slice","toUpperCase","sizeValue","sizeIndex","indexOf","isNaN","Error","targetIndex","targetBytes","numberFixed","number","unit","numberUnit","addQuotaScopeTypePrefix","usageIndicatorColor","percentage","maskString","maskChar","startFrom","maskLength","repeat","useResourceSlots","_useUpdatableState","useUpdatableState","_useUpdatableState2","checkUpdate","queryKey","queryFn","get_resource_slots","staleTime","refresh","full_name","_setUserInfo","supports","input","mutationToUpdateUserFullName","useTanMutation","mutationFn","values","update_full_name","mutationToUpdateUserPassword","update_password","old_password","new_password","new_password2","name","_","_config","maskUserInfo","test","getUsername","isPendingMutation","isLoading","updateFullName","newFullName","options","mutate","onSuccess","onError","error","updatePassword","initialValue","_useState3","Date","toISOString","_useState4","setValue","newValue","useDateISOState","useCurrentDomainValue","domainName","useCurrentProjectValue","_useState5","current_group","id","groupIds","_useState6","project","_setProject","listener","newProjectName","useAnonymousBackendaiClient","api_endpoint","clientConfig","BackendAIClientConfig","BackendAIClient","useQuery","Promise","resolve","ready","useBackendaiImageMetaData","metadata","fetch","then","response","json","getImageMeta","imageName","tags","specs","_split","_split2","getImageAliasName","imageInfo","getImageIcon","_metadata$imageInfo$k","_metadata$imageInfo$k2","getImageTags","getBaseVersion","getBaseImage","useMutation"],"sourceRoot":""}