/*! For license information please see 1233.b234372f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[1233],{23370:(e,n,a)=>{a.d(n,{A:()=>d});const l=function(){var e=[{alias:null,args:[{kind:"Literal",name:"is_active",value:!0}],concreteType:"Domain",kind:"LinkedField",name:"domains",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:"domains(is_active:true)"}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DomainSelectorQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"DomainSelectorQuery",selections:e},params:{cacheID:"9df762094b74dc3eb8079edfcc73765f",id:null,metadata:{},name:"DomainSelectorQuery",operationKind:"query",text:"query DomainSelectorQuery {\n  domains(is_active: true) {\n    name\n  }\n}\n"}}}();l.hash="c14d362fa40cf9a3cef5d1d71202cc5f";const r=l;var i=a(2600),o=a(8348),t=a.n(o),s=(a(84100),a(81291)),u=a(85724),c=a(7960);const d=e=>{let{onSelectDomain:n,...a}=e;const{t:l}=(0,s.Bd)(),{domains:o}=(0,u.useLazyLoadQuery)(r,{},{fetchPolicy:"store-and-network"});return(0,c.jsxs)(i.A,{onChange:(e,a)=>{null===n||void 0===n||n(a)},placeholder:l("storageHost.quotaSettings.SelectDomain"),...a,children:[t().map(o,(e=>(0,c.jsx)(i.A.Option,{domainName:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.name))),";"]})}},10994:(e,n,a)=>{a.r(n),a.d(n,{default:()=>ke});var l=a(46681);const r=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteScalingGroup",kind:"LinkedField",name:"delete_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupListDeleteMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupListDeleteMutation",selections:n},params:{cacheID:"fdcd5026b9668171b8d52998b2c16c6d",id:null,metadata:{},name:"ResourceGroupListDeleteMutation",operationKind:"mutation",text:"mutation ResourceGroupListDeleteMutation(\n  $name: String!\n) {\n  delete_scaling_group(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();r.hash="40de35d5afd64c8d906e4970b10b722d";const i=r,o=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},n={defaultValue:null,kind:"LocalArgument",name:"name"},a=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"ModifyScalingGroup",kind:"LinkedField",name:"modify_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ResourceGroupListUpdateMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ResourceGroupListUpdateMutation",selections:a},params:{cacheID:"f2bb803220bb606aab5576ae85eed3c3",id:null,metadata:{},name:"ResourceGroupListUpdateMutation",operationKind:"mutation",text:"mutation ResourceGroupListUpdateMutation(\n  $name: String!\n  $input: ModifyScalingGroupInput!\n) {\n  modify_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="ac249dff8b2c9b629edb2ca40843c134";const t=o,s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"is_active"}],n=[{kind:"Variable",name:"is_active",variableName:"is_active"}],a={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"driver",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupListQuery",selections:[{alias:null,args:n,concreteType:"ScalingGroup",kind:"LinkedField",name:"scaling_groups",plural:!0,selections:[a,l,r,i,o,t,s,{args:null,kind:"FragmentSpread",name:"ResourceGroupInfoModalFragment"},{args:null,kind:"FragmentSpread",name:"ResourceGroupSettingModalFragment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupListQuery",selections:[{alias:null,args:n,concreteType:"ScalingGroup",kind:"LinkedField",name:"scaling_groups",plural:!0,selections:[a,l,r,i,o,t,s,{alias:null,args:null,kind:"ScalarField",name:"driver_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null}],storageKey:null}]},params:{cacheID:"a388cfe6011c626e8a46a241d373f0cf",id:null,metadata:{},name:"ResourceGroupListQuery",operationKind:"query",text:"query ResourceGroupListQuery(\n  $is_active: Boolean\n) {\n  scaling_groups(is_active: $is_active) {\n    name\n    description\n    is_active\n    is_public\n    driver\n    scheduler\n    wsproxy_addr\n    ...ResourceGroupInfoModalFragment\n    ...ResourceGroupSettingModalFragment\n  }\n}\n\nfragment ResourceGroupInfoModalFragment on ScalingGroup {\n  name\n  description\n  is_active\n  is_public\n  driver\n  driver_opts\n  scheduler\n  scheduler_opts\n  wsproxy_addr\n}\n\nfragment ResourceGroupSettingModalFragment on ScalingGroup {\n  name\n  description\n  is_active\n  is_public\n  wsproxy_addr\n  scheduler\n  scheduler_opts\n}\n"}}}();s.hash="73ad50968ae420ea2cd912e9fa046cf8";const u=s;var c=a(19885),d=a(84970),m=a(95593);const p={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ResourceGroupInfoModalFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"driver",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"driver_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null}],type:"ScalingGroup",abstractKey:null,hash:"32b9c1a86a13b37cf5abb7e88f1cd969"},g=p;var y=a(39319),v=a(2902),x=a(68144),h=a(31370),k=a(73067),f=a(28599),b=a(91313),_=a(8348),S=a.n(_),A=a(84100),j=a(81291),G=a(85724),F=a(7960);const K=e=>{var n,a;let{resourceGroupFrgmt:l=null,onRequestClose:r,...i}=e;const{t:o}=(0,j.Bd)(),{token:t}=x.A.useToken(),s=(0,G.useFragment)(g,l),u=(0,A.useMemo)((()=>JSON.parse((null===s||void 0===s?void 0:s.driver_opts)||"{}")),[null===s||void 0===s?void 0:s.driver_opts]),c=(0,A.useMemo)((()=>JSON.parse((null===s||void 0===s?void 0:s.scheduler_opts)||"{}")),[null===s||void 0===s?void 0:s.scheduler_opts]);return(0,F.jsxs)(b.Ib,{title:o("resourceGroup.ResourceGroupDetail"),onCancel:r,footer:null,centered:!0,...i,children:[(0,F.jsxs)(h.A,{column:1,size:"small",title:o("resourceGroup.Information"),labelStyle:{width:"50%"},children:[(0,F.jsx)(h.A.Item,{label:o("resourceGroup.Name"),children:null===s||void 0===s?void 0:s.name}),(0,F.jsx)(h.A.Item,{label:o("resourceGroup.Description"),children:(null===s||void 0===s?void 0:s.description)||"-"}),(0,F.jsx)(h.A.Item,{label:o("resourceGroup.Active"),children:null!==s&&void 0!==s&&s.is_active?(0,F.jsx)(y.A,{style:{color:t.colorSuccess}}):(0,F.jsx)(v.A,{style:{color:t.colorTextSecondary}})}),(0,F.jsx)(h.A.Item,{label:o("resourceGroup.Public"),children:null!==s&&void 0!==s&&s.is_public?(0,F.jsx)(y.A,{style:{color:t.colorSuccess}}):(0,F.jsx)(v.A,{style:{color:t.colorTextSecondary}})}),(0,F.jsx)(h.A.Item,{label:o("resourceGroup.Driver"),children:null===s||void 0===s?void 0:s.driver}),(0,F.jsx)(h.A.Item,{label:o("resourceGroup.Scheduler"),children:S().toUpper(null!==(n=null===s||void 0===s?void 0:s.scheduler)&&void 0!==n?n:"")}),(0,F.jsx)(h.A.Item,{label:o("resourceGroup.WsproxyAddress"),children:(null===s||void 0===s?void 0:s.wsproxy_addr)||"-"})]}),(0,F.jsx)("br",{}),(0,F.jsxs)(h.A,{column:1,size:"small",title:o("resourceGroup.SchedulerOptions"),labelStyle:{width:"50%"},children:[(0,F.jsx)(h.A.Item,{label:o("resourceGroup.AllowedSessionTypes"),children:(0,F.jsx)(b.OO,{wrap:"wrap",direction:"row",gap:"xs",style:{width:"100%"},children:S().map(null===c||void 0===c?void 0:c.allowed_session_types,(e=>(0,F.jsx)(k.A,{style:{margin:0},children:S().startCase(e)},e)))})}),(0,F.jsx)(h.A.Item,{label:o("resourceGroup.PendingTimeout"),children:S().isNil(null===c||void 0===c?void 0:c.pending_timeout)?"-":(0,F.jsxs)(b.OO,{gap:"xxs",align:"end",children:[(0,F.jsx)(f.A.Text,{children:`${c.pending_timeout}\n                ${o("resourceGroup.TimeoutSeconds")}`}),null!==c&&void 0!==c&&c.pending_timeout?null:(0,F.jsx)(f.A.Text,{style:{color:t.colorTextSecondary,fontSize:t.fontSizeSM},children:`(${o("general.Disabled")})`})]})}),(0,F.jsx)(h.A.Item,{label:o("resourceGroup.RetriesToSkipDesc"),children:null!==c&&void 0!==c&&null!==(a=c.config)&&void 0!==a&&a.num_retries_to_skip?`${c.config.num_retries_to_skip} ${o("resourceGroup.RetriesToSkip")}`:"-"})]}),S().isEmpty(u)?null:(0,F.jsx)(h.A,{column:1,size:"small",title:o("resourceGroup.DriverOptions"),labelStyle:{width:"50%"},children:S().map(u,((e,n)=>(0,F.jsx)(h.A.Item,{label:S().startCase(n),children:S().isArray(e)?(0,F.jsx)(b.OO,{direction:"column",children:S().map(e,(e=>(0,F.jsx)(k.A,{children:e},e)))}):e},n)))})]})},D=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"domain"},{defaultValue:null,kind:"LocalArgument",name:"scaling_group"}],n=[{alias:null,args:[{kind:"Variable",name:"domain",variableName:"domain"},{kind:"Variable",name:"scaling_group",variableName:"scaling_group"}],concreteType:"AssociateScalingGroupWithDomain",kind:"LinkedField",name:"associate_scaling_group_with_domain",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalAssociateDomainMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupSettingModalAssociateDomainMutation",selections:n},params:{cacheID:"72535173512804feacec89a7cabb4ac3",id:null,metadata:{},name:"ResourceGroupSettingModalAssociateDomainMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalAssociateDomainMutation(\n  $domain: String!\n  $scaling_group: String!\n) {\n  associate_scaling_group_with_domain(domain: $domain, scaling_group: $scaling_group) {\n    ok\n    msg\n  }\n}\n"}}}();D.hash="a1253f2e15bdfc1e59cdf2b26bc0a273";const R=D,w=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},n={defaultValue:null,kind:"LocalArgument",name:"name"},a=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"CreateScalingGroup",kind:"LinkedField",name:"create_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalCreateMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ResourceGroupSettingModalCreateMutation",selections:a},params:{cacheID:"6d6716d2dedf664e623006a2315b3c66",id:null,metadata:{},name:"ResourceGroupSettingModalCreateMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalCreateMutation(\n  $name: String!\n  $input: CreateScalingGroupInput!\n) {\n  create_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();w.hash="8642e40e794eaf1f4b0a84e05104d75c";const M=w,T=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},n={defaultValue:null,kind:"LocalArgument",name:"name"},a=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"ModifyScalingGroup",kind:"LinkedField",name:"modify_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalUpdateMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ResourceGroupSettingModalUpdateMutation",selections:a},params:{cacheID:"2352dc03b1acef2df9cf7c5f686665a3",id:null,metadata:{},name:"ResourceGroupSettingModalUpdateMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalUpdateMutation(\n  $name: String!\n  $input: ModifyScalingGroupInput!\n) {\n  modify_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();T.hash="510c22b428b17c9e16efd58a5f908c3d";const I=T,O={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null}],type:"ScalingGroup",abstractKey:null,hash:"738d94e03577df0f1298c085d29dcb12"},L=O;var C=a(2156),N=a(23370),V=a(79654),q=a(83925),$=a(51181),z=a(74826),P=a(38069),Q=a(2600),E=a(67195),B=a(92477),U=a(98077),J=a(6534),Z=a(52088);const W=e=>{var n,a,l,r,i,o;let{resourceGroupFrgmt:t,onRequestClose:s,...u}=e;const{t:d}=(0,j.Bd)(),{token:m}=x.A.useToken(),{message:p}=q.A.useApp(),g=(0,c.eZ)(),y=(0,A.useRef)(null),v=(0,G.useFragment)(L,t),[h,k]=(0,G.useMutation)(I),[f,_]=(0,G.useMutation)(M),[K,D]=(0,G.useMutation)(R),w=(0,A.useMemo)((()=>JSON.parse((null===v||void 0===v?void 0:v.scheduler_opts)||"{}")),[null===v||void 0===v?void 0:v.scheduler_opts]),T=(0,b.N7)({name:null===v||void 0===v?void 0:v.name,description:null===v||void 0===v?void 0:v.description,domain:g,scheduler:null!==(n=null===v||void 0===v?void 0:v.scheduler)&&void 0!==n?n:"fifo",allowedSessionTypes:null!==(a=null===w||void 0===w?void 0:w.allowed_session_types)&&void 0!==a?a:["batch","interactive"],active:null===(l=null===v||void 0===v?void 0:v.is_active)||void 0===l||l,public:null===(r=null===v||void 0===v?void 0:v.is_public)||void 0===r||r,pendingTimeout:null!==w&&void 0!==w&&w.pending_timeout?S().toNumber(null===w||void 0===w?void 0:w.pending_timeout):null,retriesToSkip:null!==w&&void 0!==w&&null!==(i=w.config)&&void 0!==i&&i.num_retries_to_skip?S().toNumber(null===w||void 0===w||null===(o=w.config)||void 0===o?void 0:o.num_retries_to_skip):null,wsProxyAddress:null===v||void 0===v?void 0:v.wsproxy_addr});return(0,F.jsx)(b.Ib,{destroyOnHidden:!0,title:d(v?"resourceGroup.ModifyResourceGroup":"resourceGroup.CreateResourceGroup"),onCancel:()=>{null===s||void 0===s||s(!1)},okText:d(v?"button.Update":"button.Create"),okButtonProps:{loading:_||D||k},onOk:()=>{var e;null===(e=y.current)||void 0===e||e.validateFields().then((e=>{var n;const a={driver:"static",scheduler:e.scheduler,description:null!==(n=e.description)&&void 0!==n?n:null,driver_opts:"{}",scheduler_opts:JSON.stringify({allowed_session_types:e.allowedSessionTypes,...e.pendingTimeout&&{pending_timeout:e.pendingTimeout},...e.retriesToSkip&&{config:{num_retries_to_skip:e.retriesToSkip}}}),is_public:e.public,is_active:e.active,wsproxy_addr:e.wsProxyAddress};v?h({variables:{name:v.name,input:a},onCompleted:(e,n)=>{let{modify_scaling_group:a}=e;if(null!==a&&void 0!==a&&a.ok)if(n&&n.length>0){const e=S().map(n,(e=>e.message));for(const n of e)p.error(n)}else p.success(d("resourceGroup.ResourceGroupModified")),null===s||void 0===s||s(!0);else p.error(null===a||void 0===a?void 0:a.msg)},onError:e=>{p.error(e.message)}}):f({variables:{name:e.name,input:a},onCompleted:(n,a)=>{let{create_scaling_group:l}=n;if(a&&a.length>0){const e=S().map(a,(e=>e.message));for(const n of e)p.error(n)}else null!==l&&void 0!==l&&l.ok?K({variables:{domain:e.domain,scaling_group:e.name},onCompleted:(e,n)=>{let{associate_scaling_group_with_domain:a}=e;if(null!==a&&void 0!==a&&a.ok)if(n&&n.length>0){const e=S().map(n,(e=>e.message));for(const n of e)p.error(n)}else p.success(d("resourceGroup.ResourceGroupCreated")),null===s||void 0===s||s(!0);else p.error(null===a||void 0===a?void 0:a.msg)},onError:e=>{p.error(e.message)}}):p.error(null===l||void 0===l?void 0:l.msg)},onError:e=>{p.error(e.message)}})})).catch((()=>{}))},...u,children:(0,F.jsx)(A.Suspense,{fallback:(0,F.jsx)($.A,{active:!0}),children:(0,F.jsxs)(z.A,{ref:y,initialValues:T,layout:"vertical",children:[(0,F.jsx)(z.A.Item,{label:d("resourceGroup.Name"),name:"name",rules:[{required:!0,message:d("general.ValueRequired",{name:d("resourceGroup.Name")})}],children:(0,F.jsx)(P.A,{disabled:!!v})}),v?null:(0,F.jsx)(z.A.Item,{label:d("resourceGroup.Domain"),name:"domain",rules:[{required:!0,message:d("general.ValueRequired",{name:d("resourceGroup.Domain")})}],children:(0,F.jsx)(N.A,{})}),(0,F.jsx)(z.A.Item,{label:d("resourceGroup.Description"),name:"description",children:(0,F.jsx)(P.A.TextArea,{})}),(0,F.jsx)(z.A.Item,{label:d("resourceGroup.AllowedSessionTypes"),name:"allowedSessionTypes",rules:[{required:!0,message:d("general.ValueRequired",{name:d("resourceGroup.AllowedSessionTypes")})}],children:(0,F.jsx)(Q.A,{mode:"multiple",options:[{label:"Batch",value:"batch"},{label:"Interactive",value:"interactive"},{label:"Inference",value:"inference"}]})}),(0,F.jsx)(z.A.Item,{label:d("resourceGroup.WsproxyAddress"),name:"wsProxyAddress",rules:[{type:"url",message:d("error.InvalidUrl")}],children:(0,F.jsx)(P.A,{placeholder:"http://localhost:10200"})}),(0,F.jsxs)(E.A,{children:[(0,F.jsx)(B.A,{span:12,children:(0,F.jsx)(z.A.Item,{layout:"horizontal",label:d("resourceGroup.Active"),name:"active",children:(0,F.jsx)(U.A,{})})}),(0,F.jsx)(B.A,{span:12,children:(0,F.jsx)(z.A.Item,{layout:"horizontal",label:d("resourceGroup.Public"),name:"public",children:(0,F.jsx)(U.A,{})})})]}),(0,F.jsx)(z.A.Item,{label:d("resourceGroup.Scheduler"),name:"scheduler",rules:[{required:!0,message:d("general.ValueRequired",{name:d("resourceGroup.Scheduler")})}],children:(0,F.jsx)(Q.A,{options:[{label:"FIFO",value:"fifo"},{label:"LIFO",value:"lifo"},{label:"DRF",value:"drf"}]})}),(0,F.jsx)(z.A.Item,{label:d("resourceGroup.SchedulerOptions"),children:(0,F.jsxs)(b.Zu,{styles:{body:{paddingBottom:0}},children:[(0,F.jsx)(z.A.Item,{label:(0,F.jsxs)(b.OO,{gap:"xxs",children:[d("resourceGroup.PendingTimeout"),(0,F.jsx)(J.A,{title:(0,C.y1)(d("resourceGroup.PendingTimeoutDesc")),children:(0,F.jsx)(V.A,{style:{color:m.colorTextSecondary}})})]}),name:"pendingTimeout",children:(0,F.jsx)(Z.A,{style:{width:"100%"},addonAfter:d("resourceGroup.TimeoutSeconds"),min:0})}),(0,F.jsx)(z.A.Item,{label:(0,F.jsx)(b.OO,{style:{whiteSpace:"pre"},children:d("resourceGroup.RetriesToSkipDesc")}),name:"retriesToSkip",children:(0,F.jsx)(Z.A,{style:{width:"100%"},addonAfter:d("resourceGroup.RetriesToSkip"),min:0})})]})})]})})})};var H=a(86658),X=a(86155),Y=a(62778),ee=a(47441),ne=a(61964),ae=a(46038),le=a(90421),re=a(98840),ie=a(76805),oe=a(41664);const te=()=>{const{t:e}=(0,j.Bd)(),{token:n}=x.A.useToken(),{message:a}=q.A.useApp(),[l,r]=(0,A.useState)("active"),[o,{toggle:s}]=(0,ne.A)(!1),[p,{toggle:g}]=(0,ne.A)(!1),[h,k]=(0,A.useState)(),[_,D]=(0,A.useState)(),[R,w]=(0,c.Tw)("first"),[M,T]=(0,A.useTransition)(),[I,O]=(0,A.useTransition)(),{scaling_groups:L}=(0,G.useLazyLoadQuery)(u,{is_active:"active"===l},{fetchPolicy:"store-and-network",fetchKey:R}),[C,N]=(0,G.useMutation)(t),[V,$]=(0,G.useMutation)(i),z=(0,b.YM)([{key:"name",title:e("resourceGroup.Name"),dataIndex:"name"},{key:"description",title:e("resourceGroup.Description"),dataIndex:"description",render:e=>e||"-"},{key:"is_public",title:e("resourceGroup.Public"),dataIndex:"is_public",render:e=>e?(0,F.jsx)(y.A,{style:{color:n.colorSuccess}}):(0,F.jsx)(v.A,{style:{color:n.colorTextSecondary}})},{key:"driver",title:e("resourceGroup.Driver"),dataIndex:"driver"},{key:"scheduler",title:e("resourceGroup.Scheduler"),dataIndex:"scheduler",render:e=>S().toUpper(e)},{key:"wsproxy_addr",title:e("resourceGroup.WsproxyAddress"),dataIndex:"wsproxy_addr",render:e=>e||"-"},{key:"controls",title:e("general.Control"),fixed:"right",render:(l,r)=>(0,F.jsxs)(b.OO,{children:[(0,F.jsx)(ae.Ay,{type:"text",icon:(0,F.jsx)(H.A,{}),style:{color:n.colorSuccess},onClick:()=>{k(r),g()}}),(0,F.jsx)(ae.Ay,{type:"text",icon:(0,F.jsx)(X.A,{}),style:{color:n.colorInfo},onClick:()=>{k(r),s()}}),(0,F.jsx)(J.A,{title:r.is_active?e("resourceGroup.Deactivate"):e("resourceGroup.Activate"),children:(0,F.jsx)(le.A,{title:r.is_active?e("resourceGroup.DeactivateResourceGroup"):e("resourceGroup.ActivateResourceGroup"),placement:"left",okType:r.is_active?"danger":"primary",okText:r.is_active?e("resourceGroup.Deactivate"):e("resourceGroup.Activate"),description:null===r||void 0===r?void 0:r.name,onConfirm:()=>{var n;C({variables:{name:null!==(n=r.name)&&void 0!==n?n:"",input:{is_active:!r.is_active}},onCompleted:(n,r)=>{let{modify_scaling_group:i}=n;if(null!==i&&void 0!==i&&i.ok)if(r&&r.length>0){const e=l.map(r,(e=>e.message));for(const n of e)a.error(n)}else a.success(e("resourceGroup.ResourceGroupModified")),O((()=>{w()}));else a.error(null===i||void 0===i?void 0:i.msg)},onError:e=>{a.error(e.message)}})},children:(0,F.jsx)(ae.Ay,{type:"text",danger:!!r.is_active,icon:r.is_active?(0,F.jsx)(ie.A,{}):(0,F.jsx)(oe.A,{}),loading:N})})}),(0,F.jsx)(J.A,{title:e("button.Delete"),children:(0,F.jsx)(ae.Ay,{type:"text",icon:(0,F.jsx)(Y.A,{style:{color:n.colorError}}),onClick:()=>{D((null===r||void 0===r?void 0:r.name)||"")}})})]})}]);return(0,F.jsxs)(b.OO,{direction:"column",align:"stretch",gap:"sm",children:[(0,F.jsxs)(b.OO,{justify:"between",children:[(0,F.jsx)(m.A,{value:l,onChange:e=>{T((()=>{r(e.target.value)}))},optionType:"button",options:[{label:e("general.Active"),value:"active"},{label:e("general.Inactive"),value:"inactive"}]}),(0,F.jsxs)(b.OO,{gap:"sm",children:[(0,F.jsx)(d.A,{loading:I,value:R,onChange:()=>{O((()=>{w()}))}}),(0,F.jsx)(ae.Ay,{type:"primary",icon:(0,F.jsx)(ee.A,{}),onClick:()=>s(),children:e("button.Create")})]})]}),(0,F.jsx)(b.zx,{rowKey:"name",resizable:!0,size:"small",scroll:{x:"max-content"},columns:z,dataSource:(0,b.f)(L),loading:M}),(0,F.jsx)(b.Qo,{open:!!_,title:e("resourceGroup.DeleteResourceGroup"),content:(0,F.jsxs)(b.OO,{direction:"column",gap:"md",align:"stretch",style:{marginBottom:n.marginXS,width:"100%"},children:[(0,F.jsx)(re.A,{type:"warning",message:e("dialog.warning.DeleteForeverDesc"),style:{width:"100%"}}),(0,F.jsxs)(b.OO,{children:[(0,F.jsx)(f.A.Text,{style:{marginRight:n.marginXXS},children:e("resourceGroup.TypeResourceGroupNameToDelete")}),"(",(0,F.jsx)(f.A.Text,{code:!0,children:_}),")"]})]}),confirmText:null!==_&&void 0!==_?_:"",onOk:()=>{V({variables:{name:null!==_&&void 0!==_?_:""},onCompleted:(n,l)=>{let{delete_scaling_group:r}=n;if(null!==r&&void 0!==r&&r.ok)if(l&&l.length>0){const e=S().map(l,(e=>e.message));for(const n of e)a.error(n)}else a.success(e("resourceGroup.ResourceGroupDeleted")),D(void 0),O((()=>{w()}));else a.error(null===r||void 0===r?void 0:r.msg)},onError:e=>{a.error(e.message)}})},okButtonProps:{loading:$},onCancel:()=>{D(void 0)}}),(0,F.jsx)(K,{open:p&&!!h,resourceGroupFrgmt:h,onRequestClose:()=>{g(),k(void 0)}}),(0,F.jsx)(W,{open:o,resourceGroupFrgmt:h,onRequestClose:e=>{s(),k(void 0),e&&O((()=>{w()}))}})]})},se=function(){var e={defaultValue:null,kind:"LocalArgument",name:"limit"},n={defaultValue:null,kind:"LocalArgument",name:"offset"},a=[{alias:null,args:[{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"}],concreteType:"StorageVolumeList",kind:"LinkedField",name:"storage_volume_list",plural:!1,selections:[{alias:null,args:null,concreteType:"StorageVolume",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backend",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fsprefix",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"performance_metric",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"usage",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"StorageProxyListQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"StorageProxyListQuery",selections:a},params:{cacheID:"00f25e00fb3163b514baaa3ef857ead0",id:null,metadata:{},name:"StorageProxyListQuery",operationKind:"query",text:"query StorageProxyListQuery(\n  $offset: Int!\n  $limit: Int!\n) {\n  storage_volume_list(limit: $limit, offset: $offset) {\n    items {\n      id\n      backend\n      capabilities\n      path\n      fsprefix\n      performance_metric\n      usage\n    }\n    total_count\n  }\n}\n"}}}();se.hash="8eea8c97cb39a266757eaa25705b6633";const ue=se;var ce=a(61774),de=a(72190),me=a(54802);const pe=(0,a(25276).A)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),ge={xfs:{color:"blue",icon:(0,F.jsx)(pe,{})},ceph:{color:"lightblue",icon:(0,F.jsx)(b.qb,{})},cephfs:{color:"lightblue",icon:(0,F.jsx)(b.qb,{})},vfs:{color:"green",icon:(0,F.jsx)(pe,{})},nfs:{color:"green",icon:(0,F.jsx)(pe,{})},purestorage:{color:"red",icon:(0,F.jsx)(b.Zd,{})},dgx:{color:"green",icon:(0,F.jsx)(pe,{})},spectrumscale:{color:"green",icon:(0,F.jsx)(pe,{})},weka:{color:"purple",icon:(0,F.jsx)(pe,{})}},ye=()=>{var e;const{token:n}=x.A.useToken(),{t:a}=(0,j.Bd)(),{baiPaginationOption:l,tablePaginationOption:r,setTablePaginationOption:i}=(0,ce.aW)({current:1,pageSize:10}),[o,t]=(0,c.zu)(),s=(0,A.useMemo)((()=>({offset:l.offset,limit:l.limit})),[l.offset,l.limit]),u=(0,A.useDeferredValue)(s),m=(0,A.useDeferredValue)(o),{storage_volume_list:p}=(0,G.useLazyLoadQuery)(ue,u,{fetchPolicy:m===c.eI?"store-and-network":"network-only",fetchKey:m}),g=[{title:(0,F.jsxs)(F.Fragment,{children:["ID / ",a("agent.Endpoint")]}),key:"id",dataIndex:"id",render:(e,n)=>(0,F.jsxs)(b.OO,{direction:"column",align:"start",children:[(0,F.jsx)(f.A.Text,{children:e}),(0,F.jsx)(f.A.Text,{type:"secondary",children:n.path})]})},{title:a("agent.BackendType"),key:"backend",dataIndex:"backend",render:e=>{var n;const a=null!==(n=ge[e])&&void 0!==n?n:{color:"gold",icon:(0,F.jsx)(pe,{})};return(0,F.jsxs)(b.OO,{gap:"xxs",children:[a.icon,(0,F.jsx)(me.A,{values:[{label:"Backend"},{label:e,color:a.color}]})]})}},{title:a("agent.Resources"),key:"usage",dataIndex:"usage",render:e=>{var a,l,r;const i=JSON.parse(e),o=(null===i||void 0===i?void 0:i.capacity_bytes)>0?i.used_bytes/i.capacity_bytes:0,t=S().toFinite((0,C.Z1)(100*o,2)),s=t>80?n.colorError:n.colorSuccess,u=(null===(a=(0,C.Ho)(S().toString(null===i||void 0===i?void 0:i.capacity_bytes),"auto",{base:1e3}))||void 0===a?void 0:a.unit)||"g";return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(de.A,{valueLabel:(0,C.Z1)(t,1)+" %",percent:t,strokeColor:s,width:120}),(0,F.jsxs)(f.A.Text,{style:{fontSize:n.fontSizeSM},children:[i.used_bytes?null===(l=(0,C.Gh)(i.used_bytes,u))||void 0===l?void 0:l.numberFixed:"-","\xa0/\xa0",i.capacity_bytes?null===(r=(0,C.Gh)(i.capacity_bytes,u))||void 0===r?void 0:r.displayValue:"-"]})]})}},{title:a("agent.Capabilities"),key:"capabilities",dataIndex:"capabilities",width:150,render:e=>(0,F.jsx)(b.OO,{gap:"xxs",align:"start",wrap:"wrap",children:S().map(e,(e=>(0,F.jsx)(k.A,{color:"blue",style:{margin:0},children:e},e)))})},{title:a("general.Control"),key:"control",width:100,fixed:"right",render:(e,a)=>{let l;try{const e=JSON.parse(a.performance_metric||"{}");l=S().isEmpty(e)}catch(r){l=!0}return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(ae.Ay,{disabled:l,style:{color:l?n.colorTextDisabled:n.colorSuccess},icon:(0,F.jsx)(H.A,{}),onClick:()=>{const e=new CustomEvent("backend-ai-selected-storage-proxy",{detail:a.id});document.dispatchEvent(e)},type:"text"}),(0,F.jsx)(b.rm,{to:`/storage-settings/${a.id}`,children:(0,F.jsx)(ae.Ay,{style:{color:n.colorInfo},icon:(0,F.jsx)(X.A,{}),type:"text"})})]})}}];return(0,A.useEffect)((()=>{if(!S().isEmpty(null===p||void 0===p?void 0:p.items)){const e=new CustomEvent("backend-ai-storage-proxy-updated",{});document.dispatchEvent(e)}}),[p]),(0,F.jsxs)(b.OO,{direction:"column",align:"stretch",gap:"sm",children:[(0,F.jsx)(b.OO,{justify:"end",wrap:"wrap",gap:"sm",children:(0,F.jsx)(d.A,{loading:m!==o||u!==s,autoUpdateDelay:15e3,value:o,onChange:()=>{t()}})}),(0,F.jsx)(b.zx,{resizable:!0,size:"small",scroll:{x:"max-content"},rowKey:"id",dataSource:(0,b.f)(null===p||void 0===p?void 0:p.items),columns:g,loading:u!==s||m!==o,pagination:{pageSize:r.pageSize,current:r.current,total:null!==(e=null===p||void 0===p?void 0:p.total_count)&&void 0!==e?e:0,onChange(e,n){S().isNumber(e)&&S().isNumber(n)&&i({pageSize:n,current:e})}}})]})};var ve=a(67907),xe=a(42667);const he=(0,xe.withDefault)(xe.StringParam,"agents"),ke=()=>{const{t:e}=(0,j.Bd)(),[n,a]=(0,xe.useQueryParam)("tab",he,{updateType:"replace"});return(0,F.jsx)(b.Zu,{activeTabKey:n,onTabChange:e=>a(e),tabList:[{key:"agents",tab:e("agent.Agent")},{key:"storages",tab:e("general.StorageProxies")},{key:"resourceGroup",tab:e("general.ResourceGroup")}],children:(0,F.jsxs)(A.Suspense,{fallback:(0,F.jsx)($.A,{active:!0}),children:["agents"===n&&(0,F.jsx)(ve.A,{children:(0,F.jsx)(l.A,{})}),"storages"===n&&(0,F.jsx)(ve.A,{children:(0,F.jsx)(ye,{})}),"resourceGroup"===n&&(0,F.jsx)(ve.A,{children:(0,F.jsx)(te,{})})]})})}},29818:(e,n,a)=>{a.d(n,{A:()=>s});var l=a(1139),r=a(84100);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};var o=a(29815),t=function(e,n){return r.createElement(o.A,(0,l.A)({},e,{ref:n,icon:i}))};const s=r.forwardRef(t)},76805:(e,n,a)=>{a.d(n,{A:()=>l});const l=(0,a(25276).A)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},41664:(e,n,a)=>{a.d(n,{A:()=>l});const l=(0,a(25276).A)("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]])}}]);
//# sourceMappingURL=1233.b234372f.chunk.js.map