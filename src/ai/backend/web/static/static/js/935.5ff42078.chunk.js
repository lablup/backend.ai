/*! For license information please see 935.5ff42078.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[935],{10935:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});const a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"filter"},t={defaultValue:null,kind:"LocalArgument",name:"limit"},n={defaultValue:null,kind:"LocalArgument",name:"offset"},a={defaultValue:null,kind:"LocalArgument",name:"order"},r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},l={alias:null,args:[{kind:"Literal",name:"artifactType",value:"MODEL"}],concreteType:"ArtifactRegistry",kind:"LinkedField",name:"defaultArtifactRegistry",plural:!1,selections:[r,i],storageKey:'defaultArtifactRegistry(artifactType:"MODEL")'},o={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},s={alias:"total",args:[{kind:"Literal",name:"filter",value:{availability:["ALIVE","DELETED"]}},{kind:"Literal",name:"limit",value:0},{kind:"Literal",name:"offset",value:0}],concreteType:"ArtifactConnection",kind:"LinkedField",name:"artifacts",plural:!1,selections:[o],storageKey:'artifacts(filter:{"availability":["ALIVE","DELETED"]},limit:0,offset:0)'},c=[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"},{kind:"Variable",name:"orderBy",variableName:"order"}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},u=[{kind:"Literal",name:"first",value:1},{kind:"Literal",name:"orderBy",value:{direction:"DESC",field:"VERSION"}}],f=[{alias:null,args:null,concreteType:"ArtifactRevisionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ArtifactRevision",kind:"LinkedField",name:"node",plural:!1,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,t,n,a],kind:"Fragment",metadata:null,name:"ReservoirPageQuery",selections:[l,s,{alias:null,args:c,concreteType:"ArtifactConnection",kind:"LinkedField",name:"artifacts",plural:!1,selections:[o,{alias:null,args:null,concreteType:"ArtifactEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Artifact",kind:"LinkedField",name:"node",plural:!1,selections:[d,{args:null,kind:"FragmentSpread",name:"BAIArtifactTableArtifactFragment"},{args:null,kind:"FragmentSpread",name:"BAIImportArtifactModalArtifactFragment"},{args:null,kind:"FragmentSpread",name:"BAIDeactivateArtifactsModalArtifactsFragment"},{args:null,kind:"FragmentSpread",name:"BAIActivateArtifactsModalArtifactsFragment"},{alias:null,args:u,concreteType:"ArtifactRevisionConnection",kind:"LinkedField",name:"revisions",plural:!1,selections:[{alias:null,args:null,concreteType:"ArtifactRevisionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ArtifactRevision",kind:"LinkedField",name:"node",plural:!1,selections:[d,{args:null,kind:"FragmentSpread",name:"BAIImportArtifactModalArtifactRevisionFragment"}],storageKey:null}],storageKey:null}],storageKey:'revisions(first:1,orderBy:{"direction":"DESC","field":"VERSION"})'}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,t,n,e],kind:"Operation",name:"ReservoirPageQuery",selections:[l,s,{alias:null,args:c,concreteType:"ArtifactConnection",kind:"LinkedField",name:"artifacts",plural:!1,selections:[o,{alias:null,args:null,concreteType:"ArtifactEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Artifact",kind:"LinkedField",name:"node",plural:!1,selections:[d,r,{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"updatedAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scannedAt",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null},i,{alias:"latestVersion",args:u,concreteType:"ArtifactRevisionConnection",kind:"LinkedField",name:"revisions",plural:!1,selections:f,storageKey:'revisions(first:1,orderBy:{"direction":"DESC","field":"VERSION"})'},{alias:null,args:null,concreteType:"SourceInfo",kind:"LinkedField",name:"source",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:u,concreteType:"ArtifactRevisionConnection",kind:"LinkedField",name:"revisions",plural:!1,selections:f,storageKey:'revisions(first:1,orderBy:{"direction":"DESC","field":"VERSION"})'}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{cacheID:"c7b5f70d05ab7694e7fbcdf5599c6605",id:null,metadata:{},name:"ReservoirPageQuery",operationKind:"query",text:"query ReservoirPageQuery(\n  $order: [ArtifactOrderBy!]\n  $limit: Int!\n  $offset: Int!\n  $filter: ArtifactFilter!\n) {\n  defaultArtifactRegistry(artifactType: MODEL) {\n    name\n    type\n  }\n  total: artifacts(limit: 0, offset: 0, filter: {availability: [ALIVE, DELETED]}) {\n    count\n  }\n  artifacts(orderBy: $order, limit: $limit, offset: $offset, filter: $filter) {\n    count\n    edges {\n      node {\n        id\n        ...BAIArtifactTableArtifactFragment\n        ...BAIImportArtifactModalArtifactFragment\n        ...BAIDeactivateArtifactsModalArtifactsFragment\n        ...BAIActivateArtifactsModalArtifactsFragment\n        revisions(first: 1, orderBy: {field: VERSION, direction: DESC}) {\n          edges {\n            node {\n              id\n              ...BAIImportArtifactModalArtifactRevisionFragment\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\nfragment BAIActivateArtifactsModalArtifactsFragment on Artifact {\n  id\n  name\n}\n\nfragment BAIArtifactDescriptionsFragment on Artifact {\n  name\n  description\n  source {\n    name\n    url\n  }\n  ...BAIArtifactTypeTagFragment\n}\n\nfragment BAIArtifactRevisionDownloadButtonFragment on ArtifactRevision {\n  status\n}\n\nfragment BAIArtifactStatusTagFragment on ArtifactRevision {\n  status\n}\n\nfragment BAIArtifactTableArtifactFragment on Artifact {\n  id\n  name\n  description\n  updatedAt\n  scannedAt\n  availability\n  ...BAIArtifactTypeTagFragment\n  latestVersion: revisions(first: 1, orderBy: {field: VERSION, direction: DESC}) {\n    edges {\n      node {\n        id\n        version\n        size\n        status\n        ...BAIArtifactStatusTagFragment\n        ...BAIArtifactRevisionDownloadButtonFragment\n      }\n    }\n  }\n}\n\nfragment BAIArtifactTypeTagFragment on Artifact {\n  type\n}\n\nfragment BAIDeactivateArtifactsModalArtifactsFragment on Artifact {\n  id\n  name\n}\n\nfragment BAIImportArtifactModalArtifactFragment on Artifact {\n  id\n  name\n  ...BAIArtifactDescriptionsFragment\n}\n\nfragment BAIImportArtifactModalArtifactRevisionFragment on ArtifactRevision {\n  id\n  version\n  size\n  status\n}\n"}}}();a.hash="bf6246af07a5349a48a181320907518e";const r=a;var i=n(19885),l=n(61774),o=n(89644),s=n(44163),c=n(81014),d=n(40260),u=n(97124),f=n(66610),g=n(2964),m=n(60573),p=n(18036),y=n(43419),A=n.n(y),v=n(61931),k=n(65389),S=n(77456);const b=e=>{const{value:t,formatter:n,precision:a,decimalSeparator:r,groupSeparator:i="",prefixCls:l}=e;let o;if("function"===typeof n)o=n(t);else{const e=String(t),n=e.match(/^(-?)(\d*)(\.(\d+))?$/);if(n&&"-"!==e){const e=n[1];let t=n[2]||"0",s=n[4]||"";t=t.replace(/\B(?=(\d{3})+(?!\d))/g,i),"number"===typeof a&&(s=s.padEnd(a,"0").slice(0,a>0?a:0)),s&&(s=`${r}${s}`),o=[f.createElement("span",{key:"int",className:`${l}-content-value-int`},e,t),s&&f.createElement("span",{key:"decimal",className:`${l}-content-value-decimal`},s)]}else o=e}return f.createElement("span",{className:`${l}-content-value`},o)};var F=n(72927),E=n(11900),h=n(99937);const x=(0,E.OF)("Statistic",(e=>(e=>{const{componentCls:t,marginXXS:n,padding:a,colorTextDescription:r,titleFontSize:i,colorTextHeading:l,contentFontSize:o,fontFamily:s}=e;return{[t]:Object.assign(Object.assign({},(0,F.dF)(e)),{[`${t}-title`]:{marginBottom:n,color:r,fontSize:i},[`${t}-skeleton`]:{paddingTop:a},[`${t}-content`]:{color:l,fontSize:o,fontFamily:s,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:n},[`${t}-content-suffix`]:{marginInlineStart:n}}})}})((0,h.oX)(e,{}))),(e=>{const{fontSizeHeading3:t,fontSize:n}=e;return{titleFontSize:n,contentFontSize:t}}));var O=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const I=f.forwardRef(((e,t)=>{const{prefixCls:n,className:a,rootClassName:r,style:i,valueStyle:l,value:o=0,title:s,valueRender:c,prefix:d,suffix:u,loading:g=!1,formatter:m,precision:p,decimalSeparator:y=".",groupSeparator:F=",",onMouseEnter:E,onMouseLeave:h}=e,I=O(e,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:L,direction:T,className:j,style:D}=(0,k.TP)("statistic"),C=L("statistic",n),[M,R,P]=x(C),B=f.createElement(b,{decimalSeparator:y,groupSeparator:F,prefixCls:C,formatter:m,precision:p,value:o}),$=A()(C,{[`${C}-rtl`]:"rtl"===T},j,a,r,R,P),w=f.useRef(null);f.useImperativeHandle(t,(()=>({nativeElement:w.current})));const K=(0,v.A)(I,{aria:!0,data:!0});return M(f.createElement("div",Object.assign({},K,{ref:w,className:$,style:Object.assign(Object.assign({},D),i),onMouseEnter:E,onMouseLeave:h}),s&&f.createElement("div",{className:`${C}-title`},s),f.createElement(S.A,{paragraph:!1,loading:g,className:`${C}-skeleton`},f.createElement("div",{style:l,className:`${C}-content`},d&&f.createElement("span",{className:`${C}-content-prefix`},d),c?c(B):B,u&&f.createElement("span",{className:`${C}-content-suffix`},u)))))}));const L=I,T=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]];function j(e,t,n){const{format:a=""}=t,r=new Date(e).getTime(),i=Date.now();return function(e,t){let n=e;const a=/\[[^\]]*]/g,r=(t.match(a)||[]).map((e=>e.slice(1,-1))),i=t.replace(a,"[]"),l=T.reduce(((e,t)=>{let[a,r]=t;if(e.includes(a)){const t=Math.floor(n/r);return n-=t*r,e.replace(new RegExp(`${a}+`,"g"),(e=>{const n=e.length;return t.toString().padStart(n,"0")}))}return e}),i);let o=0;return l.replace(a,(()=>{const e=r[o];return o+=1,e}))}(n?Math.max(r-i,0):Math.max(i-r,0),a)}var D=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const C=e=>{const{value:t,format:n="HH:mm:ss",onChange:a,onFinish:r,type:i}=e,l=D(e,["value","format","onChange","onFinish","type"]),o="countdown"===i,[s,c]=f.useState(null),d=(0,g._q)((()=>{const e=Date.now(),n=function(e){return new Date(e).getTime()}(t);c({});return null===a||void 0===a||a(o?n-e:e-n),!(o&&n<e)||(null===r||void 0===r||r(),!1)}));f.useEffect((()=>{let e;const t=()=>{e=(0,m.A)((()=>{d()&&t()}))};return t(),()=>m.A.cancel(e)}),[t,o]),f.useEffect((()=>{c({})}),[]);return f.createElement(L,Object.assign({},l,{value:t,valueRender:e=>(0,p.Ob)(e,{title:void 0}),formatter:(e,t)=>s?j(e,Object.assign(Object.assign({},t),{format:n}),o):"-"}))},M=e=>f.createElement(C,Object.assign({},e,{type:"countdown"})),R=f.memo(M);L.Timer=C,L.Countdown=R;const P=L;var B=n(89214),$=n(56761),w=n(33403),K=n(63872),N=n(8348),V=n.n(N);const z=(0,n(5335).A)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]);var H=n(92498),_=n(26433),q=n(54070),G=n(89737),Q=n(19022),X=n(84970),J=n(95593),U=n(82860),Z=n(83203),W=n(66906);const Y=()=>{const{t:e}=(0,q.Bd)(),{token:t}=s.A.useToken(),n=(0,Q.Zp)(),{upsertNotification:a}=(0,U.js)(),[g,m]=(0,f.useState)([]),[p,y]=(0,f.useState)([]),[A,v]=(0,f.useState)([]),[k,S]=(0,f.useState)(null),[b,F]=(0,f.useState)([]),[E,{toggle:h}]=(0,o.A)(),{baiPaginationOption:x,tablePaginationOption:O,setTablePaginationOption:I}=(0,l.aW)({current:1,pageSize:10}),[L,T]=(0,Z.useQueryParams)({filter:(0,Z.withDefault)(Z.JsonParam,{}),mode:(0,Z.withDefault)(Z.StringParam,"ALIVE")}),j=JSON.stringify(L.filter),D=(0,f.useMemo)((()=>{return{offset:x.offset,limit:x.limit,order:[{field:"UPDATED_AT",direction:"DESC"}],filter:V().merge({},JSON.parse(j||"{}"),(e=L.mode,{availability:[e]}))};var e}),[x.offset,x.limit,j,L.mode]),C=(0,f.useDeferredValue)(D),[M,R]=(0,i.Tw)(i.eI),N=(0,f.useDeferredValue)(M),Y=(0,G.useLazyLoadQuery)(r,C,{fetchKey:N===i.eI?void 0:N,fetchPolicy:N===i.eI?"store-and-network":"network-only"}),{artifacts:ee,defaultArtifactRegistry:te,total:ne}=Y,ae="HUGGINGFACE"===(null===te||void 0===te?void 0:te.type),re=L.mode;return(0,W.jsxs)(K.OO,{direction:"column",align:"stretch",gap:"md",children:[(0,W.jsx)(c.A,{gutter:[16,16],children:(0,W.jsx)(d.A,{xs:12,sm:8,lg:6,xl:4,children:(0,W.jsx)(u.A,{size:"small",variant:"borderless",hoverable:!0,style:{cursor:"pointer",border:`1px solid ${t.colorPrimary}`},children:(0,W.jsx)(P,{title:"MODEL",value:ne.count,prefix:(0,W.jsx)(z,{size:16}),valueStyle:{color:t.colorPrimary}})})})}),(0,W.jsx)(K.Zu,{activeTabKey:"artifacts",tabList:[{key:"artifacts",tab:e("reservoirPage.ReservoirArtifacts")}],styles:{body:{padding:`${t.paddingSM}px ${t.paddingLG}px ${t.paddingLG}px ${t.paddingLG}px`}},children:(0,W.jsxs)(K.OO,{direction:"column",align:"stretch",gap:"sm",children:[(0,W.jsxs)(K.OO,{justify:"between",wrap:"wrap",gap:"sm",children:[(0,W.jsxs)(K.OO,{gap:"sm",align:"start",style:{flexShrink:1},wrap:"wrap",children:[(0,W.jsx)(J.A,{optionType:"button",options:[{label:e("reservoirPage.Active"),value:"ALIVE"},{label:e("reservoirPage.Inactive"),value:"DELETED"}],value:L.mode,onChange:e=>{T({mode:e.target.value},"replaceIn"),I({current:1}),m([]),y([]),v([])}}),(0,W.jsx)(K.tX,{combinationMode:"AND",onChange:e=>{T({filter:null!==e&&void 0!==e?e:{}},"replaceIn")},value:L.filter,filterProperties:[{fixedOperator:"contains",key:"name",propertyLabel:e("reservoirPage.Name"),type:"string"},{fixedOperator:"contains",key:"source",propertyLabel:e("reservoirPage.Source"),type:"string"},{fixedOperator:"contains",key:"registry",propertyLabel:e("reservoirPage.Registry"),type:"string"}]})]}),(0,W.jsxs)(K.OO,{gap:"sm",align:"center",children:[g.length>0&&(0,W.jsxs)(K.OO,{gap:"xs",children:[(0,W.jsx)(B.A.Text,{children:e("general.NSelected",{count:g.length})}),(0,W.jsx)($.A,{title:e("ALIVE"===re?"reservoirPage.Deactivate":"reservoirPage.Activate"),children:(0,W.jsx)(w.Ay,{icon:"ALIVE"===re?(0,W.jsx)(H.A,{}):(0,W.jsx)(_.A,{}),style:{color:"ALIVE"===re?t.colorError:t.colorInfo},onClick:()=>{"ALIVE"===re?y(g.flatMap((e=>e.data))):v(g.flatMap((e=>e.data)))}})})]}),(0,W.jsx)(X.A,{value:M,autoUpdateDelay:1e4,loading:N!==M,onChange:()=>{R()}}),ae&&(0,W.jsx)(w.Ay,{type:"primary",icon:(0,W.jsx)(K.KB,{style:{fontSize:"1.5em"}}),onClick:()=>h(),children:e("reservoirPage.FromHuggingFace")})]})]}),(0,W.jsx)(K.N3,{artifactFragment:ee.edges.map((e=>e.node)),onClickPull:(e,t)=>{ee.edges.forEach((n=>{if(n.node.id===e)return S(n.node),void n.node.revisions.edges.forEach((e=>{e.node.id!==t||F([e.node])}))}))},onClickDelete:e=>{ee.edges.forEach((t=>{t.node.id!==e||y([t.node])}))},onClickRestore:e=>{ee.edges.forEach((t=>{t.node.id!==e||v([t.node])}))},rowSelection:{type:"checkbox",onChange:e=>{const t=ee.edges.map((e=>e.node.id));m((n=>{const a=n.filter((e=>!t.includes(e.id))),r=ee.edges.filter((t=>e.includes(t.node.id))).map((e=>({id:e.node.id,data:e.node})));return a.concat(r)}))},selectedRowKeys:g.map((e=>e.id))},loading:C!==D,pagination:{pageSize:O.pageSize,current:O.current,total:ee.count,onChange:(e,t)=>{V().isNumber(e)&&V().isNumber(t)&&I({current:e,pageSize:t})}}})]})}),(0,W.jsx)(K.VC,{selectedArtifactFrgmt:k,selectedArtifactRevisionFrgmt:b,open:!!k&&!V().isEmpty(b),onOk:(t,n)=>{S(null),F([]),n.forEach((t=>{a({message:e("reservoirPage.PullingArtifact",{name:t.artifact.name,version:t.version}),type:"info",open:!0,duration:0,backgroundTask:{status:"pending",taskId:t.taskId,promise:null,percent:0,onChange:{resolved:(n,a)=>({type:"success",message:e("reservoirPage.SuccessFullyPulledArtifact",{name:t.artifact.name,version:t.version}),toText:e("reservoirPage.GoToArtifact"),to:`/reservoir/${t.artifact.id}`}),rejected:(n,a)=>e("reservoirPage.FailedToPullArtifact",{name:t.artifact.name,version:t.version})}}})}))},onCancel:()=>{S(null),F([])}}),(0,W.jsx)(K.lC,{open:E,onOk:(e,t)=>{h(),n(`/reservoir/${(0,K.om)(t)}`)},onCancel:h}),(0,W.jsx)(K.rl,{open:!!p.length,selectedArtifactsFragment:p,onCancel:()=>y([]),onOk:()=>{R(),y([]),m([])}}),(0,W.jsx)(K.oi,{open:!!A.length,selectedArtifactsFragment:A,onCancel:()=>v([]),onOk:()=>{R(),v([]),m([])}})]})}},92498:(e,t,n)=>{n.d(t,{A:()=>a});const a=(0,n(5335).A)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},26433:(e,t,n)=>{n.d(t,{A:()=>a});const a=(0,n(5335).A)("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]])}}]);
//# sourceMappingURL=935.5ff42078.chunk.js.map