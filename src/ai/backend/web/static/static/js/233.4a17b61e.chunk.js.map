{"version":3,"file":"static/js/233.4a17b61e.chunk.js","mappings":"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","sources":["components/DoubleTag.tsx","components/ImageEnvironmentSelectFormItems.tsx","components/ImageMetaIcon.tsx","components/SliderInputFormItem.tsx","components/TextHighlighter.tsx","components/__generated__/ImageEnvironmentSelectFormItemsQuery.graphql.ts","hooks/backendai.tsx"],"sourcesContent":["import Flex from './Flex';\nimport { Tag } from 'antd';\nimport _ from 'lodash';\nimport React from 'react';\n\nexport type DoubleTagObjectValue = {\n  label: ValueType;\n  color?: string;\n};\n\ntype ValueType = string | React.ReactNode;\nconst DoubleTag: React.FC<{\n  values?: ValueType[] | DoubleTagObjectValue[];\n}> = ({ values = [] }) => {\n  if (values.length === 0) return null;\n  let objectValues: DoubleTagObjectValue[];\n  if (\n    values[0] &&\n    (typeof values[0] === 'string' || React.isValidElement(values[0]))\n  ) {\n    objectValues = values.map(\n      (value) =>\n        ({\n          label: value,\n          color: 'blue',\n        }) as DoubleTagObjectValue,\n    );\n  } else {\n    objectValues = values as DoubleTagObjectValue[];\n  }\n\n  return (\n    <Flex direction=\"row\">\n      {_.map(objectValues, (objValue, idx) => {\n        return (\n          <Tag\n            key={idx}\n            style={\n              _.last(objectValues) === objValue\n                ? undefined\n                : { margin: 0, marginRight: -1, zIndex: 1 }\n            }\n            color={objValue.color}\n          >\n            {objValue.label}\n          </Tag>\n        );\n      })}\n    </Flex>\n  );\n};\n\nexport default DoubleTag;\n","import {\n  useBackendaiImageMetaData,\n  useSuspendedBackendaiClient,\n} from '../hooks';\nimport DoubleTag from './DoubleTag';\nimport Flex from './Flex';\nimport ImageMetaIcon from './ImageMetaIcon';\nimport TextHighlighter from './TextHighlighter';\nimport {\n  ImageEnvironmentSelectFormItemsQuery,\n  ImageEnvironmentSelectFormItemsQuery$data,\n} from './__generated__/ImageEnvironmentSelectFormItemsQuery.graphql';\nimport { Divider, Form, Input, RefSelectProps, Select, Tag, theme } from 'antd';\nimport graphql from 'babel-plugin-relay/macro';\nimport _ from 'lodash';\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useLazyLoadQuery } from 'react-relay';\n\nexport type Image = NonNullable<\n  NonNullable<ImageEnvironmentSelectFormItemsQuery$data>['images']\n>[0];\n\ntype ImageGroup = {\n  groupName: string;\n  environmentGroups: {\n    environmentName: string;\n    displayName: string;\n    prefix?: string;\n    images: Image[];\n  }[];\n};\n\nexport type ImageEnvironmentFormInput = {\n  environments: {\n    environment: string;\n    version: string;\n    image: Image | undefined;\n  };\n};\n\ninterface ImageEnvironmentSelectFormItemsProps {\n  filter?: (image: Image) => boolean;\n  showPrivate?: boolean;\n}\n\nconst getImageFullName = (image: Image) => {\n  return image\n    ? `${image.registry}/${image.name}:${image.tag}@${image.architecture}`\n    : undefined;\n};\n\nfunction compareVersions(version1: string, version2: string): number {\n  const v1 = version1.split('.').map(Number);\n  const v2 = version2.split('.').map(Number);\n\n  for (let i = 0; i < Math.max(v1.length, v2.length); i++) {\n    const num1 = v1[i] || 0;\n    const num2 = v2[i] || 0;\n\n    if (num1 > num2) {\n      return 1;\n    } else if (num1 < num2) {\n      return -1;\n    }\n  }\n\n  return 0;\n}\nconst ImageEnvironmentSelectFormItems: React.FC<\n  ImageEnvironmentSelectFormItemsProps\n> = ({ filter, showPrivate }) => {\n  // TODO: fix below without useSuspendedBackendaiClient\n  // Before fetching on relay environment, BAI client should be ready\n  useSuspendedBackendaiClient();\n\n  const form = Form.useFormInstance<ImageEnvironmentFormInput>();\n  Form.useWatch('environments', form);\n\n  const [environmentSearch, setEnvironmentSearch] = useState('');\n  const [versionSearch, setVersionSearch] = useState('');\n  const { t } = useTranslation();\n  const [metadata, { getImageMeta }] = useBackendaiImageMetaData();\n  const { token } = theme.useToken();\n\n  const envSelectRef = useRef<RefSelectProps>(null);\n  const versionSelectRef = useRef<RefSelectProps>(null);\n\n  const { images } = useLazyLoadQuery<ImageEnvironmentSelectFormItemsQuery>(\n    graphql`\n      query ImageEnvironmentSelectFormItemsQuery($installed: Boolean) {\n        images(is_installed: $installed) {\n          name\n          humanized_name\n          tag\n          registry\n          architecture\n          digest\n          installed\n          resource_limits {\n            key\n            min\n            max\n          }\n          labels {\n            key\n            value\n          }\n        }\n      }\n    `,\n    {\n      installed: true,\n    },\n    {\n      fetchPolicy: 'store-and-network',\n    },\n  );\n\n  // console.log('nextEnvironmentName form', form.getFieldValue('environments'));\n  // console.log('nextEnvironmentName form', currentEnvironmentsFormData);\n  // If not initial value, select first value\n  // auto select when relative field is changed\n  useEffect(() => {\n    // if not initial value, select first value\n    const nextEnvironmentName =\n      form.getFieldValue('environments')?.environment ||\n      imageGroups[0]?.environmentGroups[0]?.environmentName;\n\n    let nextEnvironmentGroup: ImageGroup['environmentGroups'][0] | undefined;\n    _.find(imageGroups, (group) => {\n      return _.find(group.environmentGroups, (environment) => {\n        if (environment.environmentName === nextEnvironmentName) {\n          nextEnvironmentGroup = environment;\n          return true;\n        } else {\n          return false;\n        }\n      });\n    });\n\n    // if current version does'nt exist in next environment group, select a version of the first image of next environment group\n    if (\n      !_.find(\n        nextEnvironmentGroup?.images,\n        (image) =>\n          form.getFieldValue('environments')?.version ===\n          getImageFullName(image),\n      )\n    ) {\n      const nextNewImage = nextEnvironmentGroup?.images[0];\n      if (nextNewImage) {\n        form.setFieldsValue({\n          environments: {\n            environment: nextEnvironmentName,\n            version: getImageFullName(nextNewImage),\n            image: nextNewImage,\n          },\n        });\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [form.getFieldValue('environments')?.environment]);\n\n  const isPrivateImage = (image: Image) => {\n    return _.some(image?.labels, (label) => {\n      return (\n        label?.key === 'ai.backend.features' &&\n        label?.value?.split(' ').includes('private')\n      );\n    });\n  };\n  const imageGroups: ImageGroup[] = useMemo(\n    () =>\n      _.chain(images)\n        .filter((image) => {\n          return (\n            (showPrivate ? true : !isPrivateImage(image)) &&\n            (filter ? filter(image) : true)\n          );\n        })\n        .groupBy((image) => {\n          // group by using `group` property of image info\n          return (\n            metadata?.imageInfo[getImageMeta(getImageFullName(image) || '').key]\n              ?.group || 'Custom Environments'\n          );\n        })\n        .map((images, groupName) => {\n          return {\n            groupName,\n            environmentGroups: _.chain(images)\n              // sub group by using (environment) `name` property of image info\n              .groupBy((image) => {\n                return (\n                  // metadata?.imageInfo[\n                  //   getImageMeta(getImageFullName(image) || \"\").key\n                  // ]?.name || image?.name\n                  image?.name\n                );\n              })\n              .map((images, environmentName) => ({\n                environmentName,\n                displayName:\n                  metadata?.imageInfo[environmentName.split('/')?.[1]]?.name ||\n                  environmentName,\n                prefix: environmentName.split('/')?.[0],\n                images: images.sort((a, b) =>\n                  compareVersions(\n                    // latest version comes first\n                    b?.tag?.split('-')?.[0] ?? '',\n                    a?.tag?.split('-')?.[0] ?? '',\n                  ),\n                ),\n              }))\n              .sortBy((item) => item.displayName)\n              .value(),\n          };\n        })\n        .sortBy((item) => item.groupName)\n        .value(),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [images, metadata, filter, showPrivate],\n  );\n\n  // support search image by full name\n  const { fullNameMatchedImage } = useMemo(() => {\n    let fullNameMatchedImage: Image | undefined;\n    let fullNameMatchedImageGroup:\n      | ImageGroup['environmentGroups'][0]\n      | undefined;\n    if (environmentSearch.length) {\n      _.chain(\n        imageGroups\n          .flatMap((group) => group.environmentGroups)\n          .find((envGroup) => {\n            fullNameMatchedImageGroup = envGroup;\n            fullNameMatchedImage = _.find(envGroup.images, (image) => {\n              return getImageFullName(image) === environmentSearch;\n            });\n            return !!fullNameMatchedImage;\n          }),\n      ).value();\n    }\n    return {\n      fullNameMatchedImage,\n      fullNameMatchedImageGroup,\n    };\n  }, [environmentSearch, imageGroups]);\n\n  return (\n    <>\n      <Form.Item\n        name={['environments', 'environment']}\n        label={`${t('session.launcher.Environments')} / ${t(\n          'session.launcher.Version',\n        )}`}\n        rules={[{ required: true }]}\n        style={{ marginBottom: 10 }}\n      >\n        <Select\n          ref={envSelectRef}\n          showSearch\n          // autoClearSearchValue\n          labelInValue={false}\n          searchValue={environmentSearch}\n          onSearch={setEnvironmentSearch}\n          defaultActiveFirstOption={true}\n          optionLabelProp=\"label\"\n          optionFilterProp=\"filterValue\"\n          onChange={(value) => {\n            if (fullNameMatchedImage) {\n              form.setFieldsValue({\n                environments: {\n                  environment: fullNameMatchedImage?.name || '',\n                  version: getImageFullName(fullNameMatchedImage),\n                  image: fullNameMatchedImage,\n                },\n              });\n            }\n          }}\n        >\n          {fullNameMatchedImage ? (\n            <Select.Option\n              value={fullNameMatchedImage?.name}\n              filterValue={getImageFullName(fullNameMatchedImage)}\n            >\n              <Flex\n                direction=\"row\"\n                align=\"center\"\n                gap=\"xs\"\n                style={{ display: 'inline-flex' }}\n              >\n                <ImageMetaIcon\n                  image={getImageFullName(fullNameMatchedImage) || ''}\n                  style={{\n                    width: 15,\n                    height: 15,\n                  }}\n                />\n                {getImageFullName(fullNameMatchedImage)}\n              </Flex>\n            </Select.Option>\n          ) : (\n            _.map(imageGroups, (group) => {\n              return (\n                <Select.OptGroup key={group.groupName} label={group.groupName}>\n                  {_.map(group.environmentGroups, (environmentGroup) => {\n                    const firstImage = environmentGroup.images[0];\n                    const currentMetaImageInfo =\n                      metadata?.imageInfo[\n                        environmentGroup.environmentName.split('/')?.[1]\n                      ];\n\n                    const extraFilterValues: string[] = [];\n                    let environmentPrefixTag = null;\n                    if (\n                      environmentGroup.prefix &&\n                      !['lablup', 'cloud', 'stable'].includes(\n                        environmentGroup.prefix,\n                      )\n                    ) {\n                      extraFilterValues.push(environmentGroup.prefix);\n                      environmentPrefixTag = (\n                        <Tag color=\"purple\">{environmentGroup.prefix}</Tag>\n                      );\n                    }\n\n                    const tagsFromMetaImageInfoLabel = _.map(\n                      currentMetaImageInfo?.label,\n                      (label) => {\n                        if (\n                          _.isUndefined(label.category) &&\n                          label.tag &&\n                          label.color\n                        ) {\n                          extraFilterValues.push(label.tag);\n                          return (\n                            <Tag color={label.color}>\n                              <TextHighlighter keyword={environmentSearch}>\n                                {label.tag}\n                              </TextHighlighter>\n                            </Tag>\n                          );\n                        }\n                        return null;\n                      },\n                    );\n                    return (\n                      <Select.Option\n                        key={environmentGroup.environmentName}\n                        value={environmentGroup.environmentName}\n                        filterValue={\n                          environmentGroup.displayName +\n                          '\\t' +\n                          extraFilterValues.join('\\t')\n                        }\n                        label={\n                          <Flex\n                            direction=\"row\"\n                            align=\"center\"\n                            gap=\"xs\"\n                            style={{ display: 'inline-flex' }}\n                          >\n                            <ImageMetaIcon\n                              image={getImageFullName(firstImage) || ''}\n                              style={{\n                                width: 15,\n                                height: 15,\n                              }}\n                            />\n                            {environmentGroup.displayName}\n                          </Flex>\n                        }\n                      >\n                        <Flex direction=\"row\" justify=\"between\">\n                          <Flex direction=\"row\" align=\"center\" gap=\"xs\">\n                            <ImageMetaIcon\n                              image={getImageFullName(firstImage) || ''}\n                              style={{\n                                width: 15,\n                                height: 15,\n                              }}\n                            />\n                            <TextHighlighter keyword={environmentSearch}>\n                              {environmentGroup.displayName}\n                            </TextHighlighter>\n                          </Flex>\n                          {environmentPrefixTag}\n                          {tagsFromMetaImageInfoLabel}\n                        </Flex>\n                      </Select.Option>\n                    );\n                  })}\n                </Select.OptGroup>\n              );\n            })\n          )}\n        </Select>\n      </Form.Item>\n      <Form.Item\n        noStyle\n        shouldUpdate={(prev, cur) =>\n          prev.environments?.environments !== cur.environments?.environment\n        }\n      >\n        {({ getFieldValue }) => {\n          let selectedEnvironmentGroup:\n            | ImageGroup['environmentGroups'][0]\n            | undefined;\n          _.find(imageGroups, (group) => {\n            return _.find(group.environmentGroups, (environment) => {\n              if (\n                environment.environmentName ===\n                getFieldValue('environments')?.environment\n              ) {\n                selectedEnvironmentGroup = environment;\n                return true;\n              } else {\n                return false;\n              }\n            });\n          });\n          return (\n            <Form.Item\n              name={['environments', 'version']}\n              rules={[{ required: true }]}\n            >\n              <Select\n                ref={versionSelectRef}\n                onChange={() => {}}\n                showSearch\n                searchValue={versionSearch}\n                onSearch={setVersionSearch}\n                // autoClearSearchValue\n                optionFilterProp=\"filterValue\"\n                optionLabelProp=\"label\"\n                dropdownRender={(menu) => (\n                  <>\n                    <Flex\n                      style={{\n                        fontWeight: token.fontWeightStrong,\n                        paddingLeft: token.paddingSM,\n                      }}\n                    >\n                      {t('session.launcher.Version')}\n                      <Divider type=\"vertical\" />\n                      {t('session.launcher.Base')}\n                      <Divider type=\"vertical\" />\n                      {t('session.launcher.Architecture')}\n                      <Divider type=\"vertical\" />\n                      {t('session.launcher.Requirements')}\n                    </Flex>\n                    <Divider style={{ margin: '8px 0' }} />\n                    {menu}\n                  </>\n                )}\n              >\n                {_.map(\n                  _.uniqBy(selectedEnvironmentGroup?.images, 'digest'),\n\n                  (image) => {\n                    const [version, tag, ...requirements] = image?.tag?.split(\n                      '-',\n                    ) || ['', '', ''];\n\n                    let tagAlias = metadata?.tagAlias[tag];\n                    if (!tagAlias) {\n                      for (const [key, replaceString] of Object.entries(\n                        metadata?.tagReplace || {},\n                      )) {\n                        const pattern = new RegExp(key);\n                        if (pattern.test(tag)) {\n                          tagAlias = tag?.replace(pattern, replaceString);\n                        }\n                      }\n                      if (!tagAlias) {\n                        tagAlias = tag;\n                      }\n                    }\n\n                    const extraFilterValues: string[] = [];\n                    const requirementTags =\n                      requirements.length > 0 ? (\n                        <Flex\n                          direction=\"row\"\n                          wrap=\"wrap\"\n                          style={{\n                            flex: 1,\n                          }}\n                          gap={'xxs'}\n                        >\n                          {_.map(requirements, (requirement, idx) => (\n                            <DoubleTag\n                              key={idx}\n                              values={\n                                metadata?.tagAlias[requirement]\n                                  ?.split(':')\n                                  .map((str) => {\n                                    extraFilterValues.push(str);\n                                    return (\n                                      <TextHighlighter keyword={versionSearch}>\n                                        {str}\n                                      </TextHighlighter>\n                                    );\n                                  }) || requirements\n                              }\n                            />\n                          ))}\n                        </Flex>\n                      ) : (\n                        '-'\n                      );\n                    return (\n                      <Select.Option\n                        key={image?.digest}\n                        value={getImageFullName(image)}\n                        filterValue={[\n                          version,\n                          tagAlias,\n                          image?.architecture,\n                          ...extraFilterValues,\n                        ].join('\\t')}\n                        label={[\n                          version,\n                          tagAlias,\n                          image?.architecture,\n                          requirements.length > 0\n                            ? requirements.join(', ')\n                            : '-',\n                        ].join(' | ')}\n                      >\n                        <Flex direction=\"row\">\n                          <TextHighlighter keyword={versionSearch}>\n                            {version}\n                          </TextHighlighter>\n                          <Divider type=\"vertical\" />\n                          <TextHighlighter keyword={versionSearch}>\n                            {tagAlias}\n                          </TextHighlighter>\n                          <Divider type=\"vertical\" />\n                          <TextHighlighter keyword={versionSearch}>\n                            {image?.architecture}\n                          </TextHighlighter>\n                          <Divider type=\"vertical\" />\n                          {requirementTags}\n                        </Flex>\n                      </Select.Option>\n                    );\n                  },\n                )}\n              </Select>\n            </Form.Item>\n          );\n        }}\n      </Form.Item>\n      <Form.Item noStyle hidden name={['environments', 'image']}>\n        <Input />\n      </Form.Item>\n    </>\n  );\n};\n\nexport default ImageEnvironmentSelectFormItems;\n","import { useBackendaiImageMetaData } from '../hooks';\nimport React from 'react';\n\nconst ImageMetaIcon: React.FC<{\n  image: string | null;\n  style?: React.CSSProperties;\n  border?: boolean;\n  alt?: string | null;\n}> = ({ image, style = {} }, bordered, alt = '') => {\n  const [, { getImageIcon }] = useBackendaiImageMetaData();\n\n  return (\n    <img\n      src={getImageIcon(image)}\n      style={{\n        width: '1em',\n        height: '1em',\n        ...style,\n      }}\n      alt={alt}\n    />\n  );\n};\n\nexport default React.memo(ImageMetaIcon);\n","import Flex from './Flex';\nimport {\n  InputNumber,\n  Slider,\n  Form,\n  SliderSingleProps,\n  InputNumberProps,\n} from 'antd';\nimport { NamePath } from 'antd/es/form/interface';\nimport { SliderRangeProps } from 'antd/es/slider';\nimport { FormItemProps } from 'antd/lib/form/FormItem';\nimport React from 'react';\n\ninterface SliderInputProps extends Omit<FormItemProps, 'name'> {\n  min?: number;\n  max?: number;\n  step?: number;\n  name: NamePath;\n  inputNumberProps?: InputNumberProps;\n  sliderProps?: SliderSingleProps | SliderRangeProps;\n}\nconst SliderInputItem: React.FC<SliderInputProps> = ({\n  name,\n  min,\n  max,\n  step,\n  rules,\n  required,\n  inputNumberProps,\n  sliderProps,\n  initialValue,\n  ...formItemProps\n}) => {\n  return (\n    <Form.Item required={required} {...formItemProps}>\n      <Flex direction=\"row\" gap={'md'}>\n        <Flex direction=\"column\" align=\"stretch\" style={{ flex: 3 }}>\n          <Form.Item\n            name={name}\n            noStyle\n            rules={rules}\n            initialValue={initialValue}\n          >\n            <Slider max={max} min={min} step={step} {...sliderProps} />\n          </Form.Item>\n        </Flex>\n        <Flex style={{ flex: 2 }}>\n          <Form.Item name={name} noStyle initialValue={initialValue}>\n            <InputNumber\n              max={max}\n              min={min}\n              step={step}\n              onStep={(value, info) => {\n                console.log(value, info);\n              }}\n              {...inputNumberProps}\n            />\n          </Form.Item>\n        </Flex>\n      </Flex>\n    </Form.Item>\n    // <Row justify=\"space-around\" align=\"middle\" gutter={20}>\n    //   <Col span={6}>\n    //     <p>Resource</p>\n    //   </Col>\n    //   <Col span={8}>\n    //     <Slider\n    //       min={minValue}\n    //       max={maxValue}\n    //       onChange={onChange}\n    //       value={typeof inputValue === \"number\" ? inputValue : 0}\n    //       step={0.01}\n    //     />\n    //   </Col>\n    //   <Col span={6}>\n    //     <InputNumber\n    //       min={minValue}\n    //       max={maxValue}\n    //       style={\n    //         {\n    //           /* use theme config */\n    //         }\n    //       }\n    //       step={0.01}\n    //       value={inputValue}\n    //       onChange={onChange}\n    //     />\n    //   </Col>\n    // </Row>\n  );\n};\n\nexport default SliderInputItem;\n","import { theme } from 'antd';\nimport React from 'react';\n\ninterface TextHighlighterProps {\n  children?: string | null;\n  keyword: string;\n  style?: React.CSSProperties;\n}\n\nconst TextHighlighter: React.FC<TextHighlighterProps> = ({\n  children,\n  keyword,\n  style,\n}) => {\n  if (!children) return null;\n\n  const keyIndex = children.toLowerCase().indexOf(keyword?.toLowerCase());\n  const { token } = theme.useToken() || '#F1A239';\n  return keyIndex >= 0 ? (\n    <span>\n      {children.substring(0, keyIndex)}\n      <span style={{ backgroundColor: token.colorWarningHover, ...style }}>\n        {children.substring(keyIndex, keyIndex + keyword.length)}\n      </span>\n      {children.substring(keyIndex + keyword.length)}\n    </span>\n  ) : (\n    <span>{children}</span>\n  );\n};\n\nexport default TextHighlighter;\n","/**\n * @generated SignedSource<<7a44bb06b700bc6990b9f284967ae6c0>>\n * @lightSyntaxTransform\n * @nogrep\n */\n\n/* tslint:disable */\n/* eslint-disable */\n// @ts-nocheck\n\nimport { ConcreteRequest, Query } from 'relay-runtime';\nexport type ImageEnvironmentSelectFormItemsQuery$variables = {\n  installed?: boolean | null;\n};\nexport type ImageEnvironmentSelectFormItemsQuery$data = {\n  readonly images: ReadonlyArray<{\n    readonly architecture: string | null;\n    readonly digest: string | null;\n    readonly humanized_name: string | null;\n    readonly installed: boolean | null;\n    readonly labels: ReadonlyArray<{\n      readonly key: string | null;\n      readonly value: string | null;\n    } | null> | null;\n    readonly name: string | null;\n    readonly registry: string | null;\n    readonly resource_limits: ReadonlyArray<{\n      readonly key: string | null;\n      readonly max: string | null;\n      readonly min: string | null;\n    } | null> | null;\n    readonly tag: string | null;\n  } | null> | null;\n};\nexport type ImageEnvironmentSelectFormItemsQuery = {\n  response: ImageEnvironmentSelectFormItemsQuery$data;\n  variables: ImageEnvironmentSelectFormItemsQuery$variables;\n};\n\nconst node: ConcreteRequest = (function(){\nvar v0 = [\n  {\n    \"defaultValue\": null,\n    \"kind\": \"LocalArgument\",\n    \"name\": \"installed\"\n  }\n],\nv1 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"key\",\n  \"storageKey\": null\n},\nv2 = [\n  {\n    \"alias\": null,\n    \"args\": [\n      {\n        \"kind\": \"Variable\",\n        \"name\": \"is_installed\",\n        \"variableName\": \"installed\"\n      }\n    ],\n    \"concreteType\": \"Image\",\n    \"kind\": \"LinkedField\",\n    \"name\": \"images\",\n    \"plural\": true,\n    \"selections\": [\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"name\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"humanized_name\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"tag\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"registry\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"architecture\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"digest\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"installed\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"concreteType\": \"ResourceLimit\",\n        \"kind\": \"LinkedField\",\n        \"name\": \"resource_limits\",\n        \"plural\": true,\n        \"selections\": [\n          (v1/*: any*/),\n          {\n            \"alias\": null,\n            \"args\": null,\n            \"kind\": \"ScalarField\",\n            \"name\": \"min\",\n            \"storageKey\": null\n          },\n          {\n            \"alias\": null,\n            \"args\": null,\n            \"kind\": \"ScalarField\",\n            \"name\": \"max\",\n            \"storageKey\": null\n          }\n        ],\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"concreteType\": \"KVPair\",\n        \"kind\": \"LinkedField\",\n        \"name\": \"labels\",\n        \"plural\": true,\n        \"selections\": [\n          (v1/*: any*/),\n          {\n            \"alias\": null,\n            \"args\": null,\n            \"kind\": \"ScalarField\",\n            \"name\": \"value\",\n            \"storageKey\": null\n          }\n        ],\n        \"storageKey\": null\n      }\n    ],\n    \"storageKey\": null\n  }\n];\nreturn {\n  \"fragment\": {\n    \"argumentDefinitions\": (v0/*: any*/),\n    \"kind\": \"Fragment\",\n    \"metadata\": null,\n    \"name\": \"ImageEnvironmentSelectFormItemsQuery\",\n    \"selections\": (v2/*: any*/),\n    \"type\": \"Queries\",\n    \"abstractKey\": null\n  },\n  \"kind\": \"Request\",\n  \"operation\": {\n    \"argumentDefinitions\": (v0/*: any*/),\n    \"kind\": \"Operation\",\n    \"name\": \"ImageEnvironmentSelectFormItemsQuery\",\n    \"selections\": (v2/*: any*/)\n  },\n  \"params\": {\n    \"cacheID\": \"ea71f4a3948d4742dd6bb11ef80a8300\",\n    \"id\": null,\n    \"metadata\": {},\n    \"name\": \"ImageEnvironmentSelectFormItemsQuery\",\n    \"operationKind\": \"query\",\n    \"text\": \"query ImageEnvironmentSelectFormItemsQuery(\\n  $installed: Boolean\\n) {\\n  images(is_installed: $installed) {\\n    name\\n    humanized_name\\n    tag\\n    registry\\n    architecture\\n    digest\\n    installed\\n    resource_limits {\\n      key\\n      min\\n      max\\n    }\\n    labels {\\n      key\\n      value\\n    }\\n  }\\n}\\n\"\n  }\n};\n})();\n\n(node as any).hash = \"33367bd6e1532b42b61629ef9d3dc46b\";\n\nexport default node;\n","import { useSuspendedBackendaiClient, useUpdatableState } from '.';\nimport { maskString } from '../helper';\nimport { useTanMutation, useTanQuery } from './reactQueryAlias';\nimport _ from 'lodash';\nimport { useEffect, useState } from 'react';\n\nexport interface QuotaScope {\n  id: string;\n  quota_scope_id: string;\n  storage_host_name: string;\n  details: {\n    hard_limit_bytes: number | null;\n    usage_bytes: number | null;\n    usage_count: number | null;\n  };\n}\n\nexport const useResourceSlots = () => {\n  const [key, checkUpdate] = useUpdatableState('first');\n  // const baiRequestWithPromise = useBaiSignedRequestWithPromise();\n  const baiClient = useSuspendedBackendaiClient();\n  const { data: resourceSlots } = useTanQuery<{\n    cpu?: string;\n    mem?: string;\n    'cuda.shares'?: string;\n    'cuda.device'?: string;\n  }>({\n    queryKey: ['useResourceSlots', key],\n    queryFn: () => {\n      return baiClient.get_resource_slots();\n    },\n    staleTime: 0,\n  });\n  return [\n    resourceSlots,\n    {\n      refresh: () => checkUpdate(),\n    },\n  ] as const;\n};\n\ninterface UserInfo {\n  full_name: string;\n  email: string;\n}\n\ntype mutationOptions<T> = {\n  onSuccess?: (value: T) => void;\n  onError?: (error: any) => void;\n};\n\nexport const useCurrentUserInfo = () => {\n  const baiClient = useSuspendedBackendaiClient();\n\n  const [userInfo, _setUserInfo] = useState<UserInfo>({\n    full_name: baiClient.full_name,\n    email: baiClient.email,\n  });\n\n  const getUsername = () => {\n    let name: string =\n      _.trim(userInfo.full_name).length > 0\n        ? userInfo.full_name\n        : userInfo.email;\n    // mask username only when the configuration is enabled\n    if (baiClient._config.maskUserInfo) {\n      const maskStartIdx = 2;\n      const emailPattern =\n        /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\n      const isEmail: boolean = emailPattern.test(name);\n      const maskLength = isEmail\n        ? name.split('@')[0].length - maskStartIdx\n        : name.length - maskStartIdx;\n      name = maskString(name, '*', maskStartIdx, maskLength);\n    }\n    return name;\n  };\n\n  useEffect(() => {\n    const handler = (e: any) => {\n      if (baiClient.supports('change-user-name')) {\n        const input = e.detail;\n        _setUserInfo((v) => ({\n          ...v,\n          full_name: input,\n        }));\n      }\n    };\n    document.addEventListener('current-user-info-changed', handler);\n    return () => {\n      document.removeEventListener('current-user-info-changed', handler);\n    };\n  }, [baiClient]);\n\n  const mutationToUpdateUserFullName = useTanMutation({\n    mutationFn: (values: { email: string; full_name: string }) => {\n      return baiClient.update_full_name(values.email, values.full_name);\n    },\n  });\n  const mutationToUpdateUserPassword = useTanMutation({\n    mutationFn: (values: {\n      old_password: string;\n      new_password: string;\n      new_password2: string;\n    }) => {\n      return baiClient.update_password(\n        values.old_password,\n        values.new_password,\n        values.new_password2,\n      );\n    },\n  });\n\n  return [\n    {\n      ...userInfo,\n      username: getUsername(),\n      isPendingMutation:\n        mutationToUpdateUserFullName.isLoading ||\n        mutationToUpdateUserPassword.isLoading,\n    },\n    {\n      updateFullName: (\n        newFullName: string,\n        options?: mutationOptions<string>,\n      ) => {\n        mutationToUpdateUserFullName.mutate(\n          {\n            full_name: newFullName,\n            email: baiClient.email,\n          },\n          {\n            onSuccess: () => {\n              options?.onSuccess && options.onSuccess(newFullName);\n              document.dispatchEvent(\n                new CustomEvent('current-user-info-changed', {\n                  detail: newFullName,\n                }),\n              );\n              _setUserInfo((v) => ({\n                ...v,\n                full_name: newFullName,\n              }));\n            },\n            onError: (error: any) => {\n              options?.onError && options.onError(error);\n            },\n          },\n        );\n      },\n      updatePassword: (\n        params: {\n          old_password: string;\n          new_password: string;\n          new_password2: string;\n        },\n        options?: mutationOptions<undefined>,\n      ) => {\n        mutationToUpdateUserPassword.mutate(params, {\n          onSuccess: () => {\n            options?.onSuccess && options.onSuccess(undefined);\n          },\n          onError: (error: any) => {\n            options?.onError && options.onError(error);\n          },\n        });\n      },\n    },\n  ] as const;\n};\n"],"names":["_ref","objectValues","_ref$values","values","length","React","map","value","label","color","_jsx","Flex","direction","children","_","objValue","idx","Tag","style","undefined","margin","marginRight","zIndex","getImageFullName","image","concat","registry","name","tag","architecture","_form$getFieldValue3","filter","showPrivate","useSuspendedBackendaiClient","form","Form","useFormInstance","useWatch","_useState","useState","_useState2","_slicedToArray","environmentSearch","setEnvironmentSearch","_useState3","_useState4","versionSearch","setVersionSearch","t","useTranslation","_useBackendaiImageMet","useBackendaiImageMetaData","_useBackendaiImageMet2","metadata","getImageMeta","token","theme","useToken","envSelectRef","useRef","versionSelectRef","images","useLazyLoadQuery","_ImageEnvironmentSelectFormItemsQuery","require","installed","fetchPolicy","useEffect","_form$getFieldValue","_imageGroups$","_imageGroups$$environ","_nextEnvironmentGroup","nextEnvironmentGroup","nextEnvironmentName","getFieldValue","environment","imageGroups","environmentGroups","environmentName","group","_form$getFieldValue2","version","_nextEnvironmentGroup2","nextNewImage","setFieldsValue","environments","useMemo","labels","_label$value","key","split","includes","isPrivateImage","groupBy","_metadata$imageInfo$g","imageInfo","groupName","_metadata$imageInfo$e","_environmentName$spli","_environmentName$spli2","displayName","prefix","sort","a","b","_b$tag$split$","_b$tag","_b$tag$split","_a$tag$split$","_a$tag","_a$tag$split","version1","version2","v1","Number","v2","i","Math","max","num1","num2","compareVersions","sortBy","item","_useMemo","fullNameMatchedImage","fullNameMatchedImageGroup","flatMap","find","envGroup","_jsxs","_Fragment","Item","rules","required","marginBottom","Select","ref","showSearch","labelInValue","searchValue","onSearch","defaultActiveFirstOption","optionLabelProp","optionFilterProp","onChange","Option","filterValue","align","gap","display","ImageMetaIcon","width","height","OptGroup","environmentGroup","_environmentGroup$env","firstImage","currentMetaImageInfo","extraFilterValues","environmentPrefixTag","push","tagsFromMetaImageInfoLabel","category","TextHighlighter","keyword","join","justify","noStyle","shouldUpdate","prev","cur","_prev$environments","_cur$environments","_ref2","_selectedEnvironmentG","selectedEnvironmentGroup","_getFieldValue","dropdownRender","menu","fontWeight","fontWeightStrong","paddingLeft","paddingSM","Divider","type","_image$tag","_ref3","_ref4","_toArray","requirements","slice","tagAlias","_i","_Object$entries","Object","entries","tagReplace","_Object$entries$_i","replaceString","pattern","RegExp","test","replace","requirementTags","wrap","flex","requirement","_metadata$tagAlias$re","DoubleTag","str","digest","hidden","Input","bordered","_ref$style","alt","arguments","getImageIcon","src","_objectSpread","min","step","inputNumberProps","sliderProps","initialValue","formItemProps","_objectWithoutProperties","_excluded","Slider","InputNumber","onStep","info","console","log","keyIndex","toLowerCase","indexOf","substring","backgroundColor","colorWarningHover","node","v0","hash","useResourceSlots","_useUpdatableState","useUpdatableState","_useUpdatableState2","checkUpdate","baiClient","useTanQuery","queryKey","queryFn","get_resource_slots","staleTime","data","refresh","useCurrentUserInfo","full_name","email","userInfo","_setUserInfo","handler","e","supports","input","detail","v","document","addEventListener","removeEventListener","mutationToUpdateUserFullName","useTanMutation","mutationFn","update_full_name","mutationToUpdateUserPassword","update_password","old_password","new_password","new_password2","username","_config","maskUserInfo","maskLength","maskString","getUsername","isPendingMutation","isLoading","updateFullName","newFullName","options","mutate","onSuccess","dispatchEvent","CustomEvent","onError","error","updatePassword","params"],"sourceRoot":""}