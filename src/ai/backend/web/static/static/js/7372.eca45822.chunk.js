"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[7372],{27372:(e,s,n)=>{n.r(s),n.d(s,{default:()=>k,passwordPattern:()=>g});var r=n(75045),a=n(32967),o=n(88616),t=n(60040),d=n(90840),i=n(96691),l=n(87447),u=n(74400),c=n(52958),w=n(40262),m=n(83757),p=n(20140),P=n(1426),h=n(9976),b=n(42906);const g=/^(?=.*\d)(?=.*[a-zA-Z])(?=.*[_\W]).{8,}$/,k=()=>{const{value:e,dispatchEvent:s}=(0,t.useWebComponentInfo)();let n;try{n=JSON.parse(e||"")}catch(E){n={open:!1,currentPassword:"",username:"",api_endpoint:""}}const{open:k,currentPassword:A,username:j,api_endpoint:v}=n,{token:f}=l.A.useToken(),[_]=u.A.useForm(),{t:y}=(0,h.Bd)();(0,P.useEffect)((()=>{k&&_.resetFields()}),[k,_]);const C=(0,a.oM)({api_endpoint:v}),x=(0,o.ET)({mutationFn:e=>(0,r.hu)({method:"POST",url:"/server/update-password-no-auth",body:e,client:C})}),S=()=>{_.validateFields().then((e=>{x.mutate({username:j,current_password:A,new_password:e.newPassword},{onSuccess(e,n,r){s("ok",null)},onError(e,s,n){}})}))};return(0,b.jsx)(c.A,{open:k,centered:!0,mask:!1,onCancel:()=>{s("cancel",null)},keyboard:!1,maskClosable:!1,footer:null,width:450,destroyOnClose:!0,forceRender:!0,children:(0,b.jsxs)(d.A,{direction:"column",justify:"start",align:"stretch",gap:"md",style:{alignSelf:"stretch",paddingTop:f.paddingMD,paddingBottom:f.paddingMD},children:[(0,b.jsxs)(w.A.Title,{level:3,style:{margin:0},children:[(0,b.jsx)(i.A,{twoToneColor:f.colorWarning})," ",y("webui.menu.PleaseChangeYourPassword")]}),y("webui.menu.YouMushChangeYourPassword"),(0,b.jsxs)(u.A,{form:_,layout:"vertical",initialValues:{currentPassword:A},disabled:x.isPending,children:[(0,b.jsx)(u.A.Item,{name:"newPassword",label:y("webui.menu.NewPassword"),rules:[{required:!0},{pattern:g,message:y("webui.menu.InvalidPasswordMessage").toString()},()=>({validator:(e,s)=>A===s?Promise.reject(new Error(y("webui.menu.NewPasswordCannotBeSame").toString())):Promise.resolve()})],hasFeedback:!0,children:(0,b.jsx)(m.A.Password,{})}),(0,b.jsx)(u.A.Item,{name:"confirm",label:y("webui.menu.NewPasswordAgain"),dependencies:["newPassword"],hasFeedback:!0,rules:[{required:!0},e=>{let{getFieldValue:s}=e;return{validator:(e,n)=>n&&s("newPassword")!==n?Promise.reject(new Error(y("environment.PasswordsDoNotMatch").toString())):Promise.resolve()}}],children:(0,b.jsx)(m.A.Password,{onPressEnter:S})})]}),(0,b.jsx)(p.Ay,{type:"primary",onClick:S,loading:x.isPending,children:y("webui.menu.Update")})]})})}}}]);
//# sourceMappingURL=7372.eca45822.chunk.js.map