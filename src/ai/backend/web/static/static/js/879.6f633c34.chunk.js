"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[879,805],{56805:function(e,n,a){a.r(n),a.d(n,{default:function(){return J}});var t,i,r,l=a(1413),s=a(74165),o=a(15861),d=a(29439),u=a(43255),c=a(40406),g=a(79045),m=a(70567),y=a(77758),f=a(44925),p=a(88464),k=a(65113),h=a(57054),v=a(38818),b=a(14634),x=a(72887),Z=a(32048),C=a.n(Z),j=a(4519),R=a(81748),F=a(16980),S=a(2556),_=["existingHostnames","containerRegistryFrgmt","onOk"],w=function(e){var n,u=e.existingHostnames,c=e.containerRegistryFrgmt,g=void 0===c?null:c,m=e.onOk,Z=(0,f.Z)(e,_),w=(0,R.$G)().t,K=(0,j.useRef)(null),M=p.ZP.useMessage(),L=(0,d.Z)(M,2),T=L[0],D=L[1],E=k.Z.useModal(),I=(0,d.Z)(E,2),P=I[0],V=I[1],O=(0,F.useFragment)(void 0!==t?t:t=a(49763),g),q=(0,F.useMutation)(void 0!==i?i:i=a(43428)),N=(0,d.Z)(q,2),$=N[0],U=N[1],A=(0,F.useMutation)(void 0!==r?r:r=a(77184)),H=(0,d.Z)(A,2),z=H[0],Q=H[1],B=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(n=K.current)||void 0===n?void 0:n.validateFields().then((function(e){var n={hostname:e.hostname,props:{url:e.config.url,type:e.config.type,project:"docker"===e.config.project?void 0:e.config.project,username:C().isEmpty(e.config.username)?null:e.config.username,password:e.isChangedPassword?C().isEmpty(e.config.password)?null:e.config.password:void 0}};O?(e.isChangedPassword||delete n.props.password,z({variables:n,onCompleted:function(e,n){n?T.error(w("dialog.ErrorOccurred")):m&&m("modify")},onError:function(e){T.error(w("dialog.ErrorOccurred"))}})):$({variables:n,onCompleted:function(e,n){n?T.error(w("dialog.ErrorOccurred")):m&&m("create")},onError:function(e){T.error(w("dialog.ErrorOccurred"))}})})).catch((function(e){})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,S.jsxs)(y.Z,(0,l.Z)((0,l.Z)({title:w(O?"registry.ModifyRegistry":"registry.AddRegistry"),okText:w(O?"button.Save":"button.Add"),confirmLoading:U||Q,onOk:function(){var e;null===(e=K.current)||void 0===e||e.validateFields().then((function(e){var n;C().includes(null===(n=e.config)||void 0===n?void 0:n.type,"harbor")&&(C().isEmpty(e.config.username)||(O?e.isChangedPassword&&C().isEmpty(e.config.password):C().isEmpty(e.config.password)))?P.confirm({title:w("button.Confirm"),content:w("registry.ConfirmNoUserName"),onOk:function(){B()}}):B()})).catch((function(){}))}},Z),{},{destroyOnClose:!0,children:[D,V,(0,S.jsxs)(h.Z,{ref:K,layout:"vertical",requiredMark:"optional",initialValues:O?(0,l.Z)((0,l.Z)({},O),{},{config:(0,l.Z)((0,l.Z)({},O.config),{},{project:(null===(n=O.config)||void 0===n?void 0:n.project)||void 0})}):{config:{type:"docker"}},preserve:!1,children:[(0,S.jsx)(h.Z.Item,{label:w("registry.Hostname"),name:"hostname",required:!0,rules:[{required:!0,message:w("registry.DescHostnameIsEmpty"),pattern:new RegExp("^.+$")},{validator:function(e,n){return!O&&null!==u&&void 0!==u&&u.includes(n)?Promise.reject(w("registry.RegistryHostnameAlreadyExists")):Promise.resolve()}}],children:(0,S.jsx)(v.Z,{disabled:!!O,value:(null===O||void 0===O?void 0:O.hostname)||void 0})}),(0,S.jsx)(h.Z.Item,{name:["config","url"],label:w("registry.RegistryURL"),required:!0,rules:[{required:!0},{validator:function(e,n){if(n){if(!n.startsWith("http://")&&!n.startsWith("https://"))return Promise.reject(w("registry.DescURLStartString"));try{new URL(n)}catch(a){return Promise.reject(w("registry.DescURLFormat"))}}return Promise.resolve()}}],children:(0,S.jsx)(v.Z,{})}),(0,S.jsx)(h.Z.Item,{noStyle:!0,shouldUpdate:function(e,n){var a,t;return C().isEmpty(null===(a=e.config)||void 0===a?void 0:a.password)!==C().isEmpty(null===(t=n.config)||void 0===t?void 0:t.password)},children:function(e){var n=e.validateFields,a=e.getFieldValue;return n([["config","username"]]),(0,S.jsx)(h.Z.Item,{name:["config","username"],label:w("registry.Username"),rules:[{required:!C().isEmpty(a(["config","password"]))}],children:(0,S.jsx)(v.Z,{})})}}),(0,S.jsxs)(h.Z.Item,{label:w("registry.Password"),children:[(0,S.jsx)(h.Z.Item,{noStyle:!0,shouldUpdate:function(e,n){return e.isChangedPassword!==n.isChangedPassword},children:function(e){var n=e.getFieldValue;return(0,S.jsx)(h.Z.Item,{noStyle:!0,name:["config","password"],children:(0,S.jsx)(v.Z.Password,{disabled:!C().isEmpty(O)&&!n("isChangedPassword")})})}}),!C().isEmpty(O)&&(0,S.jsx)(h.Z.Item,{noStyle:!0,name:"isChangedPassword",valuePropName:"checked",children:(0,S.jsx)(b.Z,{onChange:function(e){var n;e.target.checked||(null===(n=K.current)||void 0===n||n.setFieldValue(["config","password"],""))},children:w("webui.menu.ChangePassword")})})]}),(0,S.jsx)(h.Z.Item,{name:["config","type"],label:w("registry.RegistryType"),required:!0,rules:[{required:!0,message:w("registry.PleaseSelectOption")}],children:(0,S.jsx)(x.Z,{options:[{value:"docker"},{value:"harbor"},{value:"harbor2"}],onChange:function(){}})}),(0,S.jsx)(h.Z.Item,{shouldUpdate:function(e,n){var a,t;return(null===e||void 0===e||null===(a=e.config)||void 0===a?void 0:a.type)!==(null===n||void 0===n||null===(t=n.config)||void 0===t?void 0:t.type)},noStyle:!0,children:function(e){return"docker"!==(0,e.getFieldValue)(["config","type"])&&(0,S.jsx)(h.Z.Item,{name:["config","project"],label:w("registry.ProjectName"),required:!0,rules:[{required:!0,message:w("registry.ProjectNameIsRequired")}],children:(0,S.jsx)(x.Z,{mode:"tags",open:!1,tokenSeparators:[","," "],suffixIcon:null})})}})]})]}))},K=a(99277),M=a(72842),L=a(20558),T=a(43596),D=a(28501),E=a(87462),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},P=a(9491),V=function(e,n){return j.createElement(P.Z,(0,E.Z)({},e,{ref:n,icon:I}))};var O,q,N,$=j.forwardRef(V),U=a(33405),A=a(44036),H=a(227),z=a(38812),Q=a(3597),B=a(82548),G=a(62708),W=a(70389),J=function(e){var n=e.style,t=(0,c.Dj)(),i=(0,c.Kr)("initial-fetch"),r=(0,d.Z)(i,2),f=r[0],k=r[1],b=(0,j.useTransition)(),x=(0,d.Z)(b,2),Z=x[0],_=x[1],E=(0,m.w)(),I=p.ZP.useMessage(),P=(0,d.Z)(I,2),V=P[0],J=P[1],X=(0,g.qS)(),Y=(0,d.Z)(X,2)[1].upsertNotification,ee=(0,F.useLazyLoadQuery)(void 0!==O?O:O=a(89332),{domain:t._config.domainName},{fetchPolicy:"store-and-network",fetchKey:f}),ne=ee.container_registries,ae=ee.domain,te=(0,F.useMutation)(void 0!==q?q:q=a(32899)),ie=(0,d.Z)(te,2),re=ie[0],le=ie[1],se=(0,F.useMutation)(void 0!==N?N:N=a(88559)),oe=(0,d.Z)(se,2),de=oe[0],ue=oe[1],ce=(0,R.$G)().t,ge=A.Z.useToken().token,me=(0,j.useState)(null),ye=(0,d.Z)(me,2),fe=ye[0],pe=ye[1],ke=(0,j.useState)(null),he=(0,d.Z)(ke,2),ve=he[0],be=he[1],xe=(0,j.useState)(""),Ze=(0,d.Z)(xe,2),Ce=Ze[0],je=Ze[1],Re=(0,j.useState)(!1),Fe=(0,d.Z)(Re,2),Se=Fe[0],_e=Fe[1],we=(0,j.useState)(),Ke=(0,d.Z)(we,2),Me=Ke[0],Le=Ke[1],Te=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(n){var a,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Y({message:"".concat(n," ").concat(ce("maintenance.RescanImages")),description:ce("registry.UpdatingRegistryInfo"),open:!0,backgroundTask:{status:"pending"},duration:0}),i=function(e){console.log(e),Y({key:a,backgroundTask:{status:"rejected"},duration:1}),e&&e.message&&(globalThis.lablupNotification.text=E.relieve(e.title),globalThis.lablupNotification.detail=e.message,globalThis.lablupNotification.show(!0,e))},t.maintenance.rescan_images(n).then((function(e){var n=e.rescan_images;n.ok?Y({key:a,backgroundTask:{status:"pending",percent:0,taskId:n.task_id,statusDescriptions:{pending:ce("registry.RescanImages"),resolved:ce("registry.RegistryUpdateFinished"),rejected:ce("registry.RegistryUpdateFailed")}}}):Y({key:a,backgroundTask:{status:"rejected"},duration:1})})).catch(i);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,S.jsxs)(K.Z,{direction:"column",align:"stretch",style:(0,l.Z)({flex:1},n),children:[J,(0,S.jsxs)(K.Z,{direction:"row",justify:"end",gap:"sm",style:{padding:ge.paddingSM},children:[(0,S.jsx)(H.Z,{title:ce("button.Refresh"),children:(0,S.jsx)(z.ZP,{loading:Z,icon:(0,S.jsx)(M.Z,{}),onClick:function(){_((function(){k()}))}})}),(0,S.jsx)(z.ZP,{type:"primary",icon:(0,S.jsx)(L.Z,{}),onClick:function(){_e(!0)},children:ce("registry.AddRegistry")})]}),(0,S.jsx)(Q.Z,{rowKey:function(e){return e.id},scroll:{x:"max-content"},pagination:!1,columns:[{title:ce("registry.Hostname"),dataIndex:"hostname"},{title:ce("registry.RegistryURL"),dataIndex:["config","url"]},{title:ce("registry.Type"),dataIndex:["config","type"]},{title:ce("registry.HarborProject"),render:function(e,n){var a;return C().map(null===(a=n.config)||void 0===a?void 0:a.project,(function(e){return(0,S.jsx)(B.Z,{children:e||""},e)}))}},{title:ce("registry.Username"),dataIndex:["config","username"]},{title:ce("registry.Password"),dataIndex:["config","password"]},{title:ce("general.Enabled"),render:function(e,n){var a=C().includes(null===ae||void 0===ae?void 0:ae.allowed_docker_registries,n.hostname);return(0,S.jsx)(G.Z,{checked:Me===n.hostname+f?!a:a,disabled:Z||ue,loading:Me===n.hostname+f,onChange:function(e){if(C().isString(n.hostname)){var a=C().clone((null===ae||void 0===ae?void 0:ae.allowed_docker_registries)||[]);e?a.push(n.hostname):a=C().without(a,n.hostname),Le(n.hostname+f),de({variables:{domain:t._config.domainName,allowed_docker_registries:a},onCompleted:function(n){_((function(){k()})),V.info({key:"registry-enabled",content:ce(e?"registry.RegistryTurnedOn":"registry.RegistryTurnedOff")})}})}}})}},{title:ce("general.Control"),fixed:"right",render:function(e,n,a){return(0,S.jsxs)(K.Z,{children:[(0,S.jsx)(H.Z,{title:ce("button.Edit"),children:(0,S.jsx)(z.ZP,{size:"large",style:{color:ge.colorInfo},type:"text",icon:(0,S.jsx)(T.Z,{}),onClick:function(){pe(n)}})}),(0,S.jsx)(H.Z,{title:ce("button.Delete"),children:(0,S.jsx)(z.ZP,{size:"large",danger:!0,type:"text",icon:(0,S.jsx)(D.Z,{}),onClick:function(){be(n)}})}),(0,S.jsx)(H.Z,{title:ce("maintenance.RescanImages"),children:(0,S.jsx)(z.ZP,{size:"large",type:"text",icon:(0,S.jsx)($,{onClick:function(){n.hostname&&Te(n.hostname)}})})})]})}}],dataSource:(0,u.uU)(ne)}),(0,S.jsx)(w,{containerRegistryFrgmt:fe,existingHostnames:C().map(ne,(function(e){return(null===e||void 0===e?void 0:e.hostname)||""})),open:!!fe||Se,onOk:function(e){"create"===e?(k(),V.info(ce("registry.RegistrySuccessfullyAdded"))):"modify"===e&&V.info(ce("registry.RegistrySuccessfullyModified")),pe(null),_e(!1)},onCancel:function(){pe(null),_e(!1)},centered:!1}),(0,S.jsx)(y.Z,{title:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(U.Z,{style:{color:ge.colorWarning}})," ",ce("dialog.warning.CannotBeUndone")]}),okText:ce("button.Delete"),okButtonProps:{danger:!0,disabled:Ce!==(null===ve||void 0===ve?void 0:ve.hostname)},onOk:function(){ve?re({variables:{hostname:ve.hostname||""},onCompleted:function(e,n){n?(be(null),V.error({key:"registry-deletion-failed",content:ce("dialog.ErrorOccurred")})):(_((function(){k()})),V.info({key:"registry-deleted",content:ce("registry.RegistrySuccessfullyDeleted")}),be(null))},onError:function(e){V.error({key:"registry-deletion-failed",content:ce("dialog.ErrorOccurred")})}}):be(null)},confirmLoading:le,onCancel:function(){be(null)},destroyOnClose:!0,open:!!ve,children:(0,S.jsxs)(K.Z,{direction:"column",align:"stretch",gap:"sm",style:{marginTop:ge.marginMD},children:[(0,S.jsxs)(W.Z.Text,{children:[(0,S.jsx)(W.Z.Text,{code:!0,children:null===ve||void 0===ve?void 0:ve.hostname})," ",ce("registry.TypeRegistryNameToDelete")]}),(0,S.jsx)(h.Z,{children:(0,S.jsx)(h.Z.Item,{name:"confirmText",rules:[{required:!0,message:ce("registry.HostnameDoesNotMatch"),validator:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ce!==(null===ve||void 0===ve?void 0:ve.hostname)){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return e.abrupt("return",Promise.reject());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}],children:(0,S.jsx)(v.Z,{autoComplete:"off",value:Ce,onChange:function(e){return je(e.target.value)}})})})]})})]})}},43428:function(e,n,a){a.r(n);var t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"hostname"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"hostname",variableName:"hostname"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateContainerRegistry",kind:"LinkedField",name:"create_container_registry",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistry",kind:"LinkedField",name:"container_registry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hostname",storageKey:null},{alias:null,args:null,concreteType:"ContainerRegistryConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"password",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ssl_verify",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ContainerRegistryEditorModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ContainerRegistryEditorModalCreateMutation",selections:n},params:{cacheID:"f076fed995ef5122c04aaba2b76d22d5",id:null,metadata:{},name:"ContainerRegistryEditorModalCreateMutation",operationKind:"mutation",text:"mutation ContainerRegistryEditorModalCreateMutation(\n  $hostname: String!\n  $props: CreateContainerRegistryInput!\n) {\n  create_container_registry(hostname: $hostname, props: $props) {\n    container_registry {\n      id\n      hostname\n      config {\n        url\n        type\n        project\n        username\n        password\n        ssl_verify\n      }\n    }\n  }\n}\n"}}}();t.hash="547863dc03f9faf465e8a26175e5a101",n.default=t},49763:function(e,n,a){a.r(n);var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ContainerRegistryEditorModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hostname",storageKey:null},{alias:null,args:null,concreteType:"ContainerRegistryConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ssl_verify",storageKey:null}],storageKey:null}],type:"ContainerRegistry",abstractKey:null,hash:"57f748e00ec698f8b3e133570e377c71"};n.default=t},77184:function(e,n,a){a.r(n);var t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"hostname"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"hostname",variableName:"hostname"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyContainerRegistry",kind:"LinkedField",name:"modify_container_registry",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistry",kind:"LinkedField",name:"container_registry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hostname",storageKey:null},{alias:null,args:null,concreteType:"ContainerRegistryConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"password",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ssl_verify",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ContainerRegistryEditorModalModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ContainerRegistryEditorModalModifyMutation",selections:n},params:{cacheID:"5157cbd573b855028a9856c295dab17c",id:null,metadata:{},name:"ContainerRegistryEditorModalModifyMutation",operationKind:"mutation",text:"mutation ContainerRegistryEditorModalModifyMutation(\n  $hostname: String!\n  $props: ModifyContainerRegistryInput!\n) {\n  modify_container_registry(hostname: $hostname, props: $props) {\n    container_registry {\n      id\n      hostname\n      config {\n        url\n        type\n        project\n        username\n        password\n        ssl_verify\n      }\n    }\n  }\n}\n"}}}();t.hash="0fe59a8682e5d7c502bc48da7cc3320a",n.default=t},32899:function(e,n,a){a.r(n);var t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"hostname"}],n=[{alias:null,args:[{kind:"Variable",name:"hostname",variableName:"hostname"}],concreteType:"DeleteContainerRegistry",kind:"LinkedField",name:"delete_container_registry",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistry",kind:"LinkedField",name:"container_registry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ContainerRegistryListDeleteMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ContainerRegistryListDeleteMutation",selections:n},params:{cacheID:"4482108b7e256e27225f91b432f0a856",id:null,metadata:{},name:"ContainerRegistryListDeleteMutation",operationKind:"mutation",text:"mutation ContainerRegistryListDeleteMutation(\n  $hostname: String!\n) {\n  delete_container_registry(hostname: $hostname) {\n    container_registry {\n      id\n    }\n  }\n}\n"}}}();t.hash="131801c7f9561f645743bbbe4b464676",n.default=t},88559:function(e,n,a){a.r(n);var t=function(){var e={defaultValue:null,kind:"LocalArgument",name:"allowed_docker_registries"},n={defaultValue:null,kind:"LocalArgument",name:"domain"},a=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"domain"},{fields:[{kind:"Variable",name:"allowed_docker_registries",variableName:"allowed_docker_registries"}],kind:"ObjectValue",name:"props"}],concreteType:"ModifyDomain",kind:"LinkedField",name:"modify_domain",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ContainerRegistryListDomainMutation",selections:a,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ContainerRegistryListDomainMutation",selections:a},params:{cacheID:"569e278934331792cc007f79e8e4c44c",id:null,metadata:{},name:"ContainerRegistryListDomainMutation",operationKind:"mutation",text:"mutation ContainerRegistryListDomainMutation(\n  $domain: String!\n  $allowed_docker_registries: [String]!\n) {\n  modify_domain(name: $domain, props: {allowed_docker_registries: $allowed_docker_registries}) {\n    ok\n  }\n}\n"}}}();t.hash="d8730f4ae61e895ec64fb03e53998b97",n.default=t},89332:function(e,n,a){a.r(n);var t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"domain"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"hostname",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"password",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"ssl_verify",storageKey:null},d={alias:null,args:[{kind:"Variable",name:"name",variableName:"domain"}],concreteType:"Domain",kind:"LinkedField",name:"domain",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allowed_docker_registries",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ContainerRegistryListQuery",selections:[{alias:null,args:null,concreteType:"ContainerRegistry",kind:"LinkedField",name:"container_registries",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"ContainerRegistryEditorModalFragment"},n,a,{alias:null,args:null,concreteType:"ContainerRegistryConfig",kind:"LinkedField",name:"config",plural:!1,selections:[t,i,r,l,s,o],storageKey:null}],storageKey:null},d],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ContainerRegistryListQuery",selections:[{alias:null,args:null,concreteType:"ContainerRegistry",kind:"LinkedField",name:"container_registries",plural:!0,selections:[n,a,{alias:null,args:null,concreteType:"ContainerRegistryConfig",kind:"LinkedField",name:"config",plural:!1,selections:[t,i,r,l,o,s],storageKey:null}],storageKey:null},d]},params:{cacheID:"9f9e16fde586191ea3e0ae553f834b51",id:null,metadata:{},name:"ContainerRegistryListQuery",operationKind:"query",text:"query ContainerRegistryListQuery(\n  $domain: String!\n) {\n  container_registries {\n    ...ContainerRegistryEditorModalFragment\n    id\n    hostname\n    config {\n      url\n      type\n      project\n      username\n      password\n      ssl_verify\n    }\n  }\n  domain(name: $domain) {\n    name\n    allowed_docker_registries\n  }\n}\n\nfragment ContainerRegistryEditorModalFragment on ContainerRegistry {\n  id\n  hostname\n  config {\n    url\n    type\n    project\n    username\n    ssl_verify\n  }\n}\n"}}}();t.hash="0f4709e3ecfb8366c214098902385269",n.default=t},27879:function(e,n,a){a.r(n);var t=a(93433),i=a(29439),r=a(56805),l=a(99277),s=a(40406),o=a(44036),d=a(18676),u=a(4519),c=a(81748),g=a(2556);n.default=function(){var e=(0,c.$G)().t,n=(0,u.useState)("imageList"),a=(0,i.Z)(n,2),m=a[0],y=a[1],f=(0,s.Dj)(),p=f.supports("container-registry-gql"),k=o.Z.useToken().token;return(0,g.jsxs)(d.Z,{activeTabKey:m,onTabChange:function(e){return y(e)},tabList:[{key:"imageList",label:e("environment.Images")},{key:"presetList",label:e("environment.ResourcePresets")}].concat((0,t.Z)(f.is_superadmin?[{key:"registryList",label:e("environment.Registries")}]:[])),bodyStyle:{padding:0,paddingTop:1,overflow:"hidden"},children:[(0,g.jsx)(l.Z,{style:{display:"imageList"===m?"block":"none",paddingTop:k.paddingContentVerticalSM},children:(0,g.jsx)("backend-ai-environment-list",{active:"imageList"===m})}),(0,g.jsx)(l.Z,{style:{display:"presetList"===m?"block":"none",paddingTop:k.paddingContentVerticalSM},children:(0,g.jsx)("backend-ai-resource-preset-list",{active:"presetList"===m})}),(0,g.jsx)(l.Z,{style:{display:"registryList"===m?"block":"none",height:"calc(100vh - 145px)"},children:p?"registryList"===m?(0,g.jsx)(u.Suspense,{children:(0,g.jsx)(r.default,{})}):null:(0,g.jsx)("backend-ai-registry-list",{active:"registryList"===m})})]})}},28501:function(e,n,a){a.d(n,{Z:function(){return o}});var t=a(87462),i=a(4519),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},l=a(9491),s=function(e,n){return i.createElement(l.Z,(0,t.Z)({},e,{ref:n,icon:r}))};var o=i.forwardRef(s)}}]);
//# sourceMappingURL=879.6f633c34.chunk.js.map