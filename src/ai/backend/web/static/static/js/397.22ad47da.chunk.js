"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[397,652],{6652:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var r=n(83468),l=n(25339),a=n(29871),s=n(34680),i=n(81638),o=n(62863),d=n(58168),c=n(76998);const g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};var u=n(76228),h=function(e,t){return c.createElement(u.A,(0,d.A)({},e,{ref:t,icon:g}))};const p=c.forwardRef(h);var m=n(97041),y=n(2381),x=n(63718),j=n(65988),v=n(50840),A=n(13279),k=n(82028),f=n(87627),b=n(6932),w=n(14862),C=n(41856),S=n(14455),T=n.n(S),I=n(45901),L=n.n(I),M=n(77678),R=n(23446);const E=()=>{const{t:e}=(0,M.Bd)(),{token:t}=v.A.useToken(),[n,d]=(0,c.useState)(!1),[g,u]=(0,c.useState)(!1),[h,S]=(0,c.useState)(!1),[I,E]=(0,c.useState)(""),[B,z]=(0,r.Tw)("first"),[q,H]=(0,c.useTransition)(),[K,U]=(0,c.useTransition)();(0,r.CX)();const W=[{title:e("logs.TimeStamp"),dataIndex:"formattedTimeStamp",key:"timeStamp",render:e=>(0,R.jsx)("div",{style:{minWidth:50},children:L().isUndefined(e)?"-":(0,R.jsx)(i.A,{keyword:I,children:e})}),fixed:"left"},{title:e("logs.Status"),dataIndex:"statusCode",key:"status",render:(e,t)=>(0,R.jsx)("div",{style:{minWidth:50},children:L().isUndefined(e)?"-":(0,R.jsx)(i.A,{keyword:I,children:e+" "+t.statusText})})},{title:e("logs.ErrorTitle"),dataIndex:"title",key:"errorTitle",render:e=>(0,R.jsx)("div",{style:{minWidth:50},children:e?(0,R.jsx)(i.A,{keyword:I,children:L().toString(e)}):"-"})},{title:e("logs.ErrorMessage"),dataIndex:"message",key:"errorMessage",render:e=>(0,R.jsx)("div",{style:{minWidth:70},children:e?(0,R.jsx)(i.A,{keyword:I,children:e}):"-"})},{title:e("logs.ErrorType"),dataIndex:"type",key:"errorType",render:e=>(0,R.jsx)("div",{style:{minWidth:60},children:e?(0,R.jsx)(i.A,{keyword:I,children:e}):"-"})},{title:e("logs.Method"),dataIndex:"requestMethod",key:"method",render:e=>(0,R.jsx)("div",{style:{minWidth:60},children:e?(0,R.jsx)(i.A,{keyword:I,children:e}):"-"})},{title:e("logs.RequestUrl"),dataIndex:"requestUrl",key:"requestUrl",render:e=>(0,R.jsx)("div",{style:{minWidth:60},children:e?(0,R.jsx)(i.A,{keyword:I,children:e}):"-"})},{title:e("logs.Parameters"),dataIndex:"requestParameters",key:"requestParameter",render:e=>(0,R.jsx)("div",{style:{minWidth:100},children:e?(0,R.jsx)(i.A,{keyword:I,children:e}):"-"})}],[P,V]=(0,j.A)("backendaiwebui.ErrorLogList.displayedColumnKeys",{defaultValue:W.map((e=>L().toString(e.key)))}),_=(0,c.useMemo)((()=>{const e=JSON.parse(localStorage.getItem("backendaiwebui.logs")||"[]");return L().map(e,(e=>({...e,formattedTimeStamp:T()(e.timestamp).format("ll LTS")})))}),[B]),D=(0,c.useMemo)((()=>{const e=new RegExp("".concat(L().escapeRegExp(I)),"i");return L().filter(_,(t=>!I||!!L().find(t,((t,n)=>"timestamp"!==n&&L().toString(t).match(e)))))}),[I,_]);return(0,R.jsxs)(a.A,{direction:"column",align:"stretch",children:[(0,R.jsxs)(a.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:t.paddingContentVertical,paddingLeft:t.paddingContentHorizontalSM,paddingRight:t.paddingContentHorizontalSM},children:[(0,R.jsxs)(a.A,{direction:"column",align:"start",children:[(0,R.jsx)(A.A.Title,{level:4,style:{margin:0,padding:0},children:e("logs.LogMessages")}),(0,R.jsx)(A.A.Text,{type:"secondary",children:e("logs.UpTo3000Logs")})]}),(0,R.jsxs)(a.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:[(0,R.jsxs)(a.A,{gap:"xs",children:[(0,R.jsx)(k.A,{allowClear:!0,prefix:(0,R.jsx)(o.A,{}),placeholder:e("logs.SearchLogs"),onChange:e=>{U((()=>E(e.target.value)))},style:{width:200}}),(0,R.jsx)(f.A,{onChange:e=>S(e.target.checked),children:e("logs.ShowOnlyError")})]}),(0,R.jsxs)(a.A,{gap:"xs",children:[(0,R.jsx)(b.Ay,{icon:(0,R.jsx)(p,{}),loading:q,onClick:()=>{H((()=>z()))},children:e("button.Refresh")}),(0,R.jsx)(b.Ay,{danger:!0,icon:(0,R.jsx)(m.A,{}),onClick:()=>{d(!0)},children:e("button.ClearLogs")})]})]})]}),(0,R.jsx)(w.A,{pagination:{showSizeChanger:!1,style:{marginBottom:0}},loading:!!K&&{indicator:(0,R.jsx)(y.A,{})},scroll:{x:"max-content",y:"calc(100vh - 400px)"},dataSource:h?L().filter(D,(e=>e.isError)):D,columns:W.filter((e=>null===P||void 0===P?void 0:P.includes(L().toString(e.key)))),onRow:e=>({style:{color:e.isError?t.colorError:""}})}),(0,R.jsx)(a.A,{justify:"end",style:{paddingRight:t.paddingXS},children:(0,R.jsx)(b.Ay,{type:"text",icon:(0,R.jsx)(x.A,{}),onClick:()=>{u(!0)}})}),(0,R.jsx)(l.A,{open:n,title:e("dialog.warning.LogDeletion"),okText:e("button.Delete"),okButtonProps:{danger:!0},onOk:()=>{localStorage.removeItem("backendaiwebui.logs"),z(),d(!1)},cancelText:e("button.Cancel"),onCancel:()=>d(!1),children:(0,R.jsx)(C.A,{message:e("dialog.warning.CannotBeUndone"),type:"warning"})}),(0,R.jsx)(s.A,{open:g,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&V(null===e||void 0===e?void 0:e.selectedColumnKeys),u(!1)},columns:W,displayedColumnKeys:P||[]})]})}},34680:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(25339),l=n(62863),a=n(50840),s=n(65080),i=n(82028),o=n(87627),d=n(45901),c=n.n(d),g=n(76998),u=n(77678),h=n(23446);const p=e=>{let{open:t,onRequestClose:n,columns:d,displayedColumnKeys:p,...m}=e;const y=(0,g.useRef)(null),{t:x}=(0,u.Bd)(),{token:j}=a.A.useToken(),v=d.map((e=>{return"string"===typeof e.title?{label:e.title,value:c().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(t=e.title,g.Children.map(t.props.children,(e=>{if("string"===typeof e)return e}))),value:c().toString(e.key)}:{label:void 0,value:c().toString(e.key)};var t}));return(0,h.jsx)(r.A,{title:x("table.SettingTable"),open:t,destroyOnClose:!0,centered:!0,onOk:()=>{var e;null===(e=y.current)||void 0===e||e.validateFields().then((e=>{n(e)})).catch((()=>{}))},onCancel:()=>{n()},...m,children:(0,h.jsxs)(s.A,{ref:y,preserve:!1,initialValues:{selectedColumnKeys:p||v.map((e=>e.value))},layout:"vertical",children:[(0,h.jsx)(s.A.Item,{name:"searchInput",label:x("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,h.jsx)(i.A,{prefix:(0,h.jsx)(l.A,{}),style:{marginBottom:j.marginSM},placeholder:x("table.SearchTableColumn")})}),(0,h.jsx)(s.A.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.searchInput!==t.searchInput,children:e=>{let{getFieldValue:t}=e;const n=t("searchInput")?c().toLower(t("searchInput")):void 0,r=v.map((e=>c().toLower(c().toString(e.label)).includes(n||"")?e:{...e,style:{display:"none"}}));return(0,h.jsx)(s.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},children:(0,h.jsx)(o.A.Group,{options:r,style:{flexDirection:"column"}})})}})]})})}},54397:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(6652),l=n(29871),a=n(83468),s=n(50840),i=n(12982),o=n(77678),d=n(58346),c=n(23446);const g=(0,d.withDefault)(d.StringParam,"general"),u=()=>{const{t:e}=(0,o.Bd)(),{token:t}=s.A.useToken(),n=(0,a.f0)(),[u]=(0,d.useQueryParam)("tab",g);return(0,c.jsxs)(i.A,{activeTabKey:u,onTabChange:e=>{n({pathname:"/usersettings",search:"?tab=".concat(e)},{params:{tab:e}})},tabList:[{key:"general",label:e("usersettings.General")},{key:"logs",label:e("usersettings.Logs")}],bodyStyle:{padding:0},children:[(0,c.jsx)(l.A,{style:{display:"general"===u?"block":"none",paddingTop:t.paddingContentVerticalSM,paddingBottom:t.paddingContentVerticalLG,paddingLeft:t.paddingContentHorizontalSM,paddingRight:t.paddingContentHorizontalSM},children:(0,c.jsx)("backend-ai-usersettings-general-list",{active:"general"===u})}),"logs"===u&&(0,c.jsx)(r.default,{})]})}},97041:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(58168),l=n(76998);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var s=n(76228),i=function(e,t){return l.createElement(s.A,(0,r.A)({},e,{ref:t,icon:a}))};const o=l.forwardRef(i)}}]);
//# sourceMappingURL=397.22ad47da.chunk.js.map