{"version":3,"file":"static/js/150.4f42cd2c.chunk.js","mappings":"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","sources":["helper/graphql-transformer.ts","RelayEnvironment.ts","components/DefaultProviders.tsx","components/ResourceNumber.tsx","components/__generated__/ResourcePresetSelectQuery.graphql.ts","BAICard.tsx","components/DatePickerISO.tsx","components/EnvVarFormList.tsx","components/PortSelectFormItem.tsx","components/ResourcePresetSelect.tsx","components/ResourceAllocationFormItems.tsx","components/VFolderTable.tsx","components/VFolderTableFormItem.tsx","pages/SessionLauncherPage.tsx"],"sourcesContent":["function parseDirectives(str: string) {\n  const pattern = /(\\w+)\\s@\\s*(\\w+)\\s*\\(\\s*(\\w+)\\s*:\\s*(\\$?\\w+)\\s*\\)/g;\n  const directives = [];\n\n  let result;\n  while ((result = pattern.exec(str)) !== null) {\n    const [originFieldStr, fieldName, directive, argumentName, argumentValue] =\n      result;\n    directives.push({\n      fieldName,\n      directive,\n      argumentName,\n      argumentValue,\n      originFieldStr,\n    });\n  }\n\n  return directives;\n}\n\nexport function removeSkipOnClientDirective(\n  query: string,\n  variables: {\n    [key: string]: any;\n  },\n) {\n  const filteredVariables = { ...variables };\n  const directives = parseDirectives(query);\n  directives.forEach((directive) => {\n    if (\n      directive.directive === 'skipOnClient' &&\n      directive.argumentName === 'if'\n    ) {\n      if (\n        directive.argumentValue &&\n        (variables[directive.argumentValue.substring(1)] === true ||\n          directive.argumentValue === 'true')\n      ) {\n        // remove all lines of query that contains directive\n        query = query.replace(directive.originFieldStr, '');\n      } else {\n        // remove directive only\n        query = query.replace(\n          directive.originFieldStr,\n          directive.originFieldStr.replace(\n            /@\\s*(skipOnClient)\\s*\\(\\s*(\\w+)\\s*:\\s*(\\$?\\w+)\\s*\\)/,\n            '',\n          ),\n        );\n      }\n\n      // if argumentValue is variable and it is not used in query, remove it from variables and argument definition\n      if (\n        directive.argumentValue.startsWith('$') &&\n        query.split(directive.argumentValue).length === 2\n      ) {\n        const argumentNameWithoutDollar = directive.argumentValue.substring(1);\n        const pattern = new RegExp(`.*${argumentNameWithoutDollar}.*\\n`, 'g');\n        query = query.replace(pattern, '');\n        delete filteredVariables[directive.argumentValue.substring(1)];\n      }\n    } else {\n    }\n  });\n  return {\n    query: query,\n    variables: filteredVariables,\n  };\n}\n","// import { createClient } from \"graphql-ws\";\nimport { removeSkipOnClientDirective } from './helper/graphql-transformer';\nimport {\n  Environment,\n  Network,\n  RecordSource,\n  Store,\n  FetchFunction,\n  SubscribeFunction,\n  RelayFeatureFlags,\n} from 'relay-runtime';\n\nRelayFeatureFlags.ENABLE_RELAY_RESOLVERS = true;\n\nconst fetchFn: FetchFunction = async (\n  request,\n  variables,\n  // cacheConfig,\n  // uploadables\n) => {\n  // @skipOnClient directive modifies GraphQL queries according to the availability of a supported field.\n  const transformedData = removeSkipOnClientDirective(\n    request.text || '',\n    variables,\n  );\n\n  const reqBody = {\n    query: transformedData.query,\n    variables: transformedData.variables,\n  };\n\n  //@ts-ignore\n  const reqInfo = globalThis.backendaiclient?.newSignedRequest(\n    'POST',\n    '/admin/gql',\n    reqBody,\n  );\n\n  const result =\n    //@ts-ignore\n    (await globalThis.backendaiclient\n      ?._wrapWithPromise(reqInfo, false, null, 10000, 0)\n      .catch((err: any) => {\n        // console.log(err);\n      })) || {};\n\n  return result;\n};\n\nlet subscribeFn: SubscribeFunction;\n\n// if (typeof window !== \"undefined\") {\n//   // We only want to setup subscriptions if we are on the client.\n//   const subscriptionsClient = createClient({\n//     url: WEBSOCKET_ENDPOINT,\n//   });\n\n//   subscribeFn = (request, variables) => {\n//     // To understand why we return Observable.create<any>,\n//     // please see: https://github.com/enisdenjo/graphql-ws/issues/316#issuecomment-1047605774\n//     return Observable.create<any>((sink) => {\n//       if (!request.text) {\n//         return sink.error(new Error(\"Operation text cannot be empty\"));\n//       }\n\n//       return subscriptionsClient.subscribe(\n//         {\n//           operationName: request.name,\n//           query: request.text,\n//           variables,\n//         },\n//         sink\n//       );\n//     });\n//   };\n// }\n\nfunction createRelayEnvironment() {\n  return new Environment({\n    network: Network.create(fetchFn, subscribeFn),\n    store: new Store(new RecordSource()),\n  });\n}\n\nexport const RelayEnvironment = createRelayEnvironment();\n","import { RelayEnvironment } from '../RelayEnvironment';\n// @ts-ignore\nimport rawFixAntCss from '../fix_antd.css?raw';\nimport { useCustomThemeConfig } from '../helper/customThemeConfig';\nimport { ReactWebComponentProps } from '../helper/react-to-webcomponent';\nimport { StyleProvider, createCache } from '@ant-design/cssinjs';\nimport { ConfigProvider } from 'antd';\nimport en_US from 'antd/locale/en_US';\nimport ko_KR from 'antd/locale/ko_KR';\nimport dayjs from 'dayjs';\nimport 'dayjs/locale/ko';\nimport localeData from 'dayjs/plugin/localeData';\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport timezone from 'dayjs/plugin/timezone';\nimport utc from 'dayjs/plugin/utc';\nimport weekday from 'dayjs/plugin/weekday';\nimport i18n from 'i18next';\nimport Backend from 'i18next-http-backend';\nimport React, {\n  Suspense,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport { useTranslation, initReactI18next } from 'react-i18next';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { RelayEnvironmentProvider } from 'react-relay';\nimport { BrowserRouter, useNavigate } from 'react-router-dom';\nimport { QueryParamProvider } from 'use-query-params';\nimport { ReactRouter6Adapter } from 'use-query-params/adapters/react-router-6';\n\ndayjs.extend(weekday);\ndayjs.extend(localeData);\ndayjs.extend(localizedFormat);\ndayjs.extend(relativeTime);\ndayjs.extend(utc);\ndayjs.extend(timezone);\n\ninterface WebComponentContextType {\n  value?: ReactWebComponentProps['value'];\n  dispatchEvent: ReactWebComponentProps['dispatchEvent'];\n  moveTo: (\n    path: string,\n    params?: {\n      [key in string]?: boolean | string | number;\n    },\n  ) => void;\n}\n\nconst WebComponentContext = React.createContext<WebComponentContextType>(null!);\nconst ShadowRootContext = React.createContext<ShadowRoot>(null!);\nexport const useShadowRoot = () => React.useContext(ShadowRootContext);\nexport const useWebComponentInfo = () => React.useContext(WebComponentContext);\n\n// Create a client\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      suspense: true,\n      refetchOnWindowFocus: false,\n      retry: false,\n    },\n  },\n});\n\nexport interface DefaultProvidersProps extends ReactWebComponentProps {\n  children?: React.ReactNode;\n}\n\ni18n\n  .use(initReactI18next) // passes i18n down to react-i18next\n  .use(Backend)\n  .init({\n    backend: {\n      loadPath: '/resources/i18n/{{lng}}.json',\n    },\n    //@ts-ignore\n    lng: globalThis?.backendaioptions?.get('current_language') || 'en',\n    fallbackLng: 'en',\n    interpolation: {\n      escapeValue: false, // react already safes from xss => https://www.i18next.com/translation-function/interpolation#unescape\n    },\n    react: {\n      transSupportBasicHtmlNodes: true,\n      transKeepBasicHtmlNodesFor: ['br', 'strong', 'span', 'code', 'p'],\n    },\n  });\n\nconst useCurrentLanguage = () => {\n  const [lang, _setLang] = useState(\n    //@ts-ignore\n    globalThis?.backendaioptions?.get('current_language'),\n  );\n  const { i18n } = useTranslation();\n\n  useEffect(() => {\n    // TODO: remove this hack to initialize i18next\n    setTimeout(() => i18n?.changeLanguage(lang), 0);\n    // For changing locale globally, use dayjs.locale instead of dayjs().locale\n    dayjs.locale(lang);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    const handler = (e: Event) => {\n      //@ts-ignore\n      _setLang(e?.detail?.lang);\n      //@ts-ignore\n      const lang: string = e?.detail?.lang || 'en';\n      i18n?.changeLanguage(lang);\n      // For changing locale globally, use dayjs.locale instead of dayjs().locale\n      dayjs.locale(lang);\n    };\n    window.addEventListener('langChanged', handler);\n    return () => window.removeEventListener('langChanged', handler);\n  }, [i18n]);\n\n  return [lang] as const;\n};\n\nconst DefaultProviders: React.FC<DefaultProvidersProps> = ({\n  children,\n  value,\n  styles,\n  shadowRoot,\n  dispatchEvent,\n}) => {\n  const cache = useMemo(() => createCache(), []);\n  const [lang] = useCurrentLanguage();\n  const themeConfig = useCustomThemeConfig();\n\n  const componentValues = useMemo(() => {\n    return {\n      value,\n      dispatchEvent,\n      moveTo: (path, params) => {\n        dispatchEvent('moveTo', { path, params: params });\n      },\n    } as WebComponentContextType;\n  }, [value, dispatchEvent]);\n  return (\n    <>\n      {RelayEnvironment && (\n        <RelayEnvironmentProvider environment={RelayEnvironment}>\n          <React.StrictMode>\n            <style>\n              {styles}\n              {rawFixAntCss}\n            </style>\n            <QueryClientProvider client={queryClient}>\n              <ShadowRootContext.Provider value={shadowRoot}>\n                <WebComponentContext.Provider value={componentValues}>\n                  <ConfigProvider\n                    // @ts-ignore\n                    getPopupContainer={(triggerNode) => {\n                      return triggerNode?.parentNode || shadowRoot;\n                    }}\n                    //TODO: apply other supported locales\n                    locale={'ko' === lang ? ko_KR : en_US}\n                    theme={themeConfig}\n                  >\n                    <StyleProvider container={shadowRoot} cache={cache}>\n                      <Suspense fallback=\"\">\n                        <BrowserRouter>\n                          <QueryParamProvider\n                            adapter={ReactRouter6Adapter}\n                            options={\n                              {\n                                // searchStringToObject: queryString.parse,\n                                // objectToSearchString: queryString.stringify,\n                              }\n                            }\n                          >\n                            <RoutingEventHandler />\n                            {children}\n                          </QueryParamProvider>\n                        </BrowserRouter>\n                      </Suspense>\n                    </StyleProvider>\n                  </ConfigProvider>\n                </WebComponentContext.Provider>\n              </ShadowRootContext.Provider>\n            </QueryClientProvider>\n          </React.StrictMode>\n        </RelayEnvironmentProvider>\n      )}\n    </>\n  );\n};\n\nconst RoutingEventHandler = () => {\n  const navigate = useNavigate();\n  useLayoutEffect(() => {\n    const handleNavigate = (e: any) => {\n      const { detail } = e;\n      navigate(detail, {\n        // we don't want to add duplicated one to history.\n        // On lit component side, it adds to history already.\n        replace: true,\n      });\n    };\n    document.addEventListener('react-navigate', handleNavigate);\n\n    return () => {\n      document.removeEventListener('react-navigate', handleNavigate);\n    };\n  }, [navigate]);\n\n  return null;\n};\n\nexport default DefaultProviders;\n","import { iSizeToSize } from '../helper';\nimport Flex from './Flex';\nimport { Tooltip, Typography, theme } from 'antd';\nimport React, { ReactElement } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nexport type ResourceTypeKey =\n  | 'cpu'\n  | 'mem'\n  | 'cuda.device'\n  | 'cuda.shares'\n  | 'rocm.device'\n  | 'tpu.device'\n  | 'ipu.device'\n  | 'atom.device'\n  | 'warboy.device';\n\nexport const ACCELERATOR_UNIT_MAP: {\n  [key: string]: string;\n} = {\n  'cuda.device': 'GPU',\n  'cuda.shares': 'FGPU',\n  'rocm.device': 'GPU',\n  'tpu.device': 'TPU',\n  'ipu.device': 'IPU',\n  'atom.device': 'ATOM',\n  'warboy.device': 'Warboy',\n};\n\nexport type ResourceOpts = {\n  shmem?: number;\n};\ninterface Props {\n  type: ResourceTypeKey;\n  extra?: ReactElement;\n  opts?: ResourceOpts;\n  value: string;\n}\n\ntype ResourceTypeInfo<V> = {\n  [key in string]: V;\n};\nconst ResourceNumber: React.FC<Props> = ({\n  type,\n  value: amount,\n  extra,\n  opts,\n}) => {\n  const { t } = useTranslation();\n  const { token } = theme.useToken();\n  const units: ResourceTypeInfo<string> = {\n    cpu: t('session.core'),\n    mem: 'GiB',\n    ...ACCELERATOR_UNIT_MAP,\n  };\n\n  return (\n    <Flex direction=\"row\" gap=\"xxs\">\n      <ResourceTypeIcon type={type} />\n      <Typography.Text>\n        {units[type] === 'GiB'\n          ? iSizeToSize(amount + 'b', 'g', 2).numberFixed\n          : units[type] === 'FGPU'\n          ? parseFloat(amount).toFixed(2)\n          : amount}\n      </Typography.Text>\n      <Typography.Text type=\"secondary\">{units[type]}</Typography.Text>\n      {type === 'mem' && opts?.shmem && (\n        <Typography.Text\n          type=\"secondary\"\n          style={{ fontSize: token.fontSizeSM }}\n        >\n          (SHM: {iSizeToSize(opts.shmem + 'b', 'g', 2).numberFixed}\n          GiB)\n        </Typography.Text>\n      )}\n      {extra}\n    </Flex>\n  );\n};\n\nconst MWCIconWrap: React.FC<{ size?: number; children: string }> = ({\n  size = 16,\n  children,\n}) => {\n  return (\n    // @ts-ignore\n    <mwc-icon\n      style={{\n        '--mdc-icon-size': `${size + 2}px`,\n        width: size,\n        height: size,\n      }}\n    >\n      {children}\n      {/* @ts-ignore */}\n    </mwc-icon>\n  );\n};\ninterface AccTypeIconProps\n  extends Omit<React.ImgHTMLAttributes<HTMLImageElement>, 'src'> {\n  type: ResourceTypeKey;\n  showIcon?: boolean;\n  showUnit?: boolean;\n  showTooltip?: boolean;\n  size?: number;\n}\nexport const ResourceTypeIcon: React.FC<AccTypeIconProps> = ({\n  type,\n  size = 16,\n  showIcon = true,\n  showUnit = true,\n  showTooltip = true,\n  ...props\n}) => {\n  const { t } = useTranslation();\n\n  const resourceTypeIconSrcMap: ResourceTypeInfo<\n    [ReactElement | string, string]\n  > = {\n    cpu: [\n      <MWCIconWrap size={size}>developer_board</MWCIconWrap>,\n      t('session.core'),\n    ],\n    mem: [<MWCIconWrap size={size}>memory</MWCIconWrap>, 'GiB'],\n    'cuda.device': ['/resources/icons/file_type_cuda.svg', 'GPU'],\n    'cuda.shares': ['/resources/icons/file_type_cuda.svg', 'FGPU'],\n    'rocm.device': ['/resources/icons/ROCm.png', 'GPU'],\n    'tpu.device': [<MWCIconWrap size={size}>view_module</MWCIconWrap>, 'TPU'],\n    'ipu.device': [<MWCIconWrap size={size}>view_module</MWCIconWrap>, 'IPU'],\n    'atom.device': ['/resources/icons/rebel.svg', 'ATOM'],\n    'warboy.device': ['/resources/icons/furiosa.svg', 'Warboy'],\n  };\n\n  return (\n    <Tooltip\n      title={\n        showTooltip ? `${type} (${resourceTypeIconSrcMap[type][1]})` : undefined\n      }\n    >\n      {typeof resourceTypeIconSrcMap[type]?.[0] === 'string' ? (\n        <img\n          {...props}\n          style={{\n            height: size,\n            ...(props.style || {}),\n          }}\n          // @ts-ignore\n          src={resourceTypeIconSrcMap[type]?.[0] || ''}\n          alt={type}\n        />\n      ) : (\n        <div style={{ width: 16, height: 16 }}>\n          {resourceTypeIconSrcMap[type]?.[0] || type}\n        </div>\n      )}\n    </Tooltip>\n  );\n};\n\nexport default ResourceNumber;\n","/**\n * @generated SignedSource<<f8c3ae59478b8ffd874be16c33231c44>>\n * @lightSyntaxTransform\n * @nogrep\n */\n\n/* tslint:disable */\n/* eslint-disable */\n// @ts-nocheck\n\nimport { ConcreteRequest, Query } from 'relay-runtime';\nexport type ResourcePresetSelectQuery$variables = {};\nexport type ResourcePresetSelectQuery$data = {\n  readonly resource_presets: ReadonlyArray<{\n    readonly name: string | null;\n    readonly resource_slots: any | null;\n    readonly shared_memory: any | null;\n  } | null> | null;\n};\nexport type ResourcePresetSelectQuery = {\n  response: ResourcePresetSelectQuery$data;\n  variables: ResourcePresetSelectQuery$variables;\n};\n\nconst node: ConcreteRequest = (function(){\nvar v0 = [\n  {\n    \"alias\": null,\n    \"args\": null,\n    \"concreteType\": \"ResourcePreset\",\n    \"kind\": \"LinkedField\",\n    \"name\": \"resource_presets\",\n    \"plural\": true,\n    \"selections\": [\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"name\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"resource_slots\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"shared_memory\",\n        \"storageKey\": null\n      }\n    ],\n    \"storageKey\": null\n  }\n];\nreturn {\n  \"fragment\": {\n    \"argumentDefinitions\": [],\n    \"kind\": \"Fragment\",\n    \"metadata\": null,\n    \"name\": \"ResourcePresetSelectQuery\",\n    \"selections\": (v0/*: any*/),\n    \"type\": \"Queries\",\n    \"abstractKey\": null\n  },\n  \"kind\": \"Request\",\n  \"operation\": {\n    \"argumentDefinitions\": [],\n    \"kind\": \"Operation\",\n    \"name\": \"ResourcePresetSelectQuery\",\n    \"selections\": (v0/*: any*/)\n  },\n  \"params\": {\n    \"cacheID\": \"bd89430b9924d926a1b8e91191746b4f\",\n    \"id\": null,\n    \"metadata\": {},\n    \"name\": \"ResourcePresetSelectQuery\",\n    \"operationKind\": \"query\",\n    \"text\": \"query ResourcePresetSelectQuery {\\n  resource_presets {\\n    name\\n    resource_slots\\n    shared_memory\\n  }\\n}\\n\"\n  }\n};\n})();\n\n(node as any).hash = \"9841642e96d89476c2848bfb093ed9c5\";\n\nexport default node;\n","import { ExclamationCircleTwoTone } from '@ant-design/icons';\nimport { Button, Card, CardProps, theme } from 'antd';\nimport _ from 'lodash';\nimport React, { ReactNode } from 'react';\n\ninterface BAICardProps extends CardProps {\n  status?: 'success' | 'error' | 'warning' | 'default';\n  extraButtonTitle?: string | ReactNode;\n  onClickExtraButton?: () => void;\n}\n\nconst BAICard: React.FC<BAICardProps> = ({\n  status = 'default',\n  extraButtonTitle,\n  onClickExtraButton,\n  extra,\n  style,\n  ...cardProps\n}) => {\n  const { token } = theme.useToken();\n  const _extra =\n    extra ||\n    (extraButtonTitle && (\n      <Button\n        type=\"link\"\n        icon={\n          status === 'error' ? (\n            <ExclamationCircleTwoTone twoToneColor={token.colorError} />\n          ) : undefined\n        }\n        onClick={onClickExtraButton}\n      >\n        {extraButtonTitle}\n      </Button>\n    )) ||\n    undefined;\n  return (\n    <Card\n      style={_.extend(style, {\n        borderColor:\n          status === 'error'\n            ? token.colorError\n            : status === 'warning'\n            ? token.colorWarning\n            : status === 'success'\n            ? token.colorSuccess\n            : style?.borderColor, // default\n      })}\n      extra={_extra}\n      {...cardProps}\n    />\n  );\n};\n\nexport default BAICard;\n","import { DatePicker } from 'antd';\nimport { PickerDateProps } from 'antd/es/date-picker/generatePicker';\nimport dayjs, { Dayjs } from 'dayjs';\nimport React from 'react';\n\ninterface DatePickerISOProps\n  extends Omit<PickerDateProps<Dayjs>, 'value' | 'onChange'> {\n  value?: string;\n  onChange?: (value: string | undefined) => void;\n}\nconst DatePickerISO: React.FC<DatePickerISOProps> = ({\n  value,\n  onChange,\n  ...pickerProps\n}) => {\n  return (\n    <DatePicker\n      value={value ? dayjs(value) : undefined}\n      onChange={(value, dateString) => {\n        onChange && onChange(value?.toISOString());\n      }}\n      {...pickerProps}\n    />\n  );\n};\n\nexport default DatePickerISO;\n","import Flex from './Flex';\nimport { MinusCircleOutlined, PlusOutlined } from '@ant-design/icons';\nimport { Button, Form, FormItemProps, Input, InputRef } from 'antd';\nimport { FormListProps } from 'antd/lib/form';\nimport _ from 'lodash';\nimport React, { useRef } from 'react';\n\ninterface EnvVarFormListProps extends Omit<FormListProps, 'children'> {\n  formItemProps?: FormItemProps;\n}\nconst EnvVarFormList: React.FC<EnvVarFormListProps> = ({\n  formItemProps,\n  ...props\n}) => {\n  const inputRef = useRef<InputRef>(null);\n\n  return (\n    <Form.List {...props}>\n      {(fields, { add, remove }) => {\n        return (\n          <Flex direction=\"column\" gap=\"xs\" align=\"stretch\">\n            {fields.map(({ key, name, ...restField }, index) => (\n              <Flex key={key} direction=\"row\" align=\"baseline\" gap=\"xs\">\n                <Form.Item\n                  {...restField}\n                  style={{ marginBottom: 0, flex: 1 }}\n                  name={[name, 'variable']}\n                  rules={[\n                    { required: true, message: 'Enter Variable name' },\n                    {\n                      pattern: /^[a-zA-Z_][a-zA-Z0-9_]*$/,\n                      message:\n                        'Variable name must start with a letter or underscore, and can only contain letters, numbers, and underscores.',\n                    },\n                    ({ getFieldValue }) => ({\n                      validator(rule, variableName) {\n                        const variableNames = _.map(\n                          getFieldValue('envList'),\n                          (i) => i?.variable,\n                        );\n\n                        if (\n                          variableNames.length > 0 &&\n                          _.filter(variableNames, (i) => i === variableName)\n                            .length > 1\n                        ) {\n                          return Promise.reject('Variable name already exists');\n                        } else {\n                          return Promise.resolve();\n                        }\n                      },\n                    }),\n                  ]}\n                  {...formItemProps}\n                >\n                  <Input\n                    ref={index === fields.length - 1 ? inputRef : null}\n                    placeholder=\"Variable\"\n                  />\n                </Form.Item>\n                <Form.Item\n                  {...restField}\n                  name={[name, 'value']}\n                  style={{ marginBottom: 0, flex: 1 }}\n                  rules={[{ required: true, message: 'Enter value' }]}\n                >\n                  <Input placeholder=\"Value\" />\n                </Form.Item>\n                <MinusCircleOutlined onClick={() => remove(name)} />\n              </Flex>\n            ))}\n            <Form.Item noStyle>\n              <Button\n                type=\"dashed\"\n                onClick={() => {\n                  add();\n                  setTimeout(() => {\n                    if (inputRef.current) {\n                      inputRef.current.focus();\n                    }\n                  }, 0);\n                }}\n                icon={<PlusOutlined />}\n                block\n              >\n                Add variable\n              </Button>\n            </Form.Item>\n          </Flex>\n        );\n      }}\n    </Form.List>\n  );\n};\n\nexport default EnvVarFormList;\n","import { Form, FormItemProps, Select, Tag } from 'antd';\nimport { TagProps } from 'antd/lib';\nimport _ from 'lodash';\nimport React from 'react';\nimport { Trans, useTranslation } from 'react-i18next';\n\ninterface Props extends FormItemProps {}\n\nconst MIN_PORT = 1024;\nconst MAX_PORT = 65535;\nconst PortSelectFormItem: React.FC<Props> = ({ ...formItemProps }) => {\n  const { t } = useTranslation();\n  return (\n    <Form.Item\n      label={t('session.launcher.PreOpenPortTitle')}\n      name=\"ports\"\n      tooltip={<Trans i18nKey=\"session.launcher.DescSetPreOpenPort\" />}\n      extra={t('session.launcher.PreOpenPortRangeGuide')}\n      rules={[\n        // {\n        //   max: 2,\n        //   type: 'array',\n        // },\n        ({ getFieldValue }) => ({\n          validator(rule, values) {\n            if (\n              _.every(values, (v) => {\n                const port = parseInt(v);\n                return port >= MIN_PORT && port <= MAX_PORT;\n              })\n            ) {\n              return Promise.resolve();\n            }\n            return Promise.reject(\n              new Error(t('session.launcher.PreOpenPortRange')),\n            );\n          },\n        }),\n      ]}\n      {...formItemProps}\n    >\n      <Select\n        mode=\"tags\"\n        tagRender={(props) => {\n          return (\n            <PortTag\n              closable={props.closable}\n              onClose={props.onClose}\n              onMouseDown={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n              }}\n              value={props.value}\n            >\n              {props.label}\n            </PortTag>\n          );\n        }}\n        style={{ width: '100%' }}\n        // placeholder={t('session.launcher.preopen')}\n        // options={_.map(portGuides, (v, k) => ({\n        //   value: parseInt(k),\n        //   // label: `${k} - ${v}`,\n        // }))}\n        suffixIcon={null}\n        open={false}\n        tokenSeparators={[',', ' ']}\n      />\n    </Form.Item>\n  );\n};\n\ninterface PortTagProps extends TagProps {\n  value: string;\n}\nexport const PortTag: React.FC<PortTagProps> = ({ value, ...tagProps }) => {\n  const port = parseInt(value);\n  const isValid = port >= MIN_PORT && port <= MAX_PORT;\n  return <Tag color={isValid ? undefined : 'red'} {...tagProps} />;\n};\n\n// const portGuides = {\n//   '5432': 'PostgreSQL',\n//   '3306': 'MySQL',\n//   '1521': 'Oracle',\n//   '27017': 'MongoDB',\n//   '6379': 'Redis',\n//   '11211': 'Memcached',\n//   '9200': 'Elasticsearch',\n//   '5601': 'Kibana',\n//   '9600': 'Logstash',\n//   '9042': 'Cassandra',\n//   '2181': 'Zookeeper',\n//   '9092': 'Kafka',\n//   '80': 'HTTP',\n//   '443': 'HTTPS',\n//   '22': 'SSH',\n//   '21': 'FTP',\n//   '25': 'SMTP',\n//   '110': 'POP3',\n//   '143': 'IMAP',\n//   '53': 'DNS',\n//   '389': 'LDAP',\n//   '636': 'LDAPS',\n//   '8080': 'HTTP Alt',\n//   '8443': 'HTTP Alt SSL',\n//   '465': 'SMTP SSL',\n//   '587': 'SMTP TLS',\n//   '993': 'IMAP SSL',\n//   '995': 'POP3 SSL',\n//   '7001': 'WebLogic',\n//   '7002': 'WebLogic SSL',\n//   '4848': 'GlassFish',\n//   '8181': 'GlassFish SSL',\n//   '8081': 'Nginx',\n// };\n\nexport default PortSelectFormItem;\n","import { useUpdatableState } from '../hooks';\nimport Flex from './Flex';\nimport { ResourcePresetSelectQuery } from './__generated__/ResourcePresetSelectQuery.graphql';\nimport { EditOutlined } from '@ant-design/icons';\nimport { useThrottleFn } from 'ahooks';\nimport { Select } from 'antd';\nimport { SelectProps } from 'antd/lib';\nimport graphql from 'babel-plugin-relay/macro';\nimport _ from 'lodash';\nimport React, { useTransition } from 'react';\nimport { useLazyLoadQuery } from 'react-relay';\n\n// const myFunc= ()=>{\n//   const param: any = { group: globalThis.backendaiclient.current_group };\n//       if (\n//         this.current_user_group !== globalThis.backendaiclient.current_group ||\n//         this.scaling_groups.length == 0 ||\n//         (this.scaling_groups.length === 1 && this.scaling_groups[0].name === '')\n//       ) {\n//         this.current_user_group = globalThis.backendaiclient.current_group;\n//         const sgs = await globalThis.backendaiclient.scalingGroup.list(\n//           this.current_user_group,\n//         );\n//         // Make empty scaling group item if there is no scaling groups.\n//         this.scaling_groups =\n//           sgs.scaling_groups.length > 0 ? sgs.scaling_groups : [{ name: '' }];\n//       }\n//       if (this.scaling_groups.length > 0) {\n//         const scaling_groups: any = [];\n//         this.scaling_groups.map((group) => {\n//           scaling_groups.push(group.name);\n//         });\n//         if (\n//           this.scaling_group === '' ||\n//           !scaling_groups.includes(this.scaling_group)\n//         ) {\n//           this.scaling_group = this.scaling_groups[0].name;\n//         }\n//         param['scaling_group'] = this.scaling_group;\n//       }\n//       const resourcePresetInfo =\n//         await globalThis.backendaiclient.resourcePreset.check(param);\n// }\n\ntype Y = ArrayElement<NonNullable<SelectProps['options']>>;\ninterface PresetOptionType extends Y {\n  options?: PresetOptionType[];\n  preset?: {\n    name: string;\n    resource_slots: string;\n    shared_memory: string;\n  };\n}\ninterface ResourcePresetSelectProps extends Omit<SelectProps, 'onChange'> {\n  onChange?: (value: string, options: PresetOptionType) => void;\n}\nconst ResourcePresetSelect: React.FC<ResourcePresetSelectProps> = ({\n  ...selectProps\n}) => {\n  const [fetchKey, updateFetchKey] = useUpdatableState('first');\n  const { run: updateFetchKeyThrottled } = useThrottleFn(updateFetchKey, {\n    wait: 3000,\n    trailing: false,\n    leading: true,\n  });\n  const [isPendingUpdate, _startTransition] = useTransition();\n  const updateFetchKeyUnderTransition = () => {\n    _startTransition(() => {\n      updateFetchKeyThrottled();\n    });\n  };\n  const { resource_presets } = useLazyLoadQuery<ResourcePresetSelectQuery>(\n    graphql`\n      query ResourcePresetSelectQuery {\n        resource_presets {\n          name\n          resource_slots\n          shared_memory\n        }\n      }\n    `,\n    {},\n    {\n      fetchKey: fetchKey,\n      fetchPolicy: fetchKey === 'first' ? 'store-and-network' : 'network-only',\n    },\n  );\n  // const resourcePresetInfo = await globalThis.backendaiclient.resourcePreset.check(param);\n  return (\n    <Select\n      loading={isPendingUpdate}\n      // options={_.map(resource_presets, (preset) => {\n      //   return {\n      //     value: preset?.name,\n      //     label: preset?.name,\n      //   };\n      // })}\n      options={[\n        {\n          value: 'custom',\n          label: (\n            <Flex gap={'xs'} style={{ display: 'inline-flex' }}>\n              <EditOutlined /> Custom\n            </Flex>\n          ),\n          // label: (\n          //   <Flex direction=\"row\" gap=\"xs\">\n          //     <Typography.Text strong>Custom</Typography.Text>\n          //     <Typography.Text type=\"secondary\">\n          //       Customize allocation amount\n          //     </Typography.Text>\n          //   </Flex>\n          // ),\n        },\n        {\n          // value: 'preset1',\n          label: 'Preset',\n          // @ts-ignore\n          options: _.map(resource_presets, (preset) => {\n            return {\n              value: preset?.name,\n              label: preset?.name,\n              preset,\n            };\n          }),\n        },\n      ]}\n      showSearch\n      {...selectProps}\n      onDropdownVisibleChange={(open) => {\n        if (open) {\n          console.log(open);\n          updateFetchKeyUnderTransition();\n        }\n      }}\n    ></Select>\n  );\n};\n\nexport default ResourcePresetSelect;\n","import { iSizeToSize } from '../helper';\nimport { useResourceSlots } from '../hooks/backendai';\nimport { ACCELERATOR_UNIT_MAP } from './ResourceNumber';\nimport ResourcePresetSelect from './ResourcePresetSelect';\nimport SliderInputItem from './SliderInputFormItem';\nimport { Card, Form, Select, theme } from 'antd';\nimport _ from 'lodash';\nimport { Trans, useTranslation } from 'react-i18next';\n\nconst ResourceAllocationFormItems = () => {\n  const form = Form.useFormInstance();\n  const { t } = useTranslation();\n  const { token } = theme.useToken();\n  const [resourceSlots] = useResourceSlots();\n  // TODO: auto select preset\n  return (\n    <>\n      <Form.Item\n        label={t('resourcePreset.ResourcePresets')}\n        name=\"allocationPreset\"\n        required\n        style={{ marginBottom: token.marginXS }}\n      >\n        <ResourcePresetSelect\n          onChange={(value, options) => {\n            const slots = _.pick(\n              JSON.parse(options?.preset?.resource_slots || '{}'),\n              _.keys(resourceSlots),\n            );\n            form.setFieldsValue({\n              resource: {\n                ...slots,\n                // transform to GB based on preset values\n                mem: iSizeToSize((slots?.mem || 0) + 'b', 'g', 2).number,\n                shmem: iSizeToSize(\n                  (options?.preset?.shared_memory || 0) + 'b',\n                  'g',\n                  2,\n                ).number,\n              },\n            });\n          }}\n        />\n      </Form.Item>\n      <Card\n        style={{\n          marginBottom: token.margin,\n        }}\n      >\n        <Form.Item\n          shouldUpdate={(prev, cur) =>\n            prev.allocationPreset !== cur.allocationPreset\n          }\n          noStyle\n        >\n          {({ getFieldValue }) => {\n            return (\n              // getFieldValue('allocationPreset') === 'custom' && (\n              <>\n                {resourceSlots?.cpu && (\n                  <SliderInputItem\n                    name={['resource', 'cpu']}\n                    initialValue={0}\n                    label={t('session.launcher.CPU')}\n                    tooltip={<Trans i18nKey={'session.launcher.DescCPU'} />}\n                    // min={parseInt(\n                    //   _.find(\n                    //     currentImage?.resource_limits,\n                    //     (i) => i?.key === 'cpu',\n                    //   )?.min || '0',\n                    // )}\n                    // max={parseInt(\n                    //   _.find(\n                    //     currentImage?.resource_limits,\n                    //     (i) => i?.key === 'cpu',\n                    //   )?.max || '100',\n                    // )}\n                    inputNumberProps={{\n                      addonAfter: t('session.launcher.Core'),\n                    }}\n                    required\n                    rules={[\n                      {\n                        required: true,\n                      },\n                    ]}\n                  />\n                )}\n                {resourceSlots?.mem && (\n                  <SliderInputItem\n                    name={['resource', 'mem']}\n                    initialValue={0}\n                    label={t('session.launcher.Memory')}\n                    tooltip={<Trans i18nKey={'session.launcher.DescMemory'} />}\n                    max={30}\n                    inputNumberProps={{\n                      addonAfter: 'GB',\n                    }}\n                    step={0.05}\n                    required\n                    rules={[\n                      {\n                        required: true,\n                      },\n                    ]}\n                  />\n                )}\n                {resourceSlots?.mem && (\n                  <SliderInputItem\n                    name={['resource', 'shmem']}\n                    initialValue={0}\n                    label={t('session.launcher.SharedMemory')}\n                    tooltip={\n                      <Trans i18nKey={'session.launcher.DescSharedMemory'} />\n                    }\n                    max={30}\n                    step={0.1}\n                    inputNumberProps={{\n                      addonAfter: 'GB',\n                    }}\n                    required\n                    rules={[\n                      {\n                        required: true,\n                      },\n                    ]}\n                  />\n                )}\n                {_.chain(resourceSlots)\n                  .omit(['cpu', 'mem', 'shmem'])\n                  .map((unit, name, accelerators) => {\n                    return (\n                      <SliderInputItem\n                        name={['resource', name]}\n                        initialValue={0}\n                        label={t(`session.launcher.AIAccelerator`)}\n                        // tooltip={\n                        //   <Trans i18nKey={'session.launcher.DescSharedMemory'} />\n                        // }\n                        max={30}\n                        step={name.endsWith('shares') ? 0.1 : 1}\n                        inputNumberProps={{\n                          addonAfter: (\n                            <Form.Item\n                              noStyle\n                              name={'acceleratorType'}\n                              initialValue={_.keys(accelerators)[0]}\n                            >\n                              <Select\n                                suffixIcon={\n                                  _.size(accelerators) > 1 ? undefined : null\n                                }\n                              >\n                                {_.map(accelerators, (value, name) => {\n                                  return (\n                                    <Select.Option value={name}>\n                                      {ACCELERATOR_UNIT_MAP[name] || 'UNIT'}\n                                    </Select.Option>\n                                  );\n                                })}\n                              </Select>\n                            </Form.Item>\n                          ),\n                        }}\n                        required\n                        rules={[\n                          {\n                            required: true,\n                          },\n                        ]}\n                      />\n                    );\n                  })\n                  .value()}\n              </>\n            );\n          }}\n        </Form.Item>\n      </Card>\n    </>\n  );\n};\n\nexport default ResourceAllocationFormItems;\n","import { useBaiSignedRequestWithPromise } from '../helper';\nimport { useCurrentProjectValue, useUpdatableState } from '../hooks';\nimport { useTanQuery } from '../hooks/reactQueryAlias';\nimport { useShadowRoot } from './DefaultProviders';\nimport DoubleTag, { DoubleTagObjectValue } from './DoubleTag';\nimport Flex from './Flex';\nimport TextHighlighter from './TextHighlighter';\nimport { VFolder } from './VFolderSelect';\nimport {\n  QuestionCircleOutlined,\n  ReloadOutlined,\n  UserOutlined,\n} from '@ant-design/icons';\nimport { useControllableValue } from 'ahooks';\nimport {\n  Button,\n  Form,\n  Input,\n  Table,\n  TableProps,\n  Tooltip,\n  Typography,\n} from 'antd';\nimport { ColumnsType } from 'antd/lib/table';\nimport dayjs from 'dayjs';\nimport _ from 'lodash';\nimport React, { useEffect, useState, useTransition } from 'react';\nimport { Trans, useTranslation } from 'react-i18next';\n\nexport interface VFolderFile {\n  name: string;\n  type: 'FILE' | 'DIRECTORY';\n  size: number;\n  mode: string;\n  created: string;\n  modified: string;\n}\ntype VFolderKey = string | number;\n\nexport interface VFolderSelectValue {\n  alias?: string;\n  key: string;\n}\n\nexport interface AliasMap {\n  [key: string]: string;\n}\n\ntype DataIndex = keyof VFolder;\n\ninterface Props extends Omit<TableProps<VFolder>, 'rowKey'> {\n  showAliasInput?: boolean;\n  selectedRowKeys?: VFolderKey[];\n  onChangeSelectedRowKeys?: (selectedKeys: VFolderKey[]) => void;\n  aliasBasePath?: string;\n  aliasMap?: AliasMap;\n  onChangeAliasMap?: (aliasMap: AliasMap) => void;\n  filter?: (vFolder: VFolder) => boolean;\n  rowKey: string | number;\n}\n\nconst VFolderTable: React.FC<Props> = ({\n  filter,\n  showAliasInput = false,\n  selectedRowKeys: controlledSelectedRowKeys = [],\n  onChangeSelectedRowKeys,\n  aliasBasePath = '/home/work/',\n  aliasMap: controlledAliasMap,\n  onChangeAliasMap,\n  rowKey = 'name',\n  ...tableProps\n}) => {\n  const getRowKey = React.useMemo(() => {\n    return (record: VFolder) => {\n      const key = record && record[rowKey as DataIndex];\n      return key as VFolderKey;\n    };\n  }, [rowKey]);\n\n  const [selectedRowKeys, setSelectedRowKeys] = useControllableValue<\n    VFolderKey[]\n  >(\n    {\n      value: controlledSelectedRowKeys,\n      onChange: onChangeSelectedRowKeys,\n    },\n    {\n      defaultValue: [],\n    },\n  );\n\n  const [aliasMap, setAliasMap] = useControllableValue<AliasMap>(\n    {\n      value: controlledAliasMap,\n      onChange: onChangeAliasMap,\n    },\n    {\n      defaultValue: {},\n    },\n  );\n\n  const [internalForm] = Form.useForm<AliasMap>();\n  useEffect(() => {\n    // TODO: check setFieldsValue performance\n    if (aliasMap) {\n      internalForm.setFieldsValue(\n        _.mapValues(aliasMap, (v) => {\n          if (v.startsWith(aliasBasePath)) {\n            return v.slice(aliasBasePath.length);\n          }\n          return v;\n        }),\n      );\n      internalForm.validateFields();\n    }\n  }, [aliasMap, internalForm, aliasBasePath]);\n\n  const { t } = useTranslation();\n  const baiRequestWithPromise = useBaiSignedRequestWithPromise();\n  const currentProject = useCurrentProjectValue();\n  const [fetchKey, updateFetchKey] = useUpdatableState('first');\n  const [isPendingRefetch, startRefetchTransition] = useTransition();\n  const { data: allFolderList } = useTanQuery({\n    queryKey: ['VFolderSelectQuery', fetchKey],\n    queryFn: () => {\n      return baiRequestWithPromise({\n        method: 'GET',\n        url: `/folders?group_id=${currentProject.id}`,\n      }) as Promise<VFolder[]>;\n    },\n    staleTime: 0,\n  });\n  const [searchKey, setSearchKey] = useState('');\n  const displayingFolders = _.filter(allFolderList, (vf) => {\n    // keep selected folders\n    if (selectedRowKeys.includes(getRowKey(vf))) {\n      return true;\n    }\n    // filter by search key\n    return (\n      (!filter || filter(vf)) && (!searchKey || vf.name.includes(searchKey))\n    );\n  });\n  // const { token } = theme.useToken();\n  // const searchInput = useRef<InputRef>(null);\n\n  // TODO: set defaults\n  // useUpdateEffect(() => {\n  //   setSelectedRowKeys(defaultSelectedKeys || []);\n  // }, [defaultSelectedKeys]);\n\n  const handleAliasUpdate = (e?: any) => {\n    e?.preventDefault();\n    internalForm\n      .validateFields()\n      .then((values) => {})\n      .catch(() => {})\n      .finally(() => {\n        setAliasMap(\n          _.mapValues(\n            _.pickBy(internalForm.getFieldsValue(), (v) => !!v), //remove empty\n            (v, k) => mapAliasToPath(k, v), // add alias base path\n          ),\n        );\n      });\n  };\n\n  const hasPermission = (vFolder: VFolder, perm: string) => {\n    if (vFolder.permission.includes(perm)) {\n      return true;\n    }\n    if (vFolder.permission.includes('w') && perm === 'r') {\n      return true;\n    }\n    return false;\n  };\n\n  const mapAliasToPath = (name: VFolderKey, input?: string) => {\n    if (_.isEmpty(input)) {\n      return `${aliasBasePath}${name}`;\n    } else if (input?.startsWith('/')) {\n      return input;\n    } else {\n      return `${aliasBasePath}${input}`;\n    }\n  };\n\n  const shadowRoot = useShadowRoot();\n\n  const columns: ColumnsType<VFolder> = [\n    {\n      title: (\n        <Flex direction=\"row\" gap=\"xxs\">\n          <Typography.Text>{t('data.folders.Name')}</Typography.Text>\n          {showAliasInput && (\n            <>\n              <Typography.Text\n                type=\"secondary\"\n                style={{ fontWeight: 'normal' }}\n              >\n                ({t('session.launcher.FolderAlias')}{' '}\n                <Tooltip\n                  title={<Trans i18nKey={'session.launcher.DescFolderAlias'} />}\n                  style={{\n                    zIndex: 10000,\n                  }}\n                  // @ts-ignore\n                  getPopupContainer={() => shadowRoot}\n                >\n                  <QuestionCircleOutlined />\n                </Tooltip>\n                )\n              </Typography.Text>\n            </>\n          )}\n        </Flex>\n      ),\n      dataIndex: 'name',\n      sorter: (a, b) => a.name.localeCompare(b.name),\n      render: (value, record) => {\n        const isCurrentRowSelected = selectedRowKeys.includes(\n          getRowKey(record),\n        );\n\n        return (\n          <Flex\n            direction=\"column\"\n            align=\"stretch\"\n            gap={'xxs'}\n            style={\n              showAliasInput && isCurrentRowSelected\n                ? { display: 'inline-flex', height: 70, width: '100%' }\n                : undefined\n            }\n          >\n            <TextHighlighter keyword={searchKey}>{value}</TextHighlighter>\n            {showAliasInput && isCurrentRowSelected && (\n              <Form.Item\n                noStyle\n                // rerender when\n                shouldUpdate={(prev, cur) =>\n                  prev[getRowKey(record)] !== cur[getRowKey(record)]\n                }\n              >\n                {() => {\n                  const allAliasPathMap = _(selectedRowKeys).reduce(\n                    (result, name) => {\n                      result[name] =\n                        aliasMap?.[name] || mapAliasToPath(name, undefined);\n\n                      return result;\n                    },\n                    {} as AliasMap,\n                  );\n\n                  return (\n                    <Form.Item\n                      name={getRowKey(record)}\n                      rules={[\n                        {\n                          // required: true,\n                          type: 'string',\n                          pattern: /^[a-zA-Z0-9_/-]*$/,\n                          message: t('session.launcher.FolderAliasInvalid'),\n                        },\n                        {\n                          type: 'string',\n                          validator: async (rule, value) => {\n                            if (\n                              value &&\n                              _.some(\n                                allAliasPathMap,\n                                (path, k) =>\n                                  k !== getRowKey(record) && // not current row\n                                  path ===\n                                    mapAliasToPath(getRowKey(record), value),\n                              )\n                            ) {\n                              return Promise.reject(\n                                t('session.launcher.FolderAliasOverlapping'),\n                              );\n                            }\n                            return Promise.resolve();\n                          },\n                        },\n                      ]}\n                      // dependencies={[getRowKey(record)]}\n                      extra={mapAliasToPath(\n                        record.name,\n                        internalForm.getFieldValue(getRowKey(record)),\n                      )}\n                    >\n                      <Input\n                        onClick={(e) => {\n                          e.stopPropagation();\n                        }}\n                        placeholder={t('session.launcher.FolderAlias')}\n                        // onPressEnter={handleAliasUpdate}\n                        // onBlur={handleAliasUpdate}\n                        onChange={handleAliasUpdate}\n                        allowClear\n                      ></Input>\n                    </Form.Item>\n                  );\n                }}\n              </Form.Item>\n            )}\n          </Flex>\n        );\n      },\n      fixed: 'left',\n      // ...getColumnSearchProps('name'),\n    },\n    {\n      title: t('data.UsageMode'),\n      dataIndex: 'usage_mode',\n      sorter: (a, b) => a.usage_mode.localeCompare(b.usage_mode),\n    },\n    {\n      title: t('data.Host'),\n      dataIndex: 'host',\n    },\n    {\n      title: t('data.Type'),\n      dataIndex: 'type',\n      sorter: (a, b) => a.type.localeCompare(b.type),\n      render: (value, record) => {\n        return (\n          <Flex direction=\"column\">\n            {record.type === 'user' ? (\n              <UserOutlined title=\"User\" />\n            ) : (\n              <div>Group</div>\n            )}\n            {record.type === 'group' && `(${record.group_name})`}\n          </Flex>\n        );\n      },\n      // render: (value) =>\n      //   value === 'group' ? (\n      //     <GroupOutlined />\n      //   ) : value === 'user' ? (\n      //     <UserOutlined />\n      //   ) : value ? (\n      //     value\n      //   ) : (\n      //     '-'\n      //   ),\n      // filters: [\n      //   {\n      //     text: 'user',\n      //     value: 'user',\n      //   },\n      //   {\n      //     text: 'group',\n      //     value: 'group',\n      //   },\n      // ],\n      // onFilter: (value, record) => record.type.indexOf(value + '') === 0,\n    },\n    // {\n    //   title: 'Group',\n    //   dataIndex: 'group_name',\n    //   sorter: (a, b) => (a.group || '').localeCompare(b.group || ''),\n    //   render: (value) => value || '-',\n    // },\n    {\n      title: t('data.Permission'),\n      dataIndex: 'permission',\n      sorter: (a, b) => a.permission.localeCompare(b.permission),\n      render: (value, row) => {\n        const tagValues: DoubleTagObjectValue[] = _.chain({\n          r: 'green',\n          w: 'blue',\n          d: 'red',\n        })\n          .map((color, perm) => {\n            if (hasPermission(row, perm)) {\n              return {\n                label: perm.toUpperCase(),\n                color,\n              };\n            }\n            return undefined;\n          })\n          .compact()\n          .value();\n\n        return <DoubleTag values={tagValues} />;\n      },\n    },\n    {\n      title: t('data.Created'),\n      dataIndex: 'created_at',\n      sorter: (a, b) => a.created_at.localeCompare(b.created_at),\n      render: (value, record) => dayjs(value).format('L'),\n    },\n    // {\n    //   title: 'Modified',\n    //   dataIndex: 'modified',\n    //   sorter: (a, b) => a.modified.localeCompare(b.modified),\n    //   render: (value) => value || '-',\n    // },\n    // {\n    //   title: 'Size',\n    //   dataIndex: 'size',\n    //   sorter: (a, b) => a.size - b.size,\n    //   render: (value) => value || '-',\n    // },\n    // }\n    // {\n    //   title: 'Max Size',\n    //   dataIndex: 'max_size',\n    //   // sorter: (a, b) => a (a.max_size || '').localeCompare(b.max_size || ''),\n    //   render: (value) => value || '-',\n    // },\n  ];\n  return (\n    <Flex direction=\"column\" align=\"stretch\" gap={'xs'}>\n      <Flex direction=\"row\" gap=\"xs\" justify=\"between\">\n        <Input\n          value={searchKey}\n          onChange={(e) => setSearchKey(e.target.value)}\n          allowClear\n          placeholder={t('data.SearchByName')}\n        />\n        <Button\n          loading={isPendingRefetch}\n          icon={<ReloadOutlined />}\n          onClick={() => {\n            startRefetchTransition(() => {\n              updateFetchKey();\n            });\n          }}\n        />\n      </Flex>\n      <Form form={internalForm}>\n        <Table\n          // size=\"small\"\n          scroll={{ x: 'max-content' }}\n          rowKey={getRowKey}\n          rowSelection={{\n            selectedRowKeys,\n            onChange: (selectedRowKeys) => {\n              setSelectedRowKeys(selectedRowKeys as VFolderKey[]);\n              handleAliasUpdate();\n            },\n          }}\n          showSorterTooltip={false}\n          columns={columns}\n          dataSource={displayingFolders}\n          onRow={(record, rowIndex) => {\n            return {\n              onClick: (event) => {\n                const target = event.target as HTMLElement;\n                // allow click on selection column\n                if (target?.classList?.contains('ant-table-selection-column')) {\n                  event.stopPropagation();\n                  selectedRowKeys.includes(getRowKey(record))\n                    ? setSelectedRowKeys(\n                        selectedRowKeys.filter((k) => k !== getRowKey(record)),\n                      )\n                    : setSelectedRowKeys([\n                        ...selectedRowKeys,\n                        getRowKey(record),\n                      ]);\n                }\n              },\n            };\n          }}\n          {...tableProps}\n        />\n      </Form>\n    </Flex>\n  );\n};\n\nexport default VFolderTable;\n","import VFolderTable, { AliasMap } from './VFolderTable';\nimport { Form, FormItemProps, Input } from 'antd';\nimport _ from 'lodash';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface VFolderTableFromItemProps extends Omit<FormItemProps, 'name'> {}\n\nexport interface VFolderTableFormValues {\n  vfolders: string[];\n  vfoldersAliasMap: AliasMap;\n}\n\nconst VFolderTableFromItem: React.FC<VFolderTableFromItemProps> = ({\n  ...formItemProps\n}) => {\n  const form = Form.useFormInstance();\n  const { t } = useTranslation();\n  Form.useWatch('vfoldersAliasMap', form);\n  return (\n    <>\n      <Form.Item\n        // noStyle\n        hidden\n        name=\"vfoldersAliasMap\"\n        rules={[\n          {\n            validator(rule, map) {\n              const arr = _.chain(form.getFieldValue('mounts'))\n                .reduce((result, name) => {\n                  result[name] = map[name] || '/home/work/' + name;\n                  return result;\n                }, {} as AliasMap)\n                .values()\n                .value();\n              if (_.uniq(arr).length !== arr.length) {\n                return Promise.reject(\n                  t('session.launcher.FolderAliasOverlapping'),\n                );\n              }\n              return Promise.resolve();\n            },\n          },\n        ]}\n      >\n        <Input />\n        {/* <Flex>{form.getFieldValue('vfoldersAliasMap')}</Flex> */}\n      </Form.Item>\n      <Form.Item\n        name={'mounts'}\n        {...formItemProps}\n        valuePropName=\"selectedRowKeys\"\n        trigger=\"onChangeSelectedRowKeys\"\n      >\n        <VFolderTable\n          rowKey=\"name\"\n          showAliasInput\n          aliasMap={form.getFieldValue('vfoldersAliasMap')}\n          onChangeAliasMap={(aliasMap) => {\n            form.setFieldValue('vfoldersAliasMap', aliasMap);\n            form.validateFields(['vfoldersAliasMap']);\n          }}\n          // TODO: implement pagination\n          pagination={false}\n        />\n      </Form.Item>\n    </>\n  );\n};\n\nexport default VFolderTableFromItem;\n","import BAICard from '../BAICard';\nimport DatePickerISO from '../components/DatePickerISO';\nimport { useWebComponentInfo } from '../components/DefaultProviders';\nimport EnvVarFormList from '../components/EnvVarFormList';\nimport Flex from '../components/Flex';\nimport ImageEnvironmentSelectFormItems from '../components/ImageEnvironmentSelectFormItems';\nimport ImageMetaIcon from '../components/ImageMetaIcon';\nimport PortSelectFormItem, { PortTag } from '../components/PortSelectFormItem';\nimport ResourceAllocationFormItems from '../components/ResourceAllocationFormItems';\nimport ResourceGroupSelect from '../components/ResourceGroupSelect';\nimport ResourceNumber from '../components/ResourceNumber';\nimport VFolderTableFromItem from '../components/VFolderTableFormItem';\nimport { iSizeToSize } from '../helper';\nimport {\n  BlockOutlined,\n  LeftOutlined,\n  PlayCircleFilled,\n  PlayCircleOutlined,\n  RightOutlined,\n  SaveOutlined,\n} from '@ant-design/icons';\nimport { useDebounceFn } from 'ahooks';\nimport {\n  Affix,\n  Breadcrumb,\n  Button,\n  Card,\n  Checkbox,\n  Descriptions,\n  Form,\n  Grid,\n  Input,\n  Segmented,\n  Select,\n  StepProps,\n  Steps,\n  Table,\n  Tag,\n  Typography,\n  message,\n  theme,\n} from 'antd';\nimport _ from 'lodash';\nimport React, { useEffect } from 'react';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport { useTranslation } from 'react-i18next';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport { darcula } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport {\n  JsonParam,\n  NumberParam,\n  StringParam,\n  useQueryParams,\n  withDefault,\n} from 'use-query-params';\n\nconst INITIAL_FORM_VALUES = {\n  sessionType: 'interactive',\n  allocationPreset: 'custom',\n};\nconst stepParam = withDefault(NumberParam, 0);\nconst formValuesParam = withDefault(JsonParam, INITIAL_FORM_VALUES);\n\nconst SessionLauncherPage = () => {\n  const [\n    { step: currentStep, formValues: initialFormValues, redirectTo },\n    setQuery,\n  ] = useQueryParams({\n    step: stepParam,\n    formValues: formValuesParam,\n    redirectTo: StringParam,\n  });\n\n  const { moveTo } = useWebComponentInfo();\n\n  const { run: syncFormToURLWithDebounce } = useDebounceFn(\n    () => {\n      // To sync the latest form values to URL,\n      // 'trailing' is set to true, and get the form values here.\"\n      setQuery(\n        {\n          formValues: form.getFieldsValue(),\n        },\n        'replaceIn',\n      );\n    },\n    {\n      leading: false,\n      wait: 500,\n      trailing: true,\n    },\n  );\n\n  const setCurrentStep = (nextStep: number) => {\n    setQuery(\n      {\n        step: nextStep,\n      },\n      'pushIn',\n    );\n  };\n  const { token } = theme.useToken();\n\n  const { t } = useTranslation();\n\n  const screens = Grid.useBreakpoint();\n\n  const [form] = Form.useForm<{\n    sessionType: 'interactive' | 'batch' | 'inference';\n    batch: {\n      enabled: boolean;\n    };\n  }>();\n\n  useEffect(() => {\n    if (\n      // if form is changed, validate it to show error on the first render\n      JSON.stringify(INITIAL_FORM_VALUES) !== JSON.stringify(initialFormValues)\n    ) {\n      form.validateFields().catch((e) => {});\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    // TODO: scroll to top\n  }, [currentStep]);\n\n  // before initialFormValues is set, use getFieldValue and useWatch will return undefined\n  const sessionType =\n    Form.useWatch('sessionType', form) ||\n    form.getFieldValue('sessionType') ||\n    initialFormValues.sessionType;\n\n  const steps = _.filter(\n    [\n      {\n        title: t('session.launcher.SessionType'),\n        key: 'sessionType',\n        // status: form.getFieldError('name').length > 0 ? 'error' : undefined,\n      },\n      {\n        title: `${t('session.launcher.Environments')} & ${t(\n          'session.launcher.ResourceAllocation',\n        )} `,\n        key: 'environment',\n      },\n      sessionType !== 'inference' && {\n        title: t('webui.menu.Data&Storage'),\n        key: 'storage',\n      },\n      {\n        title: t('session.launcher.Network'),\n        key: 'network',\n      },\n      {\n        title: t('session.launcher.ConfirmAndLaunch'),\n        icon: (\n          <PlayCircleFilled />\n          // <Flex\n          //   align=\"center\"\n          //   justify=\"center\"\n          //   style={{\n          //     // border: '1px solid gray',\n          //     backgroundColor: '#E8E7E7',\n          //     width: 24,\n          //     height: 24,\n          //     borderRadius: 12,\n          //     fontSize: 16,\n          //   }}\n          // >\n          //   <CaretRightOutlined />\n          // </Flex>\n        ),\n        // @ts-ignore\n        key: 'review',\n      },\n    ] as StepProps[],\n    (v) => !!v,\n  );\n\n  const currentStepKey:\n    | 'sessionType'\n    | 'environment'\n    | 'storage'\n    | 'network'\n    // @ts-ignore\n    | 'review' = steps[currentStep]?.key;\n\n  const hasError = _.some(\n    form.getFieldsError(),\n    (item) => item.errors.length > 0,\n  );\n\n  return (\n    <Flex\n      direction=\"column\"\n      align=\"stretch\"\n      style={{\n        padding: token.paddingSM,\n        width: '100%',\n        justifyContent: 'revert',\n        // height: 500,\n        // overflow: 'scroll',\n      }}\n    >\n      {redirectTo && (\n        <Breadcrumb\n          items={[\n            {\n              title: t('webui.menu.Sessions'),\n              onClick: (e) => {\n                e.preventDefault();\n                moveTo(redirectTo);\n              },\n              href: redirectTo,\n            },\n            {\n              title: t('session.launcher.StartNewSession'),\n            },\n          ]}\n        />\n      )}\n      <Flex direction=\"row\" gap=\"md\" align=\"start\">\n        <Flex\n          direction=\"column\"\n          align=\"stretch\"\n          style={{ flex: 1, maxWidth: 700 }}\n        >\n          <Flex direction=\"row\" justify=\"between\">\n            <Typography.Title level={3} style={{ marginTop: 0 }}>\n              {t('session.launcher.StartNewSession')}\n            </Typography.Title>\n            <Button type=\"link\" icon={<BlockOutlined />}>\n              Templates\n            </Button>\n          </Flex>\n          {/* <Suspense fallback={<FlexActivityIndicator />}> */}\n          <Form.Provider\n            onFormChange={(name, info) => {\n              // use OnFormChange instead of Form's onValuesChange,\n              // because onValuesChange will not be triggered when form is changed programmatically\n              syncFormToURLWithDebounce();\n            }}\n          >\n            <Form form={form} layout=\"vertical\" requiredMark=\"optional\">\n              <Flex\n                direction=\"column\"\n                align=\"stretch\"\n                gap=\"md\"\n                // style={{  }}\n              >\n                {/* Step 0 fields */}\n                <Card\n                  title={t('session.launcher.SessionType')}\n                  style={{\n                    display:\n                      currentStepKey === 'sessionType' ? 'block' : 'none',\n                  }}\n                >\n                  <Form.Item name=\"sessionType\">\n                    {/* <Radio.Group\n                    options={[\n                      {\n                        label: (\n                          <Flex\n                            direction=\"column\"\n                            align=\"start\"\n                            style={{ marginBottom: token.marginXS }}\n                          >\n                            <Typography.Text strong>\n                              🏃‍♀️ Make, test and run\n                            </Typography.Text>\n                            <Typography.Text type=\"secondary\">\n                              <Typography.Text strong>\n                                Interactive mode\n                              </Typography.Text>{' '}\n                              allows you to create, test and run code\n                              interactively via jupyter notebook, visual studio\n                              code, etc.\n                            </Typography.Text>\n                          </Flex>\n                        ),\n                        value: 'interactive',\n                      },\n                      {\n                        label: (\n                          <Flex direction=\"column\" align=\"start\">\n                            <Typography.Text strong>\n                              ⌚️ Start an long-running task\n                            </Typography.Text>\n                            <Typography.Text type=\"secondary\">\n                              <Typography.Text strong>\n                                Batch mode\n                              </Typography.Text>{' '}\n                              runs your code with multiple node & clusters to\n                              scale your idea\n                            </Typography.Text>\n                          </Flex>\n                        ),\n                        value: 'batch',\n                      },\n                    ]}\n                  /> */}\n                    <Segmented\n                      width={100}\n                      options={[\n                        {\n                          label: (\n                            <SessionTypeItem\n                              title=\"🏃‍♀️ Make, test and run\"\n                              description=\"Interactive mode allows you to create, test and run code interactively via jupyter notebook, visual studio code, etc.\"\n                            />\n                          ),\n                          value: 'interactive',\n                        },\n                        {\n                          label: (\n                            <SessionTypeItem\n                              title=\"⌚️ Start an long-running task\"\n                              description=\"Batch mode runs your code with multiple node & clusters to scale your idea\"\n                            />\n                          ),\n                          value: 'batch',\n                        },\n                        // {\n                        //   label: (\n                        //     <SessionTypeItem\n                        //       title=\"🤖 Run a inference service\"\n                        //       description=\"Inference allow you dynamically scale your mode service\"\n                        //     />\n                        //   ),\n                        //   value: 'inference',\n                        // },\n                      ]}\n                    />\n                  </Form.Item>\n                  <Form.Item\n                    label=\"Session name\"\n                    name=\"name\"\n                    rules={[\n                      {\n                        max: 64,\n                        message: t('session.Validation.SessionNameTooLong64'),\n                      },\n                      {\n                        pattern:\n                          /^(?:[a-zA-Z0-9][a-zA-Z0-9._-]{2,}[a-zA-Z0-9])?$/,\n                        message: t(\n                          'session.Validation.PleaseFollowSessionNameRule',\n                        ).toString(),\n                      },\n                    ]}\n                  >\n                    <Input allowClear />\n                  </Form.Item>\n                </Card>\n\n                {sessionType === 'batch' && (\n                  <Card\n                    title=\"Batch Mode Configuration\"\n                    style={{\n                      display:\n                        currentStepKey === 'sessionType' ? 'block' : 'none',\n                    }}\n                  >\n                    <Form.Item\n                      label={t('session.launcher.StartUpCommand')}\n                      name={['batch', 'command']}\n                      rules={[\n                        {\n                          required: true,\n                        },\n                      ]}\n                    >\n                      <Input.TextArea />\n                    </Form.Item>\n                    <Form.Item label=\"Schedule time\">\n                      <Flex direction=\"row\" gap={'xs'}>\n                        <Form.Item\n                          noStyle\n                          name={['batch', 'enabled']}\n                          valuePropName=\"checked\"\n                        >\n                          <Checkbox>{t('session.launcher.Enable')}</Checkbox>\n                        </Form.Item>\n                        <Form.Item\n                          noStyle\n                          // dependencies={[['batch', 'enabled']]}\n                          shouldUpdate={(prev, next) => {\n                            return (\n                              // @ts-ignore\n                              prev.batch?.enabled !== next.batch?.enabled\n                            );\n                          }}\n                        >\n                          {() => {\n                            const disabled =\n                              form.getFieldValue('batch')?.enabled !== true;\n                            return (\n                              <>\n                                <Form.Item\n                                  name={['batch', 'scheduleDate']}\n                                  noStyle\n                                >\n                                  <DatePickerISO\n                                    disabled={disabled}\n                                    showTime\n                                    // format={'YYYY-MM-DD HH:mm:ss'}\n                                  />\n                                </Form.Item>\n                                {/* <Form.Item\n                                      noStyle\n                                      name={['batch', 'scheduleTime']}\n                                    >\n                                      <TimePicker disabled={disabled} />\n                                    </Form.Item> */}\n                              </>\n                            );\n                          }}\n                        </Form.Item>\n                      </Flex>\n                    </Form.Item>\n                  </Card>\n                )}\n\n                {sessionType === 'inference' && (\n                  <Card title=\"Inference Mode Configuration\">\n                    <Form.Item\n                      name={['inference', 'vFolderName']}\n                      label={t('session.launcher.ModelStorageToMount')}\n                      rules={[\n                        {\n                          required: true,\n                        },\n                      ]}\n                    >\n                      <Select />\n                      {/* <VFolderSelect\n                          filter={(vf) => vf.usage_mode === 'model'}\n                          autoSelectDefault\n                          /> */}\n                    </Form.Item>\n                  </Card>\n                )}\n\n                {/* Step Start*/}\n                <Card\n                  title={t('session.launcher.Environments')}\n                  style={{\n                    display:\n                      currentStepKey === 'environment' ? 'block' : 'none',\n                  }}\n                >\n                  <ErrorBoundary\n                    fallbackRender={(e) => {\n                      console.log(e);\n                      return null;\n                    }}\n                  >\n                    <ImageEnvironmentSelectFormItems />\n                  </ErrorBoundary>\n                  <Form.Item label=\"Environment Variables\">\n                    <EnvVarFormList\n                      name={'envvars'}\n                      formItemProps={{\n                        validateTrigger: ['onChange', 'onBlur'],\n                      }}\n                    />\n                  </Form.Item>\n                </Card>\n                <Card\n                  title={t('session.launcher.ResourceAllocation')}\n                  style={{\n                    display:\n                      currentStepKey === 'environment' ? 'block' : 'none',\n                  }}\n                >\n                  <Form.Item\n                    name=\"resourceGroup\"\n                    label={t('session.ResourceGroup')}\n                    rules={[\n                      {\n                        required: true,\n                      },\n                    ]}\n                  >\n                    <ResourceGroupSelect autoSelectDefault />\n                  </Form.Item>\n                  <ResourceAllocationFormItems />\n                </Card>\n\n                {/* Step Start*/}\n                <Card\n                  title={t('webui.menu.Data&Storage')}\n                  style={{\n                    display: currentStepKey === 'storage' ? 'block' : 'none',\n                  }}\n                >\n                  <VFolderTableFromItem />\n                  {/* <VFolderTable /> */}\n                </Card>\n\n                {/* Step Start*/}\n                <Card\n                  title={t('session.launcher.Network')}\n                  style={{\n                    display: currentStepKey === 'network' ? 'block' : 'none',\n                  }}\n                >\n                  <PortSelectFormItem />\n                </Card>\n\n                {/* Step Start*/}\n                {currentStepKey === 'review' && (\n                  <>\n                    <BAICard\n                      title={t('session.launcher.SessionType')}\n                      size=\"small\"\n                      status={\n                        form.getFieldError('name').length > 0\n                          ? 'error'\n                          : undefined\n                      }\n                      extraButtonTitle={t('button.Edit')}\n                      onClickExtraButton={() => {\n                        setCurrentStep(\n                          // @ts-ignore\n                          steps.findIndex((v) => v.key === 'sessionType'),\n                        );\n                      }}\n                      // extra={\n                      //   <Button\n                      //     type=\"link\"\n                      //     onClick={() => {\n                      //       setCurrentStep(\n                      //         // @ts-ignore\n                      //         steps.findIndex((v) => v.key === 'sessionType'),\n                      //       );\n                      //     }}\n                      //     icon={\n                      //       form.getFieldError('name').length > 0 && (\n                      //         <ExclamationCircleTwoTone\n                      //           twoToneColor={token.colorError}\n                      //         />\n                      //       )\n                      //     }\n                      //   >\n                      //     {t('button.Edit')}\n                      //   </Button>\n                      // }\n                    >\n                      <Descriptions size=\"small\">\n                        <Descriptions.Item label=\"Session Type\" span={24}>\n                          {form.getFieldValue('sessionType')}\n                        </Descriptions.Item>\n                        <Descriptions.Item label={'Session name'} span={24}>\n                          {form.getFieldValue('name')}\n                        </Descriptions.Item>\n                      </Descriptions>\n                    </BAICard>\n                    <BAICard\n                      title={t('session.launcher.Environments')}\n                      size=\"small\"\n                      status={\n                        _.some(form.getFieldValue('envvars'), (v, idx) => {\n                          return (\n                            form.getFieldError(['envvars', idx, 'variable'])\n                              .length > 0 ||\n                            form.getFieldError(['envvars', idx, 'value'])\n                              .length > 0\n                          );\n                        })\n                          ? 'error'\n                          : undefined\n                      }\n                      extraButtonTitle={t('button.Edit')}\n                      onClickExtraButton={() => {\n                        setCurrentStep(\n                          // @ts-ignore\n                          steps.findIndex((v) => v.key === 'environment'),\n                        );\n                      }}\n                    >\n                      <Descriptions size=\"small\" layout=\"vertical\" column={1}>\n                        <Descriptions.Item label=\"Image\">\n                          <Flex direction=\"row\" gap=\"xs\" style={{ flex: 1 }}>\n                            <ImageMetaIcon\n                              image={\n                                form.getFieldValue('environments')?.version\n                              }\n                            />\n                            {/* {form.getFieldValue('environments').image} */}\n                            <Typography.Text copyable code>\n                              {form.getFieldValue('environments')?.version}\n                            </Typography.Text>\n                          </Flex>\n                        </Descriptions.Item>\n                        <Descriptions.Item\n                          label={t('session.launcher.EnvironmentVariable')}\n                        >\n                          {form.getFieldValue('envvars')?.length ? (\n                            <SyntaxHighlighter\n                              style={darcula}\n                              codeTagProps={{\n                                style: {\n                                  // fontFamily: 'monospace',\n                                },\n                              }}\n                              // showLineNumbers\n                              customStyle={{\n                                margin: 0,\n                                width: '100%',\n                              }}\n                            >\n                              {_.map(\n                                form.getFieldValue('envvars'),\n                                (v: { variable: string; value: string }) =>\n                                  `${v?.variable || ''}=\"${v?.value || ''}\"`,\n                              ).join('\\n')}\n                            </SyntaxHighlighter>\n                          ) : (\n                            '-'\n                          )}\n                        </Descriptions.Item>\n                      </Descriptions>\n                    </BAICard>\n                    <Card\n                      title={t('session.launcher.ResourceAllocation')}\n                      size=\"small\"\n                      extra={\n                        <Button\n                          type=\"link\"\n                          onClick={() => {\n                            setCurrentStep(\n                              // @ts-ignore\n                              steps.findIndex((v) => v.key === 'environment'),\n                            );\n                          }}\n                        >\n                          {t('button.Edit')}\n                        </Button>\n                      }\n                    >\n                      <Descriptions>\n                        <Descriptions.Item\n                          span={24}\n                          label={t('environment.ResourcePresets')}\n                        >\n                          <Flex\n                            direction=\"row\"\n                            align=\"start\"\n                            gap={'xs'}\n                            wrap=\"wrap\"\n                            style={{ flex: 1 }}\n                          >\n                            {form.getFieldValue('allocationPreset') ===\n                            'custom' ? (\n                              // t('session.launcher.CustomAllocation')\n                              ''\n                            ) : (\n                              <Tag>\n                                {form.getFieldValue('allocationPreset')}\n                              </Tag>\n                            )}\n\n                            {_.map(\n                              _.omit(form.getFieldValue('resource'), 'shmem'),\n                              (value, type) => {\n                                return (\n                                  <ResourceNumber\n                                    key={type}\n                                    // @ts-ignore\n                                    type={type}\n                                    value={\n                                      type === 'mem'\n                                        ? iSizeToSize(value + 'g', 'b').number +\n                                          ''\n                                        : value\n                                    }\n                                    opts={{\n                                      shmem: form.getFieldValue('resource')\n                                        .shmem\n                                        ? iSizeToSize(\n                                            form.getFieldValue('resource')\n                                              .shmem + 'g',\n                                            'b',\n                                          ).number\n                                        : undefined,\n                                    }}\n                                  />\n                                );\n                              },\n                            )}\n                            {/* {_.chain(\n                              form.getFieldValue('allocationPreset') ===\n                                'custom'\n                                ? form.getFieldValue('resource')\n                                : JSON.parse(\n                                    form.getFieldValue('selectedPreset')\n                                      ?.resource_slots || '{}',\n                                  ),\n                            )\n                              .map((value, type) => {\n                                // @ts-ignore\n                                if (resourceSlots[type] === undefined)\n                                  return undefined;\n                                const resource_opts = {\n                                  shmem:\n                                    form.getFieldValue('selectedPreset')\n                                      .shared_memory,\n                                };\n                                return (\n                                  <ResourceNumber\n                                    key={type}\n                                    // @ts-ignore\n                                    type={type}\n                                    value={value}\n                                    opts={resource_opts}\n                                  />\n                                );\n                              })\n                              .compact()\n                              .value()} */}\n                          </Flex>\n                        </Descriptions.Item>\n                      </Descriptions>\n                    </Card>\n                    <BAICard\n                      title={t('webui.menu.Data&Storage')}\n                      size=\"small\"\n                      status={\n                        form.getFieldError('vfoldersAliasMap').length > 0\n                          ? 'error'\n                          : undefined\n                      }\n                      extraButtonTitle={t('button.Edit')}\n                      onClickExtraButton={() => {\n                        setCurrentStep(\n                          // @ts-ignore\n                          steps.findIndex((v) => v.key === 'storage'),\n                        );\n                      }}\n                    >\n                      {form.getFieldValue('mounts')?.length > 0 ? (\n                        <Table\n                          rowKey=\"name\"\n                          size=\"small\"\n                          pagination={false}\n                          columns={[\n                            {\n                              dataIndex: 'name',\n                              title: t('data.folders.Name'),\n                            },\n                            {\n                              dataIndex: 'alias',\n                              title: t('session.launcher.FolderAlias'),\n                              render: (value, record) => {\n                                return _.isEmpty(value) ? (\n                                  <Typography.Text\n                                    type=\"secondary\"\n                                    style={{\n                                      opacity: 0.7,\n                                    }}\n                                  >\n                                    {`/home/work/${record.name}`}\n                                  </Typography.Text>\n                                ) : (\n                                  value\n                                );\n                              },\n                            },\n                          ]}\n                          dataSource={_.map(\n                            form.getFieldValue('mounts'),\n                            (v) => {\n                              return {\n                                name: v,\n                                alias:\n                                  form.getFieldValue('vfoldersAliasMap')?.[v],\n                              };\n                            },\n                          )}\n                        ></Table>\n                      ) : (\n                        '-'\n                      )}\n                    </BAICard>\n                    <BAICard\n                      title=\"Network\"\n                      size=\"small\"\n                      status={\n                        form.getFieldError('ports').length > 0\n                          ? 'error'\n                          : undefined\n                      }\n                      extraButtonTitle={t('button.Edit')}\n                      onClickExtraButton={() => {\n                        setCurrentStep(\n                          // @ts-ignore\n                          steps.findIndex((v) => v.key === 'network'),\n                        );\n                      }}\n                    >\n                      <Descriptions size=\"small\">\n                        <Descriptions.Item\n                          label={t('session.launcher.PreOpenPortTitle')}\n                        >\n                          <Flex\n                            direction=\"row\"\n                            gap=\"xs\"\n                            style={{ flex: 1 }}\n                            wrap=\"wrap\"\n                          >\n                            {/* {form.getFieldValue('environments').image} */}\n                            {_.sortBy(form.getFieldValue('ports'), (v) =>\n                              parseInt(v),\n                            ).map((v) => (\n                              <PortTag value={v} style={{ margin: 0 }}>\n                                {v}\n                              </PortTag>\n                            ))}\n                            {form.getFieldValue('ports')?.length !== 0\n                              ? undefined\n                              : '-'}\n                          </Flex>\n                        </Descriptions.Item>\n                      </Descriptions>\n                    </BAICard>\n                  </>\n                )}\n\n                <Flex direction=\"row\" justify=\"between\">\n                  <Flex gap={'sm'}>\n                    {/* <Popconfirm\n                    title={t('session.CheckAgainDialog')}\n                    placement=\"topLeft\"\n                    okButtonProps={{\n                      danger: true,\n                    }}\n                    okText={t('button.Reset')}\n                    onConfirm={() => {\n                      // @ts-ignore\n                      form.resetFields({\n\n                      });\n                    }}\n                  >\n                    <Button ghost danger>\n                      {t('button.Reset')}\n                    </Button>\n                  </Popconfirm> */}\n                    {currentStep === steps.length - 1 && (\n                      <Button\n                        icon={<SaveOutlined />}\n                        onClick={() => {\n                          message.info(\n                            'Not implemented yet: Template edit modal',\n                          );\n                        }}\n                      >\n                        Save as a template\n                      </Button>\n                    )}\n                  </Flex>\n                  <Flex direction=\"row\" gap=\"sm\">\n                    {currentStep !== steps.length - 1 && (\n                      <Button\n                        onClick={() => {\n                          setCurrentStep(steps.length - 1);\n                        }}\n                      >\n                        Skip to Review\n                      </Button>\n                    )}\n                    {currentStep > 0 && (\n                      <Button\n                        onClick={() => {\n                          setCurrentStep(currentStep - 1);\n                        }}\n                        icon={<LeftOutlined />}\n                      >\n                        Previous\n                      </Button>\n                    )}\n                    {currentStep === steps.length - 1 ? (\n                      <Button\n                        type=\"primary\"\n                        icon={<PlayCircleOutlined />}\n                        disabled={hasError}\n                      >\n                        {t('session.launcher.Launch')}\n                      </Button>\n                    ) : (\n                      <Button\n                        type=\"primary\"\n                        ghost\n                        onClick={() => {\n                          setCurrentStep(currentStep + 1);\n                        }}\n                      >\n                        Next <RightOutlined />\n                      </Button>\n                    )}\n                  </Flex>\n                </Flex>\n              </Flex>\n            </Form>\n          </Form.Provider>\n          {/* </Suspense> */}\n        </Flex>\n        {screens.md && (\n          <Affix\n            offsetTop={150}\n            // direction=\"column\"\n            style={{ zIndex: 2 }}\n          >\n            <Steps\n              size=\"small\"\n              direction=\"vertical\"\n              current={currentStep}\n              onChange={(nextCurrent) => {\n                setCurrentStep(nextCurrent);\n              }}\n              items={_.map(steps, (s, idx) => ({\n                ...s,\n                status: idx === currentStep ? 'process' : 'wait',\n              }))}\n            />\n          </Affix>\n        )}\n      </Flex>\n      {/* <FolderExplorer\n        folderName={selectedFolderName}\n        open={!!selectedFolderName}\n        onRequestClose={() => {\n          setSelectedFolderName(undefined);\n        }}\n      /> */}\n    </Flex>\n  );\n};\n\nconst SessionTypeItem: React.FC<{\n  title: string;\n  description?: string;\n}> = ({ title, description }) => {\n  const { token } = theme.useToken();\n  return (\n    <Flex\n      direction=\"column\"\n      style={{ padding: token.paddingXS }}\n      align=\"stretch\"\n    >\n      <Typography.Title level={5}>{title}</Typography.Title>\n      <Typography.Text\n        type=\"secondary\"\n        // @ts-ignore\n        style={{ textWrap: 'wrap' }}\n      >\n        {description}\n      </Typography.Text>\n    </Flex>\n  );\n};\n\n// interface StepContentProps extends FlexProps{\n\n// }\n// const StepContent: React.FC<{}> = () => {\n//   return <Flex>\n\n//   </Flex>\n// }\n\nexport default SessionLauncherPage;\n"],"names":["removeSkipOnClientDirective","query","variables","filteredVariables","_objectSpread","str","result","pattern","directives","exec","_result","_result2","_slicedToArray","originFieldStr","fieldName","directive","argumentName","argumentValue","push","parseDirectives","forEach","substring","replace","startsWith","split","length","argumentNameWithoutDollar","RegExp","concat","RelayFeatureFlags","ENABLE_RELAY_RESOLVERS","fetchFn","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","request","_globalThis$backendai","_globalThis$backendai2","transformedData","reqBody","reqInfo","wrap","_context","prev","next","text","globalThis","backendaiclient","newSignedRequest","_wrapWithPromise","catch","err","t0","sent","abrupt","stop","_x","_x2","apply","arguments","RelayEnvironment","Environment","network","Network","create","subscribeFn","store","Store","RecordSource","dayjs","weekday","localeData","localizedFormat","relativeTime","utc","timezone","WebComponentContext","React","ShadowRootContext","useShadowRoot","useWebComponentInfo","queryClient","QueryClient","defaultOptions","queries","suspense","refetchOnWindowFocus","retry","i18n","initReactI18next","use","Backend","init","backend","loadPath","lng","backendaioptions","get","fallbackLng","interpolation","escapeValue","react","transSupportBasicHtmlNodes","transKeepBasicHtmlNodesFor","RoutingEventHandler","navigate","useNavigate","useLayoutEffect","handleNavigate","e","detail","document","addEventListener","removeEventListener","children","value","styles","shadowRoot","dispatchEvent","cache","useMemo","createCache","_useCurrentLanguage","_useState","useState","_useState2","lang","_setLang","useTranslation","useEffect","setTimeout","changeLanguage","handler","_e$detail","_e$detail2","window","useCurrentLanguage","themeConfig","useCustomThemeConfig","componentValues","moveTo","path","params","_jsx","_Fragment","RelayEnvironmentProvider","environment","_jsxs","QueryClientProvider","client","Provider","ConfigProvider","getPopupContainer","triggerNode","parentNode","locale","ko_KR","en_US","theme","StyleProvider","container","Suspense","fallback","BrowserRouter","QueryParamProvider","adapter","ReactRouter6Adapter","options","ACCELERATOR_UNIT_MAP","MWCIconWrap","_ref2","_ref2$size","size","style","width","height","ResourceTypeIcon","_ref3","_resourceTypeIconSrcM","_resourceTypeIconSrcM2","_resourceTypeIconSrcM3","type","_ref3$size","_ref3$showTooltip","showIcon","showUnit","showTooltip","props","_objectWithoutProperties","_excluded","t","resourceTypeIconSrcMap","cpu","mem","Tooltip","title","undefined","src","alt","amount","extra","opts","token","useToken","units","Flex","direction","gap","Typography","Text","iSizeToSize","numberFixed","parseFloat","toFixed","shmem","fontSize","fontSizeSM","node","v0","hash","_ref$status","status","extraButtonTitle","onClickExtraButton","cardProps","_extra","Button","icon","ExclamationCircleTwoTone","twoToneColor","colorError","onClick","Card","_","borderColor","colorWarning","colorSuccess","onChange","pickerProps","DatePicker","dateString","toISOString","formItemProps","inputRef","useRef","Form","List","fields","add","remove","align","map","index","key","name","restField","_excluded2","Item","marginBottom","flex","rules","required","message","_ref4","getFieldValue","validator","rule","variableName","variableNames","i","variable","Promise","reject","resolve","Input","ref","placeholder","MinusCircleOutlined","noStyle","current","focus","PlusOutlined","block","PortTag","tagProps","port","parseInt","isValid","Tag","color","Object","assign","_objectDestructuringEmpty","label","tooltip","Trans","i18nKey","values","v","Error","Select","mode","tagRender","closable","onClose","onMouseDown","preventDefault","stopPropagation","suffixIcon","open","tokenSeparators","selectProps","_useUpdatableState","useUpdatableState","_useUpdatableState2","fetchKey","updateFetchKey","updateFetchKeyThrottled","useThrottleFn","wait","trailing","leading","run","_useTransition","useTransition","_useTransition2","isPendingUpdate","_startTransition","resource_presets","useLazyLoadQuery","_ResourcePresetSelectQuery","require","fetchPolicy","loading","display","EditOutlined","preset","showSearch","onDropdownVisibleChange","console","log","form","useFormInstance","_useResourceSlots","useResourceSlots","resourceSlots","marginXS","ResourcePresetSelect","_options$preset","_options$preset2","slots","JSON","parse","resource_slots","setFieldsValue","resource","number","shared_memory","margin","shouldUpdate","cur","allocationPreset","SliderInputItem","initialValue","inputNumberProps","addonAfter","max","step","omit","unit","accelerators","endsWith","Option","filter","_ref$showAliasInput","showAliasInput","_ref$selectedRowKeys","selectedRowKeys","controlledSelectedRowKeys","onChangeSelectedRowKeys","_ref$aliasBasePath","aliasBasePath","controlledAliasMap","aliasMap","onChangeAliasMap","_ref$rowKey","rowKey","tableProps","getRowKey","record","_useControllableValue","useControllableValue","defaultValue","_useControllableValue2","setSelectedRowKeys","_useControllableValue3","_useControllableValue4","setAliasMap","_Form$useForm","useForm","internalForm","slice","validateFields","baiRequestWithPromise","useBaiSignedRequestWithPromise","currentProject","useCurrentProjectValue","isPendingRefetch","startRefetchTransition","allFolderList","useTanQuery","queryKey","queryFn","method","url","id","staleTime","data","searchKey","setSearchKey","displayingFolders","vf","includes","handleAliasUpdate","then","finally","getFieldsValue","k","mapAliasToPath","input","columns","fontWeight","zIndex","QuestionCircleOutlined","dataIndex","sorter","a","b","localeCompare","render","isCurrentRowSelected","TextHighlighter","keyword","allAliasPathMap","reduce","_validator","allowClear","fixed","usage_mode","UserOutlined","group_name","permission","row","tagValues","r","w","d","perm","vFolder","hasPermission","toUpperCase","compact","DoubleTag","created_at","format","justify","target","ReloadOutlined","Table","scroll","x","rowSelection","showSorterTooltip","dataSource","onRow","rowIndex","event","_target$classList","classList","contains","_toConsumableArray","useWatch","hidden","arr","valuePropName","trigger","VFolderTable","setFieldValue","pagination","INITIAL_FORM_VALUES","sessionType","stepParam","withDefault","NumberParam","formValuesParam","JsonParam","SessionTypeItem","description","padding","paddingXS","Title","level","textWrap","_steps$currentStep","_form$getFieldValue2","_form$getFieldValue3","_form$getFieldValue4","_form$getFieldValue5","_form$getFieldValue7","_useQueryParams","useQueryParams","formValues","redirectTo","StringParam","_useQueryParams2","_useQueryParams2$","currentStep","initialFormValues","setQuery","syncFormToURLWithDebounce","useDebounceFn","setCurrentStep","nextStep","screens","Grid","useBreakpoint","stringify","steps","PlayCircleFilled","currentStepKey","hasError","getFieldsError","item","errors","paddingSM","justifyContent","Breadcrumb","items","href","maxWidth","marginTop","BlockOutlined","onFormChange","info","layout","requiredMark","Segmented","toString","TextArea","Checkbox","_prev$batch","_next$batch","batch","enabled","_form$getFieldValue","disabled","DatePickerISO","showTime","ErrorBoundary","fallbackRender","ImageEnvironmentSelectFormItems","EnvVarFormList","validateTrigger","ResourceGroupSelect","autoSelectDefault","ResourceAllocationFormItems","VFolderTableFromItem","PortSelectFormItem","BAICard","getFieldError","findIndex","Descriptions","span","idx","column","ImageMetaIcon","image","version","copyable","code","SyntaxHighlighter","darcula","codeTagProps","customStyle","join","ResourceNumber","opacity","_form$getFieldValue6","alias","SaveOutlined","LeftOutlined","PlayCircleOutlined","ghost","RightOutlined","md","Affix","offsetTop","Steps","nextCurrent","s"],"sourceRoot":""}