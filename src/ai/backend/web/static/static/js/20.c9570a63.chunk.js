"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[20],{77758:function(e,n,a){a.d(n,{Z:function(){return o}});var t=a(1413),l=a(36459),i=a(83842),r=(a(4519),a(2556)),o=function(e){var n,a=Object.assign({},((0,l.Z)(e),e));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{children:".ant-modal.bai-modal .ant-modal-content {\n  padding: var(--general-modal-content-padding, 0);\n}\n.ant-modal.bai-modal .ant-modal-body {\n  padding: var(--general-modal-body-padding, 0 24px);\n}\n\n.ant-modal.bai-modal .ant-modal-footer {\n  padding: var(--general-modal-footer-padding, 0 20px 24px 20px);\n}\n\n.ant-modal.bai-modal .ant-modal-header {\n  border-bottom: 1px solid rgb(221, 221, 221);\n  border-width: 100%;\n  justify-content: space-between;\n  display: flex;\n  align-items: center;\n}\n\n.ant-modal.bai-modal .ant-modal-content .ant-modal-header,\n.ant-modal.bai-modal .ant-modal-content > button.ant-modal-close {\n  padding: var(--general-modal-header-padding, 10px 20px);\n  height: var(--general-modal-header-height, 69px);\n}\n\n.ant-modal.bai-modal .ant-modal-content > button.ant-modal-close {\n  /* center */\n  top: 0;\n}\n"}),(0,r.jsx)(i.Z,(0,t.Z)({centered:null===(n=a.centered)||void 0===n||n,className:"bai-modal"},a))]})}},61502:function(e,n,a){a.r(n),a.d(n,{default:function(){return L},useShadowRoot:function(){return _},useWebComponentInfo:function(){return K}});var t=a(29439),l=a(74165),i=a(15861),r=a(1413);function o(e,n){var a=(0,r.Z)({},n);return function(e){for(var n,a=/(\w+)\s@\s*(\w+)\s*\(\s*(\w+)\s*:\s*(\$?\w+)\s*\)/g,l=[];null!==(n=a.exec(e));){var i=n,r=(0,t.Z)(i,5),o=r[0],s=r[1],u=r[2],d=r[3],c=r[4];l.push({fieldName:s,directive:u,argumentName:d,argumentValue:c,originFieldStr:o})}return l}(e).forEach((function(t){if("skipOnClient"===t.directive&&"if"===t.argumentName&&(e=!t.argumentValue||!0!==n[t.argumentValue.substring(1)]&&"true"!==t.argumentValue?e.replace(t.originFieldStr,t.originFieldStr.replace(/@\s*(skipOnClient)\s*\(\s*(\w+)\s*:\s*(\$?\w+)\s*\)/,"")):e.replace(t.originFieldStr,""),t.argumentValue.startsWith("$")&&2===e.split(t.argumentValue).length)){var l=t.argumentValue.substring(1),i=new RegExp(".*".concat(l,".*\n"),"g");e=e.replace(i,""),delete a[t.argumentValue.substring(1)]}})),{query:e,variables:a}}var s=a(41011);s.RelayFeatureFlags.ENABLE_RELAY_RESOLVERS=!0;var u=function(){var e=(0,i.Z)((0,l.Z)().mark((function e(n,a){var t,i,r,s,u,d;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o(n.text||"",a),s={query:r.query,variables:r.variables},u=null===(t=globalThis.backendaiclient)||void 0===t?void 0:t.newSignedRequest("POST","/admin/gql",s),e.next=5,null===(i=globalThis.backendaiclient)||void 0===i?void 0:i._wrapWithPromise(u,!1,null,1e4,0);case 5:return d=e.sent,e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}();var d,c=new s.Environment({network:s.Network.create(u,void 0),store:new s.Store(new s.RecordSource)}),m=a(80382),g=a(27340),p=a(27398),f=a(49883),v=a(66670),y=a(64447),h=a(13881),k=a(4519),b=a(81748),x=a(87112),S=a(16980),Z=a(51843),T=a(12674),F=a(2556),w=k.createContext(null),j=k.createContext(null),_=function(){return k.useContext(j)},K=function(){return k.useContext(w)},C=new x.QueryClient({defaultOptions:{queries:{suspense:!0,refetchOnWindowFocus:!1,retry:!1}}});y.ZP.use(b.Db).use(h.Z).init({backend:{loadPath:"/resources/i18n/{{lng}}.json"},lng:(null===globalThis||void 0===globalThis||null===(d=globalThis.backendaioptions)||void 0===d?void 0:d.get("current_language"))||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});var I=function(){var e=(0,T.s0)();return(0,k.useLayoutEffect)((function(){var n=function(n){var a=n.detail;e(a,{replace:!0})};return document.addEventListener("react-navigate",n),function(){document.removeEventListener("react-navigate",n)}}),[e]),null},L=function(e){var n=e.children,a=e.value,l=e.styles,i=e.shadowRoot,r=e.dispatchEvent,o=(0,k.useMemo)((function(){return(0,g.Df)()}),[]),s=function(){var e,n=(0,k.useState)(null===globalThis||void 0===globalThis||null===(e=globalThis.backendaioptions)||void 0===e?void 0:e.get("current_language")),a=(0,t.Z)(n,2),l=a[0],i=a[1],r=(0,b.$G)().i18n;return(0,k.useEffect)((function(){setTimeout((function(){return null===r||void 0===r?void 0:r.changeLanguage(l)}),0)}),[]),(0,k.useEffect)((function(){var e=function(e){var n,a;i(null===e||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.lang);var t=(null===e||void 0===e||null===(a=e.detail)||void 0===a?void 0:a.lang)||"en";null===r||void 0===r||r.changeLanguage(t)};return window.addEventListener("langChanged",e),function(){return window.removeEventListener("langChanged",e)}}),[r]),[l]}(),u=(0,t.Z)(s,1)[0],d=(0,m.x)(),y=(0,k.useMemo)((function(){return{value:a,dispatchEvent:r,moveTo:function(e){r("moveTo",{path:e})}}}),[a,r]);return(0,F.jsx)(F.Fragment,{children:c&&(0,F.jsx)(S.RelayEnvironmentProvider,{environment:c,children:(0,F.jsxs)(k.StrictMode,{children:[(0,F.jsxs)("style",{children:[l,".anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n.ant-table-wrapper {\n  border-radius: 8px 8px 0 0;\n  overflow: hidden;\n}\n"]}),(0,F.jsx)(x.QueryClientProvider,{client:C,children:(0,F.jsx)(j.Provider,{value:i,children:(0,F.jsx)(w.Provider,{value:y,children:(0,F.jsx)(p.ZP,{getPopupContainer:function(e){return i},locale:"ko"===u?v.Z:f.Z,theme:d,children:(0,F.jsx)(g.V9,{container:i,cache:o,children:(0,F.jsx)(k.Suspense,{fallback:"",children:(0,F.jsxs)(Z.VK,{children:[(0,F.jsx)(I,{}),n]})})})})})})})]})})})}},14749:function(e,n,a){var t,l=a(1413),i=a(29439),r=a(44925),o=a(87760),s=a(50164),u=a(77758),d=a(99277),c=a(44036),m=a(42257),g=a(32360),p=a(39883),f=a(42272),v=a(28499),y=a(38818),h=(a(4519),a(81748)),k=a(87112),b=a(16980),x=a(2556),S=["userFrgmt","onRequestClose"];n.Z=function(e){var n=e.userFrgmt,Z=void 0===n?null:n,T=e.onRequestClose,F=(0,r.Z)(e,S),w=(0,h.$G)().t,j=c.Z.useToken().token,_=m.Z.useForm(),K=(0,i.Z)(_,1)[0],C=(0,b.useFragment)(void 0!==t?t:t=a(78067),Z),I=(0,o.Dj)(),L=(0,k.useQuery)({queryKey:["initialize_totp",null===I||void 0===I?void 0:I.email,F.open],queryFn:function(){return(null===C||void 0===C?void 0:C.email)!==(null===I||void 0===I?void 0:I.email)||null!==C&&void 0!==C&&C.totp_activated||!F.open?null:I.initialize_totp()},suspense:!1,staleTime:0,cacheTime:0}),P=(0,s.Y)({mutationFn:function(e){return I.activate_totp(e.otp)}});return(0,x.jsx)(u.Z,(0,l.Z)((0,l.Z)({title:w("webui.menu.SetupTotp"),maskClosable:!1,confirmLoading:P.isLoading,onOk:function(){K.validateFields().then((function(e){P.mutate(e,{onSuccess:function(){g.ZP.success(w("totp.TotpSetupCompleted")),T(!0)},onError:function(){g.ZP.error(w("totp.InvalidTotpCode"))}}),new Promise((function(e,n){})).then((function(){T(!0)}))}))},onCancel:function(){T()},style:{zIndex:1}},F),{},{children:L.isLoading?(0,x.jsx)(d.Z,{justify:"center",direction:"row",children:(0,x.jsx)(p.Z,{})}):L.data?(0,x.jsxs)(m.Z,{preserve:!1,form:K,validateTrigger:["onChange","onBlur"],children:[w("totp.TypeInAuthKey"),(0,x.jsx)(d.Z,{justify:"center",style:{margin:j.marginSM,gap:j.margin},children:(0,x.jsx)(f.Z,{value:L.data.totp_uri})}),w("totp.ScanQRToEnable"),(0,x.jsx)(d.Z,{justify:"center",style:{margin:j.marginSM,gap:j.margin},children:(0,x.jsx)(v.Z.Text,{copyable:!0,code:!0,children:L.data.totp_key})}),w("totp.TypeInAuthKey"),(0,x.jsx)(d.Z,{justify:"center",style:{margin:j.marginSM,gap:j.margin},children:(0,x.jsx)(m.Z.Item,{required:!0,name:"otp",children:(0,x.jsx)(y.Z,{maxLength:6,allowClear:!0,placeholder:"000000",style:{maxWidth:120}})})})]}):(0,x.jsx)(d.Z,{justify:"center",direction:"row",children:w("totp.TotpSetupNotAvailable")})}))}},75020:function(e,n,a){a.r(n);var t,l,i=a(74165),r=a(1413),o=a(15861),s=a(29439),u=a(44925),d=a(87760),c=a(50164),m=a(77758),g=a(61502),p=a(14749),f=a(88724),v=a(63703),y=a(83842),h=a(42257),k=a(32360),b=a(38818),x=a(71312),S=a(62708),Z=a(28499),T=a(32048),F=a.n(T),w=a(4519),j=a(81748),_=a(87112),K=a(16980),C=a(2556),I=["extraFetchKey"];n.default=function(e){var n,T,L=e.extraFetchKey,P=void 0===L?"":L,M=(0,u.Z)(e,I),E=(0,j.$G)().t,U=(0,g.useWebComponentInfo)(),N=U.value,O=U.dispatchEvent;try{T=JSON.parse(N||"")}catch(ye){T={open:!1,userEmail:""}}var V,A=T,q=A.open,R=A.userEmail,D=y.Z.useModal(),$=(0,s.Z)(D,2),Q=$[0],B=$[1],z=h.Z.useForm(),W=(0,s.Z)(z,1)[0],Y={superadmin:["superadmin","admin","user","monitor"],admin:["admin","user","monitor"]},G=(0,d.Kr)("initial-fetch"),J=(0,s.Z)(G,2),H=J[0],X=J[1],ee=(0,w.useDeferredValue)(H+P),ne=(0,d.Dj)(),ae=(0,_.useQuery)("isManagerSupportingTOTP",(function(){return ne.isManagerSupportingTOTP()}),{suspense:!1}),te=ae.data,le=ae.isLoading;V=(null===ne||void 0===ne?void 0:ne.supports("2FA"))&&te;var ie=(0,K.useLazyLoadQuery)(void 0!==t?t:t=a(76912),{email:R,isNotSupportTotp:!V,loggedInUserEmail:null!==(n=null===ne||void 0===ne?void 0:ne.email)&&void 0!==n?n:""},{fetchKey:ee,fetchPolicy:"network-only"}),re=ie.user,oe=ie.loggedInUser,se=(0,K.useMutation)(void 0!==l?l:l=a(21325)),ue=(0,s.Z)(se,2),de=ue[0],ce=ue[1],me=(0,c.Y)({mutationFn:function(e){return ne.remove_totp(e)}}),ge=(0,v.Z)(!1),pe=(0,s.Z)(ge,2),fe=pe[0],ve=pe[1].toggle;return(0,C.jsxs)(m.Z,(0,r.Z)((0,r.Z)({open:q,onCancel:function(){O("cancel",null)},centered:!0,title:E("credential.ModifyUserDetail"),destroyOnClose:!0,onOk:function(){W.validateFields().then(function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var a,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete(a=(0,r.Z)({},n)).email,a=F().omit(a,["password_confirm"]),a=F().omitBy(a,(function(e){return void 0===e||""===e})),V||null===(t=a)||void 0===t||delete t.totp_activated,de({variables:{email:(null===n||void 0===n?void 0:n.email)||"",props:a,isNotSupportTotp:!V},onCompleted:function(e){var n,a;null!==e&&void 0!==e&&null!==(n=e.modify_user)&&void 0!==n&&n.ok?k.ZP.success(E("environment.SuccessfullyModified")):k.ZP.error(null===e||void 0===e||null===(a=e.modify_user)||void 0===a?void 0:a.msg);O("ok",null)},onError:function(e){k.ZP.error(null===e||void 0===e?void 0:e.message)}});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())},confirmLoading:ce},M),{},{children:[(0,C.jsxs)(h.Z,{preserve:!1,form:W,labelCol:{span:10},wrapperCol:{span:20},validateTrigger:["onChange","onBlur"],style:{marginBottom:40,marginTop:20},initialValues:(0,r.Z)({},re),children:[(0,C.jsx)(h.Z.Item,{name:"email",label:E("credential.UserID"),children:(0,C.jsx)(b.Z,{disabled:!0})}),(0,C.jsx)(h.Z.Item,{name:"username",label:E("credential.UserName"),children:(0,C.jsx)(b.Z,{placeholder:E("maxLength.64chars")})}),(0,C.jsx)(h.Z.Item,{name:"full_name",label:E("credential.FullName"),children:(0,C.jsx)(b.Z,{placeholder:E("maxLength.64chars")})}),(0,C.jsx)(h.Z.Item,{name:"password",label:E("general.NewPassword"),rules:[{pattern:/^(?=.*\d)(?=.*[a-zA-Z])(?=.*[_\W]).{8,}$/,message:E("webui.menu.InvalidPasswordMessage")}],children:(0,C.jsx)(b.Z.Password,{})}),(0,C.jsx)(h.Z.Item,{name:"password_confirm",dependencies:["password"],label:E("webui.menu.NewPasswordAgain"),rules:[function(e){var n=e.getFieldValue;return{validator:function(e,a){return!a&&n("password")?Promise.reject(new Error(E("webui.menu.PleaseConfirmYourPassword"))):a&&n("password")!==a?Promise.reject(new Error(E("environment.PasswordsDoNotMatch"))):Promise.resolve()}}}],children:(0,C.jsx)(b.Z.Password,{})}),(0,C.jsx)(h.Z.Item,{name:"description",label:E("credential.Description"),children:(0,C.jsx)(b.Z.TextArea,{placeholder:E("maxLength.500chars")})}),(0,C.jsx)(h.Z.Item,{name:"status",label:E("credential.UserStatus"),children:(0,C.jsx)(x.Z,{options:F().map({active:"Active",inactive:"Inactive","before-verification":"Before Verification",deleted:"Deleted"},(function(e,n){return{value:n,label:e}}))})}),!(null===re||void 0===re||!re.role)&&!(null===oe||void 0===oe||!oe.role)&&oe.role in Y&&(0,C.jsx)(h.Z.Item,{name:"role",label:E("credential.Role"),children:(0,C.jsx)(x.Z,{options:F().map(Y[oe.role],(function(e){return{value:e,label:e}}))})}),(0,C.jsx)(h.Z.Item,{name:"need_password_change",label:E("credential.DescRequirePasswordChange"),valuePropName:"checked",children:(0,C.jsx)(S.Z,{})}),!!V&&(0,C.jsx)(h.Z.Item,{name:"totp_activated",label:E("webui.menu.TotpActivated"),valuePropName:"checked",extra:(null===re||void 0===re?void 0:re.email)!==(null===ne||void 0===ne?void 0:ne.email)&&(0,C.jsx)(Z.Z.Text,{type:"secondary",style:{fontSize:12},children:E("credential.AdminCanOnlyRemoveTotp")}),children:(0,C.jsx)(S.Z,{loading:le||me.isLoading,disabled:(null===re||void 0===re?void 0:re.email)!==(null===ne||void 0===ne?void 0:ne.email)&&!(null!==re&&void 0!==re&&re.totp_activated),onChange:function(e){e?ve():null!==re&&void 0!==re&&re.totp_activated&&(W.setFieldValue("totp_activated",!0),Q.confirm({title:E("totp.TurnOffTotp"),icon:(0,C.jsx)(f.Z,{}),content:E("totp.ConfirmTotpRemovalBody"),okText:E("button.Yes"),okType:"danger",cancelText:E("button.No"),onOk:function(){me.mutate((null===re||void 0===re?void 0:re.email)||"",{onSuccess:function(){k.ZP.success(E("totp.RemoveTotpSetupCompleted")),X(),W.setFieldValue("totp_activated",!1)},onError:function(e){console.log(e)}})},onCancel:function(){W.setFieldValue("totp_activated",!0)}}))}})})]}),!!V&&(0,C.jsx)(p.Z,{userFrgmt:re,open:fe,onRequestClose:function(e){e?X():W.setFieldValue("totp_activated",!1),ve()}}),B]}))}},78067:function(e,n,a){a.r(n);var t={argumentDefinitions:[{kind:"RootArgument",name:"isNotSupportTotp"}],kind:"Fragment",metadata:null,name:"TOTPActivateModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totp_activated",storageKey:null}],type:"User",abstractKey:null,hash:"f5da6b3094f7d70bef9373d9c907955c"};n.default=t},21325:function(e,n,a){a.r(n);var t=function(){var e={defaultValue:null,kind:"LocalArgument",name:"email"},n={defaultValue:null,kind:"LocalArgument",name:"isNotSupportTotp"},a={defaultValue:null,kind:"LocalArgument",name:"props"},t=[{kind:"Variable",name:"email",variableName:"email"},{kind:"Variable",name:"props",variableName:"props"}],l={alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"need_password_change",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"domain_name",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"role",storageKey:null},f={alias:null,args:null,concreteType:"UserGroup",kind:"LinkedField",name:"groups",plural:!0,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"totp_activated",storageKey:null};return{fragment:{argumentDefinitions:[e,n,a],kind:"Fragment",metadata:null,name:"UserSettingModalMutation",selections:[{alias:null,args:t,concreteType:"ModifyUser",kind:"LinkedField",name:"modify_user",plural:!1,selections:[l,i,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[r,o,s,u,d,c,m,g,p,f,v,{args:null,kind:"FragmentSpread",name:"TOTPActivateModalFragment"}],storageKey:null}],storageKey:null}],type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,a,n],kind:"Operation",name:"UserSettingModalMutation",selections:[{alias:null,args:t,concreteType:"ModifyUser",kind:"LinkedField",name:"modify_user",plural:!1,selections:[l,i,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[r,o,s,u,d,c,m,g,p,f,v],storageKey:null}],storageKey:null}]},params:{cacheID:"5d5c7ff235856d2c08169131fadc0f14",id:null,metadata:{},name:"UserSettingModalMutation",operationKind:"mutation",text:"mutation UserSettingModalMutation(\n  $email: String!\n  $props: ModifyUserInput!\n  $isNotSupportTotp: Boolean!\n) {\n  modify_user(email: $email, props: $props) {\n    ok\n    msg\n    user {\n      id\n      email\n      username\n      need_password_change\n      full_name\n      description\n      status\n      domain_name\n      role\n      groups {\n        id\n        name\n      }\n      totp_activated @skipOnClient(if: $isNotSupportTotp)\n      ...TOTPActivateModalFragment\n    }\n  }\n}\n\nfragment TOTPActivateModalFragment on User {\n  email\n  totp_activated @skipOnClient(if: $isNotSupportTotp)\n}\n"}}}();t.hash="021dbd1c9e2f622338330e746b9c4b3b",n.default=t},76912:function(e,n,a){a.r(n);var t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"email"},{defaultValue:null,kind:"LocalArgument",name:"isNotSupportTotp"},{defaultValue:null,kind:"LocalArgument",name:"loggedInUserEmail"}],n=[{kind:"Variable",name:"email",variableName:"email"}],a={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"need_password_change",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"domain_name",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"role",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c={alias:null,args:null,concreteType:"UserGroup",kind:"LinkedField",name:"groups",plural:!0,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"totp_activated",storageKey:null},g=[{kind:"Variable",name:"email",variableName:"loggedInUserEmail"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserSettingModalQuery",selections:[{alias:null,args:n,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[a,t,l,i,r,o,s,u,c,m,{args:null,kind:"FragmentSpread",name:"TOTPActivateModalFragment"}],storageKey:null},{alias:"loggedInUser",args:g,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[u],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserSettingModalQuery",selections:[{alias:null,args:n,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[a,t,l,i,r,o,s,u,c,m,d],storageKey:null},{alias:"loggedInUser",args:g,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[u,d],storageKey:null}]},params:{cacheID:"f5c73f63d25dff1f189acfc0eb698438",id:null,metadata:{},name:"UserSettingModalQuery",operationKind:"query",text:"query UserSettingModalQuery(\n  $email: String\n  $isNotSupportTotp: Boolean!\n  $loggedInUserEmail: String\n) {\n  user(email: $email) {\n    email\n    username\n    need_password_change\n    full_name\n    description\n    status\n    domain_name\n    role\n    groups {\n      id\n      name\n    }\n    totp_activated @skipOnClient(if: $isNotSupportTotp)\n    ...TOTPActivateModalFragment\n    id\n  }\n  loggedInUser: user(email: $loggedInUserEmail) {\n    role\n    id\n  }\n}\n\nfragment TOTPActivateModalFragment on User {\n  email\n  totp_activated @skipOnClient(if: $isNotSupportTotp)\n}\n"}}}();t.hash="a34969350a5ae4fcee0bbba23cc88484",n.default=t},87760:function(e,n,a){a.d(n,{Dj:function(){return d},Kr:function(){return r},M:function(){return u},dS:function(){return c},qh:function(){return s},tQ:function(){return o}});var t=a(29439),l=a(4519),i=a(87112),r=function(e){return function(e){var n=(0,l.useState)(e||(new Date).toISOString()),a=(0,t.Z)(n,2),i=a[0],r=a[1];return[i,function(e){r(e||(new Date).toISOString())}]}(e)},o=function(){return d()._config.domainName},s=function(){var e=d(),n=(0,l.useState)({name:e.current_group,id:e.groupIds[e.current_group]}),a=(0,t.Z)(n,2),i=a[0],r=a[1];return(0,l.useEffect)((function(){var n=function(n){var a=n.detail;r({name:a,id:e.groupIds[a]})};return document.addEventListener("backend-ai-group-changed",n),function(){document.removeEventListener("backend-ai-group-changed",n)}})),i},u=function(e){var n=e.api_endpoint;return(0,l.useMemo)((function(){var e=new globalThis.BackendAIClientConfig("","",n,"SESSION");return new globalThis.BackendAIClient(e,"Backend.AI Console.")}),[n])},d=function(){return(0,i.useQuery)({queryKey:"backendai-client-for-suspense",queryFn:function(){return new Promise((function(e){if("undefined"!==typeof globalThis.backendaiclient&&null!==globalThis.backendaiclient&&!1!==globalThis.backendaiclient.ready)return e(globalThis.backendaiclient);document.addEventListener("backend-ai-connected",(function n(){e(globalThis.backendaiclient),document.removeEventListener("backend-ai-connected",n)}))}))},retry:!1,suspense:!0}).data},c=function(){var e=(0,i.useQuery)({queryKey:"backendai-metadata-for-suspense",queryFn:function(){return fetch("resources/image_metadata.json").then((function(e){return e.json()})).then((function(e){return e}))},suspense:!0,retry:!1}).data,n=function(e){if(!e)return{key:"",tags:[]};var n=e.split("/"),a=(n[2]||n[1]).split(":"),l=(0,t.Z)(a,2);return{key:l[0],tags:l[1].split("-")}};return[e,{getImageAliasName:function(a){var t=n(a).key;return(null===e||void 0===e?void 0:e.imageInfo[t].name)||t},getImageIcon:function(a){var t,l,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"resources/icons/";if(!a)return"default.png";var r=n(a).key;return i+(void 0!==(null===e||void 0===e||null===(t=e.imageInfo[r])||void 0===t?void 0:t.icon)?null===e||void 0===e||null===(l=e.imageInfo[r])||void 0===l?void 0:l.icon:"default.png")},getImageTags:function(e){},getBaseVersion:function(e){return n(e).tags[0]},getBaseImage:function(e){return n(e).tags[1]},getImageMeta:n}]}},50164:function(e,n,a){a.d(n,{Y:function(){return i},h:function(){return l}});var t=a(87112),l=t.useQuery,i=t.useMutation}}]);
//# sourceMappingURL=20.c9570a63.chunk.js.map