"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[543,711],{1502:function(e,n,a){a.r(n),a.d(n,{default:function(){return L},useShadowRoot:function(){return _},useWebComponentInfo:function(){return C}});var t=a(9439),i=a(4519),l=a(6980),r=a(7340),o=a(9002),s=a(7112),u=a(4447),d=a(1748),c=a(3881),m=a(9883),g=a(6670),p=a(4165),f=a(5861),v=a(1011),y=a(1413);function k(e,n){var a=(0,y.Z)({},n);return function(e){for(var n,a=/(\w+)\s@\s*(\w+)\s*\(\s*(\w+)\s*:\s*(\$?\w+)\s*\)/g,i=[];null!==(n=a.exec(e));){var l=n,r=(0,t.Z)(l,5),o=r[0],s=r[1],u=r[2],d=r[3],c=r[4];i.push({fieldName:s,directive:u,argumentName:d,argumentValue:c,originFieldStr:o})}return i}(e).forEach((function(t){if("skipOnClient"===t.directive&&"if"===t.argumentName&&(e=!t.argumentValue||!0!==n[t.argumentValue.substring(1)]&&"true"!==t.argumentValue?e.replace(t.originFieldStr,t.originFieldStr.replace(/@\s*(skipOnClient)\s*\(\s*(\w+)\s*:\s*(\$?\w+)\s*\)/,"")):e.replace(t.originFieldStr,""),t.argumentValue.startsWith("$")&&2===e.split(t.argumentValue).length)){var i=t.argumentValue.substring(1),l=new RegExp(".*".concat(i,".*\n"),"g");e=e.replace(l,""),delete a[t.argumentValue.substring(1)]}})),{query:e,variables:a}}v.RelayFeatureFlags.ENABLE_RELAY_RESOLVERS=!0;var h=function(){var e=(0,f.Z)((0,p.Z)().mark((function e(n,a){var t,i,l,r,o,s;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=k(n.text||"",a),r={query:l.query,variables:l.variables},o=null===(t=globalThis.backendaiclient)||void 0===t?void 0:t.newSignedRequest("POST","/admin/gql",r),e.next=5,null===(i=globalThis.backendaiclient)||void 0===i?void 0:i._wrapWithPromise(o,!1,null,1e4,0);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}();var b,x=new v.Environment({network:v.Network.create(h,void 0),store:new v.Store(new v.RecordSource)}),S=a(382),Z=a(1843),T=a(2674),w=a(2556),F=i.createContext(null),j=i.createContext(null),_=function(){return i.useContext(j)},C=function(){return i.useContext(F)},K=new s.QueryClient({defaultOptions:{queries:{suspense:!0,refetchOnWindowFocus:!1,retry:!1}}});u.ZP.use(d.Db).use(c.Z).init({backend:{loadPath:"/resources/i18n/{{lng}}.json"},lng:(null===globalThis||void 0===globalThis||null===(b=globalThis.backendaioptions)||void 0===b?void 0:b.get("current_language"))||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});var I=function(){var e=(0,T.s0)();return(0,i.useLayoutEffect)((function(){var n=function(n){var a=n.detail;e(a,{replace:!0})};return document.addEventListener("react-navigate",n),function(){document.removeEventListener("react-navigate",n)}}),[e]),null},L=function(e){var n=e.children,a=e.value,u=e.styles,c=e.shadowRoot,p=e.dispatchEvent,f=(0,i.useMemo)((function(){return(0,r.Df)()}),[]),v=function(){var e,n=(0,i.useState)(null===globalThis||void 0===globalThis||null===(e=globalThis.backendaioptions)||void 0===e?void 0:e.get("current_language")),a=(0,t.Z)(n,2),l=a[0],r=a[1],o=(0,d.$G)().i18n;return(0,i.useEffect)((function(){setTimeout((function(){return null===o||void 0===o?void 0:o.changeLanguage(l)}),0)}),[]),(0,i.useEffect)((function(){var e=function(e){var n,a;r(null===e||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.lang);var t=(null===e||void 0===e||null===(a=e.detail)||void 0===a?void 0:a.lang)||"en";null===o||void 0===o||o.changeLanguage(t)};return window.addEventListener("langChanged",e),function(){return window.removeEventListener("langChanged",e)}}),[o]),[l]}(),y=(0,t.Z)(v,1)[0],k=(0,S.x)(),h=(0,i.useMemo)((function(){return{value:a,dispatchEvent:p,moveTo:function(e){p("moveTo",{path:e})}}}),[a,p]);return(0,w.jsx)(w.Fragment,{children:x&&(0,w.jsx)(l.RelayEnvironmentProvider,{environment:x,children:(0,w.jsxs)(i.StrictMode,{children:[(0,w.jsxs)("style",{children:[u,"\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n"]}),(0,w.jsx)(s.QueryClientProvider,{client:K,children:(0,w.jsx)(j.Provider,{value:c,children:(0,w.jsx)(F.Provider,{value:h,children:(0,w.jsx)(o.ZP,{getPopupContainer:function(e){return c},locale:"ko"===y?g.Z:m.Z,theme:k,children:(0,w.jsx)(r.V9,{container:c,cache:f,children:(0,w.jsx)(i.Suspense,{fallback:"",children:(0,w.jsxs)(Z.VK,{children:[(0,w.jsx)(I,{}),n]})})})})})})})]})})})}},9277:function(e,n,a){var t=a(1413),i=a(4925),l=a(4036),r=(a(4519),a(2556)),o=["direction","wrap","justify","align","gap","style","children"];n.Z=function(e){var n=e.direction,a=void 0===n?"row":n,s=e.wrap,u=void 0===s?"nowrap":s,d=e.justify,c=void 0===d?"flex-start":d,m=e.align,g=void 0===m?"center":m,p=e.gap,f=void 0===p?0:p,v=e.style,y=e.children,k=(0,i.Z)(e,o),h=l.Z.useToken().token,b=[c,g],x=null===b||void 0===b?void 0:b.map((function(e){var n;switch(e){case"start":n="flex-start";break;case"end":n="flex-end";break;case"between":n="space-between";break;case"around":n="space-around";break;default:n=e}return n})),S=(0,t.Z)({display:"flex",flexDirection:a,flexWrap:u,justifyContent:x[0],alignItems:x[1]},v);return(0,r.jsx)("div",(0,t.Z)((0,t.Z)({style:(0,t.Z)({alignItems:"stretch",backgroundColor:"transparent",border:"0 solid black",boxSizing:"border-box",display:"flex",flexBasis:"auto",flexDirection:"column",flexShrink:0,listStyle:"none",margin:0,minHeight:0,minWidth:0,padding:0,position:"relative",textDecoration:"none",gap:"string"===typeof f?h["padding"+f.toUpperCase()]:f},S)},k),{},{children:y}))}},1543:function(e,n,a){a.r(n),a.d(n,{default:function(){return N}});var t,i,l,r=a(4165),o=a(1413),s=a(5861),u=a(9439),d=a(4925),c=a(4519),m=a(6980),g=a(3572),p=a(4787),f=a(3842),v=a(8818),y=a(1312),k=a(2708),h=a(8499),b=a(1748),x=a(1502),S=a(374),Z=a(7760),T=a(164),w=a(7112),F=a(4036),j=a(7171),_=a(2272),C=a(9277),K=a(2556),I=["userFrgmt","onRequestClose"],L=function(e){var n=e.userFrgmt,i=void 0===n?null:n,l=e.onRequestClose,r=(0,d.Z)(e,I),s=(0,b.$G)().t,c=F.Z.useToken().token,y=g.Z.useForm(),k=(0,u.Z)(y,1)[0],x=(0,m.useFragment)(void 0!==t?t:t=a(8067),i),S=(0,Z.Dj)(),L=(0,w.useQuery)({queryKey:["initialize_totp",null===S||void 0===S?void 0:S.email,r.open],queryFn:function(){return(null===x||void 0===x?void 0:x.email)!==(null===S||void 0===S?void 0:S.email)||null!==x&&void 0!==x&&x.totp_activated||!r.open?null:S.initialize_totp()},suspense:!1,staleTime:0,cacheTime:0}),P=(0,T.Y)({mutationFn:function(e){return S.activate_totp(e.otp)}});return(0,K.jsx)(f.Z,(0,o.Z)((0,o.Z)({title:s("webui.menu.SetupTotp"),maskClosable:!1,confirmLoading:P.isLoading,onOk:function(){k.validateFields().then((function(e){P.mutate(e,{onSuccess:function(){p.ZP.success(s("totp.TotpSetupCompleted")),l(!0)},onError:function(){p.ZP.error(s("totp.InvalidTotpCode"))}}),new Promise((function(e,n){})).then((function(){l(!0)}))}))},onCancel:function(){l()},style:{zIndex:1}},r),{},{children:L.isLoading?(0,K.jsx)(C.Z,{justify:"center",direction:"row",children:(0,K.jsx)(j.Z,{})}):L.data?(0,K.jsxs)(g.Z,{preserve:!1,form:k,validateTrigger:["onChange","onBlur"],children:[s("totp.TypeInAuthKey"),(0,K.jsx)(C.Z,{justify:"center",style:{margin:c.marginSM,gap:c.margin},children:(0,K.jsx)(_.Z,{value:L.data.totp_uri})}),s("totp.ScanQRToEnable"),(0,K.jsx)(C.Z,{justify:"center",style:{margin:c.marginSM,gap:c.margin},children:(0,K.jsx)(h.Z.Text,{copyable:!0,code:!0,children:L.data.totp_key})}),s("totp.TypeInAuthKey"),(0,K.jsx)(C.Z,{justify:"center",style:{margin:c.marginSM,gap:c.margin},children:(0,K.jsx)(g.Z.Item,{required:!0,name:"otp",children:(0,K.jsx)(v.Z,{maxLength:6,allowClear:!0,placeholder:"000000",style:{maxWidth:120}})})})]}):(0,K.jsx)(C.Z,{justify:"center",direction:"row",children:s("totp.TotpSetupNotAvailable")})}))},P=a(2048),M=a.n(P),E=a(8724),U=["extraFetchKey"],N=function(e){var n,t,F=e.extraFetchKey,j=void 0===F?"":F,_=(0,d.Z)(e,U),C=(0,b.$G)().t,I=(0,x.useWebComponentInfo)(),P=I.value,N=I.dispatchEvent;try{t=JSON.parse(P||"")}catch(me){t={open:!1,userEmail:""}}var A,O=t,V=O.open,D=O.userEmail,q=g.Z.useForm(),R=(0,u.Z)(q,1)[0],$={superadmin:["superadmin","admin","user","monitor"],admin:["admin","user","monitor"]},B=(0,Z.Kr)("initial-fetch"),Q=(0,u.Z)(B,2),z=Q[0],W=Q[1],Y=(0,c.useDeferredValue)(z+j),G=(0,Z.Dj)(),H=(0,w.useQuery)("isManagerSupportingTOTP",(function(){return G.isManagerSupportingTOTP()}),{suspense:!1}),J=H.data,X=H.isLoading;A=(null===G||void 0===G?void 0:G.supports("2FA"))&&J;var ee=(0,m.useLazyLoadQuery)(void 0!==i?i:i=a(6912),{email:D,isNotSupportTotp:!A,loggedInUserEmail:null!==(n=null===G||void 0===G?void 0:G.email)&&void 0!==n?n:""},{fetchKey:Y,fetchPolicy:"network-only"}),ne=ee.user,ae=ee.loggedInUser,te=(0,m.useMutation)(void 0!==l?l:l=a(1325)),ie=(0,u.Z)(te,2),le=ie[0],re=ie[1],oe=(0,T.Y)({mutationFn:function(e){return G.remove_totp(e)}}),se=(0,S.Z)(!1),ue=(0,u.Z)(se,2),de=ue[0],ce=ue[1].toggle;return(0,K.jsxs)(f.Z,(0,o.Z)((0,o.Z)({open:V,onCancel:function(){N("cancel",null)},centered:!0,title:C("credential.ModifyUserDetail"),destroyOnClose:!0,onOk:function(){R.validateFields().then(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var a,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete(a=(0,o.Z)({},n)).email,a=M().omitBy(a,(function(e){return void 0===e||""===e})),A||null===(t=a)||void 0===t||delete t.totp_activated,le({variables:{email:(null===n||void 0===n?void 0:n.email)||"",props:a,isNotSupportTotp:!A},onCompleted:function(e){var n,a;null!==e&&void 0!==e&&null!==(n=e.modify_user)&&void 0!==n&&n.ok?p.ZP.success(C("environment.SuccessfullyModified")):p.ZP.error(null===e||void 0===e||null===(a=e.modify_user)||void 0===a?void 0:a.msg);N("ok",null)},onError:function(e){p.ZP.error(null===e||void 0===e?void 0:e.message)}});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())},confirmLoading:re},_),{},{children:[(0,K.jsxs)(g.Z,{preserve:!1,form:R,labelCol:{span:10},wrapperCol:{span:20},validateTrigger:["onChange","onBlur"],style:{marginBottom:40,marginTop:20},initialValues:(0,o.Z)({},ne),children:[(0,K.jsx)(g.Z.Item,{name:"email",label:C("credential.UserID"),children:(0,K.jsx)(v.Z,{disabled:!0})}),(0,K.jsx)(g.Z.Item,{name:"username",label:C("credential.UserName"),children:(0,K.jsx)(v.Z,{placeholder:C("maxLength.64chars")})}),(0,K.jsx)(g.Z.Item,{name:"full_name",label:C("credential.FullName"),children:(0,K.jsx)(v.Z,{placeholder:C("maxLength.64chars")})}),(0,K.jsx)(g.Z.Item,{name:"password",label:C("general.NewPassword"),rules:[{pattern:/^(?=.*[A-Za-z])(?=.*\d)(?=.*[\^\-_])[A-Za-z\d^\-_]{8,}$/,message:C("webui.menu.InvalidPasswordMessage")}],children:(0,K.jsx)(v.Z.Password,{})}),(0,K.jsx)(g.Z.Item,{name:"password_confirm",dependencies:["password"],label:C("webui.menu.NewPasswordAgain"),rules:[function(e){var n=e.getFieldValue;return{validator:function(e,a){return!a&&n("password")?Promise.reject(new Error(C("webui.menu.PleaseConfirmYourPassword"))):a&&n("password")!==a?Promise.reject(new Error(C("environment.PasswordsDoNotMatch"))):Promise.resolve()}}}],children:(0,K.jsx)(v.Z.Password,{})}),(0,K.jsx)(g.Z.Item,{name:"description",label:C("credential.Description"),children:(0,K.jsx)(v.Z.TextArea,{placeholder:C("maxLength.500chars")})}),(0,K.jsx)(g.Z.Item,{name:"status",label:C("credential.UserStatus"),children:(0,K.jsx)(y.Z,{options:M().map({active:"Active",inactive:"Inactive","before-verification":"Before Verification",deleted:"Deleted"},(function(e,n){return{value:n,label:e}}))})}),!(null===ne||void 0===ne||!ne.role)&&!(null===ae||void 0===ae||!ae.role)&&ae.role in $&&(0,K.jsx)(g.Z.Item,{name:"role",label:C("credential.Role"),children:(0,K.jsx)(y.Z,{options:M().map($[ae.role],(function(e){return{value:e,label:e}}))})}),(0,K.jsx)(g.Z.Item,{name:"need_password_change",label:C("credential.DescRequirePasswordChange"),valuePropName:"checked",children:(0,K.jsx)(k.Z,{})}),!!A&&(0,K.jsx)(g.Z.Item,{name:"totp_activated",label:C("webui.menu.TotpActivated"),valuePropName:"checked",extra:(null===ne||void 0===ne?void 0:ne.email)!==(null===G||void 0===G?void 0:G.email)&&(0,K.jsx)(h.Z.Text,{type:"secondary",style:{fontSize:12},children:C("credential.AdminCanOnlyRemoveTotp")}),children:(0,K.jsx)(k.Z,{loading:X||oe.isLoading,disabled:(null===ne||void 0===ne?void 0:ne.email)!==(null===G||void 0===G?void 0:G.email)&&!(null!==ne&&void 0!==ne&&ne.totp_activated),onChange:function(e){e?ce():null!==ne&&void 0!==ne&&ne.totp_activated&&(R.setFieldValue("totp_activated",!0),f.Z.confirm({title:C("totp.TurnOffTotp"),icon:(0,K.jsx)(E.Z,{}),content:C("totp.ConfirmTotpRemovalBody"),okText:C("button.Yes"),okType:"danger",cancelText:C("button.No"),onOk:function(){oe.mutate((null===ne||void 0===ne?void 0:ne.email)||"",{onSuccess:function(){p.ZP.success(C("totp.RemoveTotpSetupCompleted")),W(),R.setFieldValue("totp_activated",!1)},onError:function(e){console.log(e)}})},onCancel:function(){R.setFieldValue("totp_activated",!0)}}))}})})]}),!!A&&(0,K.jsx)(L,{userFrgmt:ne,open:de,onRequestClose:function(e){e?W():R.setFieldValue("totp_activated",!1),ce()}})]}))}},8067:function(e,n,a){a.r(n);var t={argumentDefinitions:[{kind:"RootArgument",name:"isNotSupportTotp"}],kind:"Fragment",metadata:null,name:"TOTPActivateModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totp_activated",storageKey:null}],type:"User",abstractKey:null,hash:"f5da6b3094f7d70bef9373d9c907955c"};n.default=t},1325:function(e,n,a){a.r(n);var t=function(){var e={defaultValue:null,kind:"LocalArgument",name:"email"},n={defaultValue:null,kind:"LocalArgument",name:"isNotSupportTotp"},a={defaultValue:null,kind:"LocalArgument",name:"props"},t=[{kind:"Variable",name:"email",variableName:"email"},{kind:"Variable",name:"props",variableName:"props"}],i={alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"need_password_change",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"domain_name",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"role",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},f={alias:null,args:null,concreteType:"UserGroup",kind:"LinkedField",name:"groups",plural:!0,selections:[p,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"totp_activated",storageKey:null};return{fragment:{argumentDefinitions:[e,n,a],kind:"Fragment",metadata:null,name:"UserSettingModalMutation",selections:[{alias:null,args:t,concreteType:"ModifyUser",kind:"LinkedField",name:"modify_user",plural:!1,selections:[i,l,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[r,o,s,u,d,c,m,g,f,v,{args:null,kind:"FragmentSpread",name:"TOTPActivateModalFragment"}],storageKey:null}],storageKey:null}],type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,a,n],kind:"Operation",name:"UserSettingModalMutation",selections:[{alias:null,args:t,concreteType:"ModifyUser",kind:"LinkedField",name:"modify_user",plural:!1,selections:[i,l,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[r,o,s,u,d,c,m,g,f,v,p],storageKey:null}],storageKey:null}]},params:{cacheID:"6511fcbe5a63d6b7e2289074ec6edeb4",id:null,metadata:{},name:"UserSettingModalMutation",operationKind:"mutation",text:"mutation UserSettingModalMutation(\n  $email: String!\n  $props: ModifyUserInput!\n  $isNotSupportTotp: Boolean!\n) {\n  modify_user(email: $email, props: $props) {\n    ok\n    msg\n    user {\n      email\n      username\n      need_password_change\n      full_name\n      description\n      status\n      domain_name\n      role\n      groups {\n        id\n        name\n      }\n      totp_activated @skipOnClient(if: $isNotSupportTotp)\n      ...TOTPActivateModalFragment\n      id\n    }\n  }\n}\n\nfragment TOTPActivateModalFragment on User {\n  email\n  totp_activated @skipOnClient(if: $isNotSupportTotp)\n}\n"}}}();t.hash="c89335fad31a7a876c286f3fa96478c1",n.default=t},6912:function(e,n,a){a.r(n);var t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"email"},{defaultValue:null,kind:"LocalArgument",name:"isNotSupportTotp"},{defaultValue:null,kind:"LocalArgument",name:"loggedInUserEmail"}],n=[{kind:"Variable",name:"email",variableName:"email"}],a={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"need_password_change",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"domain_name",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"role",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c={alias:null,args:null,concreteType:"UserGroup",kind:"LinkedField",name:"groups",plural:!0,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"totp_activated",storageKey:null},g=[{kind:"Variable",name:"email",variableName:"loggedInUserEmail"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserSettingModalQuery",selections:[{alias:null,args:n,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[a,t,i,l,r,o,s,u,c,m,{args:null,kind:"FragmentSpread",name:"TOTPActivateModalFragment"}],storageKey:null},{alias:"loggedInUser",args:g,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[u],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserSettingModalQuery",selections:[{alias:null,args:n,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[a,t,i,l,r,o,s,u,c,m,d],storageKey:null},{alias:"loggedInUser",args:g,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[u,d],storageKey:null}]},params:{cacheID:"f5c73f63d25dff1f189acfc0eb698438",id:null,metadata:{},name:"UserSettingModalQuery",operationKind:"query",text:"query UserSettingModalQuery(\n  $email: String\n  $isNotSupportTotp: Boolean!\n  $loggedInUserEmail: String\n) {\n  user(email: $email) {\n    email\n    username\n    need_password_change\n    full_name\n    description\n    status\n    domain_name\n    role\n    groups {\n      id\n      name\n    }\n    totp_activated @skipOnClient(if: $isNotSupportTotp)\n    ...TOTPActivateModalFragment\n    id\n  }\n  loggedInUser: user(email: $loggedInUserEmail) {\n    role\n    id\n  }\n}\n\nfragment TOTPActivateModalFragment on User {\n  email\n  totp_activated @skipOnClient(if: $isNotSupportTotp)\n}\n"}}}();t.hash="a34969350a5ae4fcee0bbba23cc88484",n.default=t},7760:function(e,n,a){a.d(n,{Dj:function(){return d},Kr:function(){return r},M:function(){return u},dS:function(){return c},qh:function(){return s},tQ:function(){return o}});var t=a(9439),i=a(4519),l=a(7112),r=function(e){return function(e){var n=(0,i.useState)(e||(new Date).toISOString()),a=(0,t.Z)(n,2),l=a[0],r=a[1];return[l,function(e){r(e||(new Date).toISOString())}]}(e)},o=function(){return d()._config.domainName},s=function(){var e=d(),n=(0,i.useState)({name:e.current_group,id:e.groupIds[e.current_group]}),a=(0,t.Z)(n,2),l=a[0],r=a[1];return(0,i.useEffect)((function(){var n=function(n){var a=n.detail;r({name:a,id:e.groupIds[a]})};return document.addEventListener("backend-ai-group-changed",n),function(){document.removeEventListener("backend-ai-group-changed",n)}})),l},u=function(e){var n=e.api_endpoint;return(0,i.useMemo)((function(){var e=new globalThis.BackendAIClientConfig("","",n,"SESSION");return new globalThis.BackendAIClient(e,"Backend.AI Console.")}),[n])},d=function(){return(0,l.useQuery)({queryKey:"backendai-client-for-suspense",queryFn:function(){return new Promise((function(e){if("undefined"!==typeof globalThis.backendaiclient&&null!==globalThis.backendaiclient&&!1!==globalThis.backendaiclient.ready)return e(globalThis.backendaiclient);document.addEventListener("backend-ai-connected",(function n(){e(globalThis.backendaiclient),document.removeEventListener("backend-ai-connected",n)}))}))},retry:!1,suspense:!0}).data},c=function(){var e=(0,l.useQuery)({queryKey:"backendai-metadata-for-suspense",queryFn:function(){return fetch("resources/image_metadata.json").then((function(e){return e.json()})).then((function(e){return e}))},suspense:!0,retry:!1}).data,n=function(e){if(!e)return{key:"",tags:[]};var n=e.split("/"),a=(n[2]||n[1]).split(":"),i=(0,t.Z)(a,2);return{key:i[0],tags:i[1].split("-")}};return[e,{getImageAliasName:function(a){var t=n(a).key;return(null===e||void 0===e?void 0:e.imageInfo[t].name)||t},getImageIcon:function(a){var t,i,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"resources/icons/";if(!a)return"default.png";var r=n(a).key;return l+(void 0!==(null===e||void 0===e||null===(t=e.imageInfo[r])||void 0===t?void 0:t.icon)?null===e||void 0===e||null===(i=e.imageInfo[r])||void 0===i?void 0:i.icon:"default.png")},getImageTags:function(e){},getBaseVersion:function(e){return n(e).tags[0]},getBaseImage:function(e){return n(e).tags[1]},getImageMeta:n}]}},164:function(e,n,a){a.d(n,{Y:function(){return l},h:function(){return i}});var t=a(7112),i=t.useQuery,l=t.useMutation}}]);
//# sourceMappingURL=543.e55018e3.chunk.js.map