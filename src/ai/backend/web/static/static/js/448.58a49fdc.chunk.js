/*! For license information please see 448.58a49fdc.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[448],{11588(e,t,l){l.d(t,{A:()=>o});var n=l(32397);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};var r=l(16826);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},i.apply(this,arguments)}const s=(e,t)=>n.createElement(r.A,i({},e,{ref:t,icon:a}));const o=n.forwardRef(s)},37837(e,t,l){l.d(t,{A:()=>h});var n=l(56276),a=l(11863),r=l(20359),i=l(37942),s=l(22722),o=l(85895),u=l(7749),c=l(96337),d=l(47476),m=l.n(d),g=l(32397),p=l(94109),y=l(33337);const f=["open","onRequestClose","columns","hiddenColumnKeys"],h=e=>{var t;let{open:l,onRequestClose:d,columns:h,hiddenColumnKeys:v}=e,b=(0,a.A)(e,f);const x=(0,g.useRef)(null),{t:S}=(0,p.Bd)(),{token:j}=u.A.useToken(),k=m().map(h,(e=>{return"string"===typeof e.title?{label:e.title,value:m().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(t=e.title,g.Children.map(t.props.children,(e=>{if("string"===typeof e)return e}))),value:m().toString(e.key)}:{label:void 0,value:m().toString(e.key)};var t}));return(0,y.jsx)(c.IbE,(0,n.A)((0,n.A)({title:S("table.SettingTable"),open:l,destroyOnHidden:!0,centered:!0,onOk:()=>{var e;null===(e=x.current)||void 0===e||e.validateFields().then((e=>{d(e)})).catch((()=>{}))},onCancel:()=>{d()}},b),{},{children:(0,y.jsxs)(s.A,{ref:x,preserve:!1,initialValues:{selectedColumnKeys:null===(t=m().map(k,"value"))||void 0===t?void 0:t.filter((e=>!m().includes(v,e)))},layout:"vertical",children:[(0,y.jsx)(s.A.Item,{name:"searchInput",label:S("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,y.jsx)(o.A,{prefix:(0,y.jsx)(r.A,{}),style:{marginBottom:j.marginSM},placeholder:S("table.SearchTableColumn")})}),(0,y.jsx)(s.A.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.searchInput!==t.searchInput,children:e=>{let{getFieldValue:t}=e;const l=t("searchInput")?m().toLower(t("searchInput")):void 0,a=m().map(k,(e=>m().toLower(m().toString(e.label)).includes(l||"")?e:(0,n.A)((0,n.A)({},e),{},{style:{display:"none"}})));return(0,y.jsx)(s.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},rules:[{required:!0,message:S("general.validation.PleaseSelectOptions")}],children:(0,y.jsx)(i.A.Group,{options:a,style:{flexDirection:"column"}})})}})]})}))}},80412(e,t,l){l.d(t,{a:()=>a});var n=l(83632);const a=e=>{const[t,l]=(0,n.q)("hiddenColumnKeys.".concat(e));return[t,l]}},80448(e,t,l){l.r(t),l.d(t,{default:()=>K});var n=l(56276);const a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"filter"},t={defaultValue:null,kind:"LocalArgument",name:"limit"},l={defaultValue:null,kind:"LocalArgument",name:"offset"},n={defaultValue:null,kind:"LocalArgument",name:"order"},a={defaultValue:null,kind:"LocalArgument",name:"status"},r=[{alias:null,args:[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"},{kind:"Variable",name:"order",variableName:"order"},{kind:"Variable",name:"status",variableName:"status"}],concreteType:"AgentSummaryList",kind:"LinkedField",name:"agent_summary_list",plural:!1,selections:[{alias:null,args:null,concreteType:"AgentSummary",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"available_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"schedulable",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,t,l,n,a],kind:"Fragment",metadata:null,name:"AgentSummaryListQuery",selections:r,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,l,e,a,n],kind:"Operation",name:"AgentSummaryListQuery",selections:r},params:{cacheID:"caaf8909248bac69bce5c748e6d28032",id:null,metadata:{},name:"AgentSummaryListQuery",operationKind:"query",text:"query AgentSummaryListQuery(\n  $limit: Int!\n  $offset: Int!\n  $filter: String\n  $status: String\n  $order: String\n) {\n  agent_summary_list(limit: $limit, offset: $offset, filter: $filter, status: $status, order: $order) {\n    items {\n      id\n      status\n      architecture\n      available_slots\n      occupied_slots\n      scaling_group\n      schedulable\n    }\n    total_count\n  }\n}\n"}}}();a.hash="dab7ef4f1205af54a6f80ce0d28098c7";const r=a;var i=l(48648),s=l(96490),o=l(45682),u=l(80412),c=l(53045),d=l(37837),m=l(94456),g=l(11588),p=l(84639),y=l(70975),f=l(7749),h=l(68632),v=l(94668),b=l(21843),x=l(96337),S=l(47476),j=l.n(S),k=l(32397),A=l(94109),O=l(19869),w=l(83632),C=l(22905),L=l(33337);const _=e=>{var t;let{containerStyle:l,tableProps:a}=e;const{t:S}=(0,A.Bd)(),{token:_}=f.A.useToken(),{mergedResourceSlots:I}=(0,x.Hvp)(),[T,{toggle:K}]=(0,y.A)(),{baiPaginationOption:z,tablePaginationOption:F,setTablePaginationOption:V}=(0,s.L0)({current:1,pageSize:20}),[D,N]=(0,C.useQueryParams)({order:(0,C.withDefault)(C.StringParam,void 0),filter:(0,C.withDefault)(C.StringParam,void 0),status:(0,C.withDefault)(C.StringParam,"ALIVE")}),[E,P]=(0,x.zui)(),{sftpResourceGroups:R}=(0,o.Bk)(),$=R&&R.length>0?"!(scaling_group in [".concat(R.map((e=>'"'.concat(e,'"'))).join(", "),"])"):void 0,q=(0,k.useMemo)((()=>({limit:z.limit,offset:z.offset,filter:(0,x.r2g)([D.filter,$]),order:D.order,status:D.status})),[z.limit,z.offset,D.filter,D.order,D.status,$]),B=(0,k.useDeferredValue)(q),Q=(0,k.useDeferredValue)(E),[Z,G]=(0,w.q)("table_column_overrides.AgentSummaryList"),{agent_summary_list:M}=(0,O.useLazyLoadQuery)(r,B,{fetchKey:Q,fetchPolicy:Q===x.eIE?"store-and-network":"network-only"}),X=[{title:(0,L.jsx)(L.Fragment,{children:"ID"}),key:"id",dataIndex:"id",fixed:"left",render:e=>(0,L.jsx)(x.OOm,{direction:"column",align:"start",children:(0,L.jsx)(h.A.Text,{children:e})}),sorter:!0},{title:S("agent.Architecture"),key:"architecture",dataIndex:"architecture"},{title:S("agent.Allocation"),key:"allocation",render:(e,t)=>{const l=JSON.parse((null===t||void 0===t?void 0:t.occupied_slots)||"{}"),n=JSON.parse((null===t||void 0===t?void 0:t.available_slots)||"{}");return(0,L.jsx)(x.OOm,{direction:"column",gap:"xxs",children:j().map(n,((e,t)=>{if("cpu"===t){var a;const e=j().toFinite(j().toNumber(l.cpu)/j().toNumber(n.cpu)*100);return(0,L.jsxs)(x.OOm,{justify:"between",style:{minWidth:220},children:[(0,L.jsxs)(x.OOm,{gap:"xxs",children:[(0,L.jsx)(x.s5e,{type:t},t),(0,L.jsxs)(h.A.Text,{children:[(0,i.Z1)(l.cpu||0,0),"/",(0,i.Z1)(n.cpu||0,0)]}),(0,L.jsx)(h.A.Text,{type:"secondary",style:{fontSize:_.sizeXS},children:null===I||void 0===I||null===(a=I.cpu)||void 0===a?void 0:a.display_unit})]}),(0,L.jsx)(x.E2g,{percent:e,strokeColor:e>80?_.colorError:_.colorSuccess,width:120,valueLabel:(0,i.Z1)(e,1)+" %"})]},t)}if("mem"===t){var r,s,o,u;const e=j().toFinite(j().toNumber(l.mem)/j().toNumber(n.mem)*100);return(0,L.jsxs)(x.OOm,{justify:"between",style:{minWidth:220},children:[(0,L.jsxs)(x.OOm,{gap:"xxs",children:[(0,L.jsx)(x.s5e,{type:"mem"}),(0,L.jsxs)(h.A.Text,{children:[null!==(r=null===(s=(0,i.mv)(l.mem,"g",0))||void 0===s?void 0:s.numberFixed)&&void 0!==r?r:0,"/",null!==(o=null===(u=(0,i.mv)(n.mem,"g",0))||void 0===u?void 0:u.numberFixed)&&void 0!==o?o:0]}),(0,L.jsx)(h.A.Text,{type:"secondary",style:{fontSize:_.sizeXS},children:"GiB"})]}),(0,L.jsx)(x.E2g,{percent:e,strokeColor:e>80?_.colorError:_.colorSuccess,width:120,valueLabel:(0,i.Z1)(e,1)+" %"})]},"mem")}if(n[t]){var c;const e=j().toFinite(j().toNumber(l[t])/j().toNumber(n[t])*100);return(0,L.jsxs)(x.OOm,{justify:"between",style:{minWidth:220},gap:"xxs",children:[(0,L.jsxs)(x.OOm,{gap:"xxs",children:[(0,L.jsx)(x.s5e,{type:t},t),(0,L.jsxs)(h.A.Text,{children:[(0,i.Z1)(l[t]||0,2),"/",(0,i.Z1)(n[t],2)]}),(0,L.jsx)(h.A.Text,{type:"secondary",style:{fontSize:_.sizeXS},children:null===I||void 0===I||null===(c=I[t])||void 0===c?void 0:c.display_unit})]}),(0,L.jsx)(x.E2g,{percent:e,strokeColor:e>80?_.colorError:_.colorSuccess,width:120,valueLabel:(0,i.Z1)(e,1)+" %"})]},t)}}))})}},{title:S("general.ResourceGroup"),key:"scaling_group",dataIndex:"scaling_group",sorter:!0},{title:S("agent.Schedulable"),key:"schedulable",dataIndex:"schedulable",render:e=>(0,L.jsx)(x.OOm,{justify:"center",children:!0===e?(0,L.jsx)(m.A,{style:{color:_.colorSuccess,fontSize:_.fontSizeXL}}):(0,L.jsx)(g.A,{style:{color:_.colorTextDisabled,fontSize:_.fontSizeXL}})}),sorter:!0}],[H,W]=(0,u.a)("AgentSummaryList");return(0,L.jsxs)(x.OOm,{direction:"column",align:"stretch",style:l,gap:"sm",children:[(0,L.jsxs)(x.OOm,{justify:"between",align:"start",gap:"xs",wrap:"wrap",children:[(0,L.jsxs)(x.OOm,{direction:"row",gap:"sm",align:"start",style:{flex:1},wrap:"wrap",children:[(0,L.jsx)(c.A,{options:[{label:S("agent.Connected"),value:"ALIVE"},{label:S("agent.Terminated"),value:"TERMINATED"}],value:D.status,onChange:e=>{const t=e.target.value;N({status:t},"replaceIn")}}),(0,L.jsx)(x.Af6,{filterProperties:[{key:"id",propertyLabel:"ID",type:"string"},{key:"schedulable",propertyLabel:S("agent.Schedulable"),type:"boolean",options:[{label:S("general.Enabled"),value:"true"},{label:S("general.Disabled"),value:"false"}]}],value:D.filter,onChange:e=>{N({filter:e},"replaceIn"),V({current:1})}})]}),(0,L.jsx)(x.OOm,{gap:"xs",children:(0,L.jsx)(v.A,{title:S("button.Refresh"),children:(0,L.jsx)(b.Ay,{loading:Q!==E,onClick:()=>P(),icon:(0,L.jsx)(p.A,{})})})})]}),(0,L.jsx)(x.zxw,(0,n.A)({bordered:!0,scroll:{x:"max-content"},rowKey:"id",dataSource:(0,x.faj)(null===M||void 0===M?void 0:M.items),showSorterTooltip:!1,columns:j().filter(X,(e=>!j().includes(H,j().toString(null===e||void 0===e?void 0:e.key)))),pagination:{pageSize:F.pageSize,current:F.current,total:null!==(t=null===M||void 0===M?void 0:M.total_count)&&void 0!==t?t:0,onChange(e,t){j().isNumber(e)&&j().isNumber(t)&&V({current:e,pageSize:t})}},onChangeOrder:e=>{N({order:e},"replaceIn")},tableSettings:{columnOverrides:Z,onColumnOverridesChange:G},loading:B!==q},a)),(0,L.jsx)(d.A,{open:T,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&W(j().difference(X.map((e=>j().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),K()},columns:X,hiddenColumnKeys:H})]})};var I=l(63745);const T=(0,C.withDefault)(C.StringParam,"agent-summary"),K=()=>{const{t:e}=(0,A.Bd)(),[t,l]=(0,C.useQueryParam)("tab",T,{updateType:"replace"}),{token:n}=f.A.useToken();return(0,L.jsx)(x.Zuv,{activeTabKey:t,onTabChange:e=>l(e),tabList:[{key:"agent-summary",tab:e("webui.menu.AgentSummary")}],children:"agent-summary"===t?(0,L.jsx)(k.Suspense,{fallback:(0,L.jsx)(I.A,{active:!0,style:{padding:n.paddingContentVerticalLG}}),children:(0,L.jsx)(_,{})}):null})}}}]);
//# sourceMappingURL=448.58a49fdc.chunk.js.map