"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[2483],{71801:(e,a,n)=>{n.d(a,{A:()=>c});var l=n(40691),i=n(89939),r=n(9571),t=n(52335),s=n(20418),o=n(46976),d=n.n(o),u=(n(53350),n(60598));const c=e=>{let{status:a="default",extraButtonTitle:n,onClickExtraButton:o,extra:c,style:m,styles:p,showDivider:g,...y}=e;const{token:k}=r.A.useToken(),f=c||n&&(0,u.jsx)(t.Ay,{type:"link",icon:"error"===a?(0,u.jsx)(l.A,{twoToneColor:k.colorError}):"warning"===a?(0,u.jsx)(i.A,{twoToneColor:k.colorWarning}):void 0,onClick:o,children:n})||void 0;return(0,u.jsx)(s.A,{className:"error"===a?"bai-card-error":"",style:d().extend(m,{borderColor:"error"===a?k.colorError:"warning"===a?k.colorWarning:"success"===a?k.colorSuccess:null===m||void 0===m?void 0:m.borderColor}),styles:d().merge(g?{}:{header:{borderBottom:"none"},body:{paddingTop:k.marginXS}},p),extra:f,...y})}},8570:(e,a,n)=>{n.d(a,{Ay:()=>A,r2:()=>x});var l=n(72375),i=n(72338),r=n(71515),t=n(51847),s=n(9571),o=n(65196),d=n(1581),u=n(82919),c=n(78186),m=n(83978),p=n(24798),g=n(52335),y=n(46976),k=n.n(y),f=n(53350),v=n(91788),b=n(60598);const S={string:"ilike",boolean:"=="},_={boolean:[{label:"True",value:"true"},{label:"False",value:"false"}],string:void 0},h={boolean:!0};function x(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&";const n=k().join(k().map((0,l.LY)(e),(e=>`(${e})`)),a);return n||void 0}const A=e=>{var a;let{filterProperties:n,value:l,onChange:y,defaultValue:x,loading:A,...K}=e;const[F,j]=(0,f.useState)(),T=(0,f.useRef)(null),[C,M]=(0,f.useState)(!1),[L,w]=(0,t.A)({value:l,defaultValue:x,onChange:y}),P=(0,f.useMemo)((()=>{if(void 0===L||""===L)return[];return L.split("&").map((e=>e.trim())).map(((e,a)=>{var l,i;const{property:r,operator:t,value:s}=function(e){const[a,...n]=e.split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)/),[l,...i]=n.join(" ").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)/);return{property:a,operator:l,value:i.join(" ").replace(/^"|"$/g,"")}}(e);return{key:a+s,property:r,operator:t,value:s,propertyLabel:(null===(l=k().find(n,(e=>e.key===r)))||void 0===l?void 0:l.propertyLabel)||r,type:(null===(i=k().find(n,(e=>e.key===r)))||void 0===i?void 0:i.type)||"string"}}))}),[L,n]),{t:I}=(0,v.Bd)(),$=k().map(n,(e=>({label:e.propertyLabel,value:e.key,filter:e}))),[U,N]=(0,f.useState)($[0].filter),{token:D}=s.A.useToken(),[R,V]=(0,f.useState)(!0),[z,O]=(0,f.useState)(!1),q=e=>{if(0===e.length)w(void 0);else{const a=k().map(e,(e=>{const a="string"===e.type?`"${e.value}"`:e.value;return`${e.property} ${e.operator} ${a}`}));w(function(e,a){return e.join(` ${a} `)}(a,"&"))}},E=e=>{var a,n,l;if(k().isEmpty(e))return;if(U.strictSelection||h[U.type]){if(!k().find(U.options||_[U.type],(a=>a.value===e)))return}const i=!(null!==(a=U.rule)&&void 0!==a&&a.validate)||U.rule.validate(e);if(V(i),!i)return;j("");const r=U.defaultOperator||S[U.type],t="ilike"===r||"like"===r?`%${e}%`:`${e}`;var s;s={property:U.key,propertyLabel:U.propertyLabel,operator:r,value:t,label:null===(n=U.options)||void 0===n||null===(l=n.find((a=>a.value===e)))||void 0===l?void 0:l.label,type:U.type},q([...P,s])};return(0,b.jsxs)(i.A,{direction:"column",gap:"xs",align:"start",children:[(0,b.jsxs)(o.A.Compact,{children:[(0,b.jsx)(d.A,{popupMatchSelectWidth:!1,options:$,value:U.key,onChange:(e,a)=>{N(k().castArray(a)[0].filter)},onSelect:()=>{var e;null===(e=T.current)||void 0===e||e.focus(),M(!0),V(!0)},showSearch:!0,optionFilterProp:"label"}),(0,b.jsx)(u.A,{title:R||!z?"":null===(a=U.rule)||void 0===a?void 0:a.message,open:!R&&z,color:D.colorError,children:(0,b.jsx)(c.A,{ref:T,value:F,open:C,onDropdownVisibleChange:M,onSelect:E,onChange:e=>{V(!0),j(e)},style:{minWidth:200},options:k().filter(U.options||_[U.type],(e=>{var a;return!F||(null===(a=e.label)||void 0===a?void 0:a.toString().includes(F))})),placeholder:I("propertyFilter.PlaceHolder"),onBlur:()=>{O(!1)},onFocus:()=>{O(!0)},children:(0,b.jsx)(m.A.Search,{onSearch:E,allowClear:!0,status:!R&&z?"error":void 0})})})]}),P.length>0&&(0,b.jsxs)(i.A,{direction:"row",gap:"xs",wrap:"wrap",style:{alignSelf:"stretch"},children:[k().map(P,(e=>{return(0,b.jsxs)(p.A,{closable:!0,onClose:()=>(e=>{const a=P.filter((a=>a.key!==e));q(a)})(e.key),style:{margin:0},children:[e.propertyLabel,": ",(a=e.value,a.replace(/^%|%$/g,""))]},e.key);var a})),P.length>1&&(0,b.jsx)(u.A,{title:I("propertyFilter.ResetFilter"),children:(0,b.jsx)(g.Ay,{size:"small",icon:(0,b.jsx)(r.A,{style:{color:D.colorTextSecondary}}),type:"text",onClick:()=>{q([])}})})]})]})}},89229:(e,a,n)=>{n.d(a,{A:()=>c});var l=n(9571),i=n(18659),r=n(58668),t=n(43403),s=n(62097),o=n.n(s),d=(n(53350),n(60598));const u=(0,t.rU)((e=>{let{css:a,token:n}=e;return{baiRadioGroup:a`
    // border version
    .ant-radio-button-wrapper:not(.ant-radio-button-wrapper-checked)::before,
    .ant-radio-button-wrapper:hover::before {
      background-color: transparent;
    }
    .ant-radio-button-wrapper-checked:hover::before,
    .ant-radio-button-wrapper-checked::before {
      background-color: transparent;
      /* background-color: ${`rgba(${parseInt(n.colorPrimary.slice(1,3),16)}, ${parseInt(n.colorPrimary.slice(3,5),16)}, ${parseInt(n.colorPrimary.slice(5,7),16)}, 0.30)`}; */
    }

    // original design version
    /* .ant-radio-button-wrapper-checked::before,
    .ant-radio-button-wrapper::before {
      background-color: ${n.colorBorder};
    }
    .ant-radio-button-wrapper-checked:hover::before,
    .ant-radio-button-wrapper:hover::before {
      background-color: ${n.colorBorder};
    }

    .ant-radio-button-wrapper-checked {
      border-color: transparent !important;
    } */
  `}})),c=e=>{let{options:a,...n}=e;const{styles:t}=u(),{token:s}=l.A.useToken(),c=`rgba(${parseInt(s.colorPrimary.slice(1,3),16)}, ${parseInt(s.colorPrimary.slice(3,5),16)}, ${parseInt(s.colorPrimary.slice(5,7),16)}, 0.15)`,m=`rgba(${parseInt(s.colorPrimary.slice(1,3),16)}, ${parseInt(s.colorPrimary.slice(3,5),16)}, ${parseInt(s.colorPrimary.slice(5,7),16)}, 0.3)`;return(0,d.jsx)(i.Ay,{theme:{components:{Radio:{buttonSolidCheckedBg:c,buttonSolidCheckedColor:s.colorPrimary,buttonSolidCheckedHoverBg:m}}},children:(0,d.jsx)(r.Ay.Group,{className:o()(t.baiRadioGroup,n.className),options:a,optionType:"button",buttonStyle:"solid",...n})})}},8699:(e,a,n)=>{n.d(a,{A:()=>b});var l=n(23524),i=n(82776),r=n(9571),t=n(18659),s=n(37826),o=n(43403),d=n(62097),u=n.n(d),c=n(46976),m=n.n(c),p=n(53350),g=n(48556),y=n(60598);const k=(0,o.rU)((e=>{let{token:a,css:n}=e;return{resizableTable:n`
    .react-resizable-handle {
      position: absolute;
      inset-inline-end: 0px;
      bottom: 0;
      z-index: 1;
      width: 10px;
      height: 100%;
      cursor: col-resize;
    }
    .ant-table-cell {
      overflow: hidden;
      whitespace: 'pre';
      wordwrap: 'break-word';
    }
  `,neoHeader:n`
    thead.ant-table-thead > tr > th.ant-table-cell {
      font-weight: 500;
      color: ${a.colorTextTertiary};
    }
  `}})),f=e=>{const{onResize:a,width:n,onClick:l,...r}=e,t=(0,p.useRef)(null),[s,o]=(0,p.useState)(!1),d=(0,i.A)(s,{wait:100});return(0,p.useEffect)((()=>{t.current&&m().isUndefined(n)&&(null===a||void 0===a||a(void 0,{size:{width:t.current.offsetWidth,height:t.current.offsetHeight},node:t.current,handle:"e"}))})),m().isUndefined(n)?(0,y.jsx)("th",{ref:t,...r}):(0,y.jsx)(g.Resizable,{width:n,height:0,handle:(0,y.jsx)("span",{className:"react-resizable-handle",onClick:e=>{e.stopPropagation()}}),onResize:a,onResizeStart:()=>{o(!0)},onResizeStop:()=>{o(!1)},draggableOpts:{enableUserSelectHack:!1},children:(0,y.jsx)("th",{onClick:e=>{d?e.preventDefault():null===l||void 0===l||l(e)},...r})})},v=(e,a)=>e.key||`index_${a}`,b=e=>{let{resizable:a=!1,columns:n,components:i,neoStyle:o,loading:d,...c}=e;const{styles:g}=k(),{token:b}=r.A.useToken(),{isDarkMode:S}=(0,l.e)(),[_,h]=(0,p.useState)((e=>{const a={};return m().each(e,((e,n)=>{a[v(e,n)]=e.width})),a})(n)),x=(0,p.useMemo)((()=>a?m().map(n,((e,a)=>({...e,width:_[v(e,a)]||e.width,onHeaderCell:e=>({width:e.width,onResize:(n,l)=>{let{size:i}=l;h((n=>({...n,[v(e,a)]:i.width})))}})}))):n),[a,n,_]);return(0,y.jsx)(t.Ay,{theme:{components:{Table:!S&&o?{headerBg:"#E3E3E3",headerSplitColor:b.colorTextQuaternary}:void 0}},children:(0,y.jsx)(s.A,{sortDirections:["descend","ascend","descend"],showSorterTooltip:!1,className:u()(a&&g.resizableTable,o&&g.neoHeader),style:{opacity:d?.7:1,transition:"opacity 0.3s ease"},components:a?m().merge(i||{},{header:{cell:f}}):i,columns:x,...c})})}},81654:(e,a,n)=>{n.d(a,{A:()=>s});var l=n(72338),i=n(2667),r=n(49978),t=(n(53350),n(60598));const s=e=>{let{style:a,children:n,spinSize:s="default"}=e;return(0,t.jsxs)(l.A,{direction:"row",justify:"center",align:"center",style:{width:"100%",height:"100%",...a},children:[(0,t.jsx)(r.A,{indicator:(0,t.jsx)(i.A,{spin:!0}),size:s}),n]})}},49164:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KeypairInfoModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"secret_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_admin",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_used",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"resource_policy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"num_queries",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"rate_limit",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"concurrency_used",storageKey:null}],type:"KeyPair",abstractKey:null,hash:"11d6baebc6283f59151dab410a2a80d2"},i=l},76768:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"domain_name"},{defaultValue:null,kind:"LocalArgument",name:"email"}],a=[{kind:"Variable",name:"domain_name",variableName:"domain_name"},{kind:"Variable",name:"email",variableName:"email"}],n={alias:null,args:null,kind:"ScalarField",name:"main_access_key",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"KeypairInfoModalQuery",selections:[{alias:null,args:a,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[n],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"KeypairInfoModalQuery",selections:[{alias:null,args:a,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"ae75c283d1803be0e160390a438f1ef0",id:null,metadata:{},name:"KeypairInfoModalQuery",operationKind:"query",text:'query KeypairInfoModalQuery(\n  $domain_name: String\n  $email: String\n) {\n  user(domain_name: $domain_name, email: $email) {\n    main_access_key @since(version: "24.03.0")\n    id\n  }\n}\n'}}}();l.hash="4e1858d8f369f238aa329976b4678e7b";const i=l},49376:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});const l=function(){var e=[{alias:null,args:null,concreteType:"KeyPairResourcePolicy",kind:"LinkedField",name:"keypair_resource_policies",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KeypairResourcePolicySelectorQuery",selections:e,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"KeypairResourcePolicySelectorQuery",selections:e},params:{cacheID:"98cc9e7ac02916e772401f1672dc324f",id:null,metadata:{},name:"KeypairResourcePolicySelectorQuery",operationKind:"query",text:"query KeypairResourcePolicySelectorQuery {\n  keypair_resource_policies {\n    name\n  }\n}\n"}}}();l.hash="3052deb294da5fb0ec7a981d8fade18f";const i=l},19393:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});const l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"props"},a={defaultValue:null,kind:"LocalArgument",name:"user_id"},n=[{alias:null,args:[{kind:"Variable",name:"props",variableName:"props"},{kind:"Variable",name:"user_id",variableName:"user_id"}],concreteType:"CreateKeyPair",kind:"LinkedField",name:"create_keypair",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,a],kind:"Fragment",metadata:null,name:"KeypairSettingModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,e],kind:"Operation",name:"KeypairSettingModalCreateMutation",selections:n},params:{cacheID:"2911946ae5cad21bdff21cc88cf64c74",id:null,metadata:{},name:"KeypairSettingModalCreateMutation",operationKind:"mutation",text:"mutation KeypairSettingModalCreateMutation(\n  $user_id: String!\n  $props: KeyPairInput!\n) {\n  create_keypair(user_id: $user_id, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="a81bb2d7d4e5a095deaf58a442f4211d";const i=l},22654:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KeypairSettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"rate_limit",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"resource_policy",storageKey:null}],type:"KeyPair",abstractKey:null,hash:"a453330249f3d6cb4a241e19f2314614"},i=l},38167:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"access_key"},{defaultValue:null,kind:"LocalArgument",name:"props"}],a=[{alias:null,args:[{kind:"Variable",name:"access_key",variableName:"access_key"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyKeyPair",kind:"LinkedField",name:"modify_keypair",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"KeypairSettingModalModifyMutation",selections:a,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"KeypairSettingModalModifyMutation",selections:a},params:{cacheID:"0bf2a12bbaaabcbf7577479149266c0b",id:null,metadata:{},name:"KeypairSettingModalModifyMutation",operationKind:"mutation",text:"mutation KeypairSettingModalModifyMutation(\n  $access_key: String!\n  $props: ModifyKeyPairInput!\n) {\n  modify_keypair(access_key: $access_key, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="59732bd851a981ce0e4bd3bda1b4c602";const i=l},70490:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"access_key"}],a=[{alias:null,args:[{kind:"Variable",name:"access_key",variableName:"access_key"}],concreteType:"DeleteKeyPair",kind:"LinkedField",name:"delete_keypair",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserCredentialListDeleteMutation",selections:a,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserCredentialListDeleteMutation",selections:a},params:{cacheID:"00d579de4db39e2f3e48067fb19aaf72",id:null,metadata:{},name:"UserCredentialListDeleteMutation",operationKind:"mutation",text:"mutation UserCredentialListDeleteMutation(\n  $access_key: String!\n) {\n  delete_keypair(access_key: $access_key) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="b955bc28ed14b19b153f202b0f1e6e22";const i=l},81979:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"access_key"},{defaultValue:null,kind:"LocalArgument",name:"props"}],a=[{alias:null,args:[{kind:"Variable",name:"access_key",variableName:"access_key"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyKeyPair",kind:"LinkedField",name:"modify_keypair",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserCredentialListModifyMutation",selections:a,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserCredentialListModifyMutation",selections:a},params:{cacheID:"49292a75a914ad1eeb6f8e2667974b95",id:null,metadata:{},name:"UserCredentialListModifyMutation",operationKind:"mutation",text:"mutation UserCredentialListModifyMutation(\n  $access_key: String!\n  $props: ModifyKeyPairInput!\n) {\n  modify_keypair(access_key: $access_key, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="b3504d39bac9dd8ac749460ba5e510c0";const i=l},69254:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});const l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"domain_name"},a={defaultValue:null,kind:"LocalArgument",name:"email"},n={defaultValue:null,kind:"LocalArgument",name:"filter"},l={defaultValue:null,kind:"LocalArgument",name:"is_active"},i={defaultValue:null,kind:"LocalArgument",name:"limit"},r={defaultValue:null,kind:"LocalArgument",name:"offset"},t={defaultValue:null,kind:"LocalArgument",name:"order"},s=[{kind:"Variable",name:"domain_name",variableName:"domain_name"},{kind:"Variable",name:"email",variableName:"email"},{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"is_active",variableName:"is_active"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"},{kind:"Variable",name:"order",variableName:"order"}],o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"is_admin",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"resource_policy",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"rate_limit",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"num_queries",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"concurrency_used",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null};return{fragment:{argumentDefinitions:[e,a,n,l,i,r,t],kind:"Fragment",metadata:null,name:"UserCredentialListQuery",selections:[{alias:null,args:s,concreteType:"KeyPairList",kind:"LinkedField",name:"keypair_list",plural:!1,selections:[{alias:null,args:null,concreteType:"KeyPair",kind:"LinkedField",name:"items",plural:!0,selections:[o,d,u,c,m,p,g,y,k,{args:null,kind:"FragmentSpread",name:"KeypairSettingModalFragment"},{args:null,kind:"FragmentSpread",name:"KeypairInfoModalFragment"}],storageKey:null},f],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[i,r,n,t,e,a,l],kind:"Operation",name:"UserCredentialListQuery",selections:[{alias:null,args:s,concreteType:"KeyPairList",kind:"LinkedField",name:"keypair_list",plural:!1,selections:[{alias:null,args:null,concreteType:"KeyPair",kind:"LinkedField",name:"items",plural:!0,selections:[o,d,u,c,m,p,g,y,k,{alias:null,args:null,kind:"ScalarField",name:"secret_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_used",storageKey:null}],storageKey:null},f],storageKey:null}]},params:{cacheID:"3318983898774e0fa0110bbe3a8f1ad5",id:null,metadata:{},name:"UserCredentialListQuery",operationKind:"query",text:'query UserCredentialListQuery(\n  $limit: Int!\n  $offset: Int!\n  $filter: String\n  $order: String\n  $domain_name: String\n  $email: String\n  $is_active: Boolean\n) {\n  keypair_list(limit: $limit, offset: $offset, filter: $filter, order: $order, domain_name: $domain_name, email: $email, is_active: $is_active) {\n    items {\n      id\n      user_id\n      access_key\n      is_admin\n      resource_policy\n      created_at\n      rate_limit\n      num_queries\n      concurrency_used @since(version: "24.09.0")\n      ...KeypairSettingModalFragment\n      ...KeypairInfoModalFragment\n    }\n    total_count\n  }\n}\n\nfragment KeypairInfoModalFragment on KeyPair {\n  user_id\n  access_key\n  secret_key\n  is_admin\n  created_at\n  last_used\n  resource_policy\n  num_queries\n  rate_limit\n  concurrency_used @since(version: "24.09.0")\n}\n\nfragment KeypairSettingModalFragment on KeyPair {\n  rate_limit\n  access_key\n  resource_policy\n}\n'}}}();l.hash="591117e6f6a9853325076522a5e68177";const i=l},45056:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"email"},{defaultValue:null,kind:"LocalArgument",name:"isNotSupportSudoSessionEnabled"},{defaultValue:null,kind:"LocalArgument",name:"isTOTPSupported"}],a=[{kind:"Variable",name:"email",variableName:"email"}],n={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"need_password_change",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"domain_name",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"role",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c={alias:null,args:null,concreteType:"UserGroup",kind:"LinkedField",name:"groups",plural:!0,selections:[u,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"resource_policy",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"sudo_session_enabled",storageKey:null},g={condition:"isTOTPSupported",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"totp_activated",storageKey:null}]},y={alias:null,args:null,kind:"ScalarField",name:"main_access_key",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserInfoModalQuery",selections:[{alias:null,args:a,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[n,l,i,r,t,s,o,d,c,m,p,g,y],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserInfoModalQuery",selections:[{alias:null,args:a,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[n,l,i,r,t,s,o,d,c,m,p,g,y,u],storageKey:null}]},params:{cacheID:"d675c49fbcf67cc926cd8f0f3f7a0a93",id:null,metadata:{},name:"UserInfoModalQuery",operationKind:"query",text:'query UserInfoModalQuery(\n  $email: String\n  $isNotSupportSudoSessionEnabled: Boolean!\n  $isTOTPSupported: Boolean!\n) {\n  user(email: $email) {\n    email\n    username\n    need_password_change\n    full_name\n    description\n    status\n    domain_name\n    role\n    groups {\n      id\n      name\n    }\n    resource_policy\n    sudo_session_enabled @skipOnClient(if: $isNotSupportSudoSessionEnabled)\n    totp_activated @include(if: $isTOTPSupported)\n    main_access_key @since(version: "23.09.7")\n    id\n  }\n}\n'}}}();l.hash="4c1eaa080e82b723c9491072604e8925";const i=l},95070:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"email"},{defaultValue:null,kind:"LocalArgument",name:"props"}],a=[{alias:null,args:[{kind:"Variable",name:"email",variableName:"email"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyUser",kind:"LinkedField",name:"modify_user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserNodeListModifyMutation",selections:a,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserNodeListModifyMutation",selections:a},params:{cacheID:"e5b806ab045f58761fda6a600a152b09",id:null,metadata:{},name:"UserNodeListModifyMutation",operationKind:"mutation",text:"mutation UserNodeListModifyMutation(\n  $email: String!\n  $props: ModifyUserInput!\n) {\n  modify_user(email: $email, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="c6c04b9b22e9843ff5f39bdc7f7ddcef";const i=l},40089:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});const l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"filter"},a={defaultValue:null,kind:"LocalArgument",name:"first"},n={defaultValue:null,kind:"LocalArgument",name:"offset"},l={defaultValue:null,kind:"LocalArgument",name:"order"},i=[{alias:null,args:[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"offset",variableName:"offset"},{kind:"Variable",name:"order",variableName:"order"}],concreteType:"UserConnection",kind:"LinkedField",name:"user_nodes",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},{alias:null,args:null,concreteType:"UserEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"UserNode",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"role",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,a,n,l],kind:"Fragment",metadata:null,name:"UserNodeListQuery",selections:i,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,n,e,l],kind:"Operation",name:"UserNodeListQuery",selections:i},params:{cacheID:"e53b339922da0ca6ffbff07957c0e01f",id:null,metadata:{},name:"UserNodeListQuery",operationKind:"query",text:"query UserNodeListQuery(\n  $first: Int\n  $offset: Int\n  $filter: String\n  $order: String\n) {\n  user_nodes(first: $first, offset: $offset, filter: $filter, order: $order) {\n    count\n    edges {\n      node {\n        id\n        full_name\n        role\n        description\n        email\n        username\n        created_at\n        status\n      }\n    }\n  }\n}\n"}}}();l.hash="42a6195e0bec81c661b19a540789b1fd";const i=l},55424:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});const l=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"max_session_count_per_model_session",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"max_customized_image_count",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserResourcePolicySelectorQuery",selections:[{alias:null,args:null,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"user_resource_policies",plural:!0,selections:[e,a,n,l,i,r,t,{args:null,kind:"FragmentSpread",name:"UserResourcePolicySettingModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UserResourcePolicySelectorQuery",selections:[{alias:null,args:null,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"user_resource_policies",plural:!0,selections:[e,a,n,l,i,r,t],storageKey:null}]},params:{cacheID:"5c0bb0244594feb3fc33aadcac7ffb2f",id:null,metadata:{},name:"UserResourcePolicySelectorQuery",operationKind:"query",text:'query UserResourcePolicySelectorQuery {\n  user_resource_policies {\n    id\n    name\n    created_at\n    max_vfolder_count @since(version: "23.09.6")\n    max_session_count_per_model_session @since(version: "23.09.10")\n    max_quota_scope_size @since(version: "23.09.2")\n    max_customized_image_count @since(version: "24.03.0")\n    ...UserResourcePolicySettingModalFragment\n  }\n}\n\nfragment UserResourcePolicySettingModalFragment on UserResourcePolicy {\n  id\n  name\n  max_vfolder_count @since(version: "23.09.6")\n  max_session_count_per_model_session @since(version: "23.09.10")\n  max_quota_scope_size @since(version: "23.09.2")\n  max_customized_image_count @since(version: "24.03.0")\n}\n'}}}();l.hash="df2a28e16edd8e8b4791053a89f9917f";const i=l},66017:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});const l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"email"},a={defaultValue:null,kind:"LocalArgument",name:"isNotSupportSudoSessionEnabled"},n={defaultValue:null,kind:"LocalArgument",name:"isNotSupportTotp"},l={defaultValue:null,kind:"LocalArgument",name:"props"},i=[{kind:"Variable",name:"email",variableName:"email"},{kind:"Variable",name:"props",variableName:"props"}],r={alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"need_password_change",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"domain_name",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"role",storageKey:null},k={alias:null,args:null,concreteType:"UserGroup",kind:"LinkedField",name:"groups",plural:!0,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"resource_policy",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"sudo_session_enabled",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"totp_activated",storageKey:null};return{fragment:{argumentDefinitions:[e,a,n,l],kind:"Fragment",metadata:null,name:"UserSettingModalCreateMutation",selections:[{alias:null,args:i,concreteType:"CreateUser",kind:"LinkedField",name:"create_user",plural:!1,selections:[r,t,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[s,o,d,u,c,m,p,g,y,k,f,v,b,{args:null,kind:"FragmentSpread",name:"TOTPActivateModalFragment"}],storageKey:null}],storageKey:null}],type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,l,a,n],kind:"Operation",name:"UserSettingModalCreateMutation",selections:[{alias:null,args:i,concreteType:"CreateUser",kind:"LinkedField",name:"create_user",plural:!1,selections:[r,t,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[s,o,d,u,c,m,p,g,y,k,f,v,b],storageKey:null}],storageKey:null}]},params:{cacheID:"b78883f2b7e7a10f064f61e031445525",id:null,metadata:{},name:"UserSettingModalCreateMutation",operationKind:"mutation",text:"mutation UserSettingModalCreateMutation(\n  $email: String!\n  $props: UserInput!\n  $isNotSupportSudoSessionEnabled: Boolean!\n  $isNotSupportTotp: Boolean!\n) {\n  create_user(email: $email, props: $props) {\n    ok\n    msg\n    user {\n      id\n      email\n      username\n      need_password_change\n      full_name\n      description\n      status\n      domain_name\n      role\n      groups {\n        id\n        name\n      }\n      resource_policy\n      sudo_session_enabled @skipOnClient(if: $isNotSupportSudoSessionEnabled)\n      totp_activated @skipOnClient(if: $isNotSupportTotp)\n      ...TOTPActivateModalFragment\n    }\n  }\n}\n\nfragment TOTPActivateModalFragment on User {\n  email\n  totp_activated @skipOnClient(if: $isNotSupportTotp)\n}\n"}}}();l.hash="da6a0b51b106d3285d157ffa3bae33e9";const i=l},35895:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});const l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"email"},a={defaultValue:null,kind:"LocalArgument",name:"isNotSupportSudoSessionEnabled"},n={defaultValue:null,kind:"LocalArgument",name:"isNotSupportTotp"},l={defaultValue:null,kind:"LocalArgument",name:"props"},i=[{kind:"Variable",name:"email",variableName:"email"},{kind:"Variable",name:"props",variableName:"props"}],r={alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"need_password_change",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"domain_name",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"role",storageKey:null},k={alias:null,args:null,concreteType:"UserGroup",kind:"LinkedField",name:"groups",plural:!0,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"resource_policy",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"sudo_session_enabled",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"totp_activated",storageKey:null};return{fragment:{argumentDefinitions:[e,a,n,l],kind:"Fragment",metadata:null,name:"UserSettingModalModifyMutation",selections:[{alias:null,args:i,concreteType:"ModifyUser",kind:"LinkedField",name:"modify_user",plural:!1,selections:[r,t,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[s,o,d,u,c,m,p,g,y,k,f,v,b,{args:null,kind:"FragmentSpread",name:"TOTPActivateModalFragment"}],storageKey:null}],storageKey:null}],type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,l,a,n],kind:"Operation",name:"UserSettingModalModifyMutation",selections:[{alias:null,args:i,concreteType:"ModifyUser",kind:"LinkedField",name:"modify_user",plural:!1,selections:[r,t,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[s,o,d,u,c,m,p,g,y,k,f,v,b],storageKey:null}],storageKey:null}]},params:{cacheID:"3c14d927cc4b33a11b36b4164a99b4b3",id:null,metadata:{},name:"UserSettingModalModifyMutation",operationKind:"mutation",text:"mutation UserSettingModalModifyMutation(\n  $email: String!\n  $props: ModifyUserInput!\n  $isNotSupportSudoSessionEnabled: Boolean!\n  $isNotSupportTotp: Boolean!\n) {\n  modify_user(email: $email, props: $props) {\n    ok\n    msg\n    user {\n      id\n      email\n      username\n      need_password_change\n      full_name\n      description\n      status\n      domain_name\n      role\n      groups {\n        id\n        name\n      }\n      resource_policy\n      sudo_session_enabled @skipOnClient(if: $isNotSupportSudoSessionEnabled)\n      totp_activated @skipOnClient(if: $isNotSupportTotp)\n      ...TOTPActivateModalFragment\n    }\n  }\n}\n\nfragment TOTPActivateModalFragment on User {\n  email\n  totp_activated @skipOnClient(if: $isNotSupportTotp)\n}\n"}}}();l.hash="bc8377f1ce18b00d8a7a4eacc523d362";const i=l},26250:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"email"},{defaultValue:null,kind:"LocalArgument",name:"isNotSupportSudoSessionEnabled"},{defaultValue:null,kind:"LocalArgument",name:"isNotSupportTotp"}],a=[{kind:"Variable",name:"email",variableName:"email"}],n={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"need_password_change",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"full_name",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"domain_name",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"role",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c={alias:null,args:null,concreteType:"UserGroup",kind:"LinkedField",name:"groups",plural:!0,selections:[u,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"resource_policy",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"sudo_session_enabled",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"totp_activated",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserSettingModalQuery",selections:[{alias:null,args:a,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[n,l,i,r,t,s,o,d,c,m,p,g,{args:null,kind:"FragmentSpread",name:"TOTPActivateModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserSettingModalQuery",selections:[{alias:null,args:a,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[n,l,i,r,t,s,o,d,c,m,p,g,u],storageKey:null}]},params:{cacheID:"bac70fdc2febe6e71fe3e2e68dd70136",id:null,metadata:{},name:"UserSettingModalQuery",operationKind:"query",text:"query UserSettingModalQuery(\n  $email: String\n  $isNotSupportSudoSessionEnabled: Boolean!\n  $isNotSupportTotp: Boolean!\n) {\n  user(email: $email) {\n    email\n    username\n    need_password_change\n    full_name\n    description\n    status\n    domain_name\n    role\n    groups {\n      id\n      name\n    }\n    resource_policy\n    sudo_session_enabled @skipOnClient(if: $isNotSupportSudoSessionEnabled)\n    totp_activated @skipOnClient(if: $isNotSupportTotp)\n    ...TOTPActivateModalFragment\n    id\n  }\n}\n\nfragment TOTPActivateModalFragment on User {\n  email\n  totp_activated @skipOnClient(if: $isNotSupportTotp)\n}\n"}}}();l.hash="69a4050361fa30fd6cbc230a027ae19d";const i=l},54690:(e,a,n)=>{n.d(a,{w4:()=>t});var l=n(46976),i=n.n(l),r=n(53350);n(22018),n(32043);const t=e=>{const[a,n]=(0,r.useState)(e);return{baiPaginationOption:{limit:a.pageSize,first:a.pageSize,offset:a.current>1?(a.current-1)*a.pageSize:0},tablePaginationOption:{pageSize:a.pageSize,current:a.current},setTablePaginationOption:e=>{i().isEqual(e,a)||n((a=>({...a,...e})))}}}},82483:(e,a,n)=>{n.r(a),n.d(a,{default:()=>Ce});var l,i,r=n(71801),t=n(72338),s=n(81654),o=n(72375),d=n(23441),u=n(54690),c=n(8570),m=n(89229),p=n(8699),g=n(9189),y=n(9571),k=n(50128),f=n(24798),v=n(8227),b=n(78502),S=n.n(b),_=n(25185),h=n(22018),x=n(60598);const A=e=>{var a;let{keypairInfoModalFrgmt:r=null,onRequestClose:s,...o}=e;const{token:d}=y.A.useToken(),u=(0,h.useFragment)(void 0!==l?l:l=n(49164),r),{user:c}=(0,h.useLazyLoadQuery)(void 0!==i?i:i=n(76768),{email:null===u||void 0===u?void 0:u.user_id},{fetchPolicy:o.open&&null!==u&&void 0!==u&&u.user_id?"network-only":"store-only"});return(0,x.jsxs)(g.A,{title:(0,x.jsxs)(t.A,{gap:"xs",children:[(0,x.jsx)(k.A.Text,{style:{fontSize:d.fontSizeHeading5},children:(0,_.t)("credential.KeypairDetail")}),(null===c||void 0===c?void 0:c.main_access_key)===(null===u||void 0===u?void 0:u.access_key)&&(0,x.jsx)(f.A,{color:"red",children:(0,_.t)("credential.MainAccessKey")})]}),onCancel:()=>s(),footer:null,...o,children:[(0,x.jsxs)(v.A,{title:(0,_.t)("credential.Information"),size:"small",column:1,labelStyle:{width:"40%"},children:[(0,x.jsx)(v.A.Item,{label:(0,_.t)("credential.UserID"),children:null===u||void 0===u?void 0:u.user_id}),(0,x.jsx)(v.A.Item,{label:(0,_.t)("credential.AccessKey"),children:null===u||void 0===u?void 0:u.access_key}),(0,x.jsx)(v.A.Item,{label:(0,_.t)("credential.SecretKey"),children:(0,x.jsx)(k.A.Text,{copyable:{text:null!==(a=null===u||void 0===u?void 0:u.secret_key)&&void 0!==a?a:""},children:null!==u&&void 0!==u&&u.secret_key?"********":""})}),(0,x.jsx)(v.A.Item,{label:(0,_.t)("credential.Permission"),children:null!==u&&void 0!==u&&u.is_admin?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(f.A,{color:"red",children:"admin"}),(0,x.jsx)(f.A,{color:"green",children:"user"})]}):(0,x.jsx)(f.A,{color:"green",children:"user"})}),(0,x.jsx)(v.A.Item,{label:(0,_.t)("credential.CreatedAt"),children:S()(null===u||void 0===u?void 0:u.created_at).format("lll")}),(0,x.jsx)(v.A.Item,{label:(0,_.t)("credential.LastUsed"),children:null!==u&&void 0!==u&&u.last_used?S()(null===u||void 0===u?void 0:u.last_used).format("lll"):"-"})]}),(0,x.jsx)("br",{}),(0,x.jsxs)(v.A,{title:(0,_.t)("credential.Allocation"),size:"small",column:1,labelStyle:{width:"40%"},children:[(0,x.jsx)(v.A.Item,{label:(0,_.t)("credential.ResourcePolicy"),children:null===u||void 0===u?void 0:u.resource_policy}),(0,x.jsx)(v.A.Item,{label:(0,_.t)("credential.NumberOfQueries"),children:null===u||void 0===u?void 0:u.num_queries}),(0,x.jsx)(v.A.Item,{label:(0,_.t)("credential.ConcurrentSessions"),children:null===u||void 0===u?void 0:u.concurrency_used}),(0,x.jsx)(v.A.Item,{label:`${(0,_.t)("credential.RateLimit")} ${(0,_.t)("credential.For900Seconds")}`,children:null===u||void 0===u?void 0:u.rate_limit})]})]})};var K,F=n(85730),j=n(1581),T=n(46976),C=n.n(T),M=n(91788);const L=e=>{let{...a}=e;const{t:l}=(0,M.Bd)(),[i,r]=(0,F.A)({value:a.value,onChange:a.onChange}),{keypair_resource_policies:t}=(0,h.useLazyLoadQuery)(void 0!==K?K:K=n(49376),{},{fetchPolicy:"store-and-network"});return(0,x.jsx)(j.A,{showSearch:!0,placeholder:l("credential.SelectPolicy"),options:C().map(t,(e=>({value:null===e||void 0===e?void 0:e.name,label:null===e||void 0===e?void 0:e.name}))).sort(((e,a)=>(0,o._f)(null===e||void 0===e?void 0:e.label,null===a||void 0===a?void 0:a.label))),...a,value:i,onChange:(e,a)=>{r(e,a)}})};var w,P,I,$=n(67710),U=n(13170),N=n(83978),D=n(92351),R=n(56625),V=n(88005),z=n(53350);const O=e=>{let{keypairSettingModalFrgmt:a=null,onRequestClose:l,...i}=e;const{t:r}=(0,M.Bd)(),{message:t}=$.A.useApp(),s=(0,z.useRef)(null),o=(0,h.useFragment)(void 0!==w?w:w=n(22654),a),[d,u]=(0,h.useMutation)(void 0!==P?P:P=n(19393)),[c,m]=(0,h.useMutation)(void 0!==I?I:I=n(38167));return(0,x.jsx)(g.A,{title:r(o?"credential.ModifyKeypairResourcePolicy":"credential.AddCredential"),width:500,destroyOnClose:!0,onOk:()=>{var e;null===(e=s.current)||void 0===e||e.validateFields().then((e=>{var a,n;o?c({variables:{access_key:null!==(a=o.access_key)&&void 0!==a?a:"",props:{rate_limit:e.rate_limit,resource_policy:e.resource_policy}},onCompleted:(e,a)=>{var n,i;if(null===(n=e.modify_keypair)||void 0===n||!n.ok||a)return t.error(null===e||void 0===e||null===(i=e.modify_keypair)||void 0===i?void 0:i.msg),void l(!1);t.success(r("notification.SuccessfullyUpdated")),l(!0)},onError:e=>{t.error(e.message),l(!1)}}):d({variables:{user_id:null!==(n=e.user_id)&&void 0!==n?n:"",props:{rate_limit:e.rate_limit,resource_policy:e.resource_policy}},onCompleted:(e,a)=>{var n,i;if(null===(n=e.create_keypair)||void 0===n||!n.ok||a)return t.error(null===e||void 0===e||null===(i=e.create_keypair)||void 0===i?void 0:i.msg),void l(!1);t.success(r("credential.KeypairCreated")),l(!0)},onError:e=>{t.error(e.message),l(!1)}})})).catch((e=>{}))},okButtonProps:{loading:u||m},onCancel:()=>l(!1),...i,children:(0,x.jsxs)(U.A,{ref:s,layout:"vertical",initialValues:o?{...o}:{},children:[!o&&(0,x.jsx)(U.A.Item,{name:"user_id",label:r("credential.UserIDAsEmail"),rules:[{required:!0},{type:"email"}],children:(0,x.jsx)(N.A,{})}),(0,x.jsxs)(D.A,{gutter:16,children:[(0,x.jsx)(R.A,{span:12,children:(0,x.jsx)(U.A.Item,{name:"resource_policy",label:r("credential.ResourcePolicy"),rules:[{required:!0}],children:(0,x.jsx)(L,{})})}),(0,x.jsx)(R.A,{span:12,children:(0,x.jsx)(U.A.Item,{name:"rate_limit",label:r("credential.RateLimitFor15min"),rules:[{required:!0},{type:"number",min:0,max:5e4},{validator:(e,a,n)=>a<=100?Promise.reject(r("credential.WarningLessRateLimit")):Promise.resolve(),warningOnly:!0}],children:(0,x.jsx)(V.A,{min:0,max:5e4,style:{width:"100%"}})})})]})]})})};var q,E,Q,B=n(43622),X=n(38639),Y=n(53651),W=n(10424),G=n(82919),H=n(52335),Z=n(24034),J=n(85202),ee=n(30536),ae=n(57901),ne=n(32043);const le=()=>{const{t:e}=(0,M.Bd)(),{token:a}=y.A.useToken(),{message:l,modal:i}=$.A.useApp(),[r,s]=(0,ne.useQueryParam)("action",ne.StringParam);(0,z.useEffect)((()=>{"add"===r&&(I(!0),s(void 0))}),[r,s]);const[g,v]=(0,d.Tw)("first"),[b,_]=(0,z.useState)("active"),[K,F]=(0,z.useState)(void 0),[j,T]=(0,z.useState)(),[L,w]=(0,z.useState)(null),[P,I]=(0,z.useState)(!1),[U,N]=(0,z.useState)(null),[D,R]=(0,z.useTransition)(),[V,le]=(0,z.useTransition)(),[ie,re]=(0,z.useTransition)(),[te,se]=(0,z.useTransition)(),[oe,de]=(0,z.useTransition)(),[ue,ce]=(0,z.useTransition)(),{baiPaginationOption:me,tablePaginationOption:pe,setTablePaginationOption:ge}=(0,u.w4)({current:1,pageSize:20}),{keypair_list:ye}=(0,h.useLazyLoadQuery)(void 0!==q?q:q=n(69254),{limit:me.limit,offset:me.offset,is_active:"active"===b,filter:j,order:K},{fetchKey:g,fetchPolicy:"network-only"}),[ke,fe]=(0,h.useMutation)(void 0!==E?E:E=n(81979)),[ve,be]=(0,h.useMutation)(void 0!==Q?Q:Q=n(70490));return(0,x.jsxs)(t.A,{direction:"column",align:"stretch",children:[(0,x.jsxs)(t.A,{justify:"between",align:"start",gap:"xs",style:{padding:a.paddingSM},wrap:"wrap",children:[(0,x.jsxs)(t.A,{gap:"sm",align:"start",children:[(0,x.jsx)(m.A,{value:b,onChange:e=>{le((()=>{_(e.target.value),ge({current:1,pageSize:pe.pageSize})}))},optionType:"button",options:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}]}),(0,x.jsx)(c.Ay,{filterProperties:[{key:"email",propertyLabel:e("credential.UserID"),type:"string"},{key:"access_key",propertyLabel:e("credential.AccessKey"),type:"string"},{key:"is_admin",propertyLabel:e("credential.Permission"),type:"boolean",strictSelection:!0,defaultOperator:"==",options:[{label:"admin",value:"true"},{label:"user",value:"false"}]},{key:"resource_policy",propertyLabel:e("credential.ResourcePolicy"),type:"string"}],value:j,loading:te,onChange:e=>{se((()=>{T(e)}))}})]}),(0,x.jsxs)(t.A,{gap:"xs",children:[(0,x.jsx)(G.A,{title:e("button.Refresh"),children:(0,x.jsx)(H.Ay,{loading:D,onClick:()=>{R((()=>{v()}))},icon:(0,x.jsx)(B.A,{})})}),(0,x.jsx)(H.Ay,{type:"primary",icon:(0,x.jsx)(J.A,{}),onClick:()=>{I(!0)},children:e("credential.AddCredential")})]})]}),(0,x.jsx)(p.A,{rowKey:"id",scroll:{x:"max-content"},loading:V||D||ie||te,dataSource:(0,o.tS)(null===ye||void 0===ye?void 0:ye.items),columns:(0,o.LY)([{key:"userID",title:e("credential.UserID"),dataIndex:"email",fixed:"left",sorter:!0,render:(e,a)=>a.user_id},{key:"accessKey",title:e("credential.AccessKey"),dataIndex:"access_key",sorter:!0},{key:"permission",title:e("credential.Permission"),dataIndex:"is_admin",render:e=>e?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(f.A,{color:"red",children:"admin"}),(0,x.jsx)(f.A,{color:"green",children:"user"})]}):(0,x.jsx)(f.A,{color:"green",children:"user"}),sorter:!0},{key:"keyAge",title:e("credential.KeyAge"),dataIndex:"created_at",render:a=>`${S()().diff(a,"day")}${e("credential.Days")}`,sorter:!0},{key:"createdAt",title:e("credential.CreatedAt"),dataIndex:"created_at",render:e=>S()(e).format("lll"),sorter:!0},{key:"resourcePolicy",title:e("credential.ResourcePolicy"),dataIndex:"resource_policy",sorter:!0},{key:"allocation",title:e("credential.Allocation"),render:n=>(0,x.jsxs)(t.A,{direction:"column",align:"start",children:[(0,x.jsxs)(k.A.Text,{children:[n.concurrency_used,(0,x.jsx)(k.A.Text,{type:"secondary",style:{marginLeft:a.marginXXS,fontSize:a.fontSizeSM},children:e("credential.Sessions")})]}),(0,x.jsxs)(k.A.Text,{style:{fontSize:a.fontSizeSM},children:[n.rate_limit,(0,x.jsx)(k.A.Text,{type:"secondary",style:{marginLeft:a.marginXXS,fontSize:a.fontSizeSM},children:e("credential.ReqPer15Min")})]}),(0,x.jsxs)(k.A.Text,{style:{fontSize:a.fontSizeSM},children:[n.num_queries,(0,x.jsx)(k.A.Text,{type:"secondary",style:{marginLeft:a.marginXXS,fontSize:a.fontSizeSM},children:e("credential.Queries")})]})]})},{key:"control",title:e("general.Control"),fixed:"right",render:(n,r)=>(0,x.jsxs)(t.A,{gap:a.marginXS,children:[(0,x.jsx)(H.Ay,{type:"text",icon:(0,x.jsx)(X.A,{style:{color:a.colorSuccess}}),onClick:()=>{de((()=>{N(r)}))}}),(0,x.jsx)(H.Ay,{type:"text",icon:(0,x.jsx)(Y.A,{style:{color:a.colorInfo}}),onClick:()=>{ce((()=>{w(r)}))}}),"inactive"===b&&(0,x.jsx)(G.A,{title:e("credential.Activate"),children:(0,x.jsx)(Z.A,{title:e("credential.ActivateCredential"),description:r.user_id,okText:e("credential.Activate"),placement:"left",onConfirm:()=>{var a;ke({variables:{access_key:null!==(a=r.access_key)&&void 0!==a?a:"",props:{is_active:!0}},onCompleted:(a,n)=>{var i,r;null!==a&&void 0!==a&&null!==(i=a.modify_keypair)&&void 0!==i&&i.ok&&!n?(l.success(e("credential.KeypairStatusUpdatedSuccessfully")),R((()=>{v()}))):l.error(null===a||void 0===a||null===(r=a.modify_keypair)||void 0===r?void 0:r.msg)},onError:e=>{l.error(null===e||void 0===e?void 0:e.message),console.error(e)}})},children:(0,x.jsx)(H.Ay,{type:"text",icon:(0,x.jsx)(ee.A,{})})})}),"active"===b?(0,x.jsx)(G.A,{title:e("credential.Deactivate"),children:(0,x.jsx)(Z.A,{title:e("credential.DeactivateCredential"),description:r.user_id,okButtonProps:{loading:fe},okType:"danger",okText:e("credential.Deactivate"),placement:"left",onConfirm:()=>{var a;ke({variables:{access_key:null!==(a=r.access_key)&&void 0!==a?a:"",props:{is_active:!1}},onCompleted:(a,n)=>{var i,r;null!==a&&void 0!==a&&null!==(i=a.modify_keypair)&&void 0!==i&&i.ok&&!n?(l.success(e("credential.KeypairStatusUpdatedSuccessfully")),R((()=>{v()}))):l.error(null===a||void 0===a||null===(r=a.modify_keypair)||void 0===r?void 0:r.msg)},onError:e=>{l.error(null===e||void 0===e?void 0:e.message),console.error(e)}})},children:(0,x.jsx)(H.Ay,{type:"text",danger:!0,icon:(0,x.jsx)(ae.A,{})})})}):(0,x.jsx)(H.Ay,{type:"text",danger:!0,icon:(0,x.jsx)(W.A,{}),loading:be,onClick:()=>{i.confirm({title:e("credential.DeleteCredential"),content:(0,x.jsxs)(t.A,{direction:"column",align:"stretch",children:[(0,x.jsx)(k.A.Text,{children:e("credential.YouAreAboutToDeleteCredential")}),(0,x.jsx)(k.A.Text,{strong:!0,children:r.user_id}),(0,x.jsx)("br",{}),(0,x.jsx)(k.A.Text,{type:"danger",children:e("dialog.warning.CannotBeUndone")})]}),onOk:()=>{var a;ve({variables:{access_key:null!==(a=r.access_key)&&void 0!==a?a:""},onCompleted:(a,n)=>{var i,r;null!==a&&void 0!==a&&null!==(i=a.delete_keypair)&&void 0!==i&&i.ok&&!n?(l.success(e("credential.KeypairSuccessfullyDeleted")),R((()=>{v()}))):l.error(null===a||void 0===a||null===(r=a.delete_keypair)||void 0===r?void 0:r.msg)},onError:e=>{l.error(null===e||void 0===e?void 0:e.message),console.error(e)}})},okButtonProps:{danger:!0},okText:e("button.Delete")})}})]})}]),showSorterTooltip:!1,pagination:{pageSize:pe.pageSize,showSizeChanger:!0,total:(null===ye||void 0===ye?void 0:ye.total_count)||0,current:pe.current,showTotal:(e,a)=>`${a[0]}-${a[1]} of ${e} items`,pageSizeOptions:["10","20","50"],style:{marginRight:a.marginXS}},onChange:(e,a,n)=>{let{pageSize:l,current:i}=e;re((()=>{C().isNumber(i)&&C().isNumber(l)&&ge({current:i,pageSize:l}),F((0,o.Wh)(n))}))}}),(0,x.jsx)(A,{keypairInfoModalFrgmt:U,open:!!U||oe,loading:oe,onRequestClose:()=>{N(null)}}),(0,x.jsx)(O,{keypairSettingModalFrgmt:L,loading:ue,open:!!L||ue||P,onRequestClose:e=>{w(null),I(!1),e&&R((()=>{v()}))}})]})};var ie,re=n(7971),te=n(49978);const se=e=>{let{userEmail:a,onRequestClose:l,...i}=e;const{t:r}=(0,M.Bd)(),t=(0,d.CX)(),s=null===t||void 0===t?void 0:t.supports("sudo-session-enabled"),{isTOTPSupported:o,isLoading:u}=(0,re.F4)(),{user:c}=(0,h.useLazyLoadQuery)(void 0!==ie?ie:ie=n(45056),{email:a,isNotSupportSudoSessionEnabled:!s,isTOTPSupported:null!==o&&void 0!==o&&o}),m={xxl:1,xl:1,lg:1,md:1,sm:1,xs:1};return(0,x.jsxs)(g.A,{centered:!0,title:r("credential.UserDetail"),footer:null,onCancel:l,...i,children:[(0,x.jsxs)(v.A,{size:"small",column:m,title:r("credential.Information"),labelStyle:{width:"50%"},children:[(0,x.jsx)(v.A.Item,{label:r("credential.UserID"),children:null===c||void 0===c?void 0:c.email}),(0,x.jsx)(v.A.Item,{label:r("credential.Description"),children:null===c||void 0===c?void 0:c.description}),(0,x.jsx)(v.A.Item,{label:r("credential.UserName"),children:null===c||void 0===c?void 0:c.username}),(0,x.jsx)(v.A.Item,{label:r("credential.FullName"),children:null===c||void 0===c?void 0:c.full_name}),(0,x.jsx)(v.A.Item,{label:r("credential.MainAccessKey"),children:null===c||void 0===c?void 0:c.main_access_key}),(0,x.jsx)(v.A.Item,{label:r("credential.DescActiveUser"),children:"active"===(null===c||void 0===c?void 0:c.status)?r("button.Yes"):r("button.No")}),(0,x.jsx)(v.A.Item,{label:r("credential.DescRequirePasswordChange"),children:null!==c&&void 0!==c&&c.need_password_change?r("button.Yes"):r("button.No")}),s&&(0,x.jsx)(v.A.Item,{label:r("credential.EnableSudoSession"),children:null!==c&&void 0!==c&&c.sudo_session_enabled?r("button.Yes"):r("button.No")}),o&&(0,x.jsx)(v.A.Item,{label:r("webui.menu.TotpActivated"),children:(0,x.jsx)(te.A,{spinning:u,children:null!==c&&void 0!==c&&c.totp_activated?r("button.Yes"):r("button.No")})})]}),(0,x.jsx)("br",{}),(0,x.jsxs)(v.A,{size:"small",column:m,title:r("credential.Association"),labelStyle:{width:"50%"},children:[(0,x.jsx)(v.A.Item,{label:r("credential.Role"),children:null===c||void 0===c?void 0:c.role}),(0,x.jsx)(v.A.Item,{label:r("credential.Domain"),children:null===c||void 0===c?void 0:c.domain_name}),(0,x.jsx)(v.A.Item,{label:r("credential.ResourcePolicy"),children:null===c||void 0===c?void 0:c.resource_policy})]}),(0,x.jsx)("br",{}),(0,x.jsx)(v.A,{title:r("credential.ProjectAndGroup"),labelStyle:{width:"50%"},children:(0,x.jsx)(v.A.Item,{children:C().map(null===c||void 0===c?void 0:c.groups,(e=>(0,x.jsx)(f.A,{children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)))})})]})};var oe,de=n(73e3),ue=n(17142);const ce=e=>{let{...a}=e;const{t:l}=(0,M.Bd)(),{user_resource_policies:i}=(0,h.useLazyLoadQuery)(void 0!==oe?oe:oe=n(55424),{},{fetchPolicy:"store-and-network"});return(0,x.jsx)(j.A,{showSearch:!0,placeholder:l("credential.SelectPolicy"),options:C().map(i,(e=>({value:null===e||void 0===e?void 0:e.name,label:null===e||void 0===e?void 0:e.name}))).sort(((e,a)=>(0,o._f)(null===e||void 0===e?void 0:e.label,null===a||void 0===a?void 0:a.label))),...a})};var me,pe,ge,ye=n(38672),ke=n(40915),fe=n(66972),ve=n(77109);const be={active:"Active",inactive:"Inactive","before-verification":"Before Verification",deleted:"Deleted"},Se={superadmin:["superadmin","admin","user","monitor"],admin:["admin","user","monitor"]},_e=e=>{let{userEmail:a=null,onRequestClose:l,...i}=e;const{t:r}=(0,M.Bd)(),{token:t}=y.A.useToken(),{modal:s}=$.A.useApp(),o=(0,z.useRef)(null),u=(0,re.Am)(),c=(0,d.eZ)(),m=(0,d.CX)(),p=null===m||void 0===m?void 0:m.supports("sudo-session-enabled"),{isTOTPSupported:f,isLoading:v}=(0,re.F4)(),[b,{toggle:S}]=(0,ke.A)(!1),[_,A]=(0,d.Tw)("initial-fetch"),{user:K}=(0,h.useLazyLoadQuery)(void 0!==me?me:me=n(26250),{email:null!==a&&void 0!==a?a:"",isNotSupportSudoSessionEnabled:!p,isNotSupportTotp:!f},{fetchPolicy:i.open&&a?"network-only":"store-only",fetchKey:_}),[F,T]=(0,h.useMutation)(void 0!==pe?pe:pe=n(35895)),[L,w]=(0,h.useMutation)(void 0!==ge?ge:ge=n(66017)),P=(0,de.ET)({mutationFn:e=>m.remove_totp(e)}),I={email:"",username:"",need_password_change:!1,full_name:"",description:"",status:"active",domain_name:c,role:"user",is_active:!0,resource_policy:"default"};return(0,x.jsxs)(g.A,{centered:!0,title:r(K?"credential.ModifyUserDetail":"credential.CreateUser"),destroyOnClose:!0,onOk:()=>{var e;null===(e=o.current)||void 0===e||e.validateFields().then((async e=>{if(K){const a=C().omitBy(C().omit(e,["email","password_confirm"]),C().isNil);F({variables:{email:(null===e||void 0===e?void 0:e.email)||"",props:a,isNotSupportSudoSessionEnabled:!p,isNotSupportTotp:!f},onCompleted:(e,a)=>{var n,i;if(null===e||void 0===e||null===(n=e.modify_user)||void 0===n||!n.ok)return fe.Ay.error(r("dialog.ErrorOccurred")),console.error(null===e||void 0===e||null===(i=e.modify_user)||void 0===i?void 0:i.msg),void l(!1);if(a&&a.length>0){const e=C().map(a,(e=>e.message));for(const a of e)fe.Ay.error(a,2.5);l(!1)}fe.Ay.success(r("environment.SuccessfullyModified")),l(!0)},onError:e=>{fe.Ay.error(r("dialog.ErrorOccurred")),console.error(e)}})}else{const a=[await m.group.list().then((e=>{var a;return null===(a=C().find(e.groups,{name:"default"}))||void 0===a?void 0:a.id}))],n={...C().omit(e,["email","password_confirm"]),password:e.password,need_password_change:e.need_password_change,username:(null===e||void 0===e?void 0:e.username)||C().split(e.email,"@")[0],full_name:(null===e||void 0===e?void 0:e.full_name)||C().split(e.email,"@")[0],description:(null===e||void 0===e?void 0:e.description)||`${C().split(e.email,"@")[0]}'s Account`,group_ids:a};L({variables:{email:(null===e||void 0===e?void 0:e.email)||"",props:n,isNotSupportSudoSessionEnabled:!p,isNotSupportTotp:!f},onCompleted:(e,a)=>{var n,i,t,s;if(null===e||void 0===e||null===(n=e.create_user)||void 0===n||!n.ok)return fe.Ay.error(null!==(i=e.create_user)&&void 0!==i&&null!==(t=i.msg)&&void 0!==t&&t.includes("already exists")?r("credential.UserAccountCreatedError"):r("dialog.ErrorOccurred")),console.error(null===e||void 0===e||null===(s=e.create_user)||void 0===s?void 0:s.msg),void l(!1);if(a&&a.length>0){const e=C().map(a,(e=>e.message));for(const a of e)fe.Ay.error(a,2.5);l(!1)}fe.Ay.success(r("environment.SuccessfullyCreated")),l(!0)},onError:e=>{fe.Ay.error(r("dialog.ErrorOccurred")),console.error(e)}})}})).catch((e=>console.error(e)))},confirmLoading:T||w,onCancel:()=>l(!1),...i,children:[(0,x.jsxs)(U.A,{ref:o,preserve:!1,labelCol:{span:10},wrapperCol:{span:20},validateTrigger:["onChange","onBlur"],style:{marginBottom:40,marginTop:t.marginMD},initialValues:K?{...K}:I,children:[(0,x.jsx)(U.A.Item,{name:"email",label:r("credential.UserID"),rules:[{required:!K},{type:"email"}],children:(0,x.jsx)(N.A,{disabled:!!K})}),(0,x.jsx)(U.A.Item,{name:"username",label:r("credential.UserName"),rules:[{max:64}],children:(0,x.jsx)(N.A,{placeholder:r("maxLength.64chars")})}),(0,x.jsx)(U.A.Item,{name:"full_name",label:r("credential.FullName"),rules:[{max:64}],children:(0,x.jsx)(N.A,{placeholder:r("maxLength.64chars")})}),(0,x.jsx)(U.A.Item,{name:"password",label:r(K?"general.NewPassword":"general.Password"),rules:[{required:!K},{pattern:/^(?=.*\d)(?=.*[a-zA-Z])(?=.*[_\W]).{8,}$/,message:r("webui.menu.InvalidPasswordMessage")}],children:(0,x.jsx)(N.A.Password,{})}),(0,x.jsx)(U.A.Item,{name:"password_confirm",dependencies:["password"],label:r(K?"webui.menu.NewPasswordAgain":"general.ConfirmPassword"),rules:[{required:!K,message:""},e=>{let{getFieldValue:a}=e;return{validator:(e,n)=>!n&&a("password")?Promise.reject(new Error(r("webui.menu.PleaseConfirmYourPassword"))):n&&a("password")!==n?Promise.reject(new Error(r("environment.PasswordsDoNotMatch"))):Promise.resolve()}}],children:(0,x.jsx)(N.A.Password,{})}),(0,x.jsx)(U.A.Item,{name:"description",label:r("credential.Description"),rules:[{max:500}],children:(0,x.jsx)(N.A.TextArea,{placeholder:r("maxLength.500chars")})}),(0,x.jsx)(U.A.Item,{name:"status",label:r("credential.UserStatus"),children:(0,x.jsx)(j.A,{options:C().map(be,((e,a)=>({value:a,label:e})))})}),!(null===K||void 0===K||!K.role)&&!!u&&u in Se&&(0,x.jsx)(U.A.Item,{name:"role",label:r("credential.Role"),children:(0,x.jsx)(j.A,{options:C().map(Se[u],(e=>({value:e,label:e})))})}),(0,x.jsx)(U.A.Item,{name:"need_password_change",label:r("credential.DescRequirePasswordChange"),valuePropName:"checked",children:(0,x.jsx)(ve.A,{})}),!!p&&(0,x.jsx)(U.A.Item,{name:"sudo_session_enabled",label:r("credential.EnableSudoSession"),valuePropName:"checked",children:(0,x.jsx)(ve.A,{})}),!!f&&(0,x.jsx)(U.A.Item,{name:"totp_activated",label:r("webui.menu.TotpActivated"),valuePropName:"checked",extra:(null===K||void 0===K?void 0:K.email)!==(null===m||void 0===m?void 0:m.email)&&(0,x.jsx)(k.A.Text,{type:"secondary",style:{fontSize:t.fontSizeSM},children:r("credential.AdminCanOnlyRemoveTotp")}),children:(0,x.jsx)(ve.A,{loading:v||P.isPending,disabled:(null===K||void 0===K?void 0:K.email)!==(null===m||void 0===m?void 0:m.email)&&!(null!==K&&void 0!==K&&K.totp_activated),onChange:e=>{var a;e?S():null!==K&&void 0!==K&&K.totp_activated&&(null===(a=o.current)||void 0===a||a.setFieldValue("totp_activated",!0),s.confirm({title:r("totp.TurnOffTotp"),icon:(0,x.jsx)(ye.A,{}),content:r("totp.ConfirmTotpRemovalBody"),okText:r("button.Yes"),okType:"danger",cancelText:r("button.No"),onOk(){P.mutate((null===K||void 0===K?void 0:K.email)||"",{onSuccess:()=>{var e;fe.Ay.success(r("totp.RemoveTotpSetupCompleted")),A(),null===(e=o.current)||void 0===e||e.setFieldValue("totp_activated",!1)},onError:e=>{console.log(e)}})},onCancel(){var e;null===(e=o.current)||void 0===e||e.setFieldValue("totp_activated",!0)}}))}})}),(0,x.jsx)(U.A.Item,{name:"resource_policy",label:r("resourcePolicy.ResourcePolicy"),rules:[{required:!K}],children:(0,x.jsx)(ce,{})})]}),!!f&&(0,x.jsx)(ue.A,{userFrgmt:K,open:b,onRequestClose:e=>{var a;e?A():null===(a=o.current)||void 0===a||a.setFieldValue("totp_activated",!1);S()}})]})};var he,xe,Ae=n(2667),Ke=n(37826);const Fe=()=>{const{t:e}=(0,M.Bd)(),{token:a}=y.A.useToken(),[l,i]=(0,z.useTransition)(),[r,s]=(0,z.useTransition)(),[p,g]=(0,d.Tw)("first"),[k,f]=(0,z.useState)(),[v,b]=(0,z.useState)("-created_at"),[_,A]=(0,z.useTransition)(),[K,F]=(0,z.useTransition)(),[j,T]=(0,z.useState)('status == "active"'),{message:L}=$.A.useApp(),[w,P]=(0,z.useState)(null),[I,U]=(0,z.useTransition)(),[N,D]=(0,z.useTransition)(),[R,V]=(0,z.useState)(null),[O,q]=(0,z.useState)(!1),{baiPaginationOption:E,tablePaginationOption:Q,setTablePaginationOption:W}=(0,u.w4)({current:1,pageSize:20}),[ne,le]=(0,z.useState)(),{user_nodes:ie}=(0,h.useLazyLoadQuery)(void 0!==he?he:he=n(40089),{first:E.limit,offset:E.offset,filter:[k,j].filter(Boolean).map((e=>`(${e})`)).join(" & "),order:v},{fetchKey:p,fetchPolicy:"network-only"}),[re,te]=(0,h.useMutation)(void 0!==xe?xe:xe=n(95070));return(0,x.jsxs)(t.A,{direction:"column",align:"stretch",children:[(0,x.jsxs)(t.A,{justify:"between",align:"start",gap:"xs",style:{padding:a.paddingSM},wrap:"wrap",children:[(0,x.jsxs)(t.A,{direction:"row",gap:"sm",align:"start",wrap:"wrap",children:[(0,x.jsx)(m.A,{value:j,onChange:e=>{F((()=>{var a;T(null===(a=e.target)||void 0===a?void 0:a.value),W({current:1,pageSize:Q.pageSize})}))},optionType:"button",options:[{label:"Active",value:'status == "active"'},{label:"Inactive",value:'status != "active"'}]}),(0,x.jsx)(c.Ay,{filterProperties:[{key:"email",propertyLabel:e("credential.UserID"),type:"string"},{key:"username",propertyLabel:e("credential.Name"),type:"string"},{key:"role",propertyLabel:e("credential.Role"),type:"string",strictSelection:!0,defaultOperator:"==",options:[{label:"superadmin",value:"superadmin"},{label:"admin",value:"admin"},{label:"user",value:"user"},{label:"monitor",value:"monitor"}]},{key:"description",propertyLabel:e("credential.Description"),type:"string"}],value:k,loading:r,onChange:e=>{s((()=>{f(e)}))}})]}),(0,x.jsxs)(t.A,{gap:"xs",children:[(0,x.jsx)(G.A,{title:e("button.Refresh"),children:(0,x.jsx)(H.Ay,{loading:l,onClick:()=>{i((()=>{g()}))},icon:(0,x.jsx)(B.A,{})})}),(0,x.jsx)(H.Ay,{type:"primary",icon:(0,x.jsx)(J.A,{}),onClick:()=>{q(!0)},children:e("credential.CreateUser")})]})]}),(0,x.jsx)(Ke.A,{scroll:{x:"max-content"},rowKey:"id",dataSource:C().map((0,o.tS)(null===ie||void 0===ie?void 0:ie.edges),(e=>e.node)),columns:(0,o.LY)([{key:"email",title:e("credential.UserID"),dataIndex:"email",sorter:!0},{key:"username",title:e("credential.Name"),dataIndex:"username",sorter:!0},{key:"role",title:e("credential.Role"),dataIndex:"role",sorter:!0},{key:"description",title:e("credential.Description"),dataIndex:"description"},{title:e("credential.CreatedAt"),dataIndex:"created_at",render:e=>S()(e).format("lll"),sorter:!0,defaultSortOrder:"descend"},'status != "active"'===j&&{key:"status",title:e("credential.Status"),dataIndex:"status",sorter:!0},{title:e("general.Control"),render:n=>{const l="active"===(null===n||void 0===n?void 0:n.status);return(0,x.jsxs)(t.A,{gap:a.marginXS,children:[(0,x.jsx)(H.Ay,{type:"text",icon:(0,x.jsx)(X.A,{style:{color:a.colorSuccess}}),onClick:()=>{U((()=>{P((null===n||void 0===n?void 0:n.email)||null)}))}}),(0,x.jsx)(H.Ay,{type:"text",icon:(0,x.jsx)(Y.A,{style:{color:a.colorInfo}}),onClick:()=>{D((()=>{V((null===n||void 0===n?void 0:n.email)||null)}))}}),(0,x.jsx)(G.A,{title:e(l?"credential.Deactivate":"credential.Activate"),children:(0,x.jsx)(Z.A,{title:e(l?"credential.DeactivateUser":"credential.ActivateUser"),placement:"left",okType:l?"danger":"primary",okText:e(l?"credential.Deactivate":"credential.Activate"),description:null===n||void 0===n?void 0:n.email,onConfirm:()=>{le((null===n||void 0===n?void 0:n.id)||""),re({variables:{email:(null===n||void 0===n?void 0:n.email)||"",props:{status:l?"inactive":"active"}},onCompleted:()=>{L.success(e("credential.StatusUpdatedSuccessfully")),i((()=>{g()}))},onError:e=>{L.error(null===e||void 0===e?void 0:e.message),console.error(e)}})},children:(0,x.jsx)(H.Ay,{type:"text",danger:l,icon:l?(0,x.jsx)(ae.A,{}):(0,x.jsx)(ee.A,{}),disabled:te&&ne!==(null===n||void 0===n?void 0:n.id),loading:te&&ne===(null===n||void 0===n?void 0:n.id)})})})]})}}]),showSorterTooltip:!1,sortDirections:["descend","ascend","descend"],pagination:{pageSize:Q.pageSize,showSizeChanger:!0,total:(null===ie||void 0===ie?void 0:ie.count)||0,current:Q.current,showTotal:(e,a)=>`${a[0]}-${a[1]} of ${e} users`,pageSizeOptions:["10","20","50"],style:{marginRight:a.marginXS}},onChange:(e,a,n)=>{let{pageSize:l,current:i}=e;A((()=>{C().isNumber(i)&&C().isNumber(l)&&W({current:i,pageSize:l}),b((0,o.Wh)(n))}))},loading:{spinning:_||K||r,indicator:(0,x.jsx)(Ae.A,{})}}),(0,x.jsx)(se,{userEmail:w||"",open:!!w||I,loading:I,onRequestClose:()=>{P(null)}}),(0,x.jsx)(_e,{userEmail:R,open:!!R||N||O,loading:N,onRequestClose:e=>{V(null),q(!1),e&&i((()=>{g()}))}})]})};const je=(0,n(43403).rU)((e=>{let{css:a}=e;return{card:a`
    .ant-card-body {
      padding: 0;
    }
  `}})),Te=(0,ne.withDefault)(ne.StringParam,"users"),Ce=()=>{const{t:e}=(0,M.Bd)(),{styles:a}=je(),[n,l]=(0,ne.useQueryParam)("tab",Te),i=[{key:"users",label:e("credential.Users")},{key:"credentials",label:e("credential.Credentials")}];return(0,x.jsx)(r.A,{showDivider:!0,className:a.card,activeTabKey:n,onTabChange:l,tabList:i,children:(0,x.jsxs)(z.Suspense,{fallback:(0,x.jsx)(s.A,{style:{height:"calc(100vh - 145px)"},spinSize:"large"}),children:["users"===n&&(0,x.jsx)(t.A,{direction:"column",align:"stretch",children:(0,x.jsx)(Fe,{})}),"credentials"===n&&(0,x.jsx)(t.A,{direction:"column",align:"stretch",children:(0,x.jsx)(le,{})})]})})}}}]);
//# sourceMappingURL=2483.ffad4719.chunk.js.map