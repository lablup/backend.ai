"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[437],{46228:function(e,t,a){var n=a(1413),i=a(99277),o=a(32064),r=a(39883),l=(a(4519),a(2556));t.Z=function(e){var t=e.style,a=e.children;return(0,l.jsxs)(i.Z,{direction:"row",justify:"center",align:"center",style:(0,n.Z)({width:"100%",height:"100%"},t),children:[(0,l.jsx)(r.Z,{indicator:(0,l.jsx)(o.Z,{spin:!0})}),a]})}},41437:function(e,t,a){a.r(t),a.d(t,{StorageStatusPanelFallback:function(){return D},default:function(){return O}});var n,i=a(29439),o=a(43255),r=a(87760),l=a(99277),s=a(46228),d=a(1413),c=a(44925),u=a(19427),g=a(32048),p=a.n(g),m=a(4519),f=a(81748),h=a(87112),y=a(2556),v=["value","onChange","autoSelectDefault"],_=function(e){var t=e.value,a=e.onChange,n=e.autoSelectDefault,i=(0,c.Z)(e,v),o=(0,f.$G)().t,l=(0,r.Dj)(),s=(0,h.useQuery)("vhostInfo",(function(){return l.vfolder.list_hosts()})),g=s.data,_=s.isLoading;return(0,m.useEffect)((function(){n&&!t&&null!==g&&void 0!==g&&g.default&&(null===a||void 0===a||a(null===g||void 0===g?void 0:g.default,(0,d.Z)({id:null===g||void 0===g?void 0:g.default},(null===g||void 0===g?void 0:g.volume_info[null===g||void 0===g?void 0:g.default])||{})))}),[]),(0,y.jsx)(u.Z,(0,d.Z)({filterOption:!1,placeholder:o("data.SelectStorageHost"),loading:_,style:{minWidth:165},value:(null===t||void 0===t?void 0:t.id)||t,onChange:function(e){null===a||void 0===a||a(e,(0,d.Z)({id:e},(null===g||void 0===g?void 0:g.volume_info[e])||{}))},options:p().map(null===g||void 0===g?void 0:g.allowed,(function(e){return{value:e,label:e}}))},i))},x=a(44036),b=a(53562),k=a(28499),S=a(16980),j=function(e){var t,i,r,s,d,c=e.usageProgressFrgmt,u=(0,f.$G)().t,g=x.Z.useToken().token,p=(0,S.useFragment)(void 0!==n?n:n=a(407),c),m=parseFloat(null===p||void 0===p||null===(t=p.details)||void 0===t?void 0:t.usage_bytes)||0,h=parseFloat(null===p||void 0===p||null===(i=p.details)||void 0===i?void 0:i.hard_limit_bytes)||0,v=h>0?null===(r=m/h*100)||void 0===r?void 0:r.toFixed(2):0;return(0,y.jsxs)(l.Z,{direction:"column",children:[(0,y.jsx)(b.Z,{size:[180,15],percent:v,strokeColor:(0,o.lA)(v),status:v>=100?"exception":"normal"}),(0,y.jsxs)(l.Z,{direction:"row",gap:g.marginXXS,style:{fontSize:12},children:[(0,y.jsxs)(k.Z.Text,{type:"secondary",style:{fontSize:12},children:[u("data.Used"),":"]}),(0,o.Uz)(null===p||void 0===p||null===(s=p.details)||void 0===s?void 0:s.usage_bytes)," GB",(0,y.jsx)(k.Z.Text,{type:"secondary",style:{fontSize:12},children:" / "}),(0,y.jsxs)(k.Z.Text,{type:"secondary",style:{fontSize:12},children:[u("data.Limit"),":"]}),(0,o.Uz)(null===p||void 0===p||null===(d=p.details)||void 0===d?void 0:d.hard_limit_bytes)," GB"]})]})},Z=a(87462),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},F=a(9491),z=function(e,t){return m.createElement(F.Z,(0,Z.Z)({},e,{ref:t,icon:w}))};var q,Q,P=m.forwardRef(z),T=a(53066),K=a(93448),L=a(83799),C=a(227),I=a(92171),V=a(54473),$=a(97589),D=function(){var e=(0,f.$G)().t;return(0,y.jsx)(T.Z,{size:"small",title:e("data.StorageStatus"),style:{margin:"3px 14px"},children:(0,y.jsx)($.Z,{active:!0})})},O=function(e){var t,n,d=e.fetchKey,c=(0,f.$G)().t,u=x.Z.useToken().token,g=(0,r.Dj)(),p=(0,r.qh)(),v=(0,m.useState)(),Z=(0,i.Z)(v,2),w=Z[0],F=Z[1],z=(0,m.useDeferredValue)(w),$=(0,m.useDeferredValue)(d),D=(0,h.useQuery)(["vfolders",{deferredFetchKey:$}],(function(){return g.vfolder.list(null===p||void 0===p?void 0:p.id)})).data,O=null===D||void 0===D?void 0:D.filter((function(e){return e.is_owner&&"user"===e.ownership_type})).length,E=null===D||void 0===D?void 0:D.filter((function(e){return"group"===e.ownership_type})).length,N=null===D||void 0===D?void 0:D.filter((function(e){return!e.is_owner&&"user"===e.ownership_type})).length,B=(0,S.useLazyLoadQuery)(void 0!==q?q:q=a(14933),{domain_name:(0,r.tQ)(),email:null===g||void 0===g?void 0:g.email}).user,M=(0,S.useLazyLoadQuery)(void 0!==Q?Q:Q=a(85912),{project_quota_scope_id:(0,o.VQ)("project",null===p||void 0===p?void 0:p.id),user_quota_scope_id:(0,o.VQ)("user",(null===B||void 0===B?void 0:B.id)||""),storage_host_name:(null===z||void 0===z?void 0:z.id)||"",skipQuotaScope:void 0===(null===p||void 0===p?void 0:p.id)||void 0===(null===B||void 0===B?void 0:B.id)||!(null!==z&&void 0!==z&&z.id)}),G=M.user_resource_policy,W=M.project_quota_scope,A=M.user_quota_scope,H=(null===G||void 0===G?void 0:G.max_vfolder_count)||0,U=H>0?null===(t=O/H*100)||void 0===t?void 0:t.toFixed(2):0;return(0,y.jsx)(T.Z,{size:"small",title:c("data.StorageStatus"),style:{margin:"3px 14px"},children:(0,y.jsxs)(K.Z,{bordered:!0,column:{xxl:4,xl:4,lg:2,md:1,sm:1,xs:1},size:"small",children:[(0,y.jsxs)(K.Z.Item,{label:c("data.NumberOfFolders"),children:[(0,y.jsx)(b.Z,{size:[200,15],percent:U,strokeColor:(0,o.lA)(U),style:{width:"95%"},status:U>=100?"exception":"normal"}),(0,y.jsxs)(l.Z,{direction:"row",gap:u.marginXXS,wrap:"wrap",children:[(0,y.jsxs)(k.Z.Text,{type:"secondary",children:[c("data.Created"),":"]}),O,(0,y.jsx)(k.Z.Text,{type:"secondary",children:" / "}),(0,y.jsxs)(k.Z.Text,{type:"secondary",children:[c("data.Limit"),":"]}),0===H?"-":H]}),(0,y.jsx)(L.Z,{style:{margin:"12px auto"}}),(0,y.jsxs)(l.Z,{direction:"row",wrap:"wrap",justify:"between",children:[(0,y.jsxs)(l.Z,{gap:u.marginXXS,children:[(0,y.jsxs)(k.Z.Text,{type:"secondary",children:[c("data.ProjectFolder"),":"]}),E]}),(0,y.jsxs)(l.Z,{gap:u.marginXXS,style:{marginRight:30},children:[(0,y.jsxs)(k.Z.Text,{type:"secondary",children:[c("data.Invited"),":"]}),N]})]})]}),(0,y.jsxs)(K.Z.Item,{label:(0,y.jsxs)("div",{children:[c("data.QuotaPerStorageVolume"),(0,y.jsx)(C.Z,{title:c("data.HostDetails"),children:(0,y.jsx)(I.ZP,{type:"link",icon:(0,y.jsx)(P,{})})})]}),children:[(0,y.jsxs)(l.Z,{wrap:"wrap",justify:"between",direction:"row",style:{minWidth:"25vw"},children:[(0,y.jsx)(k.Z.Text,{type:"secondary",children:c("data.Host")}),(0,y.jsx)(_,{onChange:function(e,t){F(t)},value:w,autoSelectDefault:!0})]}),w!==z?(0,y.jsx)(s.Z,{style:{minHeight:120}}):null!==w&&void 0!==w&&null!==(n=w.capabilities)&&void 0!==n&&n.includes("quota")?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(l.Z,{style:{margin:"15px auto"},justify:"between",wrap:"wrap",children:[(0,y.jsxs)(k.Z.Text,{type:"secondary",style:{wordBreak:"keep-all",wordWrap:"break-word"},children:[c("data.Project"),(0,y.jsx)("br",{}),"(",null===p||void 0===p?void 0:p.name,")"]}),(0,y.jsx)(j,{usageProgressFrgmt:W||null})]}),(0,y.jsxs)(l.Z,{justify:"between",wrap:"wrap",children:[(0,y.jsxs)(k.Z.Text,{type:"secondary",style:{wordBreak:"keep-all",wordWrap:"break-word"},children:[c("data.User"),(0,y.jsx)("br",{}),"(",null===g||void 0===g?void 0:g.email,")"]}),(0,y.jsx)(j,{usageProgressFrgmt:A||null})]})]}):(0,y.jsx)(V.Z,{image:V.Z.PRESENTED_IMAGE_SIMPLE,description:c("storageHost.QuotaDoesNotSupported"),style:{margin:"25px auto"}})]})]})})}},14933:function(e,t,a){a.r(t);var n=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"domain_name"},{defaultValue:null,kind:"LocalArgument",name:"email"}],t=[{alias:null,args:[{kind:"Variable",name:"domain_name",variableName:"domain_name"},{kind:"Variable",name:"email",variableName:"email"}],concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"StorageStatusPanelKeypairQuery",selections:t,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"StorageStatusPanelKeypairQuery",selections:t},params:{cacheID:"12cd43d84d51b10726638b7c1db10c82",id:null,metadata:{},name:"StorageStatusPanelKeypairQuery",operationKind:"query",text:"query StorageStatusPanelKeypairQuery(\n  $domain_name: String\n  $email: String\n) {\n  user(domain_name: $domain_name, email: $email) {\n    id\n  }\n}\n"}}}();n.hash="a0285b0272bea99e74ea0cfd65e1bc80",t.default=n},85912:function(e,t,a){a.r(t);var n=function(){var e={defaultValue:null,kind:"LocalArgument",name:"name"},t={defaultValue:null,kind:"LocalArgument",name:"project_quota_scope_id"},a={defaultValue:null,kind:"LocalArgument",name:"skipQuotaScope"},n={defaultValue:null,kind:"LocalArgument",name:"storage_host_name"},i={defaultValue:null,kind:"LocalArgument",name:"user_quota_scope_id"},o=[{kind:"Variable",name:"name",variableName:"name"}],r={alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},l={kind:"Variable",name:"storage_host_name",variableName:"storage_host_name"},s=[{kind:"Variable",name:"quota_scope_id",variableName:"project_quota_scope_id"},l],d=[{args:null,kind:"FragmentSpread",name:"UsageProgressFragment_usageFrgmt"}],c=[{kind:"Variable",name:"quota_scope_id",variableName:"user_quota_scope_id"},l],u={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},g=[{alias:null,args:null,concreteType:"QuotaDetails",kind:"LinkedField",name:"details",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"usage_bytes",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hard_limit_bytes",storageKey:null}],storageKey:null},u];return{fragment:{argumentDefinitions:[e,t,a,n,i],kind:"Fragment",metadata:null,name:"StorageStatusPanelQuery",selections:[{alias:null,args:o,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"user_resource_policy",plural:!1,selections:[r],storageKey:null},{condition:"skipQuotaScope",kind:"Condition",passingValue:!1,selections:[{alias:"project_quota_scope",args:s,concreteType:"QuotaScope",kind:"LinkedField",name:"quota_scope",plural:!1,selections:d,storageKey:null},{alias:"user_quota_scope",args:c,concreteType:"QuotaScope",kind:"LinkedField",name:"quota_scope",plural:!1,selections:d,storageKey:null}]}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,t,i,n,a],kind:"Operation",name:"StorageStatusPanelQuery",selections:[{alias:null,args:o,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"user_resource_policy",plural:!1,selections:[r,u],storageKey:null},{condition:"skipQuotaScope",kind:"Condition",passingValue:!1,selections:[{alias:"project_quota_scope",args:s,concreteType:"QuotaScope",kind:"LinkedField",name:"quota_scope",plural:!1,selections:g,storageKey:null},{alias:"user_quota_scope",args:c,concreteType:"QuotaScope",kind:"LinkedField",name:"quota_scope",plural:!1,selections:g,storageKey:null}]}]},params:{cacheID:"604183c7719ff1ec7ee15a48ad03a019",id:null,metadata:{},name:"StorageStatusPanelQuery",operationKind:"query",text:"query StorageStatusPanelQuery(\n  $name: String\n  $project_quota_scope_id: String!\n  $user_quota_scope_id: String!\n  $storage_host_name: String!\n  $skipQuotaScope: Boolean!\n) {\n  user_resource_policy(name: $name) {\n    max_vfolder_count\n    id\n  }\n  project_quota_scope: quota_scope(quota_scope_id: $project_quota_scope_id, storage_host_name: $storage_host_name) @skip(if: $skipQuotaScope) {\n    ...UsageProgressFragment_usageFrgmt\n    id\n  }\n  user_quota_scope: quota_scope(quota_scope_id: $user_quota_scope_id, storage_host_name: $storage_host_name) @skip(if: $skipQuotaScope) {\n    ...UsageProgressFragment_usageFrgmt\n    id\n  }\n}\n\nfragment UsageProgressFragment_usageFrgmt on QuotaScope {\n  details {\n    usage_bytes\n    hard_limit_bytes\n  }\n}\n"}}}();n.hash="212b43240382405900de578d404a2d6b",t.default=n},407:function(e,t,a){a.r(t);var n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UsageProgressFragment_usageFrgmt",selections:[{alias:null,args:null,concreteType:"QuotaDetails",kind:"LinkedField",name:"details",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"usage_bytes",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hard_limit_bytes",storageKey:null}],storageKey:null}],type:"QuotaScope",abstractKey:null,hash:"1ba87b250f2a0161ecee7ba88d54c85c"};t.default=n},83799:function(e,t,a){a.d(t,{Z:function(){return f}});var n=a(4942),i=a(29439),o=a(4519),r=a(43270),l=a.n(r),s=a(48698),d=a(21480),c=a(70111),u=a(41157),g=function(e){var t,a=e.componentCls,i=e.sizePaddingEdgeHorizontal,o=e.colorSplit,r=e.lineWidth,l=e.textPaddingInline,s=e.orientationMargin,c=e.verticalMarginInline;return(0,n.Z)({},a,Object.assign(Object.assign({},(0,d.Wf)(e)),(t={borderBlockStart:"".concat(r,"px solid ").concat(o),"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:c,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:"".concat(r,"px solid ").concat(o)},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:"".concat(e.dividerHorizontalGutterMargin,"px 0")}},(0,n.Z)(t,"&-horizontal".concat(a,"-with-text"),{display:"flex",alignItems:"center",margin:"".concat(e.dividerHorizontalWithTextGutterMargin,"px 0"),color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:"0 ".concat(o),"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:"".concat(r,"px solid transparent"),borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}}),(0,n.Z)(t,"&-horizontal".concat(a,"-with-text-left"),{"&::before":{width:"".concat(100*s,"%")},"&::after":{width:"".concat(100-100*s,"%")}}),(0,n.Z)(t,"&-horizontal".concat(a,"-with-text-right"),{"&::before":{width:"".concat(100-100*s,"%")},"&::after":{width:"".concat(100*s,"%")}}),(0,n.Z)(t,"".concat(a,"-inner-text"),{display:"inline-block",paddingBlock:0,paddingInline:l}),(0,n.Z)(t,"&-dashed",{background:"none",borderColor:o,borderStyle:"dashed",borderWidth:"".concat(r,"px 0 0")}),(0,n.Z)(t,"&-horizontal".concat(a,"-with-text").concat(a,"-dashed"),{"&::before, &::after":{borderStyle:"dashed none none"}}),(0,n.Z)(t,"&-vertical".concat(a,"-dashed"),{borderInlineStartWidth:r,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0}),(0,n.Z)(t,"&-plain".concat(a,"-with-text"),{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize}),(0,n.Z)(t,"&-horizontal".concat(a,"-with-text-left").concat(a,"-no-default-orientation-margin-left"),(0,n.Z)({"&::before":{width:0},"&::after":{width:"100%"}},"".concat(a,"-inner-text"),{paddingInlineStart:i})),(0,n.Z)(t,"&-horizontal".concat(a,"-with-text-right").concat(a,"-no-default-orientation-margin-right"),(0,n.Z)({"&::before":{width:"100%"},"&::after":{width:0}},"".concat(a,"-inner-text"),{paddingInlineEnd:i})),t)))},p=(0,c.Z)("Divider",(function(e){var t=(0,u.TS)(e,{dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG,sizePaddingEdgeHorizontal:0});return[g(t)]}),(function(e){return{textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS}})),m=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a};var f=function(e){var t,a=o.useContext(s.E_),r=a.getPrefixCls,d=a.direction,c=a.divider,u=e.prefixCls,g=e.type,f=void 0===g?"horizontal":g,h=e.orientation,y=void 0===h?"center":h,v=e.orientationMargin,_=e.className,x=e.rootClassName,b=e.children,k=e.dashed,S=e.plain,j=e.style,Z=m(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain","style"]),w=r("divider",u),F=p(w),z=(0,i.Z)(F,2),q=z[0],Q=z[1],P=y.length>0?"-".concat(y):y,T=!!b,K="left"===y&&null!=v,L="right"===y&&null!=v,C=l()(w,null===c||void 0===c?void 0:c.className,Q,"".concat(w,"-").concat(f),(t={},(0,n.Z)(t,"".concat(w,"-with-text"),T),(0,n.Z)(t,"".concat(w,"-with-text").concat(P),T),(0,n.Z)(t,"".concat(w,"-dashed"),!!k),(0,n.Z)(t,"".concat(w,"-plain"),!!S),(0,n.Z)(t,"".concat(w,"-rtl"),"rtl"===d),(0,n.Z)(t,"".concat(w,"-no-default-orientation-margin-left"),K),(0,n.Z)(t,"".concat(w,"-no-default-orientation-margin-right"),L),t),_,x),I=o.useMemo((function(){return"number"===typeof v?v:/^\d+$/.test(v)?Number(v):v}),[v]),V=Object.assign(Object.assign({},K&&{marginLeft:I}),L&&{marginRight:I});return q(o.createElement("div",Object.assign({className:C,style:Object.assign(Object.assign({},null===c||void 0===c?void 0:c.style),j)},Z,{role:"separator"}),b&&"vertical"!==f&&o.createElement("span",{className:"".concat(w,"-inner-text"),style:V},b)))}}}]);
//# sourceMappingURL=437.024eab12.chunk.js.map