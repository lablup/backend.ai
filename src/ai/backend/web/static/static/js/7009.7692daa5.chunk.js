/*! For license information please see 7009.7692daa5.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[7009],{13502:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(29262);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};var l=s(7422);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},o.apply(this,arguments)}const r=(e,t)=>n.createElement(l.A,o({},e,{ref:t,icon:i}));const a=n.forwardRef(r)},31803:(e,t,s)=>{s.d(t,{A:()=>B});var n,i=s(56276),l=s(11863),o=s(7871),r=s(15584),a=s(76184),c=s(80391),u=s(87272),d=s(69319),g=s(45790),p=s(62949),h=s(96922),m=s(29268),x=s(52251),b=s(6294),v=s(7265),y=s(431),j=s(60669),f=s.n(j),_=s(29262),k=s(26862);const A=(0,b.rU)((e=>{let{css:t}=e;return{baiSettingItemCheckbox:t(n||(n=(0,o.A)(["\n    .ant-checkbox {\n      align-self: flex-start;\n      margin-top: 0.2rem;\n    }\n  "])))}})),S=e=>{const t=(0,r.c)(71),{"data-testid":s,type:n,title:l,description:o,children:b,defaultValue:j,value:S,onChange:w,onReset:P,selectProps:O,checkboxProps:C,showResetButton:T}=e,F=void 0===T||T,{token:R}=u.A.useToken(),{styles:I}=A(),[D,U]=(0,_.useState)(!1),[E,M]=(0,c.A)(!1),{toggle:B}=M;let V,q,G,N,L,W,z,X,H,K,Y,J,Q,Z,$,ee,te,se,ne,ie,le;if(t[0]!==(null===C||void 0===C?void 0:C.disabled)||t[1]!==j||t[2]!==w||t[3]!==P||t[4]!==(null===O||void 0===O?void 0:O.disabled)||t[5]!==n){let e;t[8]!==j||t[9]!==w||t[10]!==P?(e=()=>{P?P():V&&w&&w(j)},t[8]=j,t[9]=w,t[10]=P,t[11]=e):e=t[11],q=e,V="select"===n&&!(null!==O&&void 0!==O&&O.disabled)||"checkbox"===n&&!(null!==C&&void 0!==C&&C.disabled)||"custom"===n,t[0]=null===C||void 0===C?void 0:C.disabled,t[1]=j,t[2]=w,t[3]=P,t[4]=null===O||void 0===O?void 0:O.disabled,t[5]=n,t[6]=V,t[7]=q}else V=t[6],q=t[7];return t[12]===Symbol.for("react.memo_cache_sentinel")?(G=()=>U(!0),N=()=>U(!1),t[12]=G,t[13]=N):(G=t[12],N=t[13]),t[14]!==R.fontSize?(L={fontSize:R.fontSize},t[14]=R.fontSize,t[15]=L):L=t[15],t[16]!==L||t[17]!==l?(W=(0,k.jsx)(d.A.Text,{strong:!0,style:L,children:l}),t[16]=L,t[17]=l,t[18]=W):W=t[18],t[19]!==j||t[20]!==V||t[21]!==S?(z=V&&void 0!==S&&null!==S&&j!==S&&(0,k.jsx)(g.A,{dot:!0,status:"warning"}),t[19]=j,t[20]=V,t[21]=S,t[22]=z):z=t[22],t[23]!==D||t[24]!==V||t[25]!==B||t[26]!==F?(X=V&&F&&(0,k.jsx)(p.A,{menu:{items:[{key:"reset",label:(0,y.t)("button.Reset"),onClick:()=>B(),danger:!0}]},placement:"topLeft",onOpenChange:e=>e&&U(!0),children:(0,k.jsx)(v.Fvl,{icon:(0,k.jsx)(a.A,{}),type:"text",style:{width:20,height:20,opacity:D?1:0,transition:"opacity 0.2s ease-in-out"}})}),t[23]=D,t[24]=V,t[25]=B,t[26]=F,t[27]=X):X=t[27],t[28]!==W||t[29]!==z||t[30]!==X?(H=(0,k.jsx)(v.OOm,{direction:"row",gap:"xxs",children:(0,k.jsxs)(v.OOm,{gap:"xxs",align:"start",children:[W,z,X]})}),t[28]=W,t[29]=z,t[30]=X,t[31]=H):H=t[31],t[32]!==b||t[33]!==o||t[34]!==n?(K="custom"===n&&(0,k.jsxs)(v.OOm,{direction:"column",gap:"xs",align:"start",style:{width:"100%"},children:[o,b]}),t[32]=b,t[33]=o,t[34]=n,t[35]=K):K=t[35],t[36]!==C||t[37]!==o||t[38]!==w||t[39]!==I||t[40]!==n||t[41]!==S?(Y="checkbox"===n&&(0,k.jsx)(h.A,(0,i.A)((0,i.A)({className:I.baiSettingItemCheckbox,checked:S,onChange:e=>{null===w||void 0===w||w(e.target.checked)}},C),{},{children:(0,k.jsx)(d.A.Text,{type:null!==C&&void 0!==C&&C.disabled?"secondary":void 0,children:o})})),t[36]=C,t[37]=o,t[38]=w,t[39]=I,t[40]=n,t[41]=S,t[42]=Y):Y=t[42],t[43]!==o||t[44]!==w||t[45]!==O||t[46]!==R.marginXS||t[47]!==n||t[48]!==S?(J="select"===n&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d.A.Text,{type:null!==O&&void 0!==O&&O.disabled?"secondary":void 0,children:o}),(0,k.jsx)(m.A,(0,i.A)({value:S,popupMatchSelectWidth:!1,onChange:e=>{null===w||void 0===w||w(e)},style:(0,i.A)({marginTop:R.marginXS,width:"fit-content"},null===O||void 0===O?void 0:O.style)},f().omit(O,["style"])))]}),t[43]=o,t[44]=w,t[45]=O,t[46]=R.marginXS,t[47]=n,t[48]=S,t[49]=J):J=t[49],t[50]===Symbol.for("react.memo_cache_sentinel")?(Q=(0,y.t)("dialog.ask.DoYouWantToResetChanges"),Z=(0,y.t)("button.Reset"),$={danger:!0},t[50]=Q,t[51]=Z,t[52]=$):(Q=t[50],Z=t[51],$=t[52]),t[53]!==q||t[54]!==B?(ee=()=>{q(),B()},t[53]=q,t[54]=B,t[55]=ee):ee=t[55],t[56]===Symbol.for("react.memo_cache_sentinel")?(te=(0,y.t)("button.Cancel"),t[56]=te):te=t[56],t[57]!==B?(se=()=>B(),t[57]=B,t[58]=se):se=t[58],t[59]===Symbol.for("react.memo_cache_sentinel")?(ne=(0,k.jsx)(x.A,{showIcon:!0,title:(0,y.t)("dialog.warning.CannotBeUndone"),type:"warning"}),t[59]=ne):ne=t[59],t[60]!==E||t[61]!==ee||t[62]!==se?(ie=(0,k.jsx)(v.IbE,{open:E,title:Q,okText:Z,okButtonProps:$,onOk:ee,cancelText:te,onCancel:se,children:ne}),t[60]=E,t[61]=ee,t[62]=se,t[63]=ie):ie=t[63],t[64]!==s||t[65]!==K||t[66]!==Y||t[67]!==J||t[68]!==ie||t[69]!==H?(le=(0,k.jsxs)(v.OOm,{"data-testid":s,direction:"column",align:"stretch",gap:"xxs",onMouseEnter:G,onMouseLeave:N,children:[H,K,Y,J,ie]}),t[64]=s,t[65]=K,t[66]=Y,t[67]=J,t[68]=ie,t[69]=H,t[70]=le):le=t[70],le};var w=s(57134),P=s(13502),O=s(90464),C=s(91129),T=s(9386),F=s(43139),R=s(99118);const I=["group","hideEmpty"];var D;const U=(0,b.rU)((e=>{let{css:t}=e;return{TabStyles:t(D||(D=(0,o.A)(["\n    .ant-tabs-tab-active {\n      font-weight: var(--token-fontWeightSuperStrong, 700);\n    }\n    .ant-typography-secondary {\n      font-weight: normal !important;\n    }\n  "])))}})),E=e=>{let{title:t,count:s}=e;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d.A.Text,{children:t}),(0,k.jsx)(d.A.Text,{type:"secondary",children:" (".concat(s,")")})]})},M=e=>{let{group:t,hideEmpty:s=!0}=e,n=(0,l.A)(e,I);const{token:o}=u.A.useToken();return(!s||0!==t.settingItems.length)&&(0,k.jsxs)(v.OOm,(0,i.A)((0,i.A)({direction:"column",align:"stretch",style:{marginBottom:o.marginMD}},n),{},{children:[(0,k.jsxs)(v.OOm,{direction:"column",align:"stretch",style:{zIndex:1,marginBottom:o.marginMD,background:o.colorBgContainer},children:[(0,k.jsx)(v.OOm,{align:"start",justify:"between",children:(0,k.jsxs)(v.OOm,{gap:"sm",align:"start",children:[(0,k.jsx)(d.A.Title,{level:5,style:{marginTop:0},children:t.title}),t.titleExtra&&(0,k.jsx)("div",{children:t.titleExtra})]})}),(0,k.jsx)(O.A,{style:{marginTop:0,marginBottom:0}}),t.description&&(0,k.jsx)(d.A.Text,{type:"secondary",style:{marginTop:o.marginSM},children:t.description})]}),(0,k.jsxs)(v.OOm,{direction:"column",align:"stretch",gap:"lg",children:[t.alert,t.settingItems.map(((e,t)=>(0,k.jsx)(S,(0,i.A)({},e),e.title+t)))]})]}))},B=e=>{const t=(0,r.c)(97),{settingGroups:s,tabDirection:n,showChangedOptionFilter:l,showResetButton:o,showSearchBar:a,primaryButton:u,extraButton:d,onReset:g}=e,p=void 0===n?"left":n,{t:m}=(0,R.Bd)(),{styles:b}=U(),[y,j]=(0,_.useState)(""),[A,S]=(0,_.useState)(!1),[O,I]=(0,c.A)(!1),{toggle:D}=I,[B,L]=(0,_.useState)("all");let W;t[0]!==y?(W=e=>e.title.toLowerCase().includes(y.toLowerCase())||"string"===typeof e.description&&e.description.toLowerCase().includes(y.toLowerCase()),t[0]=y,t[1]=W):W=t[1];const z=W,X=q;let H,K,Y,J,Q,Z,$,ee,te,se,ne,ie,le,oe,re,ae,ce,ue,de,ge,pe,he,me,xe;if(t[2]!==B||t[3]!==A||t[4]!==d||t[5]!==u||t[6]!==y||t[7]!==z||t[8]!==D||t[9]!==s||t[10]!==l||t[11]!==o||t[12]!==a||t[13]!==b.TabStyles||t[14]!==m||t[15]!==p){let e;t[28]!==A||t[29]!==z?(e=e=>(0,i.A)((0,i.A)({},e),{},{settingItems:f().filter(e.settingItems,(e=>(!A||X(e))&&z(e)))}),t[28]=A,t[29]=z,t[30]=e):e=t[30];const n=f().map(s,e);let r,c,g,x,_;K=v.OOm,Y="column",J="md",Q="stretch",t[31]!==y||t[32]!==a||t[33]!==m?(r=!!a&&(0,k.jsx)(C.A,{prefix:(0,k.jsx)(w.A,{}),placeholder:m("settings.SearchPlaceholder"),onChange:e=>j(e.target.value),value:y}),t[31]=y,t[32]=a,t[33]=m,t[34]=r):r=t[34],t[35]!==l||t[36]!==m?(c=!!l&&(0,k.jsx)(h.A,{onChange:e=>S(e.target.checked),style:{whiteSpace:"nowrap"},children:m("settings.ShowOnlyChanged")}),t[35]=l,t[36]=m,t[37]=c):c=t[37],t[38]!==D||t[39]!==o||t[40]!==m?(g=!!o&&(0,k.jsx)(v.Fvl,{danger:!0,icon:(0,k.jsx)(P.A,{}),onClick:()=>D(),children:m("button.Reset")}),t[38]=D,t[39]=o,t[40]=m,t[41]=g):g=t[41],t[42]!==d||t[43]!==u||t[44]!==r||t[45]!==c||t[46]!==g?(Z=(0,k.jsxs)(v.OOm,{justify:"start",gap:"xs",children:[r,c,d,g,u]}),t[42]=d,t[43]=u,t[44]=r,t[45]=c,t[46]=g,t[47]=Z):Z=t[47],H=T.A,$=B,ee=L,te=b.TabStyles,se=p?"start":"top",t[48]===Symbol.for("react.memo_cache_sentinel")?(ne={minWidth:200},t[48]=ne):ne=t[48],t[49]!==m?(x=m("general.All"),t[49]=m,t[50]=x):x=t[50],t[51]!==D||t[52]!==m?(_=(e,t)=>({key:"index".concat(t),label:(0,k.jsx)(E,{title:e.title,count:e.settingItems.length}),children:(0,k.jsx)(v.OOm,{direction:"column",align:"stretch",gap:"xl",children:e.settingItems.length>0?(0,k.jsx)(M,{group:e,hideEmpty:!0,onReset:()=>{D()}}):(0,k.jsx)(F.A,{image:F.A.PRESENTED_IMAGE_SIMPLE,description:m("settings.NoChangesToDisplay")})})}),t[51]=D,t[52]=m,t[53]=_):_=t[53],ie=[{key:"all",label:(0,k.jsx)(E,{title:x,count:f().sumBy(n,G)}),children:(0,k.jsx)(v.OOm,{direction:"column",align:"stretch",gap:"xl",children:f().sumBy(n,N)>0?f().map(n,(e=>(0,k.jsx)(M,{"data-testid":null===e||void 0===e?void 0:e["data-testid"],group:e,hideEmpty:!0,onReset:()=>{D()}},e.title))):(0,k.jsx)(F.A,{image:F.A.PRESENTED_IMAGE_SIMPLE,description:m("settings.NoChangesToDisplay")})})},...f().map(n,_)],t[2]=B,t[3]=A,t[4]=d,t[5]=u,t[6]=y,t[7]=z,t[8]=D,t[9]=s,t[10]=l,t[11]=o,t[12]=a,t[13]=b.TabStyles,t[14]=m,t[15]=p,t[16]=H,t[17]=K,t[18]=Y,t[19]=J,t[20]=Q,t[21]=Z,t[22]=$,t[23]=ee,t[24]=te,t[25]=se,t[26]=ne,t[27]=ie}else H=t[16],K=t[17],Y=t[18],J=t[19],Q=t[20],Z=t[21],$=t[22],ee=t[23],te=t[24],se=t[25],ne=t[26],ie=t[27];return t[54]!==H||t[55]!==$||t[56]!==ee||t[57]!==te||t[58]!==se||t[59]!==ne||t[60]!==ie?(le=(0,k.jsx)(H,{activeKey:$,onChange:ee,className:te,tabPlacement:se,tabBarStyle:ne,items:ie}),t[54]=H,t[55]=$,t[56]=ee,t[57]=te,t[58]=se,t[59]=ne,t[60]=ie,t[61]=le):le=t[61],t[62]!==K||t[63]!==Y||t[64]!==J||t[65]!==Q||t[66]!==Z||t[67]!==le?(oe=(0,k.jsxs)(K,{direction:Y,gap:J,align:Q,children:[Z,le]}),t[62]=K,t[63]=Y,t[64]=J,t[65]=Q,t[66]=Z,t[67]=le,t[68]=oe):oe=t[68],t[69]!==m?(re=m("dialog.ask.DoYouWantToResetChanges"),t[69]=m,t[70]=re):re=t[70],t[71]!==m?(ae=m("button.Reset"),t[71]=m,t[72]=ae):ae=t[72],t[73]===Symbol.for("react.memo_cache_sentinel")?(ce={danger:!0},t[73]=ce):ce=t[73],t[74]!==g||t[75]!==D||t[76]!==s?(ue=()=>{g?g():V(s),D()},t[74]=g,t[75]=D,t[76]=s,t[77]=ue):ue=t[77],t[78]!==m?(de=m("button.Cancel"),t[78]=m,t[79]=de):de=t[79],t[80]!==D?(ge=()=>D(),t[80]=D,t[81]=ge):ge=t[81],t[82]!==m?(pe=m("dialog.warning.CannotBeUndone"),t[82]=m,t[83]=pe):pe=t[83],t[84]!==pe?(he=(0,k.jsx)(x.A,{showIcon:!0,title:pe,type:"warning"}),t[84]=pe,t[85]=he):he=t[85],t[86]!==O||t[87]!==re||t[88]!==ae||t[89]!==ue||t[90]!==de||t[91]!==ge||t[92]!==he?(me=(0,k.jsx)(v.IbE,{open:O,title:re,okText:ae,okButtonProps:ce,onOk:ue,cancelText:de,onCancel:ge,children:he}),t[86]=O,t[87]=re,t[88]=ae,t[89]=ue,t[90]=de,t[91]=ge,t[92]=he,t[93]=me):me=t[93],t[94]!==oe||t[95]!==me?(xe=(0,k.jsxs)(k.Fragment,{children:[oe,me]}),t[94]=oe,t[95]=me,t[96]=xe):xe=t[96],xe},V=e=>{f().flatMap(e,(e=>e.settingItems)).forEach((e=>{var t,s,n;e.onReset?e.onReset():(null===e||void 0===e||null===(t=e.selectProps)||void 0===t||!t.disabled)&&(null===e||void 0===e||null===(s=e.checkboxProps)||void 0===s||!s.disabled)&&(null===e||void 0===e||null===(n=e.onChange)||void 0===n||n.call(e,e.defaultValue))}))};function q(e){var t,s;return!(null===e.value||void 0===e.value||null!==e&&void 0!==e&&null!==(t=e.selectProps)&&void 0!==t&&t.disabled||null!==e&&void 0!==e&&null!==(s=e.checkboxProps)&&void 0!==s&&s.disabled)&&e.value!==e.defaultValue}function G(e){return e.settingItems.length}function N(e){return e.settingItems.length}},57009:(e,t,s)=>{s.r(t),s.d(t,{default:()=>D});var n=s(56276),i=s(37138),l=s(63590),o=s(9170),r=s(36961),a=s(66203),c=s(72927),u=s(96922),d=s(7265),g=s(29262),p=s(99118),h=s(26862);const m=e=>{let{onRequestClose:t,open:s}=e;const{t:n}=(0,p.Bd)(),{message:m}=r.A.useApp(),x=(0,g.useRef)(null),[b,v]=(0,g.useState)(!1),y=(0,i.CX)(),{isFetching:j}=(0,l.nN)({queryKey:["mtu"],queryFn:async()=>{var e;const{result:t}=await y.setting.get("network/overlay/mtu");return null===(e=x.current)||void 0===e||e.setFieldsValue({mtu:t,mtu_checkbox:null===t||void 0===t||""===t}),t},enabled:s});return(0,h.jsx)(d.IbE,{open:s,title:(0,h.jsxs)(d.OOm,{gap:"xxs",children:[n("settings.OverlayNetworkSettings"),(0,h.jsx)(o.A,{title:n("settings.OverlayNetworkSettingsDescription")})]}),onCancel:t,confirmLoading:b,centered:!0,width:"auto",okText:n("button.Save"),onOk:()=>{x.current&&x.current.validateFields().then((async e=>{try{if(e.mtu_checkbox){v(!0);const{result:e}=await y.setting.delete("network/overlay/mtu",!0);if("ok"!==e)throw new Error;m.success(n("notification.SuccessfullyUpdated")),t()}else{v(!0);const{result:s}=await y.setting.set("network/overlay/mtu",e.mtu);if("ok"!==s)throw new Error;m.success(n("notification.SuccessfullyUpdated")),t()}}catch(i){var s;m.error(null!==(s=null===i||void 0===i?void 0:i.message)&&void 0!==s?s:n("settings.FailedToSaveSettings"))}finally{v(!1)}})).catch((()=>{}))},cancelText:n("button.Cancel"),destroyOnHidden:!0,children:(0,h.jsx)(a.A,{ref:x,layout:"vertical",children:(0,h.jsx)(a.A.Item,{label:"MTU",tooltip:n("settings.MTUDescription"),required:!0,children:(0,h.jsxs)(d.OOm,{gap:"sm",align:"center",children:[(0,h.jsx)(a.A.Item,{noStyle:!0,dependencies:["mtu_checkbox"],children:()=>{var e;return(0,h.jsx)(a.A.Item,{noStyle:!0,name:"mtu",rules:[{validator:(e,t)=>{var s;return!0===(null===(s=x.current)||void 0===s?void 0:s.getFieldValue("mtu_checkbox"))?Promise.resolve():void 0===t||null===t?Promise.reject(n("data.explorer.ValueRequired")):Promise.resolve()}}],children:(0,h.jsx)(c.A,{style:{flex:1},min:0,max:15e3,disabled:!0===(null===(e=x.current)||void 0===e?void 0:e.getFieldValue("mtu_checkbox"))||j})})}}),(0,h.jsx)(a.A.Item,{noStyle:!0,name:"mtu_checkbox",valuePropName:"checked",children:(0,h.jsx)(u.A,{disabled:j,onChange:e=>{var t;e.target.checked&&(null===(t=x.current)||void 0===t||t.setFieldsValue({mtu:null}))},children:n("settings.Unset")})})]})})})})};var x=s(87272),b=s(69319),v=s(29268),y=s(53011);const j=e=>{let{onRequestClose:t,open:s}=e;const{t:n}=(0,p.Bd)(),[l,u]=(0,g.useState)(!1),[m,j]=(0,g.useState)(!1),f=(0,g.useRef)(null),{token:_}=x.A.useToken(),k=(0,i.CX)(),{message:A}=r.A.useApp();return(0,h.jsx)(d.IbE,{title:(0,h.jsxs)(d.OOm,{align:"center",gap:"xxs",children:[n("settings.ConfigPerJobSchduler"),(0,h.jsx)(o.A,{title:n("settings.ConfigPerJobSchdulerDescription")})]}),confirmLoading:l,open:s,centered:!0,width:"auto",onCancel:t,onOk:()=>{f.current&&f.current.validateFields().then((async e=>{const s=e.schedulerType,i=e.num_retries_to_skip;try{if(e.num_retries_to_skip_checkbox){u(!0);const{result:e}=await k.setting.delete("plugins/scheduler/".concat(s,"/num_retries_to_skip"),!0);if("ok"!==e)throw new Error;A.success(n("notification.SuccessfullyUpdated")),t()}else{if("fifo"!==s&&"0"!==i)throw new Error(n("settings.FifoOnly"));u(!0);const{result:e}=await k.setting.set("plugins/scheduler/".concat(s,"/num_retries_to_skip"),i);if("ok"!==e)throw new Error;A.success(n("notification.SuccessfullyUpdated")),t()}}catch(o){var l;A.error(null!==(l=null===o||void 0===o?void 0:o.message)&&void 0!==l?l:n("settings.FailedToSaveSettings"))}finally{u(!1)}})).catch((()=>{}))},cancelText:n("button.Cancel"),okText:n("button.Save"),okButtonProps:{type:"primary"},destroyOnHidden:!0,children:(0,h.jsxs)(a.A,{ref:f,layout:"vertical",children:[(0,h.jsx)(a.A.Item,{label:n("settings.Scheduler"),name:"schedulerType",required:!0,rules:[{required:!0,message:n("settings.SchedulerRequired")}],extra:(0,h.jsx)(b.A.Text,{type:"secondary",style:{fontSize:_.fontSizeSM},children:n("settings.SchedulerSelectComment")}),children:(0,h.jsx)(v.A,{loading:m,popupMatchSelectWidth:!1,onChange:e=>{null!==e&&(j(!0),k.setting.get("plugins/scheduler/".concat(e,"/num_retries_to_skip")).then((e=>{var t;null===(t=f.current)||void 0===t||t.setFieldsValue({num_retries_to_skip:e.result,num_retries_to_skip_checkbox:null===e.result})})).finally((()=>{j(!1)})))},options:[{label:"FIFO",value:"fifo"},{label:"LIFO",value:"lifo"},{label:"DRF",value:"drf"}]})}),(0,h.jsxs)(d.OOm,{direction:"column",align:"start",style:{width:"100%"},children:[(0,h.jsx)(b.A.Text,{strong:!0,children:n("settings.SchedulerOptions")}),(0,h.jsx)(a.A.Item,{label:n("settings.SessionCreationRetries"),required:!0,style:{width:"100%"},children:(0,h.jsxs)(d.OOm,{gap:"sm",align:"center",style:{width:"100%"},children:[(0,h.jsx)(a.A.Item,{noStyle:!0,dependencies:["schedulerType","num_retries_to_skip_checkbox"],style:{width:"100%"},children:()=>{var e,t;return(0,h.jsx)(a.A.Item,{noStyle:!0,name:"num_retries_to_skip",rules:[{validator:(e,t)=>{var s;return!0===(null===(s=f.current)||void 0===s?void 0:s.getFieldValue("num_retries_to_skip_checkbox"))?Promise.resolve():void 0===t||null===t?Promise.reject(n("data.explorer.ValueRequired")):Promise.resolve()}}],children:(0,h.jsx)(c.A,{min:0,max:1e3,disabled:!0===(null===(e=f.current)||void 0===e?void 0:e.getFieldValue("num_retries_to_skip_checkbox"))||void 0===(null===(t=f.current)||void 0===t?void 0:t.getFieldValue("schedulerType"))||m,style:{flex:1}})})}}),(0,h.jsx)(a.A.Item,{noStyle:!0,dependencies:["schedulerType"],children:()=>{var e;return(0,h.jsx)(a.A.Item,{noStyle:!0,name:"num_retries_to_skip_checkbox",valuePropName:"checked",children:(0,h.jsx)(y.A,{disabled:void 0===(null===(e=f.current)||void 0===e?void 0:e.getFieldValue("schedulerType"))||m,onChange:e=>{var t;e.target.checked&&(null===(t=f.current)||void 0===t||t.setFieldsValue({num_retries_to_skip:null}))},children:n("settings.Unset")})})}})]})})]})]})})};var f=s(31803),_=s(76184),k=s(80391),A=s(37717),S=s(52251);const w={image_pulling_behavior:"digest",cuda_gpu:!1,cuda_fgpu:!1,rocm_gpu:!1,tpu:!1,ipu:!1,atom:!1,atom_plus:!1,atom_max:!1,gaudi2:!1,warboy:!1,rngd:!1,hyperaccel_lpu:!1,schedulerType:"fifo",scheduler:{num_retries_to_skip:"0"},network:{mtu:""}},P={"cuda.device":"cuda_gpu","cuda.shares":"cuda_fgpu","rocm.device":"rocm_gpu","tpu.device":"tpu","ipu.device":"ipu","atom.device":"atom","atom-plus.device":"atom_plus","atom-max.device":"atom_max","warboy.device":"warboy","rngd.device":"rngd","hyperaccel-lpu.device":"hyperaccel_lpu"},O=()=>{const{t:e}=(0,p.Bd)(),[t,{toggle:s}]=(0,k.A)(!1),[l,{toggle:o}]=(0,k.A)(!1),[a,c]=(0,g.useState)((0,n.A)({},w)),u=(0,i.CX)(),{message:d}=r.A.useApp(),x=async()=>{const{result:e}=await u.setting.get("docker/image/auto_pull");c(null===e||"digest"===e?e=>(0,n.A)((0,n.A)({},e),{},{image_pulling_behavior:"digest"}):"tag"===e?e=>(0,n.A)((0,n.A)({},e),{},{image_pulling_behavior:"tag"}):e=>(0,n.A)((0,n.A)({},e),{},{image_pulling_behavior:"none"}))};(0,g.useEffect)((()=>{Promise.all([x(),u.get_resource_slots().then((e=>{c((t=>(0,n.A)((0,n.A)({},t),Object.fromEntries(Object.keys(P).map((t=>[P[t],t in e]))))))}))])}),[]);const b=[{"data-testid":"settings-general",title:e("settings.General"),settingItems:[{type:"select",title:e("settings.ImagePullBehavior"),description:e("settings.DescImagePullBehavior"),selectProps:{options:[{label:e("settings.image.Digest"),value:"digest"},{label:e("settings.image.Tag"),value:"tag"},{label:e("settings.image.None"),value:"none"}]},defaultValue:w.image_pulling_behavior,value:a.image_pulling_behavior,onChange:t=>(async t=>{if(t!==a.image_pulling_behavior)try{const{result:s}=await u.setting.set("docker/image/auto_pull",t);"ok"===s?(x(),d.success(e("notification.SuccessfullyUpdated"))):d.error(e("settings.FailedToSaveSettings"))}catch(s){d.error(e("settings.FailedToSaveSettings"))}})(t)},{type:"custom",title:e("settings.OverlayNetwork"),description:e("settings.OverlayNetworkConfiguration"),children:(0,h.jsx)(A.Ay,{icon:(0,h.jsx)(_.A,{}),onClick:s,children:e("settings.Config")}),showResetButton:!1},{type:"custom",title:e("settings.Scheduler"),description:e("settings.SchedulerConfiguration"),children:(0,h.jsx)(A.Ay,{icon:(0,h.jsx)(_.A,{}),onClick:o,children:e("settings.Config")}),showResetButton:!1}]},{"data-testid":"settings-plugins",title:e("settings.Plugins"),description:(0,h.jsx)(S.A,{title:e("settings.NoteAboutFixedSetup"),type:"info",showIcon:!0}),settingItems:[{type:"checkbox",title:e("settings.OpenSourceCudaGPUSupport"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescCudaGPUSupport")," ",a.cuda_fgpu&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("br",{}),e("settings.CUDAGPUdisabledByFGPUsupport")]})]}),value:a.cuda_gpu,defaultValue:w.cuda_gpu,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.ROCMGPUSupport"),description:e("settings.DescRocmGPUSupport"),value:a.rocm_gpu,defaultValue:w.rocm_gpu,checkboxProps:{disabled:!0}}]},{"data-testid":"settings-enterprise",title:e("settings.EnterpriseFeatures"),description:(0,h.jsx)(S.A,{title:e("settings.NoteAboutFixedSetup"),type:"info",showIcon:!0}),settingItems:[{type:"checkbox",title:e("settings.FractionalGPU"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescFractionalGPU"),(0,h.jsx)("br",{}),e("settings.RequireFGPUPlugin")]}),value:a.cuda_fgpu,defaultValue:w.cuda_fgpu,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.TPU"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescTPU"),(0,h.jsx)("br",{}),e("settings.RequireTPUPlugin")]}),value:a.tpu,defaultValue:w.tpu,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.IPUSupport"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescIPUSupport"),(0,h.jsx)("br",{}),e("settings.RequireTPUPlugin")]}),value:a.ipu,defaultValue:w.ipu,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.ATOMSupport"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescATOMSupport"),(0,h.jsx)("br",{}),e("settings.RequireATOMPlugin")]}),value:a.atom,defaultValue:w.atom,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.ATOMPlusSupport"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescATOMPlusSupport"),(0,h.jsx)("br",{}),e("settings.RequireATOMPlusPlugin")]}),value:a.atom_plus,defaultValue:w.atom_plus,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.ATOMMaxSupport"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescATOMMaxSupport"),(0,h.jsx)("br",{}),e("settings.RequireATOMMaxPlugin")]}),value:a.atom_max,defaultValue:w.atom_max,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.Gaudi2Support"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescGaudi2Support"),(0,h.jsx)("br",{}),e("settings.RequireGaudi2Plugin")]}),value:a.gaudi2,defaultValue:w.gaudi2,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.WarboySupport"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescWarboySupport"),(0,h.jsx)("br",{}),e("settings.RequireWarboyPlugin")]}),value:a.warboy,defaultValue:w.warboy,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.RNGDSupport"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescRNGDSupport"),(0,h.jsx)("br",{}),e("settings.RequireRNGDPlugin")]}),value:a.rngd,defaultValue:w.rngd,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.HyperaccelLPUSupport"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescHyperaccelLPUSupport"),(0,h.jsx)("br",{}),e("settings.RequireHyperaccelLPUPlugin")]}),value:a.hyperaccel_lpu,defaultValue:w.hyperaccel_lpu,checkboxProps:{disabled:!0}}]}];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(f.A,{settingGroups:b,showSearchBar:!0,showChangedOptionFilter:!0}),(0,h.jsx)(m,{onRequestClose:s,open:t}),(0,h.jsx)(j,{onRequestClose:o,open:l})]})};var C=s(59005),T=s(39648),F=s(85105),R=s(31495);const I=(0,R.withDefault)(R.StringParam,"configurations"),D=()=>{const{t:e}=(0,p.Bd)(),[t,s]=(0,R.useQueryParam)("tab",I);return(0,h.jsx)(C.A,{activeTabKey:t,onTabChange:e=>s(e),tabList:(0,d.YM3)([{key:"configurations",tab:e("webui.menu.Configurations")}]),children:(0,h.jsx)(g.Suspense,{fallback:(0,h.jsx)(T.A,{active:!0}),children:"configurations"===t&&(0,h.jsx)(F.A,{children:(0,h.jsx)(O,{})})})})}}}]);
//# sourceMappingURL=7009.7692daa5.chunk.js.map