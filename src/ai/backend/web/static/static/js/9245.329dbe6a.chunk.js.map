{"version":3,"file":"static/js/9245.329dbe6a.chunk.js","mappings":"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","sources":["components/DatePickerISO.tsx","components/HiddenFormItem.tsx","components/PortSelectFormItem.tsx","__generated__/useStartSessionCreationQuery.graphql.ts","hooks/useStartSession.tsx","__generated__/useValidateSessionNameQuery.graphql.ts","hooks/useValidateSessionName.tsx","components/SessionLauncherErrorTourProps.tsx","components/SessionLauncherFormIncompatibleValueChecker.tsx","__generated__/SessionOwnerSetterCardQuery.graphql.ts","components/SessionOwnerSetterCard.tsx","components/SessionLauncherPreview.tsx","components/SessionNameFormItem.tsx","hooks/useRecentSessionHistory.tsx","components/SessionTemplateModal.tsx","pages/SessionLauncherPage.tsx"],"sourcesContent":["import { useControllableValue } from 'ahooks';\nimport { DatePicker } from 'antd';\nimport { PickerProps } from 'antd/es/date-picker/generatePicker';\nimport { GetRef } from 'antd/lib';\nimport dayjs, { Dayjs } from 'dayjs';\nimport _ from 'lodash';\nimport React from 'react';\n\nexport interface DatePickerISOProps\n  extends Omit<PickerProps<Dayjs>, 'value' | 'onChange'> {\n  value?: string | undefined | null;\n  onChange?: (value: string | undefined) => void;\n  localFormat?: boolean;\n}\nconst DatePickerISO = React.forwardRef<\n  GetRef<typeof DatePicker>,\n  DatePickerISOProps\n>(({ value, onChange, localFormat, ...pickerProps }, ref) => {\n  const [, setControllableValue] = useControllableValue({\n    value,\n    onChange,\n  });\n\n  return (\n    <DatePicker\n      ref={ref}\n      value={value ? dayjs(value) : undefined}\n      onChange={(value) => {\n        if (_.isArray(value)) {\n          value = value[0];\n        }\n        const newValue = localFormat\n          ? value?.format()\n          : value?.tz()?.toISOString();\n        // \"2023-11-10T18:09:56+08:00\"\n        setControllableValue(newValue);\n      }}\n      {...pickerProps}\n    />\n  );\n});\n\nDatePickerISO.displayName = 'DatePickerISO';\nexport default DatePickerISO;\n","import { Form, FormItemProps } from 'antd';\nimport React, { useEffect } from 'react';\n\ninterface HiddenFormItemProps extends Omit<FormItemProps, 'children'> {\n  value: any;\n}\nconst HiddenFormItem: React.FC<HiddenFormItemProps> = ({ value, ...props }) => {\n  const form = Form.useFormInstance();\n  useEffect(() => {\n    form.setFieldValue(props.name, value);\n  }, [value, form, props.name]);\n  return (\n    <Form.Item {...props} hidden>\n      <div />\n    </Form.Item>\n  );\n};\n\nexport default HiddenFormItem;\n","import { useSuspendedBackendaiClient } from '../hooks';\nimport { Form, FormItemProps, Select, Tag } from 'antd';\nimport { TagProps } from 'antd/lib';\nimport _ from 'lodash';\nimport React from 'react';\nimport { Trans, useTranslation } from 'react-i18next';\n\ninterface Props extends FormItemProps {}\n\nexport interface PortSelectFormValues {\n  ports: string[];\n}\n\nconst MIN_PORT = 1024;\nconst MAX_PORT = 65535;\nconst PortSelectFormItem: React.FC<Props> = ({\n  name = 'ports',\n  ...formItemProps\n}) => {\n  const { t } = useTranslation();\n  const baiClient = useSuspendedBackendaiClient();\n  const form = Form.useFormInstance();\n  return (\n    <Form.Item\n      label={t('session.launcher.PreOpenPortTitle')}\n      name={name}\n      tooltip={<Trans i18nKey=\"session.launcher.DescSetPreOpenPort\" />}\n      extra={t('session.launcher.PreOpenPortRangeGuide')}\n      rules={[\n        () => ({\n          validator(_rule, values) {\n            if (\n              transformPortValuesToNumbers(values).length <=\n              baiClient._config.maxCountForPreopenPorts\n            ) {\n              return Promise.resolve();\n            } else {\n              return Promise.reject(\n                new Error(\n                  t('session.launcher.PreOpenPortMaxCountLimit', {\n                    count: baiClient._config.maxCountForPreopenPorts,\n                  }),\n                ),\n              );\n            }\n          },\n        }),\n        () => ({\n          // To check if the port range is not start <= end\n          validator(_rule, values) {\n            if (\n              _.every(values, (v) => {\n                return parseInt(v).toString() === v || isPortRangeStr(v);\n              })\n            ) {\n              return Promise.resolve();\n            } else {\n              return Promise.reject(\n                new Error(t('session.launcher.InvalidPortFormat')),\n              );\n            }\n          },\n        }),\n        () => ({\n          validator(_rule, values) {\n            const allPorts = transformPortValuesToNumbers(values);\n            if (\n              _.every(allPorts, (port) => {\n                return port >= MIN_PORT && port <= MAX_PORT;\n              })\n            ) {\n              return Promise.resolve();\n            }\n            return Promise.reject(\n              new Error(t('session.launcher.PreOpenPortRange')),\n            );\n          },\n        }),\n        () => ({\n          validator(_rule, values) {\n            // To check if the port is duplicated\n            const allPorts = transformPortValuesToNumbers(values);\n            if (_.uniq(allPorts).length === allPorts.length) {\n              return Promise.resolve();\n            }\n            return Promise.reject(\n              new Error(t('session.launcher.DuplicatedPort')),\n            );\n          },\n        }),\n      ]}\n      {...formItemProps}\n    >\n      <Select\n        mode=\"tags\"\n        tagRender={(props) => {\n          const hasDuplicated =\n            _.filter(\n              transformPortValuesToNumbers(form.getFieldValue(name)),\n              (v) => v === parseInt(props.value),\n            ).length > 1;\n          return (\n            <PortTag\n              inValid={hasDuplicated}\n              closable={props.closable}\n              onClose={props.onClose}\n              onMouseDown={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n              }}\n              value={props.value}\n            >\n              {props.label}\n            </PortTag>\n          );\n        }}\n        style={{ width: '100%' }}\n        // placeholder={t('session.launcher.PreOpen')}\n        // options={_.map(portGuides, (v, k) => ({\n        //   value: parseInt(k),\n        //   // label: `${k} - ${v}`,\n        // }))}\n        suffixIcon={null}\n        open={false}\n        tokenSeparators={[',', ' ']}\n      />\n    </Form.Item>\n  );\n};\n\ninterface PortTagProps extends TagProps {\n  value: string;\n  inValid?: boolean;\n}\n\nexport const PortTag: React.FC<PortTagProps> = ({\n  inValid,\n  value,\n  ...tagProps\n}) => {\n  return (\n    <Tag\n      color={!inValid && isValidPortStr(value) ? undefined : 'red'}\n      {...tagProps}\n    />\n  );\n};\n\nexport const isValidPortStr = (portStr: string) => {\n  // consider range as valid\n  if (isPortRangeStr(portStr)) {\n    const splitPortRange = portStr.split(':');\n    const [start, end] = splitPortRange.map((v) => parseInt(v));\n    return start >= MIN_PORT && end <= MAX_PORT;\n  } else if (\n    portStr === parseInt(portStr).toString() &&\n    parseInt(portStr) >= MIN_PORT &&\n    parseInt(portStr) <= MAX_PORT\n  ) {\n    return true;\n  }\n  return false;\n};\n\nexport const isPortRangeStr = (portRange: string) => {\n  const splitPortRange = portRange.split(':');\n  if (splitPortRange.length === 2) {\n    const [start, end] = splitPortRange.map((v) => parseInt(v));\n    return start <= end;\n  }\n  return false;\n};\n\nexport const parsePortRangeToNumbers = (portRange: string) => {\n  const [start, end] = portRange.split(':').map((v) => parseInt(v));\n  return _.range(start, end + 1);\n};\n\nexport const transformPortValuesToNumbers = (\n  values: PortSelectFormValues['ports'],\n) => {\n  return _.flatten(\n    _.map(values, (v) =>\n      isPortRangeStr(v) ? parsePortRangeToNumbers(v) : parseInt(v),\n    ),\n  );\n};\n// const portGuides = {\n//   '5432': 'PostgreSQL',\n//   '3306': 'MySQL',\n//   '1521': 'Oracle',\n//   '27017': 'MongoDB',\n//   '6379': 'Redis',\n//   '11211': 'Memcached',\n//   '9200': 'Elasticsearch',\n//   '5601': 'Kibana',\n//   '9600': 'Logstash',\n//   '9042': 'Cassandra',\n//   '2181': 'Zookeeper',\n//   '9092': 'Kafka',\n//   '80': 'HTTP',\n//   '443': 'HTTPS',\n//   '22': 'SSH',\n//   '21': 'FTP',\n//   '25': 'SMTP',\n//   '110': 'POP3',\n//   '143': 'IMAP',\n//   '53': 'DNS',\n//   '389': 'LDAP',\n//   '636': 'LDAPS',\n//   '8080': 'HTTP Alt',\n//   '8443': 'HTTP Alt SSL',\n//   '465': 'SMTP SSL',\n//   '587': 'SMTP TLS',\n//   '993': 'IMAP SSL',\n//   '995': 'POP3 SSL',\n//   '7001': 'WebLogic',\n//   '7002': 'WebLogic SSL',\n//   '4848': 'GlassFish',\n//   '8181': 'GlassFish SSL',\n//   '8081': 'Nginx',\n// };\n\nexport default PortSelectFormItem;\n","/**\n * @generated SignedSource<<539c8afda6eb284d14c1384fe4ffe126>>\n * @lightSyntaxTransform\n * @nogrep\n */\n\n/* tslint:disable */\n/* eslint-disable */\n// @ts-nocheck\n\nimport { ConcreteRequest } from 'relay-runtime';\nimport { FragmentRefs } from \"relay-runtime\";\nexport type useStartSessionCreationQuery$variables = {\n  id: any;\n};\nexport type useStartSessionCreationQuery$data = {\n  readonly compute_session_node: {\n    readonly \" $fragmentSpreads\": FragmentRefs<\"BAINodeNotificationItemFragment\">;\n  } | null | undefined;\n};\nexport type useStartSessionCreationQuery = {\n  response: useStartSessionCreationQuery$data;\n  variables: useStartSessionCreationQuery$variables;\n};\n\nconst node: ConcreteRequest = (function(){\nvar v0 = [\n  {\n    \"defaultValue\": null,\n    \"kind\": \"LocalArgument\",\n    \"name\": \"id\"\n  }\n],\nv1 = [\n  {\n    \"kind\": \"Variable\",\n    \"name\": \"id\",\n    \"variableName\": \"id\"\n  }\n],\nv2 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"id\",\n  \"storageKey\": null\n},\nv3 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"__typename\",\n  \"storageKey\": null\n},\nv4 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"status\",\n  \"storageKey\": null\n},\nv5 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"row_id\",\n  \"storageKey\": null\n};\nreturn {\n  \"fragment\": {\n    \"argumentDefinitions\": (v0/*: any*/),\n    \"kind\": \"Fragment\",\n    \"metadata\": null,\n    \"name\": \"useStartSessionCreationQuery\",\n    \"selections\": [\n      {\n        \"alias\": null,\n        \"args\": (v1/*: any*/),\n        \"concreteType\": \"ComputeSessionNode\",\n        \"kind\": \"LinkedField\",\n        \"name\": \"compute_session_node\",\n        \"plural\": false,\n        \"selections\": [\n          {\n            \"args\": null,\n            \"kind\": \"FragmentSpread\",\n            \"name\": \"BAINodeNotificationItemFragment\"\n          }\n        ],\n        \"storageKey\": null\n      }\n    ],\n    \"type\": \"Query\",\n    \"abstractKey\": null\n  },\n  \"kind\": \"Request\",\n  \"operation\": {\n    \"argumentDefinitions\": (v0/*: any*/),\n    \"kind\": \"Operation\",\n    \"name\": \"useStartSessionCreationQuery\",\n    \"selections\": [\n      {\n        \"alias\": null,\n        \"args\": (v1/*: any*/),\n        \"concreteType\": \"ComputeSessionNode\",\n        \"kind\": \"LinkedField\",\n        \"name\": \"compute_session_node\",\n        \"plural\": false,\n        \"selections\": [\n          (v2/*: any*/),\n          {\n            \"kind\": \"InlineFragment\",\n            \"selections\": [\n              {\n                \"kind\": \"InlineFragment\",\n                \"selections\": [\n                  (v3/*: any*/),\n                  (v4/*: any*/),\n                  {\n                    \"alias\": null,\n                    \"args\": null,\n                    \"kind\": \"ScalarField\",\n                    \"name\": \"name\",\n                    \"storageKey\": null\n                  },\n                  (v5/*: any*/),\n                  {\n                    \"alias\": null,\n                    \"args\": null,\n                    \"kind\": \"ScalarField\",\n                    \"name\": \"type\",\n                    \"storageKey\": null\n                  },\n                  {\n                    \"alias\": null,\n                    \"args\": null,\n                    \"kind\": \"ScalarField\",\n                    \"name\": \"access_key\",\n                    \"storageKey\": null\n                  },\n                  {\n                    \"alias\": null,\n                    \"args\": null,\n                    \"kind\": \"ScalarField\",\n                    \"name\": \"service_ports\",\n                    \"storageKey\": null\n                  },\n                  {\n                    \"alias\": null,\n                    \"args\": null,\n                    \"kind\": \"ScalarField\",\n                    \"name\": \"commit_status\",\n                    \"storageKey\": null\n                  },\n                  {\n                    \"alias\": null,\n                    \"args\": null,\n                    \"kind\": \"ScalarField\",\n                    \"name\": \"user_id\",\n                    \"storageKey\": null\n                  },\n                  {\n                    \"alias\": null,\n                    \"args\": null,\n                    \"kind\": \"ScalarField\",\n                    \"name\": \"scaling_group\",\n                    \"storageKey\": null\n                  },\n                  {\n                    \"alias\": null,\n                    \"args\": null,\n                    \"concreteType\": \"KernelConnection\",\n                    \"kind\": \"LinkedField\",\n                    \"name\": \"kernel_nodes\",\n                    \"plural\": false,\n                    \"selections\": [\n                      {\n                        \"alias\": null,\n                        \"args\": null,\n                        \"concreteType\": \"KernelEdge\",\n                        \"kind\": \"LinkedField\",\n                        \"name\": \"edges\",\n                        \"plural\": true,\n                        \"selections\": [\n                          {\n                            \"alias\": null,\n                            \"args\": null,\n                            \"concreteType\": \"KernelNode\",\n                            \"kind\": \"LinkedField\",\n                            \"name\": \"node\",\n                            \"plural\": false,\n                            \"selections\": [\n                              {\n                                \"alias\": null,\n                                \"args\": null,\n                                \"kind\": \"ScalarField\",\n                                \"name\": \"container_id\",\n                                \"storageKey\": null\n                              },\n                              {\n                                \"alias\": null,\n                                \"args\": null,\n                                \"kind\": \"ScalarField\",\n                                \"name\": \"agent_id\",\n                                \"storageKey\": null\n                              },\n                              (v2/*: any*/),\n                              (v5/*: any*/),\n                              {\n                                \"alias\": null,\n                                \"args\": null,\n                                \"kind\": \"ScalarField\",\n                                \"name\": \"cluster_idx\",\n                                \"storageKey\": null\n                              },\n                              {\n                                \"alias\": null,\n                                \"args\": null,\n                                \"kind\": \"ScalarField\",\n                                \"name\": \"cluster_role\",\n                                \"storageKey\": null\n                              },\n                              {\n                                \"alias\": null,\n                                \"args\": null,\n                                \"kind\": \"ScalarField\",\n                                \"name\": \"cluster_hostname\",\n                                \"storageKey\": null\n                              }\n                            ],\n                            \"storageKey\": null\n                          }\n                        ],\n                        \"storageKey\": null\n                      }\n                    ],\n                    \"storageKey\": null\n                  },\n                  {\n                    \"alias\": null,\n                    \"args\": null,\n                    \"kind\": \"ScalarField\",\n                    \"name\": \"vfolder_mounts\",\n                    \"storageKey\": null\n                  },\n                  {\n                    \"alias\": null,\n                    \"args\": null,\n                    \"kind\": \"ScalarField\",\n                    \"name\": \"status_info\",\n                    \"storageKey\": null\n                  },\n                  {\n                    \"alias\": null,\n                    \"args\": null,\n                    \"kind\": \"ScalarField\",\n                    \"name\": \"status_data\",\n                    \"storageKey\": null\n                  },\n                  {\n                    \"alias\": null,\n                    \"args\": null,\n                    \"kind\": \"ScalarField\",\n                    \"name\": \"queue_position\",\n                    \"storageKey\": null\n                  }\n                ],\n                \"type\": \"ComputeSessionNode\",\n                \"abstractKey\": null\n              },\n              {\n                \"kind\": \"InlineFragment\",\n                \"selections\": [\n                  (v3/*: any*/),\n                  (v4/*: any*/)\n                ],\n                \"type\": \"VirtualFolderNode\",\n                \"abstractKey\": null\n              }\n            ],\n            \"type\": \"Node\",\n            \"abstractKey\": \"__isNode\"\n          }\n        ],\n        \"storageKey\": null\n      }\n    ]\n  },\n  \"params\": {\n    \"cacheID\": \"59d5f45d474680eabf0b7bad4126c41b\",\n    \"id\": null,\n    \"metadata\": {},\n    \"name\": \"useStartSessionCreationQuery\",\n    \"operationKind\": \"query\",\n    \"text\": \"query useStartSessionCreationQuery(\\n  $id: GlobalIDField!\\n) {\\n  compute_session_node(id: $id) {\\n    ...BAINodeNotificationItemFragment\\n    id\\n  }\\n}\\n\\nfragment AppLauncherModalFragment on ComputeSessionNode {\\n  id\\n  row_id\\n  name\\n  service_ports\\n  access_key\\n}\\n\\nfragment BAIComputeSessionNodeNotificationItemFragment on ComputeSessionNode {\\n  row_id\\n  id\\n  name\\n  status\\n  ...SessionActionButtonsFragment\\n  ...SessionStatusTagFragment\\n}\\n\\nfragment BAINodeNotificationItemFragment on Node {\\n  __isNode: __typename\\n  ... on ComputeSessionNode {\\n    __typename\\n    status\\n    name\\n    row_id\\n    ...BAIComputeSessionNodeNotificationItemFragment\\n  }\\n  ... on VirtualFolderNode {\\n    __typename\\n    status\\n  }\\n  id\\n}\\n\\nfragment ContainerCommitModalFragment on ComputeSessionNode {\\n  id\\n  name\\n  row_id\\n}\\n\\nfragment ContainerLogModalFragment on ComputeSessionNode {\\n  id\\n  row_id\\n  name\\n  status\\n  access_key\\n  kernel_nodes {\\n    edges {\\n      node {\\n        id\\n        row_id\\n        container_id\\n        cluster_idx\\n        cluster_role\\n        cluster_hostname\\n      }\\n    }\\n  }\\n}\\n\\nfragment SFTPConnectionInfoModalFragment on ComputeSessionNode {\\n  row_id\\n  vfolder_mounts\\n}\\n\\nfragment SessionActionButtonsFragment on ComputeSessionNode {\\n  id\\n  row_id\\n  type\\n  status\\n  access_key\\n  service_ports\\n  commit_status\\n  user_id\\n  ...TerminateSessionModalFragment\\n  ...ContainerLogModalFragment\\n  ...ContainerCommitModalFragment\\n  ...AppLauncherModalFragment\\n  ...SFTPConnectionInfoModalFragment\\n  ...useBackendAIAppLauncherFragment\\n}\\n\\nfragment SessionStatusTagFragment on ComputeSessionNode {\\n  id\\n  status\\n  status_info\\n  status_data\\n  queue_position @since(version: \\\"25.13.0\\\")\\n}\\n\\nfragment TerminateSessionModalFragment on ComputeSessionNode {\\n  id\\n  row_id\\n  name\\n  scaling_group\\n  access_key\\n  kernel_nodes {\\n    edges {\\n      node {\\n        container_id\\n        agent_id\\n        id\\n      }\\n    }\\n  }\\n}\\n\\nfragment useBackendAIAppLauncherFragment on ComputeSessionNode {\\n  name\\n  row_id\\n  vfolder_mounts\\n}\\n\"\n  }\n};\n})();\n\n(node as any).hash = \"7a350248b5a833005f531bd8caa3adec\";\n\nexport default node;\n","import { useSuspendedBackendaiClient } from '.';\nimport { useSetBAINotification } from './useBAINotification';\nimport {\n  useCurrentProjectValue,\n  useCurrentResourceGroupState,\n} from './useCurrentProject';\nimport { generateRandomString, toGlobalId } from 'backend.ai-ui';\nimport _ from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport { fetchQuery, graphql, useRelayEnvironment } from 'react-relay';\nimport { useStartSessionCreationQuery } from 'src/__generated__/useStartSessionCreationQuery.graphql';\nimport { transformPortValuesToNumbers } from 'src/components/PortSelectFormItem';\nimport { RESOURCE_ALLOCATION_INITIAL_FORM_VALUES } from 'src/components/SessionFormItems/ResourceAllocationFormItems';\nimport {\n  SessionLauncherFormValue,\n  SessionResources,\n} from 'src/pages/SessionLauncherPage';\n\n// Type for successful session creation result\ntype SessionCreationSuccess = {\n  kernelId?: string;\n  sessionId: string;\n  sessionName: string;\n  servicePorts: Array<{ name: string }>;\n};\ninterface CreateSessionInfo {\n  kernelName: string;\n  sessionName: string;\n  architecture: string;\n  batchTimeout?: string;\n  resources: SessionResources;\n}\n\nexport const startSessionErrorCodes = {\n  DUPLICATED_SESSION: 'DUPLICATED_SESSION',\n};\n\nexport const SESSION_LAUNCHER_NOTI_PREFIX = 'session-launcher:';\n\n// Field names that have default values in SessionLauncherFormValue\ntype SessionLauncherDefaultFields =\n  | 'sessionType'\n  | 'allocationPreset'\n  | 'hpcOptimization'\n  | 'batch'\n  | 'envvars'\n  | 'resourceGroup';\n\n// Custom type for environments - mutually exclusive fields\ntype StartSessionEnvironments = {\n  environments:\n    | {\n        version: string;\n        environment?: never;\n        image?: never;\n        manual?: never;\n        customizedTag?: never;\n      }\n    | {\n        version?: never;\n        environment: string;\n        image?: never;\n        manual?: never;\n        customizedTag?: never;\n      }\n    | {\n        version?: never;\n        environment?: never;\n        image?: never;\n        manual: string;\n        customizedTag?: never;\n      };\n};\n\n// Type that makes certain fields optional while keeping others required\nexport type StartSessionValue =\n  // Required fields (environments with only version required)\n  StartSessionEnvironments &\n    // Optional fields from SessionLauncherFormValue\n    Partial<Omit<SessionLauncherFormValue, 'environments'>>;\n\n// Type for minimum required values (all fields except those with defaults are required)\nexport type StartSessionWithDefaultValue = Omit<\n  StartSessionValue,\n  | SessionLauncherDefaultFields\n  | keyof typeof RESOURCE_ALLOCATION_INITIAL_FORM_VALUES\n> &\n  DeepPartial<\n    Pick<\n      StartSessionValue,\n      | SessionLauncherDefaultFields\n      | keyof typeof RESOURCE_ALLOCATION_INITIAL_FORM_VALUES\n    >\n  >;\n\nexport type StartSessionResults = {\n  fulfilled?: PromiseFulfilledResult<SessionCreationSuccess>[];\n  rejected?: PromiseRejectedResult[];\n};\n\nexport const useStartSession = () => {\n  'use memo';\n\n  const { t } = useTranslation();\n  const currentProject = useCurrentProjectValue();\n  const { upsertNotification } = useSetBAINotification();\n\n  const relayEnv = useRelayEnvironment();\n  const baiClient = useSuspendedBackendaiClient();\n  const supportsMountById = baiClient.supports('mount-by-id');\n  const supportBatchTimeout = baiClient?.supports('batch-timeout') ?? false;\n\n  const [currentGlobalResourceGroup] = useCurrentResourceGroupState();\n\n  const defaultFormValues: DeepPartial<SessionLauncherFormValue> = {\n    sessionType: 'interactive',\n    // If you set `allocationPreset` to 'custom', `allocationPreset` is not changed automatically any more.\n    allocationPreset: 'auto-select',\n    hpcOptimization: {\n      autoEnabled: true,\n    },\n    batch: {\n      enabled: false,\n      command: undefined,\n      scheduleDate: undefined,\n      ...(supportBatchTimeout && {\n        timeoutEnabled: false,\n        timeout: undefined,\n        timeoutUnit: 's',\n      }),\n    },\n    envvars: [],\n    // set default_session_environment only if set\n    ...(baiClient._config?.default_session_environment && {\n      environments: normalizeEnvironmentFormat(\n        baiClient._config.default_session_environment,\n      ),\n    }),\n    ...RESOURCE_ALLOCATION_INITIAL_FORM_VALUES,\n    resourceGroup: currentGlobalResourceGroup || undefined,\n  };\n\n  const startSessionWithDefault = (\n    minimumValues: StartSessionWithDefaultValue,\n  ) => {\n    const mergedValue = _.merge({}, defaultFormValues, minimumValues);\n    return startSession(mergedValue as SessionLauncherFormValue);\n  };\n  const startSession = async (values: SessionLauncherFormValue) => {\n    // If manual image is selected, use it as kernelName\n    const imageFullName =\n      values.environments.manual || values.environments.version;\n    const [kernelName, architecture] = imageFullName\n      ? imageFullName.split('@')\n      : ['', ''];\n\n    const sessionName = _.isEmpty(values.sessionName)\n      ? generateSessionId()\n      : values.sessionName;\n\n    const sessionInfo: CreateSessionInfo = {\n      // Basic session information\n      sessionName: sessionName,\n      kernelName,\n      architecture,\n      resources: {\n        enqueueOnly: true,\n        // Project and domain settings\n        group_name: values.owner?.enabled\n          ? values.owner.project\n          : currentProject.name,\n        domain: values.owner?.enabled\n          ? values.owner.domainName\n          : baiClient._config.domainName,\n\n        // Session configuration\n        type: values.sessionType,\n        cluster_mode: values.cluster_mode,\n        cluster_size: values.cluster_size,\n        maxWaitSeconds: 15,\n\n        // Owner settings (optional)\n        // FYI, `config.scaling_group` also changes based on owner settings\n        ...(values.owner?.enabled\n          ? {\n              owner_access_key: values.owner.accesskey,\n            }\n          : {}),\n\n        // Batch mode settings (optional)\n        ...(values.sessionType === 'batch'\n          ? {\n              starts_at: values.batch.enabled\n                ? values.batch.scheduleDate\n                : undefined,\n              startupCommand: values.batch.command,\n            }\n          : {}),\n\n        // Bootstrap script (optional)\n        ...(values.bootstrap_script\n          ? { bootstrap_script: values.bootstrap_script }\n          : {}),\n\n        // Batch timeout configuration (optional)\n        ...(supportBatchTimeout &&\n        values?.batch?.timeoutEnabled &&\n        !_.isUndefined(values?.batch?.timeout)\n          ? {\n              batchTimeout:\n                _.toString(values.batch.timeout) + values?.batch?.timeoutUnit,\n            }\n          : undefined),\n\n        config: {\n          // Resource allocation\n          resources: {\n            cpu: values.resource.cpu,\n            mem: values.resource.mem,\n            // Add accelerator only if specified\n            ...(values.resource?.acceleratorType &&\n            values.resource?.accelerator &&\n            values.resource?.accelerator > 0\n              ? {\n                  [values.resource.acceleratorType]:\n                    values.resource.accelerator,\n                }\n              : undefined),\n          },\n          scaling_group: values.owner?.enabled\n            ? values.owner.project\n            : values.resourceGroup,\n          resource_opts: {\n            shmem: values.resource.shmem,\n            // allow_fractional_resource_fragmentation can be added here if needed\n          },\n\n          // Storage configuration\n          [supportsMountById ? 'mount_ids' : 'mounts']: values.mount_ids,\n          [supportsMountById ? 'mount_id_map' : 'mount_map']:\n            values.mount_id_map,\n\n          // Environment variables\n          environ: {\n            ..._.fromPairs(values.envvars.map((v) => [v.variable, v.value])),\n            // set hpcOptimization options: \"OMP_NUM_THREADS\", \"OPENBLAS_NUM_THREADS\"\n            ...(values.hpcOptimization.autoEnabled\n              ? {}\n              : _.omit(values.hpcOptimization, 'autoEnabled')),\n          },\n\n          // Networking\n          preopen_ports: transformPortValuesToNumbers(values.ports),\n\n          // Agent selection (optional)\n          ...(baiClient.supports('agent-select') &&\n          !baiClient?._config?.hideAgents &&\n          values.agent !== undefined &&\n          !_.isEqual(_.castArray(values.agent), ['auto'])\n            ? {\n                // Filter out undefined values\n                agent_list: _.chain(values.agent)\n                  .castArray()\n                  .filter((agent): agent is string => !!agent)\n                  .value(),\n              }\n            : undefined),\n        },\n      },\n    };\n    const sessionPromises = _.map(_.range(values.num_of_sessions || 1), (i) => {\n      const formattedSessionName =\n        (values.num_of_sessions || 1) > 1\n          ? `${sessionInfo.sessionName}-${generateRandomString()}-${i}`\n          : sessionInfo.sessionName;\n      return baiClient\n        .createIfNotExists(\n          sessionInfo.kernelName,\n          formattedSessionName,\n          sessionInfo.resources,\n          undefined,\n          sessionInfo.architecture,\n        )\n        .then(\n          (res: { created: boolean; status: string; sessionId: string }) => {\n            // When session is already created with the same name, the status code\n            // is 200, but the response body has 'created' field as false.\n            // For such cases, we throw an error to be handled by using component.\n            if (!res?.created) {\n              const error = new Error(\n                startSessionErrorCodes.DUPLICATED_SESSION,\n              );\n              throw error;\n            }\n            return res;\n          },\n        )\n        .catch((err: any) => {\n          if (err?.message?.includes('The session already exists')) {\n            throw new Error(t('session.launcher.SessionAlreadyExists'));\n          } else {\n            throw err;\n          }\n        });\n    });\n\n    return Promise.allSettled(sessionPromises).then(\n      async (\n        sessionCreations: PromiseSettledResult<SessionCreationSuccess>[],\n      ) => {\n        // Group session creations by their status\n        const results = _.groupBy(\n          sessionCreations,\n          'status',\n        ) as StartSessionResults;\n        return results;\n      },\n    );\n  };\n\n  const upsertSessionNotification = async (\n    successCreations: PromiseFulfilledResult<SessionCreationSuccess>[],\n    upsertNotificationOverrides?: Parameters<typeof upsertNotification>,\n  ) => {\n    const promises = _.map(successCreations, (creation) => {\n      const session = creation.value;\n      return fetchQuery<useStartSessionCreationQuery>(\n        relayEnv,\n        graphql`\n          query useStartSessionCreationQuery($id: GlobalIDField!) {\n            compute_session_node(id: $id) {\n              ...BAINodeNotificationItemFragment\n            }\n          }\n        `,\n        {\n          id: toGlobalId('ComputeSessionNode', session.sessionId),\n        },\n      )\n        .toPromise()\n        .then((queryResult) => {\n          const createdSession = queryResult?.compute_session_node ?? null;\n\n          if (createdSession) {\n            upsertNotification(\n              {\n                key: `${SESSION_LAUNCHER_NOTI_PREFIX}${session.sessionId}`,\n                node: createdSession,\n                open: true,\n                duration: 0,\n                ...upsertNotificationOverrides?.[0],\n              },\n              upsertNotificationOverrides?.[1],\n            );\n          }\n        });\n    });\n    return Promise.allSettled(promises);\n  };\n\n  return {\n    startSession,\n    startSessionWithDefault,\n    defaultFormValues,\n    upsertSessionNotification,\n  };\n};\n\nconst generateSessionId = () => {\n  let text = '';\n  const possible =\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  for (let i = 0; i < 8; i++) {\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\n  }\n  return text + '-session';\n};\n\nconst normalizeEnvironmentFormat = (environment: string) => {\n  if (environment.includes(':')) {\n    return {\n      version: environment,\n    };\n  } else {\n    return {\n      environment: environment,\n    };\n  }\n};\n","/**\n * @generated SignedSource<<f92bf642a36339abf7f79760b6dc3ced>>\n * @lightSyntaxTransform\n * @nogrep\n */\n\n/* tslint:disable */\n/* eslint-disable */\n// @ts-nocheck\n\nimport { ConcreteRequest } from 'relay-runtime';\nexport type useValidateSessionNameQuery$variables = {\n  filter?: string | null | undefined;\n  projectId: string;\n};\nexport type useValidateSessionNameQuery$data = {\n  readonly compute_session_nodes: {\n    readonly count: number | null | undefined;\n  } | null | undefined;\n};\nexport type useValidateSessionNameQuery = {\n  response: useValidateSessionNameQuery$data;\n  variables: useValidateSessionNameQuery$variables;\n};\n\nconst node: ConcreteRequest = (function(){\nvar v0 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"filter\"\n},\nv1 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"projectId\"\n},\nv2 = [\n  {\n    \"alias\": null,\n    \"args\": [\n      {\n        \"kind\": \"Variable\",\n        \"name\": \"filter\",\n        \"variableName\": \"filter\"\n      },\n      {\n        \"kind\": \"Variable\",\n        \"name\": \"project_id\",\n        \"variableName\": \"projectId\"\n      }\n    ],\n    \"concreteType\": \"ComputeSessionConnection\",\n    \"kind\": \"LinkedField\",\n    \"name\": \"compute_session_nodes\",\n    \"plural\": false,\n    \"selections\": [\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"count\",\n        \"storageKey\": null\n      }\n    ],\n    \"storageKey\": null\n  }\n];\nreturn {\n  \"fragment\": {\n    \"argumentDefinitions\": [\n      (v0/*: any*/),\n      (v1/*: any*/)\n    ],\n    \"kind\": \"Fragment\",\n    \"metadata\": null,\n    \"name\": \"useValidateSessionNameQuery\",\n    \"selections\": (v2/*: any*/),\n    \"type\": \"Query\",\n    \"abstractKey\": null\n  },\n  \"kind\": \"Request\",\n  \"operation\": {\n    \"argumentDefinitions\": [\n      (v1/*: any*/),\n      (v0/*: any*/)\n    ],\n    \"kind\": \"Operation\",\n    \"name\": \"useValidateSessionNameQuery\",\n    \"selections\": (v2/*: any*/)\n  },\n  \"params\": {\n    \"cacheID\": \"2392cc957c8d4e1b5ff8eb0717faa135\",\n    \"id\": null,\n    \"metadata\": {},\n    \"name\": \"useValidateSessionNameQuery\",\n    \"operationKind\": \"query\",\n    \"text\": \"query useValidateSessionNameQuery(\\n  $projectId: UUID!\\n  $filter: String\\n) {\\n  compute_session_nodes(project_id: $projectId, filter: $filter) {\\n    count\\n  }\\n}\\n\"\n  }\n};\n})();\n\n(node as any).hash = \"4384b91173f16b29861a6bb9cfa6cbfa\";\n\nexport default node;\n","import { useValidateSessionNameQuery } from '../__generated__/useValidateSessionNameQuery.graphql';\nimport { useCurrentProjectValue } from './useCurrentProject';\nimport type { RuleObject } from 'antd/es/form';\nimport { FormItemProps } from 'antd/lib';\nimport _ from 'lodash';\nimport { useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { graphql, useRelayEnvironment, fetchQuery } from 'react-relay';\n\nexport const useValidateSessionName = (\n  currentName?: string | null,\n): Exclude<FormItemProps['rules'], undefined> => {\n  const { t } = useTranslation();\n  const relayEvn = useRelayEnvironment();\n  const currentProject = useCurrentProjectValue();\n  return useMemo(\n    () => [\n      {\n        min: 4,\n        message: t('session.validation.SessionNameTooShort'),\n      },\n      {\n        max: 64,\n        message: t('session.validation.SessionNameTooLong64'),\n      },\n      {\n        validator(_f: RuleObject, value: string) {\n          if (_.isEmpty(value)) {\n            return Promise.resolve();\n          }\n          if (!/^\\w/.test(value)) {\n            return Promise.reject(\n              t('session.validation.SessionNameShouldStartWith'),\n            );\n          }\n\n          if (!/\\w$/.test(value)) {\n            return Promise.reject(\n              t('session.validation.SessionNameShouldEndWith'),\n            );\n          }\n\n          if (!/^[\\w.-]*$/.test(value)) {\n            return Promise.reject(\n              t('session.validation.SessionNameInvalidCharacter'),\n            );\n          }\n          return Promise.resolve();\n        },\n      },\n      {\n        validator: async (_f: RuleObject, value: string) => {\n          if (value === currentName || !value) {\n            return Promise.resolve();\n          }\n          return fetchQuery<useValidateSessionNameQuery>(\n            relayEvn,\n            graphql`\n              query useValidateSessionNameQuery(\n                $projectId: UUID!\n                $filter: String\n              ) {\n                compute_session_nodes(project_id: $projectId, filter: $filter) {\n                  count\n                }\n              }\n            `,\n            {\n              projectId: currentProject.id,\n              filter: `status != \"TERMINATED\" & status != \"CANCELLED\" & name == \"${value}\"`,\n            },\n          )\n            .toPromise()\n            .catch(() => {\n              // ignore network error\n              return;\n            })\n            .then((data) => {\n              if ((data?.compute_session_nodes?.count ?? 0) > 0) {\n                return Promise.reject(\n                  t('session.launcher.SessionAlreadyExists'),\n                );\n              }\n            });\n        },\n      },\n      currentName ? { required: true } : {},\n    ],\n    [currentName, relayEvn, currentProject.id, t],\n  );\n};\n","import { useBAISettingUserState } from '../hooks/useBAISetting';\nimport { Tour, TourProps } from 'antd';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface SessionLauncherValidationTourProps extends Omit<TourProps, 'steps'> {}\nconst SessionLauncherValidationTour: React.FC<\n  SessionLauncherValidationTourProps\n> = ({ open, onClose, ...otherProps }) => {\n  const { t } = useTranslation();\n  const [hasOpenedValidationTour, setHasOpenedValidationTour] =\n    useBAISettingUserState('has_opened_tour_neo_session_validation');\n\n  const steps = [\n    {\n      title: t('tourGuide.neoSessionLauncher.ValidationErrorTitle'),\n      description: t('tourGuide.neoSessionLauncher.ValidationErrorText'),\n      target: () =>\n        document.getElementsByClassName('bai-card-error')?.[0] as HTMLElement,\n    },\n    {\n      title: t('tourGuide.neoSessionLauncher.ValidationErrorTitle'),\n      description: t(\n        'tourGuide.neoSessionLauncher.FixErrorFieldByModifyButton',\n      ),\n      target: () =>\n        (\n          document.getElementsByClassName('bai-card-error')?.[0] as HTMLElement\n        )?.querySelector('.ant-card-extra') as HTMLElement,\n    },\n    {\n      title: t('tourGuide.neoSessionLauncher.ValidationErrorTitle'),\n      description: t('tourGuide.neoSessionLauncher.FixErrorAndTryAgainText'),\n      target: () =>\n        document.querySelector(\n          '[data-test-id=\"neo-session-launcher-tour-step-navigation\"]',\n        ) as HTMLElement,\n    },\n  ];\n  return (\n    <Tour\n      steps={steps}\n      onClose={(e) => {\n        onClose?.(e);\n        setHasOpenedValidationTour(true);\n      }}\n      open={!hasOpenedValidationTour && open}\n      {...otherProps}\n    />\n  );\n};\n\nexport default SessionLauncherValidationTour;\n","import { SessionLauncherFormValue } from '../pages/SessionLauncherPage';\nimport { App, Form, FormInstance } from 'antd';\nimport _ from 'lodash';\nimport React, { useEffect, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nconst SessionLauncherFormIncompatibleValueChecker: React.FC<{\n  form: FormInstance<SessionLauncherFormValue>;\n}> = ({ form }) => {\n  const mounts = Form.useWatch('mounts', form);\n  const app = App.useApp();\n  const { t } = useTranslation();\n\n  const hasIncompatibleMountsParam = useMemo(() => {\n    return _.isArray(mounts) && mounts.length > 0;\n  }, [mounts]);\n  useEffect(() => {\n    if (hasIncompatibleMountsParam) {\n      app.message.warning(\n        t('session.launcher.InvalidMountsSelectionWarning'),\n        5,\n      );\n      form.setFieldValue('mounts', undefined);\n    }\n  }, [hasIncompatibleMountsParam, t, app.message, form]);\n  return null;\n};\n\nexport default SessionLauncherFormIncompatibleValueChecker;\n","/**\n * @generated SignedSource<<b3429e7405e500fee4b598b5887f5d0e>>\n * @lightSyntaxTransform\n * @nogrep\n */\n\n/* tslint:disable */\n/* eslint-disable */\n// @ts-nocheck\n\nimport { ConcreteRequest } from 'relay-runtime';\nexport type SessionOwnerSetterCardQuery$variables = {\n  email: string;\n};\nexport type SessionOwnerSetterCardQuery$data = {\n  readonly keypairs: ReadonlyArray<{\n    readonly access_key: string | null | undefined;\n  } | null | undefined> | null | undefined;\n  readonly user: {\n    readonly domain_name: string | null | undefined;\n    readonly groups: ReadonlyArray<{\n      readonly id: string | null | undefined;\n      readonly name: string | null | undefined;\n    } | null | undefined> | null | undefined;\n  } | null | undefined;\n};\nexport type SessionOwnerSetterCardQuery = {\n  response: SessionOwnerSetterCardQuery$data;\n  variables: SessionOwnerSetterCardQuery$variables;\n};\n\nconst node: ConcreteRequest = (function(){\nvar v0 = [\n  {\n    \"defaultValue\": null,\n    \"kind\": \"LocalArgument\",\n    \"name\": \"email\"\n  }\n],\nv1 = [\n  {\n    \"kind\": \"Variable\",\n    \"name\": \"email\",\n    \"variableName\": \"email\"\n  }\n],\nv2 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"access_key\",\n  \"storageKey\": null\n},\nv3 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"domain_name\",\n  \"storageKey\": null\n},\nv4 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"id\",\n  \"storageKey\": null\n},\nv5 = {\n  \"alias\": null,\n  \"args\": null,\n  \"concreteType\": \"UserGroup\",\n  \"kind\": \"LinkedField\",\n  \"name\": \"groups\",\n  \"plural\": true,\n  \"selections\": [\n    {\n      \"alias\": null,\n      \"args\": null,\n      \"kind\": \"ScalarField\",\n      \"name\": \"name\",\n      \"storageKey\": null\n    },\n    (v4/*: any*/)\n  ],\n  \"storageKey\": null\n};\nreturn {\n  \"fragment\": {\n    \"argumentDefinitions\": (v0/*: any*/),\n    \"kind\": \"Fragment\",\n    \"metadata\": null,\n    \"name\": \"SessionOwnerSetterCardQuery\",\n    \"selections\": [\n      {\n        \"alias\": null,\n        \"args\": (v1/*: any*/),\n        \"concreteType\": \"KeyPair\",\n        \"kind\": \"LinkedField\",\n        \"name\": \"keypairs\",\n        \"plural\": true,\n        \"selections\": [\n          (v2/*: any*/)\n        ],\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": (v1/*: any*/),\n        \"concreteType\": \"User\",\n        \"kind\": \"LinkedField\",\n        \"name\": \"user\",\n        \"plural\": false,\n        \"selections\": [\n          (v3/*: any*/),\n          (v5/*: any*/)\n        ],\n        \"storageKey\": null\n      }\n    ],\n    \"type\": \"Query\",\n    \"abstractKey\": null\n  },\n  \"kind\": \"Request\",\n  \"operation\": {\n    \"argumentDefinitions\": (v0/*: any*/),\n    \"kind\": \"Operation\",\n    \"name\": \"SessionOwnerSetterCardQuery\",\n    \"selections\": [\n      {\n        \"alias\": null,\n        \"args\": (v1/*: any*/),\n        \"concreteType\": \"KeyPair\",\n        \"kind\": \"LinkedField\",\n        \"name\": \"keypairs\",\n        \"plural\": true,\n        \"selections\": [\n          (v2/*: any*/),\n          (v4/*: any*/)\n        ],\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": (v1/*: any*/),\n        \"concreteType\": \"User\",\n        \"kind\": \"LinkedField\",\n        \"name\": \"user\",\n        \"plural\": false,\n        \"selections\": [\n          (v3/*: any*/),\n          (v5/*: any*/),\n          (v4/*: any*/)\n        ],\n        \"storageKey\": null\n      }\n    ]\n  },\n  \"params\": {\n    \"cacheID\": \"a8de553c14d6730a6825cba2f409be0d\",\n    \"id\": null,\n    \"metadata\": {},\n    \"name\": \"SessionOwnerSetterCardQuery\",\n    \"operationKind\": \"query\",\n    \"text\": \"query SessionOwnerSetterCardQuery(\\n  $email: String!\\n) {\\n  keypairs(email: $email) {\\n    access_key\\n    id\\n  }\\n  user(email: $email) {\\n    domain_name\\n    groups {\\n      name\\n      id\\n    }\\n    id\\n  }\\n}\\n\"\n  }\n};\n})();\n\n(node as any).hash = \"ba086835ea654ab889e0e6aaefa0abfe\";\n\nexport default node;\n","import { SessionOwnerSetterCardQuery } from '../__generated__/SessionOwnerSetterCardQuery.graphql';\nimport { useCurrentUserRole } from '../hooks/backendai';\nimport { useTanQuery } from '../hooks/reactQueryAlias';\nimport BAISelect from './BAISelect';\nimport HiddenFormItem from './HiddenFormItem';\nimport ResourceGroupSelect from './ResourceGroupSelect';\nimport {\n  Button,\n  Card,\n  Col,\n  Descriptions,\n  Form,\n  Input,\n  Row,\n  Select,\n  Switch,\n  theme,\n} from 'antd';\nimport { CardProps } from 'antd/lib';\nimport { BAICard, BAICardProps, BAIFlex } from 'backend.ai-ui';\nimport _ from 'lodash';\nimport { CheckIcon } from 'lucide-react';\nimport React, { Suspense, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { graphql, fetchQuery, useRelayEnvironment } from 'react-relay';\n\nexport interface SessionOwnerSetterFormValues {\n  owner?:\n    | {\n        email: string;\n        accesskey: string;\n        project: string;\n        resourceGroup: string;\n        enabled: true;\n        domainName: string;\n      }\n    | {\n        email?: string;\n        accesskey?: string;\n        project?: string;\n        resourceGroup?: string;\n        enabled: false;\n        domainName?: string;\n      };\n}\n\nconst SessionOwnerSetterCard: React.FC<CardProps> = (props) => {\n  const { t } = useTranslation();\n  const { token } = theme.useToken();\n  const form = Form.useFormInstance<SessionOwnerSetterFormValues>();\n\n  const isActive = Form.useWatch(['owner', 'enabled'], form);\n\n  const [fetchingEmail, setFetchingEmail] = useState<string>();\n  const relayEvn = useRelayEnvironment();\n\n  const { data, isFetching } = useTanQuery({\n    queryKey: ['SessionOwnerSetterCard', 'ownerInfo', fetchingEmail],\n    queryFn: () => {\n      const email = form.getFieldValue(['owner', 'email']);\n      if (!email) return;\n\n      const query = graphql`\n        query SessionOwnerSetterCardQuery($email: String!) {\n          keypairs(email: $email) {\n            access_key\n          }\n          user(email: $email) {\n            domain_name\n            groups {\n              name\n              id\n            }\n          }\n        }\n      `;\n      return fetchQuery<SessionOwnerSetterCardQuery>(relayEvn, query, {\n        email,\n      }).toPromise();\n    },\n    enabled: !!fetchingEmail,\n  });\n\n  const ownerKeypairs = form.getFieldValue(['owner', 'email'])\n    ? data?.keypairs\n    : undefined;\n  const owner = form.getFieldValue(['owner', 'email']) ? data?.user : undefined;\n\n  const nonExistentOwner = !isFetching && fetchingEmail && !owner;\n\n  return (\n    <Card\n      title={t('session.launcher.SetSessionOwner')}\n      extra={\n        <Form.Item name={['owner', 'enabled']} valuePropName=\"checked\" noStyle>\n          <Switch />\n        </Form.Item>\n      }\n      styles={\n        isActive\n          ? undefined\n          : {\n              header: {\n                borderBottom: 'none',\n              },\n              body: {\n                display: isActive ? 'block' : 'none',\n              },\n            }\n      }\n      {...props}\n    >\n      <HiddenFormItem\n        name={['owner', 'domainName']}\n        value={owner?.domain_name}\n      />\n      <Form.Item dependencies={[['owner', 'enabled']]} noStyle>\n        {({ getFieldValue }) => {\n          return (\n            <>\n              <BAIFlex>\n                <Form.Item\n                  name={['owner', 'email']}\n                  label={t('session.launcher.OwnerEmail')}\n                  rules={[\n                    {\n                      required: isActive,\n                    },\n                    {\n                      type: 'email',\n                      message: t('general.validation.InvalidEmailAddress'),\n                    },\n                  ]}\n                  style={{ flex: 1 }}\n                  validateStatus={nonExistentOwner ? 'error' : undefined}\n                  help={\n                    nonExistentOwner\n                      ? t('credential.NoUserToDisplay')\n                      : undefined\n                  }\n                >\n                  <Input.Search\n                    onSearch={(v) => {\n                      // startTransition(()=>{\n                      form\n                        .validateFields([['owner', 'email']])\n                        .then(() => {\n                          setFetchingEmail(v);\n                        })\n                        .catch(() => {});\n                      // })\n                    }}\n                    onChange={() => {\n                      setFetchingEmail('');\n                      form.setFieldsValue({\n                        owner: {\n                          accesskey: '',\n                          project: undefined,\n                          resourceGroup: undefined,\n                        },\n                      });\n                    }}\n                    loading={isFetching}\n                    enterButton={\n                      !isFetching && owner ? (\n                        <Button icon={<CheckIcon />} />\n                      ) : undefined\n                    }\n                  />\n                </Form.Item>\n              </BAIFlex>\n              <Form.Item\n                name={['owner', 'accesskey']}\n                label={t('session.launcher.OwnerAccessKey')}\n                rules={[\n                  {\n                    required: getFieldValue(['owner', 'enabled']),\n                  },\n                ]}\n              >\n                <BAISelect\n                  options={_.map(ownerKeypairs, (k) => {\n                    return {\n                      label: k?.access_key,\n                      value: k?.access_key,\n                    };\n                  })}\n                  autoSelectOption\n                  disabled={_.isEmpty(fetchingEmail) || isFetching}\n                  // defaultActiveFirstOption\n                />\n              </Form.Item>\n              <Row gutter={token.marginSM}>\n                <Col span={12}>\n                  <Form.Item\n                    name={['owner', 'project']}\n                    label={t('session.launcher.OwnerGroup')}\n                    rules={[\n                      {\n                        required: getFieldValue(['owner', 'enabled']),\n                      },\n                    ]}\n                  >\n                    <BAISelect\n                      options={_.map(owner?.groups, (g) => {\n                        return {\n                          label: g?.name,\n                          value: g?.name,\n                        };\n                      })}\n                      autoSelectOption\n                      disabled={_.isEmpty(fetchingEmail) || isFetching}\n                    />\n                  </Form.Item>\n                </Col>\n                <Col span={12}>\n                  <Form.Item dependencies={[['owner', 'project']]} noStyle>\n                    {({ getFieldValue }) => {\n                      return (\n                        <Suspense\n                          fallback={\n                            <Form.Item\n                              label={t('session.launcher.OwnerResourceGroup')}\n                              rules={[\n                                {\n                                  required: getFieldValue(['owner', 'enabled']),\n                                },\n                              ]}\n                            >\n                              <Select loading />\n                            </Form.Item>\n                          }\n                        >\n                          <Form.Item\n                            name={['owner', 'resourceGroup']}\n                            label={t('session.launcher.OwnerResourceGroup')}\n                            rules={[\n                              {\n                                required: getFieldValue(['owner', 'enabled']),\n                              },\n                            ]}\n                          >\n                            {getFieldValue(['owner', 'project']) ? (\n                              <ResourceGroupSelect\n                                projectName={getFieldValue([\n                                  'owner',\n                                  'project',\n                                ])}\n                                disabled={\n                                  _.isEmpty(fetchingEmail) || isFetching\n                                }\n                                autoSelectDefault\n                              />\n                            ) : (\n                              <Select disabled />\n                            )}\n                          </Form.Item>\n                        </Suspense>\n                      );\n                    }}\n                  </Form.Item>\n                </Col>\n              </Row>\n            </>\n          );\n        }}\n      </Form.Item>\n    </Card>\n  );\n};\n\nexport const SessionOwnerSetterPreviewCard: React.FC<BAICardProps> = (\n  props,\n) => {\n  const { t } = useTranslation();\n  const form = Form.useFormInstance();\n  const isActive = Form.useWatch(['owner', 'enabled'], form);\n  const currentUserRole = useCurrentUserRole();\n  return (\n    (currentUserRole === 'admin' || currentUserRole === 'superadmin') &&\n    isActive && (\n      <BAICard\n        title={t('session.launcher.SetSessionOwner')}\n        showDivider\n        size=\"small\"\n        status={\n          form.getFieldError(['owner', 'email']).length > 0 ||\n          form.getFieldError(['owner', 'accesskey']).length > 0 ||\n          form.getFieldError(['owner', 'project']).length > 0 ||\n          form.getFieldError(['owner', 'resourceGroup']).length > 0\n            ? 'error'\n            : undefined\n        }\n        extraButtonTitle={t('button.Edit')}\n        {...props}\n      >\n        <Descriptions size=\"small\" column={1}>\n          <Descriptions.Item label={t('session.launcher.OwnerEmail')}>\n            {form.getFieldValue(['owner', 'email'])}\n          </Descriptions.Item>\n          <Descriptions.Item label={t('session.launcher.OwnerAccessKey')}>\n            {form.getFieldValue(['owner', 'accesskey'])}\n          </Descriptions.Item>\n          <Descriptions.Item label={t('session.launcher.OwnerGroup')}>\n            {form.getFieldValue(['owner', 'project'])}\n          </Descriptions.Item>\n          <Descriptions.Item label={t('session.launcher.OwnerResourceGroup')}>\n            {form.getFieldValue(['owner', 'resourceGroup'])}\n          </Descriptions.Item>\n        </Descriptions>\n      </BAICard>\n    )\n  );\n};\n\nexport default SessionOwnerSetterCard;\n","import { preserveDotStartCase, getImageFullName } from '../helper';\nimport {\n  useBackendAIImageMetaData,\n  useSuspendedBackendaiClient,\n} from '../hooks';\nimport { useCurrentProjectValue } from '../hooks/useCurrentProject';\nimport { useThemeMode } from '../hooks/useThemeMode';\nimport {\n  SessionLauncherFormValue,\n  ResourceNumbersOfSession,\n  SessionLauncherStepKey,\n} from '../pages/SessionLauncherPage';\nimport BAIAlert from './BAIAlert';\nimport DoubleTag from './DoubleTag';\nimport ImageMetaIcon from './ImageMetaIcon';\nimport { ImageTags } from './ImageTags';\nimport { PortTag } from './PortSelectFormItem';\nimport { SessionOwnerSetterPreviewCard } from './SessionOwnerSetterCard';\nimport SourceCodeViewer from './SourceCodeViewer';\nimport {\n  Descriptions,\n  Typography,\n  Row,\n  Col,\n  Divider,\n  Tag,\n  Alert,\n  Card,\n  Table,\n  Form,\n  theme,\n  Button,\n  App,\n} from 'antd';\nimport { BAICard, BAIFlex } from 'backend.ai-ui';\nimport dayjs from 'dayjs';\nimport _ from 'lodash';\nimport { useTranslation } from 'react-i18next';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport { dark } from 'react-syntax-highlighter/dist/esm/styles/hljs';\n\nconst SessionLauncherPreview: React.FC<{\n  onClickEditStep: (stepKey: SessionLauncherStepKey) => void;\n}> = ({ onClickEditStep }) => {\n  const app = App.useApp();\n  const { t } = useTranslation();\n  const form = Form.useFormInstance<SessionLauncherFormValue>();\n  const { token } = theme.useToken();\n  const baiClient = useSuspendedBackendaiClient();\n  const sessionType = Form.useWatch('sessionType', { form, preserve: true });\n  const supportBatchTimeout = baiClient?.supports('batch-timeout') ?? false;\n  const supportExtendedImageInfo =\n    baiClient?.supports('extended-image-info') ?? false;\n  const currentProject = useCurrentProjectValue();\n  const [, { getBaseVersion, getBaseImage, tagAlias }] =\n    useBackendAIImageMetaData();\n  const { isDarkMode } = useThemeMode();\n\n  return (\n    <>\n      {form.getFieldValue('bootstrap_script') && (\n        <BAIAlert\n          description={t('session.launcher.UsingBootstrapScriptInfo')}\n          ghostInfoBg={false}\n          action={\n            <Button\n              size=\"small\"\n              type=\"text\"\n              onClick={() => {\n                app.modal.info({\n                  title: t('session.launcher.BootstrapScriptDetail'),\n                  content: (\n                    <BAIFlex direction=\"column\" align=\"start\">\n                      <Typography.Paragraph>\n                        {t('userSettings.BootstrapScriptDescription')}\n                      </Typography.Paragraph>\n                      <SourceCodeViewer wordWrap language={'shell'}>\n                        {form.getFieldValue('bootstrap_script')}\n                      </SourceCodeViewer>\n                    </BAIFlex>\n                  ),\n                  width: 800,\n                });\n              }}\n            >\n              {t('notification.SeeDetail')}\n            </Button>\n          }\n          type=\"info\"\n          showIcon\n        />\n      )}\n      <BAICard\n        title={t('session.launcher.SessionType')}\n        showDivider\n        size=\"small\"\n        status={\n          form.getFieldError('sessionName').length > 0 ||\n          form.getFieldError(['batch', 'command']).length > 0 ||\n          form.getFieldError(['batch', 'scheduleDate']).length > 0\n            ? 'error'\n            : undefined\n        }\n        extraButtonTitle={t('button.Edit')}\n        onClickExtraButton={() => {\n          onClickEditStep('sessionType');\n        }}\n      >\n        <Descriptions size=\"small\" column={1}>\n          <Descriptions.Item label={t('session.SessionType')}>\n            {form.getFieldValue('sessionType')}\n          </Descriptions.Item>\n          {!_.isEmpty(form.getFieldValue('sessionName')) && (\n            <Descriptions.Item label={t('session.launcher.SessionName')}>\n              {form.getFieldValue('sessionName')}\n            </Descriptions.Item>\n          )}\n          {sessionType === 'batch' && (\n            <>\n              <Descriptions.Item\n                label={t('session.launcher.StartUpCommand')}\n                styles={{\n                  label: {\n                    whiteSpace: 'nowrap',\n                  },\n                  content: {\n                    overflow: 'auto',\n                  },\n                }}\n              >\n                {form.getFieldValue(['batch', 'command']) ? (\n                  <SourceCodeViewer language=\"shell\">\n                    {form.getFieldValue(['batch', 'command'])}\n                  </SourceCodeViewer>\n                ) : (\n                  <Typography.Text type=\"secondary\">\n                    {t('general.None')}\n                  </Typography.Text>\n                )}\n              </Descriptions.Item>\n              <Descriptions.Item label={t('session.launcher.SessionStartTime')}>\n                {form.getFieldValue(['batch', 'scheduleDate']) ? (\n                  dayjs(form.getFieldValue(['batch', 'scheduleDate'])).format(\n                    'LLL (Z)',\n                  )\n                ) : (\n                  <Typography.Text type=\"secondary\">\n                    {t('general.None')}\n                  </Typography.Text>\n                )}\n              </Descriptions.Item>\n              {supportBatchTimeout ? (\n                <Descriptions.Item\n                  label={t('session.launcher.BatchJobTimeoutDuration')}\n                >\n                  {form.getFieldValue(['batch', 'timeout']) ? (\n                    <Typography.Text>\n                      {form.getFieldValue(['batch', 'timeout'])}\n                      {form.getFieldValue(['batch', 'timeoutUnit']) || 's'}\n                    </Typography.Text>\n                  ) : (\n                    <Typography.Text type=\"secondary\">\n                      {t('general.None')}\n                    </Typography.Text>\n                  )}\n                </Descriptions.Item>\n              ) : null}\n            </>\n          )}\n        </Descriptions>\n      </BAICard>\n      <SessionOwnerSetterPreviewCard\n        onClickExtraButton={() => {\n          onClickEditStep('sessionType');\n        }}\n      />\n      <BAICard\n        title={t('session.launcher.Environments')}\n        showDivider\n        size=\"small\"\n        status={\n          _.some(\n            form.getFieldValue(\n              'envvars',\n            ) as SessionLauncherFormValue['envvars'],\n            (_v, idx) => {\n              return (\n                form.getFieldError(['envvars', idx, 'variable']).length > 0 ||\n                form.getFieldError(['envvars', idx, 'value']).length > 0\n              );\n            },\n          )\n            ? 'error'\n            : undefined\n        }\n        extraButtonTitle={t('button.Edit')}\n        onClickExtraButton={() => {\n          onClickEditStep('environment');\n        }}\n      >\n        <Descriptions size=\"small\" column={1}>\n          <Descriptions.Item label={t('session.launcher.Project')}>\n            {currentProject.name}\n          </Descriptions.Item>\n          <Descriptions.Item label={t('general.Image')}>\n            {supportExtendedImageInfo ? (\n              <Row style={{ flexFlow: 'nowrap' }}>\n                <Col>\n                  <ImageMetaIcon\n                    image={\n                      form.getFieldValue('environments')?.version ||\n                      form.getFieldValue('environments')?.manual\n                    }\n                    style={{ marginRight: token.marginXS }}\n                  />\n                </Col>\n                <Col>\n                  <BAIFlex direction=\"row\" wrap=\"wrap\">\n                    {form.getFieldValue('environments')?.manual ? (\n                      <Typography.Text\n                        code\n                        style={{ wordBreak: 'break-all' }}\n                        copyable={{\n                          text: form.getFieldValue('environments')?.manual,\n                        }}\n                      >\n                        {form.getFieldValue('environments')?.manual}\n                      </Typography.Text>\n                    ) : (\n                      <>\n                        <Typography.Text>\n                          {tagAlias(\n                            form.getFieldValue('environments')?.image\n                              ?.base_image_name,\n                          )}\n                        </Typography.Text>\n                        <Divider type=\"vertical\" />\n                        <Typography.Text>\n                          {form.getFieldValue('environments')?.image?.version}\n                        </Typography.Text>\n                        <Divider type=\"vertical\" />\n                        <Typography.Text>\n                          {\n                            form.getFieldValue('environments')?.image\n                              ?.architecture\n                          }\n                        </Typography.Text>\n                        <Divider type=\"vertical\" />\n                        {/* TODO: replace this with AliasedImageDoubleTags after image list query with ImageNode is implemented. */}\n                        {_.map(\n                          form.getFieldValue('environments')?.image?.tags,\n                          (tag: { key: string; value: string }) => {\n                            const isCustomized = _.includes(\n                              tag.key,\n                              'customized_',\n                            );\n                            const tagValue = isCustomized\n                              ? _.find(\n                                  form.getFieldValue('environments')?.image\n                                    ?.labels,\n                                  {\n                                    key: 'ai.backend.customized-image.name',\n                                  },\n                                )?.value\n                              : tag.value;\n                            const aliasedTag = tagAlias(tag.key + tagValue);\n                            return _.isEqual(\n                              aliasedTag,\n                              preserveDotStartCase(tag.key + tagValue),\n                            ) || isCustomized ? (\n                              <DoubleTag\n                                key={tag.key}\n                                values={[\n                                  {\n                                    label: tagAlias(tag.key),\n                                    color: isCustomized ? 'cyan' : 'blue',\n                                  },\n                                  {\n                                    label: tagValue,\n                                    color: isCustomized ? 'cyan' : 'blue',\n                                  },\n                                ]}\n                              />\n                            ) : (\n                              <Tag\n                                key={tag.key}\n                                color={isCustomized ? 'cyan' : 'blue'}\n                              >\n                                {aliasedTag}\n                              </Tag>\n                            );\n                          },\n                        )}\n                        <Typography.Text\n                          style={{ color: token.colorPrimary }}\n                          copyable={{\n                            text:\n                              getImageFullName(\n                                form.getFieldValue('environments')?.image,\n                              ) || form.getFieldValue('environments')?.version,\n                          }}\n                        />\n                      </>\n                    )}\n                  </BAIFlex>\n                </Col>\n              </Row>\n            ) : (\n              <Row style={{ flexFlow: 'nowrap', gap: token.sizeXS }}>\n                <Col>\n                  <ImageMetaIcon\n                    image={\n                      form.getFieldValue('environments')?.version ||\n                      form.getFieldValue('environments')?.manual\n                    }\n                  />\n                </Col>\n                <Col>\n                  {/* {form.getFieldValue('environments').image} */}\n                  <BAIFlex direction=\"row\" wrap=\"wrap\">\n                    {form.getFieldValue('environments')?.manual ? (\n                      <Typography.Text\n                        code\n                        style={{ wordBreak: 'break-all' }}\n                        copyable={{\n                          text: form.getFieldValue('environments')?.manual,\n                        }}\n                      >\n                        {form.getFieldValue('environments')?.manual}\n                      </Typography.Text>\n                    ) : (\n                      <>\n                        <Typography.Text>\n                          {tagAlias(\n                            getBaseImage(\n                              form.getFieldValue('environments')?.version,\n                            ),\n                          )}\n                        </Typography.Text>\n                        <Divider type=\"vertical\" />\n                        <Typography.Text>\n                          {getBaseVersion(\n                            form.getFieldValue('environments')?.version,\n                          )}\n                        </Typography.Text>\n                        <Divider type=\"vertical\" />\n                        <Typography.Text>\n                          {\n                            form.getFieldValue('environments')?.image\n                              ?.architecture\n                          }\n                        </Typography.Text>\n                        <Divider type=\"vertical\" />\n                        <ImageTags\n                          tag={form.getFieldValue([\n                            'environments',\n                            'image',\n                            'tag',\n                          ])}\n                          labels={\n                            form.getFieldValue('environments')?.image\n                              ?.labels as Array<{\n                              key: string;\n                              value: string;\n                            }>\n                          }\n                        />\n                        <Typography.Text\n                          style={{ color: token.colorPrimary }}\n                          copyable={{\n                            text:\n                              getImageFullName(\n                                form.getFieldValue('environments')?.image,\n                              ) || form.getFieldValue('environments')?.version,\n                          }}\n                        />\n                      </>\n                    )}\n                  </BAIFlex>\n                </Col>\n              </Row>\n            )}\n          </Descriptions.Item>\n          {form.getFieldValue('envvars')?.length > 0 && (\n            <Descriptions.Item\n              label={t('session.launcher.EnvironmentVariable')}\n            >\n              {form.getFieldValue('envvars')?.length ? (\n                <SyntaxHighlighter\n                  style={isDarkMode ? dark : undefined}\n                  codeTagProps={{\n                    style: {\n                      // fontFamily: 'monospace',\n                    },\n                  }}\n                  // showLineNumbers\n                  customStyle={{\n                    margin: 0,\n                    width: '100%',\n                  }}\n                >\n                  {_.map(\n                    form.getFieldValue('envvars'),\n                    (v: { variable: string; value: string }) =>\n                      `${v?.variable || ''}=\"${v?.value || ''}\"`,\n                  ).join('\\n')}\n                </SyntaxHighlighter>\n              ) : (\n                <Typography.Text type=\"secondary\">-</Typography.Text>\n              )}\n            </Descriptions.Item>\n          )}\n        </Descriptions>\n      </BAICard>\n      <BAICard\n        title={t('session.launcher.ResourceAllocation')}\n        showDivider\n        status={\n          _.some(form.getFieldValue('resource'), (_v, key) => {\n            return (\n              // @ts-ignore\n              form.getFieldError(['resource', key]).length > 0\n            );\n          }) ||\n          form.getFieldError(['num_of_sessions']).length > 0 ||\n          form.getFieldError('resourceGroup').length > 0\n            ? 'error'\n            : // : _.some(form.getFieldValue('resource'), (v, key) => {\n              //     //                         console.log(form.getFieldError(['resource', 'shmem']));\n              //     // console.log(form.getFieldValue(['resource']));\n              //     return (\n              //       form.getFieldWarning(['resource', key]).length >\n              //       0\n              //     );\n              //   })\n              // ? 'warning'\n              undefined\n        }\n        size=\"small\"\n        extraButtonTitle={t('button.Edit')}\n        onClickExtraButton={() => {\n          onClickEditStep('environment');\n        }}\n      >\n        <BAIFlex direction=\"column\" align=\"stretch\">\n          {_.some(\n            form.getFieldValue('resource'),\n            (_v, key: keyof SessionLauncherFormValue['resource']) => {\n              return (\n                // @ts-ignore\n                form.getFieldWarning(['resource', key]).length > 0\n              );\n            },\n          ) && (\n            <Alert\n              type=\"warning\"\n              showIcon\n              message={t('session.launcher.EnqueueComputeSessionWarning')}\n            />\n          )}\n\n          <Descriptions column={2}>\n            <Descriptions.Item label={t('general.ResourceGroup')} span={2}>\n              {form.getFieldValue('resourceGroup') || (\n                <Typography.Text type=\"secondary\">\n                  {t('general.None')}\n                </Typography.Text>\n              )}\n            </Descriptions.Item>\n            <Descriptions.Item\n              label={t('session.launcher.ResourceAllocationPerContainer')}\n              span={2}\n            >\n              <BAIFlex\n                direction=\"row\"\n                align=\"start\"\n                gap={'sm'}\n                wrap=\"wrap\"\n                style={{ flex: 1 }}\n              >\n                {form.getFieldValue('allocationPreset') === 'custom' ? (\n                  // t('session.launcher.CustomAllocation')\n                  ''\n                ) : (\n                  <Tag>{form.getFieldValue('allocationPreset')}</Tag>\n                )}\n\n                <ResourceNumbersOfSession\n                  resource={form.getFieldValue('resource')}\n                />\n                {/* {_.chain(\n                              form.getFieldValue('allocationPreset') ===\n                                'custom'\n                                ? form.getFieldValue('resource')\n                                : JSON.parse(\n                                    form.getFieldValue('selectedPreset')\n                                      ?.resource_slots || '{}',\n                                  ),\n                            )\n                              .map((value, type) => {\n                                // @ts-ignore\n                                if (resourceSlots[type] === undefined)\n                                  return undefined;\n                                const resource_opts = {\n                                  shmem:\n                                    form.getFieldValue('selectedPreset')\n                                      .shared_memory,\n                                };\n                                return (\n                                  <ResourceNumber\n                                    key={type}\n                                    // @ts-ignore\n                                    type={type}\n                                    value={value}\n                                    opts={resource_opts}\n                                  />\n                                );\n                              })\n                              .compact()\n                              .value()} */}\n              </BAIFlex>\n            </Descriptions.Item>\n            {baiClient.supports('agent-select') &&\n              !baiClient?._config?.hideAgents && (\n                <Descriptions.Item label={t('session.launcher.AgentNode')}>\n                  {_.castArray(form.getFieldValue('agent')).join(', ') ||\n                    t('session.launcher.AutoSelect')}\n                </Descriptions.Item>\n              )}\n            <Descriptions.Item label={t('session.launcher.NumberOfContainer')}>\n              {form.getFieldValue('cluster_size') === 1\n                ? form.getFieldValue('num_of_sessions')\n                : form.getFieldValue('cluster_size')}\n            </Descriptions.Item>\n            <Descriptions.Item label={t('session.launcher.ClusterMode')}>\n              {form.getFieldValue('cluster_mode') === 'single-node'\n                ? t('session.launcher.SingleNode')\n                : t('session.launcher.MultiNode')}\n            </Descriptions.Item>\n          </Descriptions>\n          <Card\n            size=\"small\"\n            type=\"inner\"\n            title={t('session.launcher.TotalAllocation')}\n          >\n            <BAIFlex direction=\"row\" gap=\"xxs\">\n              <ResourceNumbersOfSession\n                resource={form.getFieldValue('resource')}\n                containerCount={\n                  form.getFieldValue('cluster_size') === 1\n                    ? form.getFieldValue('num_of_sessions')\n                    : form.getFieldValue('cluster_size')\n                }\n              />\n            </BAIFlex>\n          </Card>\n        </BAIFlex>\n      </BAICard>\n      <BAICard\n        title={t('webui.menu.Data&Storage')}\n        showDivider\n        size=\"small\"\n        status={\n          form.getFieldError('mount_id_map').length > 0 ? 'error' : undefined\n        }\n        extraButtonTitle={t('button.Edit')}\n        onClickExtraButton={() => {\n          onClickEditStep('storage');\n        }}\n      >\n        {/* {console.log(_.sum([form.getFieldValue('mounts')?.length, form.getFieldValue('autoMountedFolderNames')]))} */}\n        {/* {_.sum([form.getFieldValue('mounts')?.length, form.getFieldValue('autoMountedFolderNames').length]) > 0 ? ( */}\n        <BAIFlex direction=\"column\" align=\"stretch\" gap={'xs'}>\n          {form.getFieldValue('mount_ids')?.length > 0 ? (\n            <Table\n              rowKey=\"name\"\n              size=\"small\"\n              pagination={false}\n              columns={[\n                {\n                  dataIndex: 'name',\n                  title: t('data.folders.Name'),\n                },\n                {\n                  dataIndex: 'alias',\n                  title: t('session.launcher.FolderAlias'),\n                  render: (value, record) => {\n                    return _.isEmpty(value) ? (\n                      <Typography.Text\n                        type=\"secondary\"\n                        style={{\n                          opacity: 0.7,\n                        }}\n                      >\n                        {`/home/work/${record.name}`}\n                      </Typography.Text>\n                    ) : (\n                      value\n                    );\n                  },\n                },\n              ]}\n              dataSource={_.map(form.getFieldValue('mount_ids'), (v) => {\n                const name = form.getFieldValue('vfoldersNameMap')?.[v] || v;\n                return {\n                  name,\n                  alias: form.getFieldValue('mount_id_map')?.[v],\n                };\n              })}\n            ></Table>\n          ) : (\n            <Alert\n              type=\"warning\"\n              showIcon\n              message={t('session.launcher.NoFolderMounted')}\n            />\n          )}\n          {form.getFieldValue('autoMountedFolderNames')?.length > 0 ? (\n            <Descriptions size=\"small\">\n              <Descriptions.Item label={t('data.AutomountFolders')}>\n                {_.map(form.getFieldValue('autoMountedFolderNames'), (name) => {\n                  return <Tag>{name}</Tag>;\n                })}\n              </Descriptions.Item>\n            </Descriptions>\n          ) : null}\n        </BAIFlex>\n      </BAICard>\n      <BAICard\n        title=\"Network\"\n        showDivider\n        size=\"small\"\n        status={form.getFieldError('ports').length > 0 ? 'error' : undefined}\n        extraButtonTitle={t('button.Edit')}\n        onClickExtraButton={() => {\n          onClickEditStep('network');\n        }}\n      >\n        <Descriptions size=\"small\">\n          <Descriptions.Item label={t('session.launcher.PreOpenPortTitle')}>\n            <BAIFlex direction=\"row\" gap=\"xs\" style={{ flex: 1 }} wrap=\"wrap\">\n              {/* {form.getFieldValue('environments').image} */}\n              {_.sortBy(form.getFieldValue('ports'), (v) => parseInt(v)).map(\n                (v, idx) => (\n                  <PortTag key={idx + v} value={v} style={{ margin: 0 }}>\n                    {v}\n                  </PortTag>\n                ),\n              )}\n\n              {!_.isArray(form.getFieldValue('ports')) ||\n              form.getFieldValue('ports')?.length === 0 ? (\n                <Typography.Text type=\"secondary\">\n                  {t('general.None')}\n                </Typography.Text>\n              ) : null}\n            </BAIFlex>\n          </Descriptions.Item>\n        </Descriptions>\n      </BAICard>\n    </>\n  );\n};\n\nexport default SessionLauncherPreview;\n","import { useValidateSessionName } from '../hooks/useValidateSessionName';\nimport { Form, FormItemProps, Input } from 'antd';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface SessionNameFormItemProps extends FormItemProps {}\n\nexport interface SessionNameFormItemValue {\n  sessionName: string;\n}\n\nconst SessionNameFormItem: React.FC<SessionNameFormItemProps> = ({\n  ...formItemProps\n}) => {\n  const { t } = useTranslation();\n  const validationRules = useValidateSessionName();\n  return (\n    <Form.Item\n      label={t('session.launcher.SessionName')}\n      name=\"sessionName\"\n      validateDebounce={200}\n      // Original rule : /^(?=.{4,64}$)\\w[\\w.-]*\\w$/\n      // https://github.com/lablup/backend.ai/blob/main/src/ai/backend/manager/api/session.py#L355-L356\n      rules={validationRules}\n      {...formItemProps}\n    >\n      <Input\n        allowClear\n        autoComplete=\"off\"\n        count={{\n          max: 64,\n          show: true,\n        }}\n      />\n    </Form.Item>\n  );\n};\n\nexport default SessionNameFormItem;\n","import { SessionHistory, useBAISettingUserState } from './useBAISetting';\nimport { useEventNotStable } from './useEventNotStable';\nimport { generateRandomString } from 'backend.ai-ui';\nimport _ from 'lodash';\n\nexport const useRecentSessionHistory = () => {\n  const [recentSessions, setRecentSessionHistory] = useBAISettingUserState(\n    'recentSessionHistory',\n  );\n\n  const push = useEventNotStable(\n    ({\n      id,\n      params,\n      createdAt,\n      name,\n    }: SelectivePartial<SessionHistory, 'id' | 'createdAt'>) => {\n      const newHistory: SessionHistory = {\n        id: id ?? generateRandomString(8),\n        params,\n        createdAt: createdAt ?? new Date().toISOString(),\n        name: name,\n      };\n      // push new history to the top of recentSessionHistory and keep it up to 5\n      const newRecentSessionHistory = _.sortBy(\n        [newHistory, ...(recentSessions || [])],\n        '-createdAt',\n      ).slice(0, 5);\n      setRecentSessionHistory(newRecentSessionHistory);\n    },\n  );\n  const clear = useEventNotStable(() => setRecentSessionHistory([]));\n  const remove = useEventNotStable((id: string) => {\n    const newRecentSessionHistory = (recentSessions || []).filter(\n      (item) => item.id !== id,\n    );\n    setRecentSessionHistory(newRecentSessionHistory);\n  });\n\n  const update = useEventNotStable((id: string, name: string) => {\n    const newRecentSessionHistory = (recentSessions || []).map((item) => {\n      if (item.id === id) {\n        return {\n          ...item,\n          name,\n        };\n      }\n      return item;\n    });\n    setRecentSessionHistory(newRecentSessionHistory);\n  });\n\n  return [\n    recentSessions,\n    {\n      push,\n      clear,\n      remove,\n      update,\n    },\n  ] as const;\n};\n\nexport const usePinnedSessionHistory = () => {\n  const [pinnedSessionHistory, setPinnedSessionHistory] =\n    useBAISettingUserState('pinnedSessionHistory');\n  const [recentSessionHistory] = useBAISettingUserState('recentSessionHistory');\n\n  const pin = useEventNotStable((id: string) => {\n    const pinnedItem = (recentSessionHistory || []).find(\n      (item) => item.id === id,\n    );\n    pinnedItem &&\n      setPinnedSessionHistory([...(pinnedSessionHistory || []), pinnedItem]);\n  });\n\n  const unpin = useEventNotStable((id: string) => {\n    const newPinnedSessionHistory = (pinnedSessionHistory || []).filter(\n      (item) => item.id !== id,\n    );\n    setPinnedSessionHistory(newPinnedSessionHistory);\n  });\n\n  const update = useEventNotStable((id: string, name: string) => {\n    const newPinnedSessionHistory = (pinnedSessionHistory || []).map((item) => {\n      if (item.id === id) {\n        return {\n          ...item,\n          name,\n        };\n      }\n      return item;\n    });\n    setPinnedSessionHistory(newPinnedSessionHistory);\n  });\n\n  return [\n    pinnedSessionHistory,\n    {\n      pin,\n      unpin,\n      update,\n    },\n  ] as const;\n};\n","import { useBackendAIImageMetaData } from '../hooks';\nimport { SessionHistory } from '../hooks/useBAISetting';\nimport {\n  usePinnedSessionHistory,\n  useRecentSessionHistory,\n} from '../hooks/useRecentSessionHistory';\nimport {\n  ResourceNumbersOfSession,\n  SessionLauncherFormValue,\n} from '../pages/SessionLauncherPage';\nimport ImageMetaIcon from './ImageMetaIcon';\nimport QuestionIconWithTooltip from './QuestionIconWithTooltip';\nimport { Button, theme, Tooltip, Typography } from 'antd';\nimport { createStyles } from 'antd-style';\nimport {\n  BAIModal,\n  BAIModalProps,\n  BAITable,\n  BAIFlex,\n  BAILink,\n} from 'backend.ai-ui';\nimport dayjs from 'dayjs';\nimport _ from 'lodash';\nimport { PinIcon } from 'lucide-react';\nimport React, { Key, useMemo, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyle = createStyles(({ css }) => ({\n  fixEditableVerticalAlign: css`\n    & {\n      margin-top: 0px !important;\n    }\n  `,\n}));\n\ninterface SessionTemplateModalProps\n  extends Omit<BAIModalProps, 'onOk' | 'onCancel'> {\n  onRequestClose: (formValue?: SessionLauncherFormValue) => void;\n}\n\ninterface ParsedSessionHistory\n  extends SessionLauncherFormValue,\n    SessionHistory {\n  pinned?: boolean;\n}\n\nconst SessionTemplateModal: React.FC<SessionTemplateModalProps> = ({\n  ...modalProps\n}) => {\n  const { t } = useTranslation();\n  const { styles } = useStyle();\n  const [sessionHistory, { update: updateSessionHistory }] =\n    useRecentSessionHistory();\n  const [hoverRowKey, setHoverRowKey] = useState<Key | null>(null);\n\n  const [, { getImageAliasName, getBaseVersion }] = useBackendAIImageMetaData();\n  const [pinnedSessionHistory, { pin, unpin, update: updatePinnedHistory }] =\n    usePinnedSessionHistory();\n\n  const [, setSelectedHistoryId] = useState<string>();\n  const { token } = theme.useToken();\n\n  const parsedSessionHistory: Array<ParsedSessionHistory> = useMemo(() => {\n    const parseToFormValues = (history: SessionHistory, isPinned: boolean) => {\n      const params = new URLSearchParams(history.params);\n      const formValues: SessionLauncherFormValue = JSON.parse(\n        params.get('formValues') || '{}',\n      );\n      return {\n        ...formValues,\n        pinned: isPinned,\n        name: history.name,\n      };\n    };\n\n    // const params = new URLSearchParams(history.params);\n    //   const formValues: SessionLauncherFormValue = JSON.parse(\n    //     params.get('formValues') || '{}',\n    //   );\n    const recent = _.map(sessionHistory, (history) => ({\n      ...history,\n      ...parseToFormValues(history, false),\n    }));\n\n    const pinned = _.map(pinnedSessionHistory, (history) => ({\n      ...history,\n      ...parseToFormValues(history, true),\n    }));\n\n    return _.chain([...pinned, ...recent])\n      .unionBy('id')\n      .value();\n  }, [sessionHistory, pinnedSessionHistory]);\n\n  return (\n    <BAIModal\n      width={800}\n      title={t('session.launcher.RecentHistory')}\n      footer={null}\n      onCancel={() => {\n        // reset\n        setSelectedHistoryId(undefined);\n        modalProps.onRequestClose();\n      }}\n      {...modalProps}\n    >\n      <BAIFlex direction=\"column\" align=\"stretch\" gap=\"sm\">\n        <Typography.Text>\n          {t('session.launcher.YouCanStartWithHistory')}\n        </Typography.Text>\n        <BAITable<ParsedSessionHistory>\n          rowSelection={{\n            selectedRowKeys: pinnedSessionHistory?.map((item) => item.id),\n            columnWidth: 0,\n            hideSelectAll: true,\n            renderCell: () => null,\n          }}\n          scroll={{ x: 'max-content' }}\n          dataSource={parsedSessionHistory}\n          pagination={false}\n          onRow={(record) => ({\n            onMouseEnter: () => setHoverRowKey(record.id),\n            onMouseLeave: () => setHoverRowKey(null),\n          })}\n          rowKey={(record) => record.id}\n          columns={[\n            {\n              title: (\n                <BAIFlex gap={'xxs'}>\n                  <PinIcon />\n                  <QuestionIconWithTooltip\n                    title={t('session.launcher.PinnedHistoryTooltip')}\n                  />\n                </BAIFlex>\n              ),\n              dataIndex: 'pinned',\n              width: 40,\n              render: (_value, record) => {\n                const isPinned = !!record.pinned;\n                const isHovered = hoverRowKey === record.id;\n                return isPinned ? (\n                  <Button\n                    size=\"small\"\n                    onClick={() => {\n                      unpin(record.id);\n                      // TODO: add it to recent session history\n                    }}\n                    type=\"link\"\n                  >\n                    <PinIcon />\n                  </Button>\n                ) : (\n                  <Button\n                    size=\"small\"\n                    onClick={() => pin(record.id)}\n                    type=\"link\"\n                  >\n                    <PinIcon\n                      style={{\n                        color: isHovered\n                          ? token.colorTextQuaternary\n                          : 'transparent',\n                      }}\n                    />\n                  </Button>\n                );\n              },\n            },\n            {\n              title: t('session.launcher.SessionNameShort'),\n              dataIndex: 'name',\n              render: (name, record) => {\n                const displayName = name || record.id.split('-')[0];\n                return (\n                  <Typography.Text\n                    className={styles.fixEditableVerticalAlign}\n                    editable={{\n                      onChange(value) {\n                        if (!_.isEmpty(value)) {\n                          updateSessionHistory(record.id, value);\n                          record.pinned &&\n                            updatePinnedHistory(record.id, value);\n                        }\n                      },\n                      text: displayName,\n                    }}\n                  >\n                    <BAILink\n                      type=\"hover\"\n                      onClick={() => {\n                        modalProps.onRequestClose?.(\n                          JSON.parse(\n                            new URLSearchParams(record.params || '').get(\n                              'formValues',\n                            ) || '{}',\n                          ),\n                        );\n                      }}\n                    >\n                      {displayName}\n                    </BAILink>\n                  </Typography.Text>\n                );\n              },\n            },\n            {\n              title: t('session.launcher.Environments'),\n              dataIndex: ['environments', 'version'],\n              render: (_version, record) => {\n                const imageStr =\n                  record.environments.version || record.environments.manual;\n                return (\n                  imageStr && (\n                    <Tooltip title={imageStr} placement=\"right\">\n                      <BAIFlex gap={'xxs'}>\n                        <ImageMetaIcon image={imageStr} />\n                        <Typography.Text>\n                          {getImageAliasName(imageStr)}{' '}\n                          {getBaseVersion(imageStr)}\n                        </Typography.Text>\n                      </BAIFlex>\n                    </Tooltip>\n                  )\n                );\n              },\n              onCell: () => ({\n                style: { maxWidth: 250, textOverflow: 'ellipsis' },\n              }),\n            },\n            {\n              title: t('session.launcher.ResourceAllocation'),\n              dataIndex: 'resource',\n              render: (resource) => {\n                // return JSON.stringify(resource)\n                return (\n                  <BAIFlex gap={'xs'}>\n                    <ResourceNumbersOfSession resource={resource} />\n                  </BAIFlex>\n                );\n              },\n            },\n            // {\n            //   dataIndex: 'mounts',\n            //   render: (value, record) => {\n            //     return _.join(record.mounts,', ');\n            //   }\n            // },\n            {\n              title: t('session.launcher.CreatedAt'),\n              dataIndex: 'createdAt',\n              render: (createdAt: string) => {\n                return dayjs(createdAt).fromNow();\n              },\n            },\n          ]}\n        />\n      </BAIFlex>\n      {/* <Tabs\n        defaultActiveKey=\"history\"\n        items={[\n          {\n            key: 'template',\n            label: t('session.launcher.Template'),\n            children: <div>Template</div>,\n          },\n          {\n            key: 'history',\n            label: t('session.launcher.RecentHistory'),\n            children: (\n\n            ),\n          },\n        ]}\n      /> */}\n    </BAIModal>\n  );\n};\n\nexport default SessionTemplateModal;\n","import BAIIntervalView from '../components/BAIIntervalView';\nimport DatePickerISO from '../components/DatePickerISO';\nimport EnvVarFormList, {\n  sanitizeSensitiveEnv,\n  EnvVarFormListValue,\n} from '../components/EnvVarFormList';\nimport ImageEnvironmentSelectFormItems, {\n  ImageEnvironmentFormInput,\n} from '../components/ImageEnvironmentSelectFormItems';\nimport { mainContentDivRefState } from '../components/MainLayout/MainLayout';\nimport PortSelectFormItem, {\n  PortSelectFormValues,\n} from '../components/PortSelectFormItem';\nimport ResourceNumber from '../components/ResourceNumber';\nimport ResourceAllocationFormItems, {\n  ResourceAllocationFormValue,\n} from '../components/SessionFormItems/ResourceAllocationFormItems';\nimport SessionLauncherValidationTour from '../components/SessionLauncherErrorTourProps';\nimport SessionLauncherFormIncompatibleValueChecker from '../components/SessionLauncherFormIncompatibleValueChecker';\nimport SessionLauncherPreview from '../components/SessionLauncherPreview';\nimport SessionNameFormItem, {\n  SessionNameFormItemValue,\n} from '../components/SessionNameFormItem';\nimport SessionOwnerSetterCard, {\n  SessionOwnerSetterFormValues,\n} from '../components/SessionOwnerSetterCard';\nimport SessionTemplateModal from '../components/SessionTemplateModal';\nimport VFolderTableFormItem, {\n  VFolderTableFormValues,\n} from '../components/VFolderTableFormItem';\nimport { formatDuration, convertToBinaryUnit } from '../helper';\nimport {\n  useSuspendedBackendaiClient,\n  useUpdatableState,\n  useWebUINavigate,\n} from '../hooks';\nimport { useCurrentUserRole } from '../hooks/backendai';\nimport { useCurrentResourceGroupState } from '../hooks/useCurrentProject';\nimport { useRecentSessionHistory } from '../hooks/useRecentSessionHistory';\n// @ts-ignore\nimport customCSS from './SessionLauncherPage.css?raw';\nimport {\n  DoubleRightOutlined,\n  LeftOutlined,\n  PlayCircleFilled,\n  PlayCircleOutlined,\n  QuestionCircleOutlined,\n  RightOutlined,\n} from '@ant-design/icons';\nimport { useDebounceFn, useToggle } from 'ahooks';\nimport {\n  App,\n  Button,\n  Card,\n  Checkbox,\n  Col,\n  Form,\n  Grid,\n  Input,\n  InputNumber,\n  Popconfirm,\n  Radio,\n  Row,\n  Select,\n  StepProps,\n  Steps,\n  Switch,\n  Tooltip,\n  Typography,\n  theme,\n} from 'antd';\nimport {\n  filterOutEmpty,\n  BAIFlex,\n  useErrorMessageResolver,\n  BAIButton,\n  generateRandomString,\n} from 'backend.ai-ui';\nimport dayjs from 'dayjs';\nimport { useAtomValue } from 'jotai';\nimport _ from 'lodash';\nimport React, { useEffect, useLayoutEffect, useMemo, useState } from 'react';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { useLocation } from 'react-router-dom';\nimport { useStartSession } from 'src/hooks/useStartSession';\nimport {\n  JsonParam,\n  NumberParam,\n  StringParam,\n  useQueryParams,\n  withDefault,\n} from 'use-query-params';\n\ntype SessionLauncherFormData = Omit<\n  Required<OptionalFieldsOnly<SessionLauncherFormValue>>,\n  'autoMountedFolderNames' | 'mounts'\n>;\n\nexport interface SessionResources {\n  group_name?: string;\n  domain?: string;\n  type?: 'interactive' | 'batch' | 'inference' | 'system';\n  cluster_mode: 'single-node' | 'multi-node';\n  cluster_size: number;\n  maxWaitSeconds?: number;\n  starts_at?: string;\n  startupCommand?: string;\n  bootstrap_script?: string;\n  owner_access_key?: string;\n  enqueueOnly?: boolean;\n  config?: {\n    resources?: {\n      cpu: number;\n      mem: string;\n      [key: string]: number | string;\n    };\n    resource_opts?: {\n      shmem?: string;\n      allow_fractional_resource_fragmentation?: boolean;\n    };\n    mount_ids?: string[];\n    mount_id_map?: {\n      [key: string]: string;\n    };\n    environ?: {\n      [key: string]: string;\n    };\n    scaling_group?: string;\n    preopen_ports?: number[];\n    agent_list?: string[];\n  };\n}\n\ninterface SessionLauncherValue {\n  sessionType: 'interactive' | 'batch' | 'inference' | 'system';\n  batch: {\n    enabled: boolean;\n    scheduleDate?: string;\n    command?: string;\n    timeoutEnabled?: boolean;\n    timeout?: string;\n    timeoutUnit?: string;\n  };\n  allocationPreset: string;\n  envvars: EnvVarFormListValue[];\n  hpcOptimization: {\n    autoEnabled: boolean;\n    OMP_NUM_THREADS?: string;\n    OPENBLAS_NUM_THREADS?: string;\n  };\n  bootstrap_script?: string;\n}\n\nexport type SessionLauncherFormValue = SessionLauncherValue &\n  SessionNameFormItemValue &\n  ImageEnvironmentFormInput &\n  ResourceAllocationFormValue &\n  VFolderTableFormValues &\n  PortSelectFormValues &\n  SessionOwnerSetterFormValues;\n\ntype SessionMode = 'normal' | 'inference' | 'import';\n\nexport type AppOption = {\n  'session-name'?: string;\n  'session-uuid'?: string;\n  'access-key'?: string;\n  mode?: SessionMode;\n  'app-services'?: Array<string>;\n  runtime?: string;\n  filename?: string;\n  // [key in string]: any;\n};\n\nexport type SessionLauncherStepKey =\n  | 'sessionType'\n  | 'environment'\n  | 'storage'\n  | 'network'\n  | 'review';\n\ninterface StepPropsWithKey extends StepProps {\n  key: SessionLauncherStepKey;\n}\n\nconst SessionLauncherPage = () => {\n  const app = App.useApp();\n  const { getErrorMessage } = useErrorMessageResolver();\n\n  const mainContentDivRef = useAtomValue(mainContentDivRefState);\n  const baiClient = useSuspendedBackendaiClient();\n  const supportsMountById = baiClient.supports('mount-by-id');\n  const supportBatchTimeout = baiClient?.supports('batch-timeout') ?? false;\n  const currentUserRole = useCurrentUserRole();\n  const [, setCurrentGlobalResourceGroup] = useCurrentResourceGroupState();\n\n  const { startSession, defaultFormValues, upsertSessionNotification } =\n    useStartSession();\n  const StepParam = withDefault(NumberParam, 0);\n  const FormValuesParam = withDefault(JsonParam, defaultFormValues);\n  const AppOptionParam = withDefault(JsonParam, {});\n  const [\n    {\n      step: currentStep,\n      formValues: formValuesFromQueryParams,\n      redirectTo,\n      // TODO: handle appOption to launch app with specific options\n      // appOption: appOptionFromQueryParams,\n    },\n    setQuery,\n  ] = useQueryParams({\n    step: StepParam,\n    formValues: FormValuesParam,\n    redirectTo: StringParam,\n    appOption: AppOptionParam,\n  });\n\n  const { search } = useLocation();\n  const webuiNavigate = useWebUINavigate();\n\n  const [isOpenTemplateModal, { toggle: toggleIsOpenTemplateModal }] =\n    useToggle();\n  const [, { push: pushSessionHistory }] = useRecentSessionHistory();\n\n  const { run: syncFormToURLWithDebounce } = useDebounceFn(\n    () => {\n      // To sync the latest form values to URL,\n      // 'trailing' is set to true, and get the form values here.\"\n      const currentValue = form.getFieldsValue();\n      setQuery(\n        {\n          formValues: _.assign(\n            _.omit(form.getFieldsValue(), [\n              'environments.image',\n              'environments.customizedTag',\n              'autoMountedFolderNames',\n              'owner',\n              'envvars',\n            ]),\n            {\n              envvars: sanitizeSensitiveEnv(currentValue.envvars),\n            },\n          ),\n        },\n        'replaceIn',\n      );\n    },\n    {\n      leading: false,\n      wait: 500,\n      trailing: true,\n    },\n  );\n\n  const setCurrentStep = (nextStep: number) => {\n    setQuery(\n      {\n        step: nextStep,\n      },\n      'pushIn',\n    );\n  };\n  const { token } = theme.useToken();\n\n  const { t } = useTranslation();\n\n  const screens = Grid.useBreakpoint();\n\n  const [form] = Form.useForm<SessionLauncherFormValue>();\n\n  useEffect(() => {\n    if (!_.isEmpty(formValuesFromQueryParams)) {\n      form.validateFields().catch(() => {});\n    }\n    // Run this memo only for the first time\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const mergedInitialValues = useMemo(() => {\n    return _.merge({}, defaultFormValues, formValuesFromQueryParams);\n  }, [defaultFormValues, formValuesFromQueryParams]);\n\n  // ScrollTo top when step is changed\n  useEffect(() => {\n    mainContentDivRef.current?.scrollTo(0, 0);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentStep]);\n\n  // before initialFormValues is set, use getFieldValue and useWatch will return undefined\n  const sessionType =\n    Form.useWatch('sessionType', { form, preserve: true }) ||\n    form.getFieldValue('sessionType') ||\n    formValuesFromQueryParams.sessionType;\n\n  const steps: Array<StepPropsWithKey> = filterOutEmpty([\n    {\n      title: t('session.launcher.SessionType'),\n      key: 'sessionType',\n      // status: form.getFieldError('name').length > 0 ? 'error' : undefined,\n    },\n    {\n      title: `${t('session.launcher.Environments')} & ${t(\n        'session.launcher.ResourceAllocation',\n      )} `,\n      key: 'environment',\n    },\n    sessionType !== 'inference' && {\n      title: t('webui.menu.Data&Storage'),\n      key: 'storage',\n    },\n    {\n      title: t('session.launcher.Network'),\n      key: 'network',\n    },\n    {\n      title: t('session.launcher.ConfirmAndLaunch'),\n      icon: <PlayCircleFilled />,\n      // @ts-ignore\n      key: 'review',\n    },\n  ]);\n\n  const currentStepKey = steps[currentStep]?.key;\n\n  const hasError = _.some(\n    form.getFieldsError(),\n    (item) => item.errors.length > 0,\n  );\n\n  const [finalStepLastValidateTime, setFinalStepLastValidateTime] =\n    useUpdatableState('first'); // Force re-render after validation in final step.\n\n  useEffect(() => {\n    if (currentStep === steps.length - 1) {\n      form\n        .validateFields()\n        .catch(() => {})\n        .finally(() => setFinalStepLastValidateTime());\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentStep, form, setFinalStepLastValidateTime, steps.length]);\n\n  useEffect(() => {\n    if (finalStepLastValidateTime !== 'first') {\n      if (hasError) {\n        setValidationTourOpen(true);\n      } else {\n        setValidationTourOpen(false);\n      }\n    }\n  }, [finalStepLastValidateTime, hasError]);\n\n  const [validationTourOpen, setValidationTourOpen] = useState(false);\n\n  const [isQueryReset, setIsQueryReset] = useState(false);\n  useLayoutEffect(() => {\n    if (isQueryReset) {\n      form.resetFields();\n      setIsQueryReset(false);\n    }\n  }, [isQueryReset, form]);\n\n  return (\n    <BAIFlex\n      direction=\"column\"\n      align=\"stretch\"\n      style={{\n        justifyContent: 'revert',\n        // height: 500,\n        // overflow: 'scroll',\n      }}\n      gap={'md'}\n    >\n      <style>{customCSS}</style>\n      <BAIFlex direction=\"row\" gap=\"md\" align=\"start\">\n        <BAIFlex\n          direction=\"column\"\n          align=\"stretch\"\n          style={{ flex: 1, maxWidth: 700 }}\n        >\n          <BAIFlex direction=\"row\" justify=\"between\">\n            <Typography.Title level={4} style={{ marginTop: 0 }}>\n              {t('session.launcher.StartNewSession')}\n            </Typography.Title>\n            <BAIFlex direction=\"row\" gap={'sm'}>\n              <Button\n                type=\"link\"\n                // icon={<BlockOutlined />}\n                // disabled\n                style={{ paddingRight: 0, paddingLeft: 0 }}\n                onClick={() => toggleIsOpenTemplateModal()}\n              >\n                {t('session.launcher.RecentHistory')}\n              </Button>\n            </BAIFlex>\n          </BAIFlex>\n          {/* <Suspense fallback={<FlexActivityIndicator />}> */}\n          <Form.Provider\n            onFormChange={() => {\n              // use OnFormChange instead of Form's onValuesChange,\n              // because onValuesChange will not be triggered when form is changed programmatically\n              syncFormToURLWithDebounce();\n            }}\n          >\n            <Form\n              form={form}\n              layout=\"vertical\"\n              initialValues={mergedInitialValues}\n            >\n              <SessionLauncherFormIncompatibleValueChecker form={form} />\n              <BAIFlex\n                direction=\"column\"\n                align=\"stretch\"\n                gap=\"md\"\n                // style={{  }}\n              >\n                {/* Step 0 fields */}\n                <Card\n                  title={t('session.launcher.SessionType')}\n                  style={{\n                    display:\n                      currentStepKey === 'sessionType' ? 'block' : 'none',\n                  }}\n                >\n                  <Form.Item name=\"sessionType\">\n                    <Radio.Group\n                      options={[\n                        {\n                          label: (\n                            <>\n                              <Typography.Text code>\n                                {t('session.launcher.InteractiveMode')}\n                              </Typography.Text>{' '}\n                              <Typography.Text type=\"secondary\">\n                                {t('session.launcher.InteractiveModeDesc')}\n                              </Typography.Text>\n                            </>\n                          ),\n                          value: 'interactive',\n                        },\n                        {\n                          label: (\n                            <>\n                              <Typography.Text code>\n                                {t('session.launcher.BatchMode')}\n                              </Typography.Text>{' '}\n                              <Typography.Text type=\"secondary\">\n                                {t('session.launcher.BatchModeDesc')}\n                              </Typography.Text>\n                            </>\n                          ),\n                          value: 'batch',\n                        },\n                      ]}\n                    />\n                  </Form.Item>\n                  <SessionNameFormItem />\n                  <Form.Item\n                    name=\"bootstrap_script\"\n                    label=\"Bootstrap Script\"\n                    hidden\n                  >\n                    <Input />\n                  </Form.Item>\n                </Card>\n\n                {sessionType === 'batch' && (\n                  <Card\n                    title={t('session.launcher.BatchModeConfig')}\n                    style={{\n                      display:\n                        currentStepKey === 'sessionType' ? 'block' : 'none',\n                    }}\n                  >\n                    <Form.Item\n                      label={t('session.launcher.StartUpCommand')}\n                      name={['batch', 'command']}\n                      rules={[\n                        {\n                          required: true,\n                          type: 'string',\n                        },\n                      ]}\n                    >\n                      <Input.TextArea autoSize />\n                    </Form.Item>\n                    <Form.Item\n                      noStyle\n                      dependencies={[['batch', 'scheduleDate']]}\n                    >\n                      {() => {\n                        const scheduleDate = form.getFieldValue([\n                          'batch',\n                          'scheduleDate',\n                        ]);\n                        return (\n                          <BAIIntervalView\n                            delay={1000}\n                            callback={() => {\n                              const scheduleDate = form.getFieldValue([\n                                'batch',\n                                'scheduleDate',\n                              ]);\n                              if (scheduleDate) {\n                                if (dayjs(scheduleDate).isBefore(dayjs())) {\n                                  if (\n                                    form.getFieldError([\n                                      'batch',\n                                      'scheduleDate',\n                                    ]).length === 0\n                                  ) {\n                                    form.validateFields([\n                                      ['batch', 'scheduleDate'],\n                                    ]);\n                                  }\n                                  return undefined;\n                                } else {\n                                  return dayjs(scheduleDate).fromNow();\n                                }\n                              } else {\n                                return undefined;\n                              }\n                            }}\n                            triggerKey={scheduleDate ? scheduleDate : 'none'}\n                            render={(time) => {\n                              return (\n                                <Form.Item\n                                  label={t('session.launcher.SessionStartTime')}\n                                  extra={time}\n                                >\n                                  <BAIFlex direction=\"row\" gap={'xs'}>\n                                    <Form.Item\n                                      noStyle\n                                      name={['batch', 'enabled']}\n                                      valuePropName=\"checked\"\n                                    >\n                                      <Checkbox\n                                        onChange={(e) => {\n                                          if (\n                                            e.target.checked &&\n                                            _.isEmpty(\n                                              form.getFieldValue([\n                                                'batch',\n                                                'scheduleDate',\n                                              ]),\n                                            )\n                                          ) {\n                                            form.setFieldValue(\n                                              ['batch', 'scheduleDate'],\n                                              dayjs()\n                                                .add(2, 'minutes')\n                                                .toISOString(),\n                                            );\n                                          } else if (\n                                            e.target.checked === false\n                                          ) {\n                                            form.setFieldValue(\n                                              ['batch', 'scheduleDate'],\n                                              undefined,\n                                            );\n                                          }\n                                          form.validateFields([\n                                            ['batch', 'scheduleDate'],\n                                          ]);\n                                        }}\n                                      >\n                                        {t('session.launcher.Enable')}\n                                      </Checkbox>\n                                    </Form.Item>\n                                    <Form.Item\n                                      noStyle\n                                      // dependencies={[['batch', 'enabled']]}\n                                      shouldUpdate={(prev, next) => {\n                                        return (\n                                          // @ts-ignore\n                                          prev.batch?.enabled !==\n                                          next.batch?.enabled\n                                        );\n                                      }}\n                                    >\n                                      {() => {\n                                        const disabled =\n                                          form.getFieldValue('batch')\n                                            ?.enabled !== true;\n                                        return (\n                                          <>\n                                            <Form.Item\n                                              name={['batch', 'scheduleDate']}\n                                              noStyle\n                                              rules={[\n                                                {\n                                                  // required: true,\n                                                  validator: async (\n                                                    _rule,\n                                                    value,\n                                                  ) => {\n                                                    if (\n                                                      value &&\n                                                      dayjs(value).isBefore(\n                                                        dayjs(),\n                                                      )\n                                                    ) {\n                                                      return Promise.reject(\n                                                        t(\n                                                          'session.launcher.StartTimeMustBeInTheFuture',\n                                                        ),\n                                                      );\n                                                    }\n                                                    return Promise.resolve();\n                                                  },\n                                                },\n                                              ]}\n                                            >\n                                              <DatePickerISO\n                                                disabled={disabled}\n                                                showTime\n                                                localFormat\n                                                disabledDate={(value) => {\n                                                  return value.isBefore(\n                                                    dayjs().startOf('day'),\n                                                  );\n                                                }}\n                                              />\n                                            </Form.Item>\n                                            {/* <Form.Item\n                                              noStyle\n                                              name={['batch', 'scheduleTime']}\n                                            >\n                                              <TimePicker disabled={disabled} />\n                                            </Form.Item> */}\n                                          </>\n                                        );\n                                      }}\n                                    </Form.Item>\n                                  </BAIFlex>\n                                </Form.Item>\n                              );\n                            }}\n                          />\n                        );\n                      }}\n                    </Form.Item>\n\n                    {supportBatchTimeout ? (\n                      <Form.Item\n                        noStyle\n                        dependencies={[\n                          ['batch', 'timeoutEnabled'],\n                          ['batch', 'timeoutUnit'],\n                        ]}\n                      >\n                        {() => {\n                          const timeout = form.getFieldValue([\n                            'batch',\n                            'timeout',\n                          ]);\n                          const unit = form.getFieldValue([\n                            'batch',\n                            'timeoutUnit',\n                          ]);\n\n                          const timeDuration = dayjs.duration(\n                            timeout,\n                            unit ?? 's',\n                          );\n\n                          const formattedDuration = formatDuration(\n                            timeDuration,\n                            t,\n                          );\n\n                          const durationText =\n                            !_.isNull(timeout) && _.toFinite(timeout) > 0\n                              ? formattedDuration\n                              : null;\n                          return (\n                            <Form.Item\n                              label={t(\n                                'session.launcher.BatchJobTimeoutDuration',\n                              )}\n                              tooltip={t(\n                                'session.launcher.BatchJobTimeoutDurationDesc',\n                              )}\n                              // extra={durationText}\n                              help={durationText}\n                            >\n                              <BAIFlex direction=\"row\" gap={'xs'}>\n                                <Form.Item\n                                  noStyle\n                                  name={['batch', 'timeoutEnabled']}\n                                  valuePropName=\"checked\"\n                                >\n                                  <Checkbox\n                                    onChange={(e) => {\n                                      if (e.target.checked === false) {\n                                        form.setFieldValue(\n                                          ['batch', 'timeout'],\n                                          undefined,\n                                        );\n                                      }\n                                      form.validateFields([\n                                        ['batch', 'timeout'],\n                                      ]);\n                                    }}\n                                  >\n                                    {t('session.launcher.Enable')}\n                                  </Checkbox>\n                                </Form.Item>\n                                <Form.Item\n                                  noStyle\n                                  dependencies={[['batch', 'timeoutEnabled']]}\n                                >\n                                  {() => {\n                                    const disabled =\n                                      form.getFieldValue([\n                                        'batch',\n                                        'timeoutEnabled',\n                                      ]) !== true;\n                                    return (\n                                      <>\n                                        <Form.Item\n                                          name={['batch', 'timeout']}\n                                          label={t(\n                                            'session.launcher.BatchJobTimeoutDuration',\n                                          )}\n                                          noStyle\n                                          rules={[\n                                            {\n                                              min: 0,\n                                              type: 'number',\n                                              message: t(\n                                                'error.AllowsPositiveNumberOnly',\n                                              ),\n                                            },\n                                            {\n                                              required: !disabled,\n                                            },\n                                          ]}\n                                        >\n                                          <InputNumber\n                                            disabled={disabled}\n                                            min={1}\n                                            addonAfter={\n                                              <Form.Item\n                                                noStyle\n                                                name={['batch', 'timeoutUnit']}\n                                              >\n                                                <Select\n                                                  tabIndex={-1}\n                                                  style={{ minWidth: 75 }}\n                                                  options={[\n                                                    {\n                                                      label: t('time.Sec'),\n                                                      value: 's',\n                                                    },\n                                                    {\n                                                      label: t('time.Min'),\n                                                      value: 'm',\n                                                    },\n                                                    {\n                                                      label: t('time.Hour'),\n                                                      value: 'h',\n                                                    },\n                                                    {\n                                                      label: t('time.Day'),\n                                                      value: 'd',\n                                                    },\n                                                    {\n                                                      label: t('time.Week'),\n                                                      value: 'w',\n                                                    },\n                                                  ]}\n                                                />\n                                              </Form.Item>\n                                            }\n                                          />\n                                        </Form.Item>\n                                      </>\n                                    );\n                                  }}\n                                </Form.Item>\n                              </BAIFlex>\n                            </Form.Item>\n                          );\n                        }}\n                      </Form.Item>\n                    ) : null}\n                  </Card>\n                )}\n\n                {(currentUserRole === 'admin' ||\n                  currentUserRole === 'superadmin') && (\n                  <SessionOwnerSetterCard\n                    style={{\n                      display:\n                        currentStepKey === 'sessionType' ? 'block' : 'none',\n                    }}\n                  />\n                )}\n\n                {sessionType === 'inference' && (\n                  <Card title=\"Inference Mode Configuration\">\n                    <Form.Item\n                      name={['inference', 'vFolderName']}\n                      label={t('session.launcher.ModelStorageToMount')}\n                      rules={[\n                        {\n                          required: true,\n                        },\n                      ]}\n                    >\n                      <Select />\n                      {/* <VFolderSelect\n                          filter={(vf) => vf.usage_mode === 'model'}\n                          autoSelectDefault\n                          /> */}\n                    </Form.Item>\n                  </Card>\n                )}\n\n                {/* Step Start*/}\n                <Card\n                  title={t('session.launcher.Environments')}\n                  style={{\n                    display:\n                      currentStepKey === 'environment' ? 'block' : 'none',\n                  }}\n                >\n                  <ErrorBoundary\n                    fallbackRender={() => {\n                      return null;\n                    }}\n                  >\n                    <ImageEnvironmentSelectFormItems />\n                  </ErrorBoundary>\n                  <Form.Item label={t('session.launcher.EnvironmentVariable')}>\n                    <EnvVarFormList\n                      name={'envvars'}\n                      formItemProps={{\n                        validateTrigger: ['onChange', 'onBlur'],\n                      }}\n                    />\n                  </Form.Item>\n                </Card>\n                <Card\n                  title={t('session.launcher.ResourceAllocation')}\n                  style={{\n                    display:\n                      currentStepKey === 'environment' ? 'block' : 'none',\n                  }}\n                >\n                  <ResourceAllocationFormItems\n                    enableAgentSelect={\n                      !baiClient._config.hideAgents &&\n                      baiClient.supports('agent-select')\n                    }\n                    enableNumOfSessions\n                    enableResourcePresets\n                    showRemainingWarning\n                  />\n                </Card>\n                <Card\n                  title={t('session.launcher.HPCOptimization')}\n                  style={{\n                    display:\n                      currentStepKey === 'environment' ? 'block' : 'none',\n                  }}\n                >\n                  <Form.Item noStyle>\n                    <BAIFlex direction=\"row\" gap={'sm'}>\n                      <Typography.Text>\n                        {t('session.launcher.SwitchOpenMPoptimization')}\n                      </Typography.Text>\n                      <Form.Item\n                        label={t('session.launcher.SwitchOpenMPoptimization')}\n                        name={['hpcOptimization', 'autoEnabled']}\n                        valuePropName=\"checked\"\n                        required\n                        noStyle\n                      >\n                        <Switch\n                          checkedChildren={'ON'}\n                          unCheckedChildren={'OFF'}\n                          onChange={(checked) => {\n                            if (checked) {\n                              form.setFieldsValue({\n                                hpcOptimization: {\n                                  autoEnabled: true,\n                                  OMP_NUM_THREADS: undefined,\n                                  OPENBLAS_NUM_THREADS: undefined,\n                                },\n                              });\n                            } else {\n                              form.setFieldsValue({\n                                hpcOptimization: {\n                                  autoEnabled: false,\n                                  OMP_NUM_THREADS: '1',\n                                  OPENBLAS_NUM_THREADS: '1',\n                                },\n                              });\n                            }\n                          }}\n                        />\n                      </Form.Item>\n                    </BAIFlex>\n                  </Form.Item>\n                  <Form.Item\n                    noStyle\n                    shouldUpdate={(prev, next) => {\n                      return (\n                        prev.hpcOptimization?.autoEnabled !==\n                        next.hpcOptimization?.autoEnabled\n                      );\n                    }}\n                  >\n                    {() => {\n                      const enabled = form.getFieldValue([\n                        'hpcOptimization',\n                        'autoEnabled',\n                      ]);\n                      return (\n                        <Row\n                          gutter={token.marginMD}\n                          style={{\n                            display: enabled ? 'none' : undefined,\n                            marginTop: token.marginMD,\n                          }}\n                        >\n                          <Col xs={24} sm={12}>\n                            <Form.Item\n                              style={{ flex: 1 }}\n                              label={t('session.launcher.NumOpenMPthreads')}\n                              name={['hpcOptimization', 'OMP_NUM_THREADS']}\n                              tooltip={\n                                <>\n                                  {t('session.launcher.OpenMPOptimization')}\n                                  <Trans\n                                    i18nKey={\n                                      'session.launcher.DescOpenMPOptimization'\n                                    }\n                                  />\n                                </>\n                              }\n                              required\n                            >\n                              <InputNumber\n                                min={1}\n                                max={1000}\n                                step={1}\n                                stringMode\n                                style={{ width: '100%' }}\n                              />\n                            </Form.Item>\n                          </Col>\n                          <Col xs={24} sm={12}>\n                            <Form.Item\n                              style={{ flex: 1 }}\n                              label={t('session.launcher.NumOpenBLASthreads')}\n                              name={['hpcOptimization', 'OPENBLAS_NUM_THREADS']}\n                              tooltip={\n                                <>\n                                  {t('session.launcher.OpenMPOptimization')}\n                                  <Trans\n                                    i18nKey={\n                                      'session.launcher.DescOpenMPOptimization'\n                                    }\n                                  />\n                                </>\n                              }\n                              required\n                            >\n                              <InputNumber\n                                min={1}\n                                max={1000}\n                                step={1}\n                                stringMode\n                                style={{ width: '100%' }}\n                              />\n                            </Form.Item>\n                          </Col>\n                        </Row>\n                      );\n                    }}\n                  </Form.Item>\n                </Card>\n                {/* Step Start*/}\n                <Card\n                  title={t('webui.menu.Data&Storage')}\n                  style={{\n                    display: currentStepKey === 'storage' ? 'block' : 'none',\n                  }}\n                >\n                  <Form.Item noStyle dependencies={['owner']}>\n                    {({ getFieldValue }) => {\n                      const ownerInfo = getFieldValue('owner');\n                      const isValidOwner =\n                        ownerInfo?.enabled &&\n                        _.every(_.omit(ownerInfo, 'enabled'), (key) => {\n                          return key !== undefined;\n                        });\n\n                      return (\n                        <VFolderTableFormItem\n                          rowKey={supportsMountById ? 'id' : 'name'}\n                          rowFilter={(vfolder) => {\n                            return (\n                              vfolder.status === 'ready' &&\n                              !vfolder.name?.startsWith('.')\n                            );\n                          }}\n                          tableProps={{\n                            ownerEmail: isValidOwner\n                              ? ownerInfo?.email\n                              : undefined,\n                          }}\n                        />\n                      );\n                    }}\n                  </Form.Item>\n                </Card>\n\n                {/* Step Start*/}\n                <Card\n                  title={t('session.launcher.Network')}\n                  style={{\n                    display: currentStepKey === 'network' ? 'block' : 'none',\n                  }}\n                >\n                  <PortSelectFormItem />\n                </Card>\n\n                {/* Step Start*/}\n                {currentStepKey === 'review' && (\n                  <SessionLauncherPreview\n                    onClickEditStep={(stepKey) => {\n                      const nextStep = _.findIndex(steps, { key: stepKey });\n                      setCurrentStep(nextStep);\n                    }}\n                  />\n                )}\n\n                <BAIFlex direction=\"row\" justify=\"between\">\n                  <BAIFlex gap={'sm'}>\n                    <Popconfirm\n                      title={t('button.Reset')}\n                      description={t('session.launcher.ResetFormConfirm')}\n                      onConfirm={() => {\n                        setQuery({}, 'replace');\n                        setIsQueryReset(true);\n                      }}\n                      icon={\n                        <QuestionCircleOutlined\n                          style={{ color: token.colorError }}\n                        />\n                      }\n                      okText={t('button.Reset')}\n                      okButtonProps={{\n                        danger: true,\n                      }}\n                    >\n                      <Button\n                        danger\n                        type=\"link\"\n                        style={{ paddingRight: 0, paddingLeft: 0 }}\n                      >\n                        {t('button.Reset')}\n                      </Button>\n                    </Popconfirm>\n                    {/* {currentStep === steps.length - 1 && (\n                      <Button\n                        icon={<SaveOutlined />}\n                        disabled\n                        onClick={() => {\n                          message.info(\n                            'Not implemented yet: Template edit modal',\n                          );\n                        }}\n                      >\n                        Save as a template\n                      </Button>\n                    )} */}\n                  </BAIFlex>\n                  <BAIFlex\n                    data-test-id=\"neo-session-launcher-tour-step-navigation\"\n                    direction=\"row\"\n                    gap=\"sm\"\n                  >\n                    {currentStep > 0 && (\n                      <Button\n                        onClick={() => {\n                          setCurrentStep(currentStep - 1);\n                        }}\n                        icon={<LeftOutlined />}\n                      >\n                        {t('button.Previous')}\n                      </Button>\n                    )}\n                    {currentStep === steps.length - 1 ? (\n                      <Tooltip\n                        title={\n                          hasError\n                            ? t('session.launcher.PleaseCompleteForm')\n                            : undefined\n                        }\n                      >\n                        <BAIButton\n                          type=\"primary\"\n                          icon={<PlayCircleOutlined />}\n                          disabled={hasError}\n                          action={async () => {\n                            const usedSearchParams = search;\n                            const values = await form\n                              .validateFields()\n                              .catch((e) => {\n                                console.error('validation errors', e);\n                              });\n\n                            // validation failed do nothing\n                            if (!values) {\n                              return;\n                            }\n\n                            if (\n                              _.isEmpty(values.mount_ids) ||\n                              values.mount_ids?.length === 0\n                            ) {\n                              const isConformed = await app.modal.confirm({\n                                title: t('session.launcher.NoFolderMounted'),\n                                content: (\n                                  <>\n                                    {t(\n                                      'session.launcher.HomeDirectoryDeletionDialog',\n                                    )}\n                                    <br />\n                                    <br />\n                                    {t(\n                                      'session.launcher.LaunchConfirmationDialog',\n                                    )}\n                                    <br />\n                                    <br />\n                                    {t('dialog.ask.DoYouWantToProceed')}\n                                  </>\n                                ),\n                                okText: t('session.launcher.Start'),\n                                closable: true,\n                              });\n                              if (!isConformed) return;\n                            }\n\n                            await startSession(values)\n                              .then((results) => {\n                                // After sending a create request, navigate to job page and set current resource group\n                                if (\n                                  results?.fulfilled &&\n                                  results.fulfilled.length > 0\n                                ) {\n                                  // Do not await here to speed up the navigation\n                                  upsertSessionNotification(results.fulfilled);\n                                  setCurrentGlobalResourceGroup(\n                                    values.resourceGroup,\n                                  );\n                                  pushSessionHistory({\n                                    params: usedSearchParams,\n                                    name: results.fulfilled[0].value\n                                      .sessionName,\n                                  });\n                                }\n                                // If at least one session creation is successful, navigate to job page and show success notifications\n                                if (\n                                  results?.fulfilled &&\n                                  results.fulfilled.length > 0\n                                ) {\n                                  webuiNavigate(redirectTo || '/job');\n                                }\n\n                                // If there are any failed session creations, show the first error message\n                                if (\n                                  results?.rejected &&\n                                  results.rejected.length > 0\n                                ) {\n                                  const error = results.rejected[0].reason;\n                                  app.modal.error({\n                                    title: error?.title,\n                                    content: getErrorMessage(error),\n                                  });\n                                }\n                              })\n                              .catch((error) => {\n                                // Unexpected error in `then` of allSettled\n                                console.error(\n                                  'Unexpected error during session creation:',\n                                  error,\n                                );\n                                app.message.error(t('error.UnexpectedError'));\n                              });\n                          }}\n                        >\n                          {t('session.launcher.Launch')}\n                        </BAIButton>\n                      </Tooltip>\n                    ) : (\n                      <Button\n                        type=\"primary\"\n                        ghost\n                        onClick={() => {\n                          setCurrentStep(currentStep + 1);\n                        }}\n                      >\n                        {t('button.Next')} <RightOutlined />\n                      </Button>\n                    )}\n                    {currentStep !== steps.length - 1 && (\n                      <Button\n                        onClick={() => {\n                          setCurrentStep(steps.length - 1);\n                        }}\n                      >\n                        {t('session.launcher.SkipToConfirmAndLaunch')}\n                        <DoubleRightOutlined />\n                      </Button>\n                    )}\n                  </BAIFlex>\n                </BAIFlex>\n              </BAIFlex>\n            </Form>\n          </Form.Provider>\n          {/* </Suspense> */}\n        </BAIFlex>\n        {screens.lg && (\n          <BAIFlex\n            data-test-id=\"neo-session-launcher-tour-step\"\n            style={{ position: 'sticky', top: 80 }}\n          >\n            <Steps\n              size=\"small\"\n              direction=\"vertical\"\n              current={currentStep}\n              onChange={(nextCurrent) => {\n                setCurrentStep(nextCurrent);\n              }}\n              items={_.map(steps, (s, idx) => ({\n                ...s,\n                status: idx === currentStep ? 'process' : 'wait',\n              }))}\n            />\n          </BAIFlex>\n        )}\n      </BAIFlex>\n      <SessionTemplateModal\n        onRequestClose={(formValue) => {\n          if (formValue) {\n            const fieldsValue = _.merge(\n              {\n                // reset fields related to optional and nested fields\n                sessionName: '',\n                ports: [],\n                vfoldersNameMap: {},\n                mount_ids: [],\n                mount_id_map: {},\n                bootstrap_script: '',\n                num_of_sessions: 1,\n                owner: {\n                  enabled: false,\n                  accesskey: '',\n                  domainName: '',\n                  email: undefined,\n                  project: '',\n                  resourceGroup: '',\n                },\n                environments: {\n                  manual: '',\n                },\n                batch: {\n                  enabled: false,\n                  command: undefined,\n                  scheduleDate: undefined,\n                },\n                agent: ['auto'], // Add the missing 'agent' property\n              } as SessionLauncherFormData,\n              formValue,\n            );\n\n            if (!_.isEmpty(fieldsValue.sessionName)) {\n              fieldsValue.sessionName =\n                fieldsValue.sessionName + '-' + generateRandomString(4);\n            }\n            form.setFieldsValue(fieldsValue as SessionLauncherFormData);\n            setCurrentStep(steps.length - 1);\n            form.validateFields().catch(() => {});\n          }\n          toggleIsOpenTemplateModal();\n        }}\n        open={isOpenTemplateModal}\n      />\n      {currentStep === steps.length - 1 ? (\n        <ErrorBoundary fallback={null}>\n          <SessionLauncherValidationTour\n            open={validationTourOpen}\n            onClose={() => {\n              setValidationTourOpen(false);\n            }}\n            scrollIntoViewOptions\n          />\n        </ErrorBoundary>\n      ) : undefined}\n    </BAIFlex>\n  );\n};\n\ntype FormOrResourceRequired = {\n  resource: ResourceAllocationFormValue['resource'];\n  containerCount?: number;\n};\n\nexport const ResourceNumbersOfSession: React.FC<FormOrResourceRequired> = ({\n  resource,\n  containerCount = 1,\n}) => {\n  return (\n    <>\n      {_.map(\n        _.omit(resource, 'shmem', 'accelerator', 'acceleratorType'),\n        (value, type) => {\n          return value === '0' ? null : (\n            <ResourceNumber\n              key={type}\n              // @ts-ignore\n              type={type}\n              value={\n                type === 'mem'\n                  ? (convertToBinaryUnit(value.toString(), '')?.number || 0) *\n                      containerCount +\n                    ''\n                  : _.toNumber(value) * containerCount + ''\n              }\n              opts={{\n                shmem: resource.shmem\n                  ? (convertToBinaryUnit(resource.shmem, '')?.number || 0) *\n                    containerCount\n                  : undefined,\n              }}\n            />\n          );\n        },\n      )}\n      {resource &&\n      resource.accelerator &&\n      resource.acceleratorType &&\n      _.isNumber(resource.accelerator) ? (\n        <ResourceNumber\n          // @ts-ignore\n          type={resource.acceleratorType}\n          value={_.toString(resource.accelerator * containerCount)}\n        />\n      ) : null}\n    </>\n  );\n};\n\nexport default SessionLauncherPage;\n"],"names":["DatePickerISO","React","_ref","ref","value","onChange","localFormat","pickerProps","setControllableValue","useControllableValue","_jsx","DatePicker","dayjs","undefined","_value","_value2","_value2$tz","_","newValue","format","tz","toISOString","displayName","props","form","Form","useFormInstance","useEffect","setFieldValue","name","Item","hidden","children","MIN_PORT","MAX_PORT","PortTag","_ref2","inValid","tagProps","Tag","color","isValidPortStr","portStr","isPortRangeStr","splitPortRange","split","start","end","map","v","parseInt","toString","portRange","length","transformPortValuesToNumbers","values","parsePortRangeToNumbers","formItemProps","t","useTranslation","baiClient","useSuspendedBackendaiClient","label","tooltip","Trans","i18nKey","extra","rules","validator","_rule","_config","maxCountForPreopenPorts","Promise","resolve","reject","Error","count","allPorts","port","Select","mode","tagRender","hasDuplicated","getFieldValue","closable","onClose","onMouseDown","e","preventDefault","stopPropagation","style","width","suffixIcon","open","tokenSeparators","node","v0","v1","v2","v3","v4","v5","hash","startSessionErrorCodes","DUPLICATED_SESSION","useStartSession","_baiClient$supports","_baiClient$_config","currentProject","useCurrentProjectValue","upsertNotification","useSetBAINotification","relayEnv","useRelayEnvironment","supportsMountById","supports","supportBatchTimeout","currentGlobalResourceGroup","useCurrentResourceGroupState","defaultFormValues","sessionType","allocationPreset","hpcOptimization","autoEnabled","batch","enabled","command","scheduleDate","timeoutEnabled","timeout","timeoutUnit","envvars","default_session_environment","environments","normalizeEnvironmentFormat","RESOURCE_ALLOCATION_INITIAL_FORM_VALUES","resourceGroup","startSession","async","_values$owner","_values$owner2","_values$owner3","_values$batch","_values$batch2","_values$batch3","_values$resource","_values$resource2","_values$resource3","_values$owner4","_baiClient$_config2","imageFullName","manual","version","kernelName","architecture","sessionInfo","sessionName","generateSessionId","resources","enqueueOnly","group_name","owner","project","domain","domainName","type","cluster_mode","cluster_size","maxWaitSeconds","owner_access_key","accesskey","starts_at","startupCommand","bootstrap_script","batchTimeout","config","cpu","resource","mem","acceleratorType","accelerator","scaling_group","resource_opts","shmem","mount_ids","mount_id_map","environ","variable","preopen_ports","ports","hideAgents","agent","agent_list","castArray","filter","sessionPromises","num_of_sessions","i","formattedSessionName","generateRandomString","createIfNotExists","then","res","created","catch","err","_err$message","message","includes","allSettled","sessionCreations","startSessionWithDefault","minimumValues","mergedValue","upsertSessionNotification","successCreations","upsertNotificationOverrides","promises","creation","session","fetchQuery","_useStartSessionCreationQuery","id","toGlobalId","sessionId","toPromise","queryResult","_queryResult$compute_","createdSession","compute_session_node","key","duration","text","possible","charAt","Math","floor","random","environment","useValidateSessionName","currentName","relayEvn","useMemo","min","max","_f","test","_useValidateSessionNameQuery","projectId","data","_data$compute_session","_data$compute_session2","compute_session_nodes","required","otherProps","hasOpenedValidationTour","setHasOpenedValidationTour","useBAISettingUserState","steps","title","description","target","_document$getElements","document","getElementsByClassName","_document$getElements2","_document$getElements3","querySelector","Tour","mounts","useWatch","app","App","useApp","hasIncompatibleMountsParam","warning","SessionOwnerSetterPreviewCard","isActive","currentUserRole","useCurrentUserRole","BAICard","showDivider","size","status","getFieldError","extraButtonTitle","_jsxs","Descriptions","column","token","theme","useToken","fetchingEmail","setFetchingEmail","useState","isFetching","useTanQuery","queryKey","queryFn","email","query","_SessionOwnerSetterCardQuery","ownerKeypairs","keypairs","user","nonExistentOwner","Card","valuePropName","noStyle","Switch","styles","header","borderBottom","body","display","HiddenFormItem","domain_name","dependencies","_Fragment","BAIFlex","flex","validateStatus","help","Input","Search","onSearch","validateFields","setFieldsValue","loading","enterButton","Button","icon","CheckIcon","BAISelect","options","k","access_key","autoSelectOption","disabled","Row","gutter","marginSM","Col","span","groups","g","Suspense","fallback","ResourceGroupSelect","projectName","autoSelectDefault","_baiClient$supports2","_form$getFieldValue","_form$getFieldValue2","_form$getFieldValue3","_form$getFieldValue4","_form$getFieldValue5","_form$getFieldValue6","_form$getFieldValue6$","_form$getFieldValue7","_form$getFieldValue7$","_form$getFieldValue8","_form$getFieldValue8$","_form$getFieldValue9","_form$getFieldValue9$","_form$getFieldValue12","_form$getFieldValue13","_form$getFieldValue14","_form$getFieldValue15","_form$getFieldValue16","_form$getFieldValue17","_form$getFieldValue18","_form$getFieldValue19","_form$getFieldValue20","_form$getFieldValue21","_form$getFieldValue22","_form$getFieldValue23","_form$getFieldValue24","_form$getFieldValue25","_form$getFieldValue26","_form$getFieldValue27","_form$getFieldValue28","_form$getFieldValue29","_form$getFieldValue32","_form$getFieldValue33","onClickEditStep","preserve","supportExtendedImageInfo","getBaseVersion","getBaseImage","tagAlias","useBackendAIImageMetaData","isDarkMode","useThemeMode","BAIAlert","ghostInfoBg","action","onClick","modal","info","content","direction","align","Typography","Paragraph","SourceCodeViewer","wordWrap","language","showIcon","onClickExtraButton","whiteSpace","overflow","Text","_v","idx","flexFlow","ImageMetaIcon","image","marginRight","marginXS","wrap","code","wordBreak","copyable","base_image_name","Divider","tags","tag","_$find","_form$getFieldValue10","_form$getFieldValue11","isCustomized","tagValue","labels","aliasedTag","preserveDotStartCase","DoubleTag","colorPrimary","getImageFullName","gap","sizeXS","ImageTags","SyntaxHighlighter","dark","codeTagProps","customStyle","margin","join","getFieldWarning","Alert","ResourceNumbersOfSession","containerCount","Table","rowKey","pagination","columns","dataIndex","render","record","opacity","dataSource","_form$getFieldValue30","_form$getFieldValue31","alias","validationRules","validateDebounce","allowClear","autoComplete","show","useRecentSessionHistory","recentSessions","setRecentSessionHistory","push","useEventNotStable","params","createdAt","newHistory","Date","newRecentSessionHistory","slice","clear","remove","item","update","useStyle","createStyles","css","fixEditableVerticalAlign","modalProps","sessionHistory","updateSessionHistory","hoverRowKey","setHoverRowKey","getImageAliasName","pinnedSessionHistory","pin","unpin","updatePinnedHistory","usePinnedSessionHistory","setPinnedSessionHistory","recentSessionHistory","pinnedItem","find","newPinnedSessionHistory","setSelectedHistoryId","parsedSessionHistory","parseToFormValues","history","isPinned","URLSearchParams","JSON","parse","get","pinned","recent","unionBy","BAIModal","footer","onCancel","onRequestClose","BAITable","rowSelection","selectedRowKeys","columnWidth","hideSelectAll","renderCell","scroll","x","onRow","onMouseEnter","onMouseLeave","PinIcon","QuestionIconWithTooltip","isHovered","colorTextQuaternary","className","editable","BAILink","_modalProps$onRequest","call","_version","imageStr","Tooltip","placement","onCell","maxWidth","textOverflow","fromNow","_convertToBinaryUnit","_convertToBinaryUnit2","ResourceNumber","convertToBinaryUnit","number","opts","SessionLauncherPage","_steps$currentStep","getErrorMessage","useErrorMessageResolver","mainContentDivRef","useAtomValue","mainContentDivRefState","setCurrentGlobalResourceGroup","StepParam","withDefault","NumberParam","FormValuesParam","JsonParam","AppOptionParam","step","currentStep","formValues","formValuesFromQueryParams","redirectTo","setQuery","useQueryParams","StringParam","appOption","search","useLocation","webuiNavigate","useWebUINavigate","isOpenTemplateModal","toggle","toggleIsOpenTemplateModal","useToggle","pushSessionHistory","run","syncFormToURLWithDebounce","useDebounceFn","currentValue","getFieldsValue","sanitizeSensitiveEnv","leading","wait","trailing","setCurrentStep","nextStep","screens","Grid","useBreakpoint","useForm","mergedInitialValues","_mainContentDivRef$cu","current","scrollTo","filterOutEmpty","PlayCircleFilled","currentStepKey","hasError","getFieldsError","errors","finalStepLastValidateTime","setFinalStepLastValidateTime","useUpdatableState","finally","setValidationTourOpen","validationTourOpen","isQueryReset","setIsQueryReset","useLayoutEffect","resetFields","justifyContent","justify","Title","level","marginTop","paddingRight","paddingLeft","Provider","onFormChange","layout","initialValues","SessionLauncherFormIncompatibleValueChecker","Radio","SessionNameFormItem","TextArea","autoSize","BAIIntervalView","delay","callback","isBefore","triggerKey","time","Checkbox","checked","add","shouldUpdate","prev","next","_prev$batch","_next$batch","showTime","disabledDate","startOf","unit","timeDuration","formattedDuration","formatDuration","durationText","InputNumber","addonAfter","tabIndex","minWidth","SessionOwnerSetterCard","ErrorBoundary","fallbackRender","ImageEnvironmentSelectFormItems","EnvVarFormList","validateTrigger","ResourceAllocationFormItems","enableAgentSelect","enableNumOfSessions","enableResourcePresets","showRemainingWarning","checkedChildren","unCheckedChildren","OMP_NUM_THREADS","OPENBLAS_NUM_THREADS","_prev$hpcOptimization","_next$hpcOptimization","marginMD","xs","sm","stringMode","ownerInfo","isValidOwner","VFolderTableFormItem","rowFilter","vfolder","_vfolder$name","startsWith","tableProps","ownerEmail","PortSelectFormItem","SessionLauncherPreview","stepKey","Popconfirm","onConfirm","QuestionCircleOutlined","colorError","okText","okButtonProps","danger","LeftOutlined","BAIButton","PlayCircleOutlined","_values$mount_ids","usedSearchParams","console","error","confirm","results","fulfilled","rejected","reason","ghost","RightOutlined","DoubleRightOutlined","lg","position","top","Steps","nextCurrent","items","s","SessionTemplateModal","formValue","fieldsValue","vfoldersNameMap","SessionLauncherValidationTour","scrollIntoViewOptions"],"sourceRoot":""}