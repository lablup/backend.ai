"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[8078],{16146:(e,n,a)=>{a.r(n),a.d(n,{default:()=>s});const t=function(){var e={kind:"Literal",name:"first",value:0},n={kind:"Variable",name:"project_id",variableName:"projectId"},t=[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}];return{argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"projectId"}],kind:"Fragment",metadata:{refetch:{connection:null,fragmentPathInResult:[],operation:a(57131)}},name:"MySessionCardQueryFragment",selections:[{alias:"myInteractive",args:[{kind:"Literal",name:"filter",value:'status != "TERMINATED" & status != "CANCELLED" & type == "interactive"'},e,n],concreteType:"ComputeSessionConnection",kind:"LinkedField",name:"compute_session_nodes",plural:!1,selections:t,storageKey:null},{alias:"myBatch",args:[{kind:"Literal",name:"filter",value:'status != "TERMINATED" & status != "CANCELLED" & type == "batch"'},e,n],concreteType:"ComputeSessionConnection",kind:"LinkedField",name:"compute_session_nodes",plural:!1,selections:t,storageKey:null},{alias:"myInference",args:[{kind:"Literal",name:"filter",value:'status != "TERMINATED" & status != "CANCELLED" & type == "inference"'},e,n],concreteType:"ComputeSessionConnection",kind:"LinkedField",name:"compute_session_nodes",plural:!1,selections:t,storageKey:null},{alias:"myUpload",args:[{kind:"Literal",name:"filter",value:'status != "TERMINATED" & status != "CANCELLED" & type == "system"'},e,n],concreteType:"ComputeSessionConnection",kind:"LinkedField",name:"compute_session_nodes",plural:!1,selections:t,storageKey:null}],type:"Queries",abstractKey:null}}();t.hash="ce8178951e50988dac5cf649a66b0605";const s=t},57131:(e,n,a)=>{a.r(n),a.d(n,{default:()=>s});const t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"projectId"}],n={kind:"Literal",name:"first",value:0},a={kind:"Variable",name:"project_id",variableName:"projectId"},t=[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MySessionCardQueryFragmentRefetchQuery",selections:[{args:[{kind:"Variable",name:"projectId",variableName:"projectId"}],kind:"FragmentSpread",name:"MySessionCardQueryFragment"}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MySessionCardQueryFragmentRefetchQuery",selections:[{alias:"myInteractive",args:[{kind:"Literal",name:"filter",value:'status != "TERMINATED" & status != "CANCELLED" & type == "interactive"'},n,a],concreteType:"ComputeSessionConnection",kind:"LinkedField",name:"compute_session_nodes",plural:!1,selections:t,storageKey:null},{alias:"myBatch",args:[{kind:"Literal",name:"filter",value:'status != "TERMINATED" & status != "CANCELLED" & type == "batch"'},n,a],concreteType:"ComputeSessionConnection",kind:"LinkedField",name:"compute_session_nodes",plural:!1,selections:t,storageKey:null},{alias:"myInference",args:[{kind:"Literal",name:"filter",value:'status != "TERMINATED" & status != "CANCELLED" & type == "inference"'},n,a],concreteType:"ComputeSessionConnection",kind:"LinkedField",name:"compute_session_nodes",plural:!1,selections:t,storageKey:null},{alias:"myUpload",args:[{kind:"Literal",name:"filter",value:'status != "TERMINATED" & status != "CANCELLED" & type == "system"'},n,a],concreteType:"ComputeSessionConnection",kind:"LinkedField",name:"compute_session_nodes",plural:!1,selections:t,storageKey:null}]},params:{cacheID:"c5404406b3c47ef22ff9afbef2c37f1b",id:null,metadata:{},name:"MySessionCardQueryFragmentRefetchQuery",operationKind:"query",text:'query MySessionCardQueryFragmentRefetchQuery(\n  $projectId: UUID!\n) {\n  ...MySessionCardQueryFragment_2CgS8h\n}\n\nfragment MySessionCardQueryFragment_2CgS8h on Queries {\n  myInteractive: compute_session_nodes(first: 0, filter: "status != \\"TERMINATED\\" & status != \\"CANCELLED\\" & type == \\"interactive\\"", project_id: $projectId) {\n    count\n  }\n  myBatch: compute_session_nodes(first: 0, filter: "status != \\"TERMINATED\\" & status != \\"CANCELLED\\" & type == \\"batch\\"", project_id: $projectId) {\n    count\n  }\n  myInference: compute_session_nodes(first: 0, filter: "status != \\"TERMINATED\\" & status != \\"CANCELLED\\" & type == \\"inference\\"", project_id: $projectId) {\n    count\n  }\n  myUpload: compute_session_nodes(first: 0, filter: "status != \\"TERMINATED\\" & status != \\"CANCELLED\\" & type == \\"system\\"", project_id: $projectId) {\n    count\n  }\n}\n'}}}();t.hash="ce8178951e50988dac5cf649a66b0605";const s=t},26028:(e,n,a)=>{a.r(n),a.d(n,{default:()=>s});const t={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"projectId"}],kind:"Fragment",metadata:{refetch:{connection:null,fragmentPathInResult:[],operation:a(32693)}},name:"RecentlyCreatedSessionCardFragment",selections:[{alias:null,args:[{kind:"Literal",name:"filter",value:'status == "running"'},{kind:"Literal",name:"first",value:3},{kind:"Literal",name:"order",value:"-created_at"},{kind:"Variable",name:"project_id",variableName:"projectId"}],concreteType:"ComputeSessionConnection",kind:"LinkedField",name:"compute_session_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"ComputeSessionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"SessionNodesFragment"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Queries",abstractKey:null,hash:"7c16f9a5bfd4d5f60959224a02a0c143"},s=t},32693:(e,n,a)=>{a.r(n),a.d(n,{default:()=>s});const t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"projectId"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"RecentlyCreatedSessionCardRefetchQuery",selections:[{args:[{kind:"Variable",name:"projectId",variableName:"projectId"}],kind:"FragmentSpread",name:"RecentlyCreatedSessionCardFragment"}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"RecentlyCreatedSessionCardRefetchQuery",selections:[{alias:null,args:[{kind:"Literal",name:"filter",value:'status == "running"'},{kind:"Literal",name:"first",value:3},{kind:"Literal",name:"order",value:"-created_at"},{kind:"Variable",name:"project_id",variableName:"projectId"}],concreteType:"ComputeSessionConnection",kind:"LinkedField",name:"compute_session_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"ComputeSessionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"node",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status_info",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status_data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"starts_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"terminated_at",storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"requested_slots",storageKey:null},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},n,a],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{cacheID:"46c16d5cfbc8e002398c41ac19cca963",id:null,metadata:{},name:"RecentlyCreatedSessionCardRefetchQuery",operationKind:"query",text:'query RecentlyCreatedSessionCardRefetchQuery(\n  $projectId: UUID!\n) {\n  ...RecentlyCreatedSessionCardFragment_2CgS8h\n}\n\nfragment RecentlyCreatedSessionCardFragment_2CgS8h on Queries {\n  compute_session_nodes(first: 3, order: "-created_at", filter: "status == \\"running\\"", project_id: $projectId) {\n    edges {\n      node {\n        id\n        ...SessionNodesFragment\n      }\n    }\n  }\n}\n\nfragment SessionNodesFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  status\n  ...SessionStatusTagFragment\n  ...SessionReservationFragment\n  ...SessionSlotCellFragment\n  ...SessionUsageMonitorFragment\n}\n\nfragment SessionReservationFragment on ComputeSessionNode {\n  id\n  created_at\n  starts_at\n  terminated_at\n}\n\nfragment SessionSlotCellFragment on ComputeSessionNode {\n  id\n  status\n  occupied_slots\n  requested_slots\n  ...useSessionNodeLiveStatSessionFragment\n}\n\nfragment SessionStatusTagFragment on ComputeSessionNode {\n  id\n  status\n  status_info\n  status_data\n}\n\nfragment SessionUsageMonitorFragment on ComputeSessionNode {\n  kernel_nodes {\n    edges {\n      node {\n        live_stat\n        occupied_slots\n        id\n      }\n    }\n  }\n}\n\nfragment useSessionNodeLiveStatSessionFragment on ComputeSessionNode {\n  id\n  kernel_nodes {\n    edges {\n      node {\n        live_stat\n        id\n      }\n    }\n  }\n}\n'}}}();t.hash="7c16f9a5bfd4d5f60959224a02a0c143";const s=t},88078:(e,n,a)=>{a.r(n),a.d(n,{default:()=>K});var t,s=a(30131),l=a(4335),i=a(55288),r=a(94650),o=a(96520),d=a(37090),u=a(4828),c=a(56222),m=a(55616),g=a(55202),p=a(44617),y=a(18139),f=a(52426);const k=e=>{let{queryRef:n,isRefetching:s,...k}=e;const{t:S}=(0,p.Bd)(),{token:C}=d.A.useToken(),[_,F]=(0,g.useTransition)(),[L,h]=(0,y.useRefetchableFragment)(void 0!==t?t:t=a(16146),n),{myInteractive:v,myBatch:E,myInference:j,myUpload:I}=L||{};return(0,f.jsx)(l.A,{...k,title:S("session.MySessions"),extra:(0,f.jsx)(o.A,{direction:"row",gap:"sm",style:{marginRight:-8},children:(0,f.jsx)(i.A,{loading:_||s,value:"",onChange:e=>{F((()=>{h({},{fetchPolicy:"network-only"})}))},type:"text",style:{backgroundColor:"transparent"}})}),children:(0,f.jsxs)(u.A,{gutter:[24,16],children:[(0,f.jsx)(c.A,{span:5,style:{justifyItems:"center",overflow:"break-word",whiteSpace:"nowrap",wordBreak:"keep-all"},children:(0,f.jsx)(r.A,{title:S("session.Interactive"),value:(null===v||void 0===v?void 0:v.count)||0})}),(0,f.jsx)(c.A,{span:1,style:{justifyItems:"center",textAlign:"center",paddingTop:C.paddingSM,paddingBottom:C.paddingSM,paddingLeft:0,paddingRight:0},children:(0,f.jsx)(m.A,{type:"vertical",style:{height:"100%"}})}),(0,f.jsx)(c.A,{span:5,style:{justifyItems:"center",overflow:"break-word",whiteSpace:"nowrap"},children:(0,f.jsx)(r.A,{title:S("session.Batch"),value:(null===E||void 0===E?void 0:E.count)||0})}),(0,f.jsx)(c.A,{span:1,style:{justifyItems:"center",textAlign:"center",paddingTop:C.paddingSM,paddingBottom:C.paddingSM,paddingLeft:0,paddingRight:0},children:(0,f.jsx)(m.A,{type:"vertical",style:{height:"100%"}})}),(0,f.jsx)(c.A,{span:5,style:{justifyItems:"center",overflow:"break-word",whiteSpace:"nowrap"},children:(0,f.jsx)(r.A,{title:S("session.Inference"),value:(null===j||void 0===j?void 0:j.count)||0})}),(0,f.jsx)(c.A,{span:1,style:{justifyItems:"center",textAlign:"center",paddingTop:C.paddingSM,paddingBottom:C.paddingSM,paddingLeft:0,paddingRight:0},children:(0,f.jsx)(m.A,{type:"vertical",style:{height:"100%"}})}),(0,f.jsx)(c.A,{span:6,style:{justifyItems:"center",overflow:"break-word"},children:(0,f.jsx)(r.A,{title:S("session.System"),value:(null===I||void 0===I?void 0:I.count)||0})})]})})};var S,C=a(77813),_=a(70023),F=a(22365),L=a(47174);const h=e=>{var n;let{queryRef:t,isRefetching:s,...r}=e;const{t:d}=(0,p.Bd)(),[u,c]=(0,L.useQueryParam)("sessionDetail",L.StringParam),[m,k]=(0,g.useTransition)(),[h,v]=(0,y.useRefetchableFragment)(void 0!==S?S:S=a(26028),t);return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(l.A,{title:d("session.RecentlyCreatedSessions"),extra:(0,f.jsx)(o.A,{direction:"row",gap:"sm",style:{marginRight:-8},children:(0,f.jsx)(i.A,{loading:m||s,value:"",onChange:e=>{k((()=>{v({},{fetchPolicy:"network-only"})}))},type:"text",style:{backgroundColor:"transparent"}})}),...r,children:[(0,f.jsx)(F.A,{sessionsFrgmt:(0,C.tS)(null===(n=h.compute_session_nodes)||void 0===n?void 0:n.edges.map((e=>null===e||void 0===e?void 0:e.node))),onClickSessionName:e=>{c((0,C.om)(e.id))},pagination:!1,disableSorter:!0}),(0,f.jsx)(_.A,{open:!!u,sessionId:u||void 0,onClose:()=>{c(void 0,"pushIn")}})]})})};var v,E=a(81751),j=a(43992),I=a(654),T=a(40152),A=a(64428),N=a.n(A);const K=()=>{const{lg:e}=T.Ay.useBreakpoint();(0,E.CX)();const n=(0,j.hd)(),[t,l]=(0,E.Tw)("first"),[i,r]=(0,g.useTransition)(),o=(0,y.useLazyLoadQuery)(void 0!==v?v:v=a(84541),{projectId:n.id},{fetchPolicy:"first"===t?"store-and-network":"network-only",fetchKey:t});(0,I.$)((()=>{r((()=>{l()}))}),15e3);const d=(0,C.LY)([{id:"mySession",rowSpan:3,columnSpan:1,columnOffset:{6:0,4:0},data:{content:(0,f.jsx)(k,{queryRef:o,isRefetching:i,style:{minHeight:e?200:void 0}})}},{id:"allocatedResources",rowSpan:3,columnSpan:1,columnOffset:{6:1,4:1},data:{content:(0,f.jsx)(s.A,{style:{width:"100%",minHeight:e?200:void 0},isRefetching:i,fetchKey:t})}},{id:"recentlyCreatedSession",rowSpan:3,columnSpan:2,columnOffset:{6:0,4:0},data:{content:(0,f.jsx)(h,{queryRef:o,isRefetching:i})}}]);return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(u.A,{gutter:[16,16],children:N().map(d,(e=>(0,f.jsx)(c.A,{xs:24,lg:2===e.columnSpan?24:12,children:e.data.content})))})})}},84541:(e,n,a)=>{a.r(n),a.d(n,{default:()=>s});const t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"projectId"}],n=[{kind:"Variable",name:"projectId",variableName:"projectId"}],a={kind:"Literal",name:"first",value:0},t={kind:"Variable",name:"project_id",variableName:"projectId"},s=[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"DashboardPageQuery",selections:[{args:n,kind:"FragmentSpread",name:"MySessionCardQueryFragment"},{args:n,kind:"FragmentSpread",name:"RecentlyCreatedSessionCardFragment"}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"DashboardPageQuery",selections:[{alias:"myInteractive",args:[{kind:"Literal",name:"filter",value:'status != "TERMINATED" & status != "CANCELLED" & type == "interactive"'},a,t],concreteType:"ComputeSessionConnection",kind:"LinkedField",name:"compute_session_nodes",plural:!1,selections:s,storageKey:null},{alias:"myBatch",args:[{kind:"Literal",name:"filter",value:'status != "TERMINATED" & status != "CANCELLED" & type == "batch"'},a,t],concreteType:"ComputeSessionConnection",kind:"LinkedField",name:"compute_session_nodes",plural:!1,selections:s,storageKey:null},{alias:"myInference",args:[{kind:"Literal",name:"filter",value:'status != "TERMINATED" & status != "CANCELLED" & type == "inference"'},a,t],concreteType:"ComputeSessionConnection",kind:"LinkedField",name:"compute_session_nodes",plural:!1,selections:s,storageKey:null},{alias:"myUpload",args:[{kind:"Literal",name:"filter",value:'status != "TERMINATED" & status != "CANCELLED" & type == "system"'},a,t],concreteType:"ComputeSessionConnection",kind:"LinkedField",name:"compute_session_nodes",plural:!1,selections:s,storageKey:null},{alias:null,args:[{kind:"Literal",name:"filter",value:'status == "running"'},{kind:"Literal",name:"first",value:3},{kind:"Literal",name:"order",value:"-created_at"},t],concreteType:"ComputeSessionConnection",kind:"LinkedField",name:"compute_session_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"ComputeSessionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"node",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status_info",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status_data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"starts_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"terminated_at",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"requested_slots",storageKey:null},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},l,i],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{cacheID:"45ca966372a150792d1e8da973a77b66",id:null,metadata:{},name:"DashboardPageQuery",operationKind:"query",text:'query DashboardPageQuery(\n  $projectId: UUID!\n) {\n  ...MySessionCardQueryFragment_2CgS8h\n  ...RecentlyCreatedSessionCardFragment_2CgS8h\n}\n\nfragment MySessionCardQueryFragment_2CgS8h on Queries {\n  myInteractive: compute_session_nodes(first: 0, filter: "status != \\"TERMINATED\\" & status != \\"CANCELLED\\" & type == \\"interactive\\"", project_id: $projectId) {\n    count\n  }\n  myBatch: compute_session_nodes(first: 0, filter: "status != \\"TERMINATED\\" & status != \\"CANCELLED\\" & type == \\"batch\\"", project_id: $projectId) {\n    count\n  }\n  myInference: compute_session_nodes(first: 0, filter: "status != \\"TERMINATED\\" & status != \\"CANCELLED\\" & type == \\"inference\\"", project_id: $projectId) {\n    count\n  }\n  myUpload: compute_session_nodes(first: 0, filter: "status != \\"TERMINATED\\" & status != \\"CANCELLED\\" & type == \\"system\\"", project_id: $projectId) {\n    count\n  }\n}\n\nfragment RecentlyCreatedSessionCardFragment_2CgS8h on Queries {\n  compute_session_nodes(first: 3, order: "-created_at", filter: "status == \\"running\\"", project_id: $projectId) {\n    edges {\n      node {\n        id\n        ...SessionNodesFragment\n      }\n    }\n  }\n}\n\nfragment SessionNodesFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  status\n  ...SessionStatusTagFragment\n  ...SessionReservationFragment\n  ...SessionSlotCellFragment\n  ...SessionUsageMonitorFragment\n}\n\nfragment SessionReservationFragment on ComputeSessionNode {\n  id\n  created_at\n  starts_at\n  terminated_at\n}\n\nfragment SessionSlotCellFragment on ComputeSessionNode {\n  id\n  status\n  occupied_slots\n  requested_slots\n  ...useSessionNodeLiveStatSessionFragment\n}\n\nfragment SessionStatusTagFragment on ComputeSessionNode {\n  id\n  status\n  status_info\n  status_data\n}\n\nfragment SessionUsageMonitorFragment on ComputeSessionNode {\n  kernel_nodes {\n    edges {\n      node {\n        live_stat\n        occupied_slots\n        id\n      }\n    }\n  }\n}\n\nfragment useSessionNodeLiveStatSessionFragment on ComputeSessionNode {\n  id\n  kernel_nodes {\n    edges {\n      node {\n        live_stat\n        id\n      }\n    }\n  }\n}\n'}}}();t.hash="342b968110a2e463f10f2f3bd3998b1a";const s=t}}]);
//# sourceMappingURL=8078.dc180cb5.chunk.js.map