/*! For license information please see 4207.6a3ad13c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[4207],{14781:(e,n,a)=>{a.d(n,{A:()=>l});const l=(0,a(24604).A)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},33597:(e,n,a)=>{a.r(n),a.d(n,{default:()=>_e});var l=a(57376);const r=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteScalingGroup",kind:"LinkedField",name:"delete_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupListDeleteMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupListDeleteMutation",selections:n},params:{cacheID:"fdcd5026b9668171b8d52998b2c16c6d",id:null,metadata:{},name:"ResourceGroupListDeleteMutation",operationKind:"mutation",text:"mutation ResourceGroupListDeleteMutation(\n  $name: String!\n) {\n  delete_scaling_group(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();r.hash="40de35d5afd64c8d906e4970b10b722d";const i=r,o=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},n={defaultValue:null,kind:"LocalArgument",name:"name"},a=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"ModifyScalingGroup",kind:"LinkedField",name:"modify_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ResourceGroupListUpdateMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ResourceGroupListUpdateMutation",selections:a},params:{cacheID:"f2bb803220bb606aab5576ae85eed3c3",id:null,metadata:{},name:"ResourceGroupListUpdateMutation",operationKind:"mutation",text:"mutation ResourceGroupListUpdateMutation(\n  $name: String!\n  $input: ModifyScalingGroupInput!\n) {\n  modify_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="ac249dff8b2c9b629edb2ca40843c134";const t=o,s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"is_active"}],n=[{kind:"Variable",name:"is_active",variableName:"is_active"}],a={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"driver",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupListQuery",selections:[{alias:null,args:n,concreteType:"ScalingGroup",kind:"LinkedField",name:"scaling_groups",plural:!0,selections:[a,l,r,i,o,t,s,{args:null,kind:"FragmentSpread",name:"ResourceGroupInfoModalFragment"},{args:null,kind:"FragmentSpread",name:"ResourceGroupSettingModalFragment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupListQuery",selections:[{alias:null,args:n,concreteType:"ScalingGroup",kind:"LinkedField",name:"scaling_groups",plural:!0,selections:[a,l,r,i,o,t,s,{alias:null,args:null,kind:"ScalarField",name:"driver_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null}],storageKey:null}]},params:{cacheID:"a388cfe6011c626e8a46a241d373f0cf",id:null,metadata:{},name:"ResourceGroupListQuery",operationKind:"query",text:"query ResourceGroupListQuery(\n  $is_active: Boolean\n) {\n  scaling_groups(is_active: $is_active) {\n    name\n    description\n    is_active\n    is_public\n    driver\n    scheduler\n    wsproxy_addr\n    ...ResourceGroupInfoModalFragment\n    ...ResourceGroupSettingModalFragment\n  }\n}\n\nfragment ResourceGroupInfoModalFragment on ScalingGroup {\n  name\n  description\n  is_active\n  is_public\n  driver\n  driver_opts\n  scheduler\n  scheduler_opts\n  wsproxy_addr\n}\n\nfragment ResourceGroupSettingModalFragment on ScalingGroup {\n  name\n  description\n  is_active\n  is_public\n  wsproxy_addr\n  scheduler\n  scheduler_opts\n}\n"}}}();s.hash="73ad50968ae420ea2cd912e9fa046cf8";const u=s;var c=a(40690),d=a(72792),m=a(56276),p=a(11863);const g={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ResourceGroupInfoModalFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"driver",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"driver_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null}],type:"ScalingGroup",abstractKey:null,hash:"32b9c1a86a13b37cf5abb7e88f1cd969"},y=g;var v=a(65723),x=a(89866),h=a(76591),k=a(94824),f=a(42338),b=a(96223),_=a(67631),S=a(47699),A=a.n(S),j=a(17534),G=a(62962),F=a(46336),K=a(89374);const D=["resourceGroupFrgmt","onRequestClose"],R=e=>{var n,a;let{resourceGroupFrgmt:l=null,onRequestClose:r}=e,i=(0,p.A)(e,D);const{t:o}=(0,G.Bd)(),{token:t}=h.A.useToken(),s=(0,F.useFragment)(y,l),u=(0,j.useMemo)((()=>JSON.parse((null===s||void 0===s?void 0:s.driver_opts)||"{}")),[null===s||void 0===s?void 0:s.driver_opts]),c=(0,j.useMemo)((()=>JSON.parse((null===s||void 0===s?void 0:s.scheduler_opts)||"{}")),[null===s||void 0===s?void 0:s.scheduler_opts]);return(0,K.jsxs)(_.Ib,(0,m.A)((0,m.A)({title:o("resourceGroup.ResourceGroupDetail"),onCancel:r,footer:null,centered:!0},i),{},{children:[(0,K.jsxs)(k.A,{column:1,size:"small",title:o("resourceGroup.Information"),labelStyle:{width:"50%"},children:[(0,K.jsx)(k.A.Item,{label:o("resourceGroup.Name"),children:null===s||void 0===s?void 0:s.name}),(0,K.jsx)(k.A.Item,{label:o("resourceGroup.Description"),children:(null===s||void 0===s?void 0:s.description)||"-"}),(0,K.jsx)(k.A.Item,{label:o("resourceGroup.Active"),children:null!==s&&void 0!==s&&s.is_active?(0,K.jsx)(v.A,{style:{color:t.colorSuccess}}):(0,K.jsx)(x.A,{style:{color:t.colorTextSecondary}})}),(0,K.jsx)(k.A.Item,{label:o("resourceGroup.Public"),children:null!==s&&void 0!==s&&s.is_public?(0,K.jsx)(v.A,{style:{color:t.colorSuccess}}):(0,K.jsx)(x.A,{style:{color:t.colorTextSecondary}})}),(0,K.jsx)(k.A.Item,{label:o("resourceGroup.Driver"),children:null===s||void 0===s?void 0:s.driver}),(0,K.jsx)(k.A.Item,{label:o("resourceGroup.Scheduler"),children:A().toUpper(null!==(n=null===s||void 0===s?void 0:s.scheduler)&&void 0!==n?n:"")}),(0,K.jsx)(k.A.Item,{label:o("resourceGroup.WsproxyAddress"),children:(null===s||void 0===s?void 0:s.wsproxy_addr)||"-"})]}),(0,K.jsx)("br",{}),(0,K.jsxs)(k.A,{column:1,size:"small",title:o("resourceGroup.SchedulerOptions"),labelStyle:{width:"50%"},children:[(0,K.jsx)(k.A.Item,{label:o("resourceGroup.AllowedSessionTypes"),children:(0,K.jsx)(_.OO,{wrap:"wrap",direction:"row",gap:"xs",style:{width:"100%"},children:A().map(null===c||void 0===c?void 0:c.allowed_session_types,(e=>(0,K.jsx)(f.A,{style:{margin:0},children:A().startCase(e)},e)))})}),(0,K.jsx)(k.A.Item,{label:o("resourceGroup.PendingTimeout"),children:A().isNil(null===c||void 0===c?void 0:c.pending_timeout)?"-":(0,K.jsxs)(_.OO,{gap:"xxs",align:"end",children:[(0,K.jsx)(b.A.Text,{children:"".concat(c.pending_timeout,"\n                ").concat(o("resourceGroup.TimeoutSeconds"))}),null!==c&&void 0!==c&&c.pending_timeout?null:(0,K.jsx)(b.A.Text,{style:{color:t.colorTextSecondary,fontSize:t.fontSizeSM},children:"(".concat(o("general.Disabled"),")")})]})}),(0,K.jsx)(k.A.Item,{label:o("resourceGroup.RetriesToSkipDesc"),children:null!==c&&void 0!==c&&null!==(a=c.config)&&void 0!==a&&a.num_retries_to_skip?"".concat(c.config.num_retries_to_skip," ").concat(o("resourceGroup.RetriesToSkip")):"-"})]}),A().isEmpty(u)?null:(0,K.jsx)(k.A,{column:1,size:"small",title:o("resourceGroup.DriverOptions"),labelStyle:{width:"50%"},children:A().map(u,((e,n)=>(0,K.jsx)(k.A.Item,{label:A().startCase(n),children:A().isArray(e)?(0,K.jsx)(_.OO,{direction:"column",children:A().map(e,(e=>(0,K.jsx)(f.A,{children:e},e)))}):e},n)))})]}))},w=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"domain"},{defaultValue:null,kind:"LocalArgument",name:"scaling_group"}],n=[{alias:null,args:[{kind:"Variable",name:"domain",variableName:"domain"},{kind:"Variable",name:"scaling_group",variableName:"scaling_group"}],concreteType:"AssociateScalingGroupWithDomain",kind:"LinkedField",name:"associate_scaling_group_with_domain",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalAssociateDomainMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupSettingModalAssociateDomainMutation",selections:n},params:{cacheID:"72535173512804feacec89a7cabb4ac3",id:null,metadata:{},name:"ResourceGroupSettingModalAssociateDomainMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalAssociateDomainMutation(\n  $domain: String!\n  $scaling_group: String!\n) {\n  associate_scaling_group_with_domain(domain: $domain, scaling_group: $scaling_group) {\n    ok\n    msg\n  }\n}\n"}}}();w.hash="a1253f2e15bdfc1e59cdf2b26bc0a273";const M=w,T=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},n={defaultValue:null,kind:"LocalArgument",name:"name"},a=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"CreateScalingGroup",kind:"LinkedField",name:"create_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalCreateMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ResourceGroupSettingModalCreateMutation",selections:a},params:{cacheID:"6d6716d2dedf664e623006a2315b3c66",id:null,metadata:{},name:"ResourceGroupSettingModalCreateMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalCreateMutation(\n  $name: String!\n  $input: CreateScalingGroupInput!\n) {\n  create_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();T.hash="8642e40e794eaf1f4b0a84e05104d75c";const I=T,O=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},n={defaultValue:null,kind:"LocalArgument",name:"name"},a=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"ModifyScalingGroup",kind:"LinkedField",name:"modify_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalUpdateMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ResourceGroupSettingModalUpdateMutation",selections:a},params:{cacheID:"2352dc03b1acef2df9cf7c5f686665a3",id:null,metadata:{},name:"ResourceGroupSettingModalUpdateMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalUpdateMutation(\n  $name: String!\n  $input: ModifyScalingGroupInput!\n) {\n  modify_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();O.hash="510c22b428b17c9e16efd58a5f908c3d";const L=O,C={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null}],type:"ScalingGroup",abstractKey:null,hash:"738d94e03577df0f1298c085d29dcb12"},q=C;var N=a(48880),V=a(81838),z=a(49248),P=a(66597),$=a(30332),Q=a(94010),E=a(90711),B=a(30782),U=a(96677),J=a(33651),Z=a(60186),H=a(20714),W=a(93853);const X=["resourceGroupFrgmt","onRequestClose"],Y=e=>{var n,a,l,r,i,o;let{resourceGroupFrgmt:t,onRequestClose:s}=e,u=(0,p.A)(e,X);const{t:d}=(0,G.Bd)(),{token:g}=h.A.useToken(),{message:y}=P.A.useApp(),v=(0,c.eZ)(),x=(0,j.useRef)(null),k=(0,F.useFragment)(q,t),[f,b]=(0,F.useMutation)(L),[S,D]=(0,F.useMutation)(I),[R,w]=(0,F.useMutation)(M),T=(0,j.useMemo)((()=>JSON.parse((null===k||void 0===k?void 0:k.scheduler_opts)||"{}")),[null===k||void 0===k?void 0:k.scheduler_opts]),O=(0,_.N7)({name:null===k||void 0===k?void 0:k.name,description:null===k||void 0===k?void 0:k.description,domain:v,scheduler:null!==(n=null===k||void 0===k?void 0:k.scheduler)&&void 0!==n?n:"fifo",allowedSessionTypes:null!==(a=null===T||void 0===T?void 0:T.allowed_session_types)&&void 0!==a?a:["batch","interactive"],active:null===(l=null===k||void 0===k?void 0:k.is_active)||void 0===l||l,public:null===(r=null===k||void 0===k?void 0:k.is_public)||void 0===r||r,pendingTimeout:null!==T&&void 0!==T&&T.pending_timeout?A().toNumber(null===T||void 0===T?void 0:T.pending_timeout):null,retriesToSkip:null!==T&&void 0!==T&&null!==(i=T.config)&&void 0!==i&&i.num_retries_to_skip?A().toNumber(null===T||void 0===T||null===(o=T.config)||void 0===o?void 0:o.num_retries_to_skip):null,wsProxyAddress:null===k||void 0===k?void 0:k.wsproxy_addr});return(0,K.jsx)(_.Ib,(0,m.A)((0,m.A)({destroyOnHidden:!0,title:d(k?"resourceGroup.ModifyResourceGroup":"resourceGroup.CreateResourceGroup"),onCancel:()=>{null===s||void 0===s||s(!1)},okText:d(k?"button.Update":"button.Create"),okButtonProps:{loading:D||w||b},onOk:()=>{var e;null===(e=x.current)||void 0===e||e.validateFields().then((e=>{var n;const a={driver:"static",scheduler:e.scheduler,description:null!==(n=e.description)&&void 0!==n?n:null,driver_opts:"{}",scheduler_opts:JSON.stringify((0,m.A)((0,m.A)({allowed_session_types:e.allowedSessionTypes},e.pendingTimeout&&{pending_timeout:e.pendingTimeout}),e.retriesToSkip&&{config:{num_retries_to_skip:e.retriesToSkip}})),is_public:e.public,is_active:e.active,wsproxy_addr:e.wsProxyAddress};k?f({variables:{name:k.name,input:a},onCompleted:(e,n)=>{let{modify_scaling_group:a}=e;if(null!==a&&void 0!==a&&a.ok)if(n&&n.length>0){const e=A().map(n,(e=>e.message));for(const n of e)y.error(n)}else y.success(d("resourceGroup.ResourceGroupModified")),null===s||void 0===s||s(!0);else y.error(null===a||void 0===a?void 0:a.msg)},onError:e=>{y.error(e.message)}}):S({variables:{name:e.name,input:a},onCompleted:(n,a)=>{let{create_scaling_group:l}=n;if(a&&a.length>0){const e=A().map(a,(e=>e.message));for(const n of e)y.error(n)}else null!==l&&void 0!==l&&l.ok?R({variables:{domain:e.domain,scaling_group:e.name},onCompleted:(e,n)=>{let{associate_scaling_group_with_domain:a}=e;if(null!==a&&void 0!==a&&a.ok)if(n&&n.length>0){const e=A().map(n,(e=>e.message));for(const n of e)y.error(n)}else y.success(d("resourceGroup.ResourceGroupCreated")),null===s||void 0===s||s(!0);else y.error(null===a||void 0===a?void 0:a.msg)},onError:e=>{y.error(e.message)}}):y.error(null===l||void 0===l?void 0:l.msg)},onError:e=>{y.error(e.message)}})})).catch((()=>{}))}},u),{},{children:(0,K.jsx)(j.Suspense,{fallback:(0,K.jsx)($.A,{active:!0}),children:(0,K.jsxs)(Q.A,{ref:x,initialValues:O,layout:"vertical",children:[(0,K.jsx)(Q.A.Item,{label:d("resourceGroup.Name"),name:"name",rules:[{required:!0,message:d("general.ValueRequired",{name:d("resourceGroup.Name")})}],children:(0,K.jsx)(E.A,{disabled:!!k})}),k?null:(0,K.jsx)(Q.A.Item,{label:d("resourceGroup.Domain"),name:"domain",rules:[{required:!0,message:d("general.ValueRequired",{name:d("resourceGroup.Domain")})}],children:(0,K.jsx)(V.A,{})}),(0,K.jsx)(Q.A.Item,{label:d("resourceGroup.Description"),name:"description",children:(0,K.jsx)(E.A.TextArea,{})}),(0,K.jsx)(Q.A.Item,{label:d("resourceGroup.AllowedSessionTypes"),name:"allowedSessionTypes",rules:[{required:!0,message:d("general.ValueRequired",{name:d("resourceGroup.AllowedSessionTypes")})}],children:(0,K.jsx)(B.A,{mode:"multiple",options:[{label:"Batch",value:"batch"},{label:"Interactive",value:"interactive"},{label:"Inference",value:"inference"},{label:"System",value:"system"}]})}),(0,K.jsx)(Q.A.Item,{label:d("resourceGroup.WsproxyAddress"),name:"wsProxyAddress",rules:[{type:"url",message:d("error.InvalidUrl")}],children:(0,K.jsx)(E.A,{placeholder:"http://localhost:10200"})}),(0,K.jsxs)(U.A,{children:[(0,K.jsx)(J.A,{span:12,children:(0,K.jsx)(Q.A.Item,{layout:"horizontal",label:d("resourceGroup.Active"),name:"active",children:(0,K.jsx)(Z.A,{})})}),(0,K.jsx)(J.A,{span:12,children:(0,K.jsx)(Q.A.Item,{layout:"horizontal",label:d("resourceGroup.Public"),name:"public",children:(0,K.jsx)(Z.A,{})})})]}),(0,K.jsx)(Q.A.Item,{label:d("resourceGroup.Scheduler"),name:"scheduler",rules:[{required:!0,message:d("general.ValueRequired",{name:d("resourceGroup.Scheduler")})}],children:(0,K.jsx)(B.A,{options:[{label:"FIFO",value:"fifo"},{label:"LIFO",value:"lifo"},{label:"DRF",value:"drf"}]})}),(0,K.jsx)(Q.A.Item,{label:d("resourceGroup.SchedulerOptions"),children:(0,K.jsxs)(_.Zu,{styles:{body:{paddingBottom:0}},children:[(0,K.jsx)(Q.A.Item,{label:(0,K.jsxs)(_.OO,{gap:"xxs",children:[d("resourceGroup.PendingTimeout"),(0,K.jsx)(H.A,{title:(0,N.y1)(d("resourceGroup.PendingTimeoutDesc")),children:(0,K.jsx)(z.A,{style:{color:g.colorTextSecondary}})})]}),name:"pendingTimeout",children:(0,K.jsx)(W.A,{style:{width:"100%"},addonAfter:d("resourceGroup.TimeoutSeconds"),min:0})}),(0,K.jsx)(Q.A.Item,{label:(0,K.jsx)(_.OO,{style:{whiteSpace:"pre"},children:d("resourceGroup.RetriesToSkipDesc")}),name:"retriesToSkip",children:(0,K.jsx)(W.A,{style:{width:"100%"},addonAfter:d("resourceGroup.RetriesToSkip"),min:0})})]})})]})})}))};var ee=a(32467),ne=a(89353),ae=a(78794),le=a(57586),re=a(84423),ie=a(8343),oe=a(69062),te=a(31035),se=a(14781),ue=a(71928);const ce=()=>{const{t:e}=(0,G.Bd)(),{token:n}=h.A.useToken(),{message:a}=P.A.useApp(),[l,r]=(0,j.useState)("active"),[o,{toggle:s}]=(0,re.A)(!1),[m,{toggle:p}]=(0,re.A)(!1),[g,y]=(0,j.useState)(),[k,f]=(0,j.useState)(),[S,D]=(0,c.Tw)("first"),[w,M]=(0,j.useTransition)(),[T,I]=(0,j.useTransition)(),{scaling_groups:O}=(0,F.useLazyLoadQuery)(u,{is_active:"active"===l},{fetchPolicy:"store-and-network",fetchKey:S}),[L,C]=(0,F.useMutation)(t),[q,N]=(0,F.useMutation)(i),V=(0,_.YM)([{key:"name",title:e("resourceGroup.Name"),dataIndex:"name"},{key:"description",title:e("resourceGroup.Description"),dataIndex:"description",render:e=>e||"-"},{key:"is_public",title:e("resourceGroup.Public"),dataIndex:"is_public",render:e=>e?(0,K.jsx)(v.A,{style:{color:n.colorSuccess}}):(0,K.jsx)(x.A,{style:{color:n.colorTextSecondary}})},{key:"driver",title:e("resourceGroup.Driver"),dataIndex:"driver"},{key:"scheduler",title:e("resourceGroup.Scheduler"),dataIndex:"scheduler",render:e=>A().toUpper(e)},{key:"wsproxy_addr",title:e("resourceGroup.WsproxyAddress"),dataIndex:"wsproxy_addr",render:e=>e||"-"},{key:"controls",title:e("general.Control"),fixed:"right",render:(l,r)=>(0,K.jsxs)(_.OO,{children:[(0,K.jsx)(ie.Ay,{type:"text",icon:(0,K.jsx)(ee.A,{}),style:{color:n.colorSuccess},onClick:()=>{y(r),p()}}),(0,K.jsx)(ie.Ay,{type:"text",icon:(0,K.jsx)(ne.A,{}),style:{color:n.colorInfo},onClick:()=>{y(r),s()}}),(0,K.jsx)(H.A,{title:r.is_active?e("resourceGroup.Deactivate"):e("resourceGroup.Activate"),children:(0,K.jsx)(oe.A,{title:r.is_active?e("resourceGroup.DeactivateResourceGroup"):e("resourceGroup.ActivateResourceGroup"),placement:"left",okType:r.is_active?"danger":"primary",okText:r.is_active?e("resourceGroup.Deactivate"):e("resourceGroup.Activate"),description:null===r||void 0===r?void 0:r.name,onConfirm:()=>{var n;L({variables:{name:null!==(n=r.name)&&void 0!==n?n:"",input:{is_active:!r.is_active}},onCompleted:(n,r)=>{let{modify_scaling_group:i}=n;if(null!==i&&void 0!==i&&i.ok)if(r&&r.length>0){const e=l.map(r,(e=>e.message));for(const n of e)a.error(n)}else a.success(e("resourceGroup.ResourceGroupModified")),I((()=>{D()}));else a.error(null===i||void 0===i?void 0:i.msg)},onError:e=>{a.error(e.message)}})},children:(0,K.jsx)(ie.Ay,{type:"text",danger:!!r.is_active,icon:r.is_active?(0,K.jsx)(se.A,{}):(0,K.jsx)(ue.A,{}),loading:C})})}),(0,K.jsx)(H.A,{title:e("button.Delete"),children:(0,K.jsx)(ie.Ay,{type:"text",icon:(0,K.jsx)(ae.A,{style:{color:n.colorError}}),onClick:()=>{f((null===r||void 0===r?void 0:r.name)||"")}})})]})}]);return(0,K.jsxs)(_.OO,{direction:"column",align:"stretch",gap:"sm",children:[(0,K.jsxs)(_.OO,{justify:"between",children:[(0,K.jsx)(d.A,{value:l,onChange:e=>{M((()=>{r(e.target.value)}))},optionType:"button",options:[{label:e("general.Active"),value:"active"},{label:e("general.Inactive"),value:"inactive"}]}),(0,K.jsxs)(_.OO,{gap:"sm",children:[(0,K.jsx)(_.u8,{loading:T,value:S,onChange:()=>{I((()=>{D()}))}}),(0,K.jsx)(ie.Ay,{type:"primary",icon:(0,K.jsx)(le.A,{}),onClick:()=>s(),children:e("button.Create")})]})]}),(0,K.jsx)(_.zx,{rowKey:"name",resizable:!0,size:"small",scroll:{x:"max-content"},columns:V,dataSource:(0,_.f)(O),loading:w}),(0,K.jsx)(_.Qo,{open:!!k,title:e("resourceGroup.DeleteResourceGroup"),content:(0,K.jsxs)(_.OO,{direction:"column",gap:"md",align:"stretch",style:{marginBottom:n.marginXS,width:"100%"},children:[(0,K.jsx)(te.A,{type:"warning",message:e("dialog.warning.DeleteForeverDesc"),style:{width:"100%"}}),(0,K.jsxs)(_.OO,{children:[(0,K.jsx)(b.A.Text,{style:{marginRight:n.marginXXS},children:e("resourceGroup.TypeResourceGroupNameToDelete")}),"(",(0,K.jsx)(b.A.Text,{code:!0,children:k}),")"]})]}),confirmText:null!==k&&void 0!==k?k:"",onOk:()=>{q({variables:{name:null!==k&&void 0!==k?k:""},onCompleted:(n,l)=>{let{delete_scaling_group:r}=n;if(null!==r&&void 0!==r&&r.ok)if(l&&l.length>0){const e=A().map(l,(e=>e.message));for(const n of e)a.error(n)}else a.success(e("resourceGroup.ResourceGroupDeleted")),f(void 0),I((()=>{D()}));else a.error(null===r||void 0===r?void 0:r.msg)},onError:e=>{a.error(e.message)}})},okButtonProps:{loading:N},onCancel:()=>{f(void 0)}}),(0,K.jsx)(R,{open:m&&!!g,resourceGroupFrgmt:g,onRequestClose:()=>{p(),y(void 0)}}),(0,K.jsx)(Y,{open:o,resourceGroupFrgmt:g,onRequestClose:e=>{s(),y(void 0),e&&I((()=>{D()}))}})]})},de=function(){var e={defaultValue:null,kind:"LocalArgument",name:"limit"},n={defaultValue:null,kind:"LocalArgument",name:"offset"},a=[{alias:null,args:[{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"}],concreteType:"StorageVolumeList",kind:"LinkedField",name:"storage_volume_list",plural:!1,selections:[{alias:null,args:null,concreteType:"StorageVolume",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backend",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fsprefix",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"performance_metric",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"usage",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"StorageProxyListQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"StorageProxyListQuery",selections:a},params:{cacheID:"00f25e00fb3163b514baaa3ef857ead0",id:null,metadata:{},name:"StorageProxyListQuery",operationKind:"query",text:"query StorageProxyListQuery(\n  $offset: Int!\n  $limit: Int!\n) {\n  storage_volume_list(limit: $limit, offset: $offset) {\n    items {\n      id\n      backend\n      capabilities\n      path\n      fsprefix\n      performance_metric\n      usage\n    }\n    total_count\n  }\n}\n"}}}();de.hash="8eea8c97cb39a266757eaa25705b6633";const me=de;var pe=a(91225),ge=a(3401),ye=a(90679);const ve=(0,a(24604).A)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),xe={xfs:{color:"blue",icon:(0,K.jsx)(ve,{})},ceph:{color:"lightblue",icon:(0,K.jsx)(_.qb,{})},cephfs:{color:"lightblue",icon:(0,K.jsx)(_.qb,{})},vfs:{color:"green",icon:(0,K.jsx)(ve,{})},nfs:{color:"green",icon:(0,K.jsx)(ve,{})},purestorage:{color:"red",icon:(0,K.jsx)(_.Zd,{})},dgx:{color:"green",icon:(0,K.jsx)(ve,{})},spectrumscale:{color:"green",icon:(0,K.jsx)(ve,{})},weka:{color:"purple",icon:(0,K.jsx)(ve,{})}},he=()=>{var e;const{token:n}=h.A.useToken(),{t:a}=(0,G.Bd)(),{baiPaginationOption:l,tablePaginationOption:r,setTablePaginationOption:i}=(0,pe.L0)({current:1,pageSize:10}),[o,t]=(0,c.zu)(),s=(0,j.useMemo)((()=>({offset:l.offset,limit:l.limit})),[l.offset,l.limit]),u=(0,j.useDeferredValue)(s),d=(0,j.useDeferredValue)(o),{storage_volume_list:m}=(0,F.useLazyLoadQuery)(me,u,{fetchPolicy:d===c.eI?"store-and-network":"network-only",fetchKey:d}),p=[{title:(0,K.jsxs)(K.Fragment,{children:["ID / ",a("agent.Endpoint")]}),key:"id",dataIndex:"id",render:(e,n)=>(0,K.jsxs)(_.OO,{direction:"column",align:"start",children:[(0,K.jsx)(b.A.Text,{children:e}),(0,K.jsx)(b.A.Text,{type:"secondary",children:n.path})]})},{title:a("agent.BackendType"),key:"backend",dataIndex:"backend",render:e=>{var n;const a=null!==(n=xe[e])&&void 0!==n?n:{color:"gold",icon:(0,K.jsx)(ve,{})};return(0,K.jsxs)(_.OO,{gap:"xxs",children:[a.icon,(0,K.jsx)(ye.A,{values:[{label:"Backend"},{label:e,color:a.color}]})]})}},{title:a("agent.Resources"),key:"usage",dataIndex:"usage",render:e=>{var a,l,r;const i=JSON.parse(e),o=(null===i||void 0===i?void 0:i.capacity_bytes)>0?i.used_bytes/i.capacity_bytes:0,t=A().toFinite((0,N.Z1)(100*o,2)),s=t>80?n.colorError:n.colorSuccess,u=(null===(a=(0,N.Ho)(A().toString(null===i||void 0===i?void 0:i.capacity_bytes),"auto",{base:1e3}))||void 0===a?void 0:a.unit)||"g";return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(ge.A,{valueLabel:(0,N.Z1)(t,1)+" %",percent:t,strokeColor:s,width:120}),(0,K.jsxs)(b.A.Text,{style:{fontSize:n.fontSizeSM},children:[i.used_bytes?null===(l=(0,N.Gh)(i.used_bytes,u))||void 0===l?void 0:l.numberFixed:"-","\xa0/\xa0",i.capacity_bytes?null===(r=(0,N.Gh)(i.capacity_bytes,u))||void 0===r?void 0:r.displayValue:"-"]})]})}},{title:a("agent.Capabilities"),key:"capabilities",dataIndex:"capabilities",width:150,render:e=>(0,K.jsx)(_.OO,{gap:"xxs",align:"start",wrap:"wrap",children:A().map(e,(e=>(0,K.jsx)(f.A,{color:"blue",style:{margin:0},children:e},e)))})},{title:a("general.Control"),key:"control",width:100,fixed:"right",render:(e,a)=>{let l;try{const e=JSON.parse(a.performance_metric||"{}");l=A().isEmpty(e)}catch(r){l=!0}return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(ie.Ay,{disabled:l,style:{color:l?n.colorTextDisabled:n.colorSuccess},icon:(0,K.jsx)(ee.A,{}),onClick:()=>{const e=new CustomEvent("backend-ai-selected-storage-proxy",{detail:a.id});document.dispatchEvent(e)},type:"text"}),(0,K.jsx)(_.rm,{to:"/storage-settings/".concat(a.id),children:(0,K.jsx)(ie.Ay,{style:{color:n.colorInfo},icon:(0,K.jsx)(ne.A,{}),type:"text"})})]})}}];return(0,j.useEffect)((()=>{if(!A().isEmpty(null===m||void 0===m?void 0:m.items)){const e=new CustomEvent("backend-ai-storage-proxy-updated",{});document.dispatchEvent(e)}}),[m]),(0,K.jsxs)(_.OO,{direction:"column",align:"stretch",gap:"sm",children:[(0,K.jsx)(_.OO,{justify:"end",wrap:"wrap",gap:"sm",children:(0,K.jsx)(_.u8,{loading:d!==o||u!==s,autoUpdateDelay:15e3,value:o,onChange:()=>{t()}})}),(0,K.jsx)(_.zx,{resizable:!0,size:"small",scroll:{x:"max-content"},rowKey:"id",dataSource:(0,_.f)(null===m||void 0===m?void 0:m.items),columns:p,loading:u!==s||d!==o,pagination:{pageSize:r.pageSize,current:r.current,total:null!==(e=null===m||void 0===m?void 0:m.total_count)&&void 0!==e?e:0,onChange(e,n){A().isNumber(e)&&A().isNumber(n)&&i({pageSize:n,current:e})}}})]})};var ke=a(69362),fe=a(73233);const be=(0,fe.withDefault)(fe.StringParam,"agents"),_e=()=>{const{t:e}=(0,G.Bd)(),[n,a]=(0,fe.useQueryParam)("tab",be,{updateType:"replace"});return(0,K.jsx)(_.Zu,{activeTabKey:n,onTabChange:e=>a(e),tabList:[{key:"agents",tab:e("agent.Agent")},{key:"storages",tab:e("general.StorageProxies")},{key:"resourceGroup",tab:e("general.ResourceGroup")}],children:(0,K.jsxs)(j.Suspense,{fallback:(0,K.jsx)($.A,{active:!0}),children:["agents"===n&&(0,K.jsx)(ke.A,{children:(0,K.jsx)(l.A,{})}),"storages"===n&&(0,K.jsx)(ke.A,{children:(0,K.jsx)(he,{})}),"resourceGroup"===n&&(0,K.jsx)(ke.A,{children:(0,K.jsx)(ce,{})})]})})}},71928:(e,n,a)=>{a.d(n,{A:()=>l});const l=(0,a(24604).A)("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]])},72627:(e,n,a)=>{a.d(n,{A:()=>s});var l=a(1139),r=a(17534);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};var o=a(5436),t=function(e,n){return r.createElement(o.A,(0,l.A)({},e,{ref:n,icon:i}))};const s=r.forwardRef(t)},81838:(e,n,a)=>{a.d(n,{A:()=>g});var l=a(56276),r=a(11863);const i=function(){var e=[{alias:null,args:[{kind:"Literal",name:"is_active",value:!0}],concreteType:"Domain",kind:"LinkedField",name:"domains",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:"domains(is_active:true)"}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DomainSelectorQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"DomainSelectorQuery",selections:e},params:{cacheID:"9df762094b74dc3eb8079edfcc73765f",id:null,metadata:{},name:"DomainSelectorQuery",operationKind:"query",text:"query DomainSelectorQuery {\n  domains(is_active: true) {\n    name\n  }\n}\n"}}}();i.hash="c14d362fa40cf9a3cef5d1d71202cc5f";const o=i;var t=a(30782),s=a(47699),u=a.n(s),c=(a(17534),a(62962)),d=a(46336),m=a(89374);const p=["onSelectDomain"],g=e=>{let{onSelectDomain:n}=e,a=(0,r.A)(e,p);const{t:i}=(0,c.Bd)(),{domains:s}=(0,d.useLazyLoadQuery)(o,{},{fetchPolicy:"store-and-network"});return(0,m.jsxs)(t.A,(0,l.A)((0,l.A)({onChange:(e,a)=>{null===n||void 0===n||n(a)},placeholder:i("storageHost.quotaSettings.SelectDomain")},a),{},{children:[u().map(s,(e=>(0,m.jsx)(t.A.Option,{domainName:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.name))),";"]}))}}}]);
//# sourceMappingURL=4207.6a3ad13c.chunk.js.map