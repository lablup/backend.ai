{"version":3,"file":"static/js/9729.97851dba.chunk.js","mappings":"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","sources":["components/DoubleTag.tsx","components/ImageTags.tsx","components/ResourceNumber.tsx","components/__generated__/ImageListQuery.graphql.ts","components/__generated__/ManageAppsModalMutation.graphql.ts","components/__generated__/ManageImageResourceLimitModalMutation.graphql.ts","components/ImageInstallModal.tsx","components/ManageAppsModal.tsx","components/NonLinearSlider.tsx","components/ImageResourceFormItem.tsx","components/ManageImageResourceLimitModal.tsx","../node_modules/.pnpm/@ant-design+icons-svg@4.4.2/node_modules/@ant-design/icons-svg/es/asn/AppstoreOutlined.js","../node_modules/.pnpm/@ant-design+icons@5.4.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ant-design/icons/es/icons/AppstoreOutlined.js","../node_modules/.pnpm/@ant-design+icons-svg@4.4.2/node_modules/@ant-design/icons-svg/es/asn/VerticalAlignBottomOutlined.js","../node_modules/.pnpm/@ant-design+icons@5.4.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@ant-design/icons/es/icons/VerticalAlignBottomOutlined.js","components/ImageList.tsx","pages/EnvironmentPage.tsx"],"sourcesContent":["import Flex from './Flex';\nimport { Tag } from 'antd';\nimport _ from 'lodash';\nimport React from 'react';\n\nexport type DoubleTagObjectValue = {\n  label: ValueType;\n  color?: string;\n};\n\ntype ValueType = string | React.ReactNode;\nconst DoubleTag: React.FC<{\n  values?: ValueType[] | DoubleTagObjectValue[];\n}> = ({ values = [] }) => {\n  if (values.length === 0) return null;\n  let objectValues: DoubleTagObjectValue[];\n  if (\n    values[0] &&\n    (typeof values[0] === 'string' || React.isValidElement(values[0]))\n  ) {\n    objectValues = values.map(\n      (value) =>\n        ({\n          label: value,\n          color: 'blue',\n        }) as DoubleTagObjectValue,\n    );\n  } else {\n    objectValues = values as DoubleTagObjectValue[];\n  }\n\n  return (\n    <Flex direction=\"row\">\n      {_.map(objectValues, (objValue, idx) => {\n        return (\n          <Tag\n            key={idx}\n            style={\n              _.last(objectValues) === objValue\n                ? undefined\n                : { margin: 0, marginRight: -1 }\n            }\n            color={objValue.color}\n          >\n            {objValue.label}\n          </Tag>\n        );\n      })}\n    </Flex>\n  );\n};\n\nexport default DoubleTag;\n","import { useBackendAIImageMetaData } from '../hooks';\nimport DoubleTag, { DoubleTagObjectValue } from './DoubleTag';\nimport Flex from './Flex';\nimport TextHighlighter from './TextHighlighter';\nimport { Tag, TagProps } from 'antd';\nimport React from 'react';\n\ninterface ImageAliasNameAndBaseVersionTagsProps\n  extends Omit<DoubleTagObjectValue, 'label'> {\n  image: string | null;\n}\nexport const ImageAliasNameAndBaseVersionTags: React.FC<\n  ImageAliasNameAndBaseVersionTagsProps\n> = ({ image, ...props }) => {\n  image = image || '';\n  const [, { getImageAliasName, getBaseVersion, tagAlias }] =\n    useBackendAIImageMetaData();\n  return (\n    <DoubleTag\n      values={[\n        {\n          label: tagAlias(getImageAliasName(image)),\n          color: 'blue',\n        },\n        {\n          label: getBaseVersion(image),\n          color: 'green',\n        },\n      ]}\n      {...props}\n    />\n  );\n};\n\ninterface BaseVersionTagsProps extends TagProps {\n  image: string | null;\n}\nexport const BaseVersionTags: React.FC<BaseVersionTagsProps> = ({\n  image,\n  ...props\n}) => {\n  image = image || '';\n  const [, { getBaseVersion, tagAlias }] = useBackendAIImageMetaData();\n  return (\n    <Tag color=\"green\" {...props}>\n      {tagAlias(getBaseVersion(image))}\n    </Tag>\n  );\n};\n\ninterface BaseImageTagsProps extends TagProps {\n  image: string | null;\n}\nexport const BaseImageTags: React.FC<BaseImageTagsProps> = ({\n  image,\n  ...props\n}) => {\n  image = image || '';\n  const [, { getBaseImage, tagAlias }] = useBackendAIImageMetaData();\n  return (\n    <Tag color=\"green\" {...props}>\n      {tagAlias(getBaseImage(image))}\n    </Tag>\n  );\n};\n\ninterface ArchitectureTagsProps extends TagProps {\n  image: string | null;\n}\nexport const ArchitectureTags: React.FC<ArchitectureTagsProps> = ({\n  image,\n  ...props\n}) => {\n  image = image || '';\n  const [, { getArchitecture, tagAlias }] = useBackendAIImageMetaData();\n  return (\n    <Tag color=\"green\" {...props}>\n      {tagAlias(getArchitecture(image))}\n    </Tag>\n  );\n};\n\ninterface LangTagsProps extends TagProps {\n  image: string | null;\n}\nexport const LangTags: React.FC<LangTagsProps> = ({ image, ...props }) => {\n  image = image || '';\n  const [, { getImageLang, tagAlias }] = useBackendAIImageMetaData();\n  return (\n    <Tag color=\"green\" {...props}>\n      {tagAlias(getImageLang(image))}\n    </Tag>\n  );\n};\n\ninterface ConstraintTagsProps extends TagProps {\n  tag: string;\n  labels: { key: string; value: string }[];\n  highlightKeyword?: string;\n}\nexport const ConstraintTags: React.FC<ConstraintTagsProps> = ({\n  tag,\n  labels,\n  highlightKeyword,\n  ...props\n}) => {\n  labels = labels || [];\n  const [, { getConstraints }] = useBackendAIImageMetaData();\n  const constraints = getConstraints(tag, labels);\n  return (\n    <Flex direction=\"row\" align=\"start\">\n      {constraints[0] ? (\n        <Tag color=\"blue\" {...props}>\n          <TextHighlighter keyword={highlightKeyword}>\n            {constraints[0]}\n          </TextHighlighter>\n        </Tag>\n      ) : null}\n      {constraints[1] ? (\n        <DoubleTag\n          color=\"cyan\"\n          values={[\n            {\n              label: (\n                <TextHighlighter keyword={highlightKeyword}>\n                  Customized\n                </TextHighlighter>\n              ),\n              color: 'cyan',\n            },\n            {\n              label: (\n                <TextHighlighter keyword={highlightKeyword}>\n                  {constraints[1]}\n                </TextHighlighter>\n              ),\n              color: 'cyan',\n            },\n          ]}\n          {...props}\n        />\n      ) : null}\n    </Flex>\n  );\n};\n\nconst SessionKernelTags: React.FC<{\n  image: string | null;\n  style?: React.CSSProperties;\n  border?: boolean;\n}> = ({ image, style = {} }, bordered) => {\n  image = image || '';\n  return (\n    <>\n      <ImageAliasNameAndBaseVersionTags image={image} />\n      <BaseImageTags image={image} />\n      <ArchitectureTags image={image} />\n    </>\n  );\n};\n\nexport default React.memo(SessionKernelTags);\n","import { iSizeToSize } from '../helper';\nimport { useResourceSlotsDetails } from '../hooks/backendai';\nimport { useCurrentResourceGroupValue } from '../hooks/useCurrentProject';\nimport Flex from './Flex';\nimport { Tooltip, Typography, theme } from 'antd';\nimport _ from 'lodash';\nimport React, { ReactElement } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nexport const ACCELERATOR_UNIT_MAP: {\n  [key: string]: string;\n} = {\n  'cuda.device': 'GPU',\n  'cuda.shares': 'FGPU',\n  'rocm.device': 'GPU',\n  'tpu.device': 'TPU',\n  'ipu.device': 'IPU',\n  'atom.device': 'ATOM',\n  'atom-plus.device': 'ATOM+',\n  'gaudi2.device': 'Gaudi 2',\n  'warboy.device': 'Warboy',\n  'hyperaccel-lpu.device': 'Hyperaccel LPU',\n};\n\nexport type ResourceOpts = {\n  shmem?: number;\n};\ninterface ResourceNumberProps {\n  type: string;\n  extra?: ReactElement;\n  opts?: ResourceOpts;\n  value: string;\n  hideTooltip?: boolean;\n  max?: string;\n}\n\ntype ResourceTypeInfo<V> = {\n  [key in string]: V;\n};\nconst ResourceNumber: React.FC<ResourceNumberProps> = ({\n  type,\n  value: amount,\n  extra,\n  opts,\n  hideTooltip = false,\n  max,\n}) => {\n  const { token } = theme.useToken();\n  const currentGroup = useCurrentResourceGroupValue();\n  const [resourceSlotsDetails] = useResourceSlotsDetails(\n    currentGroup || undefined,\n  );\n\n  const formatAmount = (amount: string) => {\n    return resourceSlotsDetails?.[type]?.number_format.binary\n      ? Number(iSizeToSize(amount, 'g', 3, true)?.numberFixed).toString()\n      : (resourceSlotsDetails?.[type]?.number_format.round_length || 0) > 0\n        ? parseFloat(amount).toFixed(2)\n        : amount;\n  };\n\n  return (\n    <Flex direction=\"row\" gap=\"xxs\">\n      {resourceSlotsDetails?.[type] ? (\n        <ResourceTypeIcon type={type} showTooltip={!hideTooltip} />\n      ) : (\n        type\n      )}\n\n      <Typography.Text>\n        {formatAmount(amount)}\n        {_.isUndefined(max)\n          ? null\n          : max === 'Infinity'\n            ? '~âˆž'\n            : `~${formatAmount(max)}`}\n      </Typography.Text>\n      <Typography.Text type=\"secondary\">\n        {resourceSlotsDetails?.[type]?.display_unit || ''}\n      </Typography.Text>\n      {type === 'mem' && opts?.shmem && opts?.shmem > 0 ? (\n        <Typography.Text\n          type=\"secondary\"\n          style={{ fontSize: token.fontSizeSM }}\n        >\n          (SHM: {iSizeToSize(opts.shmem + 'b', 'g', 2, true)?.numberFixed}\n          GiB)\n        </Typography.Text>\n      ) : null}\n      {extra}\n    </Flex>\n  );\n};\n\nconst MWCIconWrap: React.FC<{ size?: number; children: string }> = ({\n  size = 16,\n  children,\n}) => {\n  return (\n    // @ts-ignore\n    <mwc-icon\n      style={{\n        '--mdc-icon-size': `${size + 2}px`,\n        width: size,\n        height: size,\n      }}\n    >\n      {children}\n      {/* @ts-ignore */}\n    </mwc-icon>\n  );\n};\ninterface AccTypeIconProps\n  extends Omit<React.ImgHTMLAttributes<HTMLImageElement>, 'src'> {\n  type: string;\n  showIcon?: boolean;\n  showUnit?: boolean;\n  showTooltip?: boolean;\n  size?: number;\n}\nexport const ResourceTypeIcon: React.FC<AccTypeIconProps> = ({\n  type,\n  size = 16,\n  showIcon = true,\n  showUnit = true,\n  showTooltip = true,\n  ...props\n}) => {\n  const { t } = useTranslation();\n\n  const resourceTypeIconSrcMap: ResourceTypeInfo<\n    [ReactElement | string, string]\n  > = {\n    cpu: [\n      <MWCIconWrap size={size}>developer_board</MWCIconWrap>,\n      t('session.core'),\n    ],\n    mem: [<MWCIconWrap size={size}>memory</MWCIconWrap>, 'GiB'],\n    'cuda.device': ['/resources/icons/file_type_cuda.svg', 'GPU'],\n    'cuda.shares': ['/resources/icons/file_type_cuda.svg', 'FGPU'],\n    'rocm.device': ['/resources/icons/rocm.svg', 'GPU'],\n    'tpu.device': [<MWCIconWrap size={size}>view_module</MWCIconWrap>, 'TPU'],\n    'ipu.device': [<MWCIconWrap size={size}>view_module</MWCIconWrap>, 'IPU'],\n    'atom.device': ['/resources/icons/rebel.svg', 'ATOM'],\n    'atom-plus.device': ['/resources/icons/rebel.svg', 'ATOM+'],\n    'gaudi2.device': ['/resources/icons/gaudi.svg', 'Gaudi 2'],\n    'warboy.device': ['/resources/icons/furiosa.svg', 'Warboy'],\n    'hyperaccel-lpu.device': [\n      '/resources/icons/npu_generic.svg',\n      'Hyperaccel LPU',\n    ],\n  };\n\n  const content =\n    typeof resourceTypeIconSrcMap[type]?.[0] === 'string' ? (\n      <img\n        {...props}\n        style={{\n          height: size,\n          alignSelf: 'center',\n          ...(props.style || {}),\n        }}\n        // @ts-ignore\n        src={resourceTypeIconSrcMap[type]?.[0] || ''}\n        alt={type}\n      />\n    ) : (\n      <Flex style={{ width: 16, height: 16 }}>\n        {resourceTypeIconSrcMap[type]?.[0] || type}\n      </Flex>\n    );\n\n  return showTooltip ? (\n    // <Tooltip title={showTooltip ? `${type} (${resourceTypeIconSrcMap[type][1]})` : undefined}>\n    <Tooltip title={type}>{content}</Tooltip>\n  ) : (\n    <Flex style={{ pointerEvents: 'none' }}>{content}</Flex>\n  );\n};\n\nexport default React.memo(ResourceNumber);\n","/**\n * @generated SignedSource<<23f006feea823338a5e9b50f6d11d5e8>>\n * @lightSyntaxTransform\n * @nogrep\n */\n\n/* tslint:disable */\n/* eslint-disable */\n// @ts-nocheck\n\nimport { ConcreteRequest, Query } from 'relay-runtime';\nexport type ImageListQuery$variables = Record<PropertyKey, never>;\nexport type ImageListQuery$data = {\n  readonly images: ReadonlyArray<{\n    readonly architecture: string | null | undefined;\n    readonly digest: string | null | undefined;\n    readonly humanized_name: string | null | undefined;\n    readonly id: string | null | undefined;\n    readonly installed: boolean | null | undefined;\n    readonly labels: ReadonlyArray<{\n      readonly key: string | null | undefined;\n      readonly value: string | null | undefined;\n    } | null | undefined> | null | undefined;\n    readonly name: string | null | undefined;\n    readonly registry: string | null | undefined;\n    readonly resource_limits: ReadonlyArray<{\n      readonly key: string | null | undefined;\n      readonly max: string | null | undefined;\n      readonly min: string | null | undefined;\n    } | null | undefined> | null | undefined;\n    readonly tag: string | null | undefined;\n  } | null | undefined> | null | undefined;\n};\nexport type ImageListQuery = {\n  response: ImageListQuery$data;\n  variables: ImageListQuery$variables;\n};\n\nconst node: ConcreteRequest = (function(){\nvar v0 = {\n  \"alias\": null,\n  \"args\": null,\n  \"kind\": \"ScalarField\",\n  \"name\": \"key\",\n  \"storageKey\": null\n},\nv1 = [\n  {\n    \"alias\": null,\n    \"args\": null,\n    \"concreteType\": \"Image\",\n    \"kind\": \"LinkedField\",\n    \"name\": \"images\",\n    \"plural\": true,\n    \"selections\": [\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"id\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"name\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"tag\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"registry\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"architecture\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"digest\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"installed\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"concreteType\": \"KVPair\",\n        \"kind\": \"LinkedField\",\n        \"name\": \"labels\",\n        \"plural\": true,\n        \"selections\": [\n          (v0/*: any*/),\n          {\n            \"alias\": null,\n            \"args\": null,\n            \"kind\": \"ScalarField\",\n            \"name\": \"value\",\n            \"storageKey\": null\n          }\n        ],\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"humanized_name\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"concreteType\": \"ResourceLimit\",\n        \"kind\": \"LinkedField\",\n        \"name\": \"resource_limits\",\n        \"plural\": true,\n        \"selections\": [\n          (v0/*: any*/),\n          {\n            \"alias\": null,\n            \"args\": null,\n            \"kind\": \"ScalarField\",\n            \"name\": \"min\",\n            \"storageKey\": null\n          },\n          {\n            \"alias\": null,\n            \"args\": null,\n            \"kind\": \"ScalarField\",\n            \"name\": \"max\",\n            \"storageKey\": null\n          }\n        ],\n        \"storageKey\": null\n      }\n    ],\n    \"storageKey\": null\n  }\n];\nreturn {\n  \"fragment\": {\n    \"argumentDefinitions\": [],\n    \"kind\": \"Fragment\",\n    \"metadata\": null,\n    \"name\": \"ImageListQuery\",\n    \"selections\": (v1/*: any*/),\n    \"type\": \"Queries\",\n    \"abstractKey\": null\n  },\n  \"kind\": \"Request\",\n  \"operation\": {\n    \"argumentDefinitions\": [],\n    \"kind\": \"Operation\",\n    \"name\": \"ImageListQuery\",\n    \"selections\": (v1/*: any*/)\n  },\n  \"params\": {\n    \"cacheID\": \"a9b21b0f0f396926cf1af9e794ec4c1d\",\n    \"id\": null,\n    \"metadata\": {},\n    \"name\": \"ImageListQuery\",\n    \"operationKind\": \"query\",\n    \"text\": \"query ImageListQuery {\\n  images {\\n    id\\n    name\\n    tag\\n    registry\\n    architecture\\n    digest\\n    installed\\n    labels {\\n      key\\n      value\\n    }\\n    humanized_name\\n    resource_limits {\\n      key\\n      min\\n      max\\n    }\\n  }\\n}\\n\"\n  }\n};\n})();\n\n(node as any).hash = \"0881e461c1e3dc480359bc4af37042dc\";\n\nexport default node;\n","/**\n * @generated SignedSource<<be344108d2c9db96959e2b5f85bed2b0>>\n * @lightSyntaxTransform\n * @nogrep\n */\n\n/* tslint:disable */\n/* eslint-disable */\n// @ts-nocheck\n\nimport { ConcreteRequest, Mutation } from 'relay-runtime';\nexport type ModifyImageInput = {\n  architecture?: string | null | undefined;\n  digest?: string | null | undefined;\n  image?: string | null | undefined;\n  is_local?: boolean | null | undefined;\n  labels?: ReadonlyArray<KVPairInput | null | undefined> | null | undefined;\n  name?: string | null | undefined;\n  registry?: string | null | undefined;\n  resource_limits?: ReadonlyArray<ResourceLimitInput | null | undefined> | null | undefined;\n  size_bytes?: number | null | undefined;\n  supported_accelerators?: ReadonlyArray<string | null | undefined> | null | undefined;\n  tag?: string | null | undefined;\n  type?: string | null | undefined;\n};\nexport type KVPairInput = {\n  key?: string | null | undefined;\n  value?: string | null | undefined;\n};\nexport type ResourceLimitInput = {\n  key?: string | null | undefined;\n  max?: string | null | undefined;\n  min?: string | null | undefined;\n};\nexport type ManageAppsModalMutation$variables = {\n  architecture?: string | null | undefined;\n  props: ModifyImageInput;\n  target: string;\n};\nexport type ManageAppsModalMutation$data = {\n  readonly modify_image: {\n    readonly msg: string | null | undefined;\n    readonly ok: boolean | null | undefined;\n  } | null | undefined;\n};\nexport type ManageAppsModalMutation = {\n  response: ManageAppsModalMutation$data;\n  variables: ManageAppsModalMutation$variables;\n};\n\nconst node: ConcreteRequest = (function(){\nvar v0 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"architecture\"\n},\nv1 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"props\"\n},\nv2 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"target\"\n},\nv3 = [\n  {\n    \"alias\": null,\n    \"args\": [\n      {\n        \"kind\": \"Variable\",\n        \"name\": \"architecture\",\n        \"variableName\": \"architecture\"\n      },\n      {\n        \"kind\": \"Variable\",\n        \"name\": \"props\",\n        \"variableName\": \"props\"\n      },\n      {\n        \"kind\": \"Variable\",\n        \"name\": \"target\",\n        \"variableName\": \"target\"\n      }\n    ],\n    \"concreteType\": \"ModifyImage\",\n    \"kind\": \"LinkedField\",\n    \"name\": \"modify_image\",\n    \"plural\": false,\n    \"selections\": [\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"ok\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"msg\",\n        \"storageKey\": null\n      }\n    ],\n    \"storageKey\": null\n  }\n];\nreturn {\n  \"fragment\": {\n    \"argumentDefinitions\": [\n      (v0/*: any*/),\n      (v1/*: any*/),\n      (v2/*: any*/)\n    ],\n    \"kind\": \"Fragment\",\n    \"metadata\": null,\n    \"name\": \"ManageAppsModalMutation\",\n    \"selections\": (v3/*: any*/),\n    \"type\": \"Mutations\",\n    \"abstractKey\": null\n  },\n  \"kind\": \"Request\",\n  \"operation\": {\n    \"argumentDefinitions\": [\n      (v2/*: any*/),\n      (v0/*: any*/),\n      (v1/*: any*/)\n    ],\n    \"kind\": \"Operation\",\n    \"name\": \"ManageAppsModalMutation\",\n    \"selections\": (v3/*: any*/)\n  },\n  \"params\": {\n    \"cacheID\": \"b7a57119037085ec9f08346991633e0a\",\n    \"id\": null,\n    \"metadata\": {},\n    \"name\": \"ManageAppsModalMutation\",\n    \"operationKind\": \"mutation\",\n    \"text\": \"mutation ManageAppsModalMutation(\\n  $target: String!\\n  $architecture: String\\n  $props: ModifyImageInput!\\n) {\\n  modify_image(target: $target, architecture: $architecture, props: $props) {\\n    ok\\n    msg\\n  }\\n}\\n\"\n  }\n};\n})();\n\n(node as any).hash = \"bb280196745e96f5c488d1d785a5b012\";\n\nexport default node;\n","/**\n * @generated SignedSource<<61692df1bc291fc5ce24e4d7baf5e894>>\n * @lightSyntaxTransform\n * @nogrep\n */\n\n/* tslint:disable */\n/* eslint-disable */\n// @ts-nocheck\n\nimport { ConcreteRequest, Mutation } from 'relay-runtime';\nexport type ModifyImageInput = {\n  architecture?: string | null | undefined;\n  digest?: string | null | undefined;\n  image?: string | null | undefined;\n  is_local?: boolean | null | undefined;\n  labels?: ReadonlyArray<KVPairInput | null | undefined> | null | undefined;\n  name?: string | null | undefined;\n  registry?: string | null | undefined;\n  resource_limits?: ReadonlyArray<ResourceLimitInput | null | undefined> | null | undefined;\n  size_bytes?: number | null | undefined;\n  supported_accelerators?: ReadonlyArray<string | null | undefined> | null | undefined;\n  tag?: string | null | undefined;\n  type?: string | null | undefined;\n};\nexport type KVPairInput = {\n  key?: string | null | undefined;\n  value?: string | null | undefined;\n};\nexport type ResourceLimitInput = {\n  key?: string | null | undefined;\n  max?: string | null | undefined;\n  min?: string | null | undefined;\n};\nexport type ManageImageResourceLimitModalMutation$variables = {\n  architecture?: string | null | undefined;\n  props: ModifyImageInput;\n  target: string;\n};\nexport type ManageImageResourceLimitModalMutation$data = {\n  readonly modify_image: {\n    readonly msg: string | null | undefined;\n    readonly ok: boolean | null | undefined;\n  } | null | undefined;\n};\nexport type ManageImageResourceLimitModalMutation = {\n  response: ManageImageResourceLimitModalMutation$data;\n  variables: ManageImageResourceLimitModalMutation$variables;\n};\n\nconst node: ConcreteRequest = (function(){\nvar v0 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"architecture\"\n},\nv1 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"props\"\n},\nv2 = {\n  \"defaultValue\": null,\n  \"kind\": \"LocalArgument\",\n  \"name\": \"target\"\n},\nv3 = [\n  {\n    \"alias\": null,\n    \"args\": [\n      {\n        \"kind\": \"Variable\",\n        \"name\": \"architecture\",\n        \"variableName\": \"architecture\"\n      },\n      {\n        \"kind\": \"Variable\",\n        \"name\": \"props\",\n        \"variableName\": \"props\"\n      },\n      {\n        \"kind\": \"Variable\",\n        \"name\": \"target\",\n        \"variableName\": \"target\"\n      }\n    ],\n    \"concreteType\": \"ModifyImage\",\n    \"kind\": \"LinkedField\",\n    \"name\": \"modify_image\",\n    \"plural\": false,\n    \"selections\": [\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"ok\",\n        \"storageKey\": null\n      },\n      {\n        \"alias\": null,\n        \"args\": null,\n        \"kind\": \"ScalarField\",\n        \"name\": \"msg\",\n        \"storageKey\": null\n      }\n    ],\n    \"storageKey\": null\n  }\n];\nreturn {\n  \"fragment\": {\n    \"argumentDefinitions\": [\n      (v0/*: any*/),\n      (v1/*: any*/),\n      (v2/*: any*/)\n    ],\n    \"kind\": \"Fragment\",\n    \"metadata\": null,\n    \"name\": \"ManageImageResourceLimitModalMutation\",\n    \"selections\": (v3/*: any*/),\n    \"type\": \"Mutations\",\n    \"abstractKey\": null\n  },\n  \"kind\": \"Request\",\n  \"operation\": {\n    \"argumentDefinitions\": [\n      (v2/*: any*/),\n      (v0/*: any*/),\n      (v1/*: any*/)\n    ],\n    \"kind\": \"Operation\",\n    \"name\": \"ManageImageResourceLimitModalMutation\",\n    \"selections\": (v3/*: any*/)\n  },\n  \"params\": {\n    \"cacheID\": \"b4c4a5b17c6aa265df64e4d2d6338684\",\n    \"id\": null,\n    \"metadata\": {},\n    \"name\": \"ManageImageResourceLimitModalMutation\",\n    \"operationKind\": \"mutation\",\n    \"text\": \"mutation ManageImageResourceLimitModalMutation(\\n  $target: String!\\n  $architecture: String\\n  $props: ModifyImageInput!\\n) {\\n  modify_image(target: $target, architecture: $architecture, props: $props) {\\n    ok\\n    msg\\n  }\\n}\\n\"\n  }\n};\n})();\n\n(node as any).hash = \"491b6e500587a3630195d9025ef76f29\";\n\nexport default node;\n","import { useSuspendedBackendaiClient } from '../hooks';\nimport { useSetBAINotification } from '../hooks/useBAINotification';\nimport { usePainKiller } from '../hooks/usePainKiller';\nimport BAIModal, { BAIModalProps } from './BAIModal';\nimport Flex from './Flex';\nimport { EnvironmentImage } from './ImageList';\nimport { List } from 'antd';\nimport { Dispatch, SetStateAction } from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface ImageInstallModalInterface extends BAIModalProps {\n  onRequestClose: () => void;\n  selectedRows: EnvironmentImage[];\n  setInstallingImages: Dispatch<SetStateAction<string[]>>;\n}\nconst ImageInstallModal: React.FC<ImageInstallModalInterface> = ({\n  onRequestClose,\n  selectedRows,\n  setInstallingImages,\n  ...modalProps\n}) => {\n  const { t } = useTranslation();\n  const baiClient = useSuspendedBackendaiClient();\n  const { upsertNotification } = useSetBAINotification();\n  const painKiller = usePainKiller();\n  if (!modalProps.open) return null;\n\n  const mapImages = () => {\n    let hasInstalledImage = false;\n    const imagesToInstall = selectedRows.filter((image) => {\n      if (image.installed) hasInstalledImage = true;\n      return !image.installed;\n    });\n    return { imagesToInstall, hasInstalledImage };\n  };\n\n  const { imagesToInstall, hasInstalledImage } = mapImages();\n\n  const handleClick = () => {\n    onRequestClose();\n    const installPromises = imagesToInstall.map(async (image) => {\n      const imageName = image?.registry + '/' + image?.name + ':' + image?.tag;\n      let isGPURequired = false;\n      const imageResource = {} as { [key: string]: any };\n      image?.resource_limits?.forEach((resourceLimit) => {\n        const key = resourceLimit?.key as string;\n        imageResource[key] = resourceLimit?.min;\n      });\n      if ('cuda.device' in imageResource && ' cuda.shares' in imageResource) {\n        isGPURequired = true;\n        imageResource.gpu = 0;\n        imageResource.fgpu = imageResource['cuda.shares'];\n      } else if ('cuda.device' in imageResource) {\n        imageResource.gpu = imageResource['cuda.device'];\n        isGPURequired = true;\n      } else {\n        isGPURequired = false;\n      }\n\n      // Add 256m to run the image.\n      if (imageResource.mem.endsWith('g')) {\n        imageResource.mem = imageResource.mem.replace('g', '.5g');\n      } else if (imageResource.mem.endsWith('m')) {\n        imageResource.mem = Number(imageResource.mem.slice(0, -1)) + 256 + 'm';\n      }\n\n      imageResource.domain = baiClient._config.domainName;\n      imageResource['group_name'] = baiClient.current_group;\n\n      const resourceSlots = await baiClient.get_resource_slots();\n\n      if (isGPURequired) {\n        if (\n          !('cuda.device' in resourceSlots) &&\n          !('cuda.shares' in resourceSlots)\n        ) {\n          delete imageResource['gpu'];\n          delete imageResource['fgpu'];\n          delete imageResource['cuda.shares'];\n          delete imageResource['cuda.device'];\n        }\n      }\n\n      if ('cuda.device' in resourceSlots && 'cuda.shares' in resourceSlots) {\n        // Can be possible after 20.03\n        if ('fgpu' in imageResource && 'gpu' in imageResource) {\n          delete imageResource['gpu'];\n          delete imageResource['cuda.device'];\n        }\n      } else if ('cuda.device' in resourceSlots) {\n        delete imageResource['fgpu'];\n        delete imageResource['cuda.shares'];\n      } else if ('cuda.shares' in resourceSlots) {\n        delete imageResource['gpu'];\n        delete imageResource['cuda.device'];\n      }\n\n      imageResource.enqueueOnly = true;\n      imageResource.type = 'batch';\n      imageResource.startupCommand = 'echo \"Image is installed\"';\n\n      upsertNotification({\n        message: `${t('environment.InstallingImage')}${imageName}${t('environment.TakesTime')}`,\n        open: true,\n        duration: 2,\n      });\n\n      //@ts-ignore\n      const indicator = await globalThis.lablupIndicator.start('indeterminate');\n      indicator.set(10, t('import.Downloading'));\n      try {\n        await baiClient.image.install(\n          imageName,\n          image?.architecture,\n          imageResource,\n        );\n        indicator.end(1000);\n        return image?.id;\n      } catch (error) {\n        // @ts-ignore\n        globalThis.lablupNotification.text = painKiller.relieve(error.title);\n        // @ts-ignore\n        globalThis.lablupNotification.detail = error.message;\n        // @ts-ignore\n        globalThis.lablupNotification.show(true, error);\n        indicator.set(100, t('environment.DescProblemOccurred'));\n        indicator.end(1000);\n        return null;\n      }\n    });\n\n    Promise.allSettled(installPromises).then((results) => {\n      const installedImages = results\n        .filter(\n          (result): result is PromiseFulfilledResult<string> =>\n            result.status === 'fulfilled' && result.value !== null,\n        )\n        .map((result) => result.value);\n\n      setInstallingImages(installedImages);\n    });\n  };\n\n  return (\n    <BAIModal\n      {...modalProps}\n      destroyOnClose\n      maskClosable={false}\n      onCancel={() => onRequestClose()}\n      title={t('environment.CheckImageInstallation')}\n      okText={t('environment.Install')}\n      onOk={handleClick}\n    >\n      <Flex direction=\"column\" gap=\"md\" align=\"start\">\n        {hasInstalledImage ? t('environment.InstalledImagesAreExcluded') : null}\n        <Flex direction=\"column\" align=\"start\">\n          <List\n            size=\"small\"\n            bordered\n            dataSource={imagesToInstall.map(\n              (image) => `${image?.registry}/${image?.name}/${image?.tag}`,\n            )}\n            renderItem={(item) => <List.Item>{item}</List.Item>}\n          />\n        </Flex>\n        {t('environment.DescSignificantInstallTime')}\n        {t('dialog.ask.DoYouWantToProceed')}\n      </Flex>\n    </BAIModal>\n  );\n};\nexport default ImageInstallModal;\n","import { useSuspendedBackendaiClient } from '../hooks';\nimport BAIModal, { BAIModalProps } from './BAIModal';\nimport Flex from './Flex';\nimport { EnvironmentImage } from './ImageList';\nimport { ManageAppsModalMutation } from './__generated__/ManageAppsModalMutation.graphql';\nimport { DeleteOutlined, PlusOutlined } from '@ant-design/icons';\nimport {\n  Input,\n  Button,\n  Form,\n  message,\n  Typography,\n  App,\n  FormInstance,\n  theme,\n} from 'antd';\nimport graphql from 'babel-plugin-relay/macro';\nimport _ from 'lodash';\nimport React from 'react';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { useMutation } from 'react-relay';\n\ninterface ManageAppsModalProps extends BAIModalProps {\n  open: boolean;\n  image: EnvironmentImage | null;\n  onRequestClose: (success: boolean) => void;\n}\n\ntype ServicePort = { app: string; protocol: string; port: number };\n\nconst ManageAppsModal: React.FC<ManageAppsModalProps> = ({\n  open,\n  image,\n  onRequestClose,\n  ...baiModalProps\n}) => {\n  const { t } = useTranslation();\n  const baiClient = useSuspendedBackendaiClient();\n  const formRef = React.useRef<FormInstance>(null);\n  const app = App.useApp();\n\n  const { token } = theme.useToken();\n\n  const [commitModifyImageInput, isInFlightModifyImageInput] =\n    useMutation<ManageAppsModalMutation>(graphql`\n      mutation ManageAppsModalMutation(\n        $target: String!\n        $architecture: String\n        $props: ModifyImageInput!\n      ) {\n        modify_image(\n          target: $target\n          architecture: $architecture\n          props: $props\n        ) {\n          ok\n          msg\n        }\n      }\n    `);\n\n  if (!image) return null;\n\n  const getServicePorts = () => {\n    let servicePorts: ServicePort[] = [];\n    if (image.labels) {\n      const servicePortsIdx = _.findIndex(\n        image.labels as { key: string; value: string }[],\n        (item: { [key: string]: string }) =>\n          item !== null && item?.key === 'ai.backend.service-ports',\n      );\n      if (servicePortsIdx !== -1) {\n        servicePorts = image?.labels[servicePortsIdx]\n          ?.value!?.split(',')\n          .map((e: string): ServicePort => {\n            const sp = e.split(':');\n            return {\n              app: sp[0],\n              protocol: sp[1],\n              port: Number(sp[2]),\n            };\n          });\n      }\n    }\n    return servicePorts;\n  };\n  const servicePorts = getServicePorts();\n\n  const handleOnClick = () => {\n    formRef.current\n      ?.validateFields()\n      .then(() => {\n        const values = formRef.current\n          ?.getFieldValue('apps')\n          .map((item: { app: string; protocol: string; port: number }) => {\n            return `${item.app}:${item.protocol}:${item.port}`;\n          })\n          .join(',');\n        const labels = _.map(\n          image.labels as { key: string; value: string }[],\n          (label) => {\n            if (label.key.includes('service-ports')) {\n              return { key: label.key, value: values };\n            } else {\n              return { key: label.key, value: label.value?.toString() || '' };\n            }\n          },\n        );\n        const commitRequest = () =>\n          commitModifyImageInput({\n            variables: {\n              target: `${image?.registry}/${image?.name}:${image?.tag}`,\n              architecture: image?.architecture,\n              props: {\n                labels: labels,\n                resource_limits: baiClient.isManagerVersionCompatibleWith(\n                  '24.03.4.*',\n                )\n                  ? undefined\n                  : null,\n              },\n            },\n            onCompleted: (res, errors) => {\n              if (!res?.modify_image?.ok) {\n                message.error(res?.modify_image?.msg);\n                return;\n              }\n              if (errors && errors?.length > 0) {\n                const errorMsgList = _.map(errors, (error) => error.message);\n                for (const error of errorMsgList) {\n                  message.error(error, 2.5);\n                }\n              } else {\n                message.success(t('environment.DescImagePortsModified'));\n                onRequestClose(true);\n              }\n              return;\n            },\n            onError: (err) => {\n              message.error(t('dialog.ErrorOccurred'));\n            },\n          });\n\n        if (image?.installed) {\n          app.modal.confirm({\n            title: 'Image reinstallation required',\n            content: (\n              <>\n                <Trans\n                  i18nKey={\n                    'environment.ModifyImageResourceLimitReinstallRequired'\n                  }\n                />\n              </>\n            ),\n            onOk: commitRequest,\n            getContainer: () => document.body,\n            closable: true,\n          });\n        } else {\n          commitRequest();\n        }\n      })\n      .catch((e) => {});\n  };\n\n  return (\n    <BAIModal\n      destroyOnClose\n      open={open}\n      onOk={handleOnClick}\n      onCancel={() => onRequestClose(false)}\n      confirmLoading={isInFlightModifyImageInput}\n      title={t('environment.ManageApps')}\n      {...baiModalProps}\n    >\n      <Flex\n        direction=\"row\"\n        style={{ width: '100%', marginBottom: token.marginXS }}\n      >\n        <Typography.Text strong style={{ width: '32%' }}>\n          {t('environment.AppName')}\n        </Typography.Text>\n        <Typography.Text strong style={{ width: '32%' }}>\n          {t('environment.Protocol')}\n        </Typography.Text>\n        <Typography.Text strong style={{ width: '32%' }}>\n          {t('environment.Port')}\n        </Typography.Text>\n        <Flex></Flex>\n      </Flex>\n      <Form\n        ref={formRef}\n        layout=\"vertical\"\n        autoComplete=\"off\"\n        initialValues={{ apps: servicePorts }}\n        requiredMark={false}\n      >\n        <Flex direction=\"column\">\n          <Form.List name=\"apps\">\n            {(fields, { add, remove }) => (\n              <Flex direction=\"column\" style={{ width: '100%' }}>\n                {_.map(fields, (field, index) => (\n                  <Form.Item>\n                    <Flex direction=\"row\" key={field.key} gap={'xs'}>\n                      <Form.Item\n                        {...field}\n                        name={[field.name, 'app']}\n                        noStyle\n                        rules={[\n                          {\n                            required: true,\n                            message: t('environment.AppNameMustNotBeEmpty'),\n                          },\n                        ]}\n                      >\n                        <Input placeholder={t('environment.AppName')} />\n                      </Form.Item>\n                      <Form.Item\n                        {...field}\n                        name={[field.name, 'protocol']}\n                        noStyle\n                        rules={[\n                          {\n                            pattern: /^(http|tcp|pty|preopen)$/,\n                            required: true,\n                            message: t(\n                              'environment.ProtocolMustBeOneOfSupported',\n                            ),\n                          },\n                        ]}\n                      >\n                        <Input placeholder={t('environment.Protocol')} />\n                      </Form.Item>\n                      <Form.Item\n                        {...field}\n                        name={[field.name, 'port']}\n                        noStyle\n                        rules={[\n                          {\n                            validator: (rules, rawValue) => {\n                              const value =\n                                _.isUndefined(rawValue) || rawValue === ''\n                                  ? NaN\n                                  : _.toNumber(rawValue);\n                              if (\n                                _.isNaN(value) ||\n                                value < 0 ||\n                                value >= 65535\n                              ) {\n                                return Promise.reject(\n                                  t('environment.PortMustBeInRange'),\n                                );\n                              } else if (\n                                [2000, 2001, 2002, 2003, 2200, 7681].includes(\n                                  Number(value),\n                                )\n                              ) {\n                                return Promise.reject(\n                                  t('environment.PortReservedForInternalUse'),\n                                );\n                              }\n                              return Promise.resolve();\n                            },\n                          },\n                          {\n                            validator: (rule, value) => {\n                              const apps =\n                                formRef.current?.getFieldValue('apps');\n                              if (\n                                _.isString(value) &&\n                                value.length > 0 &&\n                                apps.some(\n                                  (item: any, itemIndex: number) =>\n                                    itemIndex !== index && item?.port === value,\n                                )\n                              ) {\n                                return Promise.reject(\n                                  t('environment.PortMustBeUnique'),\n                                );\n                              }\n                              return Promise.resolve();\n                            },\n                          },\n                        ]}\n                      >\n                        <Input placeholder={t('environment.Port')} />\n                      </Form.Item>\n                      <Button\n                        type=\"text\"\n                        danger\n                        onClick={() => remove(field.name)}\n                        style={\n                          index === 0\n                            ? { width: '10%', marginTop: 8 }\n                            : { width: '10%' }\n                        }\n                        icon={<DeleteOutlined />}\n                      />\n                    </Flex>\n                  </Form.Item>\n                ))}\n                <Button\n                  type=\"dashed\"\n                  onClick={() => add()}\n                  block\n                  icon={<PlusOutlined />}\n                  disabled={!image}\n                >\n                  {t('button.Add')}\n                </Button>\n              </Flex>\n            )}\n          </Form.List>\n        </Flex>\n      </Form>\n    </BAIModal>\n  );\n};\n\nexport default ManageAppsModal;\n","import useControllableState from '../hooks/useControllableState';\nimport { Slider, SliderSingleProps } from 'antd';\nimport _, { isNumber } from 'lodash';\nimport React from 'react';\n\nexport type StepType =\n  | {\n      value: number | string;\n      label: string;\n    }\n  | number\n  | string;\ninterface NonLinearSliderProps\n  extends Omit<SliderSingleProps, 'value' | 'defaultValue' | 'onChange'> {\n  steps: StepType[];\n  value?: number | string;\n  defaultValue?: number | string;\n  showAllMarkLabels?: boolean;\n  onChange?: (value: number | string, label: string) => void;\n}\nconst NonLinearSlider: React.FC<NonLinearSliderProps> = ({\n  value,\n  defaultValue,\n  onChange,\n  steps,\n  showAllMarkLabels,\n  ...sliderProps\n}) => {\n  const normalizedSteps = steps.map((step) => {\n    if (_.isNumber(step) || _.isString(step)) {\n      return {\n        value: step,\n        label: step.toString(),\n      };\n    }\n    return step;\n  });\n\n  const [controlledValue, setControlledValue] = useControllableState({\n    value,\n    defaultValue: defaultValue ?? normalizedSteps[0]?.value,\n    onChange,\n  });\n\n  const isFirstAndLast = (index: number) =>\n    index === 0 || index === normalizedSteps.length - 1;\n\n  const allMarks = _.fromPairs(\n    normalizedSteps.map((step, index) => [\n      index,\n      isFirstAndLast(index) ? step.label : ' ',\n    ]),\n  );\n  return (\n    <Slider\n      {...sliderProps}\n      marks={allMarks}\n      value={_.findIndex(normalizedSteps, { value: controlledValue })}\n      min={0}\n      tooltip={{\n        formatter(value) {\n          if (isNumber(value)) {\n            return normalizedSteps[value]?.label;\n          }\n        },\n        ...sliderProps.tooltip,\n      }}\n      max={normalizedSteps.length - 1}\n      onChange={(rawValue) => {\n        setControlledValue(\n          normalizedSteps[rawValue]?.value,\n          normalizedSteps[rawValue]?.label,\n        );\n      }}\n    />\n  );\n};\n\nexport default NonLinearSlider;\n","import { useResourceSlotsDetails } from '../hooks/backendai';\nimport Flex from './Flex';\nimport NonLinearSlider from './NonLinearSlider';\nimport { Divider, Form, Input, theme } from 'antd';\nimport _ from 'lodash';\nimport React from 'react';\n\nexport interface imageResourceProps {\n  key: string;\n  min: string | null;\n  max: string | null;\n}\ninterface ImageResourceFormItemProps extends Omit<imageResourceProps, 'key'> {\n  name: string;\n}\n\nconst ImageResourceFormItem: React.FC<ImageResourceFormItemProps> = ({\n  name,\n  min,\n  max,\n}) => {\n  const { token } = theme.useToken();\n\n  const [resourceSlotsDetails] = useResourceSlotsDetails();\n\n  const getResourceInfo = (type: string) => {\n    return (\n      {\n        cpu: {\n          label: resourceSlotsDetails?.cpu?.description,\n          steps: _.map(\n            ['0', '1', '2', '3', '4', '5', '6', '7', '8'],\n            (value) => ({\n              value,\n              label: `${value} ${resourceSlotsDetails?.cpu?.display_unit}`,\n            }),\n          ),\n        },\n        mem: {\n          label: resourceSlotsDetails?.mem?.description,\n          steps: _.map(\n            [\n              '64m',\n              '128m',\n              '256m',\n              '512m',\n              '1g',\n              '2g',\n              '4g',\n              '8g',\n              '16g',\n              '32g',\n              '64g',\n              '128g',\n              '256g',\n              '512g',\n            ],\n            (v) => ({\n              value: v,\n              label: `${v.slice(0, -1)} ${_.toUpper(_.last(v))}iB`,\n            }),\n          ),\n        },\n        'cuda.device': {\n          label: resourceSlotsDetails?.['cuda.device']?.description,\n          steps: _.map(['0', '1', '2', '3', '4', '5', '6', '7', '8'], (v) => ({\n            value: v,\n            label: `${v} ${resourceSlotsDetails?.['cuda.device']?.display_unit}`,\n          })),\n        },\n        'cuda.shares': {\n          label: resourceSlotsDetails?.['cuda.shares']?.description,\n          steps: _.map(\n            ['0', '0.1', '0.2', '0.5', '1.0', '2.0', '4.0', '8.0'],\n            (v) => ({\n              value: v,\n              label: `${v} ${resourceSlotsDetails?.['cuda.shares']?.display_unit}`,\n            }),\n          ),\n        },\n        'rocm.device': {\n          label: resourceSlotsDetails?.['rocm.device']?.description,\n          steps: ['0', '1', '2', '3', '4', '5', '6', '7', '8'],\n        },\n      }[type] || {\n        label: resourceSlotsDetails?.[type]?.description,\n        steps: _.map(['0', '1', '2', '3', '4'], (v) => ({\n          value: v,\n          label: `${v} ${resourceSlotsDetails?.[type]?.display_unit || ''}`,\n        })),\n      }\n    );\n  };\n\n  const formInstance = Form.useFormInstance();\n  const value = Form.useWatch(name, formInstance);\n\n  const stepForValue = _.find(getResourceInfo(name).steps, (step) => {\n    // @ts-ignore\n    return step.value === value || step === value;\n  });\n\n  return (\n    <Form.Item\n      label={getResourceInfo(name)?.label ?? name.toUpperCase()}\n      style={{ flex: 1 }}\n    >\n      <Flex direction=\"row\" gap={'lg'}>\n        <Input\n          size=\"large\"\n          variant=\"borderless\"\n          readOnly\n          // @ts-ignore\n          value={stepForValue?.label ?? stepForValue}\n          style={{ flex: 1, fontSize: token.fontSizeLG }}\n          tabIndex={-1}\n        />\n        <Divider type=\"vertical\" style={{ height: 40 }} />\n        <Form.Item name={name} noStyle initialValue={min}>\n          <NonLinearSlider\n            style={{ flex: 5 }}\n            steps={getResourceInfo(name)?.steps}\n            // onChange={(value) => {}}\n          />\n        </Form.Item>\n      </Flex>\n    </Form.Item>\n  );\n};\n\nexport default ImageResourceFormItem;\n","import { useSuspendedBackendaiClient } from '../hooks';\nimport BAIModal, { BAIModalProps } from './BAIModal';\nimport { EnvironmentImage } from './ImageList';\nimport ImageResourceFormItem from './ImageResourceFormItem';\nimport {\n  ManageImageResourceLimitModalMutation,\n  ResourceLimitInput,\n} from './__generated__/ManageImageResourceLimitModalMutation.graphql';\nimport { App, Form, FormInstance, message } from 'antd';\nimport graphql from 'babel-plugin-relay/macro';\nimport _ from 'lodash';\nimport React, { useRef } from 'react';\nimport { Trans, useTranslation } from 'react-i18next';\nimport { useMutation } from 'react-relay';\n\ninterface ManageImageResourceLimitModalProps extends BAIModalProps {\n  image: EnvironmentImage | null;\n  open: boolean;\n  onRequestClose: (success: boolean) => void;\n}\nconst ManageImageResourceLimitModal: React.FC<\n  ManageImageResourceLimitModalProps\n> = ({ image, open, onRequestClose, ...BAIModalProps }) => {\n  const baiClient = useSuspendedBackendaiClient();\n  // Differentiate default max value based on manager version.\n  // The difference between validating a variable type as undefined or none for an unsupplied field value.\n  // [Associated PR links] : https://github.com/lablup/backend.ai/pull/1941\n\n  const { t } = useTranslation();\n  const formRef = useRef<FormInstance>(null);\n  const app = App.useApp();\n\n  const [commitModifyImageInput, isInFlightModifyImageInput] =\n    useMutation<ManageImageResourceLimitModalMutation>(graphql`\n      mutation ManageImageResourceLimitModalMutation(\n        $target: String!\n        $architecture: String\n        $props: ModifyImageInput!\n      ) {\n        modify_image(\n          target: $target\n          architecture: $architecture\n          props: $props\n        ) {\n          ok\n          msg\n        }\n      }\n    `);\n\n  const handleOnclick = async () => {\n    const fieldsValue = await formRef.current?.getFieldsValue();\n    const resource_limits: ResourceLimitInput[] = Object.entries(\n      fieldsValue,\n    ).map(([key, value]: [string, any]) => ({\n      key,\n      min: value.toString() ?? '0',\n      max:\n        (image?.resource_limits?.find((item) => item?.key === key)?.max ??\n        baiClient.isManagerVersionCompatibleWith('24.03.4.*'))\n          ? undefined\n          : null,\n    }));\n\n    const commitRequest = () =>\n      commitModifyImageInput({\n        variables: {\n          target: `${image?.registry}/${image?.name}:${image?.tag}`,\n          architecture: image?.architecture,\n          props: {\n            resource_limits,\n          },\n        },\n        onCompleted: (res, errors) => {\n          if (!res?.modify_image?.ok) {\n            message.error(res?.modify_image?.msg);\n            return;\n          }\n          if (errors && errors?.length > 0) {\n            const errorMsgList = _.map(errors, (error) => error.message);\n            for (const error of errorMsgList) {\n              message.error(error, 2.5);\n            }\n          } else {\n            message.success(t('environment.DescImageResourceModified'));\n            onRequestClose(true);\n          }\n        },\n        onError: (err) => {\n          message.error(t('dialog.ErrorOccurred'));\n        },\n      });\n\n    if (image?.installed) {\n      app.modal.confirm({\n        title: 'Image reinstallation required',\n        content: (\n          <>\n            <Trans\n              i18nKey={'environment.ModifyImageResourceLimitReinstallRequired'}\n            />\n          </>\n        ),\n        onOk: commitRequest,\n        getContainer: () => document.body,\n        closable: true,\n      });\n    } else {\n      commitRequest();\n    }\n  };\n\n  return (\n    <BAIModal\n      destroyOnClose\n      open={open}\n      maskClosable={false}\n      onOk={handleOnclick}\n      onCancel={() => onRequestClose(false)}\n      confirmLoading={isInFlightModifyImageInput}\n      centered\n      title={t('environment.ModifyImageResourceLimit')}\n      {...BAIModalProps}\n    >\n      <Form ref={formRef} layout=\"vertical\">\n        {image?.resource_limits?.map((resource_limit) => {\n          // TODO: After implementing the image list with a relay query, the key transformation should not be needed.\n          // @ts-ignore\n          const { key, min, max } = resource_limit;\n          const keyUsingDot = key.replace(/_/g, '.');\n          return (\n            <ImageResourceFormItem\n              key={keyUsingDot}\n              name={keyUsingDot ?? ''}\n              min={min ?? ''}\n              max={max ?? ''}\n            />\n          );\n        })}\n      </Form>\n    </BAIModal>\n  );\n};\n\nexport default ManageImageResourceLimitModal;\n","// This icon file is generated automatically.\nvar AppstoreOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z\" } }] }, \"name\": \"appstore\", \"theme\": \"outlined\" };\nexport default AppstoreOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport AppstoreOutlinedSvg from \"@ant-design/icons-svg/es/asn/AppstoreOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar AppstoreOutlined = function AppstoreOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: AppstoreOutlinedSvg\n  }));\n};\n\n/**![appstore](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ2NCAxNDRIMTYwYy04LjggMC0xNiA3LjItMTYgMTZ2MzA0YzAgOC44IDcuMiAxNiAxNiAxNmgzMDRjOC44IDAgMTYtNy4yIDE2LTE2VjE2MGMwLTguOC03LjItMTYtMTYtMTZ6bS01MiAyNjhIMjEyVjIxMmgyMDB2MjAwem00NTItMjY4SDU2MGMtOC44IDAtMTYgNy4yLTE2IDE2djMwNGMwIDguOCA3LjIgMTYgMTYgMTZoMzA0YzguOCAwIDE2LTcuMiAxNi0xNlYxNjBjMC04LjgtNy4yLTE2LTE2LTE2em0tNTIgMjY4SDYxMlYyMTJoMjAwdjIwMHpNNDY0IDU0NEgxNjBjLTguOCAwLTE2IDcuMi0xNiAxNnYzMDRjMCA4LjggNy4yIDE2IDE2IDE2aDMwNGM4LjggMCAxNi03LjIgMTYtMTZWNTYwYzAtOC44LTcuMi0xNi0xNi0xNnptLTUyIDI2OEgyMTJWNjEyaDIwMHYyMDB6bTQ1Mi0yNjhINTYwYy04LjggMC0xNiA3LjItMTYgMTZ2MzA0YzAgOC44IDcuMiAxNiAxNiAxNmgzMDRjOC44IDAgMTYtNy4yIDE2LTE2VjU2MGMwLTguOC03LjItMTYtMTYtMTZ6bS01MiAyNjhINjEyVjYxMmgyMDB2MjAweiIgLz48L3N2Zz4=) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(AppstoreOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'AppstoreOutlined';\n}\nexport default RefIcon;","// This icon file is generated automatically.\nvar VerticalAlignBottomOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M859.9 780H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM505.7 669a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V176c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z\" } }] }, \"name\": \"vertical-align-bottom\", \"theme\": \"outlined\" };\nexport default VerticalAlignBottomOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport VerticalAlignBottomOutlinedSvg from \"@ant-design/icons-svg/es/asn/VerticalAlignBottomOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar VerticalAlignBottomOutlined = function VerticalAlignBottomOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: VerticalAlignBottomOutlinedSvg\n  }));\n};\n\n/**![vertical-align-bottom](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTg1OS45IDc4MEgxNjQuMWMtNC41IDAtOC4xIDMuNi04LjEgOHY2MGMwIDQuNCAzLjYgOCA4LjEgOGg2OTUuOGM0LjUgMCA4LjEtMy42IDguMS04di02MGMwLTQuNC0zLjYtOC04LjEtOHpNNTA1LjcgNjY5YTggOCAwIDAwMTIuNiAwbDExMi0xNDEuN2M0LjEtNS4yLjQtMTIuOS02LjMtMTIuOWgtNzQuMVYxNzZjMC00LjQtMy42LTgtOC04aC02MGMtNC40IDAtOCAzLjYtOCA4djMzOC4zSDQwMGMtNi43IDAtMTAuNCA3LjctNi4zIDEyLjlsMTEyIDE0MS44eiIgLz48L3N2Zz4=) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(VerticalAlignBottomOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'VerticalAlignBottomOutlined';\n}\nexport default RefIcon;","import Flex from '../components/Flex';\nimport { filterNonNullItems, getImageFullName } from '../helper';\nimport { useBackendAIImageMetaData, useUpdatableState } from '../hooks';\nimport ImageInstallModal from './ImageInstallModal';\nimport { ConstraintTags } from './ImageTags';\nimport ManageAppsModal from './ManageAppsModal';\nimport ManageImageResourceLimitModal from './ManageImageResourceLimitModal';\nimport ResourceNumber from './ResourceNumber';\nimport TextHighlighter from './TextHighlighter';\nimport {\n  ImageListQuery,\n  ImageListQuery$data,\n} from './__generated__/ImageListQuery.graphql';\nimport {\n  AppstoreOutlined,\n  ReloadOutlined,\n  SearchOutlined,\n  SettingOutlined,\n  VerticalAlignBottomOutlined,\n} from '@ant-design/icons';\nimport { App, Button, Input, Table, Tag, theme, Typography } from 'antd';\nimport { ColumnsType } from 'antd/es/table';\nimport graphql from 'babel-plugin-relay/macro';\nimport _ from 'lodash';\nimport { Key, useMemo, useState, useTransition } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useLazyLoadQuery } from 'react-relay';\n\nexport type EnvironmentImage = NonNullable<\n  NonNullable<ImageListQuery$data['images']>[number]\n>;\n\nconst ImageList: React.FC<{ style?: React.CSSProperties }> = ({ style }) => {\n  const { t } = useTranslation();\n  const [selectedRows, setSelectedRows] = useState<EnvironmentImage[]>([]);\n  const [\n    ,\n    { getNamespace, getBaseVersion, getLang, getBaseImages, getConstraints },\n  ] = useBackendAIImageMetaData();\n  const { token } = theme.useToken();\n  const [managingApp, setManagingApp] = useState<EnvironmentImage | null>(null);\n  const [managingResourceLimit, setManagingResourceLimit] =\n    useState<EnvironmentImage | null>(null);\n  const [isOpenInstallModal, setIsOpenInstallModal] = useState<boolean>(false);\n  const [environmentFetchKey, updateEnvironmentFetchKey] =\n    useUpdatableState('initial-fetch');\n  const [, startTransition] = useTransition();\n  const [installingImages, setInstallingImages] = useState<string[]>([]);\n  const { message } = App.useApp();\n  const [imageSearch, setImageSearch] = useState('');\n  const [isPendingRefreshTransition, startRefreshTransition] = useTransition();\n  const [isPendingSearchTransition, startSearchTransition] = useTransition();\n\n  const { images } = useLazyLoadQuery<ImageListQuery>(\n    graphql`\n      query ImageListQuery {\n        images {\n          id\n          name\n          tag\n          registry\n          architecture\n          digest\n          installed\n          labels {\n            key\n            value\n          }\n          humanized_name\n          resource_limits {\n            key\n            min\n            max\n          }\n        }\n      }\n    `,\n    {},\n    {\n      fetchPolicy:\n        environmentFetchKey === 'initial-fetch'\n          ? 'store-and-network'\n          : 'network-only',\n      fetchKey: environmentFetchKey,\n    },\n  );\n\n  // Sort images by humanized_name to prevent the image list from jumping around when the images are updated\n  // TODO: after `images` query  supports sort order, we should remove this line\n  const defaultSortedImages = useMemo(\n    () => _.sortBy(images, (image) => image?.humanized_name),\n    [images],\n  );\n\n  const columns: ColumnsType<EnvironmentImage> = [\n    {\n      title: t('environment.Status'),\n      dataIndex: 'installed',\n      key: 'installed',\n      defaultSortOrder: 'descend',\n      sorter: (a: EnvironmentImage, b: EnvironmentImage) => {\n        return _.toNumber(a?.installed || 0) - _.toNumber(b?.installed || 0);\n      },\n      render: (text, row) =>\n        row?.id && installingImages.includes(row.id) ? (\n          <Tag color=\"gold\">\n            <TextHighlighter keyword={imageSearch}>\n              {t('environment.Installing')}\n            </TextHighlighter>\n          </Tag>\n        ) : row?.installed ? (\n          <Tag color=\"gold\">\n            <TextHighlighter keyword={imageSearch}>\n              {t('environment.Installed')}\n            </TextHighlighter>\n          </Tag>\n        ) : null,\n    },\n    {\n      title: t('environment.Registry'),\n      dataIndex: 'registry',\n      key: 'registry',\n      sorter: (a, b) =>\n        a?.registry && b?.registry ? a.registry.localeCompare(b.registry) : 0,\n      render: (text, row) => (\n        <TextHighlighter keyword={imageSearch}>{row.registry}</TextHighlighter>\n      ),\n    },\n    {\n      title: t('environment.Architecture'),\n      dataIndex: 'architecture',\n      key: 'architecture',\n      sorter: (a, b) =>\n        a?.architecture && b?.architecture\n          ? a.architecture.localeCompare(b.architecture)\n          : 0,\n      render: (text, row) => (\n        <TextHighlighter keyword={imageSearch}>\n          {row.architecture}\n        </TextHighlighter>\n      ),\n    },\n    {\n      title: t('environment.Namespace'),\n      key: 'namespace',\n      dataIndex: 'namespace',\n      sorter: (a, b) => {\n        const namespaceA = getNamespace(getImageFullName(a) || '');\n        const namespaceB = getNamespace(getImageFullName(b) || '');\n        return namespaceA && namespaceB\n          ? namespaceA.localeCompare(namespaceB)\n          : 0;\n      },\n      render: (text, row) => (\n        <TextHighlighter keyword={imageSearch}>\n          {getNamespace(getImageFullName(row) || '')}\n        </TextHighlighter>\n      ),\n    },\n    {\n      title: t('environment.Language'),\n      key: 'lang',\n      dataIndex: 'lang',\n      sorter: (a, b) => {\n        const langA = a?.name ? getLang(a?.name) : '';\n        const langB = b?.name ? getLang(b?.name) : '';\n        return langA && langB ? langA.localeCompare(langB) : 0;\n      },\n      render: (text, row) => (\n        <TextHighlighter keyword={imageSearch}>\n          {row.name ? getLang(row.name) : null}\n        </TextHighlighter>\n      ),\n    },\n    {\n      title: t('environment.Version'),\n      key: 'baseversion',\n      dataIndex: 'baseversion',\n      sorter: (a, b) => {\n        const baseversionA = getBaseVersion(getImageFullName(a) || '');\n        const baseversionB = getBaseVersion(getImageFullName(b) || '');\n        return baseversionA && baseversionB\n          ? baseversionA.localeCompare(baseversionB)\n          : 0;\n      },\n      render: (text, row) => (\n        <TextHighlighter keyword={imageSearch}>\n          {getBaseVersion(getImageFullName(row) || '')}\n        </TextHighlighter>\n      ),\n    },\n    {\n      title: t('environment.Base'),\n      key: 'baseimage',\n      dataIndex: 'baseimage',\n      sorter: (a, b) => {\n        const baseimageA =\n          !a?.tag || !a?.name ? '' : getBaseImages(a?.tag, a?.name)[0] || '';\n        const baseimageB =\n          !b?.tag || !b?.name ? '' : getBaseImages(b?.tag, b?.name)[0] || '';\n        if (baseimageA === '' && baseimageB === '') return 0;\n        if (baseimageA === '') return -1;\n        if (baseimageB === '') return 1;\n        return baseimageA.localeCompare(baseimageB);\n      },\n      render: (text, row) => (\n        <Flex direction=\"row\" align=\"start\">\n          {row?.tag && row?.name\n            ? getBaseImages(row.tag, row.name).map((baseImage) => (\n                <Tag color=\"green\">\n                  <TextHighlighter keyword={imageSearch}>\n                    {baseImage}\n                  </TextHighlighter>\n                </Tag>\n              ))\n            : null}\n        </Flex>\n      ),\n    },\n    {\n      title: t('environment.Constraint'),\n      key: 'constraint',\n      dataIndex: 'constraint',\n      sorter: (a, b) => {\n        const requirementA =\n          a?.tag && b?.labels\n            ? getConstraints(\n                a?.tag,\n                a?.labels as { key: string; value: string }[],\n              )[0] || ''\n            : '';\n        const requirementB =\n          b?.tag && b?.labels\n            ? getConstraints(\n                b?.tag,\n                b?.labels as { key: string; value: string }[],\n              )[0] || ''\n            : '';\n        if (requirementA === '' && requirementB === '') return 0;\n        if (requirementA === '') return -1;\n        if (requirementB === '') return 1;\n        return requirementA.localeCompare(requirementB);\n      },\n      render: (text, row) =>\n        row?.tag ? (\n          <ConstraintTags\n            tag={row?.tag}\n            labels={row?.labels as { key: string; value: string }[]}\n            highlightKeyword={imageSearch}\n          />\n        ) : null,\n    },\n    {\n      title: t('environment.Digest'),\n      dataIndex: 'digest',\n      key: 'digest',\n      sorter: (a, b) =>\n        a?.digest && b?.digest ? a.digest.localeCompare(b.digest) : 0,\n      render: (text, row) => (\n        <TextHighlighter keyword={imageSearch}>{row.digest}</TextHighlighter>\n      ),\n    },\n    {\n      title: t('environment.ResourceLimit'),\n      dataIndex: 'resource_limits',\n      key: 'resource_limits',\n      render: (text, row) => (\n        <Flex direction=\"row\" gap=\"xxs\">\n          {row?.resource_limits?.map((resource_limit) => (\n            <ResourceNumber\n              type={resource_limit?.key || ''}\n              value={resource_limit?.min || '0'}\n              max={resource_limit?.max || 'Infinity'}\n            />\n          ))}\n        </Flex>\n      ),\n    },\n    {\n      title: t('general.Control'),\n      key: 'control',\n      dataIndex: 'control',\n      fixed: 'right',\n      render: (text, row) => (\n        <Flex\n          direction=\"row\"\n          align=\"stretch\"\n          justify=\"center\"\n          gap=\"xxs\"\n          onClick={(e) => {\n            // To prevent the click event from selecting the row\n            e.stopPropagation();\n          }}\n        >\n          <Button\n            type=\"text\"\n            icon={\n              <SettingOutlined\n                style={{\n                  color: token.colorInfo,\n                }}\n              />\n            }\n            onClick={() => setManagingResourceLimit(row)}\n          />\n          <Button\n            type=\"text\"\n            icon={\n              <AppstoreOutlined\n                style={{\n                  color: token.colorInfo,\n                }}\n              />\n            }\n            onClick={() => {\n              setManagingApp(row);\n            }}\n          />\n        </Flex>\n      ),\n    },\n  ];\n\n  const imageFilterValues = useMemo(() => {\n    return defaultSortedImages?.map((image) => {\n      return {\n        installed: image?.installed ? t('environment.Installed') : '',\n        namespace: getNamespace(getImageFullName(image) || ''),\n        lang: image?.name ? getLang(image.name) : '',\n        baseversion: getBaseVersion(getImageFullName(image) || ''),\n        baseimage:\n          image?.tag && image?.name ? getBaseImages(image.tag, image.name) : [],\n        constraints:\n          image?.tag && image?.labels\n            ? getConstraints(\n                image.tag,\n                image.labels as { key: string; value: string }[],\n              )\n            : [],\n        isCustomized: image?.tag\n          ? image.tag.indexOf('customized') !== -1\n          : false,\n      };\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [defaultSortedImages]);\n\n  const filteredImageData = useMemo(() => {\n    if (_.isEmpty(imageSearch)) return defaultSortedImages;\n    const regExp = new RegExp(`${_.escapeRegExp(imageSearch)}`, 'i');\n    return _.filter(defaultSortedImages, (image, idx) => {\n      return _.some(image, (value, key) => {\n        if (key === 'id') return false;\n        if (['digest', 'architecture', 'registry'].includes(key))\n          return regExp.test(_.toString(value));\n        const curFilterValues = imageFilterValues[idx] || {};\n        if (key === 'installed') return regExp.test(curFilterValues.installed);\n        const baseVersionMatch = regExp.test(curFilterValues.baseversion);\n        const baseImagesMatch = _.some(curFilterValues.baseimage, (value) =>\n          regExp.test(value),\n        );\n        const constraintsMatch = _.some(\n          curFilterValues.constraints,\n          (constraint) => regExp.test(constraint),\n        );\n        const customizedMatch = curFilterValues.isCustomized\n          ? regExp.test('customized')\n          : false;\n        const langMatch = regExp.test(curFilterValues.lang);\n        const namespaceMatch = regExp.test(curFilterValues.namespace);\n        return (\n          baseVersionMatch ||\n          baseImagesMatch ||\n          constraintsMatch ||\n          langMatch ||\n          namespaceMatch ||\n          customizedMatch\n        );\n      });\n    });\n  }, [imageSearch, imageFilterValues, defaultSortedImages]);\n\n  return (\n    <>\n      <Flex\n        direction=\"column\"\n        align=\"stretch\"\n        style={{\n          flex: 1,\n          ...style,\n        }}\n      >\n        <Flex justify=\"end\" style={{ padding: token.paddingSM }} gap={'xs'}>\n          {selectedRows.length > 0 ? (\n            <Typography.Text>\n              {t('general.NSelected', {\n                count: selectedRows.length,\n              })}\n            </Typography.Text>\n          ) : null}\n          <Input\n            allowClear\n            prefix={<SearchOutlined />}\n            placeholder={t('environment.SearchImages')}\n            onChange={(e) => {\n              startSearchTransition(() => setImageSearch(e.target.value));\n            }}\n            style={{\n              width: 200,\n            }}\n          />\n          <Button\n            icon={<ReloadOutlined />}\n            loading={isPendingRefreshTransition}\n            onClick={() => {\n              setSelectedRows([]);\n              startRefreshTransition(() => updateEnvironmentFetchKey());\n            }}\n          >\n            {t('button.Refresh')}\n          </Button>\n\n          <Button\n            icon={<VerticalAlignBottomOutlined />}\n            style={{ backgroundColor: token.colorPrimary, color: 'white' }}\n            onClick={() => {\n              if (selectedRows.length === 0) {\n                message.error(t('environment.NoImagesAreSelected'));\n                return;\n              }\n              if (selectedRows.some((image) => !image.installed)) {\n                setIsOpenInstallModal(true);\n                return;\n              }\n              message.error(t('environment.AlreadyInstalledImage'));\n            }}\n          >\n            {t('environment.Install')}\n          </Button>\n        </Flex>\n        <Table<EnvironmentImage>\n          rowKey=\"id\"\n          scroll={{ x: 'max-content' }}\n          pagination={{\n            showTotal(total, range) {\n              return `${range[0]}-${range[1]} of ${total} items`;\n            },\n            pageSizeOptions: ['10', '20', '50'],\n            style: { marginRight: token.marginXS },\n          }}\n          dataSource={filterNonNullItems(filteredImageData)}\n          columns={columns}\n          loading={isPendingSearchTransition}\n          rowSelection={{\n            type: 'checkbox',\n            // hideSelectAll: true,\n            // columnWidth: 48,\n            onChange: (_, selectedRows: EnvironmentImage[]) => {\n              setSelectedRows(selectedRows);\n            },\n            selectedRowKeys: selectedRows.map((row) => row.id) as Key[],\n          }}\n          onRow={(record) => ({\n            onClick: (e) => {\n              // selected or deselect row\n              if (selectedRows.find((row) => row.id === record.id)) {\n                setSelectedRows((rows) =>\n                  rows.filter((row) => row.id !== record.id),\n                );\n              } else {\n                setSelectedRows((rows) => [...rows, record]);\n              }\n            },\n          })}\n          showSorterTooltip={false}\n          sortDirections={['descend', 'ascend', 'descend']}\n        />\n      </Flex>\n      <ManageImageResourceLimitModal\n        open={!!managingResourceLimit}\n        onRequestClose={(success) => {\n          setManagingResourceLimit(null);\n          if (success)\n            startTransition(() => {\n              updateEnvironmentFetchKey();\n            });\n        }}\n        image={managingResourceLimit}\n      />\n      <ManageAppsModal\n        open={!!managingApp}\n        onRequestClose={(success) => {\n          setManagingApp(null);\n          if (success)\n            startTransition(() => {\n              updateEnvironmentFetchKey();\n            });\n        }}\n        image={managingApp}\n      />\n      <ImageInstallModal\n        open={isOpenInstallModal}\n        onRequestClose={() => {\n          setIsOpenInstallModal(false);\n        }}\n        setInstallingImages={setInstallingImages}\n        selectedRows={selectedRows}\n      />\n    </>\n  );\n};\n\nexport default ImageList;\n","import ContainerRegistryList from '../components/ContainerRegistryList';\nimport Flex from '../components/Flex';\nimport FlexActivityIndicator from '../components/FlexActivityIndicator';\nimport ImageList from '../components/ImageList';\nimport { useSuspendedBackendaiClient } from '../hooks';\nimport { theme } from 'antd';\nimport Card from 'antd/es/card/Card';\nimport { Suspense } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { StringParam, useQueryParam, withDefault } from 'use-query-params';\n\nconst tabParam = withDefault(StringParam, 'image');\n\nconst EnvironmentPage = () => {\n  const { t } = useTranslation();\n  const [curTabKey, setCurTabKey] = useQueryParam('tab', tabParam);\n  const baiClient = useSuspendedBackendaiClient();\n  const isSupportContainerRegistryGraphQL = baiClient.supports(\n    'container-registry-gql',\n  );\n  const { token } = theme.useToken();\n\n  return (\n    <Card\n      activeTabKey={curTabKey}\n      onTabChange={setCurTabKey}\n      tabList={[\n        {\n          key: 'image',\n          label: t('environment.Images'),\n        },\n        {\n          key: 'preset',\n          label: t('environment.ResourcePresets'),\n        },\n        ...(baiClient.is_superadmin\n          ? [\n              {\n                key: 'registry',\n                label: t('environment.Registries'),\n              },\n            ]\n          : []),\n      ]}\n      styles={{\n        body: {\n          padding: 0,\n          paddingTop: 1,\n          overflow: 'hidden',\n        },\n      }}\n    >\n      {curTabKey === 'image' ? (\n        <Suspense\n          fallback={\n            <FlexActivityIndicator\n              style={{ height: 'calc(100vh - 145px)' }}\n              spinSize=\"large\"\n            />\n          }\n        >\n          <ImageList />\n        </Suspense>\n      ) : null}\n      <Flex\n        style={{\n          display: curTabKey === 'preset' ? 'block' : 'none',\n          paddingTop: token.paddingContentVerticalSM,\n        }}\n      >\n        {/* @ts-ignore */}\n        <backend-ai-resource-preset-list active={curTabKey === 'preset'} />\n      </Flex>\n\n      <Flex\n        style={{\n          display: curTabKey === 'registry' ? 'block' : 'none',\n          height: 'calc(100vh - 145px)',\n          // height: 'calc(100vh - 175px)',\n        }}\n      >\n        {isSupportContainerRegistryGraphQL ? (\n          curTabKey === 'registry' ? (\n            <Suspense>\n              <ContainerRegistryList />\n            </Suspense>\n          ) : null\n        ) : (\n          // @ts-ignore\n          <backend-ai-registry-list active={curTabKey === 'registry'} />\n        )}\n      </Flex>\n    </Card>\n  );\n};\n\nexport default EnvironmentPage;\n"],"names":["_ref","objectValues","values","length","React","map","value","label","color","_jsx","Flex","direction","children","_","objValue","idx","Tag","style","undefined","margin","marginRight","ImageAliasNameAndBaseVersionTags","image","props","getImageAliasName","getBaseVersion","tagAlias","useBackendAIImageMetaData","DoubleTag","BaseVersionTags","_ref2","BaseImageTags","_ref3","getBaseImage","ArchitectureTags","_ref4","getArchitecture","LangTags","_ref5","getImageLang","ConstraintTags","_ref6","tag","labels","highlightKeyword","getConstraints","constraints","_jsxs","align","TextHighlighter","keyword","SessionKernelTags","_ref7","bordered","_Fragment","ACCELERATOR_UNIT_MAP","ResourceNumber","_resourceSlotsDetails3","_iSizeToSize2","type","amount","extra","opts","hideTooltip","max","token","theme","useToken","currentGroup","useCurrentResourceGroupValue","resourceSlotsDetails","useResourceSlotsDetails","formatAmount","_resourceSlotsDetails","_iSizeToSize","_resourceSlotsDetails2","number_format","binary","Number","iSizeToSize","numberFixed","toString","round_length","parseFloat","toFixed","gap","ResourceTypeIcon","showTooltip","Typography","Text","display_unit","shmem","fontSize","fontSizeSM","MWCIconWrap","size","width","height","_resourceTypeIconSrcM","_resourceTypeIconSrcM2","_resourceTypeIconSrcM3","showIcon","showUnit","t","useTranslation","resourceTypeIconSrcMap","cpu","mem","content","alignSelf","src","alt","Tooltip","title","pointerEvents","node","v0","v1","hash","v2","v3","onRequestClose","selectedRows","setInstallingImages","modalProps","baiClient","useSuspendedBackendaiClient","upsertNotification","useSetBAINotification","painKiller","usePainKiller","open","imagesToInstall","hasInstalledImage","mapImages","filter","installed","BAIModal","destroyOnClose","maskClosable","onCancel","okText","onOk","handleClick","installPromises","async","_image$resource_limit","imageName","registry","name","isGPURequired","imageResource","resource_limits","forEach","resourceLimit","key","min","gpu","fgpu","endsWith","replace","slice","domain","_config","domainName","current_group","resourceSlots","get_resource_slots","enqueueOnly","startupCommand","message","duration","indicator","globalThis","lablupIndicator","start","set","install","architecture","end","id","error","lablupNotification","text","relieve","detail","show","Promise","allSettled","then","results","installedImages","result","status","List","dataSource","renderItem","item","Item","baiModalProps","formRef","app","App","useApp","commitModifyImageInput","isInFlightModifyImageInput","useMutation","_ManageAppsModalMutation","require","servicePorts","getServicePorts","servicePortsIdx","_image$labels$service","_image$labels$service2","split","e","sp","protocol","port","handleOnClick","_formRef$current","current","validateFields","_formRef$current2","getFieldValue","join","includes","_label$value","commitRequest","variables","target","isManagerVersionCompatibleWith","onCompleted","res","errors","_res$modify_image","_res$modify_image2","modify_image","ok","errorMsgList","success","msg","onError","err","modal","confirm","Trans","i18nKey","getContainer","document","body","closable","catch","confirmLoading","marginBottom","marginXS","strong","Form","ref","layout","autoComplete","initialValues","apps","requiredMark","fields","add","remove","field","index","noStyle","rules","required","Input","placeholder","pattern","validator","rawValue","NaN","reject","resolve","rule","_formRef$current3","some","itemIndex","Button","danger","onClick","marginTop","icon","DeleteOutlined","block","PlusOutlined","disabled","_normalizedSteps$","defaultValue","onChange","steps","showAllMarkLabels","sliderProps","normalizedSteps","step","controlledValue","setControlledValue","useControllableState","isFirstAndLast","allMarks","Slider","marks","tooltip","formatter","_normalizedSteps$valu","isNumber","_normalizedSteps$rawV","_normalizedSteps$rawV2","_getResourceInfo$labe","_getResourceInfo","_stepForValue$label","_getResourceInfo2","getResourceInfo","_resourceSlotsDetails4","_resourceSlotsDetails6","_resourceSlotsDetails8","_resourceSlotsDetails9","description","v","_resourceSlotsDetails5","_resourceSlotsDetails7","_resourceSlotsDetails10","formInstance","useFormInstance","useWatch","stepForValue","toUpperCase","flex","variant","readOnly","fontSizeLG","tabIndex","Divider","initialValue","NonLinearSlider","_image$resource_limit4","BAIModalProps","useRef","_ManageImageResourceLimitModalMutation","fieldsValue","getFieldsValue","Object","entries","_value$toString","_image$resource_limit2","_image$resource_limit3","find","centered","resource_limit","keyUsingDot","ImageResourceFormItem","AppstoreOutlined","AntdIcon","_extends","AppstoreOutlinedSvg","VerticalAlignBottomOutlined","VerticalAlignBottomOutlinedSvg","setSelectedRows","useState","getNamespace","getLang","getBaseImages","managingApp","setManagingApp","managingResourceLimit","setManagingResourceLimit","isOpenInstallModal","setIsOpenInstallModal","environmentFetchKey","updateEnvironmentFetchKey","useUpdatableState","startTransition","useTransition","installingImages","imageSearch","setImageSearch","isPendingRefreshTransition","startRefreshTransition","isPendingSearchTransition","startSearchTransition","images","useLazyLoadQuery","_ImageListQuery","fetchPolicy","fetchKey","defaultSortedImages","useMemo","humanized_name","columns","dataIndex","defaultSortOrder","sorter","a","b","render","row","localeCompare","namespaceA","getImageFullName","namespaceB","langA","langB","baseversionA","baseversionB","baseimageA","baseimageB","baseImage","requirementA","requirementB","digest","_row$resource_limits","fixed","justify","stopPropagation","SettingOutlined","colorInfo","imageFilterValues","namespace","lang","baseversion","baseimage","isCustomized","indexOf","filteredImageData","regExp","RegExp","test","curFilterValues","baseVersionMatch","baseImagesMatch","constraintsMatch","constraint","customizedMatch","langMatch","namespaceMatch","padding","paddingSM","count","allowClear","prefix","SearchOutlined","ReloadOutlined","loading","backgroundColor","colorPrimary","Table","rowKey","scroll","x","pagination","showTotal","total","range","pageSizeOptions","filterNonNullItems","rowSelection","selectedRowKeys","onRow","record","rows","showSorterTooltip","sortDirections","ManageImageResourceLimitModal","ManageAppsModal","ImageInstallModal","tabParam","withDefault","StringParam","EnvironmentPage","curTabKey","setCurTabKey","useQueryParam","isSupportContainerRegistryGraphQL","supports","Card","activeTabKey","onTabChange","tabList","is_superadmin","styles","paddingTop","overflow","Suspense","fallback","FlexActivityIndicator","spinSize","ImageList","display","paddingContentVerticalSM","active","ContainerRegistryList"],"sourceRoot":""}