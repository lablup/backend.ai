"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[2323],{77984:(e,l,n)=>{n.d(l,{A:()=>h});var t,i=n(72375),a=n(7971),r=n(88543),o=n(95762),s=n(72338),d=n(66596),u=n(38926),c=n(63340),g=n(12221),m=n(46976),v=n.n(m),p=(n(55093),n(33364)),x=n(63821),y=n(79569);const h=e=>{var l,m,h,b,A,_,j,f,k,S,F,T,w,L;let{agentDetailModalFrgmt:K=null,onRequestClose:C,...I}=e;const{t:N}=(0,p.Bd)(),{token:M}=d.A.useToken(),{mergedResourceSlots:D}=(0,a.Hv)(),z=(0,x.useFragment)(void 0!==t?t:t=n(15881),K),$=JSON.parse((null===z||void 0===z?void 0:z.live_stat)||"{}"),E=JSON.parse((null===z||void 0===z?void 0:z.available_slots)||"{}");return(0,y.jsx)(r.A,{...I,centered:!0,title:`${N("agent.DetailedInformation")}: ${null===z||void 0===z?void 0:z.id}`,onCancel:C,destroyOnClose:!0,footer:null,children:(0,y.jsxs)(s.A,{direction:"column",align:"stretch",gap:"md",children:[(0,y.jsxs)(u.A,{gutter:[24,24],children:[(0,y.jsx)(c.A,{xs:24,sm:12,children:null!==$&&void 0!==$&&null!==(l=$.devices)&&void 0!==l&&l.cpu_util?(0,y.jsxs)(s.A,{direction:"column",gap:"xxs",align:"stretch",children:[(0,y.jsx)(g.A.Title,{level:5,style:{marginTop:0},children:null===D||void 0===D||null===(m=D.cpu)||void 0===m?void 0:m.human_readable_name}),v().map(null===$||void 0===$||null===(h=$.devices)||void 0===h?void 0:h.cpu_util,((e,l)=>{var n;return(0,y.jsxs)(s.A,{justify:"between",children:[(0,y.jsxs)(g.A.Text,{type:"secondary",style:{flex:.5},children:[null===D||void 0===D||null===(n=D.cpu)||void 0===n?void 0:n.human_readable_name,l]},l),(0,y.jsx)(o.A,{percent:null===e||void 0===e?void 0:e.pct,valueLabel:(0,i.Z1)(null===e||void 0===e?void 0:e.pct,1)+"%"})]})}))]}):null}),(0,y.jsxs)(c.A,{xs:24,sm:12,children:[null!==E&&void 0!==E&&E.mem?(0,y.jsxs)(s.A,{direction:"column",gap:"xxs",align:"stretch",children:[(0,y.jsx)(g.A.Title,{level:5,style:{marginTop:0},children:null===D||void 0===D||null===(b=D.mem)||void 0===b?void 0:b.human_readable_name}),(0,y.jsx)(o.A,{percent:v().toNumber(null===(A=(0,i.Is)(v().toString(null===z||void 0===z?void 0:z.mem_cur_bytes),"g"))||void 0===A?void 0:A.number)/v().toNumber(null===(_=(0,i.Is)(null===E||void 0===E?void 0:E.mem,"g"))||void 0===_?void 0:_.number)*100||0,valueLabel:`${null===(j=(0,i.Is)(v().toString(null===z||void 0===z?void 0:z.mem_cur_bytes),"g"))||void 0===j?void 0:j.numberUnit}iB / ${null===(f=(0,i.Is)(null===E||void 0===E?void 0:E.mem,"g"))||void 0===f?void 0:f.numberUnit}iB`})]}):null,null!==$&&void 0!==$&&$.node?(0,y.jsxs)(s.A,{direction:"column",gap:"xxs",align:"start",children:[(0,y.jsx)(g.A.Title,{level:5,style:{marginTop:0},children:N("session.launcher.Network")}),(0,y.jsxs)(s.A,{gap:"xl",children:[(0,y.jsx)(g.A.Text,{children:"TX:"}),(0,y.jsxs)(g.A.Text,{children:[null===(k=(0,i.CE)(null===$||void 0===$||null===(S=$.node)||void 0===S||null===(F=S.net_tx)||void 0===F?void 0:F.current,"m",2))||void 0===k?void 0:k.numberUnit,"B"]})]}),(0,y.jsxs)(s.A,{gap:"xl",children:[(0,y.jsx)(g.A.Text,{children:"RX:"}),(0,y.jsxs)(g.A.Text,{children:[null===(T=(0,i.CE)(null===$||void 0===$||null===(w=$.node)||void 0===w||null===(L=w.net_rx)||void 0===L?void 0:L.current,"m",2))||void 0===T?void 0:T.numberUnit,"B"]})]})]}):null]})]}),(0,y.jsx)(u.A,{gutter:[24,24],style:{marginBottom:M.marginSM},children:v().map(v().keys(null===$||void 0===$?void 0:$.devices),(e=>{if(["cpu_util","mem","disk","net_rx","net_tx"].includes(e))return null;if(v().includes(e,"_util")){var l;const n=v().split(e,"_")[0]+".device";return(0,y.jsx)(c.A,{xs:24,sm:12,children:(0,y.jsxs)(s.A,{direction:"column",gap:"xxs",align:"stretch",children:[(0,y.jsxs)(g.A.Title,{level:5,style:{marginTop:0},children:[null===D||void 0===D||null===(l=D[n])||void 0===l?void 0:l.human_readable_name," ",N("session.Utilization")]}),v().map(v().toPairs(null===$||void 0===$?void 0:$.devices[e]),((e,l)=>{var t,a,r;return(0,y.jsxs)(s.A,{justify:"between",children:[(0,y.jsxs)(g.A.Text,{type:"secondary",style:{flex:.5},children:[null===D||void 0===D||null===(t=D[n])||void 0===t?void 0:t.human_readable_name,l]},l),(0,y.jsx)(o.A,{percent:v().toFinite(null===e||void 0===e||null===(a=e[1])||void 0===a?void 0:a.pct),valueLabel:(0,i.Z1)(null===e||void 0===e||null===(r=e[1])||void 0===r?void 0:r.pct,1)+"%"})]})}))]})})}if(v().includes(e,"_mem")){var n;const l=v().split(e,"_")[0]+".device";return(0,y.jsx)(c.A,{xs:24,sm:12,children:(0,y.jsxs)(s.A,{direction:"column",gap:"xxs",align:"stretch",children:[(0,y.jsxs)(g.A.Title,{level:5,style:{marginTop:0},children:[null===D||void 0===D||null===(n=D[l])||void 0===n?void 0:n.human_readable_name," ",N("session.launcher.Memory")]}),v().map(v().toPairs(null===$||void 0===$?void 0:$.devices[e]),((e,n)=>{var t,a,r;return(0,y.jsxs)(s.A,{justify:"between",children:[(0,y.jsxs)(g.A.Text,{type:"secondary",style:{flex:.5},children:[null===D||void 0===D||null===(t=D[l])||void 0===t?void 0:t.human_readable_name,n]},n),(0,y.jsx)(o.A,{percent:v().toFinite(null===e||void 0===e||null===(a=e[1])||void 0===a?void 0:a.pct),valueLabel:(0,i.Z1)(null===e||void 0===e||null===(r=e[1])||void 0===r?void 0:r.pct,1)+"%"})]})}))]})})}}))})]})})}},93084:(e,l,n)=>{n.a(e,(async(e,t)=>{try{n.d(l,{A:()=>B});var i,a=n(72375),r=n(23441),o=n(7971),s=n(54690),d=n(53767),u=n(97094),c=n(77984),g=n(56723),m=n(6070),v=n(95762),p=n(8570),x=n(91238),y=n(72338),h=n(42388),b=n(74325),A=n(30788),_=n(42926),j=n(4097),f=n(61539),k=n(99159),S=n(68260),F=n(11956),T=n(66596),w=n(12221),L=n(25913),K=n(91043),C=n(35111),I=n(2556),N=n(8656),M=n(78502),D=n.n(M),z=n(46976),$=n.n(z),E=n(55093),R=n(33364),V=n(63821),O=n(79569),P=e([d]);d=(P.then?(await P)():P)[0];const B=e=>{let{containerStyle:l,tableProps:t}=e;const{t:M}=(0,R.Bd)(),{token:z}=T.A.useToken(),{isDarkMode:P}=(0,u.e)(),{mergedResourceSlots:B}=(0,o.Hv)(),[Z,U]=(0,E.useState)(),[X,G]=(0,E.useState)(),[q,{toggle:J}]=(0,F.A)(),W=(0,r.CX)(),[Q,H]=(0,E.useTransition)(),[Y,ee]=(0,E.useTransition)(),[le,ne]=(0,E.useTransition)(),[te,ie]=(0,E.useState)("ALIVE"),[ae,re]=(0,E.useState)(te),[oe,se]=(0,E.useTransition)(),[de,ue]=(0,E.useState)(),{baiPaginationOption:ce,tablePaginationOption:ge,setTablePaginationOption:me}=(0,s.w4)({current:1,pageSize:20}),[ve,pe]=(0,E.useState)(),[xe,ye]=(0,r.Tw)("first"),[he]=(0,E.useState)("network-only"),be=()=>ee((()=>{ye()})),{agent_list:Ae}=(0,V.useLazyLoadQuery)(void 0!==i?i:i=n(73443),{limit:ce.limit,offset:ce.offset,filter:de,order:ve,status:te},{fetchKey:xe,fetchPolicy:he}),_e=[{title:"#",fixed:"left",render:(e,l,n)=>n+1+(ge.current-1)*ge.pageSize,showSorterTooltip:!1,rowScope:"row"},{title:(0,O.jsxs)(O.Fragment,{children:["ID / ",M("agent.Endpoint")]}),key:"id",dataIndex:"id",fixed:"left",render:(e,l)=>(0,O.jsxs)(y.A,{direction:"column",align:"start",children:[(0,O.jsx)(w.A.Text,{children:e}),(0,O.jsx)(w.A.Text,{type:"secondary",children:null===l||void 0===l?void 0:l.addr})]}),sorter:!0},{title:M("agent.Region"),key:"region",dataIndex:"region",render:e=>{const l=$().split(e,"/"),n=null===l||void 0===l?void 0:l[0],t=(null===l||void 0===l?void 0:l.length)>1?l[1]:"",{color:i,icon:a}={aws:{color:"orange",icon:"aws"},amazon:{color:"orange",icon:"aws"},azure:{color:"blue",icon:"azure"},gcp:{color:"lightblue",icon:"gcp"},google:{color:"lightblue",icon:"gcp"},nbp:{color:"green",icon:"nbp"},naver:{color:"green",icon:"nbp"},openstack:{color:"red",icon:"openstack"},dgx:{color:"green",icon:"local"},local:{color:"yellow",icon:"local"}}[n]||{color:"yellow",icon:"local"};return(0,O.jsxs)(y.A,{gap:"xxs",children:[(0,O.jsx)("img",{alt:e,src:`/resources/icons/${a}.png`,style:{width:"32px",height:"32px",filter:P&&"local"===a?"invert(1)":""}}),""!==t?(0,O.jsx)(x.A,{values:[{label:t,color:i},{label:n,color:i}]}):(0,O.jsx)(L.A,{color:i,children:n})]})}},{title:M("agent.Architecture"),key:"architecture",dataIndex:"architecture"},{title:M("agent.Starts"),key:"first_contact",dataIndex:"first_contact",render:e=>(0,O.jsxs)(y.A,{direction:"column",children:[(0,O.jsx)(w.A.Text,{children:D()(e).format("ll LTS")}),(0,O.jsx)(m.A,{callback:()=>W.utils.elapsedTime(e,Date.now()),delay:1e3,render:e=>(0,O.jsx)(x.A,{values:[{label:M("agent.Running")},{label:e}]})})]}),sorter:!0},{title:M("agent.Allocation"),key:"allocation",render:(e,l)=>{const n=JSON.parse((null===l||void 0===l?void 0:l.occupied_slots)||"{}"),t=JSON.parse((null===l||void 0===l?void 0:l.available_slots)||"{}");return(0,O.jsx)(y.A,{direction:"column",gap:"xxs",children:$().map(t,((e,l)=>{if("cpu"===l){var i;const e=$().toFinite($().toNumber(n.cpu)/$().toNumber(t.cpu)*100);return(0,O.jsxs)(y.A,{justify:"between",style:{minWidth:220},children:[(0,O.jsxs)(y.A,{gap:"xxs",children:[(0,O.jsx)(h.s,{type:l},l),(0,O.jsxs)(w.A.Text,{children:[(0,a.Z1)(n.cpu||0,0),"/",(0,a.Z1)(t.cpu||0,0)]}),(0,O.jsx)(w.A.Text,{type:"secondary",style:{fontSize:z.sizeXS},children:null===B||void 0===B||null===(i=B.cpu)||void 0===i?void 0:i.display_unit})]}),(0,O.jsx)(v.A,{percent:e,strokeColor:e>80?z.colorError:z.colorSuccess,width:120,valueLabel:(0,a.Z1)(e,1)+" %"})]},l)}if("mem"===l){var r,o,s,d;const e=$().toFinite($().toNumber(n.mem)/$().toNumber(t.mem)*100);return(0,O.jsxs)(y.A,{justify:"between",style:{minWidth:220},children:[(0,O.jsxs)(y.A,{gap:"xxs",children:[(0,O.jsx)(h.s,{type:"mem"}),(0,O.jsxs)(w.A.Text,{children:[null!==(r=null===(o=(0,a.Is)(n.mem,"g",0))||void 0===o?void 0:o.numberFixed)&&void 0!==r?r:0,"/",null!==(s=null===(d=(0,a.Is)(t.mem,"g",0))||void 0===d?void 0:d.numberFixed)&&void 0!==s?s:0]}),(0,O.jsx)(w.A.Text,{type:"secondary",style:{fontSize:z.sizeXS},children:"GiB"})]}),(0,O.jsx)(v.A,{percent:e,strokeColor:e>80?z.colorError:z.colorSuccess,width:120,valueLabel:(0,a.Z1)(e,1)+" %"})]},"mem")}if(t[l]){var u;const e=$().toFinite($().toNumber(n[l])/$().toNumber(t[l])*100);return(0,O.jsxs)(y.A,{justify:"between",style:{minWidth:220},gap:"xxs",children:[(0,O.jsxs)(y.A,{gap:"xxs",children:[(0,O.jsx)(h.s,{type:l},l),(0,O.jsxs)(w.A.Text,{children:[(0,a.Z1)(n[l]||0,2),"/",(0,a.Z1)(t[l],2)]}),(0,O.jsx)(w.A.Text,{type:"secondary",style:{fontSize:z.sizeXS},children:null===B||void 0===B||null===(u=B[l])||void 0===u?void 0:u.display_unit})]}),(0,O.jsx)(v.A,{percent:e,strokeColor:e>80?z.colorError:z.colorSuccess,width:120,valueLabel:(0,a.Z1)(e,1)+" %"})]},l)}}))})}},{title:M("agent.Utilization"),key:"live_stat",dataIndex:"live_stat",render:(e,l)=>{const n=JSON.parse(e||"{}"),t=JSON.parse((null===l||void 0===l?void 0:l.available_slots)||"{}");if("ALIVE"===(null===l||void 0===l?void 0:l.status)){var i,r,o,s;const e={cpu_util:{capacity:0,current:0,ratio:0},mem_util:{capacity:0,current:0,ratio:0}};if(n&&n.node&&n.devices){const l=$().keys(n.devices.cpu_util).length;e.cpu_util.capacity=$().toFinite(n.node.cpu_util.capacity),e.cpu_util.current=$().toFinite(n.node.cpu_util.current),e.cpu_util.ratio=e.cpu_util.current/e.cpu_util.capacity/l||0,e.mem_util.capacity=$().toInteger(t.mem||n.node.mem.capacity),e.mem_util.current=$().toInteger(n.node.mem.current),e.mem_util.ratio=e.mem_util.current/e.mem_util.capacity||0}return $().forEach($().keys(null===n||void 0===n?void 0:n.node),(l=>{["cpu_util","mem","disk","net_rx","net_tx"].includes(l)||($().includes(l,"_util")?e[l]={capacity:"cuda_util"===l?$().toFinite(n.node[l]["stats.max"]):$().toFinite(n.node[l].capacity),current:$().toFinite(n.node[l].current),ratio:$().toFinite(n.node[l].current)/100||0}:l.includes("_mem")&&(e[l]={capacity:$().toFinite(n.node[l].capacity),current:$().toFinite(n.node[l].current),ratio:$().toFinite(n.node[l].pct)/100||0}))})),(0,O.jsxs)(y.A,{direction:"column",gap:"xxs",children:[(0,O.jsxs)(y.A,{justify:"between",style:{minWidth:200},children:[(0,O.jsx)(w.A.Text,{children:null===B||void 0===B||null===(i=B.cpu)||void 0===i?void 0:i.human_readable_name}),(0,O.jsx)(v.A,{percent:100*e.cpu_util.ratio,width:120,valueLabel:(0,a.Z1)($().toFinite(100*e.cpu_util.ratio),1)+" %"})]}),(0,O.jsxs)(y.A,{justify:"between",style:{minWidth:200},children:[(0,O.jsx)(w.A.Text,{children:null===B||void 0===B||null===(r=B.mem)||void 0===r?void 0:r.human_readable_name}),(0,O.jsx)(v.A,{percent:e.mem_util.ratio,width:120,valueLabel:(null===(o=(0,a.Is)($().toString(e.mem_util.current),"g"))||void 0===o?void 0:o.numberFixed)+"/"+(null===(s=(0,a.Is)($().toString(e.mem_util.capacity),"g"))||void 0===s?void 0:s.numberFixed)+" GiB"})]}),$().map($().keys(null===n||void 0===n?void 0:n.node),(l=>{if(!["cpu_util","mem"].includes(l)){if($().includes(l,"_util")){var n;const t=$().split(l,"_")[0]+".device";return(0,O.jsxs)(y.A,{justify:"between",style:{minWidth:200,width:"min-content"},gap:"xxs",children:[(0,O.jsxs)(w.A.Text,{children:[null===B||void 0===B||null===(n=B[t])||void 0===n?void 0:n.human_readable_name,"(util)"]}),(0,O.jsx)(v.A,{width:120,percent:e[l].current/e[l].capacity*100||0,valueLabel:$().toFinite((0,a.Z1)(100*e[l].ratio,1))+" %"})]})}if($().includes(l,"_mem")){var t,i,r;const n=$().split(l,"_")[0]+".device";return(0,O.jsxs)(y.A,{justify:"between",style:{minWidth:200,width:"min-content"},gap:"xxs",children:[(0,O.jsxs)(w.A.Text,{children:[null===B||void 0===B||null===(t=B[n])||void 0===t?void 0:t.human_readable_name,"(mem)"]}),(0,O.jsx)(v.A,{width:120,percent:e[l].current/e[l].capacity*100||0,valueLabel:(null===(i=(0,a.Is)($().toString(e[l].current),"g"))||void 0===i?void 0:i.numberFixed)+"/"+(null===(r=(0,a.Is)($().toString(e[l].capacity),"g"))||void 0===r?void 0:r.numberFixed)+" GiB"})]})}}}))]})}return M("agent.NoAvailableLiveStat")}},{title:M("agent.DiskPerc"),key:"disk_perc",render:(e,l)=>{var n,t,i;const r=null!==(n=null===(t=JSON.parse((null===l||void 0===l?void 0:l.live_stat)||"{}"))||void 0===t||null===(i=t.node)||void 0===i?void 0:i.disk)&&void 0!==n?n:{},o=$().toFinite(r.pct)||0,s=$().toFinite((0,a.Z1)(o,2)),d=s>80?z.colorError:z.colorSuccess;return(0,O.jsxs)(y.A,{direction:"column",children:[(0,O.jsx)(v.A,{valueLabel:(0,a.Z1)(s,1)+" %",percent:s,strokeColor:d,width:120}),(0,O.jsxs)(w.A.Text,{style:{fontSize:z.fontSizeSM},children:[(0,a.wb)(null===r||void 0===r?void 0:r.current),"GB /"," ",(0,a.wb)(null===r||void 0===r?void 0:r.capacity),"GB"]})]})}},{title:M("general.ResourceGroup"),key:"resource_group",dataIndex:"scaling_group",sorter:!0},{title:M("agent.Status"),key:"status",dataIndex:"status",render:(e,l)=>{var n,t,i;const a=JSON.parse((null===l||void 0===l?void 0:l.compute_plugins)||"{}"),r=JSON.parse((null===l||void 0===l?void 0:l.available_slots)||"{}");return(0,O.jsxs)(y.A,{direction:"column",gap:"xxs",align:"start",children:[(0,O.jsx)(x.A,{values:[{label:"Agent"},{label:(null===l||void 0===l?void 0:l.version)||"",color:"ALIVE"===e?"green":"TERMINATED"===e?"red":"blue"}]}),null!==a&&void 0!==a&&a.cuda?(0,O.jsxs)(O.Fragment,{children:[null!==a&&void 0!==a&&null!==(n=a.cuda)&&void 0!==n&&n.cuda_version?(0,O.jsx)(x.A,{values:[{label:"CUDA"},{label:null===a||void 0===a||null===(t=a.cuda)||void 0===t?void 0:t.cuda_version,color:"green"}]}):(0,O.jsx)(L.A,{color:"green",children:"CUDA Disabled"}),(0,O.jsx)(x.A,{values:[{label:"CUDA Plugin"},{label:null===a||void 0===a||null===(i=a.cuda)||void 0===i?void 0:i.version,color:"blue"}]}),$().includes($().keys(r),"cuda.shares")?(0,O.jsx)(L.A,{color:"blue",children:"Fractional GPU\u2122"}):null]}):null]})}},{title:M("agent.Schedulable"),key:"schedulable",dataIndex:"schedulable",render:e=>(0,O.jsx)(y.A,{justify:"center",children:!0===e?(0,O.jsx)(A.A,{style:{color:z.colorSuccess,fontSize:z.fontSizeXL}}):(0,O.jsx)(_.A,{style:{color:z.colorTextDisabled,fontSize:z.fontSizeXL}})}),sorter:!0},{title:M("general.Control"),key:"control",fixed:"right",render:(e,l)=>(0,O.jsxs)(y.A,{children:[(0,O.jsx)(K.Ay,{size:"large",style:{color:z.colorSuccess},type:"text",icon:(0,O.jsx)(j.A,{}),onClick:()=>U(l)}),(0,O.jsx)(K.Ay,{size:"large",style:{color:z.colorInfo},type:"text",icon:(0,O.jsx)(f.A,{}),onClick:()=>G(l)})]})}],[je,fe]=(0,d.a)("AgentList");return(0,O.jsxs)(y.A,{direction:"column",align:"stretch",style:l,children:[(0,O.jsxs)(y.A,{justify:"between",align:"start",gap:"xs",style:{padding:z.paddingXS},wrap:"wrap",children:[(0,O.jsxs)(y.A,{direction:"row",gap:"sm",align:"start",style:{flex:1},wrap:"wrap",children:[(0,O.jsx)(C.A,{options:[{label:M("agent.Connected"),value:"ALIVE"},{label:M("agent.Terminated"),value:"TERMINATED"}],value:Q?ae:te,onChange:e=>{re(e),H((()=>{ie(e)}))}}),(0,O.jsx)(p.Ay,{filterProperties:[{key:"id",propertyLabel:"ID",type:"string"},{key:"addr",propertyLabel:M("agent.Endpoint"),type:"string"},{key:"schedulable",propertyLabel:M("agent.Schedulable"),type:"boolean",options:[{label:M("general.Enabled"),value:"true"},{label:M("general.Disabled"),value:"false"}]}],value:de,onChange:e=>{se((()=>{ue(e)}))}})]}),(0,O.jsx)(y.A,{gap:"xs",children:(0,O.jsx)(I.A,{title:M("button.Refresh"),children:(0,O.jsx)(K.Ay,{loading:Y,onClick:()=>be(),icon:(0,O.jsx)(k.A,{})})})})]}),(0,O.jsx)(N.A,{bordered:!0,scroll:{x:"max-content"},rowKey:"id",dataSource:(0,a.tS)(null===Ae||void 0===Ae?void 0:Ae.items),showSorterTooltip:!1,columns:$().filter(_e,(e=>!$().includes(je,$().toString(null===e||void 0===e?void 0:e.key)))),pagination:{pageSize:ge.pageSize,showSizeChanger:!0,total:null===Ae||void 0===Ae?void 0:Ae.total_count,current:ge.current,showTotal:(e,l)=>`${l[0]}-${l[1]} of ${e} items`,pageSizeOptions:["10","20","50"],style:{marginRight:z.marginXS}},onChange:(e,l,n)=>{let{pageSize:t,current:i}=e;ne((()=>{$().isNumber(i)&&$().isNumber(t)&&me({current:i,pageSize:t}),pe((0,a.Wh)(n))}))},loading:{spinning:le||Q||oe,indicator:(0,O.jsx)(S.A,{})},...t}),(0,O.jsx)(y.A,{justify:"end",style:{padding:z.paddingXXS},children:(0,O.jsx)(K.Ay,{type:"text",icon:(0,O.jsx)(f.A,{}),onClick:()=>{J()}})}),(0,O.jsx)(c.A,{agentDetailModalFrgmt:Z,open:!!Z,onRequestClose:()=>U(null)}),(0,O.jsx)(g.A,{agentSettingModalFrgmt:X,open:!!X,onRequestClose:e=>{e&&be(),G(null)}}),(0,O.jsx)(b.A,{open:q,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&fe($().difference(_e.map((e=>$().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),J()},columns:_e,hiddenColumnKeys:je})]})};t()}catch(B){t(B)}}))},56723:(e,l,n)=>{n.d(l,{A:()=>m});var t,i,a=n(88543),r=n(67089),o=n(79597),s=n(47149),d=n(55093),u=n(33364),c=n(63821),g=n(79569);const m=e=>{let{agentSettingModalFrgmt:l=null,onRequestClose:m,...v}=e;const{t:p}=(0,u.Bd)(),{message:x}=r.A.useApp(),y=(0,d.useRef)(null),h=(0,c.useFragment)(void 0!==t?t:t=n(24100),l),[b,A]=(0,c.useMutation)(void 0!==i?i:i=n(85907));return(0,g.jsx)(a.A,{...v,title:`${p("agent.AgentSetting")}: ${null===h||void 0===h?void 0:h.id}`,onCancel:()=>m(),destroyOnClose:!0,width:300,confirmLoading:A,onOk:()=>{var e;null===(e=y.current)||void 0===e||e.validateFields().then((e=>{b({variables:{id:(null===h||void 0===h?void 0:h.id)||"",props:{schedulable:e.schedulable}},onCompleted(e,l){var n,t;null===e||void 0===e||null===(n=e.modify_agent)||void 0===n||!n.ok||l?(x.error(null===e||void 0===e||null===(t=e.modify_agent)||void 0===t?void 0:t.msg),m()):(x.success(p("agent.AgentSettingUpdated")),m(!0))},onError(e){x.error(null===e||void 0===e?void 0:e.message)}})})).catch((()=>{}))},children:(0,g.jsx)(o.A,{ref:y,preserve:!1,initialValues:{...h},children:(0,g.jsx)(o.A.Item,{name:"schedulable",label:p("agent.Schedulable"),valuePropName:"checked",children:(0,g.jsx)(s.A,{})})})})}},91238:(e,l,n)=>{n.d(l,{A:()=>u});var t=n(72338),i=n(96141),a=n(25913),r=n(46976),o=n.n(r),s=n(55093),d=n(79569);const u=e=>{let l,{values:n=[],highlightKeyword:r}=e;return 0===n.length?null:(l=n[0]&&("string"===typeof n[0]||s.isValidElement(n[0]))?n.map((e=>({label:e,color:"blue"}))):n,(0,d.jsx)(t.A,{direction:"row",children:o().map(l,((e,n)=>o().isEmpty(e.label)?null:(0,d.jsx)(a.A,{style:o().last(l)===e?void 0:{margin:0,marginRight:-1},color:e.color,children:o().isUndefined(r)?e.label:(0,d.jsx)(i.A,{keyword:r,children:e.label})},n)))}))}},15881:(e,l,n)=>{n.r(l),n.d(l,{default:()=>i});const t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentDetailModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"available_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cpu_cur_pct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mem_cur_bytes",storageKey:null}],type:"Agent",abstractKey:null,hash:"cb343a0290034803cca4c2b82a1c1b68"},i=t},73443:(e,l,n)=>{n.r(l),n.d(l,{default:()=>i});const t=function(){var e={defaultValue:null,kind:"LocalArgument",name:"filter"},l={defaultValue:null,kind:"LocalArgument",name:"limit"},n={defaultValue:null,kind:"LocalArgument",name:"offset"},t={defaultValue:null,kind:"LocalArgument",name:"order"},i={defaultValue:null,kind:"LocalArgument",name:"status"},a=[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"},{kind:"Variable",name:"order",variableName:"order"},{kind:"Variable",name:"status",variableName:"status"}],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"addr",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"compute_plugins",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"first_contact",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"lost_at",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"status_changed",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"cpu_cur_pct",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"mem_cur_bytes",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"available_slots",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"schedulable",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null};return{fragment:{argumentDefinitions:[e,l,n,t,i],kind:"Fragment",metadata:null,name:"AgentListQuery",selections:[{alias:null,args:a,concreteType:"AgentList",kind:"LinkedField",name:"agent_list",plural:!1,selections:[{alias:null,args:null,concreteType:"Agent",kind:"LinkedField",name:"items",plural:!0,selections:[r,o,s,d,u,c,g,m,v,p,x,y,h,b,A,_,j,{args:null,kind:"FragmentSpread",name:"AgentDetailModalFragment"},{args:null,kind:"FragmentSpread",name:"AgentSettingModalFragment"}],storageKey:null},f],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,n,e,i,t],kind:"Operation",name:"AgentListQuery",selections:[{alias:null,args:a,concreteType:"AgentList",kind:"LinkedField",name:"agent_list",plural:!1,selections:[{alias:null,args:null,concreteType:"Agent",kind:"LinkedField",name:"items",plural:!0,selections:[r,o,s,d,u,c,g,m,v,p,x,y,h,b,A,_,j],storageKey:null},f],storageKey:null}]},params:{cacheID:"e1a551c0261ce59a4b187a3bbb29b86b",id:null,metadata:{},name:"AgentListQuery",operationKind:"query",text:"query AgentListQuery(\n  $limit: Int!\n  $offset: Int!\n  $filter: String\n  $status: String\n  $order: String\n) {\n  agent_list(limit: $limit, offset: $offset, filter: $filter, status: $status, order: $order) {\n    items {\n      id\n      status\n      version\n      addr\n      architecture\n      region\n      compute_plugins\n      first_contact\n      lost_at\n      status_changed\n      live_stat\n      cpu_cur_pct\n      mem_cur_bytes\n      available_slots\n      occupied_slots\n      scaling_group\n      schedulable\n      ...AgentDetailModalFragment\n      ...AgentSettingModalFragment\n    }\n    total_count\n  }\n}\n\nfragment AgentDetailModalFragment on Agent {\n  id\n  live_stat\n  available_slots\n  occupied_slots\n  cpu_cur_pct\n  mem_cur_bytes\n}\n\nfragment AgentSettingModalFragment on Agent {\n  id\n  schedulable\n}\n"}}}();t.hash="1d6c6a390aad71e4b7815a623ca61d86";const i=t},24100:(e,l,n)=>{n.r(l),n.d(l,{default:()=>i});const t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentSettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"schedulable",storageKey:null}],type:"Agent",abstractKey:null,hash:"303f8ee06508c3b28511ab1a24a305d5"},i=t},85907:(e,l,n)=>{n.r(l),n.d(l,{default:()=>i});const t=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"props"}],l=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyAgent",kind:"LinkedField",name:"modify_agent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"AgentSettingModalMutation",selections:l,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"AgentSettingModalMutation",selections:l},params:{cacheID:"1a9e43d4bc6e78f3949d1a2a397ff00e",id:null,metadata:{},name:"AgentSettingModalMutation",operationKind:"mutation",text:"mutation AgentSettingModalMutation(\n  $id: String!\n  $props: ModifyAgentInput!\n) {\n  modify_agent(id: $id, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();t.hash="13b2a6a91c7f08bbced5fde155ded60e";const i=t},22323:(e,l,n)=>{n.a(e,(async(e,t)=>{try{n.r(l),n.d(l,{default:()=>v});var i=n(93084),a=n(66596),r=n(80963),o=n(16954),s=n(55093),d=n(33364),u=n(2647),c=n(79569),g=e([i]);i=(g.then?(await g)():g)[0];const m=(0,u.withDefault)(u.StringParam,"agents"),v=e=>{const{t:l}=(0,d.Bd)(),[n,t]=(0,u.useQueryParam)("tab",m,{updateType:"replace"}),{token:g}=a.A.useToken();return(0,c.jsxs)(r.A,{activeTabKey:n,onTabChange:e=>t(e),tabList:[{key:"agents",tab:l("agent.Agent")},{key:"storages",tab:l("general.StorageProxies")},{key:"resourceGroup",tab:l("general.ResourceGroup")}],styles:{body:{padding:0,paddingTop:1,overflow:"hidden"}},children:["agents"===n?(0,c.jsx)(s.Suspense,{fallback:(0,c.jsx)(o.A,{active:!0,style:{padding:g.paddingContentVerticalLG}}),children:(0,c.jsx)(i.A,{containerStyle:{marginLeft:-1,marginRight:-1}})}):null,"storages"===n?(0,c.jsx)("backend-ai-storage-proxy-list",{active:!0}):null,"resourceGroup"===n?(0,c.jsx)("backend-ai-resource-group-list",{active:!0}):null]})};t()}catch(m){t(m)}}))},63340:(e,l,n)=>{n.d(l,{A:()=>t});const t=n(92464).A},38926:(e,l,n)=>{n.d(l,{A:()=>t});const t=n(71690).A}}]);
//# sourceMappingURL=2323.cf352bc2.chunk.js.map