"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[7386],{8469:(e,l,a)=>{a.d(l,{Ay:()=>h,s5:()=>g,uJ:()=>m});var n=a(30032),r=a(16162),o=a(96495),i=a(29871),d=a(50840),s=a(24128),t=a(20307),u=(a(76998),a(77678)),c=a(23446);const m={"cuda.device":"GPU","cuda.shares":"FGPU","rocm.device":"GPU","tpu.device":"TPU","ipu.device":"IPU","atom.device":"ATOM","atom-plus.device":"ATOM+","warboy.device":"Warboy","hyperaccel-lpu.device":"Hyperaccel LPU"},v=e=>{let{size:l=16,children:a}=e;return(0,c.jsx)("mwc-icon",{style:{"--mdc-icon-size":"".concat(l+2,"px"),width:l,height:l},children:a})},g=e=>{var l,a,n;let{type:r,size:o=16,showIcon:d=!0,showUnit:s=!0,showTooltip:m=!0,...g}=e;const{t:h}=(0,u.Bd)(),p={cpu:[(0,c.jsx)(v,{size:o,children:"developer_board"}),h("session.core")],mem:[(0,c.jsx)(v,{size:o,children:"memory"}),"GiB"],"cuda.device":["/resources/icons/file_type_cuda.svg","GPU"],"cuda.shares":["/resources/icons/file_type_cuda.svg","FGPU"],"rocm.device":["/resources/icons/rocm.svg","GPU"],"tpu.device":[(0,c.jsx)(v,{size:o,children:"view_module"}),"TPU"],"ipu.device":[(0,c.jsx)(v,{size:o,children:"view_module"}),"IPU"],"atom.device":["/resources/icons/rebel.svg","ATOM"],"atom-plus.device":["/resources/icons/rebel.svg","ATOM"],"warboy.device":["/resources/icons/furiosa.svg","Warboy"],"hyperaccel-lpu.device":["/resources/icons/npu_generic.svg","Hyperaccel LPU"]},y="string"===typeof(null===(l=p[r])||void 0===l?void 0:l[0])?(0,c.jsx)("img",{...g,style:{height:o,alignSelf:"center",...g.style||{}},src:(null===(a=p[r])||void 0===a?void 0:a[0])||"",alt:r}):(0,c.jsx)(i.A,{style:{width:16,height:16},children:(null===(n=p[r])||void 0===n?void 0:n[0])||r});return m?(0,c.jsx)(t.A,{title:r,children:y}):(0,c.jsx)(i.A,{style:{pointerEvents:"none"},children:y})},h=e=>{var l,a,t,u,m;let{type:v,value:h,extra:p,opts:y,hideTooltip:f=!1}=e;const{token:k}=d.A.useToken(),x=(0,o.Nw)(),[A]=(0,r.Hv)(x||void 0);return(0,c.jsxs)(i.A,{direction:"row",gap:"xxs",children:[null!==A&&void 0!==A&&A[v]?(0,c.jsx)(g,{type:v,showTooltip:!f}):v,(0,c.jsx)(s.A.Text,{children:null!==A&&void 0!==A&&null!==(l=A[v])&&void 0!==l&&l.number_format.binary?Number(null===(a=(0,n.Js)(h,"g",3,!0))||void 0===a?void 0:a.numberFixed).toString():((null===A||void 0===A||null===(t=A[v])||void 0===t?void 0:t.number_format.round_length)||0)>0?parseFloat(h).toFixed(2):h}),(0,c.jsx)(s.A.Text,{type:"secondary",children:(null===A||void 0===A||null===(u=A[v])||void 0===u?void 0:u.display_unit)||""}),"mem"===v&&null!==y&&void 0!==y&&y.shmem&&(null===y||void 0===y?void 0:y.shmem)>0?(0,c.jsxs)(s.A.Text,{type:"secondary",style:{fontSize:k.fontSizeSM},children:["(SHM: ",null===(m=(0,n.Js)(y.shmem+"b","g",2,!0))||void 0===m?void 0:m.numberFixed,"GiB)"]}):null,p]})}},90139:(e,l,a)=>{a.d(l,{A:()=>f});var n=a(30032),r=a(83468),o=a(29090),i=a(29871),d=a(81638),s=a(66464),t=a(78074),u=a(20307),c=a(89146),m=a(45901),v=a.n(m),g=a(76998),h=a(77678),p=a(91560),y=a(23446);const f=e=>{let{autoSelectType:l,showUsageStatus:a,value:m,onChange:f,defaultValue:k,searchValue:x,onSearch:A,...F}=e;const{t:b}=(0,h.Bd)(),S=(0,o.useShadowRoot)(),j=(0,r.CX)(),{data:w,isLoading:C}=(0,p.useQuery)("vhostInfo",(()=>j.vfolder.list_hosts())),[_,K]=(0,s.A)(v().omitBy({value:m,onChange:f,defaultValue:k},v().isUndefined)),[M,T]=(0,s.A)(v().omitBy({value:x,onChange:A},v().isUndefined));return(0,g.useEffect)((()=>{var e,a,n;if(!l)return;let r=null!==(e=null!==(a=null===w||void 0===w?void 0:w.default)&&void 0!==a?a:null===w||void 0===w?void 0:w.allowed[0])&&void 0!==e?e:"";if("usage"===l){var o;r=(null===(o=v().minBy(v().map(null===w||void 0===w?void 0:w.allowed,(e=>{var l;return{host:e,volume_info:null===w||void 0===w||null===(l=w.volume_info)||void 0===l?void 0:l[e]}})),"volume_info.usage.percentage"))||void 0===o?void 0:o.host)||r}K(r,{id:r,...(null===w||void 0===w||null===(n=w.volume_info)||void 0===n?void 0:n[r])||{}})}),[w]),(0,y.jsx)(t.A,{filterOption:!0,placeholder:b("data.SelectStorageHost"),loading:C,style:{minWidth:165},value:_,onChange:e=>{var l;K(e,{id:e,...(null===w||void 0===w||null===(l=w.volume_info)||void 0===l?void 0:l[e])||{}})},searchValue:M,onSearch:T,optionLabelProp:"value",options:v().map(null===w||void 0===w?void 0:w.allowed,(e=>{var l,r,o,s,t,m,v,g;return{label:a?(0,y.jsxs)(i.A,{align:"center",gap:"xs",children:[(null===w||void 0===w||null===(l=w.volume_info)||void 0===l||null===(r=l[e])||void 0===r?void 0:r.usage)&&(0,y.jsx)(u.A,{title:"".concat(b("data.Host")," ").concat(b("data.usage.Status"),":\n                ").concat((null===w||void 0===w||null===(o=w.volume_info[e])||void 0===o||null===(s=o.usage)||void 0===s?void 0:s.percentage)<70?b("data.usage.Adequate"):(null===w||void 0===w||null===(t=w.volume_info[e])||void 0===t||null===(m=t.usage)||void 0===m?void 0:m.percentage)<90?b("data.usage.Caution"):b("data.usage.Insufficient")),getPopupContainer:()=>S,children:(0,y.jsx)(c.A,{color:(0,n.yc)(null===w||void 0===w||null===(v=w.volume_info[e])||void 0===v||null===(g=v.usage)||void 0===g?void 0:g.percentage)})}),(0,y.jsx)(d.A,{keyword:M,children:e})]}):e,value:e}})),...F})}},6935:(e,l,a)=>{a.r(l),a.d(l,{default:()=>r});const n=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ModelCardModalFragment",selections:[e,l,{alias:null,args:null,kind:"ScalarField",name:"author",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modified_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"task",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"framework",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"license",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"readme",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_resource",storageKey:null},{alias:null,args:null,concreteType:"VirtualFolder",kind:"LinkedField",name:"vfolder",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cloneable",storageKey:null},e,l,{alias:null,args:null,kind:"ScalarField",name:"host",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VirtualFolderNode",kind:"LinkedField",name:"vfolder_node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ModelCloneModalVFolderFragment"}],storageKey:null}],type:"ModelCard",abstractKey:null}}();n.hash="8c3572f1adf6875906d30969b5a901e6";const r=n},17184:(e,l,a)=>{a.r(l),a.d(l,{default:()=>r});const n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ModelCloneModalVFolderFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"host",storageKey:null}],type:"VirtualFolderNode",abstractKey:null,hash:"9e8196f7a6fe11fb62c373124ffc450a"},r=n},9016:(e,l,a)=>{a.d(l,{b:()=>i});var n=a(77678);const r={"Cannot read property 'map' of null":"error.APINotSupported","TypeError: NetworkError when attempting to fetch resource.":"error.NetworkConnectionFailed","Login failed. Check login information.":"error.LoginFailed","User credential mismatch.":"error.LoginFailed","Authentication failed. Check information and manager status.":"error.AuthenticationFailed","Too many failed login attempts":"error.TooManyLoginFailures","server responded failure: 400 Bad Request - The virtual folder already exists with the same name.":"error.VirtualFolderAlreadyExist","400 Bad Request - The virtual folder already exists with the same name.":"error.VirtualFolderAlreadyExist","server responded failure: 400 Bad Request - One of your accessible vfolders already has the name you requested.":"error.VirtualFolderAlreadyExist","server responded failure: 400 Bad Request - You cannot create more vfolders.":"error.MaximumVfolderCreation","server responded failure: 400 Bad Request - Missing or invalid API parameters. (You cannot create more vfolders.)":"error.MaximumVfolderCreation","server responded failure: 400 Bad Request - Cannot change the options of a vfolder that is not owned by myself.":"error.CannotChangeVirtualFolderOption","server responded failure: 403 Forbidden - Cannot share private dot-prefixed vfolders.":"error.CannotSharePrivateAutomountFolder","server responded failure: 404 Not Found - No such vfolder invitation.":"error.FolderSharingNotAvailableToUser","server responded failure: 404 Not Found - No such user.":"error.FolderSharingNotAvailableToUser","server responded failure: 412 Precondition Failed - You have reached your resource limit.":"error.ReachedResourceLimit","Cannot read property 'split' of undefined":"error.UserHasNoGroup"},o={"\\w*not found matched token with email\\w*":"error.InvalidSignupToken","\\w*Access key not found\\w*":"error.LoginInformationMismatch","\\w*401 Unauthorized - Credential/signature mismatch\\w*":"error.LoginInformationMismatch",'integrity error: duplicate key value violates unique constraint "pk_resource_presets"[\\n]DETAIL:  Key \\(name\\)=\\([\\w]+\\) already exists.[\\n]':"error.ResourcePolicyAlreadyExist",'integrity error: duplicate key value violates unique constraint "pk_scaling_groups"[\\n]DETAIL:  Key \\(name\\)=\\([\\w]+\\) already exists.[\\n]':"error.ScalingGroupAlreadyExist",'integrity error: duplicate key value violates unique constraint "uq_users_username"[\\n]DETAIL:  Key \\(username\\)=\\([\\w]+\\) already exists.[\\n]':"error.UserNameAlreadyExist","server responded failure: 400 Bad Request - Missing or invalid API parameters. (Your resource quota is exceeded. (cpu=24 mem=512g cuda.shares=80))":"error.ResourceLimitExceed",'\\w*Key \\(name\\)=\\(.+\\) is still referenced from table "keypairs"\\.\\w*':"error.ResourcePolicyStillReferenced","Your resource request is smaller than the minimum required by the image. (\\w*)":"error.SmallerResourceThenImageRequires"},i=()=>{const{t:e}=(0,n.Bd)();return{relieve:l=>{if("undefined"===typeof l)return void 0===globalThis.backendaiclient||null===globalThis.backendaiclient?"_DISCONNECTED":"Problem occurred.";if(!0===globalThis.backendaiwebui.debug)return l;if({}.hasOwnProperty.call(r,l))return e(r[l]);for(const a of Object.keys(o))if(RegExp(a).test(l))return e(o[a]);return l}}}},97386:(e,l,a)=>{a.r(l),a.d(l,{default:()=>J});var n,r=a(57528),o=a(29871),i=a(83468),d=a(25339),s=a(57857),t=a(21454),u=a(9016),c=a(90139),m=a(24717),v=a(41856),g=a(65080),h=a(36209),p=a(78074),y=a(82745),f=a(76998),k=a(77678),x=a(3606),A=a(23446);const F=e=>{let{vfolderNode:l,deprecatedVFolderInfo:r,...F}=e;const{t:b}=(0,k.Bd)(),S=(0,i.CX)(),j=(0,x.useFragment)(void 0!==n?n:n=a(17184),l)||r,w=(0,f.useRef)(null),C=(0,u.b)(),{upsertNotification:_}=(0,t.js)(),[K,M]=(0,f.useState)({}),T=(0,s.E)({mutationFn:e=>{let{input:l,name:a}=e;return S.vfolder.clone(l,a)}});return(0,A.jsx)(d.A,{destroyOnClose:!0,...F,okText:b("button.Clone"),confirmLoading:T.isLoading,onOk:e=>{var l;null===(l=w.current)||void 0===l||l.validateFields().then((l=>{null!==j&&void 0!==j&&j.name&&j.host&&T.mutate({input:l,name:j.name},{onSuccess(a){var n;_({key:"modelStore.clone."+j.id,open:!0,backgroundTask:{status:"pending",percent:0,taskId:a.bgtask_id,statusDescriptions:{pending:b("data.folders.FolderClonePending"),resolved:b("data.folders.FolderCloned"),rejected:b("data.folders.FolderCloneFailed")}},message:l.target_name,toText:b("data.folders.OpenAFolder"),to:"/data?tab=model&folder=".concat(a.id)}),null===(n=F.onOk)||void 0===n||n.call(F,e)},onError(e){var l;if(null!==(l=e.message)&&void 0!==l&&l.includes("The virtual folder already exists with the same name"))M({validateStatus:"error",help:b("modelStore.FolderAlreadyExists")});else{const l=C.relieve((null===e||void 0===e?void 0:e.message)||"");m.Ay.error({content:l})}}})})).catch((()=>{}))},children:(0,A.jsxs)(o.A,{direction:"column",align:"stretch",gap:"sm",children:[(0,A.jsx)(v.A,{showIcon:!0,type:"info",message:b("modelStore.CloneInfo")}),(0,A.jsxs)(g.A,{ref:w,layout:"vertical",requiredMark:"optional",initialValues:{permission:"rw",usage_mode:"model",target_name:(null===j||void 0===j?void 0:j.name)+"_1",target_host:null===j||void 0===j?void 0:j.host},scrollToFirstError:!0,children:[(0,A.jsx)(g.A.Item,{label:b("data.ExistingFolderName"),required:!0,children:(0,A.jsx)(h.A,{value:(null===j||void 0===j?void 0:j.name)||"",disabled:!0})}),(0,A.jsx)(g.A.Item,{name:"target_name",label:b("data.NewFolderName"),rules:[{required:!0},{pattern:/^[a-zA-Z0-9._-]*$/,message:b("data.Allowslettersnumbersand-_dot")}],...K,children:(0,A.jsx)(h.A,{autoComplete:"off",onChange:()=>{M({})}})}),(0,A.jsx)(g.A.Item,{name:"target_host",label:b("data.Host"),tooltip:b("data.CloningIsOnlyPossibleSameHost"),rules:[{required:!0}],children:(0,A.jsx)(c.A,{disabled:!0})}),S.isAPIVersionCompatibleWith("v4.20191215")&&(0,A.jsx)(g.A.Item,{name:"usage_mode",hidden:!0,children:(0,A.jsx)(h.A,{})}),(0,A.jsx)(g.A.Item,{label:b("data.Permission"),name:"permission",rules:[{required:!0}],children:(0,A.jsx)(p.A,{options:[{label:"Read-Write",value:"rw"},{label:"Read-Only",value:"ro"},{label:"Delete",value:"wd"}]})}),(0,A.jsx)(g.A.Item,{hidden:!0,name:"cloneable",valuePropName:"checked",children:(0,A.jsx)(y.A,{checked:!1})})]})]})})};var b,S=a(8469),j=a(36798),w=a(30449),C=a(68416),_=a(50840),K=a(6932),M=a(48713),T=a(7518),L=a(9788),P=a(24128),I=a(22307),E=a(29475),N=a(14455),R=a.n(N),q=a(45901),V=a.n(q),U=a(95948),O=a(96235);const B=e=>{var l,n,r,s;let{modelCardModalFrgmt:t=null,onRequestClose:u,...c}=e;const{t:m}=(0,k.Bd)(),{token:v}=_.A.useToken(),[g,h]=(0,f.useState)(!1),[p]=(0,i.Gj)(),y=(0,x.useFragment)(void 0!==b?b:b=a(6935),t);return(0,A.jsxs)(d.A,{...c,title:(null===y||void 0===y?void 0:y.title)||(null===y||void 0===y?void 0:y.name),centered:!0,onCancel:u,destroyOnClose:!0,width:800,footer:[(0,A.jsx)(K.Ay,{onClick:()=>{u()},children:m("button.Close")},"close")],children:[(0,A.jsxs)(o.A,{direction:"row",align:"start",style:{marginBottom:v.marginSM},gap:"xs",wrap:"wrap",children:[(0,A.jsxs)(o.A,{justify:"start",align:"start",gap:"xs",style:{flex:1},wrap:"wrap",children:[(null===y||void 0===y?void 0:y.category)&&(0,A.jsx)(M.A,{bordered:!1,style:{marginRight:0},children:null===y||void 0===y?void 0:y.category}),(null===y||void 0===y?void 0:y.task)&&(0,A.jsx)(M.A,{bordered:!1,color:"success",style:{marginRight:0},children:null===y||void 0===y?void 0:y.task}),(null===y||void 0===y?void 0:y.label)&&V().map(null===y||void 0===y?void 0:y.label,(e=>(0,A.jsx)(M.A,{bordered:!1,color:"blue",style:{marginRight:0},children:e},e))),(null===y||void 0===y?void 0:y.license)&&(0,A.jsx)(M.A,{icon:(0,A.jsx)(j.A,{}),bordered:!1,color:"geekblue",style:{marginRight:0},children:null===y||void 0===y?void 0:y.license})]}),(0,A.jsxs)(o.A,{direction:"row",justify:"end",gap:"sm",children:[(0,A.jsx)(K.Ay,{disabled:!0,ghost:!0,size:"small",icon:(0,A.jsx)(U.A,{}),children:m("modelStore.FinetuneModel")}),(0,A.jsx)(K.Ay,{type:"primary",ghost:!0,icon:(0,A.jsx)(w.A,{}),size:"small",disabled:!(null!==y&&void 0!==y&&null!==(l=y.vfolder)&&void 0!==l&&l.cloneable),onClick:()=>{h(!0)},children:m("modelStore.CloneToFolder")})]})]}),(0,A.jsxs)(T.A,{gutter:[v.marginLG,v.marginLG],children:[(0,A.jsx)(L.A,{xs:{span:24},children:(0,A.jsxs)(o.A,{direction:"column",align:"stretch",gap:"xs",children:[(0,A.jsx)(P.A.Paragraph,{ellipsis:{rows:3,expandable:"collapsible",symbol:e=>(0,A.jsx)(K.Ay,{size:"small",type:"link",children:m(e?"button.Collapse":"button.Expand")})},children:null===y||void 0===y?void 0:y.description}),(0,A.jsx)(I.A,{style:{marginTop:v.marginMD},column:1,size:"small",bordered:!0,items:[{key:"author",label:m("modelStore.Author"),children:null===y||void 0===y?void 0:y.author},{key:"version",label:m("modelStore.Version"),children:null===y||void 0===y?void 0:y.version},{key:"architecture",label:m("environment.Architecture"),children:null===y||void 0===y?void 0:y.architecture},{key:"frameworks",label:m("modelStore.Framework"),children:(0,A.jsx)(o.A,{direction:"row",gap:"xs",children:V().map(V().filter(V().castArray(null===y||void 0===y?void 0:y.framework),(e=>!V().isEmpty(e))),((e,l)=>{const a=null===e||void 0===e?void 0:e.replace(/\s*\d+\s*$/,""),n=V().find(null===p||void 0===p?void 0:p.imageInfo,(e=>(null===e||void 0===e?void 0:e.name)===a)),r="".concat(e,"-").concat(l);return null!==n&&void 0!==n&&n.icon?(0,A.jsxs)(o.A,{gap:"xxs",children:[(0,A.jsx)("img",{style:{width:"1em",height:"1em"},src:"resources/icons/"+(null===n||void 0===n?void 0:n.icon),alt:e||""}),e]},r):(0,A.jsx)(P.A.Text,{children:e},r)}))})},{key:"created",label:m("modelStore.Created"),children:R()(null===y||void 0===y?void 0:y.created_at).format("lll")},{key:"last_modified",label:m("modelStore.LastModified"),children:R()(null===y||void 0===y?void 0:y.modified_at).format("lll")},{key:"min_resource",label:m("modelStore.MinResource"),children:(0,A.jsx)(o.A,{gap:"xs",children:(null===y||void 0===y?void 0:y.min_resource)&&V().map(JSON.parse(null===y||void 0===y?void 0:y.min_resource),((e,l)=>(0,A.jsx)(S.Ay,{type:l,value:V().toString(e)},l)))})}]})]})}),null!==y&&void 0!==y&&y.readme?(0,A.jsx)(L.A,{xs:{span:24},children:(0,A.jsx)(E.A,{size:"small",title:(0,A.jsxs)(o.A,{direction:"row",gap:"xs",children:[(0,A.jsx)(C.A,{}),"README.md"]}),styles:{body:{padding:v.paddingLG,overflow:"auto",minHeight:200}},children:(0,A.jsx)(O.Ay,{children:(null===y||void 0===y?void 0:y.readme)||""})})}):null]}),(0,A.jsx)(f.Suspense,{children:(0,A.jsx)(F,{vfolderNode:(null===y||void 0===y?void 0:y.vfolder_node)||null,deprecatedVFolderInfo:{id:(null===y||void 0===y||null===(n=y.vfolder)||void 0===n?void 0:n.id)||"",host:(null===y||void 0===y||null===(r=y.vfolder)||void 0===r?void 0:r.host)||"",name:(null===y||void 0===y||null===(s=y.vfolder)||void 0===s?void 0:s.name)||""},title:m("modelStore.CloneAsFolder"),open:g,onOk:()=>{h(!1)},onCancel:()=>{h(!1)}})})]})};var z,D,G=a(81638),W=a(62863),H=a(93792),Q=a(76740);const Y=(0,a(44758).rU)((e=>{let{css:l,token:a}=e;return{cardList:l(D||(D=(0,r.A)(["\n      .ant-col {\n        height: calc(100% - ","px);\n      }\n    "])),a.marginMD)}})),J=()=>{var e;const[l,n]=(0,i.Tw)("first"),{t:r}=(0,k.Bd)(),{token:d}=_.A.useToken(),[s,t]=(0,f.useState)(),[u,c]=(0,f.useState)([]),[m,v]=(0,f.useState)([]),[g,y]=(0,f.useState)([]),{styles:F}=Y(),[b,S]=(0,f.useState)(),[j,w]=(0,f.useTransition)(),{model_cards:C}=(0,x.useLazyLoadQuery)(void 0!==z?z:z=a(55510),{filter:void 0},{fetchPolicy:"network-only",fetchKey:l}),T=(0,f.useMemo)((()=>{const e={task:[],category:[],label:[]},l=["task","category","label"];return l.forEach((l=>e[l]=[])),null===C||void 0===C||C.edges.forEach((a=>{l.forEach((l=>{var n;null!==a&&void 0!==a&&null!==(n=a.node)&&void 0!==n&&n[l]&&V().map(V().castArray(a.node[l]),(a=>{V().isString(a)&&!e[l].includes(a)&&e[l].push(a)}))}))})),e}),[null===C||void 0===C?void 0:C.edges]);return(0,A.jsxs)(o.A,{direction:"column",align:"stretch",justify:"center",gap:"lg",style:{padding:d.paddingLG},children:[(0,A.jsxs)(o.A,{direction:"column",align:"stretch",className:"filterWrap",gap:"xs",children:[(0,A.jsxs)(o.A,{direction:"row",gap:"md",children:[(0,A.jsx)(h.A,{prefix:(0,A.jsx)(W.A,{}),placeholder:r("modelStore.SearchModels"),allowClear:!0,onChange:e=>{t(e.target.value)},autoComplete:"off"}),(0,A.jsx)(K.Ay,{icon:(0,A.jsx)(H.A,{}),onClick:()=>{w((()=>{n()}))},loading:j})]}),(0,A.jsxs)(o.A,{direction:"row",gap:"md",wrap:"wrap",children:[(0,A.jsx)(p.A,{style:{minWidth:150},placeholder:r("modelStore.Category"),options:V().map(T.category,(e=>({label:e,value:e}))),mode:"multiple",popupMatchSelectWidth:!1,value:u,onChange:e=>{c(e)},allowClear:!0}),(0,A.jsx)(p.A,{style:{minWidth:150},placeholder:r("modelStore.Task"),options:V().map(T.task,(e=>({label:e,value:e}))),mode:"multiple",popupMatchSelectWidth:!1,value:m,onChange:e=>{console.log(e),v(e)},allowClear:!0}),(0,A.jsx)(p.A,{style:{minWidth:150},placeholder:r("modelStore.Label"),options:V().map(T.label,(e=>({label:e,value:e}))),mode:"multiple",popupMatchSelectWidth:!1,value:g,onChange:e=>{y(e)},allowClear:!0})]})]}),(0,A.jsx)(Q.A,{className:F.cardList,grid:{gutter:16,xs:1,sm:2,md:2,lg:3,xl:4,xxl:5},dataSource:null===C||void 0===C||null===(e=C.edges)||void 0===e?void 0:e.map((e=>null===e||void 0===e?void 0:e.node)).filter((e=>{let l=!0;if(s){var a,n,r,o;const i=s.toLowerCase();l=(null===e||void 0===e||null===(a=e.title)||void 0===a?void 0:a.toLowerCase().includes(i))||(null===e||void 0===e||null===(n=e.task)||void 0===n?void 0:n.toLowerCase().includes(i))||(null===e||void 0===e||null===(r=e.category)||void 0===r?void 0:r.toLowerCase().includes(i))||(null===e||void 0===e||null===(o=e.label)||void 0===o?void 0:o.some((e=>null===e||void 0===e?void 0:e.toLowerCase().includes(i))))||!1}return(V().isEmpty(u)||V().includes(u,null===e||void 0===e?void 0:e.category))&&(V().isEmpty(g)||V().intersection(g,null===e||void 0===e?void 0:e.label).length>0)&&(V().isEmpty(m)||V().includes(m,null===e||void 0===e?void 0:e.task))&&l})),renderItem:e=>(0,A.jsx)(Q.A.Item,{onClick:()=>{S(e)},style:{height:"100%"},children:(0,A.jsx)(E.A,{hoverable:!0,title:(0,A.jsx)(G.A,{keyword:s,children:null===e||void 0===e?void 0:e.title}),style:{height:"100%"},size:"small",children:(0,A.jsxs)(o.A,{direction:"row",wrap:"wrap",gap:"xs",children:[(null===e||void 0===e?void 0:e.category)&&(0,A.jsx)(M.A,{bordered:!1,children:(0,A.jsx)(G.A,{keyword:s,children:null===e||void 0===e?void 0:e.category})}),(null===e||void 0===e?void 0:e.task)&&(0,A.jsx)(M.A,{bordered:!1,color:"success",children:(0,A.jsx)(G.A,{keyword:s,children:null===e||void 0===e?void 0:e.task})}),(null===e||void 0===e?void 0:e.label)&&V().map(null===e||void 0===e?void 0:e.label,(e=>(0,A.jsx)(M.A,{bordered:!1,color:"blue",children:(0,A.jsx)(G.A,{keyword:s,children:e})},e)))]})})})}),(0,A.jsx)(B,{modelCardModalFrgmt:b,open:!!b,onRequestClose:()=>{S(null)}})]})}},55510:(e,l,a)=>{a.r(l),a.d(l,{default:()=>r});const n=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"filter"}],l=[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Literal",name:"first",value:200}],a={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"author",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"task",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"license",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"min_resource",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},g={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasPreviousPage",storageKey:null}],storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"host",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ModelStoreListPageQuery",selections:[{alias:null,args:l,concreteType:"ModelCardConnection",kind:"LinkedField",name:"model_cards",plural:!1,selections:[{alias:null,args:null,concreteType:"ModelCardEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[a,{alias:null,args:null,concreteType:"ModelCard",kind:"LinkedField",name:"node",plural:!1,selections:[n,r,o,i,d,s,t,u,c,m,{args:null,kind:"FragmentSpread",name:"ModelCardModalFragment"}],storageKey:null}],storageKey:null},v,g],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ModelStoreListPageQuery",selections:[{alias:null,args:l,concreteType:"ModelCardConnection",kind:"LinkedField",name:"model_cards",plural:!1,selections:[{alias:null,args:null,concreteType:"ModelCardEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[a,{alias:null,args:null,concreteType:"ModelCard",kind:"LinkedField",name:"node",plural:!1,selections:[n,r,o,i,d,s,t,u,c,m,{alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"modified_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"framework",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"readme",storageKey:null},{alias:null,args:null,concreteType:"VirtualFolder",kind:"LinkedField",name:"vfolder",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cloneable",storageKey:null},n,r,h],storageKey:null},{alias:null,args:null,concreteType:"VirtualFolderNode",kind:"LinkedField",name:"vfolder_node",plural:!1,selections:[n,r,h],storageKey:null}],storageKey:null}],storageKey:null},v,g],storageKey:null}]},params:{cacheID:"ad4b59b50935a0c58d3d0d526f7d3068",id:null,metadata:{},name:"ModelStoreListPageQuery",operationKind:"query",text:'query ModelStoreListPageQuery(\n  $filter: String\n) {\n  model_cards(filter: $filter, first: 200) {\n    edges {\n      cursor\n      node {\n        id\n        name\n        author\n        title\n        description\n        task\n        category\n        label\n        license\n        min_resource\n        ...ModelCardModalFragment\n      }\n    }\n    count\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n    }\n  }\n}\n\nfragment ModelCardModalFragment on ModelCard {\n  id\n  name\n  author\n  title\n  version\n  created_at\n  modified_at\n  description\n  task\n  category\n  architecture\n  framework\n  label\n  license\n  readme\n  min_resource\n  vfolder {\n    cloneable\n    id\n    name\n    host\n  }\n  vfolder_node @since(version: "24.09.*") {\n    ...ModelCloneModalVFolderFragment\n    id\n  }\n}\n\nfragment ModelCloneModalVFolderFragment on VirtualFolderNode {\n  id\n  name\n  host\n}\n'}}}();n.hash="325caeedad31dff1df7e4d9bfa3c8855";const r=n}}]);
//# sourceMappingURL=7386.2bfb0743.chunk.js.map