"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[7376],{57376:(e,l,n)=>{n.d(l,{A:()=>ie});var t=n(56276),i=n(11863);const a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"filter"},l={defaultValue:null,kind:"LocalArgument",name:"limit"},n={defaultValue:null,kind:"LocalArgument",name:"offset"},t={defaultValue:null,kind:"LocalArgument",name:"order"},i={defaultValue:null,kind:"LocalArgument",name:"status"},a=[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"},{kind:"Variable",name:"order",variableName:"order"},{kind:"Variable",name:"status",variableName:"status"}],o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"addr",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"compute_plugins",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"first_contact",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"lost_at",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"status_changed",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"cpu_cur_pct",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"mem_cur_bytes",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"available_slots",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"schedulable",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null};return{fragment:{argumentDefinitions:[e,l,n,t,i],kind:"Fragment",metadata:null,name:"AgentListQuery",selections:[{alias:null,args:a,concreteType:"AgentList",kind:"LinkedField",name:"agent_list",plural:!1,selections:[{alias:null,args:null,concreteType:"Agent",kind:"LinkedField",name:"items",plural:!0,selections:[o,r,s,d,u,c,m,v,g,p,x,h,y,b,_,f,j,{args:null,kind:"FragmentSpread",name:"AgentDetailModalFragment"},{args:null,kind:"FragmentSpread",name:"AgentSettingModalFragment"}],storageKey:null},A],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,n,e,i,t],kind:"Operation",name:"AgentListQuery",selections:[{alias:null,args:a,concreteType:"AgentList",kind:"LinkedField",name:"agent_list",plural:!1,selections:[{alias:null,args:null,concreteType:"Agent",kind:"LinkedField",name:"items",plural:!0,selections:[o,r,s,d,u,c,m,v,g,p,x,h,y,b,_,f,j],storageKey:null},A],storageKey:null}]},params:{cacheID:"e1a551c0261ce59a4b187a3bbb29b86b",id:null,metadata:{},name:"AgentListQuery",operationKind:"query",text:"query AgentListQuery(\n  $limit: Int!\n  $offset: Int!\n  $filter: String\n  $status: String\n  $order: String\n) {\n  agent_list(limit: $limit, offset: $offset, filter: $filter, status: $status, order: $order) {\n    items {\n      id\n      status\n      version\n      addr\n      architecture\n      region\n      compute_plugins\n      first_contact\n      lost_at\n      status_changed\n      live_stat\n      cpu_cur_pct\n      mem_cur_bytes\n      available_slots\n      occupied_slots\n      scaling_group\n      schedulable\n      ...AgentDetailModalFragment\n      ...AgentSettingModalFragment\n    }\n    total_count\n  }\n}\n\nfragment AgentDetailModalFragment on Agent {\n  id\n  live_stat\n  available_slots\n  occupied_slots\n  cpu_cur_pct\n  mem_cur_bytes\n}\n\nfragment AgentSettingModalFragment on Agent {\n  id\n  schedulable\n}\n"}}}();a.hash="1d6c6a390aad71e4b7815a623ca61d86";const o=a;var r=n(39120),s=n(48880),d=n(40690),u=n(72828),c=n(91225),m=n(69357),v=n(22339);const g={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentDetailModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"available_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cpu_cur_pct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mem_cur_bytes",storageKey:null}],type:"Agent",abstractKey:null,hash:"cb343a0290034803cca4c2b82a1c1b68"},p=g;var x=n(3401),h=n(76591),y=n(96677),b=n(33651),_=n(96223),f=n(67631),j=n(47699),A=n.n(j),S=n(17534),k=n(62962),O=n(46336),F=n(89374);const w=["agentDetailModalFrgmt","onRequestClose"],T=e=>{var l,n,a,o,r,d,c,m,v,g,j,S,T,K;let{agentDetailModalFrgmt:C=null,onRequestClose:L}=e,I=(0,i.A)(e,w);const{t:D}=(0,k.Bd)(),{token:M}=h.A.useToken(),{mergedResourceSlots:N}=(0,u.Hv)(),V=(0,O.useFragment)(p,C),z=JSON.parse((null===V||void 0===V?void 0:V.live_stat)||"{}"),R=JSON.parse((null===V||void 0===V?void 0:V.available_slots)||"{}");return(0,F.jsx)(f.Ib,(0,t.A)((0,t.A)({},I),{},{centered:!0,title:"".concat(D("agent.DetailedInformation"),": ").concat(null===V||void 0===V?void 0:V.id),onCancel:L,destroyOnHidden:!0,footer:null,children:(0,F.jsxs)(f.OO,{direction:"column",align:"stretch",gap:"md",children:[(0,F.jsxs)(y.A,{gutter:[24,24],children:[(0,F.jsx)(b.A,{xs:24,sm:12,children:null!==z&&void 0!==z&&null!==(l=z.devices)&&void 0!==l&&l.cpu_util?(0,F.jsxs)(f.OO,{direction:"column",gap:"xxs",align:"stretch",children:[(0,F.jsx)(_.A.Title,{level:5,style:{marginTop:0},children:null===N||void 0===N||null===(n=N.cpu)||void 0===n?void 0:n.human_readable_name}),A().map(null===z||void 0===z||null===(a=z.devices)||void 0===a?void 0:a.cpu_util,((e,l)=>{var n;return(0,F.jsxs)(f.OO,{justify:"between",children:[(0,F.jsxs)(_.A.Text,{type:"secondary",style:{flex:.5},children:[null===N||void 0===N||null===(n=N.cpu)||void 0===n?void 0:n.human_readable_name,l]},l),(0,F.jsx)(x.A,{percent:null===e||void 0===e?void 0:e.pct,valueLabel:(0,s.Z1)(null===e||void 0===e?void 0:e.pct,1)+"%"})]})}))]}):null}),(0,F.jsxs)(b.A,{xs:24,sm:12,children:[null!==R&&void 0!==R&&R.mem?(0,F.jsxs)(f.OO,{direction:"column",gap:"xxs",align:"stretch",children:[(0,F.jsx)(_.A.Title,{level:5,style:{marginTop:0},children:null===N||void 0===N||null===(o=N.mem)||void 0===o?void 0:o.human_readable_name}),(0,F.jsx)(x.A,{percent:A().toNumber(null===(r=(0,s.mv)(A().toString(null===V||void 0===V?void 0:V.mem_cur_bytes),"g"))||void 0===r?void 0:r.number)/A().toNumber(null===(d=(0,s.mv)(null===R||void 0===R?void 0:R.mem,"g"))||void 0===d?void 0:d.number)*100||0,valueLabel:"".concat(null===(c=(0,s.mv)(A().toString(null===V||void 0===V?void 0:V.mem_cur_bytes),"g"))||void 0===c?void 0:c.displayValue," / ").concat(null===(m=(0,s.mv)(null===R||void 0===R?void 0:R.mem,"g"))||void 0===m?void 0:m.displayValue)})]}):null,null!==z&&void 0!==z&&z.node?(0,F.jsxs)(f.OO,{direction:"column",gap:"xxs",align:"start",children:[(0,F.jsx)(_.A.Title,{level:5,style:{marginTop:0},children:D("session.launcher.Network")}),(0,F.jsxs)(f.OO,{gap:"xl",children:[(0,F.jsx)(_.A.Text,{children:"TX:"}),(0,F.jsxs)(_.A.Text,{children:[null===(v=(0,s.Gh)(null===z||void 0===z||null===(g=z.node)||void 0===g||null===(j=g.net_tx)||void 0===j?void 0:j.current,"m",2))||void 0===v?void 0:v.displayValue,"B"]})]}),(0,F.jsxs)(f.OO,{gap:"xl",children:[(0,F.jsx)(_.A.Text,{children:"RX:"}),(0,F.jsxs)(_.A.Text,{children:[null===(S=(0,s.Gh)(null===z||void 0===z||null===(T=z.node)||void 0===T||null===(K=T.net_rx)||void 0===K?void 0:K.current,"m",2))||void 0===S?void 0:S.displayValue,"B"]})]})]}):null]})]}),(0,F.jsx)(y.A,{gutter:[24,24],style:{marginBottom:M.marginSM},children:A().map(A().keys(null===z||void 0===z?void 0:z.devices),(e=>{if(["cpu_util","mem","disk","net_rx","net_tx"].includes(e))return null;if(A().includes(e,"_util")){var l;const n=A().split(e,"_")[0]+".device";return(0,F.jsx)(b.A,{xs:24,sm:12,children:(0,F.jsxs)(f.OO,{direction:"column",gap:"xxs",align:"stretch",children:[(0,F.jsxs)(_.A.Title,{level:5,style:{marginTop:0},children:[null===N||void 0===N||null===(l=N[n])||void 0===l?void 0:l.human_readable_name," ",D("session.Utilization")]}),A().map(A().toPairs(null===z||void 0===z?void 0:z.devices[e]),((e,l)=>{var t,i,a;return(0,F.jsxs)(f.OO,{justify:"between",children:[(0,F.jsxs)(_.A.Text,{type:"secondary",style:{flex:.5},children:[null===N||void 0===N||null===(t=N[n])||void 0===t?void 0:t.human_readable_name,l]},l),(0,F.jsx)(x.A,{percent:A().toFinite(null===e||void 0===e||null===(i=e[1])||void 0===i?void 0:i.pct),valueLabel:(0,s.Z1)(null===e||void 0===e||null===(a=e[1])||void 0===a?void 0:a.pct,1)+"%"})]})}))]})})}if(A().includes(e,"_mem")){var n;const l=A().split(e,"_")[0]+".device";return(0,F.jsx)(b.A,{xs:24,sm:12,children:(0,F.jsxs)(f.OO,{direction:"column",gap:"xxs",align:"stretch",children:[(0,F.jsxs)(_.A.Title,{level:5,style:{marginTop:0},children:[null===N||void 0===N||null===(n=N[l])||void 0===n?void 0:n.human_readable_name," ",D("session.launcher.Memory")]}),A().map(A().toPairs(null===z||void 0===z?void 0:z.devices[e]),((e,n)=>{var t,i,a;return(0,F.jsxs)(f.OO,{justify:"between",children:[(0,F.jsxs)(_.A.Text,{type:"secondary",style:{flex:.5},children:[null===N||void 0===N||null===(t=N[l])||void 0===t?void 0:t.human_readable_name,n]},n),(0,F.jsx)(x.A,{percent:A().toFinite(null===e||void 0===e||null===(i=e[1])||void 0===i?void 0:i.pct),valueLabel:(0,s.Z1)(null===e||void 0===e||null===(a=e[1])||void 0===a?void 0:a.pct,1)+"%"})]})}))]})})}}))})]})}))},K=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"props"}],l=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyAgent",kind:"LinkedField",name:"modify_agent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"AgentSettingModalMutation",selections:l,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"AgentSettingModalMutation",selections:l},params:{cacheID:"1a9e43d4bc6e78f3949d1a2a397ff00e",id:null,metadata:{},name:"AgentSettingModalMutation",operationKind:"mutation",text:"mutation AgentSettingModalMutation(\n  $id: String!\n  $props: ModifyAgentInput!\n) {\n  modify_agent(id: $id, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();K.hash="13b2a6a91c7f08bbced5fde155ded60e";const C=K,L={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentSettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"schedulable",storageKey:null}],type:"Agent",abstractKey:null,hash:"303f8ee06508c3b28511ab1a24a305d5"},I=L;var D=n(66597),M=n(94010),N=n(60186);const V=["agentSettingModalFrgmt","onRequestClose"],z=e=>{let{agentSettingModalFrgmt:l=null,onRequestClose:n}=e,a=(0,i.A)(e,V);const{t:o}=(0,k.Bd)(),{message:r}=D.A.useApp(),s=(0,S.useRef)(null),d=(0,O.useFragment)(I,l),[u,c]=(0,O.useMutation)(C);return(0,F.jsx)(f.Ib,(0,t.A)((0,t.A)({},a),{},{title:"".concat(o("agent.AgentSetting"),": ").concat(null===d||void 0===d?void 0:d.id),onCancel:()=>n(),destroyOnHidden:!0,width:300,confirmLoading:c,onOk:()=>{var e;null===(e=s.current)||void 0===e||e.validateFields().then((e=>{u({variables:{id:(null===d||void 0===d?void 0:d.id)||"",props:{schedulable:e.schedulable}},onCompleted(e,l){var t,i;null===e||void 0===e||null===(t=e.modify_agent)||void 0===t||!t.ok||l?(r.error(null===e||void 0===e||null===(i=e.modify_agent)||void 0===i?void 0:i.msg),n()):(r.success(o("agent.AgentSettingUpdated")),n(!0))},onError(e){r.error(null===e||void 0===e?void 0:e.message)}})})).catch((()=>{}))},children:(0,F.jsx)(M.A,{ref:s,preserve:!1,initialValues:(0,t.A)({},d),children:(0,F.jsx)(M.A.Item,{name:"schedulable",label:o("agent.Schedulable"),valuePropName:"checked",required:!0,children:(0,F.jsx)(N.A,{})})})}))};var R=n(23590),P=n(72792),E=n(90679),Z=n(42159),q=n(72446),Q=n(21590),$=n(72627),W=n(32467),B=n(89353),G=n(63026),J=n(84423),U=n(92957),H=n(42338),X=n(8343),Y=n(20714),ee=n(8905),le=n.n(ee),ne=n(73233);const te=["tableProps","headerProps"],ie=e=>{const l=(0,r.c)(141);let n,a,g;if(l[0]!==e){var p=e;({tableProps:g,headerProps:n}=p),a=(0,i.A)(p,te),l[0]=e,l[1]=n,l[2]=a,l[3]=g}else n=l[1],a=l[2],g=l[3];const{t:y}=(0,k.Bd)(),{token:b}=h.A.useToken(),{isDarkMode:j}=(0,v.e)(),{mergedResourceSlots:w}=(0,u.Hv)(),[K,C]=(0,S.useState)(),[L,I]=(0,S.useState)(),[D,M]=(0,J.A)(),{toggle:N}=M,V=(0,d.CX)();let ee;l[4]===Symbol.for("react.memo_cache_sentinel")?(ee={status:(0,ne.withDefault)(ne.StringParam,"ALIVE"),filter:(0,ne.withDefault)(ne.StringParam,void 0),order:(0,ne.withDefault)(ne.StringParam,void 0)},l[4]=ee):ee=l[4];const[ie,de]=(0,ne.useQueryParams)(ee);let ue;l[5]===Symbol.for("react.memo_cache_sentinel")?(ue={current:1,pageSize:10},l[5]=ue):ue=l[5];const{baiPaginationOption:ce,tablePaginationOption:me,setTablePaginationOption:ve}=(0,c.L0)(ue);let ge;l[6]===Symbol.for("react.memo_cache_sentinel")?(ge={valuePropName:"fetchKey",trigger:"onChangeFetchKey",defaultValue:d.eI},l[6]=ge):ge=l[6];const[pe,xe]=(0,U.A)(a,ge);let he;l[7]!==ce.limit||l[8]!==ce.offset||l[9]!==ie.filter||l[10]!==ie.order||l[11]!==ie.status?(he={limit:ce.limit,offset:ce.offset,filter:ie.filter,order:ie.order,status:ie.status},l[7]=ce.limit,l[8]=ce.offset,l[9]=ie.filter,l[10]=ie.order,l[11]=ie.status,l[12]=he):he=l[12];const ye=he,be=(0,S.useDeferredValue)(ye),_e=(0,S.useDeferredValue)(pe);let fe;l[13]!==xe?(fe=()=>{xe(ae)},l[13]=xe,l[14]=fe):fe=l[14];const je=fe;let Ae;l[15]===Symbol.for("react.memo_cache_sentinel")?(Ae=o,l[15]=Ae):Ae=l[15];const Se=_e===d.eI?"store-and-network":"network-only";let ke;l[16]!==_e||l[17]!==Se?(ke={fetchKey:_e,fetchPolicy:Se},l[16]=_e,l[17]=Se,l[18]=ke):ke=l[18];const{agent_list:Oe}=(0,O.useLazyLoadQuery)(Ae,be,ke);let Fe,we,Te,Ke,Ce,Le,Ie,De,Me;l[19]!==y?(Fe=y("agent.Endpoint"),l[19]=y,l[20]=Fe):Fe=l[20],l[21]!==Fe?(we=(0,F.jsxs)(F.Fragment,{children:["ID / ",Fe]}),l[21]=Fe,l[22]=we):we=l[22],l[23]!==j?(Te=e=>{const l=A().split(e,"/"),n=null===l||void 0===l?void 0:l[0],t=(null===l||void 0===l?void 0:l.length)>1?l[1]:"",{color:i,icon:a}={aws:{color:"orange",icon:"aws"},amazon:{color:"orange",icon:"aws"},azure:{color:"blue",icon:"azure"},gcp:{color:"lightblue",icon:"gcp"},google:{color:"lightblue",icon:"gcp"},nbp:{color:"green",icon:"nbp"},naver:{color:"green",icon:"nbp"},openstack:{color:"red",icon:"openstack"},dgx:{color:"green",icon:"local"},local:{color:"yellow",icon:"local"}}[n]||{color:"yellow",icon:"local"};return(0,F.jsxs)(f.OO,{gap:"xxs",children:[(0,F.jsx)("img",{alt:e,src:"/resources/icons/".concat(a,".png"),style:{width:"32px",height:"32px",filter:j&&"local"===a?"invert(1)":""}}),""!==t?(0,F.jsx)(E.A,{values:[{label:t,color:i},{label:n,color:i}]}):(0,F.jsx)(H.A,{color:i,children:n})]})},l[23]=j,l[24]=Te):Te=l[24],l[25]!==V||l[26]!==y?(Ke=e=>(0,F.jsxs)(f.OO,{direction:"column",children:[(0,F.jsx)(_.A.Text,{children:le()(e).format("ll LTS")}),(0,F.jsx)(R.A,{callback:()=>V.utils.elapsedTime(e,Date.now()),delay:1e3,render:e=>(0,F.jsx)(E.A,{values:[{label:y("agent.Running")},{label:e}]})})]}),l[25]=V,l[26]=y,l[27]=Ke):Ke=l[27],l[28]!==w||l[29]!==b?(Ce=(e,l)=>{const n=JSON.parse((null===l||void 0===l?void 0:l.occupied_slots)||"{}"),t=JSON.parse((null===l||void 0===l?void 0:l.available_slots)||"{}");return(0,F.jsx)(f.OO,{direction:"column",gap:"xxs",children:A().map(t,((e,l)=>{if("cpu"===l){var i;const e=A().toFinite(A().toNumber(n.cpu)/A().toNumber(t.cpu)*100);return(0,F.jsxs)(f.OO,{justify:"between",style:{minWidth:220},children:[(0,F.jsxs)(f.OO,{gap:"xxs",children:[(0,F.jsx)(Z.s,{type:l},l),(0,F.jsxs)(_.A.Text,{children:[(0,s.Z1)(n.cpu||0,0),"\xa0/\xa0",(0,s.Z1)(t.cpu||0,0)]}),(0,F.jsx)(_.A.Text,{type:"secondary",style:{fontSize:b.sizeXS},children:null===w||void 0===w||null===(i=w.cpu)||void 0===i?void 0:i.display_unit})]}),(0,F.jsx)(x.A,{percent:e,strokeColor:e>80?b.colorError:b.colorSuccess,width:120,valueLabel:(0,s.Z1)(e,1)+" %"})]},l)}if("mem"===l){var a,o,r,d;const e=A().toFinite(A().toNumber(n.mem)/A().toNumber(t.mem)*100);return(0,F.jsxs)(f.OO,{justify:"between",style:{minWidth:220},children:[(0,F.jsxs)(f.OO,{gap:"xxs",children:[(0,F.jsx)(Z.s,{type:"mem"}),(0,F.jsxs)(_.A.Text,{children:[null!==(a=null===(o=(0,s.mv)(n.mem,"g",0))||void 0===o?void 0:o.numberFixed)&&void 0!==a?a:0,"\xa0/\xa0",null!==(r=null===(d=(0,s.mv)(t.mem,"g",0))||void 0===d?void 0:d.numberFixed)&&void 0!==r?r:0]}),(0,F.jsx)(_.A.Text,{type:"secondary",style:{fontSize:b.sizeXS},children:"GiB"})]}),(0,F.jsx)(x.A,{percent:e,strokeColor:e>80?b.colorError:b.colorSuccess,width:120,valueLabel:(0,s.Z1)(e,1)+" %"})]},"mem")}if(t[l]){var u;const e=A().toFinite(A().toNumber(n[l])/A().toNumber(t[l])*100);return(0,F.jsxs)(f.OO,{justify:"between",style:{minWidth:220},gap:"xxs",children:[(0,F.jsxs)(f.OO,{gap:"xxs",children:[(0,F.jsx)(Z.s,{type:l},l),(0,F.jsxs)(_.A.Text,{children:[(0,s.Z1)(n[l]||0,2),"\xa0/\xa0",(0,s.Z1)(t[l],2)]}),(0,F.jsx)(_.A.Text,{type:"secondary",style:{fontSize:b.sizeXS},children:null===w||void 0===w||null===(u=w[l])||void 0===u?void 0:u.display_unit})]}),(0,F.jsx)(x.A,{percent:e,strokeColor:e>80?b.colorError:b.colorSuccess,width:120,valueLabel:(0,s.Z1)(e,1)+" %"})]},l)}}))})},l[28]=w,l[29]=b,l[30]=Ce):Ce=l[30],l[31]!==w||l[32]!==y?(Le=(e,l)=>{const n=JSON.parse(e||"{}"),t=JSON.parse((null===l||void 0===l?void 0:l.available_slots)||"{}");if("ALIVE"===(null===l||void 0===l?void 0:l.status)){var i,a,o,r,d;const e={cpu_util:{capacity:0,current:0,ratio:0},mem_util:{capacity:0,current:0,ratio:0}};if(n&&n.node&&n.devices){const l=A().keys(n.devices.cpu_util).length;e.cpu_util.capacity=A().toFinite(n.node.cpu_util.capacity),e.cpu_util.current=A().toFinite(n.node.cpu_util.current),e.cpu_util.ratio=Math.min(A().toFinite(n.node.cpu_util.pct)/100/(l||1),1),e.mem_util.capacity=A().toInteger(t.mem||n.node.mem.capacity),e.mem_util.current=A().toInteger(n.node.mem.current),e.mem_util.ratio=e.mem_util.current/e.mem_util.capacity||0}A().forEach(A().keys(null===n||void 0===n?void 0:n.node),(l=>{["cpu_util","mem","disk","net_rx","net_tx"].includes(l)||(A().includes(l,"_util")?e[l]={capacity:A().toFinite(n.node[l].capacity)||100,current:A().toFinite(n.node[l].current),ratio:A().toFinite(n.node[l].current)/100||0}:l.includes("_mem")&&(e[l]={capacity:A().toFinite(n.node[l].capacity),current:A().toFinite(n.node[l].current),ratio:A().toFinite(n.node[l].pct)/100||0}))}));const l=(null===(i=(0,s.Ho)(A().toString(e.mem_util.capacity),"auto"))||void 0===i?void 0:i.unit)||"g";return(0,F.jsxs)(f.OO,{direction:"column",gap:"xxs",children:[(0,F.jsxs)(f.OO,{justify:"between",style:{minWidth:200,width:"100%"},"data-testid":"live-stat-cpu",children:[(0,F.jsx)(_.A.Text,{children:null===w||void 0===w||null===(a=w.cpu)||void 0===a?void 0:a.human_readable_name}),(0,F.jsx)(x.A,{percent:100*e.cpu_util.ratio,width:120,valueLabel:(0,s.Z1)(A().toFinite(100*e.cpu_util.ratio),1)+" %"})]}),(0,F.jsxs)(f.OO,{justify:"between",style:{minWidth:200,width:"100%"},"data-testid":"live-stat-mem",children:[(0,F.jsx)(_.A.Text,{children:null===w||void 0===w||null===(o=w.mem)||void 0===o?void 0:o.human_readable_name}),(0,F.jsx)(x.A,{percent:100*e.mem_util.ratio,width:120,valueLabel:(null===(r=(0,s.mv)(A().toString(e.mem_util.current),l))||void 0===r?void 0:r.numberFixed)+" / "+(null===(d=(0,s.mv)(A().toString(e.mem_util.capacity),l))||void 0===d?void 0:d.displayValue)})]}),A().map(A().keys(null===n||void 0===n?void 0:n.node),(l=>{var t,i,a;if(!["cpu_util","mem","disk"].includes(l)){if(A().includes(l,"_util")){var o;const n=A().split(l,"_")[0]+".device";return(0,F.jsxs)(f.OO,{justify:"between",style:{minWidth:200,width:"100%"},gap:"xxs","data-testid":"live-stat-".concat(l),children:[(0,F.jsxs)(_.A.Text,{children:[null===w||void 0===w||null===(o=w[n])||void 0===o?void 0:o.human_readable_name,"(util)"]}),(0,F.jsx)(x.A,{width:120,percent:e[l].current/e[l].capacity*100||0,valueLabel:A().toFinite((0,s.Z1)(100*e[l].ratio,1))+" %"})]},l)}if(A().includes(l,"_mem")){var r,d,u,c;const n=A().split(l,"_")[0]+".device",t=(null===(r=(0,s.Ho)(A().toString(e[l].capacity),"auto"))||void 0===r?void 0:r.unit)||"g";return(0,F.jsxs)(f.OO,{justify:"between",style:{minWidth:200,width:"100%"},gap:"xxs","data-testid":"live-stat-".concat(l),children:[(0,F.jsxs)(_.A.Text,{children:[null===w||void 0===w||null===(d=w[n])||void 0===d?void 0:d.human_readable_name,"(mem)"]}),(0,F.jsx)(x.A,{width:120,percent:e[l].current/e[l].capacity*100||0,valueLabel:(null===(u=(0,s.mv)(A().toString(e[l].current),t))||void 0===u?void 0:u.numberFixed)+" / "+(null===(c=(0,s.mv)(A().toString(e[l].capacity),t))||void 0===c?void 0:c.displayValue)})]},l)}if(A().includes(l,"_power")){var m,v;const e=A().split(l,"_").slice(0,-1).join("-")+".device",t=null===w||void 0===w||null===(m=w[e])||void 0===m?void 0:m.human_readable_name;return(0,F.jsxs)(f.OO,{justify:"between",style:{minWidth:200,width:"100%"},gap:"xxs","data-testid":"live-stat-".concat(l),children:[(0,F.jsx)(f.mQ,{children:"".concat(t,"(power)")}),(0,F.jsx)(f.mQ,{children:"".concat((0,s.Z1)(null===(v=n.node[l])||void 0===v?void 0:v.current,2)," ").concat(n.node[l].unit_hint)})]},l)}if(A().includes(l,"_temperature")){var g,p;const e=A().split(l,"_").slice(0,-1).join("_")+".device",t=null===w||void 0===w||null===(g=w[e])||void 0===g?void 0:g.human_readable_name;return(0,F.jsxs)(f.OO,{justify:"between",style:{minWidth:200,width:"100%"},gap:"xxs","data-testid":"live-stat-".concat(l),children:[(0,F.jsx)(f.mQ,{children:"".concat(t,"(temp)")}),(0,F.jsx)(f.mQ,{children:"".concat((0,s.Z1)(null===(p=n.node[l])||void 0===p?void 0:p.current,2)," \xb0C")})]},l)}if(A().includes(["net_rx","net_tx"],l)){var h,y,b;const e=(0,s.Gh)(null===(h=n.node[l])||void 0===h?void 0:h.current,"auto");return(0,F.jsxs)(f.OO,{justify:"between",style:{minWidth:200,width:"100%"},gap:"xxs","data-testid":"live-stat-".concat(l),children:[(0,F.jsx)(f.mQ,{children:"net_rx"===l?"Net Rx":"Net Tx"}),(0,F.jsx)(f.mQ,{children:"".concat(null!==(y=null===e||void 0===e?void 0:e.numberFixed)&&void 0!==y?y:0," ").concat(null!==(b=null===e||void 0===e?void 0:e.unit.toUpperCase())&&void 0!==b?b:"","bps")})]},l)}return(0,F.jsxs)(f.OO,{justify:"between",style:{minWidth:200,width:"100%"},gap:"xxs","data-testid":"live-stat-".concat(l),children:[(0,F.jsx)(f.mQ,{children:l}),(0,F.jsx)(f.mQ,{children:"".concat((0,s.Z1)(null!==(t=null===(i=n.node[l])||void 0===i?void 0:i.current)&&void 0!==t?t:0,2)).concat(null!==(a=n.node[l])&&void 0!==a&&a.unit_hint?" ".concat(n.node[l].unit_hint):"")})]},l)}}))]})}return y("agent.NoAvailableLiveStat")},l[31]=w,l[32]=y,l[33]=Le):Le=l[33],l[34]!==b?(Ie=(e,l)=>{var n,t,i,a,o,r;const d=null!==(n=null===(t=JSON.parse((null===l||void 0===l?void 0:l.live_stat)||"{}"))||void 0===t||null===(i=t.node)||void 0===i?void 0:i.disk)&&void 0!==n?n:{},u=A().toFinite(d.pct)||0,c=A().toFinite((0,s.Z1)(u,2)),m=c>80?b.colorError:b.colorSuccess,v=(null===(a=(0,s.Ho)(null===d||void 0===d?void 0:d.capacity,"auto",{base:1e3}))||void 0===a?void 0:a.unit)||"g";return(0,F.jsxs)(f.OO,{direction:"column",children:[(0,F.jsx)(x.A,{valueLabel:(0,s.Z1)(c,1)+" %",percent:c,strokeColor:m,width:120}),(0,F.jsxs)(_.A.Text,{style:{fontSize:b.fontSizeSM},children:[null===(o=(0,s.Gh)(null===d||void 0===d?void 0:d.current,v))||void 0===o?void 0:o.numberFixed,"\xa0/\xa0",null===(r=(0,s.Gh)(null===d||void 0===d?void 0:d.capacity,v))||void 0===r?void 0:r.displayValue]})]})},l[34]=b,l[35]=Ie):Ie=l[35],l[36]!==b?(De=e=>(0,F.jsx)(f.OO,{justify:"center",children:!0===e?(0,F.jsx)(Q.A,{style:{color:b.colorSuccess,fontSize:b.fontSizeXL}}):(0,F.jsx)($.A,{style:{color:b.colorTextDisabled,fontSize:b.fontSizeXL}})}),l[36]=b,l[37]=De):De=l[37],l[38]!==b?(Me=(e,l)=>(0,F.jsxs)(f.OO,{children:[(0,F.jsx)(X.Ay,{style:{color:b.colorSuccess},type:"text",icon:(0,F.jsx)(W.A,{}),onClick:()=>C(l)}),(0,F.jsx)(X.Ay,{style:{color:b.colorInfo},type:"text",icon:(0,F.jsx)(B.A,{}),onClick:()=>I(l)})]}),l[38]=b,l[39]=Me):Me=l[39];const Ne=[{title:we,key:"id",dataIndex:"id",fixed:"left",render:oe,sorter:!0},{title:y("agent.Region"),key:"region",dataIndex:"region",render:Te},{title:y("agent.Architecture"),key:"architecture",dataIndex:"architecture"},{title:y("agent.Starts"),key:"first_contact",dataIndex:"first_contact",render:Ke,sorter:!0},{title:y("agent.Allocation"),key:"allocation",render:Ce},{title:y("agent.Utilization"),key:"live_stat",dataIndex:"live_stat",render:Le},{title:y("agent.DiskPerc"),key:"disk_perc",render:Ie},{title:y("general.ResourceGroup"),key:"resource_group",dataIndex:"scaling_group",sorter:!0},{title:y("agent.Status"),key:"status",dataIndex:"status",render:re},{title:y("agent.Schedulable"),key:"schedulable",dataIndex:"schedulable",render:De,sorter:!0},{title:y("general.Control"),key:"control",fixed:"right",render:Me}],[Ve,ze]=(0,m.a)("AgentList");let Re,Pe,Ee,Ze,qe,Qe,$e,We,Be,Ge,Je,Ue,He,Xe,Ye,el,ll,nl,tl,il,al,ol,rl;l[40]===Symbol.for("react.memo_cache_sentinel")?(Re={flex:1},l[40]=Re):Re=l[40],l[41]!==y?(Pe=y("agent.Connected"),l[41]=y,l[42]=Pe):Pe=l[42],l[43]!==Pe?(Ee={label:Pe,value:"ALIVE"},l[43]=Pe,l[44]=Ee):Ee=l[44],l[45]!==y?(Ze=y("agent.Terminated"),l[45]=y,l[46]=Ze):Ze=l[46],l[47]!==Ze?(qe={label:Ze,value:"TERMINATED"},l[47]=Ze,l[48]=qe):qe=l[48],l[49]!==Ee||l[50]!==qe?(Qe=[Ee,qe],l[49]=Ee,l[50]=qe,l[51]=Qe):Qe=l[51],l[52]!==de?($e=e=>{de({status:e.target.value},"replaceIn")},l[52]=de,l[53]=$e):$e=l[53],l[54]!==ie.status||l[55]!==Qe||l[56]!==$e?(We=(0,F.jsx)(P.A,{options:Qe,value:ie.status,onChange:$e}),l[54]=ie.status,l[55]=Qe,l[56]=$e,l[57]=We):We=l[57],l[58]===Symbol.for("react.memo_cache_sentinel")?(Be={key:"id",propertyLabel:"ID",type:"string"},l[58]=Be):Be=l[58],l[59]!==y?(Ge=y("agent.Endpoint"),l[59]=y,l[60]=Ge):Ge=l[60],l[61]!==Ge?(Je={key:"addr",propertyLabel:Ge,type:"string"},l[61]=Ge,l[62]=Je):Je=l[62],l[63]!==y?(Ue=y("agent.Schedulable"),l[63]=y,l[64]=Ue):Ue=l[64],l[65]!==y?(He=y("general.Enabled"),l[65]=y,l[66]=He):He=l[66],l[67]!==He?(Xe={label:He,value:"true"},l[67]=He,l[68]=Xe):Xe=l[68],l[69]!==y?(Ye=y("general.Disabled"),l[69]=y,l[70]=Ye):Ye=l[70],l[71]!==Ye?(el={label:Ye,value:"false"},l[71]=Ye,l[72]=el):el=l[72],l[73]!==Xe||l[74]!==el?(ll=[Xe,el],l[73]=Xe,l[74]=el,l[75]=ll):ll=l[75],l[76]!==Ue||l[77]!==ll?(nl={key:"schedulable",propertyLabel:Ue,type:"boolean",options:ll},l[76]=Ue,l[77]=ll,l[78]=nl):nl=l[78],l[79]!==Je||l[80]!==nl?(tl=[Be,Je,nl],l[79]=Je,l[80]=nl,l[81]=tl):tl=l[81],l[82]!==de?(il=e=>{de({filter:e},"replaceIn")},l[82]=de,l[83]=il):il=l[83],l[84]!==ie.filter||l[85]!==tl||l[86]!==il?(al=(0,F.jsx)(f.Af,{filterProperties:tl,value:ie.filter,onChange:il}),l[84]=ie.filter,l[85]=tl,l[86]=il,l[87]=al):al=l[87],l[88]!==We||l[89]!==al?(ol=(0,F.jsxs)(f.OO,{direction:"row",gap:"sm",align:"start",style:Re,wrap:"wrap",children:[We,al]}),l[88]=We,l[89]=al,l[90]=ol):ol=l[90],l[91]!==y?(rl=y("button.Refresh"),l[91]=y,l[92]=rl):rl=l[92];const sl=_e!==pe;let dl,ul,cl,ml,vl;l[93]!==je?(dl=()=>je(),l[93]=je,l[94]=dl):dl=l[94],l[95]===Symbol.for("react.memo_cache_sentinel")?(ul=(0,F.jsx)(G.A,{}),l[95]=ul):ul=l[95],l[96]!==sl||l[97]!==dl?(cl=(0,F.jsx)(X.Ay,{loading:sl,onClick:dl,icon:ul}),l[96]=sl,l[97]=dl,l[98]=cl):cl=l[98],l[99]!==rl||l[100]!==cl?(ml=(0,F.jsx)(f.OO,{gap:"xs",children:(0,F.jsx)(Y.A,{title:rl,children:cl})}),l[99]=rl,l[100]=cl,l[101]=ml):ml=l[101],l[102]!==n||l[103]!==ol||l[104]!==ml?(vl=(0,F.jsxs)(f.OO,(0,t.A)((0,t.A)({justify:"between",align:"start",wrap:"wrap"},n),{},{children:[ol,ml]})),l[102]=n,l[103]=ol,l[104]=ml,l[105]=vl):vl=l[105];const gl=f.zx;let pl;l[106]===Symbol.for("react.memo_cache_sentinel")?(pl={x:"max-content"},l[106]=pl):pl=l[106];const xl=null===Oe||void 0===Oe?void 0:Oe.items;let hl;l[107]!==xl?(hl=(0,f.f)(xl),l[107]=xl,l[108]=hl):hl=l[108];let yl;l[109]!==Ve?(yl=e=>!A().includes(Ve,A().toString(null===e||void 0===e?void 0:e.key)),l[109]=Ve,l[110]=yl):yl=l[110];const bl=A().filter(Ne,yl),_l=null===Oe||void 0===Oe?void 0:Oe.total_count;let fl,jl,Al,Sl;l[111]===Symbol.for("react.memo_cache_sentinel")?(fl=(0,F.jsx)(B.A,{}),l[111]=fl):fl=l[111],l[112]!==N?(jl=(0,F.jsx)(X.Ay,{type:"text",icon:fl,onClick:()=>{N()}}),l[112]=N,l[113]=jl):jl=l[113],l[114]!==ve||l[115]!==_l||l[116]!==jl||l[117]!==me.current||l[118]!==me.pageSize?(Al={pageSize:me.pageSize,total:_l,current:me.current,extraContent:jl,onChange(e,l){A().isNumber(e)&&A().isNumber(l)&&ve({current:e,pageSize:l})}},l[114]=ve,l[115]=_l,l[116]=jl,l[117]=me.current,l[118]=me.pageSize,l[119]=Al):Al=l[119],l[120]!==de?(Sl=e=>{de({order:e},"replaceIn")},l[120]=de,l[121]=Sl):Sl=l[121];const kl=be!==ye||_e!==pe;let Ol;l[122]!==gl||l[123]!==pl||l[124]!==hl||l[125]!==bl||l[126]!==Al||l[127]!==Sl||l[128]!==kl||l[129]!==g?(Ol=(0,F.jsx)(gl,(0,t.A)({size:"small",scroll:pl,rowKey:"id",dataSource:hl,showSorterTooltip:false,columns:bl,resizable:!0,pagination:Al,onChangeOrder:Sl,loading:kl},g)),l[122]=gl,l[123]=pl,l[124]=hl,l[125]=bl,l[126]=Al,l[127]=Sl,l[128]=kl,l[129]=g,l[130]=Ol):Ol=l[130];const Fl=!!K;let wl,Tl;l[131]===Symbol.for("react.memo_cache_sentinel")?(wl=()=>C(null),l[131]=wl):wl=l[131],l[132]!==K||l[133]!==Fl?(Tl=(0,F.jsx)(T,{agentDetailModalFrgmt:K,open:Fl,onRequestClose:wl}),l[132]=K,l[133]=Fl,l[134]=Tl):Tl=l[134];const Kl=!!L;let Cl,Ll;return l[135]!==je?(Cl=e=>{e&&je(),I(null)},l[135]=je,l[136]=Cl):Cl=l[136],l[137]!==L||l[138]!==Kl||l[139]!==Cl?(Ll=(0,F.jsx)(z,{agentSettingModalFrgmt:L,open:Kl,onRequestClose:Cl}),l[137]=L,l[138]=Kl,l[139]=Cl,l[140]=Ll):Ll=l[140],(0,F.jsxs)(f.OO,{direction:"column",align:"stretch",gap:"sm","data-testid":"agent-list",children:[vl,Ol,Tl,Ll,(0,F.jsx)(q.A,{open:D,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&ze(A().difference(Ne.map(se),null===e||void 0===e?void 0:e.selectedColumnKeys)),N()},columns:Ne,hiddenColumnKeys:Ve})]})};function ae(){return(new Date).toISOString()}function oe(e,l){return(0,F.jsxs)(f.OO,{direction:"column",align:"start",children:[(0,F.jsx)(_.A.Text,{children:e}),(0,F.jsx)(_.A.Text,{type:"secondary",children:null===l||void 0===l?void 0:l.addr})]})}function re(e,l){var n,t,i;const a=JSON.parse((null===l||void 0===l?void 0:l.compute_plugins)||"{}"),o=JSON.parse((null===l||void 0===l?void 0:l.available_slots)||"{}");return(0,F.jsxs)(f.OO,{direction:"column",gap:"xxs",align:"start",children:[(0,F.jsx)(E.A,{values:[{label:"Agent"},{label:(null===l||void 0===l?void 0:l.version)||"",color:"ALIVE"===e?"green":"TERMINATED"===e?"red":"blue"}]}),null!==a&&void 0!==a&&a.cuda?(0,F.jsxs)(F.Fragment,{children:[null!==a&&void 0!==a&&null!==(n=a.cuda)&&void 0!==n&&n.cuda_version?(0,F.jsx)(E.A,{values:[{label:"CUDA"},{label:null===a||void 0===a||null===(t=a.cuda)||void 0===t?void 0:t.cuda_version,color:"green"}]}):(0,F.jsx)(H.A,{color:"green",children:"CUDA Disabled"}),(0,F.jsx)(E.A,{values:[{label:"CUDA Plugin"},{label:null===a||void 0===a||null===(i=a.cuda)||void 0===i?void 0:i.version,color:"blue"}]}),A().includes(A().keys(o),"cuda.shares")?(0,F.jsx)(H.A,{color:"blue",children:"Fractional GPU\u2122"}):null]}):null]})}function se(e){return A().toString(e.key)}},69357:(e,l,n)=>{n.d(l,{a:()=>i});var t=n(10979);const i=e=>{const[l,n]=(0,t.q)("hiddenColumnKeys.".concat(e));return[l,n]}},72446:(e,l,n)=>{n.d(l,{A:()=>h});var t=n(56276),i=n(11863),a=n(9157),o=n(82609),r=n(94010),s=n(90711),d=n(76591),u=n(67631),c=n(47699),m=n.n(c),v=n(17534),g=n(62962),p=n(89374);const x=["open","onRequestClose","columns","hiddenColumnKeys"],h=e=>{var l;let{open:n,onRequestClose:c,columns:h,hiddenColumnKeys:y}=e,b=(0,i.A)(e,x);const _=(0,v.useRef)(null),{t:f}=(0,g.Bd)(),{token:j}=d.A.useToken(),A=m().map(h,(e=>{return"string"===typeof e.title?{label:e.title,value:m().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(l=e.title,v.Children.map(l.props.children,(e=>{if("string"===typeof e)return e}))),value:m().toString(e.key)}:{label:void 0,value:m().toString(e.key)};var l}));return(0,p.jsx)(u.Ib,(0,t.A)((0,t.A)({title:f("table.SettingTable"),open:n,destroyOnHidden:!0,centered:!0,onOk:()=>{var e;null===(e=_.current)||void 0===e||e.validateFields().then((e=>{c(e)})).catch((()=>{}))},onCancel:()=>{c()}},b),{},{children:(0,p.jsxs)(r.A,{ref:_,preserve:!1,initialValues:{selectedColumnKeys:null===(l=m().map(A,"value"))||void 0===l?void 0:l.filter((e=>!m().includes(y,e)))},layout:"vertical",children:[(0,p.jsx)(r.A.Item,{name:"searchInput",label:f("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,p.jsx)(s.A,{prefix:(0,p.jsx)(a.A,{}),style:{marginBottom:j.marginSM},placeholder:f("table.SearchTableColumn")})}),(0,p.jsx)(r.A.Item,{noStyle:!0,shouldUpdate:(e,l)=>e.searchInput!==l.searchInput,children:e=>{let{getFieldValue:l}=e;const n=l("searchInput")?m().toLower(l("searchInput")):void 0,i=m().map(A,(e=>m().toLower(m().toString(e.label)).includes(n||"")?e:(0,t.A)((0,t.A)({},e),{},{style:{display:"none"}})));return(0,p.jsx)(r.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},rules:[{required:!0,message:f("general.validation.PleaseSelectOptions")}],children:(0,p.jsx)(o.A.Group,{options:i,style:{flexDirection:"column"}})})}})]})}))}}}]);
//# sourceMappingURL=7376.413c4dfc.chunk.js.map