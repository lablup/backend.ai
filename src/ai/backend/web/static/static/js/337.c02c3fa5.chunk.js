"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[337],{10337:(e,l,n)=>{n.d(l,{A:()=>Y});const t=function(){var e={defaultValue:null,kind:"LocalArgument",name:"filter"},l={defaultValue:null,kind:"LocalArgument",name:"limit"},n={defaultValue:null,kind:"LocalArgument",name:"offset"},t={defaultValue:null,kind:"LocalArgument",name:"order"},i={defaultValue:null,kind:"LocalArgument",name:"status"},a=[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"},{kind:"Variable",name:"order",variableName:"order"},{kind:"Variable",name:"status",variableName:"status"}],o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"addr",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"compute_plugins",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"first_contact",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"lost_at",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"status_changed",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"cpu_cur_pct",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"mem_cur_bytes",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"available_slots",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"schedulable",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null};return{fragment:{argumentDefinitions:[e,l,n,t,i],kind:"Fragment",metadata:null,name:"AgentListQuery",selections:[{alias:null,args:a,concreteType:"AgentList",kind:"LinkedField",name:"agent_list",plural:!1,selections:[{alias:null,args:null,concreteType:"Agent",kind:"LinkedField",name:"items",plural:!0,selections:[o,r,s,d,u,c,m,v,g,p,x,h,y,b,_,f,j,{args:null,kind:"FragmentSpread",name:"AgentDetailModalFragment"},{args:null,kind:"FragmentSpread",name:"AgentSettingModalFragment"}],storageKey:null},A],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,n,e,i,t],kind:"Operation",name:"AgentListQuery",selections:[{alias:null,args:a,concreteType:"AgentList",kind:"LinkedField",name:"agent_list",plural:!1,selections:[{alias:null,args:null,concreteType:"Agent",kind:"LinkedField",name:"items",plural:!0,selections:[o,r,s,d,u,c,m,v,g,p,x,h,y,b,_,f,j],storageKey:null},A],storageKey:null}]},params:{cacheID:"e1a551c0261ce59a4b187a3bbb29b86b",id:null,metadata:{},name:"AgentListQuery",operationKind:"query",text:"query AgentListQuery(\n  $limit: Int!\n  $offset: Int!\n  $filter: String\n  $status: String\n  $order: String\n) {\n  agent_list(limit: $limit, offset: $offset, filter: $filter, status: $status, order: $order) {\n    items {\n      id\n      status\n      version\n      addr\n      architecture\n      region\n      compute_plugins\n      first_contact\n      lost_at\n      status_changed\n      live_stat\n      cpu_cur_pct\n      mem_cur_bytes\n      available_slots\n      occupied_slots\n      scaling_group\n      schedulable\n      ...AgentDetailModalFragment\n      ...AgentSettingModalFragment\n    }\n    total_count\n  }\n}\n\nfragment AgentDetailModalFragment on Agent {\n  id\n  live_stat\n  available_slots\n  occupied_slots\n  cpu_cur_pct\n  mem_cur_bytes\n}\n\nfragment AgentSettingModalFragment on Agent {\n  id\n  schedulable\n}\n"}}}();t.hash="1d6c6a390aad71e4b7815a623ca61d86";const i=t;var a=n(40005),o=n(92882),r=n(43224),s=n(23054),d=n(90615),u=n(9587),c=n(11271);const m={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentDetailModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"available_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cpu_cur_pct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mem_cur_bytes",storageKey:null}],type:"Agent",abstractKey:null,hash:"cb343a0290034803cca4c2b82a1c1b68"},v=m;var g=n(58399),p=n(234),x=n(84928),h=n(57442),y=n(8334),b=n(45045),_=n(43749),f=n.n(_),j=n(21481),A=n(51569),S=n(69775),k=n(66845);const O=e=>{var l,n,t,i,a,r,d,u,c,m,_,j,O,F;let{agentDetailModalFrgmt:w=null,onRequestClose:T,...K}=e;const{t:L}=(0,A.Bd)(),{token:C}=p.A.useToken(),{mergedResourceSlots:I}=(0,s.Hv)(),D=(0,S.useFragment)(v,w),N=JSON.parse((null===D||void 0===D?void 0:D.live_stat)||"{}"),M=JSON.parse((null===D||void 0===D?void 0:D.available_slots)||"{}");return(0,k.jsx)(b.Ib,{...K,centered:!0,title:`${L("agent.DetailedInformation")}: ${null===D||void 0===D?void 0:D.id}`,onCancel:T,destroyOnHidden:!0,footer:null,children:(0,k.jsxs)(b.OO,{direction:"column",align:"stretch",gap:"md",children:[(0,k.jsxs)(x.A,{gutter:[24,24],children:[(0,k.jsx)(h.A,{xs:24,sm:12,children:null!==N&&void 0!==N&&null!==(l=N.devices)&&void 0!==l&&l.cpu_util?(0,k.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"stretch",children:[(0,k.jsx)(y.A.Title,{level:5,style:{marginTop:0},children:null===I||void 0===I||null===(n=I.cpu)||void 0===n?void 0:n.human_readable_name}),f().map(null===N||void 0===N||null===(t=N.devices)||void 0===t?void 0:t.cpu_util,((e,l)=>{var n;return(0,k.jsxs)(b.OO,{justify:"between",children:[(0,k.jsxs)(y.A.Text,{type:"secondary",style:{flex:.5},children:[null===I||void 0===I||null===(n=I.cpu)||void 0===n?void 0:n.human_readable_name,l]},l),(0,k.jsx)(g.A,{percent:null===e||void 0===e?void 0:e.pct,valueLabel:(0,o.Z1)(null===e||void 0===e?void 0:e.pct,1)+"%"})]})}))]}):null}),(0,k.jsxs)(h.A,{xs:24,sm:12,children:[null!==M&&void 0!==M&&M.mem?(0,k.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"stretch",children:[(0,k.jsx)(y.A.Title,{level:5,style:{marginTop:0},children:null===I||void 0===I||null===(i=I.mem)||void 0===i?void 0:i.human_readable_name}),(0,k.jsx)(g.A,{percent:f().toNumber(null===(a=(0,o.mv)(f().toString(null===D||void 0===D?void 0:D.mem_cur_bytes),"g"))||void 0===a?void 0:a.number)/f().toNumber(null===(r=(0,o.mv)(null===M||void 0===M?void 0:M.mem,"g"))||void 0===r?void 0:r.number)*100||0,valueLabel:`${null===(d=(0,o.mv)(f().toString(null===D||void 0===D?void 0:D.mem_cur_bytes),"g"))||void 0===d?void 0:d.displayValue} / ${null===(u=(0,o.mv)(null===M||void 0===M?void 0:M.mem,"g"))||void 0===u?void 0:u.displayValue}`})]}):null,null!==N&&void 0!==N&&N.node?(0,k.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"start",children:[(0,k.jsx)(y.A.Title,{level:5,style:{marginTop:0},children:L("session.launcher.Network")}),(0,k.jsxs)(b.OO,{gap:"xl",children:[(0,k.jsx)(y.A.Text,{children:"TX:"}),(0,k.jsxs)(y.A.Text,{children:[null===(c=(0,o.Gh)(null===N||void 0===N||null===(m=N.node)||void 0===m||null===(_=m.net_tx)||void 0===_?void 0:_.current,"m",2))||void 0===c?void 0:c.displayValue,"B"]})]}),(0,k.jsxs)(b.OO,{gap:"xl",children:[(0,k.jsx)(y.A.Text,{children:"RX:"}),(0,k.jsxs)(y.A.Text,{children:[null===(j=(0,o.Gh)(null===N||void 0===N||null===(O=N.node)||void 0===O||null===(F=O.net_rx)||void 0===F?void 0:F.current,"m",2))||void 0===j?void 0:j.displayValue,"B"]})]})]}):null]})]}),(0,k.jsx)(x.A,{gutter:[24,24],style:{marginBottom:C.marginSM},children:f().map(f().keys(null===N||void 0===N?void 0:N.devices),(e=>{if(["cpu_util","mem","disk","net_rx","net_tx"].includes(e))return null;if(f().includes(e,"_util")){var l;const n=f().split(e,"_")[0]+".device";return(0,k.jsx)(h.A,{xs:24,sm:12,children:(0,k.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"stretch",children:[(0,k.jsxs)(y.A.Title,{level:5,style:{marginTop:0},children:[null===I||void 0===I||null===(l=I[n])||void 0===l?void 0:l.human_readable_name," ",L("session.Utilization")]}),f().map(f().toPairs(null===N||void 0===N?void 0:N.devices[e]),((e,l)=>{var t,i,a;return(0,k.jsxs)(b.OO,{justify:"between",children:[(0,k.jsxs)(y.A.Text,{type:"secondary",style:{flex:.5},children:[null===I||void 0===I||null===(t=I[n])||void 0===t?void 0:t.human_readable_name,l]},l),(0,k.jsx)(g.A,{percent:f().toFinite(null===e||void 0===e||null===(i=e[1])||void 0===i?void 0:i.pct),valueLabel:(0,o.Z1)(null===e||void 0===e||null===(a=e[1])||void 0===a?void 0:a.pct,1)+"%"})]})}))]})})}if(f().includes(e,"_mem")){var n;const l=f().split(e,"_")[0]+".device";return(0,k.jsx)(h.A,{xs:24,sm:12,children:(0,k.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"stretch",children:[(0,k.jsxs)(y.A.Title,{level:5,style:{marginTop:0},children:[null===I||void 0===I||null===(n=I[l])||void 0===n?void 0:n.human_readable_name," ",L("session.launcher.Memory")]}),f().map(f().toPairs(null===N||void 0===N?void 0:N.devices[e]),((e,n)=>{var t,i,a;return(0,k.jsxs)(b.OO,{justify:"between",children:[(0,k.jsxs)(y.A.Text,{type:"secondary",style:{flex:.5},children:[null===I||void 0===I||null===(t=I[l])||void 0===t?void 0:t.human_readable_name,n]},n),(0,k.jsx)(g.A,{percent:f().toFinite(null===e||void 0===e||null===(i=e[1])||void 0===i?void 0:i.pct),valueLabel:(0,o.Z1)(null===e||void 0===e||null===(a=e[1])||void 0===a?void 0:a.pct,1)+"%"})]})}))]})})}}))})]})})},F=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"props"}],l=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyAgent",kind:"LinkedField",name:"modify_agent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"AgentSettingModalMutation",selections:l,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"AgentSettingModalMutation",selections:l},params:{cacheID:"1a9e43d4bc6e78f3949d1a2a397ff00e",id:null,metadata:{},name:"AgentSettingModalMutation",operationKind:"mutation",text:"mutation AgentSettingModalMutation(\n  $id: String!\n  $props: ModifyAgentInput!\n) {\n  modify_agent(id: $id, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();F.hash="13b2a6a91c7f08bbced5fde155ded60e";const w=F,T={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentSettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"schedulable",storageKey:null}],type:"Agent",abstractKey:null,hash:"303f8ee06508c3b28511ab1a24a305d5"},K=T;var L=n(52688),C=n(40370),I=n(50069);const D=e=>{let{agentSettingModalFrgmt:l=null,onRequestClose:n,...t}=e;const{t:i}=(0,A.Bd)(),{message:a}=L.A.useApp(),o=(0,j.useRef)(null),r=(0,S.useFragment)(K,l),[s,d]=(0,S.useMutation)(w);return(0,k.jsx)(b.Ib,{...t,title:`${i("agent.AgentSetting")}: ${null===r||void 0===r?void 0:r.id}`,onCancel:()=>n(),destroyOnHidden:!0,width:300,confirmLoading:d,onOk:()=>{var e;null===(e=o.current)||void 0===e||e.validateFields().then((e=>{s({variables:{id:(null===r||void 0===r?void 0:r.id)||"",props:{schedulable:e.schedulable}},onCompleted(e,l){var t,o;null===e||void 0===e||null===(t=e.modify_agent)||void 0===t||!t.ok||l?(a.error(null===e||void 0===e||null===(o=e.modify_agent)||void 0===o?void 0:o.msg),n()):(a.success(i("agent.AgentSettingUpdated")),n(!0))},onError(e){a.error(null===e||void 0===e?void 0:e.message)}})})).catch((()=>{}))},children:(0,k.jsx)(C.A,{ref:o,preserve:!1,initialValues:{...r},children:(0,k.jsx)(C.A.Item,{name:"schedulable",label:i("agent.Schedulable"),valuePropName:"checked",required:!0,children:(0,k.jsx)(I.A,{})})})})};var N=n(78524),M=n(87246),$=n(80785),V=n(1809),z=n(46668),R=n(24011),P=n(29646),E=n(39544),Z=n(78125),Q=n(37679),q=n(60854),W=n(24180),B=n(85829),G=n(93685),J=n(91454),U=n(70127),H=n.n(U),X=n(7927);const Y=e=>{const l=(0,a.c)(141);let n,t,m;l[0]!==e?(({tableProps:m,headerProps:n,...t}=e),l[0]=e,l[1]=n,l[2]=t,l[3]=m):(n=l[1],t=l[2],m=l[3]);const{t:v}=(0,A.Bd)(),{token:x}=p.A.useToken(),{isDarkMode:h}=(0,c.e)(),{mergedResourceSlots:_}=(0,s.Hv)(),[F,w]=(0,j.useState)(),[T,K]=(0,j.useState)(),[L,C]=(0,q.A)(),{toggle:I}=C,U=(0,r.CX)();let Y;l[4]===Symbol.for("react.memo_cache_sentinel")?(Y={status:(0,X.withDefault)(X.StringParam,"ALIVE"),filter:(0,X.withDefault)(X.StringParam,void 0),order:(0,X.withDefault)(X.StringParam,void 0)},l[4]=Y):Y=l[4];const[ie,ae]=(0,X.useQueryParams)(Y);let oe;l[5]===Symbol.for("react.memo_cache_sentinel")?(oe={current:1,pageSize:10},l[5]=oe):oe=l[5];const{baiPaginationOption:re,tablePaginationOption:se,setTablePaginationOption:de}=(0,d.L0)(oe);let ue;l[6]===Symbol.for("react.memo_cache_sentinel")?(ue={valuePropName:"fetchKey",trigger:"onChangeFetchKey",defaultValue:r.eI},l[6]=ue):ue=l[6];const[ce,me]=(0,W.A)(t,ue);let ve;l[7]!==re.limit||l[8]!==re.offset||l[9]!==ie.filter||l[10]!==ie.order||l[11]!==ie.status?(ve={limit:re.limit,offset:re.offset,filter:ie.filter,order:ie.order,status:ie.status},l[7]=re.limit,l[8]=re.offset,l[9]=ie.filter,l[10]=ie.order,l[11]=ie.status,l[12]=ve):ve=l[12];const ge=ve,pe=(0,j.useDeferredValue)(ge),xe=(0,j.useDeferredValue)(ce);let he;l[13]!==me?(he=()=>{me(ee)},l[13]=me,l[14]=he):he=l[14];const ye=he;let be;l[15]===Symbol.for("react.memo_cache_sentinel")?(be=i,l[15]=be):be=l[15];const _e=xe===r.eI?"store-and-network":"network-only";let fe;l[16]!==xe||l[17]!==_e?(fe={fetchKey:xe,fetchPolicy:_e},l[16]=xe,l[17]=_e,l[18]=fe):fe=l[18];const{agent_list:je}=(0,S.useLazyLoadQuery)(be,pe,fe);let Ae,Se,ke,Oe,Fe,we,Te,Ke,Le;l[19]!==v?(Ae=v("agent.Endpoint"),l[19]=v,l[20]=Ae):Ae=l[20],l[21]!==Ae?(Se=(0,k.jsxs)(k.Fragment,{children:["ID / ",Ae]}),l[21]=Ae,l[22]=Se):Se=l[22],l[23]!==h?(ke=e=>{const l=f().split(e,"/"),n=null===l||void 0===l?void 0:l[0],t=(null===l||void 0===l?void 0:l.length)>1?l[1]:"",{color:i,icon:a}={aws:{color:"orange",icon:"aws"},amazon:{color:"orange",icon:"aws"},azure:{color:"blue",icon:"azure"},gcp:{color:"lightblue",icon:"gcp"},google:{color:"lightblue",icon:"gcp"},nbp:{color:"green",icon:"nbp"},naver:{color:"green",icon:"nbp"},openstack:{color:"red",icon:"openstack"},dgx:{color:"green",icon:"local"},local:{color:"yellow",icon:"local"}}[n]||{color:"yellow",icon:"local"};return(0,k.jsxs)(b.OO,{gap:"xxs",children:[(0,k.jsx)("img",{alt:e,src:`/resources/icons/${a}.png`,style:{width:"32px",height:"32px",filter:h&&"local"===a?"invert(1)":""}}),""!==t?(0,k.jsx)($.A,{values:[{label:t,color:i},{label:n,color:i}]}):(0,k.jsx)(B.A,{color:i,children:n})]})},l[23]=h,l[24]=ke):ke=l[24],l[25]!==U||l[26]!==v?(Oe=e=>(0,k.jsxs)(b.OO,{direction:"column",children:[(0,k.jsx)(y.A.Text,{children:H()(e).format("ll LTS")}),(0,k.jsx)(N.A,{callback:()=>U.utils.elapsedTime(e,Date.now()),delay:1e3,render:e=>(0,k.jsx)($.A,{values:[{label:v("agent.Running")},{label:e}]})})]}),l[25]=U,l[26]=v,l[27]=Oe):Oe=l[27],l[28]!==_||l[29]!==x?(Fe=(e,l)=>{const n=JSON.parse((null===l||void 0===l?void 0:l.occupied_slots)||"{}"),t=JSON.parse((null===l||void 0===l?void 0:l.available_slots)||"{}");return(0,k.jsx)(b.OO,{direction:"column",gap:"xxs",children:f().map(t,((e,l)=>{if("cpu"===l){var i;const e=f().toFinite(f().toNumber(n.cpu)/f().toNumber(t.cpu)*100);return(0,k.jsxs)(b.OO,{justify:"between",style:{minWidth:220},children:[(0,k.jsxs)(b.OO,{gap:"xxs",children:[(0,k.jsx)(V.s,{type:l},l),(0,k.jsxs)(y.A.Text,{children:[(0,o.Z1)(n.cpu||0,0),"\xa0/\xa0",(0,o.Z1)(t.cpu||0,0)]}),(0,k.jsx)(y.A.Text,{type:"secondary",style:{fontSize:x.sizeXS},children:null===_||void 0===_||null===(i=_.cpu)||void 0===i?void 0:i.display_unit})]}),(0,k.jsx)(g.A,{percent:e,strokeColor:e>80?x.colorError:x.colorSuccess,width:120,valueLabel:(0,o.Z1)(e,1)+" %"})]},l)}if("mem"===l){var a,r,s,d;const e=f().toFinite(f().toNumber(n.mem)/f().toNumber(t.mem)*100);return(0,k.jsxs)(b.OO,{justify:"between",style:{minWidth:220},children:[(0,k.jsxs)(b.OO,{gap:"xxs",children:[(0,k.jsx)(V.s,{type:"mem"}),(0,k.jsxs)(y.A.Text,{children:[null!==(a=null===(r=(0,o.mv)(n.mem,"g",0))||void 0===r?void 0:r.numberFixed)&&void 0!==a?a:0,"\xa0/\xa0",null!==(s=null===(d=(0,o.mv)(t.mem,"g",0))||void 0===d?void 0:d.numberFixed)&&void 0!==s?s:0]}),(0,k.jsx)(y.A.Text,{type:"secondary",style:{fontSize:x.sizeXS},children:"GiB"})]}),(0,k.jsx)(g.A,{percent:e,strokeColor:e>80?x.colorError:x.colorSuccess,width:120,valueLabel:(0,o.Z1)(e,1)+" %"})]},"mem")}if(t[l]){var u;const e=f().toFinite(f().toNumber(n[l])/f().toNumber(t[l])*100);return(0,k.jsxs)(b.OO,{justify:"between",style:{minWidth:220},gap:"xxs",children:[(0,k.jsxs)(b.OO,{gap:"xxs",children:[(0,k.jsx)(V.s,{type:l},l),(0,k.jsxs)(y.A.Text,{children:[(0,o.Z1)(n[l]||0,2),"\xa0/\xa0",(0,o.Z1)(t[l],2)]}),(0,k.jsx)(y.A.Text,{type:"secondary",style:{fontSize:x.sizeXS},children:null===_||void 0===_||null===(u=_[l])||void 0===u?void 0:u.display_unit})]}),(0,k.jsx)(g.A,{percent:e,strokeColor:e>80?x.colorError:x.colorSuccess,width:120,valueLabel:(0,o.Z1)(e,1)+" %"})]},l)}}))})},l[28]=_,l[29]=x,l[30]=Fe):Fe=l[30],l[31]!==_||l[32]!==v?(we=(e,l)=>{const n=JSON.parse(e||"{}"),t=JSON.parse((null===l||void 0===l?void 0:l.available_slots)||"{}");if("ALIVE"===(null===l||void 0===l?void 0:l.status)){var i,a,r,s,d;const e={cpu_util:{capacity:0,current:0,ratio:0},mem_util:{capacity:0,current:0,ratio:0}};if(n&&n.node&&n.devices){const l=f().keys(n.devices.cpu_util).length;e.cpu_util.capacity=f().toFinite(n.node.cpu_util.capacity),e.cpu_util.current=f().toFinite(n.node.cpu_util.current),e.cpu_util.ratio=Math.min(f().toFinite(n.node.cpu_util.pct)/100/(l||1),1),e.mem_util.capacity=f().toInteger(t.mem||n.node.mem.capacity),e.mem_util.current=f().toInteger(n.node.mem.current),e.mem_util.ratio=e.mem_util.current/e.mem_util.capacity||0}f().forEach(f().keys(null===n||void 0===n?void 0:n.node),(l=>{["cpu_util","mem","disk","net_rx","net_tx"].includes(l)||(f().includes(l,"_util")?e[l]={capacity:f().toFinite(n.node[l].capacity)||100,current:f().toFinite(n.node[l].current),ratio:f().toFinite(n.node[l].current)/100||0}:l.includes("_mem")&&(e[l]={capacity:f().toFinite(n.node[l].capacity),current:f().toFinite(n.node[l].current),ratio:f().toFinite(n.node[l].pct)/100||0}))}));const l=(null===(i=(0,o.Ho)(f().toString(e.mem_util.capacity),"auto"))||void 0===i?void 0:i.unit)||"g";return(0,k.jsxs)(b.OO,{direction:"column",gap:"xxs",children:[(0,k.jsxs)(b.OO,{justify:"between",style:{minWidth:200,width:"100%"},children:[(0,k.jsx)(y.A.Text,{children:null===_||void 0===_||null===(a=_.cpu)||void 0===a?void 0:a.human_readable_name}),(0,k.jsx)(g.A,{percent:100*e.cpu_util.ratio,width:120,valueLabel:(0,o.Z1)(f().toFinite(100*e.cpu_util.ratio),1)+" %"})]}),(0,k.jsxs)(b.OO,{justify:"between",style:{minWidth:200,width:"100%"},children:[(0,k.jsx)(y.A.Text,{children:null===_||void 0===_||null===(r=_.mem)||void 0===r?void 0:r.human_readable_name}),(0,k.jsx)(g.A,{percent:100*e.mem_util.ratio,width:120,valueLabel:(null===(s=(0,o.mv)(f().toString(e.mem_util.current),l))||void 0===s?void 0:s.numberFixed)+" / "+(null===(d=(0,o.mv)(f().toString(e.mem_util.capacity),l))||void 0===d?void 0:d.displayValue)})]}),f().map(f().keys(null===n||void 0===n?void 0:n.node),(l=>{var t,i,a;if(!["cpu_util","mem","disk"].includes(l)){if(f().includes(l,"_util")){var r;const n=f().split(l,"_")[0]+".device";return(0,k.jsxs)(b.OO,{justify:"between",style:{minWidth:200,width:"100%"},gap:"xxs",children:[(0,k.jsxs)(y.A.Text,{children:[null===_||void 0===_||null===(r=_[n])||void 0===r?void 0:r.human_readable_name,"(util)"]}),(0,k.jsx)(g.A,{width:120,percent:e[l].current/e[l].capacity*100||0,valueLabel:f().toFinite((0,o.Z1)(100*e[l].ratio,1))+" %"})]},l)}if(f().includes(l,"_mem")){var s,d,u,c;const n=f().split(l,"_")[0]+".device",t=(null===(s=(0,o.Ho)(f().toString(e[l].capacity),"auto"))||void 0===s?void 0:s.unit)||"g";return(0,k.jsxs)(b.OO,{justify:"between",style:{minWidth:200,width:"100%"},gap:"xxs",children:[(0,k.jsxs)(y.A.Text,{children:[null===_||void 0===_||null===(d=_[n])||void 0===d?void 0:d.human_readable_name,"(mem)"]}),(0,k.jsx)(g.A,{width:120,percent:e[l].current/e[l].capacity*100||0,valueLabel:(null===(u=(0,o.mv)(f().toString(e[l].current),t))||void 0===u?void 0:u.numberFixed)+" / "+(null===(c=(0,o.mv)(f().toString(e[l].capacity),t))||void 0===c?void 0:c.displayValue)})]},l)}if(f().includes(l,"_power")){var m,v;const e=f().split(l,"_").slice(0,-1).join("-")+".device",t=null===_||void 0===_||null===(m=_[e])||void 0===m?void 0:m.human_readable_name;return(0,k.jsxs)(b.OO,{justify:"between",style:{minWidth:200,width:"100%"},gap:"xxs",children:[(0,k.jsx)(b.mQ,{children:`${t}(power)`}),(0,k.jsx)(b.mQ,{children:`${(0,o.Z1)(null===(v=n.node[l])||void 0===v?void 0:v.current,2)} ${n.node[l].unit_hint}`})]},l)}if(f().includes(l,"_temperature")){var p,x;const e=f().split(l,"_").slice(0,-1).join("_")+".device",t=null===_||void 0===_||null===(p=_[e])||void 0===p?void 0:p.human_readable_name;return(0,k.jsxs)(b.OO,{justify:"between",style:{minWidth:200,width:"100%"},gap:"xxs",children:[(0,k.jsx)(b.mQ,{children:`${t}(temp)`}),(0,k.jsx)(b.mQ,{children:`${(0,o.Z1)(null===(x=n.node[l])||void 0===x?void 0:x.current,2)} \xb0C`})]},l)}if(f().includes(["net_rx","net_tx"],l)){var h,j,A;const e=(0,o.Gh)(null===(h=n.node[l])||void 0===h?void 0:h.current,"auto");return(0,k.jsxs)(b.OO,{justify:"between",style:{minWidth:200,width:"100%"},gap:"xxs",children:[(0,k.jsx)(b.mQ,{children:"net_rx"===l?"Net Rx":"Net Tx"}),(0,k.jsx)(b.mQ,{children:`${null!==(j=null===e||void 0===e?void 0:e.numberFixed)&&void 0!==j?j:0} ${null!==(A=null===e||void 0===e?void 0:e.unit.toUpperCase())&&void 0!==A?A:""}bps`})]},l)}return(0,k.jsxs)(b.OO,{justify:"between",style:{minWidth:200,width:"100%"},gap:"xxs",children:[(0,k.jsx)(b.mQ,{children:l}),(0,k.jsx)(b.mQ,{children:`${(0,o.Z1)(null!==(t=null===(i=n.node[l])||void 0===i?void 0:i.current)&&void 0!==t?t:0,2)}${null!==(a=n.node[l])&&void 0!==a&&a.unit_hint?` ${n.node[l].unit_hint}`:""}`})]},l)}}))]})}return v("agent.NoAvailableLiveStat")},l[31]=_,l[32]=v,l[33]=we):we=l[33],l[34]!==x?(Te=(e,l)=>{var n,t,i,a,r,s;const d=null!==(n=null===(t=JSON.parse((null===l||void 0===l?void 0:l.live_stat)||"{}"))||void 0===t||null===(i=t.node)||void 0===i?void 0:i.disk)&&void 0!==n?n:{},u=f().toFinite(d.pct)||0,c=f().toFinite((0,o.Z1)(u,2)),m=c>80?x.colorError:x.colorSuccess,v=(null===(a=(0,o.Ho)(null===d||void 0===d?void 0:d.capacity,"auto",{base:1e3}))||void 0===a?void 0:a.unit)||"g";return(0,k.jsxs)(b.OO,{direction:"column",children:[(0,k.jsx)(g.A,{valueLabel:(0,o.Z1)(c,1)+" %",percent:c,strokeColor:m,width:120}),(0,k.jsxs)(y.A.Text,{style:{fontSize:x.fontSizeSM},children:[null===(r=(0,o.Gh)(null===d||void 0===d?void 0:d.current,v))||void 0===r?void 0:r.numberFixed,"\xa0/\xa0",null===(s=(0,o.Gh)(null===d||void 0===d?void 0:d.capacity,v))||void 0===s?void 0:s.displayValue]})]})},l[34]=x,l[35]=Te):Te=l[35],l[36]!==x?(Ke=e=>(0,k.jsx)(b.OO,{justify:"center",children:!0===e?(0,k.jsx)(R.A,{style:{color:x.colorSuccess,fontSize:x.fontSizeXL}}):(0,k.jsx)(P.A,{style:{color:x.colorTextDisabled,fontSize:x.fontSizeXL}})}),l[36]=x,l[37]=Ke):Ke=l[37],l[38]!==x?(Le=(e,l)=>(0,k.jsxs)(b.OO,{children:[(0,k.jsx)(G.Ay,{style:{color:x.colorSuccess},type:"text",icon:(0,k.jsx)(E.A,{}),onClick:()=>w(l)}),(0,k.jsx)(G.Ay,{style:{color:x.colorInfo},type:"text",icon:(0,k.jsx)(Z.A,{}),onClick:()=>K(l)})]}),l[38]=x,l[39]=Le):Le=l[39];const Ce=[{title:Se,key:"id",dataIndex:"id",fixed:"left",render:le,sorter:!0},{title:v("agent.Region"),key:"region",dataIndex:"region",render:ke},{title:v("agent.Architecture"),key:"architecture",dataIndex:"architecture"},{title:v("agent.Starts"),key:"first_contact",dataIndex:"first_contact",render:Oe,sorter:!0},{title:v("agent.Allocation"),key:"allocation",render:Fe},{title:v("agent.Utilization"),key:"live_stat",dataIndex:"live_stat",render:we},{title:v("agent.DiskPerc"),key:"disk_perc",render:Te},{title:v("general.ResourceGroup"),key:"resource_group",dataIndex:"scaling_group",sorter:!0},{title:v("agent.Status"),key:"status",dataIndex:"status",render:ne},{title:v("agent.Schedulable"),key:"schedulable",dataIndex:"schedulable",render:Ke,sorter:!0},{title:v("general.Control"),key:"control",fixed:"right",render:Le}],[Ie,De]=(0,u.a)("AgentList");let Ne,Me,$e,Ve,ze,Re,Pe,Ee,Ze,Qe,qe,We,Be,Ge,Je,Ue,He,Xe,Ye,el,ll,nl,tl;l[40]===Symbol.for("react.memo_cache_sentinel")?(Ne={flex:1},l[40]=Ne):Ne=l[40],l[41]!==v?(Me=v("agent.Connected"),l[41]=v,l[42]=Me):Me=l[42],l[43]!==Me?($e={label:Me,value:"ALIVE"},l[43]=Me,l[44]=$e):$e=l[44],l[45]!==v?(Ve=v("agent.Terminated"),l[45]=v,l[46]=Ve):Ve=l[46],l[47]!==Ve?(ze={label:Ve,value:"TERMINATED"},l[47]=Ve,l[48]=ze):ze=l[48],l[49]!==$e||l[50]!==ze?(Re=[$e,ze],l[49]=$e,l[50]=ze,l[51]=Re):Re=l[51],l[52]!==ae?(Pe=e=>{ae({status:e.target.value},"replaceIn")},l[52]=ae,l[53]=Pe):Pe=l[53],l[54]!==ie.status||l[55]!==Re||l[56]!==Pe?(Ee=(0,k.jsx)(M.A,{options:Re,value:ie.status,onChange:Pe}),l[54]=ie.status,l[55]=Re,l[56]=Pe,l[57]=Ee):Ee=l[57],l[58]===Symbol.for("react.memo_cache_sentinel")?(Ze={key:"id",propertyLabel:"ID",type:"string"},l[58]=Ze):Ze=l[58],l[59]!==v?(Qe=v("agent.Endpoint"),l[59]=v,l[60]=Qe):Qe=l[60],l[61]!==Qe?(qe={key:"addr",propertyLabel:Qe,type:"string"},l[61]=Qe,l[62]=qe):qe=l[62],l[63]!==v?(We=v("agent.Schedulable"),l[63]=v,l[64]=We):We=l[64],l[65]!==v?(Be=v("general.Enabled"),l[65]=v,l[66]=Be):Be=l[66],l[67]!==Be?(Ge={label:Be,value:"true"},l[67]=Be,l[68]=Ge):Ge=l[68],l[69]!==v?(Je=v("general.Disabled"),l[69]=v,l[70]=Je):Je=l[70],l[71]!==Je?(Ue={label:Je,value:"false"},l[71]=Je,l[72]=Ue):Ue=l[72],l[73]!==Ge||l[74]!==Ue?(He=[Ge,Ue],l[73]=Ge,l[74]=Ue,l[75]=He):He=l[75],l[76]!==We||l[77]!==He?(Xe={key:"schedulable",propertyLabel:We,type:"boolean",options:He},l[76]=We,l[77]=He,l[78]=Xe):Xe=l[78],l[79]!==qe||l[80]!==Xe?(Ye=[Ze,qe,Xe],l[79]=qe,l[80]=Xe,l[81]=Ye):Ye=l[81],l[82]!==ae?(el=e=>{ae({filter:e},"replaceIn")},l[82]=ae,l[83]=el):el=l[83],l[84]!==ie.filter||l[85]!==Ye||l[86]!==el?(ll=(0,k.jsx)(b.Af,{filterProperties:Ye,value:ie.filter,onChange:el}),l[84]=ie.filter,l[85]=Ye,l[86]=el,l[87]=ll):ll=l[87],l[88]!==Ee||l[89]!==ll?(nl=(0,k.jsxs)(b.OO,{direction:"row",gap:"sm",align:"start",style:Ne,wrap:"wrap",children:[Ee,ll]}),l[88]=Ee,l[89]=ll,l[90]=nl):nl=l[90],l[91]!==v?(tl=v("button.Refresh"),l[91]=v,l[92]=tl):tl=l[92];const il=xe!==ce;let al,ol,rl,sl,dl;l[93]!==ye?(al=()=>ye(),l[93]=ye,l[94]=al):al=l[94],l[95]===Symbol.for("react.memo_cache_sentinel")?(ol=(0,k.jsx)(Q.A,{}),l[95]=ol):ol=l[95],l[96]!==il||l[97]!==al?(rl=(0,k.jsx)(G.Ay,{loading:il,onClick:al,icon:ol}),l[96]=il,l[97]=al,l[98]=rl):rl=l[98],l[99]!==tl||l[100]!==rl?(sl=(0,k.jsx)(b.OO,{gap:"xs",children:(0,k.jsx)(J.A,{title:tl,children:rl})}),l[99]=tl,l[100]=rl,l[101]=sl):sl=l[101],l[102]!==n||l[103]!==nl||l[104]!==sl?(dl=(0,k.jsxs)(b.OO,{justify:"between",align:"start",wrap:"wrap",...n,children:[nl,sl]}),l[102]=n,l[103]=nl,l[104]=sl,l[105]=dl):dl=l[105];const ul=b.zx;let cl;l[106]===Symbol.for("react.memo_cache_sentinel")?(cl={x:"max-content"},l[106]=cl):cl=l[106];const ml=null===je||void 0===je?void 0:je.items;let vl;l[107]!==ml?(vl=(0,b.f)(ml),l[107]=ml,l[108]=vl):vl=l[108];let gl;l[109]!==Ie?(gl=e=>!f().includes(Ie,f().toString(null===e||void 0===e?void 0:e.key)),l[109]=Ie,l[110]=gl):gl=l[110];const pl=f().filter(Ce,gl),xl=null===je||void 0===je?void 0:je.total_count;let hl,yl,bl,_l;l[111]===Symbol.for("react.memo_cache_sentinel")?(hl=(0,k.jsx)(Z.A,{}),l[111]=hl):hl=l[111],l[112]!==I?(yl=(0,k.jsx)(G.Ay,{type:"text",icon:hl,onClick:()=>{I()}}),l[112]=I,l[113]=yl):yl=l[113],l[114]!==de||l[115]!==xl||l[116]!==yl||l[117]!==se.current||l[118]!==se.pageSize?(bl={pageSize:se.pageSize,total:xl,current:se.current,extraContent:yl,onChange(e,l){f().isNumber(e)&&f().isNumber(l)&&de({current:e,pageSize:l})}},l[114]=de,l[115]=xl,l[116]=yl,l[117]=se.current,l[118]=se.pageSize,l[119]=bl):bl=l[119],l[120]!==ae?(_l=e=>{ae({order:e},"replaceIn")},l[120]=ae,l[121]=_l):_l=l[121];const fl=pe!==ge||xe!==ce;let jl;l[122]!==ul||l[123]!==cl||l[124]!==vl||l[125]!==pl||l[126]!==bl||l[127]!==_l||l[128]!==fl||l[129]!==m?(jl=(0,k.jsx)(ul,{size:"small",scroll:cl,rowKey:"id",dataSource:vl,showSorterTooltip:false,columns:pl,resizable:!0,pagination:bl,onChangeOrder:_l,loading:fl,...m}),l[122]=ul,l[123]=cl,l[124]=vl,l[125]=pl,l[126]=bl,l[127]=_l,l[128]=fl,l[129]=m,l[130]=jl):jl=l[130];const Al=!!F;let Sl,kl;l[131]===Symbol.for("react.memo_cache_sentinel")?(Sl=()=>w(null),l[131]=Sl):Sl=l[131],l[132]!==F||l[133]!==Al?(kl=(0,k.jsx)(O,{agentDetailModalFrgmt:F,open:Al,onRequestClose:Sl}),l[132]=F,l[133]=Al,l[134]=kl):kl=l[134];const Ol=!!T;let Fl,wl;return l[135]!==ye?(Fl=e=>{e&&ye(),K(null)},l[135]=ye,l[136]=Fl):Fl=l[136],l[137]!==T||l[138]!==Ol||l[139]!==Fl?(wl=(0,k.jsx)(D,{agentSettingModalFrgmt:T,open:Ol,onRequestClose:Fl}),l[137]=T,l[138]=Ol,l[139]=Fl,l[140]=wl):wl=l[140],(0,k.jsxs)(b.OO,{direction:"column",align:"stretch",gap:"sm",children:[dl,jl,kl,wl,(0,k.jsx)(z.A,{open:L,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&De(f().difference(Ce.map(te),null===e||void 0===e?void 0:e.selectedColumnKeys)),I()},columns:Ce,hiddenColumnKeys:Ie})]})};function ee(){return(new Date).toISOString()}function le(e,l){return(0,k.jsxs)(b.OO,{direction:"column",align:"start",children:[(0,k.jsx)(y.A.Text,{children:e}),(0,k.jsx)(y.A.Text,{type:"secondary",children:null===l||void 0===l?void 0:l.addr})]})}function ne(e,l){var n,t,i;const a=JSON.parse((null===l||void 0===l?void 0:l.compute_plugins)||"{}"),o=JSON.parse((null===l||void 0===l?void 0:l.available_slots)||"{}");return(0,k.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"start",children:[(0,k.jsx)($.A,{values:[{label:"Agent"},{label:(null===l||void 0===l?void 0:l.version)||"",color:"ALIVE"===e?"green":"TERMINATED"===e?"red":"blue"}]}),null!==a&&void 0!==a&&a.cuda?(0,k.jsxs)(k.Fragment,{children:[null!==a&&void 0!==a&&null!==(n=a.cuda)&&void 0!==n&&n.cuda_version?(0,k.jsx)($.A,{values:[{label:"CUDA"},{label:null===a||void 0===a||null===(t=a.cuda)||void 0===t?void 0:t.cuda_version,color:"green"}]}):(0,k.jsx)(B.A,{color:"green",children:"CUDA Disabled"}),(0,k.jsx)($.A,{values:[{label:"CUDA Plugin"},{label:null===a||void 0===a||null===(i=a.cuda)||void 0===i?void 0:i.version,color:"blue"}]}),f().includes(f().keys(o),"cuda.shares")?(0,k.jsx)(B.A,{color:"blue",children:"Fractional GPU\u2122"}):null]}):null]})}function te(e){return f().toString(e.key)}},46668:(e,l,n)=>{n.d(l,{A:()=>g});var t=n(83525),i=n(234),a=n(40370),o=n(73017),r=n(17707),s=n(45045),d=n(43749),u=n.n(d),c=n(21481),m=n(51569),v=n(66845);const g=e=>{var l;let{open:n,onRequestClose:d,columns:g,hiddenColumnKeys:p,...x}=e;const h=(0,c.useRef)(null),{t:y}=(0,m.Bd)(),{token:b}=i.A.useToken(),_=u().map(g,(e=>{return"string"===typeof e.title?{label:e.title,value:u().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(l=e.title,c.Children.map(l.props.children,(e=>{if("string"===typeof e)return e}))),value:u().toString(e.key)}:{label:void 0,value:u().toString(e.key)};var l}));return(0,v.jsx)(s.Ib,{title:y("table.SettingTable"),open:n,destroyOnHidden:!0,centered:!0,onOk:()=>{var e;null===(e=h.current)||void 0===e||e.validateFields().then((e=>{d(e)})).catch((()=>{}))},onCancel:()=>{d()},...x,children:(0,v.jsxs)(a.A,{ref:h,preserve:!1,initialValues:{selectedColumnKeys:null===(l=u().map(_,"value"))||void 0===l?void 0:l.filter((e=>!u().includes(p,e)))},layout:"vertical",children:[(0,v.jsx)(a.A.Item,{name:"searchInput",label:y("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,v.jsx)(o.A,{prefix:(0,v.jsx)(t.A,{}),style:{marginBottom:b.marginSM},placeholder:y("table.SearchTableColumn")})}),(0,v.jsx)(a.A.Item,{noStyle:!0,shouldUpdate:(e,l)=>e.searchInput!==l.searchInput,children:e=>{let{getFieldValue:l}=e;const n=l("searchInput")?u().toLower(l("searchInput")):void 0,t=u().map(_,(e=>u().toLower(u().toString(e.label)).includes(n||"")?e:{...e,style:{display:"none"}}));return(0,v.jsx)(a.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},rules:[{required:!0,message:y("general.validation.PleaseSelectOptions")}],children:(0,v.jsx)(r.A.Group,{options:t,style:{flexDirection:"column"}})})}})]})})}},9587:(e,l,n)=>{n.d(l,{a:()=>i});var t=n(497);const i=e=>{const[l,n]=(0,t.q)(`hiddenColumnKeys.${e}`);return[l,n]}}}]);
//# sourceMappingURL=337.c02c3fa5.chunk.js.map