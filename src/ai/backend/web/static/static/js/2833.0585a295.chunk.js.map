{"version":3,"file":"static/js/2833.0585a295.chunk.js","mappings":"0NAKA,MAAMA,EAAgCC,EAAAA,MACpC,IAAM,kCAwBR,EArB4CC,KAC1C,MAAOC,EAAkBC,IAAuBC,EAAAA,EAAAA,eAC9C,aACAC,EAAAA,cAEI,MAAEC,IAAUC,EAAAA,EAAAA,KAElB,OACEC,EAAAA,EAAAA,KAACC,EAAAA,EAAiB,CAAAC,UAChBF,EAAAA,EAAAA,KAACT,EAA6B,CAC5BY,KAA2B,SAArBT,EACNU,eAAiBC,IACVA,GAAqB,IAAVP,GACdH,EAAoB,KAAM,YAC5B,KAGc,C,kDCCxB,MA0DA,EA1DiEW,IAE1D,IAF2D,SAChEJ,GACDI,EAEC,MAAMC,EAAef,EAAAA,SAAegB,KAAKN,GACnCO,EAAcF,EAAaG,MAAMP,MAGhCQ,EAASC,IAAcC,EAAAA,EAAAA,UAASJ,GAUvC,IAPAK,EAAAA,EAAAA,kBAAgB,KACVL,GACFG,GAAW,EACb,GACC,CAACH,KAGCE,EACH,OAAO,KAIT,MAAMI,EAAqBR,EAAaG,MAAMM,WAYxCC,EAA0BV,EAAaG,MAAMQ,gBAoBnD,OAPoB1B,EAAAA,aAAmBe,EAAc,CAEnDS,WAxBsD,WAClDD,GACFA,KAAmBI,WAGrBP,GAAW,EACb,EAoBEM,gBAfkEf,IAC9Dc,GACFA,EAAwBd,GAGrBA,GACHS,GAAW,EACb,GAWgB,C","sources":["components/FolderInvitationResponseModalOpener.tsx","components/UnmountAfterClose.tsx"],"sourcesContent":["import { useVFolderInvitationsValue } from '../hooks/useVFolderInvitations';\nimport UnmountAfterClose from './UnmountAfterClose';\nimport React from 'react';\nimport { useQueryParam, StringParam } from 'use-query-params';\n\nconst FolderInvitationResponseModal = React.lazy(\n  () => import('./FolderInvitationResponseModal'),\n);\n\nconst FolderInvitationResponseModalOpener = () => {\n  const [isInvitationOpen, setIsInvitationOpen] = useQueryParam(\n    'invitation',\n    StringParam,\n  );\n  const { count } = useVFolderInvitationsValue();\n\n  return (\n    <UnmountAfterClose>\n      <FolderInvitationResponseModal\n        open={isInvitationOpen === 'true'}\n        onRequestClose={(success) => {\n          if (!success || count === 1) {\n            setIsInvitationOpen(null, 'replaceIn');\n          }\n        }}\n      />\n    </UnmountAfterClose>\n  );\n};\n\nexport default FolderInvitationResponseModalOpener;\n","import { BAIModalProps } from './BAIModal';\nimport { DrawerProps, ModalProps } from 'antd';\nimport React, { useState, useLayoutEffect } from 'react';\n\ninterface UnmountModalAfterCloseProps {\n  children: React.ReactElement<BAIModalProps> | React.ReactElement<ModalProps>;\n}\n\n/**\n * A React component that conditionally unmounts its child modal or drawer component\n * after it has been closed, preserving exit animations.\n *\n * This component expects a single child element (such as a Modal or Drawer) with an `open` prop.\n * It manages an internal mount state to ensure the child remains mounted during exit animations,\n * and only unmounts after the close animation completes.\n *\n * The component intercepts the child's `afterClose` (for Modal) and `afterOpenChange` (for Drawer)\n * callbacks to update its internal state, while preserving any original callbacks provided.\n *\n * @param {UnmountModalAfterCloseProps} props - The props containing a single child element.\n * @returns {React.ReactElement | null} The cloned child element with enhanced unmounting logic, or null if unmounted.\n *\n * @example\n * <UnmountAfterClose>\n *   <Modal open={isOpen} afterClose={handleAfterClose} />\n * </UnmountAfterClose>\n */\nconst UnmountAfterClose: React.FC<UnmountModalAfterCloseProps> = ({\n  children,\n}) => {\n  // Ensure there is only one child element\n  const modalElement = React.Children.only(children);\n  const isModalOpen = modalElement.props.open;\n\n  // Manage internal rendering state\n  const [isMount, setIsMount] = useState(isModalOpen);\n\n  // Update internal state when the child's open prop becomes true\n  useLayoutEffect(() => {\n    if (isModalOpen) {\n      setIsMount(true);\n    }\n  }, [isModalOpen]);\n\n  // Return null if the modal should not be rendered\n  if (!isMount) {\n    return null;\n  }\n\n  // Preserve the original afterClose callback if it exists\n  const originalAfterClose = modalElement.props.afterClose;\n\n  // New handler to intercept afterClose\n  const handleModalAfterClose: ModalProps['afterClose'] = (...args) => {\n    if (originalAfterClose) {\n      originalAfterClose(...args);\n    }\n    // Set internal state to false after the exit animation completes\n    setIsMount(false);\n  };\n\n  // Preserve the original afterOpenChange callback if it exists\n  const originalAfterOpenChange = modalElement.props.afterOpenChange;\n  // New handler to intercept afterOpenChange\n  const handleModalAfterOpenChange: DrawerProps['afterOpenChange'] = (open) => {\n    if (originalAfterOpenChange) {\n      originalAfterOpenChange(open);\n    }\n    // Set internal state to false after the exit animation completes\n    if (!open) {\n      setIsMount(false);\n    }\n  };\n\n  // Clone the child element, keeping the open prop and replacing afterClose with the new handler\n  const clonedChild = React.cloneElement(modalElement, {\n    // for Modal\n    afterClose: handleModalAfterClose,\n    // for Drawer\n    afterOpenChange: handleModalAfterOpenChange,\n  });\n\n  return clonedChild;\n};\n\nexport default UnmountAfterClose;\n"],"names":["FolderInvitationResponseModal","React","FolderInvitationResponseModalOpener","isInvitationOpen","setIsInvitationOpen","useQueryParam","StringParam","count","useVFolderInvitationsValue","_jsx","UnmountAfterClose","children","open","onRequestClose","success","_ref","modalElement","only","isModalOpen","props","isMount","setIsMount","useState","useLayoutEffect","originalAfterClose","afterClose","originalAfterOpenChange","afterOpenChange","arguments"],"sourceRoot":""}