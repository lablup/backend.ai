"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[8006],{7064:(e,t,s)=>{s.d(t,{A:()=>U});var n,i=s(56276),o=s(11863),r=s(7871),l=s(39120),a=s(89353),c=s(84423),u=s(76591),d=s(96223),g=s(42286),p=s(78428),h=s(82609),m=s(30782),x=s(31035),y=s(84791),v=s(67631),b=s(84765),k=s(47699),j=s.n(k),S=s(17534),_=s(89374);const f=(0,y.rU)((e=>{let{css:t}=e;return{baiSettingItemCheckbox:t(n||(n=(0,r.A)(["\n    .ant-checkbox {\n      align-self: flex-start;\n      margin-top: 0.2rem;\n    }\n  "])))}})),A=e=>{const t=(0,l.c)(71),{"data-testid":s,type:n,title:o,description:r,children:y,defaultValue:k,value:A,onChange:w,onReset:T,selectProps:P,checkboxProps:C,showResetButton:O}=e,F=void 0===O||O,{token:I}=u.A.useToken(),{styles:R}=f(),[D,B]=(0,S.useState)(!1),[M,E]=(0,c.A)(!1),{toggle:U}=E;let N,V,q,L,G,W,z,H,X,J,K,Y,Q,Z,$,ee,te,se,ne,ie,oe;if(t[0]!==(null===C||void 0===C?void 0:C.disabled)||t[1]!==k||t[2]!==w||t[3]!==T||t[4]!==(null===P||void 0===P?void 0:P.disabled)||t[5]!==n){let e;t[8]!==k||t[9]!==w||t[10]!==T?(e=()=>{T?T():N&&w&&w(k)},t[8]=k,t[9]=w,t[10]=T,t[11]=e):e=t[11],V=e,N="select"===n&&!(null!==P&&void 0!==P&&P.disabled)||"checkbox"===n&&!(null!==C&&void 0!==C&&C.disabled)||"custom"===n,t[0]=null===C||void 0===C?void 0:C.disabled,t[1]=k,t[2]=w,t[3]=T,t[4]=null===P||void 0===P?void 0:P.disabled,t[5]=n,t[6]=N,t[7]=V}else N=t[6],V=t[7];return t[12]===Symbol.for("react.memo_cache_sentinel")?(q=()=>B(!0),L=()=>B(!1),t[12]=q,t[13]=L):(q=t[12],L=t[13]),t[14]!==I.fontSize?(G={fontSize:I.fontSize},t[14]=I.fontSize,t[15]=G):G=t[15],t[16]!==G||t[17]!==o?(W=(0,_.jsx)(d.A.Text,{strong:!0,style:G,children:o}),t[16]=G,t[17]=o,t[18]=W):W=t[18],t[19]!==k||t[20]!==N||t[21]!==A?(z=N&&void 0!==A&&null!==A&&k!==A&&(0,_.jsx)(g.A,{dot:!0,status:"warning"}),t[19]=k,t[20]=N,t[21]=A,t[22]=z):z=t[22],t[23]!==D||t[24]!==N||t[25]!==U||t[26]!==F?(H=N&&F&&(0,_.jsx)(p.A,{menu:{items:[{key:"reset",label:(0,b.t)("button.Reset"),onClick:()=>U(),danger:!0}]},placement:"topLeft",onOpenChange:e=>e&&B(!0),children:(0,_.jsx)(v.Fv,{icon:(0,_.jsx)(a.A,{}),type:"text",style:{width:20,height:20,opacity:D?1:0,transition:"opacity 0.2s ease-in-out"}})}),t[23]=D,t[24]=N,t[25]=U,t[26]=F,t[27]=H):H=t[27],t[28]!==W||t[29]!==z||t[30]!==H?(X=(0,_.jsx)(v.OO,{direction:"row",gap:"xxs",children:(0,_.jsxs)(v.OO,{gap:"xxs",align:"start",children:[W,z,H]})}),t[28]=W,t[29]=z,t[30]=H,t[31]=X):X=t[31],t[32]!==y||t[33]!==r||t[34]!==n?(J="custom"===n&&(0,_.jsxs)(v.OO,{direction:"column",gap:"xs",align:"start",style:{width:"100%"},children:[r,y]}),t[32]=y,t[33]=r,t[34]=n,t[35]=J):J=t[35],t[36]!==C||t[37]!==r||t[38]!==w||t[39]!==R||t[40]!==n||t[41]!==A?(K="checkbox"===n&&(0,_.jsx)(h.A,(0,i.A)((0,i.A)({className:R.baiSettingItemCheckbox,checked:A,onChange:e=>{null===w||void 0===w||w(e.target.checked)}},C),{},{children:(0,_.jsx)(d.A.Text,{type:null!==C&&void 0!==C&&C.disabled?"secondary":void 0,children:r})})),t[36]=C,t[37]=r,t[38]=w,t[39]=R,t[40]=n,t[41]=A,t[42]=K):K=t[42],t[43]!==r||t[44]!==w||t[45]!==P||t[46]!==I.marginXS||t[47]!==n||t[48]!==A?(Y="select"===n&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(d.A.Text,{type:null!==P&&void 0!==P&&P.disabled?"secondary":void 0,children:r}),(0,_.jsx)(m.A,(0,i.A)({value:A,popupMatchSelectWidth:!1,onChange:e=>{null===w||void 0===w||w(e)},style:(0,i.A)({marginTop:I.marginXS},null===P||void 0===P?void 0:P.style)},j().omit(P,["style"])))]}),t[43]=r,t[44]=w,t[45]=P,t[46]=I.marginXS,t[47]=n,t[48]=A,t[49]=Y):Y=t[49],t[50]===Symbol.for("react.memo_cache_sentinel")?(Q=(0,b.t)("dialog.ask.DoYouWantToResetChanges"),Z=(0,b.t)("button.Reset"),$={danger:!0},t[50]=Q,t[51]=Z,t[52]=$):(Q=t[50],Z=t[51],$=t[52]),t[53]!==V||t[54]!==U?(ee=()=>{V(),U()},t[53]=V,t[54]=U,t[55]=ee):ee=t[55],t[56]===Symbol.for("react.memo_cache_sentinel")?(te=(0,b.t)("button.Cancel"),t[56]=te):te=t[56],t[57]!==U?(se=()=>U(),t[57]=U,t[58]=se):se=t[58],t[59]===Symbol.for("react.memo_cache_sentinel")?(ne=(0,_.jsx)(x.A,{showIcon:!0,message:(0,b.t)("dialog.warning.CannotBeUndone"),type:"warning"}),t[59]=ne):ne=t[59],t[60]!==M||t[61]!==ee||t[62]!==se?(ie=(0,_.jsx)(v.Ib,{open:M,title:Q,okText:Z,okButtonProps:$,onOk:ee,cancelText:te,onCancel:se,children:ne}),t[60]=M,t[61]=ee,t[62]=se,t[63]=ie):ie=t[63],t[64]!==s||t[65]!==J||t[66]!==K||t[67]!==Y||t[68]!==ie||t[69]!==X?(oe=(0,_.jsxs)(v.OO,{"data-testid":s,direction:"column",align:"start",gap:"xxs",onMouseEnter:q,onMouseLeave:L,children:[X,J,K,Y,ie]}),t[64]=s,t[65]=J,t[66]=K,t[67]=Y,t[68]=ie,t[69]=X,t[70]=oe):oe=t[70],oe};var w=s(9157),T=s(21153),P=s(72245),C=s(90711),O=s(39763),F=s(73635),I=s(62962);const R=["group","hideEmpty"];var D;const B=(0,y.rU)((e=>{let{css:t}=e;return{TabStyles:t(D||(D=(0,r.A)(["\n    .ant-tabs-tab-active {\n      font-weight: var(--token-fontWeightSuperStrong, 700);\n    }\n    .ant-typography-secondary {\n      font-weight: normal !important;\n    }\n  "])))}})),M=e=>{let{title:t,count:s}=e;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(d.A.Text,{children:t}),(0,_.jsx)(d.A.Text,{type:"secondary",children:" (".concat(s,")")})]})},E=e=>{let{group:t,hideEmpty:s=!0}=e,n=(0,o.A)(e,R);const{token:r}=u.A.useToken();return(!s||0!==t.settingItems.length)&&(0,_.jsxs)(v.OO,(0,i.A)((0,i.A)({direction:"column",align:"stretch",style:{marginBottom:r.marginMD}},n),{},{children:[(0,_.jsxs)(v.OO,{direction:"column",align:"stretch",style:{zIndex:1,marginBottom:r.marginMD,background:r.colorBgContainer},children:[(0,_.jsx)(v.OO,{align:"start",justify:"between",children:(0,_.jsxs)(v.OO,{gap:"sm",align:"start",children:[(0,_.jsx)(d.A.Title,{level:5,style:{marginTop:0},children:t.title}),t.titleExtra&&(0,_.jsx)("div",{children:t.titleExtra})]})}),(0,_.jsx)(P.A,{style:{marginTop:0,marginBottom:0}}),t.description&&(0,_.jsx)(d.A.Text,{type:"secondary",style:{marginTop:r.marginSM},children:t.description})]}),(0,_.jsxs)(v.OO,{direction:"column",align:"stretch",gap:"lg",children:[t.alert,t.settingItems.map(((e,t)=>(0,_.jsx)(A,(0,i.A)({},e),e.title+t)))]})]}))},U=e=>{const t=(0,l.c)(96),{settingGroups:s,tabDirection:n,showChangedOptionFilter:o,showResetButton:r,showSearchBar:a,primaryButton:u,extraButton:d}=e,g=void 0===n?"left":n,{t:p}=(0,I.Bd)(),{styles:m}=B(),[y,b]=(0,S.useState)(""),[k,f]=(0,S.useState)(!1),[A,P]=(0,c.A)(!1),{toggle:R}=P,[D,U]=(0,S.useState)("all");let G;t[0]!==y?(G=e=>e.title.toLowerCase().includes(y.toLowerCase())||"string"===typeof e.description&&e.description.toLowerCase().includes(y.toLowerCase()),t[0]=y,t[1]=G):G=t[1];const W=G,z=V;let H,X,J,K,Y,Q,Z,$,ee,te,se,ne,ie,oe,re,le,ae,ce,ue,de,ge,pe,he,me;if(t[2]!==D||t[3]!==k||t[4]!==d||t[5]!==u||t[6]!==y||t[7]!==W||t[8]!==R||t[9]!==s||t[10]!==o||t[11]!==r||t[12]!==a||t[13]!==m.TabStyles||t[14]!==p||t[15]!==g){let e;t[28]!==k||t[29]!==W?(e=e=>(0,i.A)((0,i.A)({},e),{},{settingItems:j().filter(e.settingItems,(e=>(!k||z(e))&&W(e)))}),t[28]=k,t[29]=W,t[30]=e):e=t[30];const n=j().map(s,e);let l,c,x,S,A;X=v.OO,J="column",K="md",Y="stretch",t[31]!==y||t[32]!==a||t[33]!==p?(l=!!a&&(0,_.jsx)(C.A,{prefix:(0,_.jsx)(w.A,{}),placeholder:p("settings.SearchPlaceholder"),onChange:e=>b(e.target.value),value:y}),t[31]=y,t[32]=a,t[33]=p,t[34]=l):l=t[34],t[35]!==o||t[36]!==p?(c=!!o&&(0,_.jsx)(h.A,{onChange:e=>f(e.target.checked),style:{whiteSpace:"nowrap"},children:p("settings.ShowOnlyChanged")}),t[35]=o,t[36]=p,t[37]=c):c=t[37],t[38]!==R||t[39]!==r||t[40]!==p?(x=!!r&&(0,_.jsx)(v.Fv,{danger:!0,icon:(0,_.jsx)(T.A,{}),onClick:()=>R(),children:p("button.Reset")}),t[38]=R,t[39]=r,t[40]=p,t[41]=x):x=t[41],t[42]!==d||t[43]!==u||t[44]!==l||t[45]!==c||t[46]!==x?(Q=(0,_.jsxs)(v.OO,{justify:"start",gap:"xs",children:[l,c,d,x,u]}),t[42]=d,t[43]=u,t[44]=l,t[45]=c,t[46]=x,t[47]=Q):Q=t[47],H=O.A,Z=D,$=U,ee=m.TabStyles,te=g?"left":"top",t[48]===Symbol.for("react.memo_cache_sentinel")?(se={minWidth:200},t[48]=se):se=t[48],t[49]!==p?(S=p("general.All"),t[49]=p,t[50]=S):S=t[50],t[51]!==R||t[52]!==p?(A=(e,t)=>({key:"index".concat(t),label:(0,_.jsx)(M,{title:e.title,count:e.settingItems.length}),children:(0,_.jsx)(v.OO,{direction:"column",align:"stretch",gap:"xl",children:e.settingItems.length>0?(0,_.jsx)(E,{group:e,hideEmpty:!0,onReset:()=>{R()}}):(0,_.jsx)(F.A,{image:F.A.PRESENTED_IMAGE_SIMPLE,description:p("settings.NoChangesToDisplay")})})}),t[51]=R,t[52]=p,t[53]=A):A=t[53],ne=[{key:"all",label:(0,_.jsx)(M,{title:S,count:j().sumBy(n,q)}),children:(0,_.jsx)(v.OO,{direction:"column",align:"stretch",gap:"xl",children:j().sumBy(n,L)>0?j().map(n,(e=>(0,_.jsx)(E,{"data-testid":null===e||void 0===e?void 0:e["data-testid"],group:e,hideEmpty:!0,onReset:()=>{R()}},e.title))):(0,_.jsx)(F.A,{image:F.A.PRESENTED_IMAGE_SIMPLE,description:p("settings.NoChangesToDisplay")})})},...j().map(n,A)],t[2]=D,t[3]=k,t[4]=d,t[5]=u,t[6]=y,t[7]=W,t[8]=R,t[9]=s,t[10]=o,t[11]=r,t[12]=a,t[13]=m.TabStyles,t[14]=p,t[15]=g,t[16]=H,t[17]=X,t[18]=J,t[19]=K,t[20]=Y,t[21]=Q,t[22]=Z,t[23]=$,t[24]=ee,t[25]=te,t[26]=se,t[27]=ne}else H=t[16],X=t[17],J=t[18],K=t[19],Y=t[20],Q=t[21],Z=t[22],$=t[23],ee=t[24],te=t[25],se=t[26],ne=t[27];return t[54]!==H||t[55]!==Z||t[56]!==$||t[57]!==ee||t[58]!==te||t[59]!==se||t[60]!==ne?(ie=(0,_.jsx)(H,{activeKey:Z,onChange:$,className:ee,tabPosition:te,tabBarStyle:se,items:ne}),t[54]=H,t[55]=Z,t[56]=$,t[57]=ee,t[58]=te,t[59]=se,t[60]=ne,t[61]=ie):ie=t[61],t[62]!==X||t[63]!==J||t[64]!==K||t[65]!==Y||t[66]!==Q||t[67]!==ie?(oe=(0,_.jsxs)(X,{direction:J,gap:K,align:Y,children:[Q,ie]}),t[62]=X,t[63]=J,t[64]=K,t[65]=Y,t[66]=Q,t[67]=ie,t[68]=oe):oe=t[68],t[69]!==p?(re=p("dialog.ask.DoYouWantToResetChanges"),t[69]=p,t[70]=re):re=t[70],t[71]!==p?(le=p("button.Reset"),t[71]=p,t[72]=le):le=t[72],t[73]===Symbol.for("react.memo_cache_sentinel")?(ae={danger:!0},t[73]=ae):ae=t[73],t[74]!==R||t[75]!==s?(ce=()=>{N(s),R()},t[74]=R,t[75]=s,t[76]=ce):ce=t[76],t[77]!==p?(ue=p("button.Cancel"),t[77]=p,t[78]=ue):ue=t[78],t[79]!==R?(de=()=>R(),t[79]=R,t[80]=de):de=t[80],t[81]!==p?(ge=p("dialog.warning.CannotBeUndone"),t[81]=p,t[82]=ge):ge=t[82],t[83]!==ge?(pe=(0,_.jsx)(x.A,{showIcon:!0,message:ge,type:"warning"}),t[83]=ge,t[84]=pe):pe=t[84],t[85]!==A||t[86]!==re||t[87]!==le||t[88]!==ce||t[89]!==ue||t[90]!==de||t[91]!==pe?(he=(0,_.jsx)(v.Ib,{open:A,title:re,okText:le,okButtonProps:ae,onOk:ce,cancelText:ue,onCancel:de,children:pe}),t[85]=A,t[86]=re,t[87]=le,t[88]=ce,t[89]=ue,t[90]=de,t[91]=pe,t[92]=he):he=t[92],t[93]!==oe||t[94]!==he?(me=(0,_.jsxs)(_.Fragment,{children:[oe,he]}),t[93]=oe,t[94]=he,t[95]=me):me=t[95],me},N=e=>{j().flatMap(e,(e=>e.settingItems)).forEach((e=>{var t,s,n;e.onReset?e.onReset():(null===e||void 0===e||null===(t=e.selectProps)||void 0===t||!t.disabled)&&(null===e||void 0===e||null===(s=e.checkboxProps)||void 0===s||!s.disabled)&&(null===e||void 0===e||null===(n=e.onChange)||void 0===n||n.call(e,e.defaultValue))}))};function V(e){var t,s;return!(null===e.value||void 0===e.value||null!==e&&void 0!==e&&null!==(t=e.selectProps)&&void 0!==t&&t.disabled||null!==e&&void 0!==e&&null!==(s=e.checkboxProps)&&void 0!==s&&s.disabled)&&e.value!==e.defaultValue}function q(e){return e.settingItems.length}function L(e){return e.settingItems.length}},58006:(e,t,s)=>{s.r(t),s.d(t,{default:()=>J});var n=s(56276),i=s(40690),o=s(62378),r=s(64018),l=s(66597),a=s(94010),c=s(93853),u=s(82609),d=s(67631),g=s(17534),p=s(62962),h=s(89374);const m=e=>{let{onRequestClose:t,open:s}=e;const{t:n}=(0,p.Bd)(),{message:m}=l.A.useApp(),x=(0,g.useRef)(null),[y,v]=(0,g.useState)(!1),b=(0,i.CX)(),{isFetching:k}=(0,o.nN)({queryKey:["mtu"],queryFn:async()=>{var e;const{result:t}=await b.setting.get("network/overlay/mtu");return null===(e=x.current)||void 0===e||e.setFieldsValue({mtu:t,mtu_checkbox:null===t||void 0===t||""===t}),t},enabled:s});return(0,h.jsx)(d.Ib,{open:s,title:(0,h.jsxs)(d.OO,{gap:"xxs",children:[n("settings.OverlayNetworkSettings"),(0,h.jsx)(r.A,{title:n("settings.OverlayNetworkSettingsDescription")})]}),onCancel:t,confirmLoading:y,centered:!0,width:"auto",okText:n("button.Save"),onOk:()=>{x.current&&x.current.validateFields().then((async e=>{try{if(e.mtu_checkbox){v(!0);const{result:e}=await b.setting.delete("network/overlay/mtu",!0);if("ok"!==e)throw new Error;m.success(n("notification.SuccessfullyUpdated")),t()}else{v(!0);const{result:s}=await b.setting.set("network/overlay/mtu",e.mtu);if("ok"!==s)throw new Error;m.success(n("notification.SuccessfullyUpdated")),t()}}catch(i){var s;m.error(null!==(s=null===i||void 0===i?void 0:i.message)&&void 0!==s?s:n("settings.FailedToSaveSettings"))}finally{v(!1)}})).catch((()=>{}))},cancelText:n("button.Cancel"),destroyOnHidden:!0,children:(0,h.jsx)(a.A,{ref:x,layout:"vertical",children:(0,h.jsx)(a.A.Item,{label:"MTU",tooltip:n("settings.MTUDescription"),required:!0,children:(0,h.jsxs)(d.OO,{gap:"sm",align:"center",children:[(0,h.jsx)(a.A.Item,{noStyle:!0,dependencies:["mtu_checkbox"],children:()=>{var e;return(0,h.jsx)(a.A.Item,{noStyle:!0,name:"mtu",rules:[{validator:(e,t)=>{var s;return!0===(null===(s=x.current)||void 0===s?void 0:s.getFieldValue("mtu_checkbox"))?Promise.resolve():void 0===t||null===t?Promise.reject(n("data.explorer.ValueRequired")):Promise.resolve()}}],children:(0,h.jsx)(c.A,{style:{flex:1},min:0,max:15e3,disabled:!0===(null===(e=x.current)||void 0===e?void 0:e.getFieldValue("mtu_checkbox"))||k})})}}),(0,h.jsx)(a.A.Item,{noStyle:!0,name:"mtu_checkbox",valuePropName:"checked",children:(0,h.jsx)(u.A,{disabled:k,onChange:e=>{var t;e.target.checked&&(null===(t=x.current)||void 0===t||t.setFieldsValue({mtu:null}))},children:n("settings.Unset")})})]})})})})};var x=s(76591),y=s(96223),v=s(30782),b=s(15589);const k=e=>{let{onRequestClose:t,open:s}=e;const{t:n}=(0,p.Bd)(),[o,u]=(0,g.useState)(!1),[m,k]=(0,g.useState)(!1),j=(0,g.useRef)(null),{token:S}=x.A.useToken(),_=(0,i.CX)(),{message:f}=l.A.useApp();return(0,h.jsx)(d.Ib,{title:(0,h.jsxs)(d.OO,{align:"center",gap:"xxs",children:[n("settings.ConfigPerJobSchduler"),(0,h.jsx)(r.A,{title:n("settings.ConfigPerJobSchdulerDescription")})]}),confirmLoading:o,open:s,centered:!0,width:"auto",onCancel:t,onOk:()=>{j.current&&j.current.validateFields().then((async e=>{const s=e.schedulerType,i=e.num_retries_to_skip;try{if(e.num_retries_to_skip_checkbox){u(!0);const{result:e}=await _.setting.delete("plugins/scheduler/".concat(s,"/num_retries_to_skip"),!0);if("ok"!==e)throw new Error;f.success(n("notification.SuccessfullyUpdated")),t()}else{if("fifo"!==s&&"0"!==i)throw new Error(n("settings.FifoOnly"));u(!0);const{result:e}=await _.setting.set("plugins/scheduler/".concat(s,"/num_retries_to_skip"),i);if("ok"!==e)throw new Error;f.success(n("notification.SuccessfullyUpdated")),t()}}catch(r){var o;f.error(null!==(o=null===r||void 0===r?void 0:r.message)&&void 0!==o?o:n("settings.FailedToSaveSettings"))}finally{u(!1)}})).catch((()=>{}))},cancelText:n("button.Cancel"),okText:n("button.Save"),okButtonProps:{type:"primary"},destroyOnHidden:!0,children:(0,h.jsxs)(a.A,{ref:j,layout:"vertical",children:[(0,h.jsx)(a.A.Item,{label:n("settings.Scheduler"),name:"schedulerType",required:!0,rules:[{required:!0,message:n("settings.SchedulerRequired")}],extra:(0,h.jsx)(y.A.Text,{type:"secondary",style:{fontSize:S.fontSizeSM},children:n("settings.SchedulerSelectComment")}),children:(0,h.jsx)(v.A,{loading:m,popupMatchSelectWidth:!1,onChange:e=>{null!==e&&(k(!0),_.setting.get("plugins/scheduler/".concat(e,"/num_retries_to_skip")).then((e=>{var t;null===(t=j.current)||void 0===t||t.setFieldsValue({num_retries_to_skip:e.result,num_retries_to_skip_checkbox:null===e.result})})).finally((()=>{k(!1)})))},options:[{label:"FIFO",value:"fifo"},{label:"LIFO",value:"lifo"},{label:"DRF",value:"drf"}]})}),(0,h.jsxs)(d.OO,{direction:"column",align:"start",style:{width:"100%"},children:[(0,h.jsx)(y.A.Text,{strong:!0,children:n("settings.SchedulerOptions")}),(0,h.jsx)(a.A.Item,{label:n("settings.SessionCreationRetries"),required:!0,style:{width:"100%"},children:(0,h.jsxs)(d.OO,{gap:"sm",align:"center",style:{width:"100%"},children:[(0,h.jsx)(a.A.Item,{noStyle:!0,dependencies:["schedulerType","num_retries_to_skip_checkbox"],style:{width:"100%"},children:()=>{var e,t;return(0,h.jsx)(a.A.Item,{noStyle:!0,name:"num_retries_to_skip",rules:[{validator:(e,t)=>{var s;return!0===(null===(s=j.current)||void 0===s?void 0:s.getFieldValue("num_retries_to_skip_checkbox"))?Promise.resolve():void 0===t||null===t?Promise.reject(n("data.explorer.ValueRequired")):Promise.resolve()}}],children:(0,h.jsx)(c.A,{min:0,max:1e3,disabled:!0===(null===(e=j.current)||void 0===e?void 0:e.getFieldValue("num_retries_to_skip_checkbox"))||void 0===(null===(t=j.current)||void 0===t?void 0:t.getFieldValue("schedulerType"))||m,style:{flex:1}})})}}),(0,h.jsx)(a.A.Item,{noStyle:!0,dependencies:["schedulerType"],children:()=>{var e;return(0,h.jsx)(a.A.Item,{noStyle:!0,name:"num_retries_to_skip_checkbox",valuePropName:"checked",children:(0,h.jsx)(b.A,{disabled:void 0===(null===(e=j.current)||void 0===e?void 0:e.getFieldValue("schedulerType"))||m,onChange:e=>{var t;e.target.checked&&(null===(t=j.current)||void 0===t||t.setFieldsValue({num_retries_to_skip:null}))},children:n("settings.Unset")})})}})]})})]})]})})};var j=s(7064),S=s(89353),_=s(84423),f=s(8343),A=s(31035);const w={image_pulling_behavior:"digest",cuda_gpu:!1,cuda_fgpu:!1,rocm_gpu:!1,tpu:!1,ipu:!1,atom:!1,atom_plus:!1,atom_max:!1,gaudi2:!1,warboy:!1,rngd:!1,hyperaccel_lpu:!1,schedulerType:"fifo",scheduler:{num_retries_to_skip:"0"},network:{mtu:""}},T={"cuda.device":"cuda_gpu","cuda.shares":"cuda_fgpu","rocm.device":"rocm_gpu","tpu.device":"tpu","ipu.device":"ipu","atom.device":"atom","atom-plus.device":"atom_plus","atom-max.device":"atom_max","warboy.device":"warboy","rngd.device":"rngd","hyperaccel-lpu.device":"hyperaccel_lpu"},P=()=>{const{t:e}=(0,p.Bd)(),[t,{toggle:s}]=(0,_.A)(!1),[o,{toggle:r}]=(0,_.A)(!1),[a,c]=(0,g.useState)((0,n.A)({},w)),u=(0,i.CX)(),{message:d}=l.A.useApp(),x=async()=>{const{result:e}=await u.setting.get("docker/image/auto_pull");c(null===e||"digest"===e?e=>(0,n.A)((0,n.A)({},e),{},{image_pulling_behavior:"digest"}):"tag"===e?e=>(0,n.A)((0,n.A)({},e),{},{image_pulling_behavior:"tag"}):e=>(0,n.A)((0,n.A)({},e),{},{image_pulling_behavior:"none"}))};(0,g.useEffect)((()=>{Promise.all([x(),u.get_resource_slots().then((e=>{c((t=>(0,n.A)((0,n.A)({},t),Object.fromEntries(Object.keys(T).map((t=>[T[t],t in e]))))))}))])}),[]);const y=[{"data-testid":"settings-general",title:e("settings.General"),settingItems:[{type:"select",title:e("settings.ImagePullBehavior"),description:e("settings.DescImagePullBehavior"),selectProps:{options:[{label:e("settings.image.Digest"),value:"digest"},{label:e("settings.image.Tag"),value:"tag"},{label:e("settings.image.None"),value:"none"}]},defaultValue:w.image_pulling_behavior,value:a.image_pulling_behavior,onChange:t=>(async t=>{if(t!==a.image_pulling_behavior)try{const{result:s}=await u.setting.set("docker/image/auto_pull",t);"ok"===s?(x(),d.success(e("notification.SuccessfullyUpdated"))):d.error(e("settings.FailedToSaveSettings"))}catch(s){d.error(e("settings.FailedToSaveSettings"))}})(t)},{type:"custom",title:e("settings.OverlayNetwork"),description:e("settings.OverlayNetworkConfiguration"),children:(0,h.jsx)(f.Ay,{icon:(0,h.jsx)(S.A,{}),onClick:s,children:e("settings.Config")})},{type:"custom",title:e("settings.Scheduler"),description:e("settings.SchedulerConfiguration"),children:(0,h.jsx)(f.Ay,{icon:(0,h.jsx)(S.A,{}),onClick:r,children:e("settings.Config")})}]},{"data-testid":"settings-plugins",title:e("settings.Plugins"),description:(0,h.jsx)(A.A,{message:e("settings.NoteAboutFixedSetup"),type:"info",showIcon:!0}),settingItems:[{type:"checkbox",title:e("settings.OpenSourceCudaGPUSupport"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescCudaGPUSupport")," ",a.cuda_fgpu&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("br",{}),e("settings.CUDAGPUdisabledByFGPUsupport")]})]}),value:a.cuda_gpu,defaultValue:w.cuda_gpu,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.ROCMGPUSupport"),description:e("settings.DescRocmGPUSupport"),value:a.rocm_gpu,defaultValue:w.rocm_gpu,checkboxProps:{disabled:!0}}]},{"data-testid":"settings-enterprise",title:e("settings.EnterpriseFeatures"),description:(0,h.jsx)(A.A,{message:e("settings.NoteAboutFixedSetup"),type:"info",showIcon:!0}),settingItems:[{type:"checkbox",title:e("settings.FractionalGPU"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescFractionalGPU"),(0,h.jsx)("br",{}),e("settings.RequireFGPUPlugin")]}),value:a.cuda_fgpu,defaultValue:w.cuda_fgpu,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.TPU"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescTPU"),(0,h.jsx)("br",{}),e("settings.RequireTPUPlugin")]}),value:a.tpu,defaultValue:w.tpu,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.IPUSupport"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescIPUSupport"),(0,h.jsx)("br",{}),e("settings.RequireTPUPlugin")]}),value:a.ipu,defaultValue:w.ipu,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.ATOMSupport"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescATOMSupport"),(0,h.jsx)("br",{}),e("settings.RequireATOMPlugin")]}),value:a.atom,defaultValue:w.atom,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.ATOMPlusSupport"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescATOMPlusSupport"),(0,h.jsx)("br",{}),e("settings.RequireATOMPlusPlugin")]}),value:a.atom_plus,defaultValue:w.atom_plus,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.ATOMMaxSupport"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescATOMMaxSupport"),(0,h.jsx)("br",{}),e("settings.RequireATOMMaxPlugin")]}),value:a.atom_max,defaultValue:w.atom_max,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.Gaudi2Support"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescGaudi2Support"),(0,h.jsx)("br",{}),e("settings.RequireGaudi2Plugin")]}),value:a.gaudi2,defaultValue:w.gaudi2,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.WarboySupport"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescWarboySupport"),(0,h.jsx)("br",{}),e("settings.RequireWarboyPlugin")]}),value:a.warboy,defaultValue:w.warboy,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.RNGDSupport"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescRNGDSupport"),(0,h.jsx)("br",{}),e("settings.RequireRNGDPlugin")]}),value:a.rngd,defaultValue:w.rngd,checkboxProps:{disabled:!0}},{type:"checkbox",title:e("settings.HyperaccelLPUSupport"),description:(0,h.jsxs)(h.Fragment,{children:[e("settings.DescHyperaccelLPUSupport"),(0,h.jsx)("br",{}),e("settings.RequireHyperaccelLPUPlugin")]}),value:a.hyperaccel_lpu,defaultValue:w.hyperaccel_lpu,checkboxProps:{disabled:!0}}]}];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(j.A,{settingGroups:y,showSearchBar:!0,showChangedOptionFilter:!0}),(0,h.jsx)(m,{onRequestClose:s,open:t}),(0,h.jsx)(k,{onRequestClose:r,open:o})]})};var C=s(25899),O=s(99901),F=s(30332),I=s(69362),R=s(41442),D=s(39120),B=s(80365),M=s(33651),E=s(96677),U=s(47699),N=s.n(U),V=s(34772),q=s(10979);const L=e=>{const t=(0,D.c)(47),{tokenName:s}=e,{t:i}=(0,p.Bd)(),{token:o}=x.A.useToken(),[r,l]=(0,q.q)("custom_theme_config"),a=(0,V.M)();let c;var u;t[0]!==a||t[1]!==s||t[2]!==r?(c=null===(u=N().get(r,"light.".concat(s))||N().get(a,"light.".concat(s)))||void 0===u?void 0:u.toString(),t[0]=a,t[1]=s,t[2]=r,t[3]=c):c=t[3];const g=c;let m;var y;t[4]!==a||t[5]!==s||t[6]!==r?(m=null===(y=N().get(r,"dark.".concat(s))||N().get(a,"dark.".concat(s)))||void 0===y?void 0:y.toString(),t[4]=a,t[5]=s,t[6]=r,t[7]=m):m=t[7];const v=m;let b,k,j,S,_,f,A,w,T,P,C,O,F,I,R;return t[8]===Symbol.for("react.memo_cache_sentinel")?(b={alignSelf:"stretch"},t[8]=b):b=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(k=[16,4],t[9]=k):k=t[9],t[10]!==o.colorTextTertiary?(j={color:o.colorTextTertiary},t[10]=o.colorTextTertiary,t[11]=j):j=t[11],t[12]!==i?(S=i("userSettings.LightMode"),t[12]=i,t[13]=S):S=t[13],t[14]!==l||t[15]!==a||t[16]!==s||t[17]!==r?(_=e=>{const t=e.toHexString(),i=N().cloneDeep((0,n.A)((0,n.A)({},a),r));N().set(i,"light.".concat(s),t),l(i)},t[14]=l,t[15]=a,t[16]=s,t[17]=r,t[18]=_):_=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(f={minWidth:110},t[19]=f):f=t[19],t[20]!==g||t[21]!==_?(A=(0,h.jsx)(B.A,{format:"hex",showText:!0,value:g,onChangeComplete:_,style:f}),t[20]=g,t[21]=_,t[22]=A):A=t[22],t[23]!==j||t[24]!==S||t[25]!==A?(w=(0,h.jsx)(M.A,{xl:6,lg:24,children:(0,h.jsxs)(d.OO,{gap:"sm",style:j,wrap:"wrap",children:[S,":",A]})}),t[23]=j,t[24]=S,t[25]=A,t[26]=w):w=t[26],t[27]!==o.colorTextTertiary?(T={color:o.colorTextTertiary},t[27]=o.colorTextTertiary,t[28]=T):T=t[28],t[29]!==i?(P=i("userSettings.DarkMode"),t[29]=i,t[30]=P):P=t[30],t[31]!==l||t[32]!==a||t[33]!==s||t[34]!==r?(C=e=>{const t=e.toHexString(),i=N().cloneDeep((0,n.A)((0,n.A)({},a),r));N().set(i,"dark.".concat(s),t),l(i)},t[31]=l,t[32]=a,t[33]=s,t[34]=r,t[35]=C):C=t[35],t[36]===Symbol.for("react.memo_cache_sentinel")?(O={minWidth:110},t[36]=O):O=t[36],t[37]!==v||t[38]!==C?(F=(0,h.jsx)(B.A,{format:"hex",showText:!0,value:v,onChangeComplete:C,style:O}),t[37]=v,t[38]=C,t[39]=F):F=t[39],t[40]!==T||t[41]!==P||t[42]!==F?(I=(0,h.jsx)(M.A,{xl:6,lg:24,children:(0,h.jsxs)(d.OO,{gap:"sm",style:T,wrap:"wrap",children:[P,":",F]})}),t[40]=T,t[41]=P,t[42]=F,t[43]=I):I=t[43],t[44]!==w||t[45]!==I?(R=(0,h.jsx)(d.OO,{align:"stretch",direction:"column",style:b,children:(0,h.jsxs)(E.A,{gutter:k,children:[w,I]})}),t[44]=w,t[45]=I,t[46]=R):R=t[46],R};var G=s(41900),W=s(96016);const z=()=>{const{t:e}=(0,p.Bd)(),{message:t}=l.A.useApp(),s=(0,V.M)(),[i,o]=(0,q.q)("custom_theme_config"),r=e=>{s&&o((t=>{const i=N().cloneDeep((0,n.A)((0,n.A)({},s),t)),o=N().get(s,"light.".concat(e)),r=N().get(s,"dark.".concat(e));return N().set(i,"light.".concat(e),o),N().set(i,"dark.".concat(e),r),i}))},a=[{"data-testid":"group-theme-customization",title:e("userSettings.Theme"),titleExtra:(0,h.jsx)(d.Fv,{size:"small",action:async()=>{const e=window.open(window.location.origin,"_blank");null===e||void 0===e||e.sessionStorage.setItem("isThemePreviewMode","true"),null===e||void 0===e||e.location.reload()},children:e("userSettings.theme.Preview")}),settingItems:[{type:"custom",title:e("userSettings.theme.PrimaryColor"),description:e("userSettings.theme.PrimaryColorDesc"),children:(0,h.jsx)(L,{tokenName:"token.colorPrimary"}),onReset:()=>{r("token.colorPrimary")}},{type:"custom",title:e("userSettings.theme.HeaderBg"),description:e("userSettings.theme.HeaderBgDesc"),children:(0,h.jsx)(L,{tokenName:"components.Layout.headerBg"}),onReset:()=>{r("components.Layout.headerBg")}},{type:"custom",title:e("userSettings.theme.LinkColor"),description:e("userSettings.theme.LinkColorDesc"),children:(0,h.jsx)(L,{tokenName:"token.colorLink"}),onReset:()=>{r("token.colorLink")}},{type:"custom",title:e("userSettings.theme.InfoColor"),description:e("userSettings.theme.InfoColorDesc"),children:(0,h.jsx)(L,{tokenName:"token.colorInfo"}),onReset:()=>{r("token.colorInfo")}},{type:"custom",title:e("userSettings.theme.ErrorColor"),description:e("userSettings.theme.ErrorColorDesc"),children:(0,h.jsx)(L,{tokenName:"token.colorError"}),onReset:()=>{r("token.colorError")}},{type:"custom",title:e("userSettings.theme.SuccessColor"),description:e("userSettings.theme.SuccessColorDesc"),children:(0,h.jsx)(L,{tokenName:"token.colorSuccess"}),onReset:()=>{r("token.colorSuccess")}},{type:"custom",title:e("userSettings.theme.TextColor"),description:e("userSettings.theme.TextColorDesc"),children:(0,h.jsx)(L,{tokenName:"token.colorText"}),onReset:()=>{r("token.colorText")}}]}];return(0,h.jsxs)(d.OO,{direction:"column",gap:"md",align:"stretch",children:[(0,h.jsx)(R.A,{description:e("userSettings.theme.CustomThemeSettingAlert"),type:"warning",showIcon:!0}),(0,h.jsx)(j.A,{showSearchBar:!0,showResetButton:!0,settingGroups:a,primaryButton:(0,h.jsx)(d.Fv,{type:"primary",icon:(0,h.jsx)(G.A,{}),action:async()=>{if(N().isEmpty(i))return void t.error(e("userSettings.theme.NoChangesMade"));const s=new Blob([JSON.stringify(i,null,2)],{type:"application/json"});(0,W.WN)(s,"theme.json")},children:e("theme.button.ExportToJson")})})]})};var H=s(73233);const X=(0,H.withDefault)(H.StringParam,"configurations"),J=()=>{const{t:e}=(0,p.Bd)(),[t,s]=(0,H.useQueryParam)("tab",X),[n]=(0,C.A)("isThemePreviewMode",{defaultValue:!1});return(0,h.jsx)(O.A,{activeTabKey:t,onTabChange:e=>s(e),tabList:(0,d.YM)([{key:"configurations",tab:e("webui.menu.Configurations")},!n&&{key:"branding",tab:e("webui.menu.Branding")}]),children:(0,h.jsxs)(g.Suspense,{fallback:(0,h.jsx)(F.A,{active:!0}),children:["configurations"===t&&(0,h.jsx)(I.A,{children:(0,h.jsx)(P,{})}),"branding"===t&&(0,h.jsx)(I.A,{children:(0,h.jsx)(z,{})})]})})}}}]);
//# sourceMappingURL=8006.167dd52d.chunk.js.map