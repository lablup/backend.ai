"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[724],{5621:(e,n,t)=>{t.d(n,{A:()=>c});var l=t(29871),a=t(48713),r=t(45901),i=t.n(r),o=t(76998),s=t(23446);const c=e=>{let n,{values:t=[]}=e;return 0===t.length?null:(n=t[0]&&("string"===typeof t[0]||o.isValidElement(t[0]))?t.map((e=>({label:e,color:"blue"}))):t,(0,s.jsx)(l.A,{direction:"row",children:i().map(n,((e,t)=>(0,s.jsx)(a.A,{style:i().last(n)===e?void 0:{margin:0,marginRight:-1},color:e.color,children:e.label},t)))}))}},55256:(e,n,t)=>{t.d(n,{Ay:()=>h,Kk:()=>y,p3:()=>v,sT:()=>m,vB:()=>g});var l=t(83468),a=t(5621),r=t(29871),i=t(48713),o=t(45901),s=t.n(o),c=t(76998),d=t(23446);const u=e=>{let{image:n,...t}=e;n=n||"";const[,{getImageAliasName:r,getBaseVersion:i,tagAlias:o}]=(0,l.Gj)();return(0,d.jsx)(a.A,{values:[{label:o(r(n)),color:"blue"},{label:i(n),color:"green"}],...t})},g=e=>{let{image:n,...t}=e;n=n||"";const[,{getBaseVersion:a,tagAlias:r}]=(0,l.Gj)();return(0,d.jsx)(i.A,{color:"green",...t,children:r(a(n))})},m=e=>{let{image:n,...t}=e;n=n||"";const[,{getBaseImage:a,tagAlias:r}]=(0,l.Gj)();return(0,d.jsx)(i.A,{color:"green",...t,children:r(a(n))})},p=e=>{let{image:n,...t}=e;n=n||"";const[,{getArchitecture:a,tagAlias:r}]=(0,l.Gj)();return(0,d.jsx)(i.A,{color:"green",...t,children:r(a(n))})},y=e=>{let{image:n,...t}=e;n=n||"";const[,{getImageLang:a,tagAlias:r}]=(0,l.Gj)();return(0,d.jsx)(i.A,{color:"green",...t,children:r(a(n))})},v=e=>{let{image:n,labels:t,...o}=e;n=n||"",t=t||[];const[,{getFilteredRequirementsTags:c,getCustomTag:u,tagAlias:g}]=(0,l.Gj)();return(0,d.jsxs)(r.A,{children:[s().map(c(n),((e,n)=>(0,d.jsx)(i.A,{color:"blue",...o,children:g(e||"")},n))),(0,d.jsx)(a.A,{color:"cyan",values:[{label:"Customized",color:"cyan"},{label:u(t),color:"cyan"}],...o})]})},f=(e,n)=>{let{image:t,style:l={}}=e;return t=t||"",(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u,{image:t}),(0,d.jsx)(m,{image:t}),(0,d.jsx)(p,{image:t})]})},h=c.memo(f)},34680:(e,n,t)=>{t.d(n,{A:()=>p});var l=t(25339),a=t(62863),r=t(50840),i=t(65080),o=t(82028),s=t(87627),c=t(45901),d=t.n(c),u=t(76998),g=t(77678),m=t(23446);const p=e=>{let{open:n,onRequestClose:t,columns:c,displayedColumnKeys:p,...y}=e;const v=(0,u.useRef)(null),{t:f}=(0,g.Bd)(),{token:h}=r.A.useToken(),b=c.map((e=>{return"string"===typeof e.title?{label:e.title,value:d().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(n=e.title,u.Children.map(n.props.children,(e=>{if("string"===typeof e)return e}))),value:d().toString(e.key)}:{label:void 0,value:d().toString(e.key)};var n}));return(0,m.jsx)(l.A,{title:f("table.SettingTable"),open:n,destroyOnClose:!0,centered:!0,onOk:()=>{var e;null===(e=v.current)||void 0===e||e.validateFields().then((e=>{t(e)})).catch((()=>{}))},onCancel:()=>{t()},...y,children:(0,m.jsxs)(i.A,{ref:v,preserve:!1,initialValues:{selectedColumnKeys:p||b.map((e=>e.value))},layout:"vertical",children:[(0,m.jsx)(i.A.Item,{name:"searchInput",label:f("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,m.jsx)(o.A,{prefix:(0,m.jsx)(a.A,{}),style:{marginBottom:h.marginSM},placeholder:f("table.SearchTableColumn")})}),(0,m.jsx)(i.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>e.searchInput!==n.searchInput,children:e=>{let{getFieldValue:n}=e;const t=n("searchInput")?d().toLower(n("searchInput")):void 0,l=b.map((e=>d().toLower(d().toString(e.label)).includes(t||"")?e:{...e,style:{display:"none"}}));return(0,m.jsx)(i.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},children:(0,m.jsx)(s.A.Group,{options:l,style:{flexDirection:"column"}})})}})]})})}},21724:(e,n,t)=>{t.r(n),t.d(n,{default:()=>_});var l,a,r=t(29871),i=t(36009),o=t(55256),s=t(34680),c=t(30032),d=t(83468),u=t(97041),g=t(63718),m=t(65988),p=t(50840),y=t(12620),v=t(59065),f=t(6932),h=t(29475),b=t(14862),x=t(45901),A=t.n(x),k=t(76998),C=t(77678),j=t(3606),S=t(23446);const _=e=>{let{children:n}=e;const{t:x}=(0,C.Bd)(),{token:_}=p.A.useToken(),{message:O}=y.A.useApp(),[K,I]=(0,k.useState)(!1),[E]=(0,k.useState)("images"),[T,F]=(0,k.useTransition)(),[P,w]=(0,d.Tw)("initial-fetch"),[z,B]=(0,k.useState)(),[,{getNamespace:N,getImageLang:M,getBaseVersion:V,getBaseImage:D,getCustomTag:L,getFilteredRequirementsTags:R}]=(0,d.Gj)(),{customized_images:q}=(0,j.useLazyLoadQuery)(void 0!==l?l:l=t(38867),{},{fetchPolicy:"initial-fetch"===P?"store-and-network":"network-only",fetchKey:P}),[Q,U]=(0,j.useMutation)(void 0!==a?a:a=t(60681)),G=[{title:x("environment.Registry"),dataIndex:"registry",key:"registry",sorter:(e,n)=>null!==e&&void 0!==e&&e.registry&&null!==n&&void 0!==n&&n.registry?e.registry.localeCompare(n.registry):0},{title:x("environment.Architecture"),dataIndex:"architecture",key:"architecture",sorter:(e,n)=>null!==e&&void 0!==e&&e.architecture&&null!==n&&void 0!==n&&n.architecture?e.architecture.localeCompare(n.architecture):0},{title:x("environment.Namespace"),key:"namespace",sorter:(e,n)=>{const t=N((0,c.A_)(e)||""),l=N((0,c.A_)(n)||"");return t&&l?t.localeCompare(l):0},render:(e,n)=>(0,S.jsx)("span",{children:N((0,c.A_)(n)||"")})},{title:x("environment.Language"),key:"lang",sorter:(e,n)=>{const t=M((0,c.A_)(e)||""),l=M((0,c.A_)(n)||"");return t&&l?t.localeCompare(l):0},render:(e,n)=>(0,S.jsx)(o.Kk,{image:(0,c.A_)(n)||"",color:"green"})},{title:x("environment.Version"),key:"baseversion",sorter:(e,n)=>{const t=V((0,c.A_)(e)||""),l=V((0,c.A_)(n)||"");return t&&l?t.localeCompare(l):0},render:(e,n)=>(0,S.jsx)(o.vB,{image:(0,c.A_)(n)||"",color:"green"})},{title:x("environment.Base"),key:"baseimage",sorter:(e,n)=>{const t=D((0,c.A_)(e)||""),l=D((0,c.A_)(n)||"");return t&&l?t.localeCompare(l):0},render:(e,n)=>(0,S.jsx)(o.sT,{image:(0,c.A_)(n)||""})},{title:x("environment.Constraint"),key:"constraint",sorter:(e,n)=>{const t=e=>{const n=(0,c.A_)(e)||"",t=A().get(e,"labels",[]);return R(n).join("")+"Customized"+L(t)},l=t(e),a=t(n);return l&&a?l.localeCompare(a):0},render:(e,n)=>(0,S.jsx)(o.p3,{image:(0,c.A_)(n)||"",labels:null===n||void 0===n?void 0:n.labels})},{title:x("environment.Digest"),dataIndex:"digest",key:"digest",sorter:(e,n)=>null!==e&&void 0!==e&&e.digest&&null!==n&&void 0!==n&&n.digest?e.digest.localeCompare(n.digest):0},{title:x("general.Control"),key:"control",fixed:"right",render:(e,n)=>(0,S.jsx)(r.A,{direction:"row",align:"stretch",children:(0,S.jsx)(v.A,{title:x("dialog.ask.DoYouWantToProceed"),description:x("dialog.warning.CannotBeUndone"),okType:"danger",okText:x("button.Delete"),onConfirm:()=>{null!==n&&void 0!==n&&n.id&&(B(n.id+P),Q({variables:{id:n.id},onCompleted(e,n){var t;n?O.error(null===(t=n[0])||void 0===t?void 0:t.message):(F((()=>{w()})),O.success(x("environment.CustomizedImageSuccessfullyDeleted")))},onError(e){O.error(null===e||void 0===e?void 0:e.message)}}))},children:(0,S.jsx)(f.Ay,{type:"text",icon:(0,S.jsx)(u.A,{}),danger:!0,loading:z===(null===n||void 0===n?void 0:n.id)+P,disabled:U&&z!==(null===n||void 0===n?void 0:n.id)+P})})})}],[W,H]=(0,m.A)("backendaiwebui.MyEnvironmentPage.displayedColumnKeys",{defaultValue:G.map((e=>A().toString(e.key)))});return(0,S.jsxs)(r.A,{direction:"column",align:"stretch",gap:"xs",children:[(0,S.jsx)(r.A,{direction:"column",align:"stretch",children:(0,S.jsx)(h.A,{tabList:[{key:"images",label:x("environment.Images")}],activeTabKey:E,styles:{body:{padding:0,paddingTop:1}},children:(0,S.jsxs)(k.Suspense,{fallback:(0,S.jsx)(i.A,{}),children:[(0,S.jsx)(b.A,{loading:T,columns:G.filter((e=>null===W||void 0===W?void 0:W.includes(A().toString(e.key)))),dataSource:q,rowKey:"id",scroll:{x:"max-content"},pagination:!1}),(0,S.jsx)(r.A,{justify:"end",style:{padding:_.paddingXXS},children:(0,S.jsx)(f.Ay,{type:"text",icon:(0,S.jsx)(g.A,{}),onClick:()=>{I(!0)}})})]})})}),(0,S.jsx)(s.A,{open:K,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&H(null===e||void 0===e?void 0:e.selectedColumnKeys),I(!K)},columns:G,displayedColumnKeys:W||[]})]})}},60681:(e,n,t)=>{t.r(n),t.d(n,{default:()=>a});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],n=[{kind:"Variable",name:"image_id",variableName:"id"}],t=[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],l=[{alias:null,args:n,concreteType:"UntagImageFromRegistry",kind:"LinkedField",name:"untag_image_from_registry",plural:!1,selections:t,storageKey:null},{alias:null,args:n,concreteType:"ForgetImageById",kind:"LinkedField",name:"forget_image_by_id",plural:!1,selections:t,storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MyEnvironmentPageForgetAndUntagMutation",selections:l,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MyEnvironmentPageForgetAndUntagMutation",selections:l},params:{cacheID:"5b4f7c5bc899b115592fccdc6efe534d",id:null,metadata:{},name:"MyEnvironmentPageForgetAndUntagMutation",operationKind:"mutation",text:"mutation MyEnvironmentPageForgetAndUntagMutation(\n  $id: String!\n) {\n  untag_image_from_registry(image_id: $id) {\n    ok\n    msg\n  }\n  forget_image_by_id(image_id: $id) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="c32a5d49badf02c6b0693522e8e84c82";const a=l},38867:(e,n,t)=>{t.r(n),t.d(n,{default:()=>a});const l=function(){var e=[{alias:null,args:null,concreteType:"ImageNode",kind:"LinkedField",name:"customized_images",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"humanized_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tag",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"registry",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"digest",storageKey:null},{alias:null,args:null,concreteType:"KVPair",kind:"LinkedField",name:"labels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"supported_accelerators",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MyEnvironmentPageQuery",selections:e,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MyEnvironmentPageQuery",selections:e},params:{cacheID:"c1773ff683a165a627b1084bb7f99dfc",id:null,metadata:{},name:"MyEnvironmentPageQuery",operationKind:"query",text:"query MyEnvironmentPageQuery {\n  customized_images {\n    id\n    name\n    humanized_name\n    tag\n    registry\n    architecture\n    digest\n    labels {\n      key\n      value\n    }\n    supported_accelerators\n  }\n}\n"}}}();l.hash="239a93f593bbc6b5d31bbe53ca71e10d";const a=l},97041:(e,n,t)=>{t.d(n,{A:()=>s});var l=t(58168),a=t(76998);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var i=t(76228),o=function(e,n){return a.createElement(i.A,(0,l.A)({},e,{ref:n,icon:r}))};const s=a.forwardRef(o)},59065:(e,n,t)=>{t.d(n,{A:()=>O});var l=t(76998),a=t(58736),r=t(34156),i=t.n(r),o=t(23551),s=t(36782),c=t(19727),d=t(96556),u=t(28037),g=t(20315),m=t(47917),p=t(8357),y=t(6932),v=t(50675),f=t(29457),h=t(41271),b=t(59395),x=t(55864);const A=(0,x.OF)("Popconfirm",(e=>(e=>{const{componentCls:n,iconCls:t,antCls:l,zIndexPopup:a,colorText:r,colorWarning:i,marginXXS:o,marginXS:s,fontSize:c,fontWeightStrong:d,colorTextHeading:u}=e;return{[n]:{zIndex:a,["&".concat(l,"-popover")]:{fontSize:c},["".concat(n,"-message")]:{marginBottom:s,display:"flex",flexWrap:"nowrap",alignItems:"start",["> ".concat(n,"-message-icon ").concat(t)]:{color:i,fontSize:c,lineHeight:1,marginInlineEnd:s},["".concat(n,"-title")]:{fontWeight:d,color:u,"&:only-child":{fontWeight:"normal"}},["".concat(n,"-description")]:{marginTop:o,color:r}},["".concat(n,"-buttons")]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:s}}}}})(e)),(e=>{const{zIndexPopupBase:n}=e;return{zIndexPopup:n+60}}),{resetStyle:!1});var k=function(e,n){var t={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&n.indexOf(l)<0&&(t[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(e);a<l.length;a++)n.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(t[l[a]]=e[l[a]])}return t};const C=e=>{const{prefixCls:n,okButtonProps:t,cancelButtonProps:r,title:o,description:s,cancelText:c,okText:d,okType:g="primary",icon:b=l.createElement(a.A,null),showCancel:x=!0,close:A,onConfirm:k,onCancel:C,onPopupClick:j}=e,{getPrefixCls:S}=l.useContext(u.QO),[_]=(0,f.A)("Popconfirm",h.A.Popconfirm),O=(0,p.b)(o),K=(0,p.b)(s);return l.createElement("div",{className:"".concat(n,"-inner-content"),onClick:j},l.createElement("div",{className:"".concat(n,"-message")},b&&l.createElement("span",{className:"".concat(n,"-message-icon")},b),l.createElement("div",{className:"".concat(n,"-message-text")},O&&l.createElement("div",{className:i()("".concat(n,"-title"))},O),K&&l.createElement("div",{className:"".concat(n,"-description")},K))),l.createElement("div",{className:"".concat(n,"-buttons")},x&&l.createElement(y.Ay,Object.assign({onClick:C,size:"small"},r),c||(null===_||void 0===_?void 0:_.cancelText)),l.createElement(m.A,{buttonProps:Object.assign(Object.assign({size:"small"},(0,v.DU)(g)),t),actionFn:k,close:A,prefixCls:S("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},d||(null===_||void 0===_?void 0:_.okText))))},j=e=>{const{prefixCls:n,placement:t,className:a,style:r}=e,o=k(e,["prefixCls","placement","className","style"]),{getPrefixCls:s}=l.useContext(u.QO),c=s("popconfirm",n),[d]=A(c);return d(l.createElement(b.Ay,{placement:t,className:i()(c,a),style:r,content:l.createElement(C,Object.assign({prefixCls:c},o))}))};var S=function(e,n){var t={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&n.indexOf(l)<0&&(t[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(e);a<l.length;a++)n.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(t[l[a]]=e[l[a]])}return t};const _=l.forwardRef(((e,n)=>{var t,r;const{prefixCls:m,placement:p="top",trigger:y="click",okType:v="primary",icon:f=l.createElement(a.A,null),children:h,overlayClassName:b,onOpenChange:x,onVisibleChange:k}=e,j=S(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:_}=l.useContext(u.QO),[O,K]=(0,o.A)(!1,{value:null!==(t=e.open)&&void 0!==t?t:e.visible,defaultValue:null!==(r=e.defaultOpen)&&void 0!==r?r:e.defaultVisible}),I=(e,n)=>{K(e,!0),null===k||void 0===k||k(e),null===x||void 0===x||x(e,n)},E=_("popconfirm",m),T=i()(E,b),[F]=A(E);return F(l.createElement(g.A,Object.assign({},(0,c.A)(j,["title"]),{trigger:y,placement:p,onOpenChange:n=>{const{disabled:t=!1}=e;t||I(n)},open:O,ref:n,overlayClassName:T,content:l.createElement(C,Object.assign({okType:v,icon:f},e,{prefixCls:E,close:e=>{I(!1,e)},onConfirm:n=>{var t;return null===(t=e.onConfirm)||void 0===t?void 0:t.call(void 0,n)},onCancel:n=>{var t;I(!1,n),null===(t=e.onCancel)||void 0===t||t.call(void 0,n)}})),"data-popover-inject":!0}),(0,d.Ob)(h,{onKeyDown:e=>{var n,t;l.isValidElement(h)&&(null===(t=null===h||void 0===h?void 0:(n=h.props).onKeyDown)||void 0===t||t.call(n,e)),(e=>{e.keyCode===s.A.ESC&&O&&I(!1,e)})(e)}})))}));_._InternalPanelDoNotUseOrYouWillBeFired=j;const O=_}}]);
//# sourceMappingURL=724.2b2e6223.chunk.js.map