"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[2640],{40361:(t,e,i)=>{i.d(e,{A:()=>o});var s=i(39111),a=i(59571),n=i(70468),r=(i(1426),i(42906));const o=t=>{let{iconProps:e,...i}=t;const{token:o}=a.A.useToken();return(0,r.jsx)(n.A,{...i,children:(0,r.jsx)(s.A,{style:{color:o.colorTextTertiary,cursor:"help"},...e})})}},72640:(t,e,i)=>{i.r(e),i.d(e,{default:()=>f});var s=i(80403),a=i(16808),n=i(90840),r=i(75045),o=i(60081),l=i(32967),c=i(88616);const d=t=>{const e=(0,l.CX)();return(0,c.nj)({queryKey:["UsageHistory",e._config._userId,null===t||void 0===t?void 0:t.fetchKey],queryFn:()=>e.resources.user_stats()})};var u=i(40361),p=i(75258),y=i(14287),h=i(89762),x=i.n(h),g=i(9976),j=i(42906);const m=t=>{let{title:e,tooltipText:i,children:s}=t;return(0,j.jsx)(y.A,{type:"inner",title:(0,j.jsxs)(n.A,{gap:"xxs",children:[e,(0,j.jsx)(u.A,{title:i})]}),style:{width:"100%"},children:s})},k=t=>{let{data:e,key:i,period:s,targetUnit:a,displayUnit:n,unitType:o,isDarkMode:l}=t;const c=t=>{return"count"===o?t:"byte"===o?null!==(e=null===(i=(0,r.Is)(t.toString()+"B",a))||void 0===i?void 0:i.number)&&void 0!==e?e:0:"decimal"===o?null!==(s=null===(n=(0,r.CE)(t.toString()+"B",a))||void 0===n?void 0:n.number)&&void 0!==s?s:0:t;var e,i,s,n};return{data:e.filter(((t,i)=>e.length-("1D"===s?96:672)<=i)).map((t=>({date:x()(1e3*t.date).format("MMM DD HH:mm"),value:c(t[i].value)}))),xField:"date",yField:"value",axis:{x:{labelAutoHide:!0,tickFilter:(t,e)=>e%("1D"===s?12:48)===0},y:{title:n}},animate:{enter:{type:"growInY"}},theme:l?"dark":"light"}},D=t=>{let{period:e,fetchKey:i}=t;const{t:s}=(0,g.Bd)(),{data:a}=d({fetchKey:i}),{isDarkMode:r}=(0,o.e)();return(0,j.jsxs)(n.A,{direction:"column",align:"start",gap:"md",children:[(0,j.jsx)(m,{title:"Sessions",tooltipText:s("statistics.SessionsDesc"),children:(0,j.jsx)(p.A,{height:200,...k({data:a,key:"num_sessions",period:e,targetUnit:"count",displayUnit:"count",unitType:"count",isDarkMode:r})})}),(0,j.jsx)(m,{title:"CPU",tooltipText:s("statistics.CPUDesc"),children:(0,j.jsx)(p.A,{height:200,...k({data:a,key:"cpu_allocated",period:e,targetUnit:"count",displayUnit:"count",unitType:"count",isDarkMode:r})})}),(0,j.jsx)(m,{title:"Memory",tooltipText:s("statistics.MemoryDesc"),children:(0,j.jsx)(p.A,{height:200,...k({data:a,key:"mem_allocated",period:e,targetUnit:"G",displayUnit:"GiB",unitType:"byte",isDarkMode:r})})}),(0,j.jsx)(m,{title:"GPU",tooltipText:s("statistics.GPUDesc"),children:(0,j.jsx)(p.A,{height:200,...k({data:a,key:"gpu_allocated",period:e,targetUnit:"count",displayUnit:"count",unitType:"count",isDarkMode:r})})}),(0,j.jsx)(m,{title:"IO-Read",tooltipText:s("statistics.IOReadDesc"),children:(0,j.jsx)(p.A,{height:200,...k({data:a,key:"io_read_bytes",period:e,targetUnit:"M",displayUnit:"MiB",unitType:"decimal",isDarkMode:r})})}),(0,j.jsx)(m,{title:"IO-Write",tooltipText:s("statistics.IOWriteDesc"),children:(0,j.jsx)(p.A,{height:200,...k({data:a,key:"io_write_bytes",period:e,targetUnit:"M",displayUnit:"MiB",unitType:"decimal",isDarkMode:r})})})]})};var A=i(66327),v=i(91564),U=i(88961),T=i(89097),b=i(1426),M=i(86289);const _=(0,M.withDefault)((0,M.createEnumParam)(["1D","1W"]),"1D"),f=()=>{const[t,e]=(0,M.useQueryParam)("period",_),{t:i}=(0,g.Bd)(),[r,o]=(0,l.Tw)("first"),[c,d]=(0,b.useTransition)();let u=[{label:i("statistics.1Day"),value:"1D"},{label:i("statistics.1Week"),value:"1W"}];return(0,j.jsx)(s.A,{activeTabKey:"usageHistory",title:i("statistics.UsageHistory"),children:(0,j.jsxs)(n.A,{direction:"column",align:"stretch",gap:"md",children:[(0,j.jsx)(A.A,{showIcon:!0,message:i("statistics.UsageHistoryNote"),type:"info"}),(0,j.jsxs)(n.A,{gap:"sm",justify:"between",children:[(0,j.jsx)(v.A.Item,{label:i("statistics.SelectPeriod"),style:{marginBottom:0},children:(0,j.jsx)(U.A,{popupMatchSelectWidth:!1,options:u,value:t,onChange:t=>e(t)})}),(0,j.jsx)(a.A,{loading:c,value:r,onChange:()=>{d((()=>{o()}))}})]}),(0,j.jsx)(b.Suspense,{fallback:(0,j.jsx)(T.A,{active:!0}),children:(0,j.jsx)(D,{period:t||"1D",fetchKey:r})})]})})}}}]);
//# sourceMappingURL=2640.ef1859ab.chunk.js.map