"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[898],{61502:function(n,e,t){t.r(e),t.d(e,{default:function(){return B},useShadowRoot:function(){return j},useWebComponentInfo:function(){return Z}});var r=t(29439),i=t(74165),o=t(15861),a=t(1413);function u(n,e){var t=(0,a.Z)({},e);return function(n){for(var e,t=/(\w+)\s@\s*(\w+)\s*\(\s*(\w+)\s*:\s*(\$?\w+)\s*\)/g,i=[];null!==(e=t.exec(n));){var o=e,a=(0,r.Z)(o,5),u=a[0],l=a[1],s=a[2],c=a[3],d=a[4];i.push({fieldName:l,directive:s,argumentName:c,argumentValue:d,originFieldStr:u})}return i}(n).forEach((function(r){if("skipOnClient"===r.directive&&"if"===r.argumentName&&(n=!r.argumentValue||!0!==e[r.argumentValue.substring(1)]&&"true"!==r.argumentValue?n.replace(r.originFieldStr,r.originFieldStr.replace(/@\s*(skipOnClient)\s*\(\s*(\w+)\s*:\s*(\$?\w+)\s*\)/,"")):n.replace(r.originFieldStr,""),r.argumentValue.startsWith("$")&&2===n.split(r.argumentValue).length)){var i=r.argumentValue.substring(1),o=new RegExp(".*".concat(i,".*\n"),"g");n=n.replace(o,""),delete t[r.argumentValue.substring(1)]}})),{query:n,variables:t}}var l=t(41011);l.RelayFeatureFlags.ENABLE_RELAY_RESOLVERS=!0;var s=function(){var n=(0,o.Z)((0,i.Z)().mark((function n(e,t){var r,o,a,l,s,c;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=u(e.text||"",t),l={query:a.query,variables:a.variables},s=null===(r=globalThis.backendaiclient)||void 0===r?void 0:r.newSignedRequest("POST","/admin/gql",l),n.next=5,null===(o=globalThis.backendaiclient)||void 0===o?void 0:o._wrapWithPromise(s,!1,null,1e4,0);case 5:return c=n.sent,n.abrupt("return",c);case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();var c,d=new l.Environment({network:l.Network.create(s,void 0),store:new l.Store(new l.RecordSource)}),f=t(80382),g=t(27340),v=t(27398),h=t(49883),m=t(66670),p=t(64447),w=t(13881),b=t(4519),k=t(81748),y=t(87112),x=t(16980),P=t(51843),M=t(12674),C=t(2556),E=b.createContext(null),S=b.createContext(null),j=function(){return b.useContext(S)},Z=function(){return b.useContext(E)},T=new y.QueryClient({defaultOptions:{queries:{suspense:!0,refetchOnWindowFocus:!1,retry:!1}}});p.ZP.use(k.Db).use(w.Z).init({backend:{loadPath:"/resources/i18n/{{lng}}.json"},lng:(null===globalThis||void 0===globalThis||null===(c=globalThis.backendaioptions)||void 0===c?void 0:c.get("current_language"))||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});var F=function(){var n=(0,M.s0)();return(0,b.useLayoutEffect)((function(){var e=function(e){var t=e.detail;n(t,{replace:!0})};return document.addEventListener("react-navigate",e),function(){document.removeEventListener("react-navigate",e)}}),[n]),null},B=function(n){var e=n.children,t=n.value,i=n.styles,o=n.shadowRoot,a=n.dispatchEvent,u=(0,b.useMemo)((function(){return(0,g.Df)()}),[]),l=function(){var n,e=(0,b.useState)(null===globalThis||void 0===globalThis||null===(n=globalThis.backendaioptions)||void 0===n?void 0:n.get("current_language")),t=(0,r.Z)(e,2),i=t[0],o=t[1],a=(0,k.$G)().i18n;return(0,b.useEffect)((function(){setTimeout((function(){return null===a||void 0===a?void 0:a.changeLanguage(i)}),0)}),[]),(0,b.useEffect)((function(){var n=function(n){var e,t;o(null===n||void 0===n||null===(e=n.detail)||void 0===e?void 0:e.lang);var r=(null===n||void 0===n||null===(t=n.detail)||void 0===t?void 0:t.lang)||"en";null===a||void 0===a||a.changeLanguage(r)};return window.addEventListener("langChanged",n),function(){return window.removeEventListener("langChanged",n)}}),[a]),[i]}(),s=(0,r.Z)(l,1)[0],c=(0,f.x)(),p=(0,b.useMemo)((function(){return{value:t,dispatchEvent:a,moveTo:function(n){a("moveTo",{path:n})}}}),[t,a]);return(0,C.jsx)(C.Fragment,{children:d&&(0,C.jsx)(x.RelayEnvironmentProvider,{environment:d,children:(0,C.jsxs)(b.StrictMode,{children:[(0,C.jsxs)("style",{children:[i,".anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n.ant-table-wrapper {\n  border-radius: 8px 8px 0 0;\n  overflow: hidden;\n}\n"]}),(0,C.jsx)(y.QueryClientProvider,{client:T,children:(0,C.jsx)(S.Provider,{value:o,children:(0,C.jsx)(E.Provider,{value:p,children:(0,C.jsx)(v.ZP,{getPopupContainer:function(n){return o},locale:"ko"===s?m.Z:h.Z,theme:c,children:(0,C.jsx)(g.V9,{container:o,cache:u,children:(0,C.jsx)(b.Suspense,{fallback:"",children:(0,C.jsxs)(P.VK,{children:[(0,C.jsx)(F,{}),e]})})})})})})})]})})})}},79898:function(n,e,t){t.r(e),t.d(e,{default:function(){return M},passwordPattern:function(){return P}});var r=t(29439),i=t(43255),o=t(87760),a=t(50164),u=t(61502),l=t(99277),s=t(87462),c=t(4519),d={icon:function(n,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z",fill:n}},{tag:"path",attrs:{d:"M172.2 828.1h679.6L512 239.9 172.2 828.1zM560 720a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm-16-304v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8z",fill:e}},{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8z",fill:n}}]}},name:"warning",theme:"twotone"},f=t(9491),g=function(n,e){return c.createElement(f.Z,(0,s.Z)({},n,{ref:e,icon:d}))};var v=c.forwardRef(g),h=t(44036),m=t(42257),p=t(83842),w=t(28499),b=t(38818),k=t(12513),y=t(81748),x=t(2556),P=/^(?=.*\d)(?=.*[a-zA-Z])(?=.*[_\W]).{8,}$/,M=function(){var n,e=(0,u.useWebComponentInfo)(),t=e.value,s=e.dispatchEvent;try{n=JSON.parse(t||"")}catch(I){n={open:!1,currentPassword:"",username:"",api_endpoint:""}}var d=n,f=d.open,g=d.currentPassword,M=d.username,C=d.api_endpoint,E=h.Z.useToken().token,S=m.Z.useForm(),j=(0,r.Z)(S,1)[0],Z=(0,y.$G)().t;(0,c.useEffect)((function(){f&&j.resetFields()}),[f,j]);var T=(0,o.M)({api_endpoint:C}),F=(0,a.Y)({mutationFn:function(n){return(0,i.Lc)({method:"POST",url:"/server/update-password-no-auth",body:n,client:T})}}),B=function(){j.validateFields().then((function(n){F.mutate({username:M,current_password:g,new_password:n.newPassword},{onSuccess:function(n,e,t){s("ok",null)},onError:function(n,e,t){}})}))};return(0,x.jsx)(p.Z,{open:f,centered:!0,mask:!1,onCancel:function(){s("cancel",null)},keyboard:!1,maskClosable:!1,footer:null,width:450,destroyOnClose:!0,forceRender:!0,children:(0,x.jsxs)(l.Z,{direction:"column",justify:"start",align:"stretch",gap:"md",style:{alignSelf:"stretch",paddingTop:E.paddingMD,paddingBottom:E.paddingMD},children:[(0,x.jsxs)(w.Z.Title,{level:3,style:{margin:0},children:[(0,x.jsx)(v,{twoToneColor:E.colorWarning})," ",Z("webui.menu.PleaseChangeYourPassword")]}),Z("webui.menu.YouMushChangeYourPassword"),(0,x.jsxs)(m.Z,{form:j,layout:"vertical",initialValues:{currentPassword:g},disabled:F.isLoading,children:[(0,x.jsx)(m.Z.Item,{name:"newPassword",label:Z("webui.menu.NewPassword"),rules:[{required:!0},{pattern:P,message:Z("webui.menu.InvalidPasswordMessage").toString()},function(){return{validator:function(n,e){return g===e?Promise.reject(new Error(Z("webui.menu.NewPasswordCannotBeSame").toString())):Promise.resolve()}}}],hasFeedback:!0,children:(0,x.jsx)(b.Z.Password,{})}),(0,x.jsx)(m.Z.Item,{name:"confirm",label:Z("webui.menu.NewPasswordAgain"),dependencies:["newPassword"],hasFeedback:!0,rules:[{required:!0},function(n){var e=n.getFieldValue;return{validator:function(n,t){return t&&e("newPassword")!==t?Promise.reject(new Error(Z("environment.PasswordsDoNotMatch").toString())):Promise.resolve()}}}],children:(0,x.jsx)(b.Z.Password,{onPressEnter:B})})]}),(0,x.jsx)(k.ZP,{type:"primary",onClick:B,loading:F.isLoading,children:Z("webui.menu.Update")})]})})}},43255:function(n,e,t){t.d(e,{Cd:function(){return h},Hz:function(){return c},LD:function(){return s},Lc:function(){return a},PZ:function(){return f},Uz:function(){return d},VQ:function(){return g},We:function(){return o},XG:function(){return l},lA:function(){return v},y3:function(){return u}});var r=t(87760),i=t(2556),o=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/(<br\s*\/?>|\n)/;return n.split(e).map((function(n,t){return n.match(e)?(0,i.jsx)("br",{},t):n}))},a=function(n){var e=n.method,t=n.url,r=n.body,i=void 0===r?null:r,o=n.client,a=null===o||void 0===o?void 0:o.newSignedRequest(e,t,i,null);return null===o||void 0===o?void 0:o._wrapWithPromise(a)},u=function(){var n=(0,r.Dj)();return function(e){var t=e.method,r=e.url,i=e.body;return a({method:t,url:r,body:void 0===i?null:i,client:n})}},l=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===n)return"0 Bytes";var t=Math.pow(10,3);e=e<0?0:e;var r=Math.floor(Math.log(Math.round(n))/Math.log(t));return r=r<0?0:r,parseFloat((n/Math.pow(t,r)).toFixed(e))+" "+["Bytes","KB","MB","GB","TB","PB"][r]},s=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n)return 0;"string"===typeof n&&(n=parseInt(n));var r,i,o=Math.pow(2,10);return e=e<0||t?0:e,r=(r=Math.floor(Math.log(Math.round(n))/Math.log(o)))<0?0:r,i=t?["","Ki","Mi","Gi","Ti","Pi","Ei"]:["Bytes","KiB","MiB","GiB","TiB","PiB","EiB"],parseFloat((n/Math.pow(o,r)).toFixed(e))+" "+i[r]};var c=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=Math.pow(10,9);return Math.round(e*n)},d=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return null===n||void 0===n?arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-":n?(n/Math.pow(10,9)).toFixed(e):n};function f(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=["B","K","M","G","T","P","E"],i=n.slice(-1).toUpperCase(),o=parseFloat(n.slice(0,-1)),a=r.indexOf(i);if(-1===a||isNaN(o))throw new Error("Invalid size format");var u=o*Math.pow(1024,a),l=e?r.indexOf(e.toUpperCase()):a,s=u/Math.pow(1024,l),c=s.toFixed(t);return{number:s,numberFixed:c,unit:r[l],numberUnit:"".concat(c).concat(r[l])}}var g=function(n,e){return""===e||void 0===e?"":e.startsWith("".concat(n,":"))?e:"".concat(n,":").concat(e)},v=function(n){return n<70?"rgba(58, 178, 97, 1)":n<90?"rgb(223, 179, 23)":"#ef5350"},h=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return r=t+r>n.length?n.length:r,n.substring(0,t)+e.repeat(r)+n.substring(t+r,n.length)}},87760:function(n,e,t){t.d(e,{Dj:function(){return c},Kr:function(){return a},M:function(){return s},dS:function(){return d},qh:function(){return l},tQ:function(){return u}});var r=t(29439),i=t(4519),o=t(87112),a=function(n){return function(n){var e=(0,i.useState)(n||(new Date).toISOString()),t=(0,r.Z)(e,2),o=t[0],a=t[1];return[o,function(n){a(n||(new Date).toISOString())}]}(n)},u=function(){return c()._config.domainName},l=function(){var n=c(),e=(0,i.useState)({name:n.current_group,id:n.groupIds[n.current_group]}),t=(0,r.Z)(e,2),o=t[0],a=t[1];return(0,i.useEffect)((function(){var e=function(e){var t=e.detail;a({name:t,id:n.groupIds[t]})};return document.addEventListener("backend-ai-group-changed",e),function(){document.removeEventListener("backend-ai-group-changed",e)}})),o},s=function(n){var e=n.api_endpoint;return(0,i.useMemo)((function(){var n=new globalThis.BackendAIClientConfig("","",e,"SESSION");return new globalThis.BackendAIClient(n,"Backend.AI Console.")}),[e])},c=function(){return(0,o.useQuery)({queryKey:"backendai-client-for-suspense",queryFn:function(){return new Promise((function(n){if("undefined"!==typeof globalThis.backendaiclient&&null!==globalThis.backendaiclient&&!1!==globalThis.backendaiclient.ready)return n(globalThis.backendaiclient);document.addEventListener("backend-ai-connected",(function e(){n(globalThis.backendaiclient),document.removeEventListener("backend-ai-connected",e)}))}))},retry:!1,suspense:!0}).data},d=function(){var n=(0,o.useQuery)({queryKey:"backendai-metadata-for-suspense",queryFn:function(){return fetch("resources/image_metadata.json").then((function(n){return n.json()})).then((function(n){return n}))},suspense:!0,retry:!1}).data,e=function(n){if(!n)return{key:"",tags:[]};var e=n.split("/"),t=(e[2]||e[1]).split(":"),i=(0,r.Z)(t,2);return{key:i[0],tags:i[1].split("-")}};return[n,{getImageAliasName:function(t){var r=e(t).key;return(null===n||void 0===n?void 0:n.imageInfo[r].name)||r},getImageIcon:function(t){var r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"resources/icons/";if(!t)return"default.png";var a=e(t).key;return o+(void 0!==(null===n||void 0===n||null===(r=n.imageInfo[a])||void 0===r?void 0:r.icon)?null===n||void 0===n||null===(i=n.imageInfo[a])||void 0===i?void 0:i.icon:"default.png")},getImageTags:function(n){},getBaseVersion:function(n){return e(n).tags[0]},getBaseImage:function(n){return e(n).tags[1]},getImageMeta:e}]}},50164:function(n,e,t){t.d(e,{Y:function(){return o},h:function(){return i}});var r=t(87112),i=r.useQuery,o=r.useMutation}}]);
//# sourceMappingURL=898.ed2721d9.chunk.js.map