"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[898,711],{1502:function(n,e,t){t.r(e),t.d(e,{default:function(){return _},useShadowRoot:function(){return E},useWebComponentInfo:function(){return M}});var r=t(9439),i=t(4519),a=t(6980),o=t(7340),u=t(9002),s=t(7112),l=t(4447),c=t(1748),d=t(3881),f=t(9883),g=t(6670),v=t(4165),h=t(5861),m=t(1011),p=t(1413);function b(n,e){var t=(0,p.Z)({},e);return function(n){for(var e,t=/(\w+)\s@\s*(\w+)\s*\(\s*(\w+)\s*:\s*(\$?\w+)\s*\)/g,i=[];null!==(e=t.exec(n));){var a=e,o=(0,r.Z)(a,5),u=o[0],s=o[1],l=o[2],c=o[3],d=o[4];i.push({fieldName:s,directive:l,argumentName:c,argumentValue:d,originFieldStr:u})}return i}(n).forEach((function(r){if("skipOnClient"===r.directive&&"if"===r.argumentName&&(n=!r.argumentValue||!0!==e[r.argumentValue.substring(1)]&&"true"!==r.argumentValue?n.replace(r.originFieldStr,r.originFieldStr.replace(/@\s*(skipOnClient)\s*\(\s*(\w+)\s*:\s*(\$?\w+)\s*\)/,"")):n.replace(r.originFieldStr,""),r.argumentValue.startsWith("$")&&2===n.split(r.argumentValue).length)){var i=r.argumentValue.substring(1),a=new RegExp(".*".concat(i,".*\n"),"g");n=n.replace(a,""),delete t[r.argumentValue.substring(1)]}})),{query:n,variables:t}}m.RelayFeatureFlags.ENABLE_RELAY_RESOLVERS=!0;var w=function(){var n=(0,h.Z)((0,v.Z)().mark((function n(e,t){var r,i,a,o,u,s;return(0,v.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=b(e.text||"",t),o={query:a.query,variables:a.variables},u=null===(r=globalThis.backendaiclient)||void 0===r?void 0:r.newSignedRequest("POST","/admin/gql",o),n.next=5,null===(i=globalThis.backendaiclient)||void 0===i?void 0:i._wrapWithPromise(u,!1,null,1e4,0);case 5:return s=n.sent,n.abrupt("return",s);case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();var k,y=new m.Environment({network:m.Network.create(w,void 0),store:new m.Store(new m.RecordSource)}),x=t(382),P=t(1843),Z=t(2674),S=t(2556),j=i.createContext(null),C=i.createContext(null),E=function(){return i.useContext(C)},M=function(){return i.useContext(j)},T=new s.QueryClient({defaultOptions:{queries:{suspense:!0,refetchOnWindowFocus:!1,retry:!1}}});l.ZP.use(c.Db).use(d.Z).init({backend:{loadPath:"/resources/i18n/{{lng}}.json"},lng:(null===globalThis||void 0===globalThis||null===(k=globalThis.backendaioptions)||void 0===k?void 0:k.get("current_language"))||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});var I=function(){var n=(0,Z.s0)();return(0,i.useLayoutEffect)((function(){var e=function(e){var t=e.detail;n(t,{replace:!0})};return document.addEventListener("react-navigate",e),function(){document.removeEventListener("react-navigate",e)}}),[n]),null},_=function(n){var e=n.children,t=n.value,l=n.styles,d=n.shadowRoot,v=n.dispatchEvent,h=(0,i.useMemo)((function(){return(0,o.Df)()}),[]),m=function(){var n,e=(0,i.useState)(null===globalThis||void 0===globalThis||null===(n=globalThis.backendaioptions)||void 0===n?void 0:n.get("current_language")),t=(0,r.Z)(e,2),a=t[0],o=t[1],u=(0,c.$G)().i18n;return(0,i.useEffect)((function(){setTimeout((function(){return null===u||void 0===u?void 0:u.changeLanguage(a)}),0)}),[]),(0,i.useEffect)((function(){var n=function(n){var e,t;o(null===n||void 0===n||null===(e=n.detail)||void 0===e?void 0:e.lang);var r=(null===n||void 0===n||null===(t=n.detail)||void 0===t?void 0:t.lang)||"en";null===u||void 0===u||u.changeLanguage(r)};return window.addEventListener("langChanged",n),function(){return window.removeEventListener("langChanged",n)}}),[u]),[a]}(),p=(0,r.Z)(m,1)[0],b=(0,x.x)(),w=(0,i.useMemo)((function(){return{value:t,dispatchEvent:v,moveTo:function(n){v("moveTo",{path:n})}}}),[t,v]);return(0,S.jsx)(S.Fragment,{children:y&&(0,S.jsx)(a.RelayEnvironmentProvider,{environment:y,children:(0,S.jsxs)(i.StrictMode,{children:[(0,S.jsxs)("style",{children:[l,"\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n"]}),(0,S.jsx)(s.QueryClientProvider,{client:T,children:(0,S.jsx)(C.Provider,{value:d,children:(0,S.jsx)(j.Provider,{value:w,children:(0,S.jsx)(u.ZP,{getPopupContainer:function(n){return d},locale:"ko"===p?g.Z:f.Z,theme:b,children:(0,S.jsx)(o.V9,{container:d,cache:h,children:(0,S.jsx)(i.Suspense,{fallback:"",children:(0,S.jsxs)(P.VK,{children:[(0,S.jsx)(I,{}),e]})})})})})})})]})})})}},9277:function(n,e,t){var r=t(1413),i=t(4925),a=t(4036),o=(t(4519),t(2556)),u=["direction","wrap","justify","align","gap","style","children"];e.Z=function(n){var e=n.direction,t=void 0===e?"row":e,s=n.wrap,l=void 0===s?"nowrap":s,c=n.justify,d=void 0===c?"flex-start":c,f=n.align,g=void 0===f?"center":f,v=n.gap,h=void 0===v?0:v,m=n.style,p=n.children,b=(0,i.Z)(n,u),w=a.Z.useToken().token,k=[d,g],y=null===k||void 0===k?void 0:k.map((function(n){var e;switch(n){case"start":e="flex-start";break;case"end":e="flex-end";break;case"between":e="space-between";break;case"around":e="space-around";break;default:e=n}return e})),x=(0,r.Z)({display:"flex",flexDirection:t,flexWrap:l,justifyContent:y[0],alignItems:y[1]},m);return(0,o.jsx)("div",(0,r.Z)((0,r.Z)({style:(0,r.Z)({alignItems:"stretch",backgroundColor:"transparent",border:"0 solid black",boxSizing:"border-box",display:"flex",flexBasis:"auto",flexDirection:"column",flexShrink:0,listStyle:"none",margin:0,minHeight:0,minWidth:0,padding:0,position:"relative",textDecoration:"none",gap:"string"===typeof h?w["padding"+h.toUpperCase()]:h},x)},b),{},{children:p}))}},9898:function(n,e,t){t.r(e),t.d(e,{default:function(){return Z},passwordPattern:function(){return P}});var r=t(9439),i=t(4036),a=t(3572),o=t(3842),u=t(8499),s=t(8818),l=t(2513),c=t(1502),d=t(9277),f=t(1748),g=t(7462),v=t(4519),h={icon:function(n,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z",fill:n}},{tag:"path",attrs:{d:"M172.2 828.1h679.6L512 239.9 172.2 828.1zM560 720a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm-16-304v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8z",fill:e}},{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8z",fill:n}}]}},name:"warning",theme:"twotone"},m=t(9491),p=function(n,e){return v.createElement(m.Z,(0,g.Z)({},n,{ref:e,icon:h}))};var b=v.forwardRef(p),w=t(7760),k=t(3255),y=t(164),x=t(2556),P=/^(?=.*\d)(?=.*[a-zA-Z])(?=.*[_\W]).{8,}$/,Z=function(){var n,e=(0,c.useWebComponentInfo)(),t=e.value,g=e.dispatchEvent;try{n=JSON.parse(t||"")}catch(L){n={open:!1,currentPassword:"",username:"",api_endpoint:""}}var h=n,m=h.open,p=h.currentPassword,Z=h.username,S=h.api_endpoint,j=i.Z.useToken().token,C=a.Z.useForm(),E=(0,r.Z)(C,1)[0],M=(0,f.$G)().t;(0,v.useEffect)((function(){m&&E.resetFields()}),[m,E]);var T=(0,w.M)({api_endpoint:S}),I=(0,y.Y)({mutationFn:function(n){return(0,k.Lc)({method:"POST",url:"/server/update-password-no-auth",body:n,client:T})}}),_=function(){E.validateFields().then((function(n){I.mutate({username:Z,current_password:p,new_password:n.newPassword},{onSuccess:function(n,e,t){g("ok",null)},onError:function(n,e,t){}})}))};return(0,x.jsx)(o.Z,{open:m,centered:!0,mask:!1,onCancel:function(){g("cancel",null)},keyboard:!1,maskClosable:!1,footer:null,width:450,destroyOnClose:!0,forceRender:!0,children:(0,x.jsxs)(d.Z,{direction:"column",justify:"start",align:"stretch",gap:"md",style:{alignSelf:"stretch",paddingTop:j.paddingMD,paddingBottom:j.paddingMD},children:[(0,x.jsxs)(u.Z.Title,{level:3,style:{margin:0},children:[(0,x.jsx)(b,{twoToneColor:j.colorWarning})," ",M("webui.menu.PleaseChangeYourPassword")]}),M("webui.menu.YouMushChangeYourPassword"),(0,x.jsxs)(a.Z,{form:E,layout:"vertical",initialValues:{currentPassword:p},disabled:I.isLoading,children:[(0,x.jsx)(a.Z.Item,{name:"newPassword",label:M("webui.menu.NewPassword"),rules:[{required:!0},{pattern:P,message:M("webui.menu.InvalidPasswordMessage").toString()},function(){return{validator:function(n,e){return p===e?Promise.reject(new Error(M("webui.menu.NewPasswordCannotBeSame").toString())):Promise.resolve()}}}],hasFeedback:!0,children:(0,x.jsx)(s.Z.Password,{})}),(0,x.jsx)(a.Z.Item,{name:"confirm",label:M("webui.menu.NewPasswordAgain"),dependencies:["newPassword"],hasFeedback:!0,rules:[{required:!0},function(n){var e=n.getFieldValue;return{validator:function(n,t){return t&&e("newPassword")!==t?Promise.reject(new Error(M("environment.PasswordsDoNotMatch").toString())):Promise.resolve()}}}],children:(0,x.jsx)(s.Z.Password,{onPressEnter:_})})]}),(0,x.jsx)(l.ZP,{type:"primary",onClick:_,loading:I.isLoading,children:M("webui.menu.Update")})]})})}},3255:function(n,e,t){t.d(e,{Hz:function(){return l},Lc:function(){return o},Uz:function(){return c},VQ:function(){return d},We:function(){return a},en:function(){return s},lA:function(){return f},y3:function(){return u}});var r=t(7760),i=t(2556),a=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/(<br\s*\/?>|\n)/;return n.split(e).map((function(n,t){return n.match(e)?(0,i.jsx)("br",{},t):n}))},o=function(n){var e=n.method,t=n.url,r=n.body,i=void 0===r?null:r,a=n.client,o=null===a||void 0===a?void 0:a.newSignedRequest(e,t,i,null);return null===a||void 0===a?void 0:a._wrapWithPromise(o)},u=function(){var n=(0,r.Dj)();return function(e){var t=e.method,r=e.url,i=e.body;return o({method:t,url:r,body:void 0===i?null:i,client:n})}},s=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===n)return"0 Bytes";var t=Math.pow(10,3);e=e<0?0:e;var r=Math.floor(Math.log(Math.round(n))/Math.log(t));return r=r<0?0:r,parseFloat((n/Math.pow(t,r)).toFixed(e))+" "+["Bytes","KB","MB","GB","TB","PB"][r]},l=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=Math.pow(10,9);return Math.round(e*n)},c=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return null===n||void 0===n?arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-":n?(n/Math.pow(10,9)).toFixed(e):n},d=function(n,e){return""===e||void 0===e?"":e.startsWith("".concat(n,":"))?e:"".concat(n,":").concat(e)},f=function(n){return n<70?"rgba(58, 178, 97, 1)":n<90?"rgb(223, 179, 23)":"#ef5350"}},7760:function(n,e,t){t.d(e,{Dj:function(){return c},Kr:function(){return o},M:function(){return l},dS:function(){return d},qh:function(){return s},tQ:function(){return u}});var r=t(9439),i=t(4519),a=t(7112),o=function(n){return function(n){var e=(0,i.useState)(n||(new Date).toISOString()),t=(0,r.Z)(e,2),a=t[0],o=t[1];return[a,function(n){o(n||(new Date).toISOString())}]}(n)},u=function(){return c()._config.domainName},s=function(){var n=c(),e=(0,i.useState)({name:n.current_group,id:n.groupIds[n.current_group]}),t=(0,r.Z)(e,2),a=t[0],o=t[1];return(0,i.useEffect)((function(){var e=function(e){var t=e.detail;o({name:t,id:n.groupIds[t]})};return document.addEventListener("backend-ai-group-changed",e),function(){document.removeEventListener("backend-ai-group-changed",e)}})),a},l=function(n){var e=n.api_endpoint;return(0,i.useMemo)((function(){var n=new globalThis.BackendAIClientConfig("","",e,"SESSION");return new globalThis.BackendAIClient(n,"Backend.AI Console.")}),[e])},c=function(){return(0,a.useQuery)({queryKey:"backendai-client-for-suspense",queryFn:function(){return new Promise((function(n){if("undefined"!==typeof globalThis.backendaiclient&&null!==globalThis.backendaiclient&&!1!==globalThis.backendaiclient.ready)return n(globalThis.backendaiclient);document.addEventListener("backend-ai-connected",(function e(){n(globalThis.backendaiclient),document.removeEventListener("backend-ai-connected",e)}))}))},retry:!1,suspense:!0}).data},d=function(){var n=(0,a.useQuery)({queryKey:"backendai-metadata-for-suspense",queryFn:function(){return fetch("resources/image_metadata.json").then((function(n){return n.json()})).then((function(n){return n}))},suspense:!0,retry:!1}).data,e=function(n){if(!n)return{key:"",tags:[]};var e=n.split("/"),t=(e[2]||e[1]).split(":"),i=(0,r.Z)(t,2);return{key:i[0],tags:i[1].split("-")}};return[n,{getImageAliasName:function(t){var r=e(t).key;return(null===n||void 0===n?void 0:n.imageInfo[r].name)||r},getImageIcon:function(t){var r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"resources/icons/";if(!t)return"default.png";var o=e(t).key;return a+(void 0!==(null===n||void 0===n||null===(r=n.imageInfo[o])||void 0===r?void 0:r.icon)?null===n||void 0===n||null===(i=n.imageInfo[o])||void 0===i?void 0:i.icon:"default.png")},getImageTags:function(n){},getBaseVersion:function(n){return e(n).tags[0]},getBaseImage:function(n){return e(n).tags[1]},getImageMeta:e}]}},164:function(n,e,t){t.d(e,{Y:function(){return a},h:function(){return i}});var r=t(7112),i=r.useQuery,a=r.useMutation}}]);
//# sourceMappingURL=898.ca675731.chunk.js.map