/*! For license information please see 853.0fb18bbc.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[853],{23593:(e,n,a)=>{a.d(n,{A:()=>d});const l=function(){var e=[{alias:null,args:[{kind:"Literal",name:"is_active",value:!0}],concreteType:"Domain",kind:"LinkedField",name:"domains",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:"domains(is_active:true)"}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DomainSelectorQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"DomainSelectorQuery",selections:e},params:{cacheID:"9df762094b74dc3eb8079edfcc73765f",id:null,metadata:{},name:"DomainSelectorQuery",operationKind:"query",text:"query DomainSelectorQuery {\n  domains(is_active: true) {\n    name\n  }\n}\n"}}}();l.hash="c14d362fa40cf9a3cef5d1d71202cc5f";const r=l;var i=a(89881),o=a(43749),t=a.n(o),s=(a(21481),a(51569)),u=a(69775),c=a(66845);const d=e=>{let{onSelectDomain:n,...a}=e;const{t:l}=(0,s.Bd)(),{domains:o}=(0,u.useLazyLoadQuery)(r,{},{fetchPolicy:"store-and-network"});return(0,c.jsxs)(i.A,{onChange:(e,a)=>{null===n||void 0===n||n(a)},placeholder:l("storageHost.quotaSettings.SelectDomain"),...a,children:[t().map(o,(e=>(0,c.jsx)(i.A.Option,{domainName:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.name))),";"]})}},57898:(e,n,a)=>{a.r(n),a.d(n,{default:()=>he});var l=a(10337);const r=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteScalingGroup",kind:"LinkedField",name:"delete_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupListDeleteMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupListDeleteMutation",selections:n},params:{cacheID:"fdcd5026b9668171b8d52998b2c16c6d",id:null,metadata:{},name:"ResourceGroupListDeleteMutation",operationKind:"mutation",text:"mutation ResourceGroupListDeleteMutation(\n  $name: String!\n) {\n  delete_scaling_group(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();r.hash="40de35d5afd64c8d906e4970b10b722d";const i=r,o=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},n={defaultValue:null,kind:"LocalArgument",name:"name"},a=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"ModifyScalingGroup",kind:"LinkedField",name:"modify_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ResourceGroupListUpdateMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ResourceGroupListUpdateMutation",selections:a},params:{cacheID:"f2bb803220bb606aab5576ae85eed3c3",id:null,metadata:{},name:"ResourceGroupListUpdateMutation",operationKind:"mutation",text:"mutation ResourceGroupListUpdateMutation(\n  $name: String!\n  $input: ModifyScalingGroupInput!\n) {\n  modify_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="ac249dff8b2c9b629edb2ca40843c134";const t=o,s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"is_active"}],n=[{kind:"Variable",name:"is_active",variableName:"is_active"}],a={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"driver",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupListQuery",selections:[{alias:null,args:n,concreteType:"ScalingGroup",kind:"LinkedField",name:"scaling_groups",plural:!0,selections:[a,l,r,i,o,t,s,{args:null,kind:"FragmentSpread",name:"ResourceGroupInfoModalFragment"},{args:null,kind:"FragmentSpread",name:"ResourceGroupSettingModalFragment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupListQuery",selections:[{alias:null,args:n,concreteType:"ScalingGroup",kind:"LinkedField",name:"scaling_groups",plural:!0,selections:[a,l,r,i,o,t,s,{alias:null,args:null,kind:"ScalarField",name:"driver_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null}],storageKey:null}]},params:{cacheID:"a388cfe6011c626e8a46a241d373f0cf",id:null,metadata:{},name:"ResourceGroupListQuery",operationKind:"query",text:"query ResourceGroupListQuery(\n  $is_active: Boolean\n) {\n  scaling_groups(is_active: $is_active) {\n    name\n    description\n    is_active\n    is_public\n    driver\n    scheduler\n    wsproxy_addr\n    ...ResourceGroupInfoModalFragment\n    ...ResourceGroupSettingModalFragment\n  }\n}\n\nfragment ResourceGroupInfoModalFragment on ScalingGroup {\n  name\n  description\n  is_active\n  is_public\n  driver\n  driver_opts\n  scheduler\n  scheduler_opts\n  wsproxy_addr\n}\n\nfragment ResourceGroupSettingModalFragment on ScalingGroup {\n  name\n  description\n  is_active\n  is_public\n  wsproxy_addr\n  scheduler\n  scheduler_opts\n}\n"}}}();s.hash="73ad50968ae420ea2cd912e9fa046cf8";const u=s;var c=a(43224),d=a(87246);const m={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ResourceGroupInfoModalFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"driver",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"driver_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null}],type:"ScalingGroup",abstractKey:null,hash:"32b9c1a86a13b37cf5abb7e88f1cd969"},p=m;var g=a(13380),y=a(14343),v=a(234),x=a(77419),h=a(85829),k=a(8334),f=a(45045),b=a(43749),_=a.n(b),S=a(21481),A=a(51569),j=a(69775),G=a(66845);const F=e=>{var n,a;let{resourceGroupFrgmt:l=null,onRequestClose:r,...i}=e;const{t:o}=(0,A.Bd)(),{token:t}=v.A.useToken(),s=(0,j.useFragment)(p,l),u=(0,S.useMemo)((()=>JSON.parse((null===s||void 0===s?void 0:s.driver_opts)||"{}")),[null===s||void 0===s?void 0:s.driver_opts]),c=(0,S.useMemo)((()=>JSON.parse((null===s||void 0===s?void 0:s.scheduler_opts)||"{}")),[null===s||void 0===s?void 0:s.scheduler_opts]);return(0,G.jsxs)(f.Ib,{title:o("resourceGroup.ResourceGroupDetail"),onCancel:r,footer:null,centered:!0,...i,children:[(0,G.jsxs)(x.A,{column:1,size:"small",title:o("resourceGroup.Information"),labelStyle:{width:"50%"},children:[(0,G.jsx)(x.A.Item,{label:o("resourceGroup.Name"),children:null===s||void 0===s?void 0:s.name}),(0,G.jsx)(x.A.Item,{label:o("resourceGroup.Description"),children:(null===s||void 0===s?void 0:s.description)||"-"}),(0,G.jsx)(x.A.Item,{label:o("resourceGroup.Active"),children:null!==s&&void 0!==s&&s.is_active?(0,G.jsx)(g.A,{style:{color:t.colorSuccess}}):(0,G.jsx)(y.A,{style:{color:t.colorTextSecondary}})}),(0,G.jsx)(x.A.Item,{label:o("resourceGroup.Public"),children:null!==s&&void 0!==s&&s.is_public?(0,G.jsx)(g.A,{style:{color:t.colorSuccess}}):(0,G.jsx)(y.A,{style:{color:t.colorTextSecondary}})}),(0,G.jsx)(x.A.Item,{label:o("resourceGroup.Driver"),children:null===s||void 0===s?void 0:s.driver}),(0,G.jsx)(x.A.Item,{label:o("resourceGroup.Scheduler"),children:_().toUpper(null!==(n=null===s||void 0===s?void 0:s.scheduler)&&void 0!==n?n:"")}),(0,G.jsx)(x.A.Item,{label:o("resourceGroup.WsproxyAddress"),children:(null===s||void 0===s?void 0:s.wsproxy_addr)||"-"})]}),(0,G.jsx)("br",{}),(0,G.jsxs)(x.A,{column:1,size:"small",title:o("resourceGroup.SchedulerOptions"),labelStyle:{width:"50%"},children:[(0,G.jsx)(x.A.Item,{label:o("resourceGroup.AllowedSessionTypes"),children:(0,G.jsx)(f.OO,{wrap:"wrap",direction:"row",gap:"xs",style:{width:"100%"},children:_().map(null===c||void 0===c?void 0:c.allowed_session_types,(e=>(0,G.jsx)(h.A,{style:{margin:0},children:_().startCase(e)},e)))})}),(0,G.jsx)(x.A.Item,{label:o("resourceGroup.PendingTimeout"),children:_().isNil(null===c||void 0===c?void 0:c.pending_timeout)?"-":(0,G.jsxs)(f.OO,{gap:"xxs",align:"end",children:[(0,G.jsx)(k.A.Text,{children:`${c.pending_timeout}\n                ${o("resourceGroup.TimeoutSeconds")}`}),null!==c&&void 0!==c&&c.pending_timeout?null:(0,G.jsx)(k.A.Text,{style:{color:t.colorTextSecondary,fontSize:t.fontSizeSM},children:`(${o("general.Disabled")})`})]})}),(0,G.jsx)(x.A.Item,{label:o("resourceGroup.RetriesToSkipDesc"),children:null!==c&&void 0!==c&&null!==(a=c.config)&&void 0!==a&&a.num_retries_to_skip?`${c.config.num_retries_to_skip} ${o("resourceGroup.RetriesToSkip")}`:"-"})]}),_().isEmpty(u)?null:(0,G.jsx)(x.A,{column:1,size:"small",title:o("resourceGroup.DriverOptions"),labelStyle:{width:"50%"},children:_().map(u,((e,n)=>(0,G.jsx)(x.A.Item,{label:_().startCase(n),children:_().isArray(e)?(0,G.jsx)(f.OO,{direction:"column",children:_().map(e,(e=>(0,G.jsx)(h.A,{children:e},e)))}):e},n)))})]})},K=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"domain"},{defaultValue:null,kind:"LocalArgument",name:"scaling_group"}],n=[{alias:null,args:[{kind:"Variable",name:"domain",variableName:"domain"},{kind:"Variable",name:"scaling_group",variableName:"scaling_group"}],concreteType:"AssociateScalingGroupWithDomain",kind:"LinkedField",name:"associate_scaling_group_with_domain",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalAssociateDomainMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupSettingModalAssociateDomainMutation",selections:n},params:{cacheID:"72535173512804feacec89a7cabb4ac3",id:null,metadata:{},name:"ResourceGroupSettingModalAssociateDomainMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalAssociateDomainMutation(\n  $domain: String!\n  $scaling_group: String!\n) {\n  associate_scaling_group_with_domain(domain: $domain, scaling_group: $scaling_group) {\n    ok\n    msg\n  }\n}\n"}}}();K.hash="a1253f2e15bdfc1e59cdf2b26bc0a273";const D=K,R=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},n={defaultValue:null,kind:"LocalArgument",name:"name"},a=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"CreateScalingGroup",kind:"LinkedField",name:"create_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalCreateMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ResourceGroupSettingModalCreateMutation",selections:a},params:{cacheID:"6d6716d2dedf664e623006a2315b3c66",id:null,metadata:{},name:"ResourceGroupSettingModalCreateMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalCreateMutation(\n  $name: String!\n  $input: CreateScalingGroupInput!\n) {\n  create_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();R.hash="8642e40e794eaf1f4b0a84e05104d75c";const w=R,M=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},n={defaultValue:null,kind:"LocalArgument",name:"name"},a=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"ModifyScalingGroup",kind:"LinkedField",name:"modify_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalUpdateMutation",selections:a,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ResourceGroupSettingModalUpdateMutation",selections:a},params:{cacheID:"2352dc03b1acef2df9cf7c5f686665a3",id:null,metadata:{},name:"ResourceGroupSettingModalUpdateMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalUpdateMutation(\n  $name: String!\n  $input: ModifyScalingGroupInput!\n) {\n  modify_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();M.hash="510c22b428b17c9e16efd58a5f908c3d";const T=M,I={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null}],type:"ScalingGroup",abstractKey:null,hash:"738d94e03577df0f1298c085d29dcb12"},O=I;var L=a(92882),C=a(23593),N=a(70203),V=a(52688),q=a(78890),$=a(40370),z=a(73017),P=a(89881),Q=a(84928),E=a(57442),B=a(50069),U=a(91454),J=a(26918);const Z=e=>{var n,a,l,r,i,o;let{resourceGroupFrgmt:t,onRequestClose:s,...u}=e;const{t:d}=(0,A.Bd)(),{token:m}=v.A.useToken(),{message:p}=V.A.useApp(),g=(0,c.eZ)(),y=(0,S.useRef)(null),x=(0,j.useFragment)(O,t),[h,k]=(0,j.useMutation)(T),[b,F]=(0,j.useMutation)(w),[K,R]=(0,j.useMutation)(D),M=(0,S.useMemo)((()=>JSON.parse((null===x||void 0===x?void 0:x.scheduler_opts)||"{}")),[null===x||void 0===x?void 0:x.scheduler_opts]),I=(0,f.N7)({name:null===x||void 0===x?void 0:x.name,description:null===x||void 0===x?void 0:x.description,domain:g,scheduler:null!==(n=null===x||void 0===x?void 0:x.scheduler)&&void 0!==n?n:"fifo",allowedSessionTypes:null!==(a=null===M||void 0===M?void 0:M.allowed_session_types)&&void 0!==a?a:["batch","interactive"],active:null===(l=null===x||void 0===x?void 0:x.is_active)||void 0===l||l,public:null===(r=null===x||void 0===x?void 0:x.is_public)||void 0===r||r,pendingTimeout:null!==M&&void 0!==M&&M.pending_timeout?_().toNumber(null===M||void 0===M?void 0:M.pending_timeout):null,retriesToSkip:null!==M&&void 0!==M&&null!==(i=M.config)&&void 0!==i&&i.num_retries_to_skip?_().toNumber(null===M||void 0===M||null===(o=M.config)||void 0===o?void 0:o.num_retries_to_skip):null,wsProxyAddress:null===x||void 0===x?void 0:x.wsproxy_addr});return(0,G.jsx)(f.Ib,{destroyOnHidden:!0,title:d(x?"resourceGroup.ModifyResourceGroup":"resourceGroup.CreateResourceGroup"),onCancel:()=>{null===s||void 0===s||s(!1)},okText:d(x?"button.Update":"button.Create"),okButtonProps:{loading:F||R||k},onOk:()=>{var e;null===(e=y.current)||void 0===e||e.validateFields().then((e=>{var n;const a={driver:"static",scheduler:e.scheduler,description:null!==(n=e.description)&&void 0!==n?n:null,driver_opts:"{}",scheduler_opts:JSON.stringify({allowed_session_types:e.allowedSessionTypes,...e.pendingTimeout&&{pending_timeout:e.pendingTimeout},...e.retriesToSkip&&{config:{num_retries_to_skip:e.retriesToSkip}}}),is_public:e.public,is_active:e.active,wsproxy_addr:e.wsProxyAddress};x?h({variables:{name:x.name,input:a},onCompleted:(e,n)=>{let{modify_scaling_group:a}=e;if(null!==a&&void 0!==a&&a.ok)if(n&&n.length>0){const e=_().map(n,(e=>e.message));for(const n of e)p.error(n)}else p.success(d("resourceGroup.ResourceGroupModified")),null===s||void 0===s||s(!0);else p.error(null===a||void 0===a?void 0:a.msg)},onError:e=>{p.error(e.message)}}):b({variables:{name:e.name,input:a},onCompleted:(n,a)=>{let{create_scaling_group:l}=n;if(a&&a.length>0){const e=_().map(a,(e=>e.message));for(const n of e)p.error(n)}else null!==l&&void 0!==l&&l.ok?K({variables:{domain:e.domain,scaling_group:e.name},onCompleted:(e,n)=>{let{associate_scaling_group_with_domain:a}=e;if(null!==a&&void 0!==a&&a.ok)if(n&&n.length>0){const e=_().map(n,(e=>e.message));for(const n of e)p.error(n)}else p.success(d("resourceGroup.ResourceGroupCreated")),null===s||void 0===s||s(!0);else p.error(null===a||void 0===a?void 0:a.msg)},onError:e=>{p.error(e.message)}}):p.error(null===l||void 0===l?void 0:l.msg)},onError:e=>{p.error(e.message)}})})).catch((()=>{}))},...u,children:(0,G.jsx)(S.Suspense,{fallback:(0,G.jsx)(q.A,{active:!0}),children:(0,G.jsxs)($.A,{ref:y,initialValues:I,layout:"vertical",children:[(0,G.jsx)($.A.Item,{label:d("resourceGroup.Name"),name:"name",rules:[{required:!0,message:d("general.ValueRequired",{name:d("resourceGroup.Name")})}],children:(0,G.jsx)(z.A,{disabled:!!x})}),x?null:(0,G.jsx)($.A.Item,{label:d("resourceGroup.Domain"),name:"domain",rules:[{required:!0,message:d("general.ValueRequired",{name:d("resourceGroup.Domain")})}],children:(0,G.jsx)(C.A,{})}),(0,G.jsx)($.A.Item,{label:d("resourceGroup.Description"),name:"description",children:(0,G.jsx)(z.A.TextArea,{})}),(0,G.jsx)($.A.Item,{label:d("resourceGroup.AllowedSessionTypes"),name:"allowedSessionTypes",rules:[{required:!0,message:d("general.ValueRequired",{name:d("resourceGroup.AllowedSessionTypes")})}],children:(0,G.jsx)(P.A,{mode:"multiple",options:[{label:"Batch",value:"batch"},{label:"Interactive",value:"interactive"},{label:"Inference",value:"inference"}]})}),(0,G.jsx)($.A.Item,{label:d("resourceGroup.WsproxyAddress"),name:"wsProxyAddress",rules:[{type:"url",message:d("error.InvalidUrl")}],children:(0,G.jsx)(z.A,{placeholder:"http://localhost:10200"})}),(0,G.jsxs)(Q.A,{children:[(0,G.jsx)(E.A,{span:12,children:(0,G.jsx)($.A.Item,{layout:"horizontal",label:d("resourceGroup.Active"),name:"active",children:(0,G.jsx)(B.A,{})})}),(0,G.jsx)(E.A,{span:12,children:(0,G.jsx)($.A.Item,{layout:"horizontal",label:d("resourceGroup.Public"),name:"public",children:(0,G.jsx)(B.A,{})})})]}),(0,G.jsx)($.A.Item,{label:d("resourceGroup.Scheduler"),name:"scheduler",rules:[{required:!0,message:d("general.ValueRequired",{name:d("resourceGroup.Scheduler")})}],children:(0,G.jsx)(P.A,{options:[{label:"FIFO",value:"fifo"},{label:"LIFO",value:"lifo"},{label:"DRF",value:"drf"}]})}),(0,G.jsx)($.A.Item,{label:d("resourceGroup.SchedulerOptions"),children:(0,G.jsxs)(f.Zu,{styles:{body:{paddingBottom:0}},children:[(0,G.jsx)($.A.Item,{label:(0,G.jsxs)(f.OO,{gap:"xxs",children:[d("resourceGroup.PendingTimeout"),(0,G.jsx)(U.A,{title:(0,L.y1)(d("resourceGroup.PendingTimeoutDesc")),children:(0,G.jsx)(N.A,{style:{color:m.colorTextSecondary}})})]}),name:"pendingTimeout",children:(0,G.jsx)(J.A,{style:{width:"100%"},addonAfter:d("resourceGroup.TimeoutSeconds"),min:0})}),(0,G.jsx)($.A.Item,{label:(0,G.jsx)(f.OO,{style:{whiteSpace:"pre"},children:d("resourceGroup.RetriesToSkipDesc")}),name:"retriesToSkip",children:(0,G.jsx)(J.A,{style:{width:"100%"},addonAfter:d("resourceGroup.RetriesToSkip"),min:0})})]})})]})})})};var H=a(39544),W=a(78125),X=a(4978),Y=a(84449),ee=a(60854),ne=a(93685),ae=a(33112),le=a(54575),re=a(7326),ie=a(25133);const oe=()=>{const{t:e}=(0,A.Bd)(),{token:n}=v.A.useToken(),{message:a}=V.A.useApp(),[l,r]=(0,S.useState)("active"),[o,{toggle:s}]=(0,ee.A)(!1),[m,{toggle:p}]=(0,ee.A)(!1),[x,h]=(0,S.useState)(),[b,K]=(0,S.useState)(),[D,R]=(0,c.Tw)("first"),[w,M]=(0,S.useTransition)(),[T,I]=(0,S.useTransition)(),{scaling_groups:O}=(0,j.useLazyLoadQuery)(u,{is_active:"active"===l},{fetchPolicy:"store-and-network",fetchKey:D}),[L,C]=(0,j.useMutation)(t),[N,q]=(0,j.useMutation)(i),$=(0,f.YM)([{key:"name",title:e("resourceGroup.Name"),dataIndex:"name"},{key:"description",title:e("resourceGroup.Description"),dataIndex:"description",render:e=>e||"-"},{key:"is_public",title:e("resourceGroup.Public"),dataIndex:"is_public",render:e=>e?(0,G.jsx)(g.A,{style:{color:n.colorSuccess}}):(0,G.jsx)(y.A,{style:{color:n.colorTextSecondary}})},{key:"driver",title:e("resourceGroup.Driver"),dataIndex:"driver"},{key:"scheduler",title:e("resourceGroup.Scheduler"),dataIndex:"scheduler",render:e=>_().toUpper(e)},{key:"wsproxy_addr",title:e("resourceGroup.WsproxyAddress"),dataIndex:"wsproxy_addr",render:e=>e||"-"},{key:"controls",title:e("general.Control"),fixed:"right",render:(l,r)=>(0,G.jsxs)(f.OO,{children:[(0,G.jsx)(ne.Ay,{type:"text",icon:(0,G.jsx)(H.A,{}),style:{color:n.colorSuccess},onClick:()=>{h(r),p()}}),(0,G.jsx)(ne.Ay,{type:"text",icon:(0,G.jsx)(W.A,{}),style:{color:n.colorInfo},onClick:()=>{h(r),s()}}),(0,G.jsx)(U.A,{title:r.is_active?e("resourceGroup.Deactivate"):e("resourceGroup.Activate"),children:(0,G.jsx)(ae.A,{title:r.is_active?e("resourceGroup.DeactivateResourceGroup"):e("resourceGroup.ActivateResourceGroup"),placement:"left",okType:r.is_active?"danger":"primary",okText:r.is_active?e("resourceGroup.Deactivate"):e("resourceGroup.Activate"),description:null===r||void 0===r?void 0:r.name,onConfirm:()=>{var n;L({variables:{name:null!==(n=r.name)&&void 0!==n?n:"",input:{is_active:!r.is_active}},onCompleted:(n,r)=>{let{modify_scaling_group:i}=n;if(null!==i&&void 0!==i&&i.ok)if(r&&r.length>0){const e=l.map(r,(e=>e.message));for(const n of e)a.error(n)}else a.success(e("resourceGroup.ResourceGroupModified")),I((()=>{R()}));else a.error(null===i||void 0===i?void 0:i.msg)},onError:e=>{a.error(e.message)}})},children:(0,G.jsx)(ne.Ay,{type:"text",danger:!!r.is_active,icon:r.is_active?(0,G.jsx)(re.A,{}):(0,G.jsx)(ie.A,{}),loading:C})})}),(0,G.jsx)(U.A,{title:e("button.Delete"),children:(0,G.jsx)(ne.Ay,{type:"text",icon:(0,G.jsx)(X.A,{style:{color:n.colorError}}),onClick:()=>{K((null===r||void 0===r?void 0:r.name)||"")}})})]})}]);return(0,G.jsxs)(f.OO,{direction:"column",align:"stretch",gap:"sm",children:[(0,G.jsxs)(f.OO,{justify:"between",children:[(0,G.jsx)(d.A,{value:l,onChange:e=>{M((()=>{r(e.target.value)}))},optionType:"button",options:[{label:e("general.Active"),value:"active"},{label:e("general.Inactive"),value:"inactive"}]}),(0,G.jsxs)(f.OO,{gap:"sm",children:[(0,G.jsx)(f.u8,{loading:T,value:D,onChange:()=>{I((()=>{R()}))}}),(0,G.jsx)(ne.Ay,{type:"primary",icon:(0,G.jsx)(Y.A,{}),onClick:()=>s(),children:e("button.Create")})]})]}),(0,G.jsx)(f.zx,{rowKey:"name",resizable:!0,size:"small",scroll:{x:"max-content"},columns:$,dataSource:(0,f.f)(O),loading:w}),(0,G.jsx)(f.Qo,{open:!!b,title:e("resourceGroup.DeleteResourceGroup"),content:(0,G.jsxs)(f.OO,{direction:"column",gap:"md",align:"stretch",style:{marginBottom:n.marginXS,width:"100%"},children:[(0,G.jsx)(le.A,{type:"warning",message:e("dialog.warning.DeleteForeverDesc"),style:{width:"100%"}}),(0,G.jsxs)(f.OO,{children:[(0,G.jsx)(k.A.Text,{style:{marginRight:n.marginXXS},children:e("resourceGroup.TypeResourceGroupNameToDelete")}),"(",(0,G.jsx)(k.A.Text,{code:!0,children:b}),")"]})]}),confirmText:null!==b&&void 0!==b?b:"",onOk:()=>{N({variables:{name:null!==b&&void 0!==b?b:""},onCompleted:(n,l)=>{let{delete_scaling_group:r}=n;if(null!==r&&void 0!==r&&r.ok)if(l&&l.length>0){const e=_().map(l,(e=>e.message));for(const n of e)a.error(n)}else a.success(e("resourceGroup.ResourceGroupDeleted")),K(void 0),I((()=>{R()}));else a.error(null===r||void 0===r?void 0:r.msg)},onError:e=>{a.error(e.message)}})},okButtonProps:{loading:q},onCancel:()=>{K(void 0)}}),(0,G.jsx)(F,{open:m&&!!x,resourceGroupFrgmt:x,onRequestClose:()=>{p(),h(void 0)}}),(0,G.jsx)(Z,{open:o,resourceGroupFrgmt:x,onRequestClose:e=>{s(),h(void 0),e&&I((()=>{R()}))}})]})},te=function(){var e={defaultValue:null,kind:"LocalArgument",name:"limit"},n={defaultValue:null,kind:"LocalArgument",name:"offset"},a=[{alias:null,args:[{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"}],concreteType:"StorageVolumeList",kind:"LinkedField",name:"storage_volume_list",plural:!1,selections:[{alias:null,args:null,concreteType:"StorageVolume",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backend",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fsprefix",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"performance_metric",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"usage",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"StorageProxyListQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"StorageProxyListQuery",selections:a},params:{cacheID:"00f25e00fb3163b514baaa3ef857ead0",id:null,metadata:{},name:"StorageProxyListQuery",operationKind:"query",text:"query StorageProxyListQuery(\n  $offset: Int!\n  $limit: Int!\n) {\n  storage_volume_list(limit: $limit, offset: $offset) {\n    items {\n      id\n      backend\n      capabilities\n      path\n      fsprefix\n      performance_metric\n      usage\n    }\n    total_count\n  }\n}\n"}}}();te.hash="8eea8c97cb39a266757eaa25705b6633";const se=te;var ue=a(90615),ce=a(58399),de=a(80785);const me=(0,a(64579).A)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),pe={xfs:{color:"blue",icon:(0,G.jsx)(me,{})},ceph:{color:"lightblue",icon:(0,G.jsx)(f.qb,{})},cephfs:{color:"lightblue",icon:(0,G.jsx)(f.qb,{})},vfs:{color:"green",icon:(0,G.jsx)(me,{})},nfs:{color:"green",icon:(0,G.jsx)(me,{})},purestorage:{color:"red",icon:(0,G.jsx)(f.Zd,{})},dgx:{color:"green",icon:(0,G.jsx)(me,{})},spectrumscale:{color:"green",icon:(0,G.jsx)(me,{})},weka:{color:"purple",icon:(0,G.jsx)(me,{})}},ge=()=>{var e;const{token:n}=v.A.useToken(),{t:a}=(0,A.Bd)(),{baiPaginationOption:l,tablePaginationOption:r,setTablePaginationOption:i}=(0,ue.L0)({current:1,pageSize:10}),[o,t]=(0,c.zu)(),s=(0,S.useMemo)((()=>({offset:l.offset,limit:l.limit})),[l.offset,l.limit]),u=(0,S.useDeferredValue)(s),d=(0,S.useDeferredValue)(o),{storage_volume_list:m}=(0,j.useLazyLoadQuery)(se,u,{fetchPolicy:d===c.eI?"store-and-network":"network-only",fetchKey:d}),p=[{title:(0,G.jsxs)(G.Fragment,{children:["ID / ",a("agent.Endpoint")]}),key:"id",dataIndex:"id",render:(e,n)=>(0,G.jsxs)(f.OO,{direction:"column",align:"start",children:[(0,G.jsx)(k.A.Text,{children:e}),(0,G.jsx)(k.A.Text,{type:"secondary",children:n.path})]})},{title:a("agent.BackendType"),key:"backend",dataIndex:"backend",render:e=>{var n;const a=null!==(n=pe[e])&&void 0!==n?n:{color:"gold",icon:(0,G.jsx)(me,{})};return(0,G.jsxs)(f.OO,{gap:"xxs",children:[a.icon,(0,G.jsx)(de.A,{values:[{label:"Backend"},{label:e,color:a.color}]})]})}},{title:a("agent.Resources"),key:"usage",dataIndex:"usage",render:e=>{var a,l,r;const i=JSON.parse(e),o=(null===i||void 0===i?void 0:i.capacity_bytes)>0?i.used_bytes/i.capacity_bytes:0,t=_().toFinite((0,L.Z1)(100*o,2)),s=t>80?n.colorError:n.colorSuccess,u=(null===(a=(0,L.Ho)(_().toString(null===i||void 0===i?void 0:i.capacity_bytes),"auto",{base:1e3}))||void 0===a?void 0:a.unit)||"g";return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(ce.A,{valueLabel:(0,L.Z1)(t,1)+" %",percent:t,strokeColor:s,width:120}),(0,G.jsxs)(k.A.Text,{style:{fontSize:n.fontSizeSM},children:[i.used_bytes?null===(l=(0,L.Gh)(i.used_bytes,u))||void 0===l?void 0:l.numberFixed:"-","\xa0/\xa0",i.capacity_bytes?null===(r=(0,L.Gh)(i.capacity_bytes,u))||void 0===r?void 0:r.displayValue:"-"]})]})}},{title:a("agent.Capabilities"),key:"capabilities",dataIndex:"capabilities",width:150,render:e=>(0,G.jsx)(f.OO,{gap:"xxs",align:"start",wrap:"wrap",children:_().map(e,(e=>(0,G.jsx)(h.A,{color:"blue",style:{margin:0},children:e},e)))})},{title:a("general.Control"),key:"control",width:100,fixed:"right",render:(e,a)=>{let l;try{const e=JSON.parse(a.performance_metric||"{}");l=_().isEmpty(e)}catch(r){l=!0}return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(ne.Ay,{disabled:l,style:{color:l?n.colorTextDisabled:n.colorSuccess},icon:(0,G.jsx)(H.A,{}),onClick:()=>{const e=new CustomEvent("backend-ai-selected-storage-proxy",{detail:a.id});document.dispatchEvent(e)},type:"text"}),(0,G.jsx)(f.rm,{to:`/storage-settings/${a.id}`,children:(0,G.jsx)(ne.Ay,{style:{color:n.colorInfo},icon:(0,G.jsx)(W.A,{}),type:"text"})})]})}}];return(0,S.useEffect)((()=>{if(!_().isEmpty(null===m||void 0===m?void 0:m.items)){const e=new CustomEvent("backend-ai-storage-proxy-updated",{});document.dispatchEvent(e)}}),[m]),(0,G.jsxs)(f.OO,{direction:"column",align:"stretch",gap:"sm",children:[(0,G.jsx)(f.OO,{justify:"end",wrap:"wrap",gap:"sm",children:(0,G.jsx)(f.u8,{loading:d!==o||u!==s,autoUpdateDelay:15e3,value:o,onChange:()=>{t()}})}),(0,G.jsx)(f.zx,{resizable:!0,size:"small",scroll:{x:"max-content"},rowKey:"id",dataSource:(0,f.f)(null===m||void 0===m?void 0:m.items),columns:p,loading:u!==s||d!==o,pagination:{pageSize:r.pageSize,current:r.current,total:null!==(e=null===m||void 0===m?void 0:m.total_count)&&void 0!==e?e:0,onChange(e,n){_().isNumber(e)&&_().isNumber(n)&&i({pageSize:n,current:e})}}})]})};var ye=a(75182),ve=a(7927);const xe=(0,ve.withDefault)(ve.StringParam,"agents"),he=()=>{const{t:e}=(0,A.Bd)(),[n,a]=(0,ve.useQueryParam)("tab",xe,{updateType:"replace"});return(0,G.jsx)(f.Zu,{activeTabKey:n,onTabChange:e=>a(e),tabList:[{key:"agents",tab:e("agent.Agent")},{key:"storages",tab:e("general.StorageProxies")},{key:"resourceGroup",tab:e("general.ResourceGroup")}],children:(0,G.jsxs)(S.Suspense,{fallback:(0,G.jsx)(q.A,{active:!0}),children:["agents"===n&&(0,G.jsx)(ye.A,{children:(0,G.jsx)(l.A,{})}),"storages"===n&&(0,G.jsx)(ye.A,{children:(0,G.jsx)(ge,{})}),"resourceGroup"===n&&(0,G.jsx)(ye.A,{children:(0,G.jsx)(oe,{})})]})})}},29646:(e,n,a)=>{a.d(n,{A:()=>s});var l=a(1139),r=a(21481);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};var o=a(46361),t=function(e,n){return r.createElement(o.A,(0,l.A)({},e,{ref:n,icon:i}))};const s=r.forwardRef(t)},7326:(e,n,a)=>{a.d(n,{A:()=>l});const l=(0,a(64579).A)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},25133:(e,n,a)=>{a.d(n,{A:()=>l});const l=(0,a(64579).A)("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]])}}]);
//# sourceMappingURL=853.0fb18bbc.chunk.js.map