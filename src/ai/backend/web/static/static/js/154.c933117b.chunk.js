"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[154],{77758:function(e,n,i){i.d(n,{Z:function(){return o}});var r=i(1413),t=i(36459),l=i(65113),a=(i(4519),i(2556)),o=function(e){var n,i=Object.assign({},((0,t.Z)(e),e));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{children:".ant-modal.bai-modal .ant-modal-content {\n  padding: var(--general-modal-content-padding, 0);\n}\n.ant-modal.bai-modal .ant-modal-body {\n  padding: var(--general-modal-body-padding, 0 24px);\n}\n\n.ant-modal.bai-modal .ant-modal-footer {\n  padding: var(--general-modal-footer-padding, 0 20px 24px 20px);\n}\n\n.ant-modal.bai-modal .ant-modal-header {\n  border-bottom: 1px solid rgb(221, 221, 221);\n  border-width: 100%;\n  justify-content: space-between;\n  display: flex;\n  align-items: center;\n}\n\n.ant-modal.bai-modal .ant-modal-content .ant-modal-header,\n.ant-modal.bai-modal .ant-modal-content > button.ant-modal-close {\n  padding: var(--general-modal-header-padding, 10px 20px);\n  height: var(--general-modal-header-height, 69px);\n}\n\n.ant-modal.bai-modal .ant-modal-content > button.ant-modal-close {\n  /* center */\n  top: 0;\n}\n"}),(0,a.jsx)(l.Z,(0,r.Z)({centered:null===(n=i.centered)||void 0===n||n,className:"bai-modal"},i))]})}},96451:function(e,n,i){var r,t=i(82548),l=(i(4519),i(16980)),a=i(2556);n.Z=function(e){var n,o=e.endpointFrgmt,s=(0,l.useFragment)(void 0!==r?r:r=i(58393),o),d="default";switch(null===s||void 0===s||null===(n=s.status)||void 0===n?void 0:n.toUpperCase()){case"RUNNING":case"HEALTHY":d="success"}return(0,a.jsx)(t.Z,{color:d,children:null===s||void 0===s?void 0:s.status})}},76587:function(e,n,i){var r,t=i(1413),l=i(29439),a=i(44925),o=i(43255),s=i(87760),d=i(50164),c=i(77758),u=i(99277),m=i(44036),v=i(57054),g=i(66653),f=(i(4519),i(81748)),p=i(16980),h=i(2556),y=["onRequestClose","endpointFrgmt"];n.Z=function(e){var n=e.onRequestClose,b=e.endpointFrgmt,x=(0,a.Z)(e,y),S=m.Z.useToken().token,Z=(0,s.Dj)(),_=(0,f.$G)().t,k=v.Z.useForm(),j=(0,l.Z)(k,1)[0],F=(0,p.useFragment)(void 0!==r?r:r=i(56326),b),C=(0,d.Y)({mutationFn:function(e){var n={to:e.desired_session_count};return(0,o.Lc)({method:"POST",url:"/services/".concat(null===F||void 0===F?void 0:F.endpoint_id,"/scale"),body:n,client:Z})}});return(0,h.jsx)(c.Z,(0,t.Z)((0,t.Z)({style:{zIndex:1e4},destroyOnClose:!0,onOk:function(e){j.validateFields().then((function(e){C.mutate(e,{onSuccess:function(){console.log("service updated"),n(!0)},onError:function(e){console.log(e)}})})).catch((function(e){console.log(e)}))},onCancel:function(){n()},okButtonProps:{loading:C.isLoading},title:_("modelService.EditModelService")},x),{},{children:(0,h.jsx)(u.Z,{direction:"row",align:"stretch",justify:"around",children:(0,h.jsx)(v.Z,{form:j,preserve:!1,validateTrigger:["onChange","onBlur"],initialValues:{desired_session_count:null===F||void 0===F?void 0:F.desired_session_count},style:{marginBottom:S.marginLG,marginTop:S.margin},children:(0,h.jsx)(v.Z.Item,{name:"desired_session_count",label:_("modelService.DesiredSessionCount"),rules:[{pattern:/^[0-9]+$/,message:_("modelService.OnlyAllowsNonNegativeIntegers")}],children:(0,h.jsx)(g.Z,{type:"number",min:0})})})})}))}},58393:function(e,n,i){i.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EndpointStatusTagFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],type:"Endpoint",abstractKey:null,hash:"3b31efa50b55edddcb210b59003dc479"};n.default=r},56326:function(e,n,i){i.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ModelServiceSettingModal_endpoint",selections:[{alias:null,args:null,kind:"ScalarField",name:"endpoint_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"desired_session_count",storageKey:null}],type:"Endpoint",abstractKey:null,hash:"881f18324b27eba6ff0fcfb83ae241d2"};n.default=r},79154:function(e,n,i){i.r(n),i.d(n,{default:function(){return ne}});var r=i(29439),t=i(77758),l=i(96451),a=i(99277),o=i(76587),s=i(1413),d=i(44925),c=i(43255),u=i(87760),m=i(1839),v=i(50164),g=i(46228),f=i(15008),p=i(61815),h=i(96732),y=i(57054),b=i(31603),x=i(66653),S=i(4519),Z=i(2556),_=["name","min","max","step","rules","required","inputNumberProps","sliderProps","initialValue","disabled"],k=function(e){var n=e.name,i=e.min,r=e.max,t=e.step,l=e.rules,o=e.required,c=e.inputNumberProps,u=e.sliderProps,m=e.initialValue,v=e.disabled,g=(0,d.Z)(e,_),f=y.Z.useFormInstance();return(0,S.useEffect)((function(){1===t&&f.getFieldValue(n)%1!==0&&f.setFieldValue(n,Math.round(f.getFieldValue(n)))}),[t,f,n]),(0,Z.jsx)(y.Z.Item,(0,s.Z)((0,s.Z)({required:o},g),{},{children:(0,Z.jsxs)(a.Z,{direction:"row",gap:"md",children:[(0,Z.jsx)(a.Z,{direction:"column",align:"stretch",style:{flex:3},children:(0,Z.jsx)(y.Z.Item,{name:n,noStyle:!0,rules:l,initialValue:m,label:g.label,children:(0,Z.jsx)(b.Z,(0,s.Z)({max:r,min:i,step:t,disabled:v},u))})}),(0,Z.jsx)(a.Z,{style:{flex:2,minWidth:130},align:"stretch",direction:"column",children:(0,Z.jsx)(y.Z.Item,{name:n,noStyle:!0,rules:l,initialValue:m,label:g.label,children:(0,Z.jsx)(x.Z,(0,s.Z)({max:r,min:i,step:t,onStep:function(e,n){console.log(e,n)},disabled:v},c))})})]})}))},j=i(19427),F=i(32048),C=i.n(F),P=["filter","autoSelectDefault"],T=function(e){var n,i,t=e.filter,l=e.autoSelectDefault,a=(0,d.Z)(e,P),o=(0,u.qh)(),m=(0,c.y3)(),g=(0,u.Kr)("first"),f=(0,r.Z)(g,2),p=f[0],h=f[1],y=(0,v.h)({queryKey:["VFolderSelectQuery",p],queryFn:function(){return m({method:"GET",url:"/folders?group_id=".concat(o.id)})},staleTime:0}).data,b=t?C().filter(y,t):y,x=C().first(b)?{label:null===(n=C().first(b))||void 0===n?void 0:n.name,value:null===(i=C().first(b))||void 0===i?void 0:i.name}:void 0;return(0,S.useEffect)((function(){var e;l&&x&&(null===(e=a.onChange)||void 0===e||e.call(a,x.value,x))}),[l]),(0,Z.jsx)(j.Z,(0,s.Z)((0,s.Z)({showSearch:!0},a),{},{onDropdownVisibleChange:function(e){e&&(0,S.startTransition)((function(){h()}))},children:C().map(b,(function(e){return(0,Z.jsx)(j.Z.Option,{value:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)}))}))},w=i(44036),I=i(88464),D=i(38818),K=i(62708),E=i(53066),L=i(81748),q=["extraP","onRequestClose"],A=function(e){e.extraP;var n,i=e.onRequestClose,l=(0,d.Z)(e,q),a=(0,L.$G)().t,o=w.Z.useToken().token,b=(0,u.Dj)(),x=(0,u.tQ)(),_=y.Z.useForm(),F=(0,r.Z)(_,1)[0],P=(0,m.T6)(),A=(0,r.Z)(P,1)[0],N=y.Z.useWatch(["environments","image"],F),M=F.getFieldValue(["resource","acceleratorType"]),O=C().filter(null===N||void 0===N?void 0:N.resource_limits,(function(e){return!!e&&!C().includes(["cpu","mem","shmem"],e.key)})),R=(null===(n=C().filter(O,(function(e){return C().keys(A).includes(null===e||void 0===e?void 0:e.key)}))[0])||void 0===n?void 0:n.key)||"",V=C().omit(A,["cpu","mem","shmem"]);(0,S.useEffect)((function(){F.setFieldValue(["resource","accelerator"],U(R).min||0),F.setFieldValue(["resource","acceleratorType"],{value:R,label:h.Ec[R]||"UNIT"})}),[N]);var U=function(e){var n,i=8;switch(e){case"cuda.device":default:i=b._config.maxCUDADevicesPerContainer||i;break;case"cuda.shares":i=b._config.maxCUDASharesPerContainer||i;break;case"rocm.device":i=b._config.maxROCMDevicesPerContainer||i;break;case"tpu.device":i=b._config.maxTPUDevicesPerContainer||i;break;case"ipu.device":i=b._config.maxIPUDevicesPerContainer||i;break;case"atom.device":i=b._config.maxATOMDevicesPerContainer||i;break;case"warboy.device":i=b._config.maxWarboyDevicesPerContainer||i}return{min:parseInt(null===(n=C().filter(O,(function(e){return(null===e||void 0===e?void 0:e.key)===R}))[0])||void 0===n?void 0:n.min),max:i}},z=(0,v.Y)({mutationFn:function(e){var n,i,r,t,l,a="".concat(null===(n=e.environments.image)||void 0===n?void 0:n.registry,"/").concat(null===(i=e.environments.image)||void 0===i?void 0:i.name,":").concat(null===(r=e.environments.image)||void 0===r?void 0:r.tag),o={name:e.serviceName,desired_session_count:e.desiredRoutingCount,image:a,arch:null===(t=e.environments.image)||void 0===t?void 0:t.architecture,group:b.current_group,domain:x,cluster_size:1,cluster_mode:"single-node",open_to_public:e.openToPublic,config:{model:e.vFolderName,model_mount_destination:"/models",environ:{},scaling_group:e.resourceGroup,resources:{cpu:e.cpu,mem:e.mem+"G"}}};if(e.resource.acceleratorType)switch(null===(l=e.resource.acceleratorType)||void 0===l?void 0:l.value){case"cuda.shares":o.config.resources["cuda.shares"]=e.resource.accelerator;break;case"cuda.device":o.config.resources["cuda.device"]=e.resource.accelerator;break;case"rocm.device":o.config.resources["rocm.device"]=e.resource.accelerator;break;case"tpu.device":o.config.resources["tpu.device"]=e.resource.accelerator;break;case"ipu.device":o.config.resources["ipu.device"]=e.resource.accelerator;break;case"warboy.device":o.config.resources["warboy.device"]=e.resource.accelerator}return e.shmem&&e.shmem>0&&(o.config.resource_opts={shmem:e.shmem+"G"}),(0,c.Lc)({method:"POST",url:"/services",body:o,client:b})}});return(0,Z.jsx)(t.Z,(0,s.Z)((0,s.Z)({title:a("modelService.StartNewServing"),onOk:function(){F.validateFields().then((function(e){z.mutate(e,{onSuccess:function(){i(!0)},onError:function(e){null!==e&&void 0!==e&&e.message?I.ZP.error(C().truncate(null===e||void 0===e?void 0:e.message,{length:200})):I.ZP.error(a("modelService.FailedToStartService"))}})})).catch((function(e){var n,i,r,t;null!==(n=e.errorFields)&&void 0!==n&&null!==(i=n[0].errors)&&void 0!==i&&i[0]?I.ZP.error(null===(r=e.errorFields)||void 0===r||null===(t=r[0].errors)||void 0===t?void 0:t[0]):I.ZP.error(a("modelService.FormValidationFailed"))}))},onCancel:function(){i()},destroyOnClose:!0,maskClosable:!1,confirmLoading:z.isLoading},l),{},{children:(0,Z.jsx)(S.Suspense,{fallback:(0,Z.jsx)(g.Z,{}),children:(0,Z.jsxs)(y.Z,{disabled:z.isLoading,form:F,preserve:!1,layout:"vertical",labelCol:{span:12},initialValues:{cpu:1,resource:{accelerator:0},mem:.25,shmem:0,desiredRoutingCount:1},children:[(0,Z.jsx)(y.Z.Item,{label:a("modelService.ServiceName"),name:"serviceName",rules:[{pattern:/^(?=.{4,24}$)\w[\w.-]*\w$/,message:a("modelService.ServiceNameRule")},{required:!0}],children:(0,Z.jsx)(D.Z,{})}),(0,Z.jsx)(y.Z.Item,{name:"resourceGroup",label:a("session.ResourceGroup"),rules:[{required:!0}],children:(0,Z.jsx)(p.Z,{autoSelectDefault:!0})}),(0,Z.jsx)(y.Z.Item,{name:"openToPublic",label:a("modelService.OpenToPublic"),valuePropName:"checked",children:(0,Z.jsx)(K.Z,{})}),(0,Z.jsx)(y.Z.Item,{name:"vFolderName",label:a("session.launcher.ModelStorageToMount"),rules:[{required:!0}],children:(0,Z.jsx)(T,{filter:function(e){return"model"===e.usage_mode},autoSelectDefault:!0})}),(0,Z.jsx)(k,{label:a("modelService.DesiredRoutingCount"),name:"desiredRoutingCount",rules:[{required:!0}],inputNumberProps:{addonAfter:"#"},required:!0}),(0,Z.jsxs)(E.Z,{style:{marginBottom:o.margin},children:[(0,Z.jsx)(f.Z,{}),(0,Z.jsx)(y.Z.Item,{noStyle:!0,shouldUpdate:function(e,n){var i,r,t,l;return(null===(i=e.environments)||void 0===i||null===(r=i.image)||void 0===r?void 0:r.digest)!==(null===(t=n.environments)||void 0===t||null===(l=t.image)||void 0===l?void 0:l.digest)},children:function(e){var n,i,r=null===(n=(0,e.getFieldValue)("environments"))||void 0===n?void 0:n.image;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(k,{name:"cpu",label:a("session.launcher.CPU"),tooltip:(0,Z.jsx)(L.cC,{i18nKey:"session.launcher.DescCPU"}),min:parseInt((null===(i=C().find(null===r||void 0===r?void 0:r.resource_limits,(function(e){return"cpu"===(null===e||void 0===e?void 0:e.key)})))||void 0===i?void 0:i.min)||"0"),max:b._config.maxCPUCoresPerContainer||128,inputNumberProps:{addonAfter:a("session.launcher.Core")},required:!0,rules:[{required:!0}]}),(0,Z.jsx)(k,{name:"mem",label:a("session.launcher.Memory"),tooltip:(0,Z.jsx)(L.cC,{i18nKey:"session.launcher.DescMemory"}),max:b._config.maxMemoryPerContainer||1536,min:0,inputNumberProps:{addonAfter:"GiB"},step:.25,required:!0,rules:[{required:!0},function(e){e.getFieldValue;return{validator:function(e,n){var i,t=(0,c.PZ)((null===(i=C().find(null===r||void 0===r?void 0:r.resource_limits,(function(e){return"mem"===(null===e||void 0===e?void 0:e.key)})))||void 0===i?void 0:i.min)||"0B","G");return null!==t&&void 0!==t&&t.number&&(null===t||void 0===t?void 0:t.number)>n?Promise.reject(new Error(a("session.launcher.MinMemory",{size:null===t||void 0===t?void 0:t.numberUnit}))):Promise.resolve()}}}]}),(0,Z.jsx)(k,{name:"shmem",label:a("session.launcher.SharedMemory"),tooltip:(0,Z.jsx)(L.cC,{i18nKey:"session.launcher.DescSharedMemory"}),max:b._config.maxShmPerContainer||8,min:0,step:.25,inputNumberProps:{addonAfter:"GiB"},required:!0,rules:[{required:!0}]})]})}}),(0,Z.jsx)(y.Z.Item,{noStyle:!0,shouldUpdate:function(e,n){var i,r;return(null===(i=e.environments)||void 0===i?void 0:i.environment)!==(null===(r=n.environments)||void 0===r?void 0:r.environment)},children:function(){return(0,Z.jsx)(k,{name:["resource","accelerator"],label:a("session.launcher.AIAccelerator"),tooltip:(0,Z.jsx)(L.cC,{i18nKey:"session.launcher.DescAIAccelerator"}),sliderProps:{},min:0,max:U(R).max,step:C().endsWith(M,"shares")?.1:1,disabled:O.length<=0,inputNumberProps:{addonAfter:(0,Z.jsx)(y.Z.Item,{noStyle:!0,name:["resource","acceleratorType"],initialValue:R,children:(0,Z.jsx)(j.Z,{disabled:O.length<=0,suffixIcon:C().size(V)>1?void 0:null,open:C().size(V)>1&&void 0,popupMatchSelectWidth:!1,options:C().map(V,(function(e,n){return{value:n,label:h.Ec[n]||"UNIT",disabled:O.length>0&&!C().find(O,(function(e){return(null===e||void 0===e?void 0:e.key)===n}))}}))})})},required:!0,rules:[{required:!0}]})}})]})]})})}))},N=i(43596),M=i(28501),O=i(83861),R=i(31662),V=i(46951),U=i(69537);var z=function(e){if(e.id,"undefined"===typeof cancelAnimationFrame)return clearInterval(e.id);cancelAnimationFrame(e.id)};var B,G=function(e,n,i){var r=null===i||void 0===i?void 0:i.immediate,t=(0,V.Z)(e),l=(0,S.useRef)();return(0,S.useEffect)((function(){if((0,U.hj)(n)&&!(n<0))return r&&t.current(),l.current=function(e,n){if(void 0===n&&(n=0),"undefined"===typeof requestAnimationFrame)return{id:setInterval(e,n)};var i=(new Date).getTime(),r={id:0};return r.id=requestAnimationFrame((function t(){(new Date).getTime()-i>=n&&(e(),i=(new Date).getTime()),r.id=requestAnimationFrame(t)})),r}((function(){t.current()}),n),function(){l.current&&z(l.current)}}),[n]),(0,S.useCallback)((function(){l.current&&z(l.current)}),[])},$=i(45110),Q=i(92171),W=i(51367),H=i(28499),Y=i(99517),J=i.n(Y),X=i(16980),ee=i(51843),ne=function(e){e.children;var n=(0,L.$G)().t,s=(0,u.Dj)(),d=w.Z.useToken().token,m=(0,u.qh)(),g=(0,S.useState)(!1),f=(0,r.Z)(g,2),p=f[0],h=f[1],y=(0,S.useState)(),b=(0,r.Z)(y,2),x=b[0],_=b[1],k=(0,S.useState)(!1),j=(0,r.Z)(k,2),F=j[0],P=j[1],T=(0,S.useState)({current:1,pageSize:100}),I=(0,r.Z)(T,1)[0],D=(0,S.useTransition)(),K=(0,r.Z)(D,2),E=K[0],q=K[1],V=(0,S.useState)(!1),U=(0,r.Z)(V,2),z=U[0],Y=U[1],ne=(0,u.Kr)("initial-fetch"),ie=(0,r.Z)(ne,2),re=ie[0],te=ie[1],le=(0,S.useState)("services"),ae=(0,r.Z)(le,2),oe=ae[0],se=ae[1];G((function(){(0,S.startTransition)((function(){te()}))}),7e3);var de=(0,X.useLazyLoadQuery)(void 0!==B?B:B=i(16142),{offset:(I.current-1)*I.pageSize,limit:I.pageSize,projectID:m.id},{fetchPolicy:"initial-fetch"===re?"store-and-network":"network-only",fetchKey:re}).endpoint_list,ce=C().sortBy(null===de||void 0===de?void 0:de.items,"name"),ue=(0,v.Y)({mutationFn:function(){return(0,c.Lc)({method:"DELETE",url:"/services/"+(null===x||void 0===x?void 0:x.endpoint_id),client:s})}});return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(a.Z,{direction:"column",align:"stretch",style:{padding:d.padding,gap:d.margin},children:(0,Z.jsxs)(a.Z,{direction:"column",align:"stretch",children:[(0,Z.jsx)(a.Z,{style:{flex:1},children:(0,Z.jsx)($.Z,{activeKey:oe,onChange:function(e){return se(e)},tabBarStyle:{marginBottom:0},style:{width:"100%",paddingLeft:d.paddingMD,paddingRight:d.paddingMD,borderTopLeftRadius:d.borderRadius,borderTopRightRadius:d.borderRadius},items:[{key:"services",label:n("modelService.Services")}],tabBarExtraContent:{right:(0,Z.jsx)(Q.ZP,{type:"primary",onClick:function(){h(!0)},children:n("modelService.StartService")})}})}),(0,Z.jsx)(S.Suspense,{fallback:(0,Z.jsx)("div",{children:"loading.."}),children:(0,Z.jsx)(W.Z,{loading:E,scroll:{x:"max-content"},rowKey:"endpoint_id",dataSource:ce||[],columns:[{title:n("modelService.EndpointName"),dataIndex:"endpoint_id",fixed:"left",render:function(e,n){return(0,Z.jsx)(ee.rU,{to:"/serving/"+e,children:n.name})}},{title:n("modelService.EndpointId"),dataIndex:"endpoint_id",width:310,render:function(e){return(0,Z.jsx)(H.Z.Text,{code:!0,children:e})}},{title:n("modelService.Controls"),dataIndex:"controls",render:function(e,n){var i,r,t,l;return(0,Z.jsxs)(a.Z,{direction:"row",align:"stretch",children:[(0,Z.jsx)(Q.ZP,{type:"text",icon:(0,Z.jsx)(N.Z,{}),style:n.desired_session_count<0||"destroying"===(null===(i=n.status)||void 0===i?void 0:i.toLowerCase())?void 0:{color:"#29b6f6"},disabled:n.desired_session_count<0||"destroying"===(null===(r=n.status)||void 0===r?void 0:r.toLowerCase()),onClick:function(){P(!0),_(n)}}),(0,Z.jsx)(Q.ZP,{type:"text",icon:(0,Z.jsx)(M.Z,{style:n.desired_session_count<0||"destroying"===(null===(t=n.status)||void 0===t?void 0:t.toLowerCase())?void 0:{color:d.colorError}}),disabled:n.desired_session_count<0||"destroying"===(null===(l=n.status)||void 0===l?void 0:l.toLowerCase()),onClick:function(){Y(!0),_(n)}})]})}},{title:n("modelService.Status"),render:function(e,n){return(0,Z.jsx)(l.Z,{endpointFrgmt:n})}},{title:n("modelService.CreatedAt"),dataIndex:"created_at",render:function(e){return J()(e).format("ll LT")},defaultSortOrder:"descend",sortDirections:["descend","ascend","descend"],sorter:function(e,n){var i=J()(e.created_at),r=J()(n.created_at);return i.diff(r)}},{title:n("modelService.DesiredSessionCount"),dataIndex:"desired_session_count",render:function(e){return e<0?"-":e}},{title:(0,Z.jsxs)(a.Z,{direction:"column",align:"start",children:[n("modelService.RoutingsCount"),(0,Z.jsx)("br",{}),(0,Z.jsxs)(H.Z.Text,{type:"secondary",style:{fontWeight:"normal"},children:["(",n("modelService.Active/Total"),")"]})]}),render:function(e,n){var i;return C().filter(n.routings,(function(e){return"HEALTHY"===(null===e||void 0===e?void 0:e.status)})).length+" / "+(null===(i=n.routings)||void 0===i?void 0:i.length)}},{title:n("modelService.Public"),render:function(e,n){return n.open_to_public?(0,Z.jsx)(O.Z,{style:{color:d.colorSuccess}}):(0,Z.jsx)(R.Z,{style:{color:d.colorTextSecondary}})}}],pagination:!1})})]})}),(0,Z.jsx)(t.Z,{open:z,title:n("dialog.title.LetsDouble-Check"),okButtonProps:{loading:ue.isLoading},onOk:function(){ue.mutate(void 0,{onSuccess:function(e){q((function(){te()})),Y(!1)},onError:function(e){console.log("terminateModelServiceMutation Error",e)}})},onCancel:function(){Y(!1)},children:(0,Z.jsxs)(a.Z,{direction:"column",align:"stretch",justify:"center",children:[(0,Z.jsx)("p",{children:n("modelService.YouAreAboutToTerminate")+((null===x||void 0===x?void 0:x.name)||"")+"."}),(0,Z.jsx)("p",{children:n("dialog.ask.DoYouWantToProceed")})]})}),(0,Z.jsx)(o.Z,{open:F,onRequestClose:function(e){P(!1),e&&q((function(){te()}))},endpointFrgmt:x||null}),(0,Z.jsx)(A,{open:p,onRequestClose:function(e){h(!p),e&&q((function(){te()}))}})]})}},16142:function(e,n,i){i.r(n);var r=function(){var e={defaultValue:null,kind:"LocalArgument",name:"limit"},n={defaultValue:null,kind:"LocalArgument",name:"offset"},i={defaultValue:null,kind:"LocalArgument",name:"projectID"},r=[{kind:"Literal",name:"filter",value:"name != 'koalpaca-test'"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"},{kind:"Variable",name:"project",variableName:"projectID"}],t={alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"endpoint_id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"image",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"model",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"resource_group",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"resource_slots",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"open_to_public",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"created_user",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"desired_session_count",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"routing_id",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"endpoint",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"session",storageKey:null},Z={alias:null,args:null,kind:"ScalarField",name:"traffic_ratio",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[e,n,i],kind:"Fragment",metadata:null,name:"ServingListPageQuery",selections:[{alias:null,args:r,concreteType:"EndpointList",kind:"LinkedField",name:"endpoint_list",plural:!1,selections:[t,{alias:null,args:null,concreteType:"Endpoint",kind:"LinkedField",name:"items",plural:!0,selections:[l,a,o,s,d,c,u,m,v,g,f,p,h,{kind:"RequiredField",field:y,action:"NONE",path:"endpoint_list.items.desired_session_count"},{alias:null,args:null,concreteType:"Routing",kind:"LinkedField",name:"routings",plural:!0,selections:[b,x,S,Z,c],storageKey:null},{args:null,kind:"FragmentSpread",name:"ModelServiceSettingModal_endpoint"},{args:null,kind:"FragmentSpread",name:"EndpointStatusTagFragment"}],storageKey:null}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e,i],kind:"Operation",name:"ServingListPageQuery",selections:[{alias:null,args:r,concreteType:"EndpointList",kind:"LinkedField",name:"endpoint_list",plural:!1,selections:[t,{alias:null,args:null,concreteType:"Endpoint",kind:"LinkedField",name:"items",plural:!0,selections:[l,a,o,s,d,c,u,m,v,g,f,p,h,y,{alias:null,args:null,concreteType:"Routing",kind:"LinkedField",name:"routings",plural:!0,selections:[b,x,S,Z,c,_],storageKey:null},_],storageKey:null}],storageKey:null}]},params:{cacheID:"b3f7122c428341734000f9de6c03928c",id:null,metadata:{},name:"ServingListPageQuery",operationKind:"query",text:'query ServingListPageQuery(\n  $offset: Int!\n  $limit: Int!\n  $projectID: UUID\n) {\n  endpoint_list(offset: $offset, limit: $limit, project: $projectID, filter: "name != \'koalpaca-test\'") {\n    total_count\n    items {\n      name\n      endpoint_id\n      image\n      model\n      domain\n      status\n      project\n      resource_group\n      resource_slots\n      url\n      open_to_public\n      created_at @since(version: "23.09.0")\n      created_user\n      desired_session_count\n      routings {\n        routing_id\n        endpoint\n        session\n        traffic_ratio\n        status\n        id\n      }\n      ...ModelServiceSettingModal_endpoint\n      ...EndpointStatusTagFragment\n      id\n    }\n  }\n}\n\nfragment EndpointStatusTagFragment on Endpoint {\n  id\n  status\n}\n\nfragment ModelServiceSettingModal_endpoint on Endpoint {\n  endpoint_id\n  desired_session_count\n}\n'}}}();r.hash="4bdd65d4de1c5a874a4377337f62fe49",n.default=r},28501:function(e,n,i){i.d(n,{Z:function(){return s}});var r=i(87462),t=i(4519),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},a=i(9491),o=function(e,n){return t.createElement(a.Z,(0,r.Z)({},e,{ref:n,icon:l}))};var s=t.forwardRef(o)},43596:function(e,n,i){i.d(n,{Z:function(){return s}});var r=i(87462),t=i(4519),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},a=i(9491),o=function(e,n){return t.createElement(a.Z,(0,r.Z)({},e,{ref:n,icon:l}))};var s=t.forwardRef(o)},65113:function(e,n,i){i.d(n,{Z:function(){return S}});var r=i(52197),t=i(6851),l=i(10203),a=i(29439),o=i(4519),s=i(43270),d=i.n(s),c=i(49182),u=i(30516),m=i(48698),v=i(69381),g=i(53927),f=i(94382),p=function(e,n){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var t=0;for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)n.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(e,r[t])&&(i[r[t]]=e[r[t]])}return i},h=(0,u.i)((function(e){var n=e.prefixCls,i=e.className,r=e.closeIcon,t=e.closable,l=e.type,s=e.title,u=e.children,h=p(e,["prefixCls","className","closeIcon","closable","type","title","children"]),y=o.useContext(m.E_).getPrefixCls,b=y(),x=n||y("modal"),S=(0,f.ZP)(x),Z=(0,a.Z)(S,2)[1],_="".concat(x,"-confirm"),k={};return k=l?{closable:null!==t&&void 0!==t&&t,title:"",footer:"",children:o.createElement(v.O,Object.assign({},e,{prefixCls:x,confirmPrefixCls:_,rootPrefixCls:b,content:u}))}:{closable:null===t||void 0===t||t,title:s,footer:void 0===e.footer?o.createElement(g.$,Object.assign({},e)):e.footer,children:u},o.createElement(c.s,Object.assign({prefixCls:x,className:d()(Z,"".concat(x,"-pure-panel"),l&&_,l&&"".concat(_,"-").concat(l),i)},h,{closeIcon:(0,g.b)(x,r),closable:t},k))})),y=i(85591);function b(e){return(0,r.ZP)((0,r.uW)(e))}var x=l.Z;x.useModal=y.Z,x.info=function(e){return(0,r.ZP)((0,r.cw)(e))},x.success=function(e){return(0,r.ZP)((0,r.vq)(e))},x.error=function(e){return(0,r.ZP)((0,r.AQ)(e))},x.warning=b,x.warn=b,x.confirm=function(e){return(0,r.ZP)((0,r.Au)(e))},x.destroyAll=function(){for(;t.Z.length;){var e=t.Z.pop();e&&e()}},x.config=r.ai,x._InternalPanelDoNotUseOrYouWillBeFired=h;var S=x}}]);
//# sourceMappingURL=154.c933117b.chunk.js.map