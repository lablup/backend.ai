"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[603],{96090:(e,n,l)=>{l.d(n,{A:()=>p});var o=l(30032),a=l(66464),i=l(83642),t=l(329),r=l(78074),s=l(24128),c=l(45901),u=l.n(c),d=l(76998),m=l(23446);const p=e=>{let{dynamicSteps:n=[1,2,4,8,16,32,64,128,256,512],units:l=["m","g","t","p"],disableAutoUnit:c=!1,min:p="0m",max:y="300p",roundStep:g,..._}=e;const[v,x]=(0,a.A)(_,{defaultValue:"0g"}),[f,k]=null===v||void 0===v?[null,null]:(0,o.E8)(v),h=(0,i.A)(k),P=k||h||l[0],[j,b]=(0,o.E8)(p),[S,A]=(0,o.E8)(y),C=(0,d.useRef)(null);return(0,d.useEffect)((()=>{if(C.current){const e=e=>{var n;const l=null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value;/^\d+(g|m)$/.test(l)&&x(l)},n=C.current;return null===n||void 0===n||n.addEventListener("input",e),()=>{null===n||void 0===n||n.removeEventListener("input",e)}}}),[C,f,k,x]),(0,m.jsx)(t.A,{ref:C,..._,onBlur:()=>{if(u().isNumber(g)&&g>0){var e,n,l;const o=(null===(e=g.toString().split(".")[1])||void 0===e?void 0:e.length)||0;if(isNaN(Math.round(u().toNumber((null===(n=C.current)||void 0===n?void 0:n.value)||"0")/g)*g))return;x("".concat((Math.round(u().toNumber((null===(l=C.current)||void 0===l?void 0:l.value)||"0")/g)*g).toFixed(o)).concat(P))}},value:f,onChange:e=>{x(null===e||void 0===e?e:"".concat(e).concat(P))},max:A===P?S:(0,o.Js)(y,P).number,min:b===P?j:(0,o.Js)(p,P).number,addonAfter:(0,m.jsx)(r.A,{tabIndex:-1,value:P,onChange:e=>{x("".concat(f).concat(e))},onDropdownVisibleChange:e=>{(e&&null===v||void 0===v)&&x("0".concat(P))},options:u().map(l,(e=>({value:e,label:(0,m.jsx)(s.A.Text,{style:{fontFamily:"'SFMono-Regular',Consolas,'Liberation Mono',Menlo,Courier,monospace"},children:e.toUpperCase()+"iB"})}))),suffixIcon:l.length>1?void 0:null,open:l.length>1&&void 0,style:{cursor:l.length>1?void 0:"default"}}),step:0,onStep:(e,o)=>{const a=u().isNull(f)||u().isUndefined(f)?0:f,i=u().sortedIndex(u().sortBy(n),a);let t;t="up"===o.type?a===n[i]?i+1:i:i-1;const r=l.indexOf(P);if(!c&&t<0)if(0===r)x("0".concat(P));else{const e=n[n.length-1],o=l[r-1];x("".concat(e).concat(o))}else if(!c&&t>n.length-1)if(r===l.length-1)x("".concat(a+("up"===o.type?1:-1)).concat(A));else{const e=n[0],o=l[r+1];x("".concat(e).concat(o))}else if(t>=0&&t<n.length){let e=n[t];b===P&&e<j?e=j:A===P&&e>S&&(e=S),x("".concat(e).concat(P))}}})}},34680:(e,n,l)=>{l.d(n,{A:()=>y});var o=l(25339),a=l(62863),i=l(50840),t=l(65080),r=l(36209),s=l(87627),c=l(45901),u=l.n(c),d=l(76998),m=l(77678),p=l(23446);const y=e=>{let{open:n,onRequestClose:l,columns:c,displayedColumnKeys:y,...g}=e;const _=(0,d.useRef)(null),{t:v}=(0,m.Bd)(),{token:x}=i.A.useToken(),f=c.map((e=>{return"string"===typeof e.title?{label:e.title,value:u().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(n=e.title,d.Children.map(n.props.children,(e=>{if("string"===typeof e)return e}))),value:u().toString(e.key)}:{label:void 0,value:u().toString(e.key)};var n}));return(0,p.jsx)(o.A,{title:v("table.SettingTable"),open:n,destroyOnClose:!0,centered:!0,onOk:()=>{var e;null===(e=_.current)||void 0===e||e.validateFields().then((e=>{l(e)})).catch((()=>{}))},onCancel:()=>{l()},...g,children:(0,p.jsxs)(t.A,{ref:_,preserve:!1,initialValues:{selectedColumnKeys:y||f.map((e=>e.value))},layout:"vertical",children:[(0,p.jsx)(t.A.Item,{name:"searchInput",label:v("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,p.jsx)(r.A,{prefix:(0,p.jsx)(a.A,{}),style:{marginBottom:x.marginSM},placeholder:v("table.SearchTableColumn")})}),(0,p.jsx)(t.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>e.searchInput!==n.searchInput,children:e=>{let{getFieldValue:n}=e;const l=n("searchInput")?u().toLower(n("searchInput")):void 0,o=f.map((e=>u().toLower(u().toString(e.label)).includes(l||"")?e:{...e,style:{display:"none"}}));return(0,p.jsx)(t.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},children:(0,p.jsx)(s.A.Group,{options:o,style:{flexDirection:"column"}})})}})]})})}},69647:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteKeyPairResourcePolicy",kind:"LinkedField",name:"delete_keypair_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"KeypairResourcePolicyListMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"KeypairResourcePolicyListMutation",selections:n},params:{cacheID:"fe182323e364c317f26c7193239af22b",id:null,metadata:{},name:"KeypairResourcePolicyListMutation",operationKind:"mutation",text:"mutation KeypairResourcePolicyListMutation(\n  $name: String!\n) {\n  delete_keypair_resource_policy(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="5771729a12a204d27a9cdf5ad31e707f";const a=o},44988:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const o=function(){var e={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"total_resource_slots",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"max_session_lifetime",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"max_concurrent_sessions",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"max_containers_per_session",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"idle_timeout",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"allowed_vfolder_hosts",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KeypairResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"KeyPairResourcePolicy",kind:"LinkedField",name:"keypair_resource_policies",plural:!0,selections:[e,n,l,o,a,i,t,{args:null,kind:"FragmentSpread",name:"KeypairResourcePolicySettingModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"KeypairResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"KeyPairResourcePolicy",kind:"LinkedField",name:"keypair_resource_policies",plural:!0,selections:[e,n,l,o,a,i,t,{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null}],storageKey:null}]},params:{cacheID:"05cd0ba2e87295be2064be1b38441faf",id:null,metadata:{},name:"KeypairResourcePolicyListQuery",operationKind:"query",text:'query KeypairResourcePolicyListQuery {\n  keypair_resource_policies {\n    name\n    total_resource_slots\n    max_session_lifetime\n    max_concurrent_sessions\n    max_containers_per_session\n    idle_timeout\n    allowed_vfolder_hosts\n    ...KeypairResourcePolicySettingModalFragment\n  }\n}\n\nfragment KeypairResourcePolicySettingModalFragment on KeyPairResourcePolicy {\n  name\n  total_resource_slots\n  max_session_lifetime\n  max_concurrent_sessions\n  max_containers_per_session\n  idle_timeout\n  allowed_vfolder_hosts\n  max_vfolder_count @deprecatedSince(version: "23.09.4")\n}\n'}}}();o.hash="86e382131325a58294cf015618b4920b";const a=o},32018:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateKeyPairResourcePolicy",kind:"LinkedField",name:"create_keypair_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"KeypairResourcePolicySettingModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"KeypairResourcePolicySettingModalCreateMutation",selections:n},params:{cacheID:"b52e3e869ccfabb393fb45a48074767e",id:null,metadata:{},name:"KeypairResourcePolicySettingModalCreateMutation",operationKind:"mutation",text:"mutation KeypairResourcePolicySettingModalCreateMutation(\n  $name: String!\n  $props: CreateKeyPairResourcePolicyInput!\n) {\n  create_keypair_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="7c4c5be505f02fa76e7b4db73a1f4b14";const a=o},67941:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KeypairResourcePolicySettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"total_resource_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_session_lifetime",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_concurrent_sessions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_containers_per_session",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_timeout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allowed_vfolder_hosts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null}],type:"KeyPairResourcePolicy",abstractKey:null,hash:"57d4c7b215e0e5dda0632124129e0895"},a=o},91932:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyKeyPairResourcePolicy",kind:"LinkedField",name:"modify_keypair_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"KeypairResourcePolicySettingModalModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"KeypairResourcePolicySettingModalModifyMutation",selections:n},params:{cacheID:"72be648e07857dd6923d7c81f3f19948",id:null,metadata:{},name:"KeypairResourcePolicySettingModalModifyMutation",operationKind:"mutation",text:"mutation KeypairResourcePolicySettingModalModifyMutation(\n  $name: String!\n  $props: ModifyKeyPairResourcePolicyInput!\n) {\n  modify_keypair_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="8c99c8be8781f93fed817a67c86ea966";const a=o},55321:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteProjectResourcePolicy",kind:"LinkedField",name:"delete_project_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProjectResourcePolicyListMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProjectResourcePolicyListMutation",selections:n},params:{cacheID:"9f1218faa2207eff18f5a145f12f87ac",id:null,metadata:{},name:"ProjectResourcePolicyListMutation",operationKind:"mutation",text:"mutation ProjectResourcePolicyListMutation(\n  $name: String!\n) {\n  delete_project_resource_policy(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="2c5a20c6c463174bbfc726a27cdfdcac";const a=o},47862:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const o=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProjectResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"ProjectResourcePolicy",kind:"LinkedField",name:"project_resource_policies",plural:!0,selections:[e,n,l,o,a,{args:null,kind:"FragmentSpread",name:"ProjectResourcePolicySettingModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"ProjectResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"ProjectResourcePolicy",kind:"LinkedField",name:"project_resource_policies",plural:!0,selections:[e,n,l,o,a],storageKey:null}]},params:{cacheID:"fd82efe8df4f63e44d1ce560cebbb87a",id:null,metadata:{},name:"ProjectResourcePolicyListQuery",operationKind:"query",text:'query ProjectResourcePolicyListQuery {\n  project_resource_policies {\n    id\n    name\n    created_at\n    max_vfolder_count @since(version: "23.09.6")\n    max_quota_scope_size @since(version: "23.09.2")\n    ...ProjectResourcePolicySettingModalFragment\n  }\n}\n\nfragment ProjectResourcePolicySettingModalFragment on ProjectResourcePolicy {\n  id\n  name\n  created_at\n  max_vfolder_count @since(version: "23.09.6")\n  max_quota_scope_size @since(version: "23.09.2")\n}\n'}}}();o.hash="1fd938a952e68149bec403bde264acd6";const a=o},29360:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateProjectResourcePolicy",kind:"LinkedField",name:"create_project_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProjectResourcePolicySettingModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProjectResourcePolicySettingModalCreateMutation",selections:n},params:{cacheID:"b94d7a4b8e8341df4e396784abba4203",id:null,metadata:{},name:"ProjectResourcePolicySettingModalCreateMutation",operationKind:"mutation",text:"mutation ProjectResourcePolicySettingModalCreateMutation(\n  $name: String!\n  $props: CreateProjectResourcePolicyInput!\n) {\n  create_project_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="c0683608e8a527146563ba5bd9fcad33";const a=o},94019:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProjectResourcePolicySettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null}],type:"ProjectResourcePolicy",abstractKey:null,hash:"e65e818d16e9d0b54c0ad10641a38504"},a=o},68458:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyProjectResourcePolicy",kind:"LinkedField",name:"modify_project_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProjectResourcePolicySettingModalModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProjectResourcePolicySettingModalModifyMutation",selections:n},params:{cacheID:"aedc4eab77206f7ab189ccd3f2d938b3",id:null,metadata:{},name:"ProjectResourcePolicySettingModalModifyMutation",operationKind:"mutation",text:"mutation ProjectResourcePolicySettingModalModifyMutation(\n  $name: String!\n  $props: ModifyProjectResourcePolicyInput!\n) {\n  modify_project_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="3cd62195489eba58dd9693f1fc9df8ff";const a=o},61989:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteUserResourcePolicy",kind:"LinkedField",name:"delete_user_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserResourcePolicyListMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserResourcePolicyListMutation",selections:n},params:{cacheID:"7be7fa4bc2e6ce7666489318e415d769",id:null,metadata:{},name:"UserResourcePolicyListMutation",operationKind:"mutation",text:"mutation UserResourcePolicyListMutation(\n  $name: String!\n) {\n  delete_user_resource_policy(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="5b565e4db37c96850ac85a92cd4e0290";const a=o},55242:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const o=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"max_session_count_per_model_session",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"max_customized_image_count",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"user_resource_policies",plural:!0,selections:[e,n,l,o,a,i,t,{args:null,kind:"FragmentSpread",name:"UserResourcePolicySettingModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UserResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"user_resource_policies",plural:!0,selections:[e,n,l,o,a,i,t],storageKey:null}]},params:{cacheID:"00b0583474f74c417b06d53115787d3b",id:null,metadata:{},name:"UserResourcePolicyListQuery",operationKind:"query",text:'query UserResourcePolicyListQuery {\n  user_resource_policies {\n    id\n    name\n    created_at\n    max_vfolder_count @since(version: "23.09.6")\n    max_session_count_per_model_session @since(version: "23.09.10")\n    max_quota_scope_size @since(version: "23.09.2")\n    max_customized_image_count @since(version: "24.03.0")\n    ...UserResourcePolicySettingModalFragment\n  }\n}\n\nfragment UserResourcePolicySettingModalFragment on UserResourcePolicy {\n  id\n  name\n  max_vfolder_count @since(version: "23.09.6")\n  max_session_count_per_model_session @since(version: "23.09.10")\n  max_quota_scope_size @since(version: "23.09.2")\n  max_customized_image_count @since(version: "24.03.0")\n}\n'}}}();o.hash="be57da0a1c15efb970cb1e828500e6dc";const a=o},14908:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateUserResourcePolicy",kind:"LinkedField",name:"create_user_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserResourcePolicySettingModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserResourcePolicySettingModalCreateMutation",selections:n},params:{cacheID:"129c4a570d8ae1a075d9aa9261094c48",id:null,metadata:{},name:"UserResourcePolicySettingModalCreateMutation",operationKind:"mutation",text:"mutation UserResourcePolicySettingModalCreateMutation(\n  $name: String!\n  $props: CreateUserResourcePolicyInput!\n) {\n  create_user_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="9c00928ca86d4779838243df247257aa";const a=o},4935:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserResourcePolicySettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_session_count_per_model_session",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_customized_image_count",storageKey:null}],type:"UserResourcePolicy",abstractKey:null,hash:"d93790c2b9fef92baa6999ce770cd9da"},a=o},97662:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyUserResourcePolicy",kind:"LinkedField",name:"modify_user_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserResourcePolicySettingModalModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserResourcePolicySettingModalModifyMutation",selections:n},params:{cacheID:"f33ed379f4871e357183803b340a938a",id:null,metadata:{},name:"UserResourcePolicySettingModalModifyMutation",operationKind:"mutation",text:"mutation UserResourcePolicySettingModalModifyMutation(\n  $name: String!\n  $props: ModifyUserResourcePolicyInput!\n) {\n  modify_user_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="d50cbcfb63bfd30da81fea8968bb6436";const a=o},16603:(e,n,l)=>{l.r(n),l.d(n,{default:()=>ge});var o=l(36009),a=l(30032),i=l(83468),t=l(29871),r=l(16162),s=l(78074),c=l(45901),u=l.n(c),d=l(76998),m=l(23446);const p=e=>{let{...n}=e;const l=(0,r._V)();return(0,m.jsx)(s.A,{...n,children:u().map(l,(e=>(0,m.jsx)(s.A.Option,{value:e,children:e},e)))})};var y=l(25339),g=l(96090),_=l(65080),v=l(87627),x=l(77678);const f=e=>{let{name:n,unlimitedValue:l,children:o,...a}=e;const{t:i}=(0,x.Bd)(),[r,s]=(0,d.useState)(!1),c=_.A.useFormInstance();(0,d.useEffect)((()=>{const e=c.getFieldValue(n);s(e===l)}),[c,n,l]);const u=d.isValidElement(o)?(0,d.cloneElement)(o,{disabled:r}):o,p=r&&d.isValidElement(o)?(0,d.cloneElement)(o,{value:void 0,disabled:r}):void 0;return(0,m.jsxs)(t.A,{direction:"column",align:"start",children:[(0,m.jsx)(_.A.Item,{style:{margin:0},name:n,hidden:r,...a,children:u}),r?(0,m.jsx)(_.A.Item,{style:{margin:0},...a,children:p}):null,(0,m.jsx)(v.A,{checked:r,onChange:e=>{const o=e.target.checked;s(o),o?c.setFieldValue(n,l):c.resetFields([n])},children:i("resourcePolicy.Unlimited")})]})};var k,h,P,j=l(12620),b=l(36209),S=l(29475),A=l(7518),C=l(9788),R=l(329),K=l(3606);const M=1e6,F=1e6,w=e=>{let{existingPolicyNames:n,keypairResourcePolicyFrgmt:o=null,onRequestClose:t,...s}=e;const{t:c}=(0,x.Bd)(),{message:v}=j.A.useApp(),[w]=_.A.useForm(),[q]=(0,r.Hv)(),I=(0,i.CX)(),L=null===I||void 0===I?void 0:I.supports("deprecated-max-vfolder-count-in-keypair-resource-policy"),z=(0,K.useFragment)(void 0!==k?k:k=l(67941),o),[V,T]=(0,K.useMutation)(void 0!==h?h:h=l(32018)),[O,N]=(0,K.useMutation)(void 0!==P?P:P=l(91932)),D=(0,d.useMemo)((()=>{const e=JSON.parse((null===z||void 0===z?void 0:z.total_resource_slots)||"{}");var n;null!==e&&void 0!==e&&e.mem&&(e.mem=null===(n=(0,a.Js)((null===e||void 0===e?void 0:e.mem)+"b","g",2,!0))||void 0===n?void 0:n.numberUnit);let l={};return null===z&&(l={max_session_lifetime:0,max_concurrent_sessions:F,max_containers_per_session:M,idle_timeout:0}),{parsedTotalResourceSlots:e,allowedVfolderHostNames:u().keys(JSON.parse((null===z||void 0===z?void 0:z.allowed_vfolder_hosts)||"{}")),...l,...z}}),[z,null===z||void 0===z?void 0:z.total_resource_slots,null===z||void 0===z?void 0:z.allowed_vfolder_hosts]);return(0,m.jsx)(y.A,{title:c(null===z?"resourcePolicy.CreateResourcePolicy":"resourcePolicy.UpdateResourcePolicy"),onOk:()=>w.validateFields().then((e=>{let n=u().mapValues(null===e||void 0===e?void 0:e.parsedTotalResourceSlots,((e,n)=>{var l;return"mem"===n?null===(l=(0,a.Js)(e,"b",0))||void 0===l?void 0:l.numberFixed:e}));n=u().pickBy(n,u().negate(u().isUndefined));const l=z?JSON.parse(z.allowed_vfolder_hosts||"{}"):{},o=u().fromPairs(u().map(e.allowedVfolderHostNames,(e=>[e,u().get(l,e,[])]))),i={default_for_unspecified:"UNLIMITED",total_resource_slots:JSON.stringify(n||"{}"),max_session_lifetime:null===e||void 0===e?void 0:e.max_session_lifetime,max_concurrent_sessions:null===e||void 0===e?void 0:e.max_concurrent_sessions,max_containers_per_session:null===e||void 0===e?void 0:e.max_containers_per_session,idle_timeout:null===e||void 0===e?void 0:e.idle_timeout,allowed_vfolder_hosts:JSON.stringify(o||"{}")};L||(i.max_vfolder_count=null===e||void 0===e?void 0:e.max_vfolder_count),null===z?V({variables:{name:null===e||void 0===e?void 0:e.name,props:i},onCompleted:(e,n)=>{var l,o;null===e||void 0===e||null===(l=e.create_keypair_resource_policy)||void 0===l||!l.ok||n?(v.error(null===e||void 0===e||null===(o=e.create_keypair_resource_policy)||void 0===o?void 0:o.msg),t()):(v.success(c("resourcePolicy.SuccessfullyCreated")),t(!0))},onError(e){v.error(e.message)}}):O({variables:{name:null===e||void 0===e?void 0:e.name,props:i},onCompleted:(e,n)=>{var l,o;null===e||void 0===e||null===(l=e.modify_keypair_resource_policy)||void 0===l||!l.ok||n?(v.error(null===e||void 0===e||null===(o=e.modify_keypair_resource_policy)||void 0===o?void 0:o.msg),t()):(v.success(c("resourcePolicy.SuccessfullyUpdated")),t(!0))},onError(e){v.error(e.message)}})})).catch((()=>{})),onCancel:()=>t(),destroyOnClose:!0,confirmLoading:T||N,...s,children:(0,m.jsxs)(_.A,{form:w,layout:"vertical",requiredMark:"optional",initialValues:D,preserve:!1,children:[(0,m.jsx)(_.A.Item,{label:c("resourcePolicy.Name"),name:"name",required:!0,rules:[{required:!0,message:c("data.explorer.ValueRequired")},{max:64},{validator:(e,l)=>!z&&null!==n&&void 0!==n&&n.includes(l)?Promise.reject(c("resourcePolicy.ResourcePolicyNameAlreadyExists")):Promise.resolve()}],children:(0,m.jsx)(b.A,{disabled:!!z})}),(0,m.jsx)(_.A.Item,{label:c("resourcePolicy.ResourcePolicy"),required:!0,children:(0,m.jsxs)(S.A,{children:[(0,m.jsxs)(A.A,{gutter:16,children:[(0,m.jsx)(C.A,{span:12,children:(0,m.jsx)(f,{name:["parsedTotalResourceSlots","cpu"],unlimitedValue:void 0,label:null===q||void 0===q?void 0:q.cpu.description,children:(0,m.jsx)(R.A,{min:0,max:512,addonAfter:null===q||void 0===q?void 0:q.cpu.display_unit})})}),(0,m.jsx)(C.A,{span:12,children:(0,m.jsx)(f,{name:["parsedTotalResourceSlots","mem"],unlimitedValue:void 0,label:null===q||void 0===q?void 0:q.mem.description,children:(0,m.jsx)(g.A,{})})})]}),(0,m.jsxs)(A.A,{gutter:16,align:"bottom",children:[(0,m.jsx)(C.A,{span:12,children:(0,m.jsx)(f,{name:["parsedTotalResourceSlots","cuda.device"],unlimitedValue:void 0,label:null===q||void 0===q?void 0:q["cuda.device"].description,children:(0,m.jsx)(R.A,{min:0,max:64,addonAfter:null===q||void 0===q?void 0:q["cuda.device"].display_unit})})}),(0,m.jsx)(C.A,{span:12,children:(0,m.jsx)(f,{name:["parsedTotalResourceSlots","cuda.shares"],unlimitedValue:void 0,label:null===q||void 0===q?void 0:q["cuda.shares"].description,children:(0,m.jsx)(R.A,{min:0,max:256,step:.1,addonAfter:null===q||void 0===q?void 0:q["cuda.shares"].display_unit})})})]})]})}),(0,m.jsx)(_.A.Item,{label:c("resourcePolicy.Sessions"),required:!0,children:(0,m.jsxs)(S.A,{children:[(0,m.jsxs)(A.A,{gutter:16,children:[(0,m.jsx)(C.A,{span:12,children:(0,m.jsx)(f,{name:"max_containers_per_session",unlimitedValue:F,label:c("resourcePolicy.ContainerPerSession"),children:(0,m.jsx)(R.A,{min:0,max:100,style:{width:"100%"}})})}),(0,m.jsx)(C.A,{span:12,children:(0,m.jsx)(f,{name:"max_session_lifetime",unlimitedValue:0,label:c("resourcePolicy.MaxSessionLifetime"),children:(0,m.jsx)(R.A,{min:0,max:100,style:{width:"100%"}})})})]}),(0,m.jsxs)(A.A,{gutter:16,children:[(0,m.jsx)(C.A,{span:12,children:(0,m.jsx)(f,{name:"max_concurrent_sessions",unlimitedValue:M,label:c("resourcePolicy.ConcurrentJobs"),children:(0,m.jsx)(R.A,{min:0,max:100,style:{width:"100%"}})})}),(0,m.jsx)(C.A,{span:12,children:(0,m.jsx)(f,{name:"idle_timeout",unlimitedValue:0,label:c("resourcePolicy.IdleTimeoutSec"),children:(0,m.jsx)(R.A,{min:0,max:15552e3,style:{width:"100%"}})})})]})]})}),(0,m.jsx)(_.A.Item,{label:c("resourcePolicy.Folders"),required:!0,children:(0,m.jsxs)(S.A,{children:[(0,m.jsx)(_.A.Item,{label:c("resourcePolicy.AllowedHosts"),name:"allowedVfolderHostNames",children:(0,m.jsx)(p,{mode:"multiple"})}),L?void 0:(0,m.jsx)(_.A.Item,{label:c("credential.Max#"),name:"max_vfolder_count",children:(0,m.jsx)(R.A,{min:0,max:50})})]})})]})})};var q,I,L=l(8469),z=l(34680),V=l(63718),T=l(97041),O=l(93792),N=l(5336),D=l(44355),U=l(50840),E=l(48713),B=l(6932),$=l(59065),H=l(24128),Q=l(14862);const X=e=>{var n;const{token:o}=U.A.useToken(),{t:r}=(0,x.Bd)(),{message:s}=j.A.useApp(),[c,p]=(0,i.Tw)("initial-fetch"),[y,g]=(0,d.useTransition)(),[_,v]=(0,d.useState)(!1),[f,k]=(0,d.useState)(!1),[h,P]=(0,d.useState)(),[b,S]=(0,d.useState)(),A=(0,i.CX)(),C=null!==(n=null===A||void 0===A?void 0:A.supports("fine-grained-storage-permissions"))&&void 0!==n&&n,{keypair_resource_policies:R}=(0,K.useLazyLoadQuery)(void 0!==q?q:q=l(44988),{},{fetchPolicy:"initial-fetch"===c?"store-and-network":"network-only",fetchKey:c}),[X,J]=(0,K.useMutation)(void 0!==I?I:I=l(69647)),W=[{title:r("resourcePolicy.Name"),dataIndex:"name",key:"name",fixed:"left",sorter:(e,n)=>(0,a._f)(null===e||void 0===e?void 0:e.name,null===n||void 0===n?void 0:n.name)},{title:r("resourcePolicy.Resources"),dataIndex:"total_resource_slots",key:"total_resource_slots",render:(e,n)=>(0,m.jsx)(t.A,{gap:"xxs",children:u().isEmpty(JSON.parse((null===n||void 0===n?void 0:n.total_resource_slots)||"{}"))?"-":u().map(JSON.parse(null===n||void 0===n?void 0:n.total_resource_slots),((e,n)=>(0,m.jsx)(L.Ay,{type:n,value:u().toString(e)},n)))})},{title:r("resourcePolicy.Concurrency"),dataIndex:"max_concurrent_sessions",key:"max_concurrent_sessions",sorter:(e,n)=>null!==e&&void 0!==e&&e.max_concurrent_sessions&&null!==n&&void 0!==n&&n.max_concurrent_sessions?e.max_concurrent_sessions-n.max_concurrent_sessions:1,render:e=>e===F?"\u221e":e},{title:r("resourcePolicy.ClusterSize"),dataIndex:"max_containers_per_session",key:"max_containers_per_session",sorter:(e,n)=>null!==e&&void 0!==e&&e.max_containers_per_session&&null!==n&&void 0!==n&&n.max_containers_per_session?e.max_containers_per_session-n.max_containers_per_session:1,render:e=>e===M?"\u221e":e},{title:r("resourcePolicy.IdleTimeout"),dataIndex:"idle_timeout",key:"idle_timeout",sorter:(e,n)=>null!==e&&void 0!==e&&e.idle_timeout&&null!==n&&void 0!==n&&n.idle_timeout?e.idle_timeout-n.idle_timeout:1,render:e=>e||"\u221e"},{title:r("session.MaxSessionLifetime"),dataIndex:"max_session_lifetime",key:"max_session_lifetime",sorter:(e,n)=>(0,a.Oe)(null===e||void 0===e?void 0:e.max_session_lifetime,null===n||void 0===n?void 0:n.max_session_lifetime,0),render:e=>e||"\u221e"},{title:r("resourcePolicy.StorageNodes"),dataIndex:"allowed_vfolder_hosts",key:"allowed_vfolder_hosts",render:(e,n)=>{const l=C?u().keys(JSON.parse((null===n||void 0===n?void 0:n.allowed_vfolder_hosts)||"{}")):JSON.parse((null===n||void 0===n?void 0:n.allowed_vfolder_hosts)||"{}");return(0,m.jsx)(m.Fragment,{children:u().map(l,(e=>(0,m.jsx)(E.A,{children:e},e)))})}},{title:r("general.Control"),key:"control",fixed:"right",render:(e,n)=>(0,m.jsxs)(t.A,{direction:"row",align:"stretch",children:[(0,m.jsx)(B.Ay,{type:"text",icon:(0,m.jsx)(V.A,{}),style:{color:o.colorInfo},onClick:()=>{S(n)}}),(0,m.jsx)($.A,{title:r("dialog.ask.DoYouWantToProceed"),description:r("dialog.warning.CannotBeUndone"),okType:"danger",okText:r("button.Delete"),onConfirm:()=>{null!==n&&void 0!==n&&n.name&&(P(n.name+c),X({variables:{name:n.name},onCompleted:(e,n)=>{var l;n?s.error(null===(l=n[0])||void 0===l?void 0:l.message):(g((()=>p())),s.success(r("resourcePolicy.SuccessfullyDeleted")))},onError(e){s.error(null===e||void 0===e?void 0:e.message)}}))},children:(0,m.jsx)(B.Ay,{type:"text",icon:(0,m.jsx)(T.A,{style:{color:o.colorError}}),loading:h===(null===n||void 0===n?void 0:n.name)+c,disabled:J&&h!==(null===n||void 0===n?void 0:n.name)+c})})]})}],[Y,G]=(0,D.A)("backendaiwebui.KeypairResourcePolicyList.displayedColumnKeys",{defaultValue:W.map((e=>u().toString(e.key)))});return(0,m.jsxs)(t.A,{direction:"column",align:"stretch",children:[(0,m.jsxs)(t.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:o.paddingContentVertical,paddingLeft:o.paddingContentHorizontalSM,paddingRight:o.paddingContentHorizontalSM},children:[(0,m.jsx)(t.A,{direction:"column",align:"start",children:(0,m.jsx)(H.A.Text,{style:{margin:0,padding:0},children:r("resourcePolicy.KeypairResourcePolicy")})}),(0,m.jsx)(t.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:(0,m.jsxs)(t.A,{gap:"xs",children:[(0,m.jsx)(B.Ay,{icon:(0,m.jsx)(O.A,{}),loading:y,onClick:()=>{g((()=>p()))}}),(0,m.jsx)(B.Ay,{type:"primary",icon:(0,m.jsx)(N.A,{}),onClick:()=>{k(!0)},children:r("button.Create")})]})})]}),(0,m.jsx)(Q.A,{columns:W.filter((e=>null===Y||void 0===Y?void 0:Y.includes(u().toString(e.key)))),dataSource:R,rowKey:"name",scroll:{x:"max-content"},pagination:!1,showSorterTooltip:!1}),(0,m.jsx)(t.A,{justify:"end",style:{padding:o.paddingXXS},children:(0,m.jsx)(B.Ay,{type:"text",icon:(0,m.jsx)(V.A,{}),onClick:()=>{v(!0)}})}),(0,m.jsx)(z.A,{open:_,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&G(null===e||void 0===e?void 0:e.selectedColumnKeys),v(!1)},columns:W,displayedColumnKeys:Y||[]}),(0,m.jsx)(w,{existingPolicyNames:u().map(R,(e=>(null===e||void 0===e?void 0:e.name)||"")),open:!!b||f,keypairResourcePolicyFrgmt:b||null,onRequestClose:e=>{S(null),k(!1),e&&g((()=>{p()}))}})]})};var J,W,Y,G=l(41856);const Z=e=>{let{existingPolicyNames:n,projectResourcePolicyFrgmt:o=null,onRequestClose:r,...s}=e;const{t:c}=(0,x.Bd)(),{token:p}=U.A.useToken(),{message:g}=j.A.useApp(),v=(0,d.useRef)(null),k=(0,i.CX)(),h=null===k||void 0===k?void 0:k.supports("max-vfolder-count-in-user-and-project-resource-policy"),P=null===k||void 0===k?void 0:k.supports("max-quota-scope-size"),S=(0,K.useFragment)(void 0!==J?J:J=l(94019),o),[A,C]=(0,K.useMutation)(void 0!==W?W:W=l(29360)),[M,F]=(0,K.useMutation)(void 0!==Y?Y:Y=l(68458)),w=(0,d.useMemo)((()=>{let e={};null===S&&(e={max_vfolder_count:0,max_quota_scope_size:-1});let n=null===S||void 0===S?void 0:S.max_quota_scope_size;return n=u().isUndefined(n)||-1===n?-1:(0,a.wb)(n),{...e,...S,max_quota_scope_size:n}}),[S,null===S||void 0===S?void 0:S.max_vfolder_count,null===S||void 0===S?void 0:S.max_quota_scope_size]);return(0,m.jsxs)(y.A,{title:c(null===S?"resourcePolicy.CreateResourcePolicy":"resourcePolicy.UpdateResourcePolicy"),onOk:e=>{var n;return null===v||void 0===v||null===(n=v.current)||void 0===n?void 0:n.validateFields().then((e=>{const n={max_vfolder_count:(null===e||void 0===e?void 0:e.max_vfolder_count)||0,max_quota_scope_size:-1===(null===e||void 0===e?void 0:e.max_quota_scope_size)?-1:(0,a._S)(null===e||void 0===e?void 0:e.max_quota_scope_size)};h||delete n.max_vfolder_count,P||delete n.max_quota_scope_size,null===S?A({variables:{name:null===e||void 0===e?void 0:e.name,props:n},onCompleted(e,n){var l,o;null===e||void 0===e||null===(l=e.create_project_resource_policy)||void 0===l||!l.ok||n?(g.error(null===e||void 0===e||null===(o=e.create_project_resource_policy)||void 0===o?void 0:o.msg),r()):(g.success(c("storageHost.ResourcePolicySuccessfullyUpdated")),r(!0))},onError(e){g.error(null===e||void 0===e?void 0:e.message)}}):M({variables:{name:null===e||void 0===e?void 0:e.name,props:n},onCompleted(e,n){var l,o;null===e||void 0===e||null===(l=e.modify_project_resource_policy)||void 0===l||!l.ok||n?(g.error(null===e||void 0===e||null===(o=e.modify_project_resource_policy)||void 0===o?void 0:o.msg),r()):(g.success(c("storageHost.ResourcePolicySuccessfullyUpdated")),r(!0))},onError(e){g.error(null===e||void 0===e?void 0:e.message)}})})).catch((()=>{}))},onCancel:()=>r(),destroyOnClose:!0,confirmLoading:C||F,...s,children:[(0,m.jsx)(G.A,{message:c("storageHost.BeCarefulToSetProjectResourcePolicy"),type:"warning",showIcon:!0,style:{marginBottom:p.marginMD}}),(0,m.jsxs)(_.A,{ref:v,layout:"vertical",requiredMark:"optional",initialValues:w,preserve:!1,children:[(0,m.jsx)(_.A.Item,{label:c("resourcePolicy.Name"),name:"name",required:!0,rules:[{required:!0,message:c("data.explorer.ValueRequired")},{max:255},{validator:(e,l)=>!S&&null!==n&&void 0!==n&&n.includes(l)?Promise.reject(c("resourcePolicy.ResourcePolicyNameAlreadyExists")):Promise.resolve()}],children:(0,m.jsx)(b.A,{disabled:!!S})}),(0,m.jsxs)(t.A,{direction:"column",align:"stretch",gap:"md",style:{marginBottom:p.marginMD},children:[h?(0,m.jsx)(f,{name:"max_vfolder_count",unlimitedValue:0,label:c("resourcePolicy.MaxFolderCount"),style:{width:"100%",margin:0},children:(0,m.jsx)(R.A,{min:0,style:{width:"100%"}})}):null,P?(0,m.jsx)(f,{name:"max_quota_scope_size",unlimitedValue:-1,label:c("storageHost.MaxFolderSize"),style:{width:"100%",margin:0},children:(0,m.jsx)(R.A,{min:0,addonAfter:"GB",style:{width:"100%"}})}):null]})]})]})};var ee,ne,le=l(24717),oe=l(14455),ae=l.n(oe);const ie=()=>{const{token:e}=U.A.useToken(),{t:n}=(0,x.Bd)(),[o,r]=(0,d.useTransition)(),[s,c]=(0,i.Tw)("initial-fetch"),[p,y]=(0,d.useState)(!1),[g,_]=(0,d.useState)(!1),[v,f]=(0,d.useState)(),[k,h]=(0,d.useState)(),P=(0,i.CX)(),j=null===P||void 0===P?void 0:P.supports("max-vfolder-count-in-user-and-project-resource-policy"),b=null===P||void 0===P?void 0:P.supports("max-quota-scope-size"),{project_resource_policies:S}=(0,K.useLazyLoadQuery)(void 0!==ee?ee:ee=l(47862),{},{fetchPolicy:"initial-fetch"===s?"store-and-network":"network-only",fetchKey:s}),[A,C]=(0,K.useMutation)(void 0!==ne?ne:ne=l(55321)),R=(0,a.LY)([{title:n("resourcePolicy.Name"),dataIndex:"name",key:"name",fixed:"left",sorter:(e,n)=>(0,a._f)(null===e||void 0===e?void 0:e.name,null===n||void 0===n?void 0:n.name)},j&&{title:n("resourcePolicy.MaxVFolderCount"),dataIndex:"max_vfolder_count",render:e=>0===u().toNumber(e)?"\u221e":e,sorter:(e,n)=>(0,a.Oe)(null===e||void 0===e?void 0:e.max_vfolder_count,null===n||void 0===n?void 0:n.max_vfolder_count,0)},b&&{title:n("resourcePolicy.MaxQuotaScopeSize"),dataIndex:"max_quota_scope_size",render:e=>-1===e?"\u221e":(0,a.wb)(e),sorter:(e,n)=>(0,a.Oe)(null===e||void 0===e?void 0:e.max_quota_scope_size,null===n||void 0===n?void 0:n.max_quota_scope_size,-1)},{title:"ID",dataIndex:"id",sorter:(e,n)=>(0,a._f)(null===e||void 0===e?void 0:e.id,null===n||void 0===n?void 0:n.id)},{title:n("resourcePolicy.CreatedAt"),dataIndex:"created_at",render:e=>ae()(e).format("lll"),sorter:(e,n)=>(0,a._f)(null===e||void 0===e?void 0:e.created_at,null===n||void 0===n?void 0:n.created_at)},{title:n("general.Control"),fixed:"right",render:(l,o)=>(0,m.jsxs)(t.A,{direction:"row",align:"stretch",children:[(0,m.jsx)(B.Ay,{type:"text",icon:(0,m.jsx)(V.A,{}),style:{color:e.colorInfo},onClick:()=>{h(o)}}),(0,m.jsx)($.A,{title:n("dialog.ask.DoYouWantToProceed"),description:n("dialog.warning.CannotBeUndone"),okType:"danger",okText:n("button.Delete"),onConfirm:()=>{null!==o&&void 0!==o&&o.name&&(f(o.name+s),A({variables:{name:o.name},onCompleted:(e,l)=>{var o;l?le.Ay.error(null===(o=l[0])||void 0===o?void 0:o.message):(r((()=>c())),le.Ay.success(n("resourcePolicy.SuccessfullyDeleted")))},onError(e){le.Ay.error(null===e||void 0===e?void 0:e.message)}}))},children:(0,m.jsx)(B.Ay,{type:"text",icon:(0,m.jsx)(T.A,{style:{color:e.colorError}}),loading:v===(null===o||void 0===o?void 0:o.name)+s,disabled:C&&v!==(null===o||void 0===o?void 0:o.name)+s})})]})}]),[M,F]=(0,D.A)("backendaiwebui.ProjectResourcePolicyList.displayedColumnKeys",{defaultValue:R.map((e=>u().toString(e.key)))});return(0,m.jsxs)(t.A,{direction:"column",align:"stretch",children:[(0,m.jsxs)(t.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:e.paddingContentVertical,paddingLeft:e.paddingContentHorizontalSM,paddingRight:e.paddingContentHorizontalSM},children:[(0,m.jsx)(t.A,{direction:"column",align:"start",children:(0,m.jsx)(H.A.Text,{style:{margin:0,padding:0},children:n("resourcePolicy.ProjectResourcePolicy")})}),(0,m.jsx)(t.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:(0,m.jsxs)(t.A,{gap:"xs",children:[(0,m.jsx)(B.Ay,{icon:(0,m.jsx)(O.A,{}),loading:o,onClick:()=>{r((()=>c()))}}),(0,m.jsx)(B.Ay,{type:"primary",icon:(0,m.jsx)(N.A,{}),onClick:()=>{y(!0)},children:n("button.Create")})]})})]}),(0,m.jsx)(Q.A,{rowKey:"id",showSorterTooltip:!1,columns:u().filter(R,(e=>null===M||void 0===M?void 0:M.includes(u().toString(e.key)))),dataSource:S,scroll:{x:"max-content"},pagination:!1}),(0,m.jsx)(t.A,{justify:"end",style:{padding:e.paddingXXS},children:(0,m.jsx)(B.Ay,{type:"text",icon:(0,m.jsx)(V.A,{}),onClick:()=>{_(!0)}})}),(0,m.jsx)(z.A,{open:g,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&F(null===e||void 0===e?void 0:e.selectedColumnKeys),_(!1)},columns:R,displayedColumnKeys:M||[]}),(0,m.jsx)(Z,{existingPolicyNames:u().map(S,"name"),open:!!k||p,projectResourcePolicyFrgmt:k||null,onRequestClose:e=>{e&&r((()=>c())),h(null),y(!1)}})]})};var te,re,se;const ce=e=>{let{existingPolicyNames:n,userResourcePolicyFrgmt:o=null,onRequestClose:r,...s}=e;const{t:c}=(0,x.Bd)(),{token:p}=U.A.useToken(),{message:g}=j.A.useApp(),v=(0,d.useRef)(null),k=(0,i.CX)(),h=null===k||void 0===k?void 0:k.supports("max-vfolder-count-in-user-and-project-resource-policy"),P=null===k||void 0===k?void 0:k.supports("max-quota-scope-size"),S=null===k||void 0===k?void 0:k.supports("max-session-count-per-model-session"),A=null===k||void 0===k?void 0:k.supports("max-customized-image-count"),C=(0,K.useFragment)(void 0!==te?te:te=l(4935),o),[M,F]=(0,K.useMutation)(void 0!==re?re:re=l(14908)),[w,q]=(0,K.useMutation)(void 0!==se?se:se=l(97662)),I=(0,d.useMemo)((()=>{let e={};null===C&&(e={max_vfolder_count:0,max_quota_scope_size:-1});let n=null===C||void 0===C?void 0:C.max_quota_scope_size;return n=u().isUndefined(n)||-1===n?-1:(0,a.wb)(n),{...e,...C,max_quota_scope_size:n}}),[C,null===C||void 0===C?void 0:C.max_vfolder_count,null===C||void 0===C?void 0:C.max_quota_scope_size]);return(0,m.jsxs)(y.A,{title:c(null===C?"resourcePolicy.CreateResourcePolicy":"resourcePolicy.UpdateResourcePolicy"),onOk:e=>{var n;return null===v||void 0===v||null===(n=v.current)||void 0===n?void 0:n.validateFields().then((e=>{const n={max_vfolder_count:(null===e||void 0===e?void 0:e.max_vfolder_count)||0,max_quota_scope_size:-1===(null===e||void 0===e?void 0:e.max_quota_scope_size)?-1:(0,a._S)(null===e||void 0===e?void 0:e.max_quota_scope_size),max_session_count_per_model_session:null===e||void 0===e?void 0:e.max_session_count_per_model_session,max_customized_image_count:null===e||void 0===e?void 0:e.max_customized_image_count};h||delete n.max_vfolder_count,P||delete n.max_quota_scope_size,S||delete n.max_session_count_per_model_session,A||delete n.max_customized_image_count,null===C?M({variables:{name:null===e||void 0===e?void 0:e.name,props:n},onCompleted(e,n){var l,o;null===e||void 0===e||null===(l=e.create_user_resource_policy)||void 0===l||!l.ok||n?(g.error(null===e||void 0===e||null===(o=e.create_user_resource_policy)||void 0===o?void 0:o.msg),r()):(g.success(c("storageHost.ResourcePolicySuccessfullyUpdated")),r(!0))},onError(e){g.error(null===e||void 0===e?void 0:e.message)}}):w({variables:{name:null===e||void 0===e?void 0:e.name,props:n},onCompleted(e,n){var l,o;null===e||void 0===e||null===(l=e.modify_user_resource_policy)||void 0===l||!l.ok||n?(g.error(null===e||void 0===e||null===(o=e.modify_user_resource_policy)||void 0===o?void 0:o.msg),r()):(g.success(c("storageHost.ResourcePolicySuccessfullyUpdated")),r(!0))},onError(e){g.error(null===e||void 0===e?void 0:e.message)}})})).catch((()=>{}))},onCancel:()=>r(),destroyOnClose:!0,confirmLoading:F||q,...s,children:[(0,m.jsx)(G.A,{message:c("storageHost.BeCarefulToSetUserResourcePolicy"),type:"warning",showIcon:!0,style:{marginBottom:p.marginMD}}),(0,m.jsxs)(_.A,{ref:v,layout:"vertical",requiredMark:"optional",initialValues:I,preserve:!1,children:[(0,m.jsx)(_.A.Item,{label:c("resourcePolicy.Name"),name:"name",required:!0,rules:[{required:!0,message:c("data.explorer.ValueRequired")},{max:255},{validator:(e,l)=>!C&&null!==n&&void 0!==n&&n.includes(l)?Promise.reject(c("resourcePolicy.ResourcePolicyNameAlreadyExists")):Promise.resolve()}],children:(0,m.jsx)(b.A,{disabled:!!C})}),(0,m.jsxs)(t.A,{direction:"column",align:"stretch",gap:"md",style:{marginBottom:p.marginMD},children:[h?(0,m.jsx)(f,{name:"max_vfolder_count",unlimitedValue:0,label:c("resourcePolicy.MaxFolderCount"),style:{width:"100%",margin:0},children:(0,m.jsx)(R.A,{min:0,style:{width:"100%"}})}):null,P?(0,m.jsx)(f,{name:"max_quota_scope_size",unlimitedValue:-1,label:c("storageHost.MaxFolderSize"),style:{width:"100%",margin:0},children:(0,m.jsx)(R.A,{min:0,addonAfter:"GB",style:{width:"100%"}})}):null]}),S?(0,m.jsx)(_.A.Item,{name:"max_session_count_per_model_session",label:c("resourcePolicy.MaxSessionCountPerModelSession"),rules:[{required:!0,message:c("data.explorer.ValueRequired")}],children:(0,m.jsx)(R.A,{min:0,style:{width:"100%"}})}):null,A?(0,m.jsx)(_.A.Item,{name:"max_customized_image_count",label:c("resourcePolicy.MaxCustomizedImageCount"),rules:[{required:!0,message:c("data.explorer.ValueRequired")}],children:(0,m.jsx)(R.A,{min:0,style:{width:"100%"}})}):null]})]})};var ue,de;const me=()=>{const{token:e}=U.A.useToken(),{t:n}=(0,x.Bd)(),{message:o}=j.A.useApp(),[r,s]=(0,d.useTransition)(),[c,p]=(0,i.Tw)("initial-fetch"),[y,g]=(0,d.useState)(!1),[_,v]=(0,d.useState)(!1),[f,k]=(0,d.useState)(),[h,P]=(0,d.useState)(),b=(0,i.CX)(),S=null===b||void 0===b?void 0:b.supports("max-vfolder-count-in-user-and-project-resource-policy"),A=null===b||void 0===b?void 0:b.supports("max-quota-scope-size"),C=null===b||void 0===b?void 0:b.supports("max-session-count-per-model-session"),R=null===b||void 0===b?void 0:b.supports("max-customized-image-count"),{user_resource_policies:M}=(0,K.useLazyLoadQuery)(void 0!==ue?ue:ue=l(55242),{},{fetchPolicy:"initial-fetch"===c?"store-and-network":"network-only",fetchKey:c}),[F,w]=(0,K.useMutation)(void 0!==de?de:de=l(61989)),q=(0,a.LY)([{title:n("resourcePolicy.Name"),dataIndex:"name",key:"name",fixed:"left",sorter:(e,n)=>(0,a._f)(null===e||void 0===e?void 0:e.name,null===n||void 0===n?void 0:n.name)},S&&{title:n("resourcePolicy.MaxVFolderCount"),dataIndex:"max_vfolder_count",render:e=>0===u().toNumber(e)?"\u221e":e,sorter:(e,n)=>(0,a.Oe)(null===e||void 0===e?void 0:e.max_vfolder_count,null===n||void 0===n?void 0:n.max_vfolder_count,0)},C&&{title:n("resourcePolicy.MaxSessionCountPerModelSession"),dataIndex:"max_session_count_per_model_session",sorter:(e,n)=>{var l,o;return(null!==(l=null===e||void 0===e?void 0:e.max_session_count_per_model_session)&&void 0!==l?l:0)-(null!==(o=null===n||void 0===n?void 0:n.max_session_count_per_model_session)&&void 0!==o?o:0)}},A&&{title:n("resourcePolicy.MaxQuotaScopeSize"),dataIndex:"max_quota_scope_size",render:e=>-1===e?"\u221e":(0,a.wb)(e),sorter:(e,n)=>(0,a.Oe)(null===e||void 0===e?void 0:e.max_quota_scope_size,null===n||void 0===n?void 0:n.max_quota_scope_size,-1)},R&&{title:n("resourcePolicy.MaxCustomizedImageCount"),dataIndex:"max_customized_image_count",sorter:(e,n)=>{var l,o;return(null!==(l=null===e||void 0===e?void 0:e.max_customized_image_count)&&void 0!==l?l:0)-(null!==(o=null===n||void 0===n?void 0:n.max_customized_image_count)&&void 0!==o?o:0)}},{title:"ID",dataIndex:"id",sorter:(e,n)=>(0,a._f)(null===e||void 0===e?void 0:e.id,null===n||void 0===n?void 0:n.id)},{title:n("resourcePolicy.CreatedAt"),dataIndex:"created_at",render:e=>ae()(e).format("lll"),sorter:(e,n)=>(0,a._f)(null===e||void 0===e?void 0:e.created_at,null===n||void 0===n?void 0:n.created_at)},{title:n("general.Control"),fixed:"right",render:(l,a)=>(0,m.jsxs)(t.A,{direction:"row",align:"stretch",children:[(0,m.jsx)(B.Ay,{type:"text",icon:(0,m.jsx)(V.A,{}),style:{color:e.colorInfo},onClick:()=>{P(a)}}),(0,m.jsx)($.A,{title:n("dialog.ask.DoYouWantToProceed"),description:n("dialog.warning.CannotBeUndone"),okType:"danger",okText:n("button.Delete"),onConfirm:()=>{null!==a&&void 0!==a&&a.name&&(k(a.name+c),F({variables:{name:a.name},onCompleted:(e,l)=>{var a;l?o.error(null===(a=l[0])||void 0===a?void 0:a.message):(s((()=>p())),o.success(n("resourcePolicy.SuccessfullyDeleted")))},onError(e){o.error(null===e||void 0===e?void 0:e.message)}}))},children:(0,m.jsx)(B.Ay,{type:"text",icon:(0,m.jsx)(T.A,{style:{color:e.colorError}}),loading:f===(null===a||void 0===a?void 0:a.name)+c,disabled:w&&f!==(null===a||void 0===a?void 0:a.name)+c})})]})}]),[I,L]=(0,D.A)("backendaiwebui.UserResourcePolicyList.displayedColumnKeys",{defaultValue:q.map((e=>u().toString(e.key)))});return(0,m.jsxs)(t.A,{direction:"column",align:"stretch",children:[(0,m.jsxs)(t.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:e.paddingContentVertical,paddingLeft:e.paddingContentHorizontalSM,paddingRight:e.paddingContentHorizontalSM},children:[(0,m.jsx)(t.A,{direction:"column",align:"start",children:(0,m.jsx)(H.A.Text,{style:{margin:0,padding:0},children:n("resourcePolicy.UserResourcePolicy")})}),(0,m.jsx)(t.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:(0,m.jsxs)(t.A,{gap:"xs",children:[(0,m.jsx)(B.Ay,{icon:(0,m.jsx)(O.A,{}),loading:r,onClick:()=>{s((()=>p()))}}),(0,m.jsx)(B.Ay,{type:"primary",icon:(0,m.jsx)(N.A,{}),onClick:()=>{g(!0)},children:n("button.Create")})]})})]}),(0,m.jsx)(Q.A,{rowKey:"id",showSorterTooltip:!1,columns:u().filter(q,(e=>null===I||void 0===I?void 0:I.includes(u().toString(e.key)))),dataSource:M,scroll:{x:"max-content"},pagination:!1}),(0,m.jsx)(t.A,{justify:"end",style:{padding:e.paddingXXS},children:(0,m.jsx)(B.Ay,{type:"text",icon:(0,m.jsx)(V.A,{}),onClick:()=>{v(!0)}})}),(0,m.jsx)(z.A,{open:_,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&L(null===e||void 0===e?void 0:e.selectedColumnKeys),v(!1)},columns:q,displayedColumnKeys:I||[]}),(0,m.jsx)(ce,{existingPolicyNames:u().map(M,"name"),open:!!h||y,userResourcePolicyFrgmt:h||null,onRequestClose:e=>{e&&s((()=>p())),P(null),g(!1)}})]})};var pe=l(58346);const ye=(0,pe.withDefault)(pe.StringParam,"keypair"),ge=()=>{const{t:e}=(0,x.Bd)(),[n]=(0,pe.useQueryParam)("tab",ye),l=(0,i.f0)(),t=(0,i.CX)(),r=null===t||void 0===t?void 0:t.supports("configure-user-resource-policy");return(0,m.jsx)(S.A,{activeTabKey:n,onTabChange:e=>{l({pathname:"/resource-policy",search:"?tab=".concat(e)},{params:{tab:e}})},tabList:(0,a.LY)([{key:"keypair",label:e("resourcePolicy.Keypair")},r&&{key:"user",label:e("resourcePolicy.User")},{key:"project",label:e("resourcePolicy.Project")}]),styles:{body:{padding:0,paddingTop:1,overflow:"hidden"}},children:(0,m.jsxs)(d.Suspense,{fallback:(0,m.jsx)(o.A,{}),children:["keypair"===n&&(0,m.jsx)(X,{}),"user"===n&&(0,m.jsx)(me,{}),"project"===n&&(0,m.jsx)(ie,{})]})})}},97041:(e,n,l)=>{l.d(n,{A:()=>s});var o=l(58168),a=l(76998);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var t=l(76228),r=function(e,n){return a.createElement(t.A,(0,o.A)({},e,{ref:n,icon:i}))};const s=a.forwardRef(r)},59065:(e,n,l)=>{l.d(n,{A:()=>S});var o=l(76998),a=l(58736),i=l(34156),t=l.n(i),r=l(23551),s=l(19727),c=l(28037),u=l(20315),d=l(47917),m=l(8357),p=l(6932),y=l(50675),g=l(29457),_=l(41271),v=l(59395),x=l(55864);const f=(0,x.OF)("Popconfirm",(e=>(e=>{const{componentCls:n,iconCls:l,antCls:o,zIndexPopup:a,colorText:i,colorWarning:t,marginXXS:r,marginXS:s,fontSize:c,fontWeightStrong:u,colorTextHeading:d}=e;return{[n]:{zIndex:a,["&".concat(o,"-popover")]:{fontSize:c},["".concat(n,"-message")]:{marginBottom:s,display:"flex",flexWrap:"nowrap",alignItems:"start",["> ".concat(n,"-message-icon ").concat(l)]:{color:t,fontSize:c,lineHeight:1,marginInlineEnd:s},["".concat(n,"-title")]:{fontWeight:u,color:d,"&:only-child":{fontWeight:"normal"}},["".concat(n,"-description")]:{marginTop:r,color:i}},["".concat(n,"-buttons")]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:s}}}}})(e)),(e=>{const{zIndexPopupBase:n}=e;return{zIndexPopup:n+60}}),{resetStyle:!1});var k=function(e,n){var l={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(l[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)n.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(l[o[a]]=e[o[a]])}return l};const h=e=>{const{prefixCls:n,okButtonProps:l,cancelButtonProps:i,title:r,description:s,cancelText:u,okText:v,okType:x="primary",icon:f=o.createElement(a.A,null),showCancel:k=!0,close:h,onConfirm:P,onCancel:j,onPopupClick:b}=e,{getPrefixCls:S}=o.useContext(c.QO),[A]=(0,g.A)("Popconfirm",_.A.Popconfirm),C=(0,m.b)(r),R=(0,m.b)(s);return o.createElement("div",{className:"".concat(n,"-inner-content"),onClick:b},o.createElement("div",{className:"".concat(n,"-message")},f&&o.createElement("span",{className:"".concat(n,"-message-icon")},f),o.createElement("div",{className:"".concat(n,"-message-text")},C&&o.createElement("div",{className:t()("".concat(n,"-title"))},C),R&&o.createElement("div",{className:"".concat(n,"-description")},R))),o.createElement("div",{className:"".concat(n,"-buttons")},k&&o.createElement(p.Ay,Object.assign({onClick:j,size:"small"},i),u||(null===A||void 0===A?void 0:A.cancelText)),o.createElement(d.A,{buttonProps:Object.assign(Object.assign({size:"small"},(0,y.DU)(x)),l),actionFn:P,close:h,prefixCls:S("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},v||(null===A||void 0===A?void 0:A.okText))))},P=e=>{const{prefixCls:n,placement:l,className:a,style:i}=e,r=k(e,["prefixCls","placement","className","style"]),{getPrefixCls:s}=o.useContext(c.QO),u=s("popconfirm",n),[d]=f(u);return d(o.createElement(v.Ay,{placement:l,className:t()(u,a),style:i,content:o.createElement(h,Object.assign({prefixCls:u},r))}))};var j=function(e,n){var l={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(l[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)n.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(l[o[a]]=e[o[a]])}return l};const b=o.forwardRef(((e,n)=>{var l,i;const{prefixCls:d,placement:m="top",trigger:p="click",okType:y="primary",icon:g=o.createElement(a.A,null),children:_,overlayClassName:v,onOpenChange:x,onVisibleChange:k}=e,P=j(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:b}=o.useContext(c.QO),[S,A]=(0,r.A)(!1,{value:null!==(l=e.open)&&void 0!==l?l:e.visible,defaultValue:null!==(i=e.defaultOpen)&&void 0!==i?i:e.defaultVisible}),C=(e,n)=>{A(e,!0),null===k||void 0===k||k(e),null===x||void 0===x||x(e,n)},R=b("popconfirm",d),K=t()(R,v),[M]=f(R);return M(o.createElement(u.A,Object.assign({},(0,s.A)(P,["title"]),{trigger:p,placement:m,onOpenChange:(n,l)=>{const{disabled:o=!1}=e;o||C(n,l)},open:S,ref:n,overlayClassName:K,content:o.createElement(h,Object.assign({okType:y,icon:g},e,{prefixCls:R,close:e=>{C(!1,e)},onConfirm:n=>{var l;return null===(l=e.onConfirm)||void 0===l?void 0:l.call(void 0,n)},onCancel:n=>{var l;C(!1,n),null===(l=e.onCancel)||void 0===l||l.call(void 0,n)}})),"data-popover-inject":!0}),_))}));b._InternalPanelDoNotUseOrYouWillBeFired=P;const S=b}}]);
//# sourceMappingURL=603.72f66204.chunk.js.map