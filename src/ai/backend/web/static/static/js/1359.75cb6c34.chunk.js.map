{"version":3,"file":"static/js/1359.75cb6c34.chunk.js","mappings":"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","sources":["components/FolderInvitationResponseModal.tsx"],"sourcesContent":["import { useSuspendedBackendaiClient } from '../hooks';\nimport {\n  InvitationItem,\n  useVFolderInvitations,\n} from '../hooks/useVFolderInvitations';\nimport VFolderPermissionCell from './VFolderPermissionCell';\nimport { FolderOutlined } from '@ant-design/icons';\nimport { List, Typography, theme, Descriptions, App } from 'antd';\nimport {\n  BAIButton,\n  BAIFlex,\n  BAIModal,\n  BAIModalProps,\n  useErrorMessageResolver,\n} from 'backend.ai-ui';\nimport React, { useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSetBAINotification } from 'src/hooks/useBAINotification';\n\ninterface FolderInvitationResponseModalProps extends BAIModalProps {}\n\nconst FolderInvitationResponseModal: React.FC<\n  FolderInvitationResponseModalProps\n> = (baiModalProps) => {\n  'use memo';\n  const { token } = theme.useToken();\n  const { message } = App.useApp();\n  const { t } = useTranslation();\n  const [\n    invitations,\n    { acceptInvitation, rejectInvitation, updateInvitations },\n  ] = useVFolderInvitations();\n  const baiClient = useSuspendedBackendaiClient();\n  const hasInviterEmail = baiClient.supports('invitation-inviter-email');\n  const { getErrorMessage } = useErrorMessageResolver();\n  const { upsertNotification } = useSetBAINotification();\n\n  useEffect(() => {\n    updateInvitations();\n  }, [updateInvitations]);\n\n  const renderInvitationItem = (item: InvitationItem) => (\n    <List.Item\n      key={item.id}\n      actions={[\n        <BAIButton\n          type=\"primary\"\n          action={async () => {\n            try {\n              await acceptInvitation(item.id);\n              message.success(\n                t('data.invitation.SuccessfullyAcceptedInvitation'),\n              );\n\n              upsertNotification({\n                key: `folder-invitation-success-${item.id}`,\n                icon: 'folder',\n                message: `${item.vfolder_name}: ${t('data.invitation.SuccessfullyAcceptedInvitation')}`,\n                toText: t('data.folders.OpenAFolder'),\n                to: {\n                  search: new URLSearchParams({\n                    folder: item.vfolder_id,\n                  }).toString(),\n                },\n                open: true,\n              });\n            } catch (e: any) {\n              if (\n                e?.statusCode === 409 ||\n                e?.error_code === 'vfolder_create_already-exists'\n              ) {\n                message.error(t('data.FolderAlreadyExists'));\n                return;\n              }\n              message.error(\n                getErrorMessage(\n                  e.message || t('data.invitation.FailedToAcceptInvitation'),\n                ),\n              );\n            }\n          }}\n          key=\"accept\"\n        >\n          {t('summary.Accept')}\n        </BAIButton>,\n        <BAIButton\n          danger\n          action={async () => {\n            try {\n              await rejectInvitation(item.id);\n              message.success(\n                t('data.invitation.SuccessfullyDeclinedInvitation'),\n              );\n            } catch (e: any) {\n              message.error(\n                getErrorMessage(\n                  e?.message || t('data.invitation.FailedToDeclineInvitation'),\n                ),\n              );\n            }\n          }}\n          key=\"decline\"\n        >\n          {t('summary.Decline')}\n        </BAIButton>,\n      ]}\n      style={{\n        padding: token.paddingSM,\n      }}\n    >\n      <List.Item.Meta\n        title={\n          <BAIFlex gap={'xxs'}>\n            <FolderOutlined />\n            <Typography.Text strong>{item.vfolder_name}</Typography.Text>\n          </BAIFlex>\n        }\n        description={\n          <Descriptions\n            size=\"small\"\n            column={1}\n            items={[\n              {\n                key: 'from',\n                label: t('data.From'),\n                children: hasInviterEmail\n                  ? item.inviter_user_email\n                  : item.inviter,\n              },\n              {\n                key: 'permission',\n                label: t('data.Permission'),\n                children: <VFolderPermissionCell permission={item.perm} />,\n              },\n            ]}\n          />\n        }\n      />\n    </List.Item>\n  );\n\n  return (\n    <BAIModal title={t('data.InvitedFolders')} footer={null} {...baiModalProps}>\n      <List\n        dataSource={invitations}\n        renderItem={renderInvitationItem}\n        locale={{\n          emptyText: t('data.invitation.NoMoreInvitation'),\n        }}\n      />\n    </BAIModal>\n  );\n};\n\nexport default FolderInvitationResponseModal;\n"],"names":["baiModalProps","$","_c","token","theme","useToken","message","App","useApp","t","useTranslation","invitations","t0","useVFolderInvitations","acceptInvitation","rejectInvitation","updateInvitations","baiClient","useSuspendedBackendaiClient","t1","supports","hasInviterEmail","getErrorMessage","useErrorMessageResolver","upsertNotification","useSetBAINotification","t2","t3","t4","useEffect","paddingSM","item","_jsx","List","Item","actions","BAIButton","type","action","async","id","success","key","icon","vfolder_name","toText","to","search","URLSearchParams","folder","vfolder_id","toString","open","t5","e","statusCode","error_code","error","children","danger","t6","style","padding","Meta","title","_jsxs","BAIFlex","gap","FolderOutlined","Typography","Text","strong","description","Descriptions","size","column","items","label","inviter_user_email","inviter","VFolderPermissionCell","permission","perm","renderInvitationItem","t7","t8","t9","emptyText","locale","BAIModal","footer"],"sourceRoot":""}