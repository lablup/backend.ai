/*! For license information please see 4462.bb355094.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[4462],{41215:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(85730),l=n(30146),a=n(92240),i=n(79569);const r=e=>{let{value:t,onChange:n,language:r="shell",editable:o=!1,showLineNumbers:c=!0,lineWrapping:d=!1,...u}=e;const[g,p]=(0,s.A)({defaultValue:"",value:t,onChange:n}),h=[(0,l.rI)(r)];return(0,i.jsx)(a.Ay,{theme:"dark",extensions:d?[a.Lz.lineWrapping,...h]:h,editable:o,readOnly:!o,basicSetup:{lineNumbers:c},value:g,onChange:(e,t)=>p(e),...u})}},23951:(e,t,n)=>{n.a(e,(async(e,s)=>{try{n.d(t,{A:()=>O});var l=n(23441),a=n(53767),i=n(88543),r=n(72338),o=n(74325),c=n(96141),d=n(76975),u=n(99159),g=n(57893),p=n(68260),h=n(61539),m=n(11956),y=n(66596),x=n(12221),f=n(1364),b=n(88221),v=n(91043),C=n(8656),A=n(38398),j=n(78502),k=n.n(j),S=n(46976),w=n.n(S),T=n(55093),E=n(33364),I=n(79569),K=e([a]);a=(K.then?(await K)():K)[0];const O=()=>{const{t:e}=(0,E.Bd)(),{token:t}=y.A.useToken(),[n,s]=(0,T.useState)(!1),[j,{toggle:S}]=(0,m.A)(),[K,O]=(0,T.useState)(!1),[P,q]=(0,T.useState)(""),[_,R]=(0,l.Tw)("first"),[D,L]=(0,T.useTransition)(),[M,B]=(0,T.useTransition)(),[F,N]=(0,T.useTransition)();(0,l.CX)();const V=[{title:e("logs.TimeStamp"),dataIndex:"formattedTimeStamp",key:"timeStamp",render:e=>(0,I.jsx)("div",{style:{minWidth:50},children:w().isUndefined(e)?"-":(0,I.jsx)(c.A,{keyword:P,children:e})}),fixed:"left"},{title:e("logs.Status"),dataIndex:"statusCode",key:"status",render:(e,t)=>(0,I.jsx)("div",{style:{minWidth:50},children:w().isUndefined(e)?"-":(0,I.jsx)(c.A,{keyword:P,children:e+" "+t.statusText})})},{title:e("logs.ErrorTitle"),dataIndex:"title",key:"errorTitle",render:e=>(0,I.jsx)("div",{style:{minWidth:50},children:e?(0,I.jsx)(c.A,{keyword:P,children:w().toString(e)}):"-"})},{title:e("logs.ErrorMessage"),dataIndex:"message",key:"errorMessage",render:e=>(0,I.jsx)("div",{style:{minWidth:70},children:e?(0,I.jsx)(c.A,{keyword:P,children:e}):"-"})},{title:e("logs.ErrorType"),dataIndex:"type",key:"errorType",render:e=>(0,I.jsx)("div",{style:{minWidth:60},children:e?(0,I.jsx)(c.A,{keyword:P,children:e}):"-"})},{title:e("logs.Method"),dataIndex:"requestMethod",key:"method",render:e=>(0,I.jsx)("div",{style:{minWidth:60},children:e?(0,I.jsx)(c.A,{keyword:P,children:e}):"-"})},{title:e("logs.RequestUrl"),dataIndex:"requestUrl",key:"requestUrl",render:e=>(0,I.jsx)("div",{style:{minWidth:60},children:e?(0,I.jsx)(c.A,{keyword:P,children:e}):"-"})},{title:e("logs.Parameters"),dataIndex:"requestParameters",key:"requestParameter",render:e=>(0,I.jsx)("div",{style:{minWidth:100},children:e?(0,I.jsx)(c.A,{keyword:P,children:e}):"-"})}],[W,U]=(0,a.a)("ErrorLogList"),z=(0,T.useMemo)((()=>{const e=JSON.parse(localStorage.getItem("backendaiwebui.logs")||"[]");return w().map(e,(e=>({...e,formattedTimeStamp:k()(e.timestamp).format("ll LTS")})))}),[_]),H=(0,T.useMemo)((()=>{if(w().isEmpty(P))return z;const e=new RegExp(`${w().escapeRegExp(P)}`,"i");return w().filter(z,(t=>w().some(t,((t,n)=>"timestamp"!==n&&e.test(w().toString(t))))))}),[P,z]);return(0,I.jsxs)(r.A,{direction:"column",align:"stretch",children:[(0,I.jsxs)(r.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:t.paddingContentVertical,paddingLeft:t.paddingContentHorizontalSM,paddingRight:t.paddingContentHorizontalSM},children:[(0,I.jsxs)(r.A,{direction:"column",align:"start",children:[(0,I.jsx)(x.A.Title,{level:4,style:{margin:0,padding:0},children:e("logs.LogMessages")}),(0,I.jsx)(x.A.Text,{type:"secondary",children:e("logs.UpTo3000Logs")})]}),(0,I.jsxs)(r.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:[(0,I.jsxs)(r.A,{gap:"xs",children:[(0,I.jsx)(f.A,{allowClear:!0,prefix:(0,I.jsx)(d.A,{}),placeholder:e("logs.SearchLogs"),onChange:e=>{B((()=>q(e.target.value)))},style:{width:200}}),(0,I.jsx)(b.A,{onChange:e=>O(e.target.checked),children:e("logs.ShowOnlyError")})]}),(0,I.jsxs)(r.A,{gap:"xs",children:[(0,I.jsx)(v.Ay,{icon:(0,I.jsx)(u.A,{}),loading:D,onClick:()=>{L((()=>R()))},children:e("button.Refresh")}),(0,I.jsx)(v.Ay,{danger:!0,icon:(0,I.jsx)(g.A,{}),onClick:()=>{s(!0)},children:e("button.ClearLogs")})]})]})]}),(0,I.jsx)(C.A,{pagination:{showSizeChanger:!1,style:{marginBottom:0}},loading:!!M&&{indicator:(0,I.jsx)(p.A,{})},scroll:{x:"max-content",y:"calc(100vh - 400px)"},dataSource:K?w().filter(H,(e=>e.isError)):H,columns:w().filter(V,(e=>!w().includes(W,w().toString(null===e||void 0===e?void 0:e.key)))),onRow:e=>({style:{color:e.isError?t.colorError:""}})}),(0,I.jsx)(r.A,{justify:"end",style:{paddingRight:t.paddingXS,paddingBottom:t.paddingXS},children:(0,I.jsx)(v.Ay,{type:"text",icon:(0,I.jsx)(h.A,{}),onClick:()=>{S()}})}),(0,I.jsx)(i.A,{open:n,title:e("dialog.warning.LogDeletion"),okText:e("button.Delete"),okButtonProps:{danger:!0},confirmLoading:F,onOk:()=>{N((()=>{localStorage.removeItem("backendaiwebui.logs"),R(),s(!1)}))},cancelText:e("button.Cancel"),onCancel:()=>s(!1),children:(0,I.jsx)(A.A,{message:e("dialog.warning.CannotBeUndone"),type:"warning"})}),(0,I.jsx)(o.A,{open:j,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&U(w().difference(V.map((e=>w().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),S()},columns:V,hiddenColumnKeys:W})]})};s()}catch(O){s(O)}}))},44621:(e,t,n)=>{n.d(t,{A:()=>y});var s,l=n(23441),a=n(7971),i=n(69949),r=n(88543),o=n(72338),c=n(91043),d=n(8656),u=n(12221),g=n(25913),p=(n(55093),n(33364)),h=n(63821),m=n(79569);const y=e=>{let{onRequestClose:t,...y}=e;const{t:x}=(0,p.Bd)(),[f]=(0,a.U6)(),b=(0,l.CX)(),{data:v}=(0,i.nN)({queryKey:["baiClient.keypair.list",y.open],queryFn:()=>y.open?b.keypair.list(f.email,["access_key","secret_key","is_active"],!0).then((e=>e.keypairs)):null,staleTime:0}),C=null===b||void 0===b?void 0:b.supports("main-access-key"),{user:A}=(0,h.useLazyLoadQuery)(void 0!==s?s:s=n(89318),{email:f.email});return(0,m.jsx)(r.A,{...y,title:x("usersettings.MyKeypairInfo"),centered:!0,onCancel:t,destroyOnClose:!0,width:"auto",footer:[(0,m.jsx)(c.Ay,{onClick:()=>{t()},children:x("button.Close")},"keypairInfoClose")],children:(0,m.jsx)(d.A,{scroll:{x:"max-content"},rowKey:"access_key",dataSource:v,columns:[{title:"#",fixed:"left",render:(e,t,n)=>++n,rowScope:"row"},{title:x("general.AccessKey"),key:"accessKey",dataIndex:"access_key",fixed:"left",render:e=>(0,m.jsxs)(o.A,{direction:"column",align:"start",children:[(0,m.jsx)(u.A.Text,{ellipsis:!0,copyable:!0,children:e}),C&&e===(null===A||void 0===A?void 0:A.main_access_key)&&(0,m.jsx)(g.A,{color:"red",children:x("credential.MainAccessKey")})]})},{title:x("general.SecretKey"),key:"secretKey",dataIndex:"secret_key",fixed:"left",render:e=>(0,m.jsx)(u.A.Text,{ellipsis:!0,copyable:!0,children:e})}]})})}},12444:(e,t,n)=>{n.d(t,{A:()=>C});var s=n(23441),l=n(69949),a=n(88543),i=n(72338),r=n(68260),o=n(66596),c=n(25951),d=n(91043),u=n(65489),g=n(12221),p=n(55093),h=n(33364),m=n(79569);const y=e=>{let{onRequestClose:t,isRefreshModalPending:n,...p}=e;const{t:y}=(0,h.Bd)(),{token:x}=o.A.useToken(),f=(0,s.CX)(),{data:b}=(0,l.nN)({queryKey:["refreshSSHKeypair",p.open],queryFn:()=>p.open?f.refreshSSHKeypair():null});return(0,m.jsx)(a.A,{title:y("usersettings.SSHKeypairGeneration"),closeIcon:!1,footer:[(0,m.jsx)(c.A,{title:y("button.Confirm"),description:y("usersettings.ClearSSHKeypairInput"),onConfirm:t,children:(0,m.jsx)(d.Ay,{children:y("button.Close")})},"close")],...p,children:(0,m.jsxs)(u.A,{spinning:n,indicator:(0,m.jsx)(r.A,{}),children:[(0,m.jsx)(g.A.Text,{strong:!0,children:y("usersettings.PublicKey")}),(0,m.jsxs)(i.A,{direction:"row",align:"start",justify:"between",children:[(0,m.jsx)(g.A.Paragraph,{children:(0,m.jsx)("pre",{style:{width:430,maxHeight:100,overflowY:"scroll",scrollbarWidth:"none"},children:null===b||void 0===b?void 0:b.ssh_public_key})}),(0,m.jsx)(g.A.Text,{copyable:{text:null===b||void 0===b?void 0:b.ssh_public_key},style:{marginTop:x.margin}})]}),(0,m.jsx)(g.A.Text,{strong:!0,children:y("usersettings.PrivateKey")}),(0,m.jsxs)(i.A,{direction:"row",align:"start",justify:"between",children:[(0,m.jsxs)(g.A.Paragraph,{children:[(0,m.jsx)("pre",{style:{width:430,maxHeight:100,overflowY:"scroll",scrollbarWidth:"none"},children:null===b||void 0===b?void 0:b.ssh_private_key}),(0,m.jsx)(g.A.Text,{type:"danger",children:y("usersettings.SSHKeypairGenerationWarning")})]}),(0,m.jsx)(g.A.Text,{copyable:{text:null===b||void 0===b?void 0:b.ssh_private_key},style:{marginTop:x.margin}})]})]})})};var x=n(79597),f=n(1364);const b=e=>{let{onRequestClose:t,onRequestRefresh:n,...i}=e;const{t:r}=(0,h.Bd)(),o=(0,s.CX)(),c=(0,p.useRef)(null),d=(0,l.ET)({mutationFn:e=>o.postSSHKeypair(e)});return(0,m.jsx)(a.A,{title:r("usersettings.SSHKeypairEnterManually"),okText:r("button.Save"),onOk:()=>{var e;null===(e=c.current)||void 0===e||e.validateFields().then((e=>{d.mutate(e,{onSuccess:()=>{n()}}),t()})).catch((()=>{}))},destroyOnClose:!0,...i,children:(0,m.jsxs)(x.A,{ref:c,preserve:!1,layout:"vertical",requiredMark:"optional",children:[(0,m.jsx)(x.A.Item,{name:"pubkey",label:(0,m.jsx)(g.A.Text,{strong:!0,children:r("usersettings.PublicKey")}),rules:[{required:!0,message:r("settings.InputRequired")}],children:(0,m.jsx)(f.A.TextArea,{rows:5,style:{backgroundColor:"rgba(150, 150, 150, 0.1)"}})}),(0,m.jsx)(x.A.Item,{name:"privkey",label:(0,m.jsx)(g.A.Text,{strong:!0,children:r("usersettings.PrivateKey")}),rules:[{required:!0,message:r("settings.InputRequired")}],children:(0,m.jsx)(f.A.TextArea,{rows:5,style:{backgroundColor:"rgba(150, 150, 150, 0.1)"}})})]})})};var v=n(11956);const C=e=>{let{onRequestClose:t,...n}=e;const{t:r}=(0,h.Bd)(),{token:c}=o.A.useToken(),[u,x]=(0,p.useTransition)(),[f,C]=(0,s.Tw)("initial-fetch"),[A,{toggle:j}]=(0,v.A)(!1),[k,{toggle:S}]=(0,v.A)(!1),w=(0,s.CX)(),{data:T}=(0,l.nN)({queryKey:["fetchSSHKeypair",f],queryFn:()=>w.fetchSSHKeypair()});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(a.A,{title:r("usersettings.SSHKeypairGeneration"),onCancel:()=>t(),footer:[(0,m.jsx)(d.Ay,{onClick:()=>t(),children:r("button.Close")},"back"),(0,m.jsx)(d.Ay,{type:"primary",onClick:j,children:r("button.Generate")},"generate"),(0,m.jsx)(d.Ay,{type:"primary",onClick:S,children:r("button.EnterManually")},"enterManually")],...n,children:[(0,m.jsx)(g.A.Text,{strong:!0,children:r("usersettings.CurrentSSHPublicKey")}),null!==T&&void 0!==T&&T.ssh_public_key?(0,m.jsxs)(i.A,{direction:"row",align:"start",justify:"between",children:[(0,m.jsx)(g.A.Paragraph,{children:(0,m.jsx)("pre",{style:{width:430,height:270},children:null===T||void 0===T?void 0:T.ssh_public_key})}),(0,m.jsx)(g.A.Text,{copyable:{text:null===T||void 0===T?void 0:T.ssh_public_key},style:{marginTop:c.margin}})]}):(0,m.jsx)(g.A.Paragraph,{children:(0,m.jsx)("pre",{style:{height:270},children:r("usersettings.NoExistingSSHKeypair")})})]}),(0,m.jsx)(y,{open:A,isRefreshModalPending:u,onRequestClose:()=>{j(),x((()=>{C()}))}}),(0,m.jsx)(b,{open:k,onCancel:S,onRequestClose:()=>{S()},onRequestRefresh:()=>{x((()=>{C()}))}})]})}},21207:(e,t,n)=>{n.d(t,{A:()=>K});var s=n(88543),l=n(72338),a=n(66596),i=n(12221),r=n(29759),o=n(88221),c=n(47543),d=n(77946),u=n(55093),g=n(79569);const p=(0,d.rU)((e=>{let{css:t}=e;return{baiSettingItemCheckbox:t`
    .ant-checkbox {
      align-self: flex-start;
      margin-top: 0.2rem;
    }
  `}})),h=e=>{let{type:t,title:n,description:s,children:d,defaultValue:u,value:h,selectProps:m,onChange:y}=e;const{token:x}=a.A.useToken(),{styles:f}=p();return(0,g.jsxs)(l.A,{direction:"column",align:"start",gap:"xxs",children:[(0,g.jsxs)(l.A,{direction:"row",gap:"xxs",children:[(0,g.jsx)(i.A.Text,{strong:!0,style:{fontSize:x.fontSize},children:n}),void 0!==h&&null!==h&&u!==h&&(0,g.jsx)(r.A,{dot:!0,status:"warning"})]}),"custom"===t&&(0,g.jsxs)(g.Fragment,{children:[s,d]}),"checkbox"===t&&(0,g.jsx)(o.A,{checked:h,onChange:y,className:f.baiSettingItemCheckbox,children:s}),"select"===t&&(0,g.jsxs)(g.Fragment,{children:[s,(0,g.jsx)(c.A,{value:h,popupMatchSelectWidth:!1,onChange:y,...m})]})]})};var m=n(76975),y=n(40991);const x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};var f=n(36462),b=function(e,t){return u.createElement(f.A,(0,y.A)({},e,{ref:t,icon:x}))};const v=u.forwardRef(b);var C=n(11956),A=n(1364),j=n(91043),k=n(11824),S=n(38398),w=n(46976),T=n.n(w),E=n(33364);const I=(0,d.rU)((e=>{let{css:t}=e;return{TabStyles:t`
    .ant-tabs-tab-active {
      font-weight: var(--token-fontWeightSuperStrong, 700);
    }
    .ant-typography-secondary {
      font-weight: normal !important;
    }
  `}})),K=e=>{let{settingGroup:t,tabDirection:n="left"}=e;const{t:r}=(0,E.Bd)(),{token:c}=a.A.useToken(),{styles:d}=I(),[p,y]=(0,u.useState)(""),[x,f]=(0,u.useState)(!1),[b,{toggle:w}]=(0,C.A)(!1),K=(0,u.useMemo)((()=>[{title:r("general.All"),settingItems:T().flatMap(t,(e=>e.settingItems))},...t]),[t]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(l.A,{direction:"column",gap:"md",align:"stretch",style:{padding:c.paddingContentHorizontal,maxWidth:c.screenLG},children:[(0,g.jsxs)(l.A,{justify:"start",gap:"xs",children:[(0,g.jsx)(A.A,{prefix:(0,g.jsx)(m.A,{}),placeholder:r("settings.SearchPlaceholder"),onChange:e=>y(e.target.value),value:p}),(0,g.jsx)(o.A,{onChange:e=>f(e.target.checked),style:{whiteSpace:"nowrap"},children:r("settings.ShowOnlyChanged")}),(0,g.jsx)(j.Ay,{icon:(0,g.jsx)(v,{}),onClick:()=>w(),children:r("button.Reset")})]}),(0,g.jsx)(k.A,{className:d.TabStyles,tabPosition:n?"left":"top",tabBarStyle:{minWidth:200},items:T().map(K,(e=>{const t=e.settingItems.filter((e=>(!x||(e=>null!==e.value&&void 0!==e.value&&e.value!==e.defaultValue)(e))&&(e=>e.title.toLowerCase().includes(p.toLowerCase())||"string"===typeof e.description&&e.description.toLowerCase().includes(p.toLowerCase()))(e)));return{key:e.title,label:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.A.Text,{children:e.title}),(0,g.jsx)(i.A.Text,{type:"secondary",children:` (${t.length})`})]}),children:(0,g.jsx)(l.A,{direction:"column",gap:"lg",align:"start",children:t.map((e=>(0,g.jsx)(h,{...e})))})}}))})]}),(0,g.jsx)(s.A,{open:b,title:r("dialog.ask.DoYouWantToResetChanges"),okText:r("button.Reset"),okButtonProps:{danger:!0},onOk:()=>{T().flatMap(t,(e=>e.settingItems)).forEach((e=>{(null===e||void 0===e?void 0:e.setValue)&&e.setValue(e.defaultValue)})),w()},cancelText:r("button.Cancel"),onCancel:()=>w(),children:(0,g.jsx)(S.A,{showIcon:!0,message:r("dialog.warning.CannotBeUndone"),type:"warning"})})]})}},7469:(e,t,n)=>{n.d(t,{A:()=>b});var s=n(72375),l=n(69949),a=n(41215),i=n(88543),r=n(72338),o=n(57893),c=n(67089),d=n(35364),u=n(91043),g=n(12221),p=n(47543),h=n(46976),m=n.n(h),y=n(55093),x=n(33364),f=n(79569);const b=e=>{let{onRequestClose:t,shellInfo:n,...h}=e;const{t:b}=(0,x.Bd)(),v=c.A.useApp(),[C,A]=(0,y.useState)(".bashrc"),[j,k]=(0,y.useState)(""),[S,w]=(0,y.useState)([]),T=(0,s.QE)(),E=(0,l.ET)({mutationFn:e=>T({method:"POST",url:"/user-config/bootstrap-script",body:{script:e}})}),I=(0,l.ET)({mutationFn:e=>T({method:"PATCH",url:"/user-config/dotfiles",body:{data:e,path:C,permission:"644"}})}),K=(0,l.ET)({mutationFn:e=>T({method:"POST",url:"/user-config/dotfiles",body:{path:C,data:e,permission:"644"}})}),O=(0,l.ET)({mutationFn:()=>T({method:"DELETE",url:"/user-config/dotfiles",body:{path:C}})}),P=()=>{"bootstrap"===n&&T({method:"GET",url:"/user-config/bootstrap-script"}).then((e=>{k(e)})),"userconfig"===n&&T({method:"GET",url:"/user-config/dotfiles"}).then((e=>{const t=m().find(e,{path:C});k((null===t||void 0===t?void 0:t.data)||""),w(e)}))};(0,y.useMemo)((()=>{P()}),[n]);const q=function(){let{closeAfter:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("bootstrap"===n){if(!j)return void v.message.error(b("usersettings.BootstrapScriptEmpty"));E.mutate(j,{onSuccess:n=>{v.message.success(b("usersettings.BootstrapScriptUpdated")),e&&t()},onError:e=>{v.message.error(e.message),console.error(e)}})}if("userconfig"===n){m().find(S,{path:C})?I.mutate(j,{onSuccess:n=>{v.message.success(b("usersettings.DescScriptUpdated")),e?t():P()},onError:e=>{v.message.error(b("usersettings.DescNewUserConfigFileCreated")),console.error(e)}}):K.mutate(j,{onSuccess:n=>{v.message.success(b("usersettings.DescScriptCreated")),e?t():P()},onError:e=>{v.message.error(b("usersettings.DescNewUserConfigFileCreated")),console.error(e)}})}},_=()=>{"bootstrap"===n&&E.mutate("",{onSuccess:e=>{v.message.success(b("usersettings.BootstrapScriptDeleted")),t()},onError:e=>{v.message.error(e.message),console.error(e)}}),"userconfig"===n&&O.mutate(void 0,{onSuccess:e=>{v.message.success(`${b("usersettings.DescScriptDeleted")}${C}`),t()},onError:e=>{v.message.error(e.message),console.error(e)}})};return(0,f.jsx)(i.A,{width:800,title:b("bootstrap"===n?"usersettings.EditBootstrapScript":"usersettings.EditUserConfigScript"),onCancel:()=>t(),okText:b("button.Save"),footer:[(0,f.jsxs)(r.A,{justify:"between",style:{width:"100%"},children:[(0,f.jsx)(r.A,{children:(0,f.jsx)(d.A.Button,{type:"default",danger:!0,style:{width:"fit-content"},menu:{items:[{key:"reset",label:b("button.Reset"),onClick:()=>{v.modal.confirm({title:b("dialog.title.LetsDouble-Check"),content:b("dialog.ask.DoYouWantToResetChanges"),onOk:()=>{"bootstrap"===n&&k(""),"userconfig"===n&&k("")}})},danger:!0}]},onClick:()=>{v.modal.confirm({title:b("dialog.title.LetsDouble-Check"),content:b("dialog.ask.DoYouWantToDeleteSomething",{name:"bootstrap"===n?"Bootstrap script":`${C}`}),onOk:_})},children:(0,f.jsx)(o.A,{})})}),(0,f.jsxs)(r.A,{gap:"sm",children:[(0,f.jsx)(u.Ay,{onClick:()=>t(),style:{width:"fit-content"},children:b("button.Cancel")},"cancel"),(0,f.jsx)(d.A.Button,{type:"primary",onClick:()=>{q()},style:{width:"fit-content"},menu:{items:[{key:"save",label:b("button.SaveWithoutClose"),onClick:()=>q({closeAfter:!1})}]},children:b("button.SaveAndClose")},"submit")]})]})],destroyOnClose:!0,...h,children:(0,f.jsxs)(r.A,{direction:"column",align:"stretch",gap:"sm",children:[(0,f.jsx)(g.A.Text,{children:b("usersettings.BootstrapScriptDescription")}),"userconfig"===n&&(0,f.jsx)(p.A,{defaultValue:".bashrc",onChange:e=>{const t=m().find(S,{path:e});k((null===t||void 0===t?void 0:t.data)||""),A(e)},options:[{value:".bashrc"},{value:".zshrc"},{value:".tmux.conf.local"},{value:".vimrc"},{value:".Renviron"}],style:{width:"200px"}}),(0,f.jsx)(a.A,{onChange:e=>k(e),language:"shell",editable:!0,value:j})]})})}},74325:(e,t,n)=>{n.d(t,{A:()=>h});var s=n(88543),l=n(76975),a=n(66596),i=n(79597),r=n(1364),o=n(88221),c=n(46976),d=n.n(c),u=n(55093),g=n(33364),p=n(79569);const h=e=>{var t;let{open:n,onRequestClose:c,columns:h,hiddenColumnKeys:m,...y}=e;const x=(0,u.useRef)(null),{t:f}=(0,g.Bd)(),{token:b}=a.A.useToken(),v=d().map(h,(e=>{return"string"===typeof e.title?{label:e.title,value:d().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(t=e.title,u.Children.map(t.props.children,(e=>{if("string"===typeof e)return e}))),value:d().toString(e.key)}:{label:void 0,value:d().toString(e.key)};var t}));return(0,p.jsx)(s.A,{title:f("table.SettingTable"),open:n,destroyOnClose:!0,centered:!0,onOk:()=>{var e;null===(e=x.current)||void 0===e||e.validateFields().then((e=>{c(e)})).catch((()=>{}))},onCancel:()=>{c()},...y,children:(0,p.jsxs)(i.A,{ref:x,preserve:!1,initialValues:{selectedColumnKeys:null===(t=d().map(v,"value"))||void 0===t?void 0:t.filter((e=>!d().includes(m,e)))},layout:"vertical",children:[(0,p.jsx)(i.A.Item,{name:"searchInput",label:f("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,p.jsx)(r.A,{prefix:(0,p.jsx)(l.A,{}),style:{marginBottom:b.marginSM},placeholder:f("table.SearchTableColumn")})}),(0,p.jsx)(i.A.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.searchInput!==t.searchInput,children:e=>{let{getFieldValue:t}=e;const n=t("searchInput")?d().toLower(t("searchInput")):void 0,s=d().map(v,(e=>d().toLower(d().toString(e.label)).includes(n||"")?e:{...e,style:{display:"none"}}));return(0,p.jsx)(i.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},children:(0,p.jsx)(o.A.Group,{options:s,style:{flexDirection:"column"}})})}})]})})}},89318:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});const s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"email"}],t=[{kind:"Variable",name:"email",variableName:"email"}],n={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"main_access_key",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MyKeypairInfoModalQuery",selections:[{alias:null,args:t,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[n,s],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MyKeypairInfoModalQuery",selections:[{alias:null,args:t,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[n,s,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"f761ef63ec2ae42985aab29dd90cc78b",id:null,metadata:{},name:"MyKeypairInfoModalQuery",operationKind:"query",text:'query MyKeypairInfoModalQuery(\n  $email: String\n) {\n  user(email: $email) {\n    email\n    main_access_key @since(version: "23.09.7")\n    id\n  }\n}\n'}}}();s.hash="4d6d0135199b7cc95c03a9d90cd46f83";const l=s},53767:(e,t,n)=>{n.a(e,(async(e,s)=>{try{n.d(t,{a:()=>i});var l=n(39768),a=e([l]);l=(a.then?(await a)():a)[0];const i=e=>{const[t,n]=(0,l.q)(`hiddenColumnKeys.${e}`);return[t,n]};s()}catch(i){s(i)}}))},14462:(e,t,n)=>{n.a(e,(async(e,s)=>{try{n.r(t),n.d(t,{default:()=>v});var l=n(23951),a=n(44621),i=n(12444),r=n(21207),o=n(7469),c=n(39768),d=n(61539),u=n(11956),g=n(91043),p=n(72173),h=n(55093),m=n(33364),y=n(2647),x=n(79569),f=e([l,c]);[l,c]=f.then?(await f)():f;const b=(0,y.withDefault)(y.StringParam,"general"),v=()=>{const{t:e}=(0,m.Bd)(),[t,n]=(0,y.useQueryParam)("tab",b),[s,f]=(0,c.q)("desktop_notification"),[v,C]=(0,c.q)("classic_session_launcher"),[A,j]=(0,c.q)("compact_sidebar"),[k,S]=(0,c.q)("selected_language"),[,w]=(0,c.f)("language"),[T,E]=(0,c.q)("automatic_update_check"),[I,K]=(0,c.q)("auto_logout"),[O,{toggle:P}]=(0,u.A)(!1),[q,{toggle:_}]=(0,u.A)(!1),[R,D]=(0,c.q)("preserve_login"),[L,M]=(0,h.useState)("bootstrap"),[B,{toggle:F}]=(0,u.A)(!1),N=[{title:e("usersettings.Preferences"),settingItems:[{type:"checkbox",title:e("usersettings.DesktopNotification"),description:(0,x.jsx)(m.x6,{i18nKey:"usersettings.DescDesktopNotification"}),defaultValue:!1,value:s,setValue:f,onChange:e=>{f(e.target.checked)}},{type:"checkbox",title:e("usersettings.UseCompactSidebar"),description:(0,x.jsx)(m.x6,{i18nKey:"usersettings.DescUseCompactSidebar"}),defaultValue:!1,value:A,setValue:j,onChange:e=>{j(e.target.checked)}},{type:"select",title:e("usersettings.Language"),description:e("usersettings.DescLanguage"),selectProps:{options:[{label:e("language.OSDefault"),value:"default"},{label:e("language.English"),value:"en"},{label:e("language.Korean"),value:"ko"},{label:e("language.Brazilian"),value:"pt-BR"},{label:e("language.Chinese"),value:"zh-CN"},{label:e("language.Chinese (Simplified)"),value:"zh-TW"},{label:e("language.French"),value:"fr"},{label:e("language.Finnish"),value:"fi"},{label:e("language.German"),value:"de"},{label:e("language.Greek"),value:"el"},{label:e("language.Indonesian"),value:"id"},{label:e("language.Italian"),value:"it"},{label:e("language.Japanese"),value:"ja"},{label:e("language.Mongolian"),value:"mn"},{label:e("language.Polish"),value:"pl"},{label:e("language.Portuguese"),value:"pt"},{label:e("language.Russian"),value:"ru"},{label:e("language.Spanish"),value:"es"},{label:e("language.Thai"),value:"th"},{label:e("language.Turkish"),value:"tr"},{label:e("language.Vietnamese"),value:"vi"}],showSearch:!0},defaultValue:"default",value:k||"default",setValue:S,onChange:e=>{S(e);const t=globalThis.navigator.language.split("-")[0],n=new CustomEvent("language-changed",{detail:{language:"default"===e?t:e}});w("default"===e?t:e),document.dispatchEvent(n),console.log(globalThis.backendaioptions.get("selected_language"))}},...[globalThis.isElectron&&{type:"checkbox",title:e("usersettings.KeepLoginSessionInformation"),description:(0,x.jsx)(m.x6,{i18nKey:"usersettings.DescKeepLoginSessionInformation"}),defaultValue:!1,value:R,onChange:e=>{D(e.target.checked)}}].filter(Boolean),{type:"checkbox",title:e("usersettings.AutomaticUpdateCheck"),description:(0,x.jsx)(m.x6,{i18nKey:"usersettings.DescAutomaticUpdateCheck"}),defaultValue:!1,value:T,setValue:E,onChange:e=>{E(e.target.checked)}},{type:"checkbox",title:e("usersettings.AutoLogout"),description:e("usersettings.DescAutoLogout"),defaultValue:!1,value:I,setValue:K,onChange:e=>{K(e.target.checked)}},{type:"custom",title:e("usersettings.MyKeypairInfo"),description:e("usersettings.DescMyKeypairInfo"),children:(0,x.jsx)(g.Ay,{icon:(0,x.jsx)(d.A,{}),onClick:()=>P(),children:e("button.Config")})},{type:"custom",title:e("usersettings.SSHKeypairManagement"),description:e("usersettings.DescSSHKeypairManagement"),children:(0,x.jsx)(g.Ay,{icon:(0,x.jsx)(d.A,{}),onClick:()=>_(),children:e("button.Config")})},{type:"checkbox",title:e("usersettings.ClassicSessionLauncher"),description:e("usersettings.DescClassicSessionLauncher"),defaultValue:!1,value:v,onChange:e=>{C(e.target.checked)}}]},{title:e("usersettings.ShellEnvironments"),settingItems:[{type:"custom",title:e("usersettings.EditBootstrapScript"),children:(0,x.jsx)(g.Ay,{icon:(0,x.jsx)(d.A,{}),onClick:()=>{M("bootstrap"),F()},children:e("button.Config")})},{type:"custom",title:e("usersettings.EditUserConfigScript"),children:(0,x.jsx)(g.Ay,{icon:(0,x.jsx)(d.A,{}),onClick:()=>{M("userconfig"),F()},children:e("button.Config")})}]}];return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(p.A,{activeTabKey:t,onTabChange:e=>n(e),tabList:[{key:"general",label:e("usersettings.General")},{key:"logs",label:e("usersettings.Logs")}],bodyStyle:{padding:0},children:["general"===t&&(0,x.jsx)(r.A,{settingGroup:N}),"logs"===t&&(0,x.jsx)(l.A,{})]}),(0,x.jsx)(a.A,{open:O,onRequestClose:P}),(0,x.jsx)(i.A,{open:q,onRequestClose:_}),L&&(0,x.jsx)(o.A,{open:B,shellInfo:L,onRequestClose:()=>{F()},afterClose:()=>{M(void 0)}})]})};s()}catch(b){s(b)}}))},25951:(e,t,n)=>{n.d(t,{A:()=>S});var s=n(55093),l=n(86435),a=n(62097),i=n.n(a),r=n(53049),o=n(55393),c=n(19541),d=n(81291),u=n(36861),g=n(87413),p=n(91043),h=n(79427),m=n(67905),y=n(18698),x=n(79827),f=n(8836);const b=(0,f.OF)("Popconfirm",(e=>(e=>{const{componentCls:t,iconCls:n,antCls:s,zIndexPopup:l,colorText:a,colorWarning:i,marginXXS:r,marginXS:o,fontSize:c,fontWeightStrong:d,colorTextHeading:u}=e;return{[t]:{zIndex:l,[`&${s}-popover`]:{fontSize:c},[`${t}-message`]:{marginBottom:o,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t}-message-icon ${n}`]:{color:i,fontSize:c,lineHeight:1,marginInlineEnd:o},[`${t}-title`]:{fontWeight:d,color:u,"&:only-child":{fontWeight:"normal"}},[`${t}-description`]:{marginTop:r,color:a}},[`${t}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:o}}}}})(e)),(e=>{const{zIndexPopupBase:t}=e;return{zIndexPopup:t+60}}),{resetStyle:!1});var v=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(s=Object.getOwnPropertySymbols(e);l<s.length;l++)t.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(e,s[l])&&(n[s[l]]=e[s[l]])}return n};const C=e=>{const{prefixCls:t,okButtonProps:n,cancelButtonProps:a,title:i,description:r,cancelText:o,okText:d,okType:x="primary",icon:f=s.createElement(l.A,null),showCancel:b=!0,close:v,onConfirm:C,onCancel:A,onPopupClick:j}=e,{getPrefixCls:k}=s.useContext(c.QO),[S]=(0,m.A)("Popconfirm",y.A.Popconfirm),w=(0,g.b)(i),T=(0,g.b)(r);return s.createElement("div",{className:`${t}-inner-content`,onClick:j},s.createElement("div",{className:`${t}-message`},f&&s.createElement("span",{className:`${t}-message-icon`},f),s.createElement("div",{className:`${t}-message-text`},w&&s.createElement("div",{className:`${t}-title`},w),T&&s.createElement("div",{className:`${t}-description`},T))),s.createElement("div",{className:`${t}-buttons`},b&&s.createElement(p.Ay,Object.assign({onClick:A,size:"small"},a),o||(null===S||void 0===S?void 0:S.cancelText)),s.createElement(u.A,{buttonProps:Object.assign(Object.assign({size:"small"},(0,h.DU)(x)),n),actionFn:C,close:v,prefixCls:k("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},d||(null===S||void 0===S?void 0:S.okText))))},A=e=>{const{prefixCls:t,placement:n,className:l,style:a}=e,r=v(e,["prefixCls","placement","className","style"]),{getPrefixCls:o}=s.useContext(c.QO),d=o("popconfirm",t),[u]=b(d);return u(s.createElement(x.Ay,{placement:n,className:i()(d,l),style:a,content:s.createElement(C,Object.assign({prefixCls:d},r))}))};var j=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(s=Object.getOwnPropertySymbols(e);l<s.length;l++)t.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(e,s[l])&&(n[s[l]]=e[s[l]])}return n};const k=s.forwardRef(((e,t)=>{var n,a;const{prefixCls:u,placement:g="top",trigger:p="click",okType:h="primary",icon:m=s.createElement(l.A,null),children:y,overlayClassName:x,onOpenChange:f,onVisibleChange:v}=e,A=j(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:k}=s.useContext(c.QO),[S,w]=(0,r.A)(!1,{value:null!==(n=e.open)&&void 0!==n?n:e.visible,defaultValue:null!==(a=e.defaultOpen)&&void 0!==a?a:e.defaultVisible}),T=(e,t)=>{w(e,!0),null===v||void 0===v||v(e),null===f||void 0===f||f(e,t)},E=k("popconfirm",u),I=i()(E,x),[K]=b(E);return K(s.createElement(d.A,Object.assign({},(0,o.A)(A,["title"]),{trigger:p,placement:g,onOpenChange:(t,n)=>{const{disabled:s=!1}=e;s||T(t,n)},open:S,ref:t,overlayClassName:I,content:s.createElement(C,Object.assign({okType:h,icon:m},e,{prefixCls:E,close:e=>{T(!1,e)},onConfirm:t=>{var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(void 0,t)},onCancel:t=>{var n;T(!1,t),null===(n=e.onCancel)||void 0===n||n.call(void 0,t)}})),"data-popover-inject":!0}),y))}));k._InternalPanelDoNotUseOrYouWillBeFired=A;const S=k}}]);
//# sourceMappingURL=4462.bb355094.chunk.js.map