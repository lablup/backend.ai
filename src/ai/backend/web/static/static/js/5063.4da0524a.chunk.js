/*! For license information please see 5063.4da0524a.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[5063],{5063:(e,t,n)=>{n.r(t),n.d(t,{default:()=>pe});var o=n(56276),r=n(27184),a=n(59991),i=n(40690),l=n(62378),c=n(20353),s=n(67631),d=n(47699),m=n.n(d),u=n(93449),p=n(17534),h=n(89374);const b=e=>{let t=Object.assign({},((0,a.A)(e),e));const n=(0,i.CX)(),{token:r}=c.A.useToken(),{data:d}=(0,l.nj)({queryKey:["baiClient","service","get_announcement"],queryFn:()=>n.service.get_announcement()});return m().isEmpty(d.message)?"":(0,h.jsx)(s.Rf,(0,o.A)({description:(0,h.jsx)("div",{style:{marginBottom:-1*r.marginSM},children:(0,h.jsx)(u.Ay,{options:{overrides:{p:{props:{style:{marginTop:0,marginBottom:r.marginSM}}}}},children:d.message+"<p></p>"})})},t))};var v=n(65192),g=n(94538),f=n(11863),y=n(39120),x=n(37054),A=n(24841);const j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"};var w=n(91101);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_.apply(this,arguments)}const S=(e,t)=>p.createElement(w.A,_({},e,{ref:t,icon:j}));const k=p.forwardRef(S);var R=n(74031),C=n(87621),I=n(284),z=n(45347),O=n(7957),B=n(62962),M=n(68134);const L=["initialUrl"],U=new RegExp("^(https?)://([\\w./-]{1,}).ipynb$"),F=e=>{const t=(0,y.c)(57);let n,r;if(t[0]!==e){var a=e;({initialUrl:n}=a),r=(0,f.A)(a,L),t[0]=e,t[1]=n,t[2]=r}else n=t[1],r=t[2];const l=(0,p.useRef)(null),{t:c}=(0,B.Bd)(),d=R.A.useApp(),m=(0,i.f0)(),u=(0,i.CX)(),{startSessionWithDefault:b,upsertSessionNotification:v}=(0,M.G)(),{getErrorMessage:g}=(0,s.B7)();let x;t[3]!==d||t[4]!==u._config.default_import_environment||t[5]!==g||t[6]!==b||t[7]!==v||t[8]!==m?(x=async e=>{const t=(e=>(e=e.replace("/blob/","/")).replace("github.com","raw.githubusercontent.com"))(e),n=t.split("/").pop(),o={sessionName:"imported-notebook-".concat((0,s.kX)(5)),environments:{version:u._config.default_import_environment},bootstrap_script:"#!/bin/sh\ncurl -O "+t},r=await b(o);if(r.fulfilled&&r.fulfilled.length>0&&(v(r.fulfilled,[{extraData:{appName:"jupyter",urlPostfix:"&redirect=/notebooks/"+n}}]),m("/session")),null!==r&&void 0!==r&&r.rejected&&r.rejected.length>0){const e=r.rejected[0].reason;d.modal.error({title:null===e||void 0===e?void 0:e.title,content:g(e)})}},t[3]=d,t[4]=u._config.default_import_environment,t[5]=g,t[6]=b,t[7]=v,t[8]=m,t[9]=x):x=t[9];const j=x;let w,_,S,F,D,T,H,N,G,E,q,P,V,K,X,$,Q,W,J,Y,Z,ee,te;return t[10]!==n?(w={url:n},t[10]=n,t[11]=w):w=t[11],t[12]!==j?(_=async e=>{await j(e.url)},t[12]=j,t[13]=_):_=t[13],t[14]!==c?(S=c("import.NotebookURL"),t[14]=c,t[15]=S):S=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(F={required:!0},t[16]=F):F=t[16],t[17]!==c?(D=c("import.InvalidNotebookURL"),t[17]=c,t[18]=D):D=t[18],t[19]!==D?(T={pattern:U,message:D},t[19]=D,t[20]=T):T=t[20],t[21]===Symbol.for("react.memo_cache_sentinel")?(H={type:"string",max:2048},t[21]=H):H=t[21],t[22]!==T?(N=[F,T,H],t[22]=T,t[23]=N):N=t[23],t[24]===Symbol.for("react.memo_cache_sentinel")?(G={flex:1},t[24]=G):G=t[24],t[25]!==c?(E=c("import.NotebookURL"),t[25]=c,t[26]=E):E=t[26],t[27]!==E?(q=(0,h.jsx)(C.A,{placeholder:E}),t[27]=E,t[28]=q):q=t[28],t[29]!==q||t[30]!==S||t[31]!==N?(P=(0,h.jsx)(I.A.Item,{name:"url",label:S,rules:N,style:G,children:q}),t[29]=q,t[30]=S,t[31]=N,t[32]=P):P=t[32],t[33]===Symbol.for("react.memo_cache_sentinel")?(V=(0,h.jsx)(k,{}),t[33]=V):V=t[33],t[34]===Symbol.for("react.memo_cache_sentinel")?(K=async()=>{var e;null===(e=l.current)||void 0===e||e.submit()},t[34]=K):K=t[34],t[35]!==c?(X=c("import.GetAndRunNotebook"),t[35]=c,t[36]=X):X=t[36],t[37]!==X?($=(0,h.jsx)(s.Fv,{icon:V,type:"primary",block:!0,action:K,children:X}),t[37]=X,t[38]=$):$=t[38],t[39]===Symbol.for("react.memo_cache_sentinel")?(Q=(0,h.jsx)(z.A,{}),t[39]=Q):Q=t[39],t[40]!==c?(W=c("import.YouCanCreateNotebookCode"),t[40]=c,t[41]=W):W=t[41],t[42]!==W?(J=(0,h.jsx)(O.A.Paragraph,{children:W}),t[42]=W,t[43]=J):J=t[43],t[44]===Symbol.for("react.memo_cache_sentinel")?(Y=[["url"]],t[44]=Y):Y=t[44],t[45]!==c?(Z=(0,h.jsx)(I.A.Item,{dependencies:Y,children:e=>{const{getFieldValue:t}=e,n=t("url")||"",o={url:n},r=encodeURIComponent(JSON.stringify(o));let a;globalThis.isElectron?a="https://cloud.backend.ai":(a=window.location.protocol+"//"+window.location.hostname,window.location.port&&(a=a+":"+window.location.port));const i="".concat(a,"/start?type=url&data=").concat(r),l='<a href="'.concat(i,'"><img src="https://www.backend.ai/assets/badge.svg" /></a>'),d="[![Run on Backend.AI](https://www.backend.ai/assets/badge.svg)](".concat(i,")"),m=U.test(n)&&n.length<=2048,u=!n||!m;return(0,h.jsxs)(s.OO,{justify:"start",gap:"sm",wrap:"wrap",children:[(0,h.jsx)("img",{src:"/resources/badge.svg",style:{marginTop:5,marginBottom:5},width:"147"}),(0,h.jsxs)(s.OO,{gap:"sm",children:[(0,h.jsx)(A.A,{size:"small",copyable:{text:l},disabled:u,children:c("import.NotebookBadgeCodeHTML")}),(0,h.jsx)(A.A,{size:"small",copyable:{text:d},disabled:u,children:c("import.NotebookBadgeCodeMarkdown")})]})]})}}),t[45]=c,t[46]=Z):Z=t[46],t[47]!==J||t[48]!==Z?(ee=(0,h.jsxs)(s.OO,{direction:"column",wrap:"wrap","data-testid":"panel-notebook-badge-code-section",children:[Q,J,Z]}),t[47]=J,t[48]=Z,t[49]=ee):ee=t[49],t[50]!==r||t[51]!==P||t[52]!==$||t[53]!==w||t[54]!==ee||t[55]!==_?(te=(0,h.jsxs)(I.A,(0,o.A)((0,o.A)({ref:l,layout:"vertical",initialValues:w,onFinish:_},r),{},{children:[P,$,ee]})),t[50]=r,t[51]=P,t[52]=$,t[53]=w,t[54]=ee,t[55]=_,t[56]=te):te=t[56],te};F.displayName="ImportNotebookForm";const D=F;var T=n(30969),H=n(42124),N=n(81187),G=n(86167);const E=["urlType","initialUrl","initialBranch"],q=(e,t,n)=>{const o=e=>"'".concat(e.replace(/'/g,"'\\''"),"'");return["#!/bin/sh","# Create folder and download repository","curl -o /tmp/repo.zip ".concat(o(e)),"mkdir -p /home/work/".concat(o(t)),"cd /home/work/".concat(o(t)),"unzip -o /tmp/repo.zip",n?["# Move contents if in subfolder","if [ -d ".concat(o(n)," ]; then"),"  mv ".concat(o(n),"/* ."),"  rm -rf ".concat(o(n)),"fi"].join("\n"):void 0,"rm -f /tmp/repo.zip"].filter(Boolean).join("\n")},P=e=>{let{urlType:t,initialUrl:n,initialBranch:r}=e,a=(0,f.A)(e,E);const{logger:l}=(0,s.Q7)(),c=(0,p.useRef)(null),d=(0,i.CX)(),{upsertNotification:m}=(0,G.js)(),u=R.A.useApp(),{getErrorMessage:b}=(0,s.B7)(),{t:v}=(0,B.Bd)(),g=(0,s.Gg)(),{startSessionWithDefault:y,upsertSessionNotification:x}=(0,M.G)(),A=async e=>{try{var n;const r="github"===t?await(async e=>{var t;const n=e.trim().replace(/\.git$/,"");let o;try{o=new URL(n)}catch(p){return H.Ay.error(v("import.InvalidGitHubURL")),null}const r=o.pathname.replace(/\/$/,""),a=r.split("/").filter(Boolean);if(a.length<2)return H.Ay.error(v("import.InvalidGitHubURL")),null;const i=a[0],l=a[1],c=r.match(/\/tree\/([\w./-]+)/);let s=null===c||void 0===c?void 0:c[1];if(!s){const e="https://api.github.com/repos/".concat(i,"/").concat(l);try{const t=await fetch(e);if(200!==t.status)return 404===t.status?(H.Ay.error(v("import.RepositoryNotFound")),null):(H.Ay.error(v("import.FailedToFetchRepositoryInformation")),null);s=(await t.json()).default_branch}catch(h){return H.Ay.error(v("import.FailedToFetchRepositoryInformation")),null}}const d=null!==(t=s)&&void 0!==t?t:"master",m=encodeURIComponent(d),u=d.replace(/\//g,"-");return{archiveUrl:"https://codeload.github.com/".concat(i,"/").concat(l,"/zip/").concat(m),repoName:l,branch:d,extractedDirectory:"".concat(l,"-").concat(u)}})(e.url):"gitlab"===t?((e,t)=>{const n=e.trim().replace(/\.git$/,"");let o;try{o=new URL(n)}catch(p){return H.Ay.error(v("import.InvalidGitLabURL")),null}const r=o.pathname.replace(/\/$/,""),a=r.split("/").filter(Boolean);if(a.length<2)return H.Ay.error("Invalid GitLab URL. Must be a valid GitLab repository URL"),null;const i=a[a.length-1],l=r.match(/\/-\/tree\/([^/]+)/),c=null===l||void 0===l?void 0:l[1],s=t&&t.trim()||c||"master",d=encodeURIComponent(s),m=s.replace(/\//g,"-"),u=l?r.slice(0,r.indexOf("/-/tree/")):r;return{archiveUrl:"".concat(o.origin).concat(u,"/-/archive/").concat(d,"/").concat(i,"-").concat(m,".zip"),repoName:i,branch:s,extractedDirectory:"".concat(i,"-").concat(m)}})(e.url,e.gitlabBranch):null;if(!r)return;const a=await g(r.repoName||"imported-from-repo"),i=await d.vfolder.create(a,e.storageHost,"",null!==(n=e.vfolder_usage_mode)&&void 0!==n?n:"general","rw");m({key:"folder-create-success-".concat(i.id),icon:"folder",message:"".concat(i.name,": ").concat(v("data.folders.FolderCreated")),toText:v("data.folders.OpenAFolder"),to:{search:new URLSearchParams({folder:i.id}).toString()},open:!0,duration:0});const l={sessionName:"importing-files-to-".concat(a),environments:{version:d._config.default_import_environment},sessionType:"batch",batch:{command:q(r.archiveUrl,a,r.extractedDirectory),enabled:!0},mount_ids:[i.id]},s=await y(l);var o;if(s.fulfilled&&s.fulfilled.length>0)x(s.fulfilled),null===(o=c.current)||void 0===o||o.resetFields();if(null!==s&&void 0!==s&&s.rejected&&s.rejected.length>0){const e=s.rejected[0].reason;u.modal.error({title:null===e||void 0===e?void 0:e.title,content:b(e)})}}catch(r){u.message.error(b(r))}};return(0,h.jsxs)(I.A,(0,o.A)((0,o.A)({ref:c,layout:"vertical"},a),{},{initialValues:{vfolder_usage_mode:"general",url:n,gitlabBranch:r},children:[(0,h.jsx)(I.A.Item,{children:v("github"===t?"import.RepoWillBeFolder":"import.GitlabRepoWillBeFolder")}),(0,h.jsx)(I.A.Item,{name:"url",label:v("github"==t?"import.GitHubURL":"import.GitlabURL"),rules:[{required:!0},{type:"string",max:2048},{pattern:"github"===t?/^(https?):\/\/github\.com\/([\w./-]{1,})$/:/^(https?):\/\/gitlab\.com\/([\w./-]{1,})$/,message:v("import.WrongURLType")}],children:(0,h.jsx)(C.A,{})}),"gitlab"===t&&(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(I.A.Item,{name:"gitlabBranch",label:v("import.GitlabDefaultBranch"),children:(0,h.jsx)(C.A,{placeholder:"master",maxLength:200})})}),(0,h.jsx)(I.A.Item,{name:"storageHost",label:v("import.StorageHost"),rules:[{required:!0}],children:(0,h.jsx)(T.A,{showUsageStatus:!0,autoSelectType:"usage"})}),(0,h.jsx)(I.A.Item,{label:v("import.VFolderUsageMode"),name:"vfolder_usage_mode",hidden:!0!==d._config.enableModelFolders,required:!0,children:(0,h.jsxs)(N.Ay.Group,{children:[(0,h.jsx)(N.Ay,{value:"general","data-testid":"general-usage-mode",children:v("data.General")}),(0,h.jsx)(N.Ay,{value:"model","data-testid":"model-usage-mode",children:v("data.Models")})]})}),(0,h.jsx)(I.A.Item,{children:(0,h.jsx)(s.Fv,{icon:(0,h.jsx)(k,{}),action:async()=>{try{var e;const t=await(null===(e=c.current)||void 0===e?void 0:e.validateFields());if(!t)return;await A(t)}catch(t){l.error("Form validation failed:",t)}},block:!0,type:"primary",children:v("import.GetToFolder")})})]}))};const V={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"}}]},name:"github",theme:"outlined"};function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},K.apply(this,arguments)}const X=(e,t)=>p.createElement(w.A,K({},e,{ref:t,icon:V}));const $=p.forwardRef(X);const Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M913.9 552.2L805 181.4v-.1c-7.6-22.9-25.7-36.5-48.3-36.5-23.4 0-42.5 13.5-49.7 35.2l-71.4 213H388.8l-71.4-213c-7.2-21.7-26.3-35.2-49.7-35.2-23.1 0-42.5 14.8-48.4 36.6L110.5 552.2c-4.4 14.7 1.2 31.4 13.5 40.7l368.5 276.4c2.6 3.6 6.2 6.3 10.4 7.8l8.6 6.4 8.5-6.4c4.9-1.7 9-4.7 11.9-8.9l368.4-275.4c12.4-9.2 18-25.9 13.6-40.6zM751.7 193.4c1-1.8 2.9-1.9 3.5-1.9 1.1 0 2.5.3 3.4 3L818 394.3H684.5l67.2-200.9zm-487.4 1c.9-2.6 2.3-2.9 3.4-2.9 2.7 0 2.9.1 3.4 1.7l67.3 201.2H206.5l57.8-200zM158.8 558.7l28.2-97.3 202.4 270.2-230.6-172.9zm73.9-116.4h122.1l90.8 284.3-212.9-284.3zM512.9 776L405.7 442.3H620L512.9 776zm157.9-333.7h119.5L580 723.1l90.8-280.8zm-40.7 293.9l207.3-276.7 29.5 99.2-236.8 177.5z"}}]},name:"gitlab",theme:"outlined"};function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},W.apply(this,arguments)}const J=(e,t)=>p.createElement(w.A,W({},e,{ref:t,icon:Q}));const Y=p.forwardRef(J),Z=["initialTab","initialData"],ee=e=>{var t,n,r,a,i;const l=(0,y.c)(49);let c,d,m;if(l[0]!==e){var u=e;({initialTab:d,initialData:c}=u),m=(0,f.A)(u,Z),l[0]=e,l[1]=c,l[2]=d,l[3]=m}else c=l[1],d=l[2],m=l[3];const{t:p}=(0,B.Bd)();let b;l[4]!==p?(b=p("start.StartFromURL"),l[4]=p,l[5]=b):b=l[5];const v=null===(t=c)||void 0===t?void 0:t.url;let g,A,j,w,_;l[6]!==v?(g=(0,h.jsx)(D,{initialUrl:v}),l[6]=v,l[7]=g):g=l[7],l[8]===Symbol.for("react.memo_cache_sentinel")?(A=(0,h.jsx)(s.lI,{}),l[8]=A):A=l[8],l[9]!==p?(j=p("import.ImportNotebook"),l[9]=p,l[10]=j):j=l[10],l[11]!==j?(w=(0,h.jsxs)(s.OO,{gap:"xs",children:[A," ",j]}),l[11]=j,l[12]=w):w=l[12],l[13]!==g||l[14]!==w?(_={key:"notebook",children:g,label:w},l[13]=g,l[14]=w,l[15]=_):_=l[15];const S=null===(n=c)||void 0===n?void 0:n.url,k=null===(r=c)||void 0===r?void 0:r.branch;let R,C,I,z,O;l[16]!==S||l[17]!==k?(R=(0,h.jsx)(P,{urlType:"github",initialUrl:S,initialBranch:k}),l[16]=S,l[17]=k,l[18]=R):R=l[18],l[19]===Symbol.for("react.memo_cache_sentinel")?(C=(0,h.jsx)($,{style:{display:"inline"}}),l[19]=C):C=l[19],l[20]!==p?(I=p("import.ImportGithubRepo"),l[20]=p,l[21]=I):I=l[21],l[22]!==I?(z=(0,h.jsxs)(s.OO,{gap:"xs",children:[C,I]}),l[22]=I,l[23]=z):z=l[23],l[24]!==R||l[25]!==z?(O={key:"github",children:R,label:z},l[24]=R,l[25]=z,l[26]=O):O=l[26];const M=null===(a=c)||void 0===a?void 0:a.url,L=null===(i=c)||void 0===i?void 0:i.branch;let U,F,T,H,N,G,E,q;return l[27]!==M||l[28]!==L?(U=(0,h.jsx)(P,{urlType:"gitlab",initialUrl:M,initialBranch:L}),l[27]=M,l[28]=L,l[29]=U):U=l[29],l[30]===Symbol.for("react.memo_cache_sentinel")?(F=(0,h.jsx)(Y,{style:{display:"inline"}}),l[30]=F):F=l[30],l[31]!==p?(T=p("import.ImportGitlabRepo"),l[31]=p,l[32]=T):T=l[32],l[33]!==T?(H=(0,h.jsxs)(s.OO,{gap:"xs",children:[F,T]}),l[33]=T,l[34]=H):H=l[34],l[35]!==U||l[36]!==H?(N={key:"gitlab",children:U,label:H},l[35]=U,l[36]=H,l[37]=N):N=l[37],l[38]!==O||l[39]!==N||l[40]!==_?(G=[_,O,N],l[38]=O,l[39]=N,l[40]=_,l[41]=G):G=l[41],l[42]!==d||l[43]!==G?(E=(0,h.jsx)(x.A,{defaultActiveKey:d,items:G}),l[42]=d,l[43]=G,l[44]=E):E=l[44],l[45]!==m||l[46]!==b||l[47]!==E?(q=(0,h.jsx)(s.Ib,(0,o.A)((0,o.A)({title:b,width:800,footer:null},m),{},{children:E})),l[45]=m,l[46]=b,l[47]=E,l[48]=q):q=l[48],q};var te=n(34772),ne=n(6855),oe=n(78515);const re=e=>{var t;let n=Object.assign({},((0,a.A)(e),e));const r=(0,te.MU)(),i=(null===(t=(0,p.useContext)(oe.Ay.ConfigContext).theme)||void 0===t?void 0:t.algorithm)===c.A.darkAlgorithm,l={token:{colorPrimary:(0,ne.A)().secondary}};return(0,h.jsx)(oe.Ay,(0,o.A)((0,o.A)({},n),{},{theme:(0,o.A)((0,o.A)({},i?m().merge({},null===r||void 0===r?void 0:r.dark,l,n.theme):m().merge({},null===r||void 0===r?void 0:r.light,l,n.theme)),{},{algorithm:i?c.A.darkAlgorithm:c.A.defaultAlgorithm})}))};var ae=n(10979);const ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"};function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},le.apply(this,arguments)}const ce=(e,t)=>p.createElement(w.A,le({},e,{ref:t,icon:ie}));const se=p.forwardRef(ce);var de=n(40720),me=n(77221),ue=n(73233);const pe=()=>{var e,t,n,a,l,c;const{t:d}=(0,B.Bd)(),u=(0,i.CX)(),f=null!==(e=null===u||void 0===u||null===(t=u._config)||void 0===t?void 0:t.blockList)&&void 0!==e?e:[],y=null!==(n=null===u||void 0===u||null===(a=u._config)||void 0===a?void 0:a.inactiveList)&&void 0!==n?n:[],x=null!==(l=null===u||void 0===u||null===(c=u._config)||void 0===c?void 0:c.enableModelFolders)&&void 0!==l&&l,A=(0,i.f0)(),[j,w]=(0,p.useState)(!1),[_,S]=(0,p.useState)(!1),k=(0,de.zy)(),[R,C]=(0,p.useState)(),{upsertNotification:I}=(0,G.js)(),[z]=(0,me.A)(),[O,M]=(0,ue.useQueryParams)({type:(0,ue.withDefault)(ue.StringParam,void 0),data:(0,ue.withDefault)(ue.JsonParam,void 0)}),L=(0,p.useMemo)((()=>{const e=k.search.substring(1);return O.type||!e||e.includes("=")?null:e}),[k.search,O.type]),U=(0,p.useEffectEvent)((()=>{if("url"===O.type&&O.data)C({initialTab:"notebook",initialData:O.data}),S(!0),M({type:void 0,data:void 0});else if(L){const e="https://github.com/".concat(L);C({initialTab:"notebook",initialData:{url:e}}),S(!0),M({type:void 0,data:void 0},"replace")}}));(0,p.useEffect)((()=>{U()}),[]),(0,p.useEffect)((()=>{z.length<=0||I({key:"invitedFolders",message:d("data.InvitedFoldersTooltip",{count:z.length}),to:{search:new URLSearchParams({invitation:"true"}).toString()},open:!0,duration:0})}),[z.length,d,I]);const F=(0,s.YM)([{id:"createFolder",requiredMenuKey:"data",rowSpan:3,columnSpan:1,columnOffset:{6:0,4:0},data:{content:(0,h.jsx)(r.A,{title:d("start.CreateFolder"),description:d("start.CreateFolderDesc"),buttonText:d("start.button.CreateFolder"),icon:(0,h.jsx)(s.cQ,{}),onClick:()=>w(!0)})}},{id:"startSession",requiredMenuKey:"job",rowSpan:3,columnSpan:1,columnOffset:{6:1,4:1},data:{content:(0,h.jsx)(r.A,{title:d("start.StartSession"),description:d("start.StartSessionDesc"),buttonText:d("start.button.StartSession"),icon:(0,h.jsx)(s.Q2,{}),onClick:()=>A("/session/start")})}},{id:"startBatchSession",requiredMenuKey:"job",rowSpan:3,columnSpan:1,columnOffset:{6:2,4:2},data:{content:(0,h.jsx)(r.A,{title:d("start.StartBatchSession"),description:d("start.StartBatchSessionDesc"),buttonText:d("start.button.StartSession"),icon:(0,h.jsx)(s.y1,{}),onClick:()=>{const e=new URLSearchParams;e.set("step","0"),e.set("formValues",JSON.stringify({sessionType:"batch"})),A("/session/start?".concat(e.toString()))}})}},x&&{id:"modelService",rowSpan:3,requiredMenuKey:"serving",columnSpan:1,columnOffset:{6:0,4:0},data:{content:(0,h.jsx)(re,{children:(0,h.jsx)(r.A,{title:d("start.ModelService"),description:d("start.ModelServiceDesc"),buttonText:d("start.button.ModelService"),icon:(0,h.jsx)(se,{}),onClick:()=>A("/service/start")})})}},{id:"importFromURL",requiredMenuKey:"import",rowSpan:3,columnSpan:1,columnOffset:{6:3,4:3},data:{content:(0,h.jsx)(r.A,{title:d("start.StartFromURL"),description:d("start.StartFromURLDesc"),buttonText:d("start.button.StartNow"),icon:(0,h.jsx)(s.xe,{}),onClick:()=>{S(!0)}})}}]).filter((e=>!m().includes([...f,...y],e.requiredMenuKey))),[D,T]=(0,ae.q)("start_page_board_items"),H=m().filter(F,(e=>!m().find(D,(t=>t.id===e.id)))),N=[...(0,s.YM)(m().map(D,(e=>{var t;const n=null===(t=m().find(F,(t=>t.id===e.id)))||void 0===t?void 0:t.data;return n?(0,o.A)((0,o.A)({},e),{},{data:n}):void 0}))),...H];return(0,h.jsxs)(s.OO,{direction:"column",gap:"md",align:"stretch",children:[(0,h.jsx)(b,{showIcon:!0,closable:!0}),(0,h.jsx)(v.A,{movable:!0,items:N,onItemsChange:e=>{const t=[...e.detail.items];T(m().map(t,(e=>m().omit(e,"data"))))}}),m().isEmpty(N)&&(0,h.jsx)(s.Rf,{type:"info",description:d("start.NoStartItems"),showIcon:!0}),(0,h.jsx)(s.Xc,{children:(0,h.jsx)(g.A,{open:j,onRequestClose:e=>{w(!1),e&&A("/data")}})}),(0,h.jsx)(s.Xc,{children:(0,h.jsx)(ee,{open:_,onCancel:()=>{S(!1),C(void 0)},initialTab:null===R||void 0===R?void 0:R.initialTab,initialData:null===R||void 0===R?void 0:R.initialData})})]})}},65192:(e,t,n)=>{n.d(t,{A:()=>y});var o=n(56276),r=n(11863),a=n(7871),i=n(81997),l=n(70541),c=n(70974),s=n(34754),d=n.n(s),m=n(89374);const u=["items","resizable","movable","bordered"];var p,h,b,v,g;const f=(0,c.rU)((e=>{let{css:t,token:n}=e;return{board:t(p||(p=(0,a.A)(["\n      .bai_board_placeholder {\n        border-radius: var(--token-borderRadius) !important;\n      }\n      .bai_board_placeholder--active {\n        background-color: var(--token-colorSplit) !important ;\n      }\n      .bai_board_placeholder--hover {\n        background-color: var(--token-colorPrimaryHover) !important ;\n        // FIXME: global token doesn't exist, so opacity fits color\n        opacity: 0.3;\n      }\n      .bai_board_handle button span {\n        color: "," !important;\n        padding-left: 5px !important;\n      }\n      .bai_board_header {\n        padding: 0 !important;\n        padding-top: ","px !important;\n      }\n      .bai_board_resizer button span {\n        color: "," !important;\n      }\n      .bai_board_container-override\n        > div:first-child\n        > div:nth-child(2)\n        > div:first-child {\n        padding: 0 !important;\n      }\n    "])),n.colorTextQuaternary,n.padding-1,n.colorTextQuaternary),disableResize:t(h||(h=(0,a.A)(["\n      .bai_board_resizer {\n        display: none !important;\n      }\n    "]))),disableMove:t(b||(b=(0,a.A)(["\n      .bai_board_handle {\n        display: none !important;\n      }\n      .bai_board_header {\n        display: none !important;\n      }\n    "]))),boardItems:t(v||(v=(0,a.A)(["\n      & > div:first-child {\n        border-radius: var(--token-borderRadius) !important;\n        background-color: var(--token-colorBgContainer) !important;\n        border: 1px solid "," !important;\n      }\n\n      & > div:first-child > div:first-child > div:first-child {\n        margin-bottom: var(--token-margin);\n        background-color: var(--token-colorBgContainer) !important;\n        position: absolute;\n        z-index: 1;\n      }\n    "])),n.colorBorderSecondary),disableBorder:t(g||(g=(0,a.A)(["\n      & > div:first-child {\n        border: none !important;\n      }\n    "])))}})),y=e=>{let{items:t,resizable:n=!1,movable:a=!1,bordered:c=!1}=e,s=(0,r.A)(e,u);const{styles:p}=f();return(0,m.jsx)(i.A,(0,o.A)({className:d()(p.board,!a&&p.disableMove,!n&&p.disableResize),empty:!0,renderItem:e=>{var t;return(0,m.jsx)(l.A,(0,o.A)((0,o.A)({className:d()(p.boardItems,!c&&p.disableBorder),i18nStrings:{dragHandleAriaLabel:"",dragHandleAriaDescription:"",resizeHandleAriaLabel:"",resizeHandleAriaDescription:""}},e),{},{children:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.content}),e.id)},items:t,i18nStrings:(()=>{const e=(e,t,n)=>[e,t.length>0?"Conflicts with ".concat(t.map((e=>e.data.title)).join(", "),"."):"",n.length>0?"Disturbed ".concat(n.length," items."):""].filter(Boolean).join(" ");return{liveAnnouncementDndStarted:e=>"resize"===e?"Resizing":"Dragging",liveAnnouncementDndItemReordered:t=>{const n="column ".concat(t.placement.x+1),o="row ".concat(t.placement.y+1);return e("Item moved to ".concat("horizontal"===t.direction?n:o,"."),t.conflicts,t.disturbed)},liveAnnouncementDndItemResized:t=>{const n=t.isMinimalColumnsReached?" (minimal)":"",o=t.isMinimalRowsReached?" (minimal)":"",r="horizontal"===t.direction?"columns ".concat(t.placement.width).concat(n):"rows ".concat(t.placement.height).concat(o);return e("Item resized to ".concat(r,"."),t.conflicts,t.disturbed)},liveAnnouncementDndItemInserted:t=>{const n="column ".concat(t.placement.x+1),o="row ".concat(t.placement.y+1);return e("Item inserted to ".concat(n,", ").concat(o,"."),t.conflicts,t.disturbed)},liveAnnouncementDndCommitted:e=>"".concat(e," committed"),liveAnnouncementDndDiscarded:e=>"".concat(e," discarded"),liveAnnouncementItemRemoved:t=>e("Removed item ".concat(t.item.data.title,"."),[],t.disturbed),navigationAriaLabel:"Board navigation",navigationAriaDescription:"Click on non-empty item to move focus over",navigationItemAriaLabel:e=>e?e.data.title:"Empty"}})()},s))}}}]);
//# sourceMappingURL=5063.4da0524a.chunk.js.map