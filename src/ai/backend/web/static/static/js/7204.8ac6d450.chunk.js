/*! For license information please see 7204.8ac6d450.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[7204],{15715:(e,t,n)=>{n.d(t,{A:()=>o});const o=(0,n(61099).A)("folder-input",[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]])},24392:(e,t,n)=>{n.d(t,{A:()=>y});var o=n(56276),i=n(11863),r=n(7871),a=n(45150),l=n(7804),c=n(6294),s=n(70900),d=n.n(s),m=n(26862);const u=["items","resizable","movable","bordered"];var p,h,b,v,g;const f=(0,c.rU)((e=>{let{css:t,token:n}=e;return{board:t(p||(p=(0,r.A)(["\n      .bai_board_placeholder {\n        border-radius: var(--token-borderRadius) !important;\n      }\n      .bai_board_placeholder--active {\n        background-color: var(--token-colorSplit) !important ;\n      }\n      .bai_board_placeholder--hover {\n        background-color: var(--token-colorPrimaryHover) !important ;\n        // FIXME: global token doesn't exist, so opacity fits color\n        opacity: 0.3;\n      }\n      .bai_board_handle button span {\n        color: "," !important;\n        padding-left: 5px !important;\n      }\n      .bai_board_header {\n        padding: 0 !important;\n        padding-top: ","px !important;\n      }\n      .bai_board_resizer button span {\n        color: "," !important;\n      }\n      .bai_board_container-override\n        > div:first-child\n        > div:nth-child(2)\n        > div:first-child {\n        padding: 0 !important;\n      }\n    "])),n.colorTextQuaternary,n.padding-1,n.colorTextQuaternary),disableResize:t(h||(h=(0,r.A)(["\n      .bai_board_resizer {\n        display: none !important;\n      }\n    "]))),disableMove:t(b||(b=(0,r.A)(["\n      .bai_board_handle {\n        display: none !important;\n      }\n      .bai_board_header {\n        display: none !important;\n      }\n    "]))),boardItems:t(v||(v=(0,r.A)(["\n      & > div:first-child {\n        border-radius: var(--token-borderRadius) !important;\n        background-color: var(--token-colorBgContainer) !important;\n        border: 1px solid "," !important;\n      }\n\n      & > div:first-child > div:first-child > div:first-child {\n        margin-bottom: var(--token-margin);\n        background-color: var(--token-colorBgContainer) !important;\n        position: absolute;\n        z-index: 1;\n      }\n    "])),n.colorBorderSecondary),disableBorder:t(g||(g=(0,r.A)(["\n      & > div:first-child {\n        border: none !important;\n      }\n    "])))}})),y=e=>{let{items:t,resizable:n=!1,movable:r=!1,bordered:c=!1}=e,s=(0,i.A)(e,u);const{styles:p}=f();return(0,m.jsx)(a.A,(0,o.A)({className:d()(p.board,!r&&p.disableMove,!n&&p.disableResize),empty:!0,renderItem:e=>{var t;return(0,m.jsx)(l.A,(0,o.A)((0,o.A)({className:d()(p.boardItems,!c&&p.disableBorder),i18nStrings:{dragHandleAriaLabel:"",dragHandleAriaDescription:"",resizeHandleAriaLabel:"",resizeHandleAriaDescription:""}},e),{},{children:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.content}),e.id)},items:t,i18nStrings:(()=>{const e=(e,t,n)=>[e,t.length>0?"Conflicts with ".concat(t.map((e=>e.data.title)).join(", "),"."):"",n.length>0?"Disturbed ".concat(n.length," items."):""].filter(Boolean).join(" ");return{liveAnnouncementDndStarted:e=>"resize"===e?"Resizing":"Dragging",liveAnnouncementDndItemReordered:t=>{const n="column ".concat(t.placement.x+1),o="row ".concat(t.placement.y+1);return e("Item moved to ".concat("horizontal"===t.direction?n:o,"."),t.conflicts,t.disturbed)},liveAnnouncementDndItemResized:t=>{const n=t.isMinimalColumnsReached?" (minimal)":"",o=t.isMinimalRowsReached?" (minimal)":"",i="horizontal"===t.direction?"columns ".concat(t.placement.width).concat(n):"rows ".concat(t.placement.height).concat(o);return e("Item resized to ".concat(i,"."),t.conflicts,t.disturbed)},liveAnnouncementDndItemInserted:t=>{const n="column ".concat(t.placement.x+1),o="row ".concat(t.placement.y+1);return e("Item inserted to ".concat(n,", ").concat(o,"."),t.conflicts,t.disturbed)},liveAnnouncementDndCommitted:e=>"".concat(e," committed"),liveAnnouncementDndDiscarded:e=>"".concat(e," discarded"),liveAnnouncementItemRemoved:t=>e("Removed item ".concat(t.item.data.title,"."),[],t.disturbed),navigationAriaLabel:"Board navigation",navigationAriaDescription:"Click on non-empty item to move focus over",navigationItemAriaLabel:e=>e?e.data.title:"Empty"}})()},s))}},47204:(e,t,n)=>{n.r(t),n.d(t,{default:()=>de});var o=n(56276),i=n(92816),r=n(59991),a=n(37138),l=n(63590),c=n(87272),s=n(7265),d=n(60669),m=n.n(d),u=n(88225),p=n(29262),h=n(26862);const b=e=>{let t=Object.assign({},((0,r.A)(e),e));const n=(0,a.CX)(),{token:i}=c.A.useToken(),{data:d}=(0,l.nj)({queryKey:["baiClient","service","get_announcement"],queryFn:()=>n.service.get_announcement()});return m().isEmpty(d.message)?"":(0,h.jsx)(s.RfO,(0,o.A)({description:(0,h.jsx)("div",{style:{marginBottom:-1*i.marginSM},children:(0,h.jsx)(u.Ay,{options:{overrides:{p:{props:{style:{marginTop:0,marginBottom:i.marginSM}}}}},children:d.message+"<p></p>"})})},t))};var v=n(24392),g=n(54585),f=n(11863),y=n(15584),A=n(96382),x=n(15269),j=n(36961),w=n(91129),_=n(66203),S=n(90464),k=n(69319),R=n(15715),I=n(99118),z=n(13215);const O=["initialUrl"],B=new RegExp("^(https?)://([\\w./-]{1,}).ipynb$"),C=e=>{const t=(0,y.c)(57);let n,i;if(t[0]!==e){var r=e;({initialUrl:n}=r),i=(0,f.A)(r,O),t[0]=e,t[1]=n,t[2]=i}else n=t[1],i=t[2];const l=(0,p.useRef)(null),{t:c}=(0,I.Bd)(),d=j.A.useApp(),m=(0,a.f0)(),u=(0,a.CX)(),{startSessionWithDefault:b,upsertSessionNotification:v}=(0,z.G)(),{getErrorMessage:g}=(0,s.B78)();let A;t[3]!==d||t[4]!==u._config.default_import_environment||t[5]!==g||t[6]!==b||t[7]!==v||t[8]!==m?(A=async e=>{const t=(e=>(e=e.replace("/blob/","/")).replace("github.com","raw.githubusercontent.com"))(e),n=t.split("/").pop(),o={sessionName:"imported-notebook-".concat((0,s.kXB)(5)),environments:{version:u._config.default_import_environment},bootstrap_script:"#!/bin/sh\ncurl -O "+t},i=await b(o);if(i.fulfilled&&i.fulfilled.length>0&&(v(i.fulfilled,[{extraData:{appName:"jupyter",urlPostfix:"&redirect=/notebooks/"+n}}]),m("/session")),null!==i&&void 0!==i&&i.rejected&&i.rejected.length>0){const e=i.rejected[0].reason;d.modal.error({title:null===e||void 0===e?void 0:e.title,content:g(e)})}},t[3]=d,t[4]=u._config.default_import_environment,t[5]=g,t[6]=b,t[7]=v,t[8]=m,t[9]=A):A=t[9];const C=A;let M,L,U,F,D,T,N,H,G,E,q,V,P,K,X,$,Q,W,J,Y,Z,ee,te;return t[10]!==n?(M={url:n},t[10]=n,t[11]=M):M=t[11],t[12]!==C?(L=async e=>{await C(e.url)},t[12]=C,t[13]=L):L=t[13],t[14]!==c?(U=c("import.NotebookURL"),t[14]=c,t[15]=U):U=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(F={required:!0},t[16]=F):F=t[16],t[17]!==c?(D=c("import.InvalidNotebookURL"),t[17]=c,t[18]=D):D=t[18],t[19]!==D?(T={pattern:B,message:D},t[19]=D,t[20]=T):T=t[20],t[21]===Symbol.for("react.memo_cache_sentinel")?(N={type:"string",max:2048},t[21]=N):N=t[21],t[22]!==T?(H=[F,T,N],t[22]=T,t[23]=H):H=t[23],t[24]===Symbol.for("react.memo_cache_sentinel")?(G={flex:1},t[24]=G):G=t[24],t[25]!==c?(E=c("import.NotebookURL"),t[25]=c,t[26]=E):E=t[26],t[27]!==E?(q=(0,h.jsx)(w.A,{placeholder:E}),t[27]=E,t[28]=q):q=t[28],t[29]!==q||t[30]!==U||t[31]!==H?(V=(0,h.jsx)(_.A.Item,{name:"url",label:U,rules:H,style:G,children:q}),t[29]=q,t[30]=U,t[31]=H,t[32]=V):V=t[32],t[33]===Symbol.for("react.memo_cache_sentinel")?(P=(0,h.jsx)(R.A,{}),t[33]=P):P=t[33],t[34]===Symbol.for("react.memo_cache_sentinel")?(K=async()=>{var e;null===(e=l.current)||void 0===e||e.submit()},t[34]=K):K=t[34],t[35]!==c?(X=c("import.GetAndRunNotebook"),t[35]=c,t[36]=X):X=t[36],t[37]!==X?($=(0,h.jsx)(s.Fvl,{icon:P,type:"primary",block:!0,action:K,children:X}),t[37]=X,t[38]=$):$=t[38],t[39]===Symbol.for("react.memo_cache_sentinel")?(Q=(0,h.jsx)(S.A,{}),t[39]=Q):Q=t[39],t[40]!==c?(W=c("import.YouCanCreateNotebookCode"),t[40]=c,t[41]=W):W=t[41],t[42]!==W?(J=(0,h.jsx)(k.A.Paragraph,{children:W}),t[42]=W,t[43]=J):J=t[43],t[44]===Symbol.for("react.memo_cache_sentinel")?(Y=[["url"]],t[44]=Y):Y=t[44],t[45]!==c?(Z=(0,h.jsx)(_.A.Item,{dependencies:Y,children:e=>{const{getFieldValue:t}=e,n=t("url")||"",o={url:n},i=encodeURIComponent(JSON.stringify(o));let r;globalThis.isElectron?r="https://cloud.backend.ai":(r=window.location.protocol+"//"+window.location.hostname,window.location.port&&(r=r+":"+window.location.port));const a="".concat(r,"/start?type=url&data=").concat(i),l='<a href="'.concat(a,'"><img src="https://www.backend.ai/assets/badge.svg" /></a>'),d="[![Run on Backend.AI](https://www.backend.ai/assets/badge.svg)](".concat(a,")"),m=B.test(n)&&n.length<=2048,u=!n||!m;return(0,h.jsxs)(s.OOm,{justify:"start",gap:"sm",wrap:"wrap",children:[(0,h.jsx)("img",{src:"/resources/badge.svg",style:{marginTop:5,marginBottom:5},width:"147"}),(0,h.jsxs)(s.OOm,{gap:"sm",children:[(0,h.jsx)(x.A,{size:"small",copyable:{text:l},disabled:u,children:c("import.NotebookBadgeCodeHTML")}),(0,h.jsx)(x.A,{size:"small",copyable:{text:d},disabled:u,children:c("import.NotebookBadgeCodeMarkdown")})]})]})}}),t[45]=c,t[46]=Z):Z=t[46],t[47]!==J||t[48]!==Z?(ee=(0,h.jsxs)(s.OOm,{direction:"column",wrap:"wrap","data-testid":"panel-notebook-badge-code-section",children:[Q,J,Z]}),t[47]=J,t[48]=Z,t[49]=ee):ee=t[49],t[50]!==i||t[51]!==V||t[52]!==$||t[53]!==M||t[54]!==ee||t[55]!==L?(te=(0,h.jsxs)(_.A,(0,o.A)((0,o.A)({ref:l,layout:"vertical",initialValues:M,onFinish:L},i),{},{children:[V,$,ee]})),t[50]=i,t[51]=V,t[52]=$,t[53]=M,t[54]=ee,t[55]=L,t[56]=te):te=t[56],te};C.displayName="ImportNotebookForm";const M=C;var L=n(82745),U=n(44032),F=n(10483),D=n(62601);const T=["urlType","initialUrl","initialBranch"],N=(e,t,n)=>{const o=e=>"'".concat(e.replace(/'/g,"'\\''"),"'");return["#!/bin/sh","# Create folder and download repository","curl -o /tmp/repo.zip ".concat(o(e)),"mkdir -p /home/work/".concat(o(t)),"cd /home/work/".concat(o(t)),"unzip -o /tmp/repo.zip",n?["# Move contents if in subfolder","if [ -d ".concat(o(n)," ]; then"),"  mv ".concat(o(n),"/* ."),"  rm -rf ".concat(o(n)),"fi"].join("\n"):void 0,"rm -f /tmp/repo.zip"].filter(Boolean).join("\n")},H=e=>{let{urlType:t,initialUrl:n,initialBranch:i}=e,r=(0,f.A)(e,T);const{logger:l}=(0,s.Q7t)(),c=(0,p.useRef)(null),d=(0,a.CX)(),{upsertNotification:m}=(0,D.js)(),u=j.A.useApp(),{getErrorMessage:b}=(0,s.B78)(),{t:v}=(0,I.Bd)(),g=(0,s.GgS)(),{startSessionWithDefault:y,upsertSessionNotification:A}=(0,z.G)(),x=async e=>{try{var n;const i="github"===t?await(async e=>{var t;const n=e.trim().replace(/\.git$/,"");let o;try{o=new URL(n)}catch(p){return U.Ay.error(v("import.InvalidGitHubURL")),null}const i=o.pathname.replace(/\/$/,""),r=i.split("/").filter(Boolean);if(r.length<2)return U.Ay.error(v("import.InvalidGitHubURL")),null;const a=r[0],l=r[1],c=i.match(/\/tree\/([\w./-]+)/);let s=null===c||void 0===c?void 0:c[1];if(!s){const e="https://api.github.com/repos/".concat(a,"/").concat(l);try{const t=await fetch(e);if(200!==t.status)return 404===t.status?(U.Ay.error(v("import.RepositoryNotFound")),null):(U.Ay.error(v("import.FailedToFetchRepositoryInformation")),null);s=(await t.json()).default_branch}catch(h){return U.Ay.error(v("import.FailedToFetchRepositoryInformation")),null}}const d=null!==(t=s)&&void 0!==t?t:"master",m=encodeURIComponent(d),u=d.replace(/\//g,"-");return{archiveUrl:"https://codeload.github.com/".concat(a,"/").concat(l,"/zip/").concat(m),repoName:l,branch:d,extractedDirectory:"".concat(l,"-").concat(u)}})(e.url):"gitlab"===t?((e,t)=>{const n=e.trim().replace(/\.git$/,"");let o;try{o=new URL(n)}catch(p){return U.Ay.error(v("import.InvalidGitLabURL")),null}const i=o.pathname.replace(/\/$/,""),r=i.split("/").filter(Boolean);if(r.length<2)return U.Ay.error("Invalid GitLab URL. Must be a valid GitLab repository URL"),null;const a=r[r.length-1],l=i.match(/\/-\/tree\/([^/]+)/),c=null===l||void 0===l?void 0:l[1],s=t&&t.trim()||c||"master",d=encodeURIComponent(s),m=s.replace(/\//g,"-"),u=l?i.slice(0,i.indexOf("/-/tree/")):i;return{archiveUrl:"".concat(o.origin).concat(u,"/-/archive/").concat(d,"/").concat(a,"-").concat(m,".zip"),repoName:a,branch:s,extractedDirectory:"".concat(a,"-").concat(m)}})(e.url,e.gitlabBranch):null;if(!i)return;const r=await g(i.repoName||"imported-from-repo"),a=await d.vfolder.create(r,e.storageHost,"",null!==(n=e.vfolder_usage_mode)&&void 0!==n?n:"general","rw");m({key:"folder-create-success-".concat(a.id),icon:"folder",message:"".concat(a.name,": ").concat(v("data.folders.FolderCreated")),toText:v("data.folders.OpenAFolder"),to:{search:new URLSearchParams({folder:a.id}).toString()},open:!0,duration:0});const l={sessionName:"importing-files-to-".concat(r),environments:{version:d._config.default_import_environment},sessionType:"batch",batch:{command:N(i.archiveUrl,r,i.extractedDirectory),enabled:!0},mount_ids:[a.id]},s=await y(l);var o;if(s.fulfilled&&s.fulfilled.length>0)A(s.fulfilled),null===(o=c.current)||void 0===o||o.resetFields();if(null!==s&&void 0!==s&&s.rejected&&s.rejected.length>0){const e=s.rejected[0].reason;u.modal.error({title:null===e||void 0===e?void 0:e.title,content:b(e)})}}catch(i){u.message.error(b(i))}};return(0,h.jsxs)(_.A,(0,o.A)((0,o.A)({ref:c,layout:"vertical"},r),{},{initialValues:{vfolder_usage_mode:"general",url:n,gitlabBranch:i},children:[(0,h.jsx)(_.A.Item,{children:v("github"===t?"import.RepoWillBeFolder":"import.GitlabRepoWillBeFolder")}),(0,h.jsx)(_.A.Item,{name:"url",label:v("github"==t?"import.GitHubURL":"import.GitlabURL"),rules:[{required:!0},{type:"string",max:2048},{pattern:"github"===t?/^(https?):\/\/github\.com\/([\w./-]{1,})$/:/^(https?):\/\/gitlab\.com\/([\w./-]{1,})$/,message:v("import.WrongURLType")}],children:(0,h.jsx)(w.A,{})}),"gitlab"===t&&(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(_.A.Item,{name:"gitlabBranch",label:v("import.GitlabDefaultBranch"),children:(0,h.jsx)(w.A,{placeholder:"master",maxLength:200})})}),(0,h.jsx)(_.A.Item,{name:"storageHost",label:v("import.StorageHost"),rules:[{required:!0}],children:(0,h.jsx)(L.A,{showUsageStatus:!0,autoSelectType:"usage"})}),(0,h.jsx)(_.A.Item,{label:v("import.VFolderUsageMode"),name:"vfolder_usage_mode",hidden:!0!==d._config.enableModelFolders,required:!0,children:(0,h.jsxs)(F.Ay.Group,{children:[(0,h.jsx)(F.Ay,{value:"general","data-testid":"general-usage-mode",children:v("data.General")}),(0,h.jsx)(F.Ay,{value:"model","data-testid":"model-usage-mode",children:v("data.Models")})]})}),(0,h.jsx)(_.A.Item,{children:(0,h.jsx)(s.Fvl,{icon:(0,h.jsx)(R.A,{}),action:async()=>{try{var e;const t=await(null===(e=c.current)||void 0===e?void 0:e.validateFields());if(!t)return;await x(t)}catch(t){l.error("Form validation failed:",t)}},block:!0,type:"primary",children:v("import.GetToFolder")})})]}))};const G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"}}]},name:"github",theme:"outlined"};var E=n(7422);function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},q.apply(this,arguments)}const V=(e,t)=>p.createElement(E.A,q({},e,{ref:t,icon:G}));const P=p.forwardRef(V);const K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M913.9 552.2L805 181.4v-.1c-7.6-22.9-25.7-36.5-48.3-36.5-23.4 0-42.5 13.5-49.7 35.2l-71.4 213H388.8l-71.4-213c-7.2-21.7-26.3-35.2-49.7-35.2-23.1 0-42.5 14.8-48.4 36.6L110.5 552.2c-4.4 14.7 1.2 31.4 13.5 40.7l368.5 276.4c2.6 3.6 6.2 6.3 10.4 7.8l8.6 6.4 8.5-6.4c4.9-1.7 9-4.7 11.9-8.9l368.4-275.4c12.4-9.2 18-25.9 13.6-40.6zM751.7 193.4c1-1.8 2.9-1.9 3.5-1.9 1.1 0 2.5.3 3.4 3L818 394.3H684.5l67.2-200.9zm-487.4 1c.9-2.6 2.3-2.9 3.4-2.9 2.7 0 2.9.1 3.4 1.7l67.3 201.2H206.5l57.8-200zM158.8 558.7l28.2-97.3 202.4 270.2-230.6-172.9zm73.9-116.4h122.1l90.8 284.3-212.9-284.3zM512.9 776L405.7 442.3H620L512.9 776zm157.9-333.7h119.5L580 723.1l90.8-280.8zm-40.7 293.9l207.3-276.7 29.5 99.2-236.8 177.5z"}}]},name:"gitlab",theme:"outlined"};function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},X.apply(this,arguments)}const $=(e,t)=>p.createElement(E.A,X({},e,{ref:t,icon:K}));const Q=p.forwardRef($),W=["initialTab","initialData"],J=e=>{var t,n,i,r,a;const l=(0,y.c)(49);let c,d,m;if(l[0]!==e){var u=e;({initialTab:d,initialData:c}=u),m=(0,f.A)(u,W),l[0]=e,l[1]=c,l[2]=d,l[3]=m}else c=l[1],d=l[2],m=l[3];const{t:p}=(0,I.Bd)();let b;l[4]!==p?(b=p("start.StartFromURL"),l[4]=p,l[5]=b):b=l[5];const v=null===(t=c)||void 0===t?void 0:t.url;let g,x,j,w,_;l[6]!==v?(g=(0,h.jsx)(M,{initialUrl:v}),l[6]=v,l[7]=g):g=l[7],l[8]===Symbol.for("react.memo_cache_sentinel")?(x=(0,h.jsx)(s.lIp,{}),l[8]=x):x=l[8],l[9]!==p?(j=p("import.ImportNotebook"),l[9]=p,l[10]=j):j=l[10],l[11]!==j?(w=(0,h.jsxs)(s.OOm,{gap:"xs",children:[x," ",j]}),l[11]=j,l[12]=w):w=l[12],l[13]!==g||l[14]!==w?(_={key:"notebook",children:g,label:w},l[13]=g,l[14]=w,l[15]=_):_=l[15];const S=null===(n=c)||void 0===n?void 0:n.url,k=null===(i=c)||void 0===i?void 0:i.branch;let R,z,O,B,C;l[16]!==S||l[17]!==k?(R=(0,h.jsx)(H,{urlType:"github",initialUrl:S,initialBranch:k}),l[16]=S,l[17]=k,l[18]=R):R=l[18],l[19]===Symbol.for("react.memo_cache_sentinel")?(z=(0,h.jsx)(P,{style:{display:"inline"}}),l[19]=z):z=l[19],l[20]!==p?(O=p("import.ImportGithubRepo"),l[20]=p,l[21]=O):O=l[21],l[22]!==O?(B=(0,h.jsxs)(s.OOm,{gap:"xs",children:[z,O]}),l[22]=O,l[23]=B):B=l[23],l[24]!==R||l[25]!==B?(C={key:"github",children:R,label:B},l[24]=R,l[25]=B,l[26]=C):C=l[26];const L=null===(r=c)||void 0===r?void 0:r.url,U=null===(a=c)||void 0===a?void 0:a.branch;let F,D,T,N,G,E,q,V;return l[27]!==L||l[28]!==U?(F=(0,h.jsx)(H,{urlType:"gitlab",initialUrl:L,initialBranch:U}),l[27]=L,l[28]=U,l[29]=F):F=l[29],l[30]===Symbol.for("react.memo_cache_sentinel")?(D=(0,h.jsx)(Q,{style:{display:"inline"}}),l[30]=D):D=l[30],l[31]!==p?(T=p("import.ImportGitlabRepo"),l[31]=p,l[32]=T):T=l[32],l[33]!==T?(N=(0,h.jsxs)(s.OOm,{gap:"xs",children:[D,T]}),l[33]=T,l[34]=N):N=l[34],l[35]!==F||l[36]!==N?(G={key:"gitlab",children:F,label:N},l[35]=F,l[36]=N,l[37]=G):G=l[37],l[38]!==C||l[39]!==G||l[40]!==_?(E=[_,C,G],l[38]=C,l[39]=G,l[40]=_,l[41]=E):E=l[41],l[42]!==d||l[43]!==E?(q=(0,h.jsx)(A.A,{defaultActiveKey:d,items:E}),l[42]=d,l[43]=E,l[44]=q):q=l[44],l[45]!==m||l[46]!==b||l[47]!==q?(V=(0,h.jsx)(s.IbE,(0,o.A)((0,o.A)({title:b,width:800,footer:null},m),{},{children:q})),l[45]=m,l[46]=b,l[47]=q,l[48]=V):V=l[48],V};var Y=n(65027),Z=n(64042),ee=n(62163);const te=e=>{var t;let n=Object.assign({},((0,r.A)(e),e));const i=(0,Y.M)(),a=(null===(t=(0,p.useContext)(ee.Ay.ConfigContext).theme)||void 0===t?void 0:t.algorithm)===c.A.darkAlgorithm,l={token:{colorPrimary:(0,Z.A)().secondary}};return(0,h.jsx)(ee.Ay,(0,o.A)((0,o.A)({},n),{},{theme:(0,o.A)((0,o.A)({},a?m().merge({},null===i||void 0===i?void 0:i.dark,l,n.theme):m().merge({},null===i||void 0===i?void 0:i.light,l,n.theme)),{},{algorithm:a?c.A.darkAlgorithm:c.A.defaultAlgorithm})}))};var ne=n(7075);const oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"};function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ie.apply(this,arguments)}const re=(e,t)=>p.createElement(E.A,ie({},e,{ref:t,icon:oe}));const ae=p.forwardRef(re);var le=n(55812),ce=n(42821),se=n(31495);const de=()=>{var e,t,n,r,l,c;const{t:d}=(0,I.Bd)(),u=(0,a.CX)(),f=null!==(e=null===u||void 0===u||null===(t=u._config)||void 0===t?void 0:t.blockList)&&void 0!==e?e:[],y=null!==(n=null===u||void 0===u||null===(r=u._config)||void 0===r?void 0:r.inactiveList)&&void 0!==n?n:[],A=null!==(l=null===u||void 0===u||null===(c=u._config)||void 0===c?void 0:c.enableModelFolders)&&void 0!==l&&l,x=(0,a.f0)(),[j,w]=(0,p.useState)(!1),[_,S]=(0,p.useState)(!1),k=(0,le.zy)(),[R,z]=(0,p.useState)(),{upsertNotification:O}=(0,D.js)(),[B]=(0,ce.A)(),[C,M]=(0,se.useQueryParams)({type:(0,se.withDefault)(se.StringParam,void 0),data:(0,se.withDefault)(se.JsonParam,void 0)}),L=(0,p.useMemo)((()=>{const e=k.search.substring(1);return C.type||!e||e.includes("=")?null:e}),[k.search,C.type]),U=(0,p.useEffectEvent)((()=>{if("url"===C.type&&C.data)z({initialTab:"notebook",initialData:C.data}),S(!0),M({type:void 0,data:void 0});else if(L){const e="https://github.com/".concat(L);z({initialTab:"notebook",initialData:{url:e}}),S(!0),M({type:void 0,data:void 0},"replace")}}));(0,p.useEffect)((()=>{U()}),[]),(0,p.useEffect)((()=>{B.length<=0||O({key:"invitedFolders",message:d("data.InvitedFoldersTooltip",{count:B.length}),to:{search:new URLSearchParams({invitation:"true"}).toString()},open:!0,duration:0})}),[B.length,d,O]);const F=(0,s.YM3)([{id:"createFolder",requiredMenuKey:"data",rowSpan:3,columnSpan:1,columnOffset:{6:0,4:0},data:{content:(0,h.jsx)(i.A,{title:d("start.CreateFolder"),description:d("start.CreateFolderDesc"),buttonText:d("start.button.CreateFolder"),icon:(0,h.jsx)(s.cQz,{}),onClick:()=>w(!0)})}},{id:"startSession",requiredMenuKey:"job",rowSpan:3,columnSpan:1,columnOffset:{6:1,4:1},data:{content:(0,h.jsx)(i.A,{title:d("start.StartSession"),description:d("start.StartSessionDesc"),buttonText:d("start.button.StartSession"),icon:(0,h.jsx)(s.Q2l,{}),onClick:()=>x("/session/start")})}},{id:"startBatchSession",requiredMenuKey:"job",rowSpan:3,columnSpan:1,columnOffset:{6:2,4:2},data:{content:(0,h.jsx)(i.A,{title:d("start.StartBatchSession"),description:d("start.StartBatchSessionDesc"),buttonText:d("start.button.StartSession"),icon:(0,h.jsx)(s.y1w,{}),onClick:()=>{const e=new URLSearchParams;e.set("step","0"),e.set("formValues",JSON.stringify({sessionType:"batch"})),x("/session/start?".concat(e.toString()))}})}},A&&{id:"modelService",rowSpan:3,requiredMenuKey:"serving",columnSpan:1,columnOffset:{6:0,4:0},data:{content:(0,h.jsx)(te,{children:(0,h.jsx)(i.A,{title:d("start.ModelService"),description:d("start.ModelServiceDesc"),buttonText:d("start.button.ModelService"),icon:(0,h.jsx)(ae,{}),onClick:()=>x("/service/start")})})}},{id:"importFromURL",requiredMenuKey:"import",rowSpan:3,columnSpan:1,columnOffset:{6:3,4:3},data:{content:(0,h.jsx)(i.A,{title:d("start.StartFromURL"),description:d("start.StartFromURLDesc"),buttonText:d("start.button.StartNow"),icon:(0,h.jsx)(s.xeu,{}),onClick:()=>{S(!0)}})}}]).filter((e=>!m().includes([...f,...y],e.requiredMenuKey))),[T,N]=(0,ne.q)("start_page_board_items"),H=m().filter(F,(e=>!m().find(T,(t=>t.id===e.id)))),G=[...(0,s.YM3)(m().map(T,(e=>{var t;const n=null===(t=m().find(F,(t=>t.id===e.id)))||void 0===t?void 0:t.data;return n?(0,o.A)((0,o.A)({},e),{},{data:n}):void 0}))),...H];return(0,h.jsxs)(s.OOm,{direction:"column",gap:"md",align:"stretch",children:[(0,h.jsx)(b,{showIcon:!0,closable:!0}),(0,h.jsx)(v.A,{movable:!0,items:G,onItemsChange:e=>{const t=[...e.detail.items];N(m().map(t,(e=>m().omit(e,"data"))))}}),m().isEmpty(G)&&(0,h.jsx)(s.RfO,{type:"info",description:d("start.NoStartItems"),showIcon:!0}),(0,h.jsx)(s.XcZ,{children:(0,h.jsx)(g.A,{open:j,onRequestClose:e=>{w(!1),e&&x("/data")}})}),(0,h.jsx)(s.XcZ,{children:(0,h.jsx)(J,{open:_,onCancel:()=>{S(!1),z(void 0)},initialTab:null===R||void 0===R?void 0:R.initialTab,initialData:null===R||void 0===R?void 0:R.initialData})})]})}}}]);
//# sourceMappingURL=7204.8ac6d450.chunk.js.map