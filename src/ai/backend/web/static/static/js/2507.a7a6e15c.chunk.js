"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[2507],{64041:(e,n,a)=>{a.d(n,{A:()=>s});var l=a(19876),r=a(26067),i=a(46556),t=a(42906);const s=e=>{let{value:n,onChange:a,language:s="shell",editable:o=!1,showLineNumbers:d=!0,lineWrapping:u=!1,...m}=e;const[c,g]=(0,l.A)({defaultValue:"",value:n,onChange:a}),y=[(0,r.rI)(s)];return(0,t.jsx)(i.Ay,{theme:"dark",extensions:u?[i.Lz.lineWrapping,...y]:y,editable:o,readOnly:!o,basicSetup:{lineNumbers:d},value:c,onChange:(e,n)=>g(e),...m})}},53210:(e,n,a)=>{a.d(n,{A:()=>t});var l=a(59910),r=a(1426),i=a(42906);const t=e=>{let{value:n,...a}=e;const t=l.A.useFormInstance();return(0,r.useEffect)((()=>{t.setFieldValue(a.name,n)}),[n,t,a.name]),(0,i.jsx)(l.A.Item,{...a,hidden:!0})}},453:(e,n,a)=>{a.d(n,{Ay:()=>v,Jj:()=>f});var l=a(75045),r=a(32967),i=a(64288),t=(a(90840),a(80951)),s=a(47525),o=a(27484),d=a.n(o),u=a(1426),m=a(42906);const c=e=>{let{image:n,...a}=e;n=n||"";const[,{getImageAliasName:l,getBaseVersion:t,tagAlias:s}]=(0,r.Gj)();return(0,m.jsx)(i.A,{values:[{label:s(l(n)),color:"blue"},{label:t(n),color:"green"}],...a})},g=e=>{let{image:n,...a}=e;n=n||"";const[,{getBaseImage:l,tagAlias:i}]=(0,r.Gj)();return d().isEmpty(i(l(n)))?null:(0,m.jsx)(s.A,{color:"green",...a,children:i(l(n))})},y=e=>{let{image:n,...a}=e;n=n||"";const[,{getArchitecture:l,tagAlias:i}]=(0,r.Gj)();return d().isEmpty(i(l(n)))?null:(0,m.jsx)(s.A,{color:"green",...a,children:l(n)})},p=e=>{let{image:n}=e;return n=n||"",(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(c,{image:n}),(0,m.jsx)(g,{image:n}),(0,m.jsx)(y,{image:n})]})},v=u.memo(p),f=e=>{let{tag:n,labels:a,highlightKeyword:o,...u}=e;a=a||[];const[,{getTags:c,tagAlias:g}]=(0,r.Gj)(),y=c(n,a);return(0,m.jsx)(m.Fragment,{children:d().map(y,((e,n)=>{const a="Customized"===e.key,r=g(e.key+e.value);return d().isEqual(r,(0,l.WY)(e.key+e.value))?(0,m.jsx)(i.A,{highlightKeyword:o,values:[{label:g(e.key),color:a?"cyan":"blue"},{label:e.value,color:a?"cyan":"blue"}]},e.key):(0,m.jsx)(s.A,{color:a?"cyan":"blue",children:(0,m.jsx)(t.A,{keyword:o,children:r},n)},e.key)}))})}},39667:(e,n,a)=>{a.d(n,{A:()=>y});var l=a(27340),r=a(89664),i=a(1869),t=a(59910),s=a(81021),o=a(60476),d=a(27484),u=a.n(d),m=a(1426),c=a(48602),g=a(42906);const y=e=>{var n;let{open:a,onRequestClose:d,columns:y,hiddenColumnKeys:p,...v}=e;const f=(0,m.useRef)(null),{t:k}=(0,c.Bd)(),{token:h}=i.A.useToken(),b=u().map(y,(e=>{return"string"===typeof e.title?{label:e.title,value:u().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(n=e.title,m.Children.map(n.props.children,(e=>{if("string"===typeof e)return e}))),value:u().toString(e.key)}:{label:void 0,value:u().toString(e.key)};var n}));return(0,g.jsx)(l.A,{title:k("table.SettingTable"),open:a,destroyOnClose:!0,centered:!0,onOk:()=>{var e;null===(e=f.current)||void 0===e||e.validateFields().then((e=>{d(e)})).catch((()=>{}))},onCancel:()=>{d()},...v,children:(0,g.jsxs)(t.A,{ref:f,preserve:!1,initialValues:{selectedColumnKeys:null===(n=u().map(b,"value"))||void 0===n?void 0:n.filter((e=>!u().includes(p,e)))},layout:"vertical",children:[(0,g.jsx)(t.A.Item,{name:"searchInput",label:k("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,g.jsx)(s.A,{prefix:(0,g.jsx)(r.A,{}),style:{marginBottom:h.marginSM},placeholder:k("table.SearchTableColumn")})}),(0,g.jsx)(t.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>e.searchInput!==n.searchInput,children:e=>{let{getFieldValue:n}=e;const a=n("searchInput")?u().toLower(n("searchInput")):void 0,l=u().map(b,(e=>u().toLower(u().toString(e.label)).includes(a||"")?e:{...e,style:{display:"none"}}));return(0,g.jsx)(t.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},children:(0,g.jsx)(o.A.Group,{options:l,style:{flexDirection:"column"}})})}})]})})}},11493:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"hostname"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"hostname",variableName:"hostname"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateContainerRegistry",kind:"LinkedField",name:"create_container_registry",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistry",kind:"LinkedField",name:"container_registry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hostname",storageKey:null},{alias:null,args:null,concreteType:"ContainerRegistryConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"password",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ssl_verify",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ContainerRegistryEditorModalBefore2409CreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ContainerRegistryEditorModalBefore2409CreateMutation",selections:n},params:{cacheID:"f21828a823b9278da3fc0a20757ffbcb",id:null,metadata:{},name:"ContainerRegistryEditorModalBefore2409CreateMutation",operationKind:"mutation",text:"mutation ContainerRegistryEditorModalBefore2409CreateMutation(\n  $hostname: String!\n  $props: CreateContainerRegistryInput!\n) {\n  create_container_registry(hostname: $hostname, props: $props) {\n    container_registry {\n      id\n      hostname\n      config {\n        url\n        type\n        project\n        username\n        password\n        ssl_verify\n      }\n    }\n  }\n}\n"}}}();l.hash="83f522a461f69fe3d5e72fe56992bf5b";const r=l},79946:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ContainerRegistryEditorModalBefore2409Fragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hostname",storageKey:null},{alias:null,args:null,concreteType:"ContainerRegistryConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ssl_verify",storageKey:null}],storageKey:null}],type:"ContainerRegistry",abstractKey:null,hash:"1d6d4ae52fe80807408b6c0ea72545a0"},r=l},21251:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"hostname"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"hostname",variableName:"hostname"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyContainerRegistry",kind:"LinkedField",name:"modify_container_registry",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistry",kind:"LinkedField",name:"container_registry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hostname",storageKey:null},{alias:null,args:null,concreteType:"ContainerRegistryConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"password",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ssl_verify",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ContainerRegistryEditorModalBefore2409ModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ContainerRegistryEditorModalBefore2409ModifyMutation",selections:n},params:{cacheID:"388a0a43f6b8ef7fb36e034276e48eba",id:null,metadata:{},name:"ContainerRegistryEditorModalBefore2409ModifyMutation",operationKind:"mutation",text:"mutation ContainerRegistryEditorModalBefore2409ModifyMutation(\n  $hostname: String!\n  $props: ModifyContainerRegistryInput!\n) {\n  modify_container_registry(hostname: $hostname, props: $props) {\n    container_registry {\n      id\n      hostname\n      config {\n        url\n        type\n        project\n        username\n        password\n        ssl_verify\n      }\n    }\n  }\n}\n"}}}();l.hash="7866a8d403db359b43bf7cf9442affd9";const r=l},11843:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"extra"},n={defaultValue:null,kind:"LocalArgument",name:"is_global"},a={defaultValue:null,kind:"LocalArgument",name:"password"},l={defaultValue:null,kind:"LocalArgument",name:"project"},r={defaultValue:null,kind:"LocalArgument",name:"registry_name"},i={defaultValue:null,kind:"LocalArgument",name:"ssl_verify"},t={defaultValue:null,kind:"LocalArgument",name:"type"},s={defaultValue:null,kind:"LocalArgument",name:"url"},o={defaultValue:null,kind:"LocalArgument",name:"username"},d=[{alias:null,args:[{kind:"Variable",name:"extra",variableName:"extra"},{kind:"Variable",name:"is_global",variableName:"is_global"},{kind:"Variable",name:"password",variableName:"password"},{kind:"Variable",name:"project",variableName:"project"},{kind:"Variable",name:"registry_name",variableName:"registry_name"},{kind:"Variable",name:"ssl_verify",variableName:"ssl_verify"},{kind:"Variable",name:"type",variableName:"type"},{kind:"Variable",name:"url",variableName:"url"},{kind:"Variable",name:"username",variableName:"username"}],concreteType:"CreateContainerRegistryNode",kind:"LinkedField",name:"create_container_registry_node",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistryNode",kind:"LinkedField",name:"container_registry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,a,l,r,i,t,s,o],kind:"Fragment",metadata:null,name:"ContainerRegistryEditorModalCreateMutation",selections:d,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[r,t,s,n,a,l,i,o,e],kind:"Operation",name:"ContainerRegistryEditorModalCreateMutation",selections:d},params:{cacheID:"57a5fa942b9f107bbb16490b31638433",id:null,metadata:{},name:"ContainerRegistryEditorModalCreateMutation",operationKind:"mutation",text:"mutation ContainerRegistryEditorModalCreateMutation(\n  $registry_name: String!\n  $type: ContainerRegistryTypeField!\n  $url: String!\n  $is_global: Boolean\n  $password: String\n  $project: String\n  $ssl_verify: Boolean\n  $username: String\n  $extra: JSONString\n) {\n  create_container_registry_node(registry_name: $registry_name, type: $type, url: $url, is_global: $is_global, password: $password, project: $project, ssl_verify: $ssl_verify, username: $username, extra: $extra) {\n    container_registry {\n      id\n    }\n  }\n}\n"}}}();l.hash="60cf4d25b2be71f37f42bdbbafe851ac";const r=l},77205:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"is_global"},n={defaultValue:null,kind:"LocalArgument",name:"password"},a={defaultValue:null,kind:"LocalArgument",name:"project"},l={defaultValue:null,kind:"LocalArgument",name:"registry_name"},r={defaultValue:null,kind:"LocalArgument",name:"ssl_verify"},i={defaultValue:null,kind:"LocalArgument",name:"type"},t={defaultValue:null,kind:"LocalArgument",name:"url"},s={defaultValue:null,kind:"LocalArgument",name:"username"},o=[{alias:null,args:[{kind:"Variable",name:"is_global",variableName:"is_global"},{kind:"Variable",name:"password",variableName:"password"},{kind:"Variable",name:"project",variableName:"project"},{kind:"Variable",name:"registry_name",variableName:"registry_name"},{kind:"Variable",name:"ssl_verify",variableName:"ssl_verify"},{kind:"Variable",name:"type",variableName:"type"},{kind:"Variable",name:"url",variableName:"url"},{kind:"Variable",name:"username",variableName:"username"}],concreteType:"CreateContainerRegistryNode",kind:"LinkedField",name:"create_container_registry_node",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistryNode",kind:"LinkedField",name:"container_registry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,a,l,r,i,t,s],kind:"Fragment",metadata:null,name:"ContainerRegistryEditorModalCreateWithoutExtraMutation",selections:o,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,i,t,e,n,a,r,s],kind:"Operation",name:"ContainerRegistryEditorModalCreateWithoutExtraMutation",selections:o},params:{cacheID:"d3f471d2185114135baac408db42a9a6",id:null,metadata:{},name:"ContainerRegistryEditorModalCreateWithoutExtraMutation",operationKind:"mutation",text:"mutation ContainerRegistryEditorModalCreateWithoutExtraMutation(\n  $registry_name: String!\n  $type: ContainerRegistryTypeField!\n  $url: String!\n  $is_global: Boolean\n  $password: String\n  $project: String\n  $ssl_verify: Boolean\n  $username: String\n) {\n  create_container_registry_node(registry_name: $registry_name, type: $type, url: $url, is_global: $is_global, password: $password, project: $project, ssl_verify: $ssl_verify, username: $username) {\n    container_registry {\n      id\n    }\n  }\n}\n"}}}();l.hash="46c904c5d26d790a0fa86a3ce3e72c12";const r=l},90832:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ContainerRegistryEditorModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"registry_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ssl_verify",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"extra",storageKey:null}],type:"ContainerRegistryNode",abstractKey:null,hash:"d3edee648e1c09fef66ed49a916ee5e7"},r=l},36489:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"extra"},n={defaultValue:null,kind:"LocalArgument",name:"id"},a={defaultValue:null,kind:"LocalArgument",name:"is_global"},l={defaultValue:null,kind:"LocalArgument",name:"password"},r={defaultValue:null,kind:"LocalArgument",name:"project"},i={defaultValue:null,kind:"LocalArgument",name:"registry_name"},t={defaultValue:null,kind:"LocalArgument",name:"ssl_verify"},s={defaultValue:null,kind:"LocalArgument",name:"type"},o={defaultValue:null,kind:"LocalArgument",name:"url"},d={defaultValue:null,kind:"LocalArgument",name:"username"},u=[{alias:null,args:[{kind:"Variable",name:"extra",variableName:"extra"},{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"is_global",variableName:"is_global"},{kind:"Variable",name:"password",variableName:"password"},{kind:"Variable",name:"project",variableName:"project"},{kind:"Variable",name:"registry_name",variableName:"registry_name"},{kind:"Variable",name:"ssl_verify",variableName:"ssl_verify"},{kind:"Variable",name:"type",variableName:"type"},{kind:"Variable",name:"url",variableName:"url"},{kind:"Variable",name:"username",variableName:"username"}],concreteType:"ModifyContainerRegistryNode",kind:"LinkedField",name:"modify_container_registry_node",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistryNode",kind:"LinkedField",name:"container_registry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,a,l,r,i,t,s,o,d],kind:"Fragment",metadata:null,name:"ContainerRegistryEditorModalModifyMutation",selections:u,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,i,s,o,a,l,r,t,d,e],kind:"Operation",name:"ContainerRegistryEditorModalModifyMutation",selections:u},params:{cacheID:"0712251b77c9b50360986c4465efe94d",id:null,metadata:{},name:"ContainerRegistryEditorModalModifyMutation",operationKind:"mutation",text:"mutation ContainerRegistryEditorModalModifyMutation(\n  $id: String!\n  $registry_name: String\n  $type: ContainerRegistryTypeField\n  $url: String\n  $is_global: Boolean\n  $password: String\n  $project: String\n  $ssl_verify: Boolean\n  $username: String\n  $extra: JSONString\n) {\n  modify_container_registry_node(id: $id, registry_name: $registry_name, type: $type, url: $url, is_global: $is_global, password: $password, project: $project, ssl_verify: $ssl_verify, username: $username, extra: $extra) {\n    container_registry {\n      id\n    }\n  }\n}\n"}}}();l.hash="0bb6864dea3633dc0ded0b72a4745f92";const r=l},27831:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"id"},n={defaultValue:null,kind:"LocalArgument",name:"is_global"},a={defaultValue:null,kind:"LocalArgument",name:"password"},l={defaultValue:null,kind:"LocalArgument",name:"project"},r={defaultValue:null,kind:"LocalArgument",name:"registry_name"},i={defaultValue:null,kind:"LocalArgument",name:"ssl_verify"},t={defaultValue:null,kind:"LocalArgument",name:"type"},s={defaultValue:null,kind:"LocalArgument",name:"url"},o={defaultValue:null,kind:"LocalArgument",name:"username"},d=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"is_global",variableName:"is_global"},{kind:"Variable",name:"password",variableName:"password"},{kind:"Variable",name:"project",variableName:"project"},{kind:"Variable",name:"registry_name",variableName:"registry_name"},{kind:"Variable",name:"ssl_verify",variableName:"ssl_verify"},{kind:"Variable",name:"type",variableName:"type"},{kind:"Variable",name:"url",variableName:"url"},{kind:"Variable",name:"username",variableName:"username"}],concreteType:"ModifyContainerRegistryNode",kind:"LinkedField",name:"modify_container_registry_node",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistryNode",kind:"LinkedField",name:"container_registry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,a,l,r,i,t,s,o],kind:"Fragment",metadata:null,name:"ContainerRegistryEditorModalModifyWithoutExtraMutation",selections:d,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,r,t,s,n,a,l,i,o],kind:"Operation",name:"ContainerRegistryEditorModalModifyWithoutExtraMutation",selections:d},params:{cacheID:"f9dfa4e6fe4a28ce6431392983316365",id:null,metadata:{},name:"ContainerRegistryEditorModalModifyWithoutExtraMutation",operationKind:"mutation",text:"mutation ContainerRegistryEditorModalModifyWithoutExtraMutation(\n  $id: String!\n  $registry_name: String\n  $type: ContainerRegistryTypeField\n  $url: String\n  $is_global: Boolean\n  $password: String\n  $project: String\n  $ssl_verify: Boolean\n  $username: String\n) {\n  modify_container_registry_node(id: $id, registry_name: $registry_name, type: $type, url: $url, is_global: $is_global, password: $password, project: $project, ssl_verify: $ssl_verify, username: $username) {\n    container_registry {\n      id\n    }\n  }\n}\n"}}}();l.hash="e6ba4e419266d92609e6a5108750271b";const r=l},84285:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"id"},n={defaultValue:null,kind:"LocalArgument",name:"is_global"},a={defaultValue:null,kind:"LocalArgument",name:"project"},l={defaultValue:null,kind:"LocalArgument",name:"registry_name"},r={defaultValue:null,kind:"LocalArgument",name:"ssl_verify"},i={defaultValue:null,kind:"LocalArgument",name:"type"},t={defaultValue:null,kind:"LocalArgument",name:"url"},s={defaultValue:null,kind:"LocalArgument",name:"username"},o=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"is_global",variableName:"is_global"},{kind:"Variable",name:"project",variableName:"project"},{kind:"Variable",name:"registry_name",variableName:"registry_name"},{kind:"Variable",name:"ssl_verify",variableName:"ssl_verify"},{kind:"Variable",name:"type",variableName:"type"},{kind:"Variable",name:"url",variableName:"url"},{kind:"Variable",name:"username",variableName:"username"}],concreteType:"ModifyContainerRegistryNode",kind:"LinkedField",name:"modify_container_registry_node",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistryNode",kind:"LinkedField",name:"container_registry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,a,l,r,i,t,s],kind:"Fragment",metadata:null,name:"ContainerRegistryEditorModalModifyWithoutPasswordAndExtraMutation",selections:o,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,l,i,t,n,a,r,s],kind:"Operation",name:"ContainerRegistryEditorModalModifyWithoutPasswordAndExtraMutation",selections:o},params:{cacheID:"2a50655b20de361456bf2c12efd63147",id:null,metadata:{},name:"ContainerRegistryEditorModalModifyWithoutPasswordAndExtraMutation",operationKind:"mutation",text:"mutation ContainerRegistryEditorModalModifyWithoutPasswordAndExtraMutation(\n  $id: String!\n  $registry_name: String\n  $type: ContainerRegistryTypeField\n  $url: String\n  $is_global: Boolean\n  $project: String\n  $ssl_verify: Boolean\n  $username: String\n) {\n  modify_container_registry_node(id: $id, registry_name: $registry_name, type: $type, url: $url, is_global: $is_global, project: $project, ssl_verify: $ssl_verify, username: $username) {\n    container_registry {\n      id\n    }\n  }\n}\n"}}}();l.hash="f41ba1368983974d886897df42c30796";const r=l},43720:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"extra"},n={defaultValue:null,kind:"LocalArgument",name:"id"},a={defaultValue:null,kind:"LocalArgument",name:"is_global"},l={defaultValue:null,kind:"LocalArgument",name:"project"},r={defaultValue:null,kind:"LocalArgument",name:"registry_name"},i={defaultValue:null,kind:"LocalArgument",name:"ssl_verify"},t={defaultValue:null,kind:"LocalArgument",name:"type"},s={defaultValue:null,kind:"LocalArgument",name:"url"},o={defaultValue:null,kind:"LocalArgument",name:"username"},d=[{alias:null,args:[{kind:"Variable",name:"extra",variableName:"extra"},{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"is_global",variableName:"is_global"},{kind:"Variable",name:"project",variableName:"project"},{kind:"Variable",name:"registry_name",variableName:"registry_name"},{kind:"Variable",name:"ssl_verify",variableName:"ssl_verify"},{kind:"Variable",name:"type",variableName:"type"},{kind:"Variable",name:"url",variableName:"url"},{kind:"Variable",name:"username",variableName:"username"}],concreteType:"ModifyContainerRegistryNode",kind:"LinkedField",name:"modify_container_registry_node",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistryNode",kind:"LinkedField",name:"container_registry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,a,l,r,i,t,s,o],kind:"Fragment",metadata:null,name:"ContainerRegistryEditorModalModifyWithoutPasswordMutation",selections:d,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,r,t,s,a,l,i,o,e],kind:"Operation",name:"ContainerRegistryEditorModalModifyWithoutPasswordMutation",selections:d},params:{cacheID:"0eaf0ac0a14e3f80b3fce0ab8a294c64",id:null,metadata:{},name:"ContainerRegistryEditorModalModifyWithoutPasswordMutation",operationKind:"mutation",text:"mutation ContainerRegistryEditorModalModifyWithoutPasswordMutation(\n  $id: String!\n  $registry_name: String\n  $type: ContainerRegistryTypeField\n  $url: String\n  $is_global: Boolean\n  $project: String\n  $ssl_verify: Boolean\n  $username: String\n  $extra: JSONString\n) {\n  modify_container_registry_node(id: $id, registry_name: $registry_name, type: $type, url: $url, is_global: $is_global, project: $project, ssl_verify: $ssl_verify, username: $username, extra: $extra) {\n    container_registry {\n      id\n    }\n  }\n}\n"}}}();l.hash="e061cd27c36ddac5102a7e8b37efbec3";const r=l},51296:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"hostname"}],n=[{alias:null,args:[{kind:"Variable",name:"hostname",variableName:"hostname"}],concreteType:"DeleteContainerRegistry",kind:"LinkedField",name:"delete_container_registry",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistry",kind:"LinkedField",name:"container_registry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ContainerRegistryListBefore2409DeleteMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ContainerRegistryListBefore2409DeleteMutation",selections:n},params:{cacheID:"7a89a33c0115cf7f5ff9d6b1c04eb7f3",id:null,metadata:{},name:"ContainerRegistryListBefore2409DeleteMutation",operationKind:"mutation",text:"mutation ContainerRegistryListBefore2409DeleteMutation(\n  $hostname: String!\n) {\n  delete_container_registry(hostname: $hostname) {\n    container_registry {\n      id\n    }\n  }\n}\n"}}}();l.hash="730f8ac68060fef479daec8a61f7eb30";const r=l},90419:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"allowed_docker_registries"},n={defaultValue:null,kind:"LocalArgument",name:"domain"},a=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"domain"},{fields:[{kind:"Variable",name:"allowed_docker_registries",variableName:"allowed_docker_registries"}],kind:"ObjectValue",name:"props"}],concreteType:"ModifyDomain",kind:"LinkedField",name:"modify_domain",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ContainerRegistryListBefore2409DomainMutation",selections:a,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ContainerRegistryListBefore2409DomainMutation",selections:a},params:{cacheID:"c5850fcfa6ce8b87223b284f69ae3f66",id:null,metadata:{},name:"ContainerRegistryListBefore2409DomainMutation",operationKind:"mutation",text:"mutation ContainerRegistryListBefore2409DomainMutation(\n  $domain: String!\n  $allowed_docker_registries: [String]!\n) {\n  modify_domain(name: $domain, props: {allowed_docker_registries: $allowed_docker_registries}) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="4064ba252ad6ddf8da2ef507a8e9df76";const r=l},72708:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"domain"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"hostname",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"password",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"ssl_verify",storageKey:null},d={alias:null,args:[{kind:"Variable",name:"name",variableName:"domain"}],concreteType:"Domain",kind:"LinkedField",name:"domain",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allowed_docker_registries",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ContainerRegistryListBefore2409Query",selections:[{alias:null,args:null,concreteType:"ContainerRegistry",kind:"LinkedField",name:"container_registries",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"ContainerRegistryEditorModalBefore2409Fragment"},n,a,{alias:null,args:null,concreteType:"ContainerRegistryConfig",kind:"LinkedField",name:"config",plural:!1,selections:[l,r,i,t,s,o],storageKey:null}],storageKey:null},d],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ContainerRegistryListBefore2409Query",selections:[{alias:null,args:null,concreteType:"ContainerRegistry",kind:"LinkedField",name:"container_registries",plural:!0,selections:[n,a,{alias:null,args:null,concreteType:"ContainerRegistryConfig",kind:"LinkedField",name:"config",plural:!1,selections:[l,r,i,t,o,s],storageKey:null}],storageKey:null},d]},params:{cacheID:"ef5b9c798ccb0219aaaa9c4496aca0d0",id:null,metadata:{},name:"ContainerRegistryListBefore2409Query",operationKind:"query",text:"query ContainerRegistryListBefore2409Query(\n  $domain: String!\n) {\n  container_registries {\n    ...ContainerRegistryEditorModalBefore2409Fragment\n    id\n    hostname\n    config {\n      url\n      type\n      project\n      username\n      password\n      ssl_verify\n    }\n  }\n  domain(name: $domain) {\n    name\n    allowed_docker_registries\n  }\n}\n\nfragment ContainerRegistryEditorModalBefore2409Fragment on ContainerRegistry {\n  id\n  hostname\n  config {\n    url\n    type\n    project\n    username\n    ssl_verify\n  }\n}\n"}}}();l.hash="4b60048616461e0148810fd027e9d6ac";const r=l},5642:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],n=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"id"}],concreteType:"DeleteContainerRegistryNode",kind:"LinkedField",name:"delete_container_registry_node",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistryNode",kind:"LinkedField",name:"container_registry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ContainerRegistryListDeleteMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ContainerRegistryListDeleteMutation",selections:n},params:{cacheID:"93b0914bb07fb84611809dc34af76686",id:null,metadata:{},name:"ContainerRegistryListDeleteMutation",operationKind:"mutation",text:"mutation ContainerRegistryListDeleteMutation(\n  $id: String!\n) {\n  delete_container_registry_node(id: $id) {\n    container_registry {\n      id\n    }\n  }\n}\n"}}}();l.hash="d75e15de7a3ff3cff9778c52f6907ff3";const r=l},74765:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"allowed_docker_registries"},n={defaultValue:null,kind:"LocalArgument",name:"domain"},a=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"domain"},{fields:[{kind:"Variable",name:"allowed_docker_registries",variableName:"allowed_docker_registries"}],kind:"ObjectValue",name:"props"}],concreteType:"ModifyDomain",kind:"LinkedField",name:"modify_domain",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ContainerRegistryListDomainMutation",selections:a,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ContainerRegistryListDomainMutation",selections:a},params:{cacheID:"5ea7ebdd79d15e15b23a9fb2d8568d34",id:null,metadata:{},name:"ContainerRegistryListDomainMutation",operationKind:"mutation",text:"mutation ContainerRegistryListDomainMutation(\n  $domain: String!\n  $allowed_docker_registries: [String]!\n) {\n  modify_domain(name: $domain, props: {allowed_docker_registries: $allowed_docker_registries}) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="647ec7cdf3bcffc8cc1d8cd3cced159f";const r=l},8406:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"domain"},n={defaultValue:null,kind:"LocalArgument",name:"filter"},a={defaultValue:null,kind:"LocalArgument",name:"first"},l={defaultValue:null,kind:"LocalArgument",name:"offset"},r={defaultValue:null,kind:"LocalArgument",name:"order"},i=[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"offset",variableName:"offset"},{kind:"Variable",name:"order",variableName:"order"}],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"registry_name",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"password",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"ssl_verify",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},f={alias:null,args:[{kind:"Variable",name:"name",variableName:"domain"}],concreteType:"Domain",kind:"LinkedField",name:"domain",plural:!1,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"allowed_docker_registries",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[e,n,a,l,r],kind:"Fragment",metadata:null,name:"ContainerRegistryListQuery",selections:[{alias:null,args:i,concreteType:"ContainerRegistryConnection",kind:"LinkedField",name:"container_registry_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistryEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ContainerRegistryNode",kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ContainerRegistryEditorModalFragment"},t,s,o,d,u,m,c,g,y,p],storageKey:null}],storageKey:null},v],storageKey:null},f],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,n,r,a,l],kind:"Operation",name:"ContainerRegistryListQuery",selections:[{alias:null,args:i,concreteType:"ContainerRegistryConnection",kind:"LinkedField",name:"container_registry_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistryEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ContainerRegistryNode",kind:"LinkedField",name:"node",plural:!1,selections:[t,s,d,o,u,m,c,g,p,{alias:null,args:null,kind:"ScalarField",name:"extra",storageKey:null},y],storageKey:null}],storageKey:null},v],storageKey:null},f]},params:{cacheID:"0bba862c155dc1896b2f2d0989b83320",id:null,metadata:{},name:"ContainerRegistryListQuery",operationKind:"query",text:'query ContainerRegistryListQuery(\n  $domain: String!\n  $filter: String\n  $order: String\n  $first: Int\n  $offset: Int\n) {\n  container_registry_nodes(filter: $filter, order: $order, first: $first, offset: $offset) @since(version: "24.09.0") {\n    edges {\n      node {\n        ...ContainerRegistryEditorModalFragment\n        id\n        row_id\n        registry_name\n        name\n        url\n        type\n        project\n        username\n        password\n        ssl_verify\n      }\n    }\n    count\n  }\n  domain(name: $domain) {\n    name\n    allowed_docker_registries\n  }\n}\n\nfragment ContainerRegistryEditorModalFragment on ContainerRegistryNode {\n  id\n  row_id\n  name\n  registry_name\n  url\n  type\n  project\n  username\n  ssl_verify\n  extra @since(version: "24.09.3")\n}\n'}}}();l.hash="83d2445a2d783eb91f99f02f22559918";const r=l},24265:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"tag",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"registry",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"digest",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"installed",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},o=[s,{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],d={alias:null,args:null,concreteType:"KVPair",kind:"LinkedField",name:"labels",plural:!0,selections:o,storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"humanized_name",storageKey:null},m={alias:null,args:null,concreteType:"ResourceLimit",kind:"LinkedField",name:"resource_limits",plural:!0,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max",storageKey:null}],storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"namespace",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"base_image_name",storageKey:null},y={alias:null,args:null,concreteType:"KVPair",kind:"LinkedField",name:"tags",plural:!0,selections:o,storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ImageListQuery",selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"images",plural:!0,selections:[e,n,a,l,r,i,t,d,u,m,c,g,y,p,{args:null,kind:"FragmentSpread",name:"ManageImageResourceLimitModal_image"},{args:null,kind:"FragmentSpread",name:"ManageAppsModal_image"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"ImageListQuery",selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"images",plural:!0,selections:[e,n,a,l,r,i,t,d,u,m,c,g,y,p],storageKey:null}]},params:{cacheID:"dfcaa29c2b5019c25c0a7a5e2ed454bf",id:null,metadata:{},name:"ImageListQuery",operationKind:"query",text:'query ImageListQuery {\n  images {\n    id\n    name @deprecatedSince(version: "24.12.0")\n    tag\n    registry\n    architecture\n    digest\n    installed\n    labels {\n      key\n      value\n    }\n    humanized_name\n    resource_limits {\n      key\n      min\n      max\n    }\n    namespace @since(version: "24.12.0")\n    base_image_name @since(version: "24.12.0")\n    tags @since(version: "24.12.0") {\n      key\n      value\n    }\n    version @since(version: "24.12.0")\n    ...ManageImageResourceLimitModal_image\n    ...ManageAppsModal_image\n  }\n}\n\nfragment ManageAppsModal_image on Image {\n  labels {\n    key\n    value\n  }\n  registry\n  name @deprecatedSince(version: "24.12.0")\n  namespace @since(version: "24.12.0")\n  architecture\n  installed\n  tag\n}\n\nfragment ManageImageResourceLimitModal_image on Image {\n  resource_limits {\n    key\n    min\n    max\n  }\n  registry\n  name @deprecatedSince(version: "24.12.0")\n  namespace @since(version: "24.12.0")\n  architecture\n  installed\n  tag\n}\n'}}}();l.hash="35b5ff7c2c78020b5828c46f420506f0";const r=l},45261:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"architecture"},n={defaultValue:null,kind:"LocalArgument",name:"props"},a={defaultValue:null,kind:"LocalArgument",name:"target"},l=[{alias:null,args:[{kind:"Variable",name:"architecture",variableName:"architecture"},{kind:"Variable",name:"props",variableName:"props"},{kind:"Variable",name:"target",variableName:"target"}],concreteType:"ModifyImage",kind:"LinkedField",name:"modify_image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,a],kind:"Fragment",metadata:null,name:"ManageAppsModalMutation",selections:l,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,e,n],kind:"Operation",name:"ManageAppsModalMutation",selections:l},params:{cacheID:"b7a57119037085ec9f08346991633e0a",id:null,metadata:{},name:"ManageAppsModalMutation",operationKind:"mutation",text:"mutation ManageAppsModalMutation(\n  $target: String!\n  $architecture: String\n  $props: ModifyImageInput!\n) {\n  modify_image(target: $target, architecture: $architecture, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="bb280196745e96f5c488d1d785a5b012";const r=l},88140:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ManageAppsModal_image",selections:[{alias:null,args:null,concreteType:"KVPair",kind:"LinkedField",name:"labels",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"registry",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"namespace",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"installed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tag",storageKey:null}],type:"Image",abstractKey:null,hash:"27f7f45d8961ee26a76e432436ed81e2"},r=l},15933:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"architecture"},n={defaultValue:null,kind:"LocalArgument",name:"props"},a={defaultValue:null,kind:"LocalArgument",name:"target"},l=[{alias:null,args:[{kind:"Variable",name:"architecture",variableName:"architecture"},{kind:"Variable",name:"props",variableName:"props"},{kind:"Variable",name:"target",variableName:"target"}],concreteType:"ModifyImage",kind:"LinkedField",name:"modify_image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,a],kind:"Fragment",metadata:null,name:"ManageImageResourceLimitModalMutation",selections:l,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,e,n],kind:"Operation",name:"ManageImageResourceLimitModalMutation",selections:l},params:{cacheID:"b4c4a5b17c6aa265df64e4d2d6338684",id:null,metadata:{},name:"ManageImageResourceLimitModalMutation",operationKind:"mutation",text:"mutation ManageImageResourceLimitModalMutation(\n  $target: String!\n  $architecture: String\n  $props: ModifyImageInput!\n) {\n  modify_image(target: $target, architecture: $architecture, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="491b6e500587a3630195d9025ef76f29";const r=l},40956:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ManageImageResourceLimitModal_image",selections:[{alias:null,args:null,concreteType:"ResourceLimit",kind:"LinkedField",name:"resource_limits",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"registry",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"namespace",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"installed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tag",storageKey:null}],type:"Image",abstractKey:null,hash:"ff5d624d540d655b81042a14595b72d2"},r=l},15089:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteResourcePreset",kind:"LinkedField",name:"delete_resource_preset",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourcePresetListDeleteMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourcePresetListDeleteMutation",selections:n},params:{cacheID:"66d1ae4fe23653f392529fb39e2e61f2",id:null,metadata:{},name:"ResourcePresetListDeleteMutation",operationKind:"mutation",text:"mutation ResourcePresetListDeleteMutation(\n  $name: String!\n) {\n  delete_resource_preset(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="99b502a95d31e84e4de261e06fb89915";const r=l},4439:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"resource_slots",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"shared_memory",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"scaling_group_name",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ResourcePresetListQuery",selections:[{alias:null,args:null,concreteType:"ResourcePreset",kind:"LinkedField",name:"resource_presets",plural:!0,selections:[e,n,a,l,{args:null,kind:"FragmentSpread",name:"ResourcePresetSettingModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"ResourcePresetListQuery",selections:[{alias:null,args:null,concreteType:"ResourcePreset",kind:"LinkedField",name:"resource_presets",plural:!0,selections:[e,n,a,l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"5077b740e419c95cf7f162d8ad950d6d",id:null,metadata:{},name:"ResourcePresetListQuery",operationKind:"query",text:'query ResourcePresetListQuery {\n  resource_presets {\n    name\n    resource_slots\n    shared_memory\n    scaling_group_name @since(version: "25.4.0")\n    ...ResourcePresetSettingModalFragment\n  }\n}\n\nfragment ResourcePresetSettingModalFragment on ResourcePreset {\n  id @since(version: "25.4.0")\n  name\n  resource_slots\n  shared_memory\n  scaling_group_name @since(version: "25.4.0")\n}\n'}}}();l.hash="0284e5247dbfb40e6290f58570ba5fd7";const r=l},70987:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateResourcePreset",kind:"LinkedField",name:"create_resource_preset",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourcePresetSettingModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourcePresetSettingModalCreateMutation",selections:n},params:{cacheID:"4c6d8ef938cb69d5336e86c9d7fca415",id:null,metadata:{},name:"ResourcePresetSettingModalCreateMutation",operationKind:"mutation",text:"mutation ResourcePresetSettingModalCreateMutation(\n  $name: String!\n  $props: CreateResourcePresetInput!\n) {\n  create_resource_preset(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="6d3e941d6668ba2fda013fa61adb004d";const r=l},80312:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ResourcePresetSettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"resource_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shared_memory",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scaling_group_name",storageKey:null}],type:"ResourcePreset",abstractKey:null,hash:"0ee1263d70c0a64795de2223e0513101"},r=l},78993:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyResourcePreset",kind:"LinkedField",name:"modify_resource_preset",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourcePresetSettingModalModifyByIdMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourcePresetSettingModalModifyByIdMutation",selections:n},params:{cacheID:"a9e04a9d13321e5f45297f1b8b657c7f",id:null,metadata:{},name:"ResourcePresetSettingModalModifyByIdMutation",operationKind:"mutation",text:"mutation ResourcePresetSettingModalModifyByIdMutation(\n  $id: UUID!\n  $props: ModifyResourcePresetInput!\n) {\n  modify_resource_preset(id: $id, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="ea2ed67aec94a7a731f279a6c539a21a";const r=l},77259:(e,n,a)=>{a.r(n),a.d(n,{default:()=>r});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyResourcePreset",kind:"LinkedField",name:"modify_resource_preset",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourcePresetSettingModalModifyByNameMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourcePresetSettingModalModifyByNameMutation",selections:n},params:{cacheID:"6ce07dbffc5597af1943b0840e1b3810",id:null,metadata:{},name:"ResourcePresetSettingModalModifyByNameMutation",operationKind:"mutation",text:"mutation ResourcePresetSettingModalModifyByNameMutation(\n  $name: String!\n  $props: ModifyResourcePresetInput!\n) {\n  modify_resource_preset(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="a3d038466cde4ef350d21929ee0513b1";const r=l},50738:(e,n,a)=>{a.d(n,{a:()=>r});var l=a(46606);const r=e=>{const[n,a]=(0,l.q)(`hiddenColumnKeys.${e}`);return[n,a]}},42507:(e,n,a)=>{a.r(n),a.d(n,{default:()=>ln});var l,r,i,t,s,o,d,u=a(75045),m=a(32967),c=a(18936),g=a(17353),y=a(50738),p=a(47639),v=a(27340),f=a(64608),k=a(60081),h=a(64041),b=a(90840),x=a(53210),_=a(1869),A=a(8938),j=a(59910),S=a(81021),C=a(60476),R=a(18695),M=a(27484),F=a.n(M),K=a(1426),L=a(48602),w=a(18347),I=a(42906);const V=e=>{let{containerRegistryFrgmt:n=null,onOk:u,...c}=e;const{t:g}=(0,L.Bd)(),{token:y}=_.A.useToken(),{isDarkMode:p}=(0,k.e)(),{message:f,modal:M}=A.A.useApp(),V=(0,m.CX)().isManagerVersionCompatibleWith("24.09.3"),$=(0,K.useRef)(null),N=(0,w.useFragment)(void 0!==l?l:l=a(90832),n),[P,T]=function(){const e=(0,m.CX)(),n=e.isManagerVersionCompatibleWith("24.09.3"),[l,t]=(0,w.useMutation)(void 0!==r?r:r=a(11843)),[s,o]=(0,w.useMutation)(void 0!==i?i:i=a(77205));return n?[l,t]:[s,o]}(),[E,D]=function(){const e=(0,m.CX)(),n=e.isManagerVersionCompatibleWith("24.09.3"),[l,r]=(0,w.useMutation)(void 0!==t?t:t=a(36489)),[i,u]=(0,w.useMutation)(void 0!==s?s:s=a(27831)),[c,g]=(0,w.useMutation)(void 0!==o?o:o=a(43720)),[y,p]=(0,w.useMutation)(void 0!==d?d:d=a(84285));return[(e,a)=>(!a&&"password"in e.variables&&delete e.variables.password,n?a?l(e):c(e):a?i(e):y(e)),r||u||g||p]}(),O=async()=>{var e;return null===(e=$.current)||void 0===e?void 0:e.validateFields().then((e=>{var n;let a={id:e.row_id,registry_name:e.registry_name,url:e.url,type:e.type,project:e.project,username:F().isEmpty(e.username)?null:e.username,password:e.isChangedPassword||!N?F().isEmpty(e.password)?null:e.password:void 0,extra:F().isEmpty(e.extra)?null:JSON.stringify(JSON.parse(null!==(n=e.extra)&&void 0!==n?n:"{}"))};var l;N?E({variables:{...a,...a.id?{id:a.id}:{id:""}},onCompleted:(e,n)=>{var a;if(F().isEmpty(null===(a=e.modify_container_registry_node)||void 0===a?void 0:a.container_registry))f.error(g("dialog.ErrorOccurred"));else if(n&&n.length>0){const e=F().map(n,(e=>e.message));for(const n of e)f.error(n,2.5)}else u&&u("modify")},onError:e=>{f.error(g("dialog.ErrorOccurred"))}},null!==(l=e.isChangedPassword)&&void 0!==l&&l):(a=F().omitBy(a,F().isNil),P({variables:a,onCompleted:(e,n)=>{var a;if(F().isEmpty(null===e||void 0===e||null===(a=e.create_container_registry_node)||void 0===a?void 0:a.container_registry))f.error(g("dialog.ErrorOccurred"));else if(n&&(null===n||void 0===n?void 0:n.length)>0){const e=F().map(n,(e=>e.message));for(const n of e)f.error(n,2.5)}else u&&u("create")},onError(e){f.error(g("dialog.ErrorOccurred"))}}))})).catch((e=>{}))};return(0,I.jsx)(v.A,{title:g(N?"registry.ModifyRegistry":"registry.AddRegistry"),okText:g(N?"button.Save":"button.Add"),confirmLoading:T||D,onOk:()=>{var e;null===(e=$.current)||void 0===e||e.validateFields().then((e=>{F().includes(null===e||void 0===e?void 0:e.type,"harbor")&&(F().isEmpty(e.username)||(N?e.isChangedPassword&&F().isEmpty(e.password):F().isEmpty(e.password)))?M.confirm({title:g("button.Confirm"),content:g("registry.ConfirmNoUserName"),onOk:()=>{O()}}):O()})).catch((()=>{}))},...c,destroyOnClose:!0,children:(0,I.jsxs)(j.A,{ref:$,layout:"vertical",requiredMark:"optional",initialValues:N?{...N,extra:null!==N&&void 0!==N&&N.extra?JSON.stringify(JSON.parse(null===N||void 0===N?void 0:N.extra),null,2):""}:{},preserve:!1,children:[N&&(0,I.jsx)(x.A,{name:"row_id",value:N.row_id}),(0,I.jsx)(j.A.Item,{label:g("registry.RegistryName"),name:"registry_name",required:!0,rules:[{required:!0,message:g("registry.DescRegistryNameIsEmpty"),pattern:new RegExp("^.+$")},{type:"string",max:50,message:g("maxLength.50chars")}],children:(0,I.jsx)(S.A,{disabled:!!N,value:(null===N||void 0===N?void 0:N.registry_name)||void 0})}),(0,I.jsx)(j.A.Item,{name:"url",label:g("registry.RegistryURL"),required:!0,rules:[{required:!0},{validator:(e,n)=>{if(n){if(!n.startsWith("http://")&&!n.startsWith("https://"))return Promise.reject(g("registry.DescURLStartString"));try{new URL(n)}catch(a){return Promise.reject(g("registry.DescURLFormat"))}}return Promise.resolve()}},{type:"string",max:512,message:g("maxLength.512chars")}],children:(0,I.jsx)(S.A,{})}),(0,I.jsx)(j.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>F().isEmpty(null===e||void 0===e?void 0:e.password)!==F().isEmpty(null===n||void 0===n?void 0:n.password),children:e=>{let{validateFields:n,getFieldValue:a}=e;return n(["username"]),(0,I.jsx)(j.A.Item,{name:"username",label:g("registry.Username"),rules:[{required:!F().isEmpty(a("password"))},{type:"string",max:255,message:g("maxLength.255chars")}],children:(0,I.jsx)(S.A,{})})}}),(0,I.jsxs)(j.A.Item,{label:g("registry.Password"),children:[(0,I.jsx)(j.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>e.isChangedPassword!==n.isChangedPassword,children:e=>{let{getFieldValue:n}=e;return(0,I.jsx)(j.A.Item,{noStyle:!0,name:"password",children:(0,I.jsx)(S.A.Password,{disabled:!F().isEmpty(N)&&!n("isChangedPassword")})})}}),!F().isEmpty(N)&&(0,I.jsx)(j.A.Item,{noStyle:!0,name:"isChangedPassword",valuePropName:"checked",children:(0,I.jsx)(C.A,{onChange:e=>{var n;e.target.checked||(null===(n=$.current)||void 0===n||n.setFieldValue("password",""))},children:g("webui.menu.ChangePassword")})})]}),(0,I.jsx)(j.A.Item,{name:"type",label:g("registry.RegistryType"),required:!0,rules:[{required:!0,message:g("registry.PleaseSelectOption")}],children:(0,I.jsx)(R.A,{options:[{value:"docker"},{value:"harbor"},{value:"harbor2"},{value:"github"},{value:"gitlab"},{value:"ecr"},{value:"ecr-public"}]})}),(0,I.jsx)(j.A.Item,{shouldUpdate:(e,n)=>(null===e||void 0===e?void 0:e.type)!==(null===n||void 0===n?void 0:n.type),noStyle:!0,children:e=>{let{getFieldValue:n}=e;return(0,I.jsx)(j.A.Item,{name:"project",label:g("registry.ProjectName"),required:!0,rules:[{required:!0,message:g("registry.ProjectNameIsRequired")},{type:"string",max:255,message:g("maxLength.255chars")}],children:(0,I.jsx)(S.A,{allowClear:!0})})}}),V&&(0,I.jsx)(j.A.Item,{label:g("registry.ExtraInformation"),children:(0,I.jsx)(b.A,{style:{border:`1px solid ${y.colorBorder}`,borderRadius:y.borderRadius,overflow:"hidden"},children:(0,I.jsx)(j.A.Item,{name:"extra",noStyle:!0,rules:[{validator:(e,n)=>{if(n)try{JSON.parse(n)}catch(a){return Promise.reject(g("registry.DescExtraJsonFormat"))}return Promise.resolve()}}],children:(0,I.jsx)(h.A,{editable:!0,language:"json",theme:p?"dark":"light",style:{width:"100%"}})})})})]})})};var $,N,P,T=a(39667),E=a(7879),D=a(20572),O=a(23144),B=a(36266),q=a(92559),z=a(68159),U=a(67782),W=a(67884),Q=a(47525),X=a(29180),H=a(94558),J=a(76415),G=a(28174),Y=a(75864);const Z=e=>{var n;let{style:l}=e;const r=(0,m.CX)(),[i,t]=(0,m.Tw)("first"),[s,o]=(0,K.useTransition)(),d=(0,p.b)(),{message:k}=A.A.useApp(),{upsertNotification:h}=(0,g.js)(),[x,C]=(0,K.useTransition)(),[R,M]=(0,K.useTransition)(),[Z,ee]=(0,K.useState)(),[ne,{toggle:ae}]=(0,W.A)(),{baiPaginationOption:le,tablePaginationOption:re,setTablePaginationOption:ie}=(0,c.w4)({current:1,pageSize:20}),[te,se]=(0,K.useState)(),{container_registry_nodes:oe,domain:de}=(0,w.useLazyLoadQuery)(void 0!==$?$:$=a(8406),{domain:r._config.domainName,filter:Z,order:te,first:le.limit,offset:le.offset},{fetchPolicy:"first"===i?"store-and-network":"network-only",fetchKey:i}),ue=F().map(null===oe||void 0===oe?void 0:oe.edges,"node"),[me,ce]=(0,w.useMutation)(void 0!==N?N:N=a(5642)),[ge,ye]=(0,w.useMutation)(void 0!==P?P:P=a(74765)),{t:pe}=(0,L.Bd)(),{token:ve}=_.A.useToken(),[fe,ke]=(0,K.useState)(),[he,be]=(0,K.useState)(),[xe,_e]=(0,K.useState)(""),[Ae,je]=(0,K.useState)(!1),[Se,Ce]=(0,K.useState)(),Re=[{key:"registry_name",title:pe("registry.RegistryName"),dataIndex:"registry_name",sorter:!0},{key:"url",title:pe("registry.RegistryURL"),dataIndex:"url"},{key:"type",title:pe("registry.Type"),dataIndex:"type"},{key:"project",title:pe("registry.Project"),dataIndex:"project",render:e=>(0,I.jsx)(Q.A,{children:e||""},e||"")},{key:"username",title:pe("registry.Username"),dataIndex:"username"},{key:"password",title:pe("registry.Password"),dataIndex:"password"},{key:"enabled",title:pe("general.Enabled"),render:(e,n)=>{const a=F().includes(null===de||void 0===de?void 0:de.allowed_docker_registries,n.registry_name);return(0,I.jsx)(X.A,{checked:Se===n.id+i?!a:a,disabled:s||ye,loading:(s||ye)&&Se===n.id+i,onChange:e=>{if(!F().isString(n.registry_name))return;let a=F().clone((null===de||void 0===de?void 0:de.allowed_docker_registries)||[]);e?a.push(n.registry_name):a=F().without(a,n.registry_name),Ce(n.id+i),ge({variables:{domain:r._config.domainName,allowed_docker_registries:a},onCompleted:(n,a)=>{var l;if(null!==n&&void 0!==n&&null!==(l=n.modify_domain)&&void 0!==l&&l.ok){if(a&&(null===a||void 0===a?void 0:a.length)>0){const e=F().map(a,(e=>e.message));for(const n of e)k.error(n,2.5)}else o((()=>{t()}));k.info({key:"registry-enabled",content:pe(e?"registry.RegistryTurnedOn":"registry.RegistryTurnedOff")})}else{var r;k.error(null===n||void 0===n||null===(r=n.modify_domain)||void 0===r?void 0:r.msg)}}})}})}},{title:pe("general.Control"),fixed:"right",render:(e,n,a)=>(0,I.jsxs)(b.A,{children:[(0,I.jsx)(H.A,{title:pe("button.Edit"),children:(0,I.jsx)(J.Ay,{size:"large",style:{color:ve.colorInfo},type:"text",icon:(0,I.jsx)(E.A,{}),onClick:()=>{ke(n)}})}),(0,I.jsx)(H.A,{title:pe("button.Delete"),children:(0,I.jsx)(J.Ay,{size:"large",danger:!0,type:"text",icon:(0,I.jsx)(D.A,{}),onClick:()=>{be(n)}})}),(0,I.jsx)(H.A,{title:pe("maintenance.RescanImages"),children:(0,I.jsx)(J.Ay,{size:"large",type:"text",icon:(0,I.jsx)(O.A,{onClick:()=>{n.registry_name&&(async e=>{const n=h({message:`${e} ${pe("maintenance.RescanImages")}`,description:pe("registry.UpdatingRegistryInfo"),open:!0,backgroundTask:{status:"pending"},duration:0});r.maintenance.rescan_images(e).then((e=>{let{rescan_images:a}=e;a.ok?h({key:n,backgroundTask:{status:"pending",percent:0,taskId:a.task_id,onChange:{pending:pe("registry.RescanImages"),resolved:pe("registry.RegistryUpdateFinished"),rejected:pe("registry.RegistryUpdateFailed")}}}):h({key:n,backgroundTask:{status:"rejected"},duration:1})})).catch((e=>{console.log(e),h({key:n,backgroundTask:{status:"rejected"},duration:1}),e&&e.message&&(globalThis.lablupNotification.text=d.relieve(e.title),globalThis.lablupNotification.detail=e.message,globalThis.lablupNotification.show(!0,e))}))})(n.registry_name)}})})})]})}],[Me,Fe]=(0,y.a)("ContainerRegistryList");return(0,I.jsxs)(b.A,{direction:"column",align:"stretch",style:{flex:1,...l},children:[(0,I.jsxs)(b.A,{direction:"row",justify:"end",gap:"sm",style:{padding:ve.paddingContentVertical,paddingLeft:ve.paddingContentHorizontalSM,paddingRight:ve.paddingContentHorizontalSM},children:[(0,I.jsx)(f.Ay,{filterProperties:[{key:"registry_name",propertyLabel:pe("registry.RegistryName"),type:"string"}],value:Z,onChange:e=>{C((()=>{ee(e)}))}}),(0,I.jsx)(H.A,{title:pe("button.Refresh"),children:(0,I.jsx)(J.Ay,{loading:s,icon:(0,I.jsx)(B.A,{}),onClick:()=>{o((()=>{t()}))}})}),(0,I.jsx)(J.Ay,{type:"primary",icon:(0,I.jsx)(q.A,{}),onClick:()=>{je(!0)},children:pe("registry.AddRegistry")})]}),(0,I.jsx)(G.A,{rowKey:e=>e.id,scroll:{x:"max-content"},showSorterTooltip:!1,pagination:{pageSize:re.pageSize,showSizeChanger:!0,total:null!==(n=null===oe||void 0===oe?void 0:oe.count)&&void 0!==n?n:0,current:re.current,showTotal:(e,n)=>`${n[0]}-${n[1]} of ${e} items`,pageSizeOptions:["10","20","50"],style:{marginRight:ve.marginXS}},onChange:(e,n,a)=>{let{pageSize:l,current:r}=e;M((()=>{F().isNumber(r)&&F().isNumber(l)&&ie({current:r,pageSize:l}),se((0,u.Wh)(a))}))},loading:{spinning:R||x,indicator:(0,I.jsx)(z.A,{})},dataSource:(0,u.tS)(ue),columns:F().filter(Re,(e=>!F().includes(Me,F().toString(null===e||void 0===e?void 0:e.key))))}),(0,I.jsx)(V,{containerRegistryFrgmt:fe,open:!!fe||Ae,onOk:e=>{"create"===e?k.info({key:"registry-added",content:pe("registry.RegistrySuccessfullyAdded")}):"modify"===e&&k.info({key:"registry-modified",content:pe("registry.RegistrySuccessfullyModified")}),t(),ke(null),je(!1)},onCancel:()=>{ke(null),je(!1)},centered:!1}),(0,I.jsx)(v.A,{title:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(U.A,{style:{color:ve.colorWarning}})," ",pe("dialog.warning.CannotBeUndone")]}),okText:pe("button.Delete"),okButtonProps:{danger:!0,disabled:xe!==(null===he||void 0===he?void 0:he.registry_name)},onOk:()=>{he?me({variables:{id:he.id},onCompleted:(e,n)=>{n?(be(null),k.error({key:"registry-deletion-failed",content:pe("dialog.ErrorOccurred")})):(o((()=>{t()})),k.info({key:"registry-deleted",content:pe("registry.RegistrySuccessfullyDeleted")}),be(null))},onError:e=>{k.error({key:"registry-deletion-failed",content:pe("dialog.ErrorOccurred")})}}):be(null)},confirmLoading:ce,onCancel:()=>{be(null)},destroyOnClose:!0,open:!!he,children:(0,I.jsxs)(b.A,{direction:"column",align:"stretch",gap:"sm",style:{marginTop:ve.marginMD},children:[(0,I.jsxs)(Y.A.Text,{children:[(0,I.jsx)(Y.A.Text,{code:!0,children:null===he||void 0===he?void 0:he.registry_name})," ",pe("registry.TypeRegistryNameToDelete")]}),(0,I.jsx)(j.A,{children:(0,I.jsx)(j.A.Item,{name:"confirmText",rules:[{required:!0,message:pe("registry.HostnameDoesNotMatch"),validator:()=>xe===(null===he||void 0===he?void 0:he.registry_name)?Promise.resolve():Promise.reject()}],children:(0,I.jsx)(S.A,{autoComplete:"off",value:xe,onChange:e=>_e(e.target.value)})})})]})}),(0,I.jsx)(b.A,{justify:"end",style:{padding:ve.paddingXXS},children:(0,I.jsx)(J.Ay,{type:"text",icon:(0,I.jsx)(E.A,{}),onClick:()=>{ae()}})}),(0,I.jsx)(T.A,{open:ne,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&Fe(F().difference(Re.map((e=>F().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),ae()},columns:Re,hiddenColumnKeys:Me})]})};var ee,ne,ae;const le=e=>{var n;let{existingHostnames:l,containerRegistryFrgmt:r=null,onOk:i,...t}=e;const{t:s}=(0,L.Bd)(),o=(0,K.useRef)(null),{message:d,modal:u}=A.A.useApp(),m=(0,w.useFragment)(void 0!==ee?ee:ee=a(79946),r),[c,g]=(0,w.useMutation)(void 0!==ne?ne:ne=a(11493)),[y,p]=(0,w.useMutation)(void 0!==ae?ae:ae=a(21251)),f=async()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.validateFields().then((e=>{const n={hostname:e.hostname,props:{url:e.config.url,type:e.config.type,project:"docker"===e.config.project?void 0:e.config.project,username:F().isEmpty(e.config.username)?null:e.config.username,password:e.isChangedPassword?F().isEmpty(e.config.password)?null:e.config.password:void 0}};m?(e.isChangedPassword||delete n.props.password,y({variables:n,onCompleted:(e,n)=>{var a;if(F().isEmpty(null===(a=e.modify_container_registry)||void 0===a?void 0:a.container_registry))d.error(s("dialog.ErrorOccurred"));else if(n&&n.length>0){const e=F().map(n,(e=>e.message));for(const n of e)d.error(n,2.5)}else i&&i("modify")},onError:e=>{d.error(s("dialog.ErrorOccurred"))}})):c({variables:n,onCompleted:(e,n)=>{var a;if(F().isEmpty(null===e||void 0===e||null===(a=e.create_container_registry)||void 0===a?void 0:a.container_registry))d.error(s("dialog.ErrorOccurred"));else if(n&&(null===n||void 0===n?void 0:n.length)>0){const e=F().map(n,(e=>e.message));for(const n of e)d.error(n,2.5)}else i&&i("create")},onError(e){d.error(s("dialog.ErrorOccurred"))}})})).catch((e=>{}))};return(0,I.jsx)(v.A,{title:s(m?"registry.ModifyRegistry":"registry.AddRegistry"),okText:s(m?"button.Save":"button.Add"),confirmLoading:g||p,onOk:()=>{var e;null===(e=o.current)||void 0===e||e.validateFields().then((e=>{var n;F().includes(null===(n=e.config)||void 0===n?void 0:n.type,"harbor")&&(F().isEmpty(e.config.username)||(m?e.isChangedPassword&&F().isEmpty(e.config.password):F().isEmpty(e.config.password)))?u.confirm({title:s("button.Confirm"),content:s("registry.ConfirmNoUserName"),onOk:()=>{f()}}):f()})).catch((()=>{}))},...t,destroyOnClose:!0,children:(0,I.jsxs)(j.A,{ref:o,layout:"vertical",requiredMark:"optional",initialValues:m?{...m,config:{...m.config,project:(null===(n=m.config)||void 0===n?void 0:n.project)||void 0}}:{config:{type:"docker"}},preserve:!1,children:[(0,I.jsx)(j.A.Item,{label:s("registry.Hostname"),name:"hostname",required:!0,rules:[{required:!0,message:s("registry.DescHostnameIsEmpty"),pattern:new RegExp("^.+$")},{validator:(e,n)=>!m&&null!==l&&void 0!==l&&l.includes(n)?Promise.reject(s("registry.RegistryHostnameAlreadyExists")):Promise.resolve()}],children:(0,I.jsx)(S.A,{disabled:!!m,value:(null===m||void 0===m?void 0:m.hostname)||void 0})}),(0,I.jsx)(j.A.Item,{name:["config","url"],label:s("registry.RegistryURL"),required:!0,rules:[{required:!0},{validator:(e,n)=>{if(n){if(!n.startsWith("http://")&&!n.startsWith("https://"))return Promise.reject(s("registry.DescURLStartString"));try{new URL(n)}catch(a){return Promise.reject(s("registry.DescURLFormat"))}}return Promise.resolve()}},{type:"string",max:512,message:s("maxLength.512chars")}],children:(0,I.jsx)(S.A,{})}),(0,I.jsx)(j.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>{var a,l;return F().isEmpty(null===(a=e.config)||void 0===a?void 0:a.password)!==F().isEmpty(null===(l=n.config)||void 0===l?void 0:l.password)},children:e=>{let{validateFields:n,getFieldValue:a}=e;return n([["config","username"]]),(0,I.jsx)(j.A.Item,{name:["config","username"],label:s("registry.Username"),rules:[{required:!F().isEmpty(a(["config","password"]))},{type:"string",max:255,message:s("maxLength.255chars")}],children:(0,I.jsx)(S.A,{})})}}),(0,I.jsxs)(j.A.Item,{label:s("registry.Password"),children:[(0,I.jsx)(j.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>e.isChangedPassword!==n.isChangedPassword,children:e=>{let{getFieldValue:n}=e;return(0,I.jsx)(j.A.Item,{noStyle:!0,name:["config","password"],children:(0,I.jsx)(S.A.Password,{disabled:!F().isEmpty(m)&&!n("isChangedPassword")})})}}),!F().isEmpty(m)&&(0,I.jsx)(j.A.Item,{noStyle:!0,name:"isChangedPassword",valuePropName:"checked",children:(0,I.jsx)(C.A,{onChange:e=>{var n;e.target.checked||(null===(n=o.current)||void 0===n||n.setFieldValue(["config","password"],""))},children:s("webui.menu.ChangePassword")})})]}),(0,I.jsx)(j.A.Item,{name:["config","type"],label:s("registry.RegistryType"),required:!0,rules:[{required:!0,message:s("registry.PleaseSelectOption")}],children:(0,I.jsx)(R.A,{options:[{value:"docker"},{value:"harbor"},{value:"harbor2"}],onChange:()=>{}})}),(0,I.jsx)(j.A.Item,{shouldUpdate:(e,n)=>{var a,l;return(null===e||void 0===e||null===(a=e.config)||void 0===a?void 0:a.type)!==(null===n||void 0===n||null===(l=n.config)||void 0===l?void 0:l.type)},noStyle:!0,children:e=>{let{getFieldValue:n}=e;return"docker"!==n(["config","type"])&&(0,I.jsx)(j.A.Item,{name:["config","project"],label:s("registry.ProjectName"),required:!0,rules:[{required:!0,message:s("registry.ProjectNameIsRequired")},{validator:(e,n,a)=>(F().map(n,(e=>{if(e.length>255)return Promise.reject(s("maxLength.255chars"))})),Promise.resolve())}],children:(0,I.jsx)(R.A,{mode:"tags",open:!1,tokenSeparators:[","," "],suffixIcon:null})})}})]})})};var re,ie,te;const se=e=>{let{style:n}=e;const l=(0,m.CX)(),[r,i]=(0,m.Tw)("initial-fetch"),[t,s]=(0,K.useTransition)(),o=(0,p.b)(),{message:d}=A.A.useApp(),{upsertNotification:c}=(0,g.js)(),{container_registries:y,domain:f}=(0,w.useLazyLoadQuery)(void 0!==re?re:re=a(72708),{domain:l._config.domainName},{fetchPolicy:"store-and-network",fetchKey:r}),[k,h]=(0,w.useMutation)(void 0!==ie?ie:ie=a(51296)),[x,C]=(0,w.useMutation)(void 0!==te?te:te=a(90419)),{t:R}=(0,L.Bd)(),{token:M}=_.A.useToken(),[V,$]=(0,K.useState)(null),[N,P]=(0,K.useState)(null),[T,z]=(0,K.useState)(""),[W,Z]=(0,K.useState)(!1),[ee,ne]=(0,K.useState)();return(0,I.jsxs)(b.A,{direction:"column",align:"stretch",style:{flex:1,...n},children:[(0,I.jsxs)(b.A,{direction:"row",justify:"end",gap:"sm",style:{padding:M.paddingContentVertical,paddingLeft:M.paddingContentHorizontalSM,paddingRight:M.paddingContentHorizontalSM},children:[(0,I.jsx)(H.A,{title:R("button.Refresh"),children:(0,I.jsx)(J.Ay,{loading:t,icon:(0,I.jsx)(B.A,{}),onClick:()=>{s((()=>{i()}))}})}),(0,I.jsx)(J.Ay,{type:"primary",icon:(0,I.jsx)(q.A,{}),onClick:()=>{Z(!0)},children:R("registry.AddRegistry")})]}),(0,I.jsx)(G.A,{rowKey:e=>e.id,scroll:{x:"max-content"},pagination:!1,columns:[{title:R("registry.Hostname"),dataIndex:"hostname"},{title:R("registry.RegistryURL"),dataIndex:["config","url"]},{title:R("registry.Type"),dataIndex:["config","type"]},{title:R("registry.HarborProject"),dataIndex:["config","project"],render:(e,n)=>F().map(e,(e=>(0,I.jsx)(Q.A,{children:e||""},e||"")))},{title:R("registry.Username"),dataIndex:["config","username"]},{title:R("registry.Password"),dataIndex:["config","password"]},{title:R("general.Enabled"),render:(e,n)=>{const a=F().includes(null===f||void 0===f?void 0:f.allowed_docker_registries,n.hostname);return(0,I.jsx)(X.A,{checked:ee===n.hostname+r?!a:a,disabled:t||C,loading:(t||C)&&ee===n.hostname+r,onChange:e=>{if(!F().isString(n.hostname))return;let a=F().clone((null===f||void 0===f?void 0:f.allowed_docker_registries)||[]);e?a.push(n.hostname):a=F().without(a,n.hostname),ne(n.hostname+r),x({variables:{domain:l._config.domainName,allowed_docker_registries:a},onCompleted:(n,a)=>{var l;if(null!==n&&void 0!==n&&null!==(l=n.modify_domain)&&void 0!==l&&l.ok){if(a&&(null===a||void 0===a?void 0:a.length)>0){const e=F().map(a,(e=>e.message));for(const n of e)d.error(n,2.5)}else s((()=>{i()}));d.info({key:"registry-enabled",content:R(e?"registry.RegistryTurnedOn":"registry.RegistryTurnedOff")})}else{var r;d.error(null===n||void 0===n||null===(r=n.modify_domain)||void 0===r?void 0:r.msg)}}})}})}},{title:R("general.Control"),fixed:"right",render:(e,n,a)=>(0,I.jsxs)(b.A,{children:[(0,I.jsx)(H.A,{title:R("button.Edit"),children:(0,I.jsx)(J.Ay,{size:"large",style:{color:M.colorInfo},type:"text",icon:(0,I.jsx)(E.A,{}),onClick:()=>{$(n)}})}),(0,I.jsx)(H.A,{title:R("button.Delete"),children:(0,I.jsx)(J.Ay,{size:"large",danger:!0,type:"text",icon:(0,I.jsx)(D.A,{}),onClick:()=>{P(n)}})}),(0,I.jsx)(H.A,{title:R("maintenance.RescanImages"),children:(0,I.jsx)(J.Ay,{size:"large",type:"text",icon:(0,I.jsx)(O.A,{onClick:()=>{n.hostname&&(async e=>{const n=c({message:`${e} ${R("maintenance.RescanImages")}`,description:R("registry.UpdatingRegistryInfo"),open:!0,backgroundTask:{status:"pending"},duration:0});l.maintenance.rescan_images(e).then((e=>{let{rescan_images:a}=e;a.ok?c({key:n,backgroundTask:{status:"pending",percent:0,taskId:a.task_id,onChange:{pending:R("registry.RescanImages"),resolved:R("registry.RegistryUpdateFinished"),rejected:R("registry.RegistryUpdateFailed")}}}):c({key:n,backgroundTask:{status:"rejected"},duration:1})})).catch((e=>{console.log(e),c({key:n,backgroundTask:{status:"rejected"},duration:1}),e&&e.message&&(globalThis.lablupNotification.text=o.relieve(e.title),globalThis.lablupNotification.detail=e.message,globalThis.lablupNotification.show(!0,e))}))})(n.hostname)}})})})]})}],dataSource:(0,u.tS)(y)}),(0,I.jsx)(le,{containerRegistryFrgmt:V,existingHostnames:F().map(y,(e=>(null===e||void 0===e?void 0:e.hostname)||"")),open:!!V||W,onOk:e=>{"create"===e?(i(),d.info({key:"registry-added",content:R("registry.RegistrySuccessfullyAdded")})):"modify"===e&&d.info({key:"registry-modified",content:R("registry.RegistrySuccessfullyModified")}),$(null),Z(!1)},onCancel:()=>{$(null),Z(!1)},centered:!1}),(0,I.jsx)(v.A,{title:(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(U.A,{style:{color:M.colorWarning}})," ",R("dialog.warning.CannotBeUndone")]}),okText:R("button.Delete"),okButtonProps:{danger:!0,disabled:T!==(null===N||void 0===N?void 0:N.hostname)},onOk:()=>{N?k({variables:{hostname:N.hostname||""},onCompleted:(e,n)=>{n?(P(null),d.error({key:"registry-deletion-failed",content:R("dialog.ErrorOccurred")})):(s((()=>{i()})),d.info({key:"registry-deleted",content:R("registry.RegistrySuccessfullyDeleted")}),P(null))},onError:e=>{d.error({key:"registry-deletion-failed",content:R("dialog.ErrorOccurred")})}}):P(null)},confirmLoading:h,onCancel:()=>{P(null)},destroyOnClose:!0,open:!!N,children:(0,I.jsxs)(b.A,{direction:"column",align:"stretch",gap:"sm",style:{marginTop:M.marginMD},children:[(0,I.jsxs)(Y.A.Text,{children:[(0,I.jsx)(Y.A.Text,{code:!0,children:null===N||void 0===N?void 0:N.hostname})," ",R("registry.TypeRegistryNameToDelete")]}),(0,I.jsx)(j.A,{children:(0,I.jsx)(j.A.Item,{name:"confirmText",rules:[{required:!0,message:R("registry.HostnameDoesNotMatch"),validator:()=>T===(null===N||void 0===N?void 0:N.hostname)?Promise.resolve():Promise.reject()}],children:(0,I.jsx)(S.A,{autoComplete:"off",value:T,onChange:e=>z(e.target.value)})})})]})})]})};var oe=a(48248),de=a(81317),ue=a(64288),me=a(23106);const ce=e=>{let{onRequestClose:n,selectedRows:a,setInstallingImages:l,...r}=e;const{t:i}=(0,L.Bd)(),t=(0,m.CX)(),{upsertNotification:s}=(0,g.js)(),o=(0,p.b)();if(!r.open)return null;const{imagesToInstall:d,hasInstalledImage:u}=(()=>{let e=!1;return{imagesToInstall:a.filter((n=>(n.installed&&(e=!0),!n.installed))),hasInstalledImage:e}})();return(0,I.jsx)(v.A,{...r,destroyOnClose:!0,maskClosable:!1,onCancel:()=>n(),title:i("environment.CheckImageInstallation"),okText:i("environment.Install"),onOk:()=>{n();const e=d.map((async e=>{var n,a;const l=(null===e||void 0===e?void 0:e.registry)+"/"+(null!==(n=null===e||void 0===e?void 0:e.namespace)&&void 0!==n?n:null===e||void 0===e?void 0:e.name)+":"+(null===e||void 0===e?void 0:e.tag);let r=!1;const d={};null===e||void 0===e||null===(a=e.resource_limits)||void 0===a||a.forEach((e=>{const n=null===e||void 0===e?void 0:e.key;d[n]=null===e||void 0===e?void 0:e.min})),"cuda.device"in d&&" cuda.shares"in d?(r=!0,d.gpu=0,d.fgpu=d["cuda.shares"]):"cuda.device"in d?(d.gpu=d["cuda.device"],r=!0):r=!1,d.mem.endsWith("g")?d.mem=d.mem.replace("g",".5g"):d.mem.endsWith("m")&&(d.mem=Number(d.mem.slice(0,-1))+256+"m"),d.domain=t._config.domainName,d.group_name=t.current_group;const u=await t.get_resource_slots();r&&("cuda.device"in u||"cuda.shares"in u||(delete d.gpu,delete d.fgpu,delete d["cuda.shares"],delete d["cuda.device"])),"cuda.device"in u&&"cuda.shares"in u?"fgpu"in d&&"gpu"in d&&(delete d.gpu,delete d["cuda.device"]):"cuda.device"in u?(delete d.fgpu,delete d["cuda.shares"]):"cuda.shares"in u&&(delete d.gpu,delete d["cuda.device"]),d.enqueueOnly=!0,d.type="batch",d.startupCommand='echo "Image is installed"',s({message:`${i("environment.InstallingImage")}${l}${i("environment.TakesTime")}`,open:!0,duration:2});const m=await globalThis.lablupIndicator.start("indeterminate");m.set(10,i("import.Downloading"));try{return await t.image.install(l,null===e||void 0===e?void 0:e.architecture,d),m.end(1e3),null===e||void 0===e?void 0:e.id}catch(c){return globalThis.lablupNotification.text=o.relieve(c.title),globalThis.lablupNotification.detail=c.message,globalThis.lablupNotification.show(!0,c),m.set(100,i("environment.DescProblemOccurred")),m.end(1e3),null}}));Promise.allSettled(e).then((e=>{const n=e.filter((e=>"fulfilled"===e.status&&null!==e.value)).map((e=>e.value));l(n)}))},children:(0,I.jsxs)(b.A,{direction:"column",gap:"md",align:"start",children:[u?i("environment.InstalledImagesAreExcluded"):null,(0,I.jsx)(b.A,{direction:"column",align:"start",style:{width:"100%"},children:(0,I.jsx)(me.A,{size:"small",dataSource:d.map((e=>{var n;return`${null===e||void 0===e?void 0:e.registry}/${null!==(n=null===e||void 0===e?void 0:e.namespace)&&void 0!==n?n:null===e||void 0===e?void 0:e.name}/${null===e||void 0===e?void 0:e.tag}`})),style:{width:"100%"},renderItem:e=>(0,I.jsx)(me.A.Item,{children:(0,I.jsx)(Y.A.Text,{strong:!0,children:e})}),pagination:{pageSize:5,showTotal:e=>i("general.TotalItems",{total:e})}})}),(0,I.jsxs)(Y.A.Text,{children:[i("environment.DescSignificantInstallTime"),"\xa0",i("dialog.ask.DoYouWantToProceed")]})]})})};var ge,ye,pe=a(453),ve=a(41853);const fe=e=>{let{open:n,imageFrgmt:l,onRequestClose:r,...i}=e;const{t:t}=(0,L.Bd)(),s=(0,m.CX)(),o=K.useRef(null),d=A.A.useApp(),{token:u}=_.A.useToken(),c=(0,w.useFragment)(void 0!==ge?ge:ge=a(88140),l),[g,y]=(0,w.useMutation)(void 0!==ye?ye:ye=a(45261));if(!c)return null;const p=(()=>{let e=[];if(c.labels){const l=F().findIndex(c.labels,(e=>null!==e&&"ai.backend.service-ports"===(null===e||void 0===e?void 0:e.key)));var n,a;if(-1!==l)e=null===c||void 0===c||null===(n=c.labels[l])||void 0===n||null===(a=n.value)||void 0===a?void 0:a.split(",").map((e=>{const n=e.split(":");return{app:n[0],protocol:n[1],port:Number(n[2])}}))}return e})();return(0,I.jsxs)(v.A,{destroyOnClose:!0,open:n,onOk:()=>{var e;null===(e=o.current)||void 0===e||e.validateFields().then((()=>{var e;const n=null===(e=o.current)||void 0===e?void 0:e.getFieldValue("apps").map((e=>`${e.app}:${e.protocol}:${e.port}`)).join(","),a=F().map(c.labels,(e=>{return e.key.includes("service-ports")?{key:e.key,value:n}:{key:e.key,value:(null===(a=e.value)||void 0===a?void 0:a.toString())||""};var a})),l=()=>{var e;return g({variables:{target:`${null===c||void 0===c?void 0:c.registry}/${null!==(e=null===c||void 0===c?void 0:c.name)&&void 0!==e?e:c.namespace}:${null===c||void 0===c?void 0:c.tag}`,architecture:null===c||void 0===c?void 0:c.architecture,props:{labels:a,resource_limits:s.isManagerVersionCompatibleWith("24.03.4.*")?void 0:null}},onCompleted:(e,n)=>{var a,l;if(null!==e&&void 0!==e&&null!==(a=e.modify_image)&&void 0!==a&&a.ok)if(n&&(null===n||void 0===n?void 0:n.length)>0){const e=F().map(n,(e=>e.message));for(const n of e)ve.Ay.error(n,2.5)}else ve.Ay.success(t("environment.DescImagePortsModified")),r(!0);else ve.Ay.error(null===e||void 0===e||null===(l=e.modify_image)||void 0===l?void 0:l.msg)},onError:e=>{ve.Ay.error(t("dialog.ErrorOccurred"))}})};null!==c&&void 0!==c&&c.installed?d.modal.confirm({title:"Image reinstallation required",content:(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(L.x6,{i18nKey:"environment.ModifyImageResourceLimitReinstallRequired"})}),onOk:l,getContainer:()=>document.body,closable:!0}):l()})).catch((e=>{}))},onCancel:()=>r(!1),confirmLoading:y,title:t("environment.ManageApps"),...i,children:[(0,I.jsxs)(b.A,{direction:"row",style:{width:"100%",marginBottom:u.marginXS},children:[(0,I.jsx)(Y.A.Text,{strong:!0,style:{width:"32%"},children:t("environment.AppName")}),(0,I.jsx)(Y.A.Text,{strong:!0,style:{width:"32%"},children:t("environment.Protocol")}),(0,I.jsx)(Y.A.Text,{strong:!0,style:{width:"32%"},children:t("environment.Port")}),(0,I.jsx)(b.A,{})]}),(0,I.jsx)(j.A,{ref:o,layout:"vertical",autoComplete:"off",initialValues:{apps:p},requiredMark:!1,children:(0,I.jsx)(b.A,{direction:"column",children:(0,I.jsx)(j.A.List,{name:"apps",children:(e,n)=>{let{add:a,remove:l}=n;return(0,I.jsxs)(b.A,{direction:"column",style:{width:"100%"},children:[F().map(e,((e,n)=>(0,I.jsx)(j.A.Item,{children:(0,I.jsxs)(b.A,{direction:"row",gap:"xs",children:[(0,I.jsx)(j.A.Item,{...e,name:[e.name,"app"],noStyle:!0,rules:[{required:!0,message:t("environment.AppNameMustNotBeEmpty")}],children:(0,I.jsx)(S.A,{placeholder:t("environment.AppName")})}),(0,I.jsx)(j.A.Item,{...e,name:[e.name,"protocol"],noStyle:!0,rules:[{pattern:/^(http|tcp|pty|preopen)$/,required:!0,message:t("environment.ProtocolMustBeOneOfSupported")}],children:(0,I.jsx)(S.A,{placeholder:t("environment.Protocol")})}),(0,I.jsx)(j.A.Item,{...e,name:[e.name,"port"],noStyle:!0,rules:[{validator:(e,n)=>{const a=F().isUndefined(n)||""===n?NaN:F().toNumber(n);return F().isNaN(a)||a<0||a>=65535?Promise.reject(t("environment.PortMustBeInRange")):[2e3,2001,2002,2003,2200,7681].includes(Number(a))?Promise.reject(t("environment.PortReservedForInternalUse")):Promise.resolve()}},{validator:(e,a)=>{var l;const r=null===(l=o.current)||void 0===l?void 0:l.getFieldValue("apps");return F().isString(a)&&a.length>0&&r.some(((e,l)=>l!==n&&(null===e||void 0===e?void 0:e.port)===a))?Promise.reject(t("environment.PortMustBeUnique")):Promise.resolve()}}],children:(0,I.jsx)(S.A,{placeholder:t("environment.Port")})}),(0,I.jsx)(J.Ay,{type:"text",danger:!0,onClick:()=>l(e.name),style:0===n?{width:"10%",marginTop:8}:{width:"10%"},icon:(0,I.jsx)(D.A,{})})]},e.key)}))),(0,I.jsx)(J.Ay,{type:"dashed",onClick:()=>a(),block:!0,icon:(0,I.jsx)(q.A,{}),disabled:!c,children:t("button.Add")})]})}})})})]})};var ke=a(88653),he=a(19876),be=a(90134);const xe=e=>{var n;let{value:a,defaultValue:l,onChange:r,steps:i,showAllMarkLabels:t,...s}=e;const o=i.map((e=>F().isNumber(e)||F().isString(e)?{value:e,label:e.toString()}:e)),[d,u]=(0,he.A)({value:a,defaultValue:null!==l&&void 0!==l?l:null===(n=o[0])||void 0===n?void 0:n.value,onChange:r}),m=e=>0===e||e===o.length-1,c=F().fromPairs(o.map(((e,n)=>[n,m(n)?e.label:" "])));return(0,I.jsx)(be.A,{...s,marks:c,value:F().findIndex(o,{value:d}),min:0,tooltip:{formatter(e){var n;if((0,M.isNumber)(e))return null===(n=o[e])||void 0===n?void 0:n.label},...s.tooltip},max:o.length-1,onChange:e=>{var n,a;u(null===(n=o[e])||void 0===n?void 0:n.value,null===(a=o[e])||void 0===a?void 0:a.label)}})};var _e=a(30871);const Ae=e=>{var n,a,l,r;let{name:i,min:t,max:s}=e;const{token:o}=_.A.useToken(),{mergedResourceSlots:d}=(0,ke.Hv)(),u=e=>{var n,a,l,r,i,t;return{cpu:{label:null===d||void 0===d||null===(n=d.cpu)||void 0===n?void 0:n.description,steps:F().map(["0","1","2","3","4","5","6","7","8"],(e=>{var n;return{value:e,label:`${e} ${null===d||void 0===d||null===(n=d.cpu)||void 0===n?void 0:n.display_unit}`}}))},mem:{label:null===d||void 0===d||null===(a=d.mem)||void 0===a?void 0:a.description,steps:F().map(["64m","128m","256m","512m","1g","2g","4g","8g","16g","32g","64g","128g","256g","512g"],(e=>({value:e,label:`${e.slice(0,-1)} ${F().toUpper(F().last(e))}iB`})))},"cuda.device":{label:null===d||void 0===d||null===(l=d["cuda.device"])||void 0===l?void 0:l.description,steps:F().map(["0","1","2","3","4","5","6","7","8"],(e=>{var n;return{value:e,label:`${e} ${null===d||void 0===d||null===(n=d["cuda.device"])||void 0===n?void 0:n.display_unit}`}}))},"cuda.shares":{label:null===d||void 0===d||null===(r=d["cuda.shares"])||void 0===r?void 0:r.description,steps:F().map(["0","0.1","0.2","0.5","1.0","2.0","4.0","8.0"],(e=>{var n;return{value:e,label:`${e} ${null===d||void 0===d||null===(n=d["cuda.shares"])||void 0===n?void 0:n.display_unit}`}}))},"rocm.device":{label:null===d||void 0===d||null===(i=d["rocm.device"])||void 0===i?void 0:i.description,steps:["0","1","2","3","4","5","6","7","8"]}}[e]||{label:null===d||void 0===d||null===(t=d[e])||void 0===t?void 0:t.description,steps:F().map(["0","1","2","3","4"],(n=>{var a;return{value:n,label:`${n} ${(null===d||void 0===d||null===(a=d[e])||void 0===a?void 0:a.display_unit)||""}`}}))}},m=j.A.useFormInstance(),c=j.A.useWatch(i,m),g=F().find(u(i).steps,(e=>e.value===c||e===c));return(0,I.jsx)(j.A.Item,{label:null!==(n=null===(a=u(i))||void 0===a?void 0:a.label)&&void 0!==n?n:i.toUpperCase(),style:{flex:1},children:(0,I.jsxs)(b.A,{direction:"row",gap:"lg",children:[(0,I.jsx)(S.A,{size:"large",variant:"borderless",readOnly:!0,value:null!==(l=null===g||void 0===g?void 0:g.label)&&void 0!==l?l:g,style:{flex:1,fontSize:o.fontSizeLG},tabIndex:-1}),(0,I.jsx)(_e.A,{type:"vertical",style:{height:40}}),(0,I.jsx)(j.A.Item,{name:i,noStyle:!0,initialValue:t,children:(0,I.jsx)(xe,{style:{flex:5},steps:null===(r=u(i))||void 0===r?void 0:r.steps})})]})})};var je,Se;const Ce=e=>{var n;let{imageFrgmt:l,open:r,onRequestClose:i,...t}=e;const s=(0,m.CX)(),{t:o}=(0,L.Bd)(),d=(0,K.useRef)(null),u=A.A.useApp(),c=(0,w.useFragment)(void 0!==je?je:je=a(40956),l),[g,y]=(0,w.useMutation)(void 0!==Se?Se:Se=a(15933));return(0,I.jsx)(v.A,{destroyOnClose:!0,open:r,maskClosable:!1,onOk:async()=>{var e;const n=await(null===(e=d.current)||void 0===e?void 0:e.getFieldsValue()),a=Object.entries(n).map((e=>{var n,a,l,r;let[i,t]=e;return{key:i,min:null!==(n=t.toString())&&void 0!==n?n:"0",max:(null!==(a=null===c||void 0===c||null===(l=c.resource_limits)||void 0===l||null===(r=l.find((e=>(null===e||void 0===e?void 0:e.key)===i)))||void 0===r?void 0:r.max)&&void 0!==a?a:s.isManagerVersionCompatibleWith("24.03.4.*"))?void 0:null}})),l=()=>{var e;return g({variables:{target:`${null===c||void 0===c?void 0:c.registry}/${null!==(e=null===c||void 0===c?void 0:c.name)&&void 0!==e?e:null===c||void 0===c?void 0:c.namespace}:${null===c||void 0===c?void 0:c.tag}`,architecture:null===c||void 0===c?void 0:c.architecture,props:{resource_limits:a}},onCompleted:(e,n)=>{var a,l;if(null!==e&&void 0!==e&&null!==(a=e.modify_image)&&void 0!==a&&a.ok)if(n&&(null===n||void 0===n?void 0:n.length)>0){const e=F().map(n,(e=>e.message));for(const n of e)ve.Ay.error(n,2.5)}else ve.Ay.success(o("environment.DescImageResourceModified")),i(!0);else ve.Ay.error(null===e||void 0===e||null===(l=e.modify_image)||void 0===l?void 0:l.msg)},onError:e=>{ve.Ay.error(o("dialog.ErrorOccurred"))}})};null!==c&&void 0!==c&&c.installed?u.modal.confirm({title:"Image reinstallation required",content:(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(L.x6,{i18nKey:"environment.ModifyImageResourceLimitReinstallRequired"})}),onOk:l,getContainer:()=>document.body,closable:!0}):l()},onCancel:()=>i(!1),confirmLoading:y,centered:!0,title:o("environment.ModifyImageResourceLimit"),...t,children:(0,I.jsx)(j.A,{ref:d,layout:"vertical",children:null===c||void 0===c||null===(n=c.resource_limits)||void 0===n?void 0:n.map((e=>{const{key:n,min:a,max:l}=e,r=n.replace(/_/g,".");return(0,I.jsx)(Ae,{name:null!==r&&void 0!==r?r:"",min:null!==a&&void 0!==a?a:"",max:null!==l&&void 0!==l?l:""},r)}))})})};var Re=a(33027),Me=a(80951),Fe=a(61293),Ke=a(33550),Le=a(3181),we=function(e,n){return K.createElement(Le.A,(0,Fe.A)({},e,{ref:n,icon:Ke.A}))};const Ie=K.forwardRef(we);var Ve=a(89664),$e=a(23752),Ne=function(e,n){return K.createElement(Le.A,(0,Fe.A)({},e,{ref:n,icon:$e.A}))};const Pe=K.forwardRef(Ne);var Te;const Ee=e=>{let{style:n}=e;const{t:l}=(0,L.Bd)(),[r,i]=(0,K.useState)([]),[,{getBaseVersion:t,getBaseImages:s,getBaseImage:o,tagAlias:d,getTags:c}]=(0,m.Gj)(),{token:g}=_.A.useToken(),[p,v]=(0,K.useState)(null),[f,k]=(0,K.useState)(null),[h,x]=(0,K.useState)(!1),[j,C]=(0,m.Tw)("initial-fetch"),[,R]=(0,K.useTransition)(),[M,V]=(0,K.useState)([]),{message:$}=A.A.useApp(),[N,P]=(0,K.useState)(""),[D,{toggle:O}]=(0,W.A)(),[q,z]=(0,K.useTransition)(),[U,X]=(0,K.useTransition)(),H=(0,m.CX)(),G=null===H||void 0===H?void 0:H.supports("extended-image-info"),{images:Z}=(0,w.useLazyLoadQuery)(void 0!==Te?Te:Te=a(24265),{},{fetchPolicy:"initial-fetch"===j?"store-and-network":"network-only",fetchKey:j}),ee=(0,K.useMemo)((()=>F().sortBy(Z,(e=>null===e||void 0===e?void 0:e.humanized_name))),[Z]),ne=(0,u.LY)([{title:l("environment.Status"),dataIndex:"installed",key:"installed",defaultSortOrder:"descend",sorter:(e,n)=>F().toNumber((null===e||void 0===e?void 0:e.installed)||0)-F().toNumber((null===n||void 0===n?void 0:n.installed)||0),render:(e,n)=>null!==n&&void 0!==n&&n.id&&M.includes(n.id)?(0,I.jsx)(Q.A,{color:"gold",children:(0,I.jsx)(Me.A,{keyword:N,children:l("environment.Installing")})}):null!==n&&void 0!==n&&n.installed?(0,I.jsx)(Q.A,{color:"gold",children:(0,I.jsx)(Me.A,{keyword:N,children:l("environment.Installed")})}):null},{title:l("environment.FullImagePath"),key:"fullImagePath",render:e=>(0,I.jsx)(Y.A.Text,{copyable:{text:(0,u.A_)(e)||""},children:(0,I.jsx)(Me.A,{keyword:N,children:(0,u.A_)(e)||""})}),sorter:(e,n)=>(0,u._f)((0,u.A_)(e),(0,u.A_)(n)),width:g.screenXS},{title:l("environment.Registry"),dataIndex:"registry",key:"registry",sorter:(e,n)=>(0,u._f)(null===e||void 0===e?void 0:e.registry,null===n||void 0===n?void 0:n.registry),render:e=>(0,I.jsx)(Me.A,{keyword:N,children:e})},{title:l("environment.Architecture"),dataIndex:"architecture",key:"architecture",sorter:(e,n)=>(0,u._f)(null===e||void 0===e?void 0:e.architecture,null===n||void 0===n?void 0:n.architecture),render:e=>(0,I.jsx)(Me.A,{keyword:N,children:e})},G&&{title:l("environment.Namespace"),key:"namespace",dataIndex:"namespace",sorter:(e,n)=>(0,u._f)(null===e||void 0===e?void 0:e.namespace,null===n||void 0===n?void 0:n.namespace),render:e=>(0,I.jsx)(Me.A,{keyword:N,children:e})},G&&{title:l("environment.BaseImageName"),key:"base_image_name",dataIndex:"base_image_name",sorter:(e,n)=>(0,u._f)(null===e||void 0===e?void 0:e.base_image_name,null===n||void 0===n?void 0:n.base_image_name),render:e=>(0,I.jsx)(Me.A,{keyword:N,children:d(e)})},G&&{title:l("environment.Version"),key:"version",dataIndex:"version",sorter:(e,n)=>(0,u._f)(null===e||void 0===e?void 0:e.version,null===n||void 0===n?void 0:n.version),render:e=>(0,I.jsx)(Me.A,{keyword:N,children:e})},G&&{title:l("environment.Tags"),key:"tags",dataIndex:"tags",render:(e,n)=>(0,I.jsx)(b.A,{direction:"row",align:"start",children:F().map(e,(e=>{var a;const l=F().includes(e.key,"customized_"),r=l?null===(a=F().find(null===n||void 0===n?void 0:n.labels,{key:"ai.backend.customized-image.name"}))||void 0===a?void 0:a.value:e.value,i=d(e.key+r);return F().isEqual(i,(0,u.WY)(e.key+r))?(0,I.jsx)(ue.A,{highlightKeyword:N,values:[{label:d(e.key),color:l?"cyan":"blue"},{label:null!==r&&void 0!==r?r:"",color:l?"cyan":"blue"}]},e.key):(0,I.jsx)(Q.A,{color:l?"cyan":"blue",children:(0,I.jsx)(Me.A,{keyword:N,children:i})},e.key)}))})},!G&&{title:l("environment.Namespace"),key:"name",dataIndex:"name",sorter:(e,n)=>(0,u._f)((0,u.A_)(e),(0,u.A_)(n)),render:e=>(0,I.jsx)(Me.A,{keyword:N,children:e})},!G&&{title:l("environment.Base"),key:"baseimage",dataIndex:"baseimage",sorter:(e,n)=>(0,u._f)(o((0,u.A_)(e)||""),o((0,u.A_)(n)||"")),render:(e,n)=>(0,I.jsx)(Me.A,{keyword:N,children:d(o((0,u.A_)(n)||""))})},!G&&{title:l("environment.Version"),key:"baseversion",dataIndex:"baseversion",sorter:(e,n)=>(0,u._f)(t((0,u.A_)(e)||""),t((0,u.A_)(n)||"")),render:(e,n)=>(0,I.jsx)(Me.A,{keyword:N,children:t((0,u.A_)(n)||"")})},!G&&{title:l("environment.Tags"),key:"tag",dataIndex:"tag",sorter:(e,n)=>(0,u._f)(null===e||void 0===e?void 0:e.tag,null===n||void 0===n?void 0:n.tag),render:(e,n)=>(0,I.jsx)(pe.Jj,{tag:e,labels:n.labels,highlightKeyword:N})},{title:l("environment.Digest"),dataIndex:"digest",key:"digest",sorter:(e,n)=>(0,u._f)((null===e||void 0===e?void 0:e.digest)||"",(null===n||void 0===n?void 0:n.digest)||""),render:(e,n)=>(0,I.jsx)(Y.A.Text,{ellipsis:{tooltip:!0},style:{maxWidth:200},children:(0,I.jsx)(Me.A,{keyword:N,children:n.digest})})},{title:l("environment.ResourceLimit"),dataIndex:"resource_limits",key:"resource_limits",render:(e,n)=>{var a;return(0,I.jsx)(b.A,{direction:"row",gap:"xxs",children:null===n||void 0===n||null===(a=n.resource_limits)||void 0===a?void 0:a.map((e=>(0,I.jsx)(Re.A,{type:(null===e||void 0===e?void 0:e.key)||"",value:(null===e||void 0===e?void 0:e.min)||"0",max:(null===e||void 0===e?void 0:e.max)||"Infinity"},null===e||void 0===e?void 0:e.key)))})}},{title:l("general.Control"),key:"control",dataIndex:"control",fixed:"right",render:(e,n)=>(0,I.jsxs)(b.A,{direction:"row",align:"stretch",justify:"center",gap:"xxs",onClick:e=>{e.stopPropagation()},children:[(0,I.jsx)(J.Ay,{type:"text",icon:(0,I.jsx)(E.A,{style:{color:g.colorInfo}}),onClick:()=>k(n)}),(0,I.jsx)(J.Ay,{type:"text",icon:(0,I.jsx)(Ie,{style:{color:g.colorInfo}}),onClick:()=>{v(n)}})]})}]),[ae,le]=(0,y.a)("ImageList"),re=(0,K.useMemo)((()=>null===ee||void 0===ee?void 0:ee.map((e=>({namespace:G?null===e||void 0===e?void 0:e.namespace:null===e||void 0===e?void 0:e.name,fullName:(0,u.A_)(e)||"",digest:(null===e||void 0===e?void 0:e.digest)||"",baseversion:t((0,u.A_)(e)||""),baseimage:null!==e&&void 0!==e&&e.tag&&null!==e&&void 0!==e&&e.name?s(e.tag,e.name):[],tag:c((null===e||void 0===e?void 0:e.tag)||"",null===e||void 0===e?void 0:e.labels)||[],isCustomized:!(null===e||void 0===e||!e.tag)&&-1!==e.tag.indexOf("customized"),baseImageName:G?null===e||void 0===e?void 0:e.base_image_name:"",tags:G?null===e||void 0===e?void 0:e.tags:[],version:G?null===e||void 0===e?void 0:e.version:""})))),[ee]),ie=(0,K.useMemo)((()=>{if(F().isEmpty(N))return ee;const e=new RegExp(`${F().escapeRegExp(N)}`,"i");return F().filter(ee,((n,a)=>F().some(n,((n,l)=>{if("id"===l)return!1;if(["digest","architecture","registry"].includes(l))return e.test(F().toString(n));const r=re[a]||{},i=e.test(r.baseversion),t=F().some(r.baseimage,(n=>e.test(n))),s=F().some(r.tag,(n=>e.test(n.key)||e.test(n.value))),o=!!r.isCustomized&&e.test("customized"),d=e.test(r.namespace||""),u=e.test(r.fullName),m=F().some(r.tags,(n=>e.test(n.key)||e.test(n.value))),c=e.test(r.version||""),g=e.test(r.digest);return i||t||s||d||o||u||m||c||g}))))}),[N,re,ee]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(b.A,{direction:"column",align:"stretch",style:{flex:1,...n},children:[(0,I.jsxs)(b.A,{justify:"end",style:{padding:g.paddingSM},gap:"xs",children:[r.length>0?(0,I.jsx)(Y.A.Text,{children:l("general.NSelected",{count:r.length})}):null,(0,I.jsx)(S.A,{allowClear:!0,prefix:(0,I.jsx)(Ve.A,{}),placeholder:l("environment.SearchImages"),onChange:e=>{X((()=>P(e.target.value)))},style:{width:200}}),(0,I.jsx)(J.Ay,{icon:(0,I.jsx)(B.A,{}),loading:q,onClick:()=>{i([]),z((()=>C()))},children:l("button.Refresh")}),(0,I.jsx)(J.Ay,{icon:(0,I.jsx)(Pe,{}),style:{backgroundColor:g.colorPrimary,color:"white"},onClick:()=>{0!==r.length?r.some((e=>!e.installed))?x(!0):$.error(l("environment.AlreadyInstalledImage")):$.error(l("environment.NoImagesAreSelected"))},children:l("environment.Install")})]}),(0,I.jsx)(de.A,{resizable:!0,rowKey:"id",scroll:{x:"max-content"},pagination:{showTotal:(e,n)=>`${n[0]}-${n[1]} of ${e} items`,pageSizeOptions:["10","20","50"],style:{marginRight:g.marginXS}},dataSource:(0,u.tS)(ie),columns:F().filter(ne,(e=>!F().includes(ae,F().toString(null===e||void 0===e?void 0:e.key)))),loading:U,rowSelection:{type:"checkbox",onChange:(e,n)=>{i(n)},selectedRowKeys:r.map((e=>e.id))},onRow:e=>({onClick:n=>{r.find((n=>n.id===e.id))?i((n=>n.filter((n=>n.id!==e.id)))):i((n=>[...n,e]))}}),showSorterTooltip:!1,sortDirections:["descend","ascend","descend"]}),(0,I.jsx)(b.A,{justify:"end",style:{padding:g.paddingXXS},children:(0,I.jsx)(J.Ay,{type:"text",icon:(0,I.jsx)(E.A,{}),onClick:()=>{O()}})})]}),(0,I.jsx)(Ce,{open:!!f,onRequestClose:e=>{k(null),e&&R((()=>{C()}))},imageFrgmt:f}),(0,I.jsx)(fe,{open:!!p,onRequestClose:e=>{v(null),e&&R((()=>{C()}))},imageFrgmt:p}),(0,I.jsx)(ce,{open:h,onRequestClose:()=>{x(!1)},setInstallingImages:V,selectedRows:r}),(0,I.jsx)(T.A,{open:D,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&le(F().difference(ne.map((e=>F().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),O()},columns:ne,hiddenColumnKeys:ae})]})};var De,Oe,Be,qe,ze=a(9160),Ue=a(15161),We=a(95936),Qe=a(60718),Xe=a(85132),He=a(12611);const Je=e=>{var n;let{resourcePresetFrgmt:l,existingResourcePresetNames:r,onRequestClose:i,...t}=e;const{t:s}=(0,L.Bd)(),{message:o}=A.A.useApp(),d=(0,K.useRef)(null),c=(0,m.CX)(),g=(0,ze.hd)(),[y]=(0,ke.bL)(),{mergedResourceSlots:p}=(0,ke.Hv)(),f=(0,w.useFragment)(void 0!==De?De:De=a(80312),l),[k,h]=(0,w.useMutation)(void 0!==Oe?Oe:Oe=a(70987)),[b,x]=(0,w.useMutation)(void 0!==Be?Be:Be=a(77259)),[_,C]=(0,w.useMutation)(void 0!==qe?qe:qe=a(78993));return(0,I.jsx)(v.A,{...t,title:s(f?"resourcePreset.ModifyResourcePreset":"resourcePreset.CreateResourcePreset"),onOk:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.validateFields().then((e=>{var n;let a=F().mapValues(null===e||void 0===e?void 0:e.resource_slots,((e,n)=>{var a;return F().includes(n,"mem")?null===(a=(0,u.Is)(e,"b",0))||void 0===a?void 0:a.numberFixed:e}));a=F().pickBy(a,F().negate(F().isUndefined));const l={resource_slots:JSON.stringify(a||{}),shared_memory:null!==e&&void 0!==e&&e.shared_memory?null===(n=(0,u.Is)(null===e||void 0===e?void 0:e.shared_memory,"b",0))||void 0===n?void 0:n.numberFixed:null};null!==c&&void 0!==c&&c.supports("resource-presets-per-resource-group")&&(l.scaling_group_name=(null===e||void 0===e?void 0:e.scaling_group_name)||null),F().isEmpty(f)?k({variables:{name:null===e||void 0===e?void 0:e.name,props:l},onCompleted:(e,n)=>{var a,l;if(null!==e&&void 0!==e&&null!==(a=e.create_resource_preset)&&void 0!==a&&a.ok)if(n&&(null===n||void 0===n?void 0:n.length)>0){const e=F().map(n,(e=>e.message));F().forEach(e,(e=>{o.error(e,2.5)})),i(!1)}else o.success(s("resourcePreset.Created")),i(!0);else o.error(null===e||void 0===e||null===(l=e.create_resource_preset)||void 0===l?void 0:l.msg),i(!1)},onError(e){o.error(null===e||void 0===e?void 0:e.message)}}):f.id?_({variables:{id:f.id,props:l},onCompleted:(e,n)=>{var a,l;if(null!==e&&void 0!==e&&null!==(a=e.modify_resource_preset)&&void 0!==a&&a.ok)if(n&&(null===n||void 0===n?void 0:n.length)>0){const e=F().map(n,(e=>null===e||void 0===e?void 0:e.message));F().forEach(e,(e=>{o.error(e,2.5)})),i(!1)}else o.success(s("resourcePreset.Updated")),i(!0);else o.error(null===e||void 0===e||null===(l=e.modify_resource_preset)||void 0===l?void 0:l.msg),i(!1)},onError(e){o.error(null===e||void 0===e?void 0:e.message)}}):b({variables:{name:null===e||void 0===e?void 0:e.name,props:l},onCompleted:(e,n)=>{var a,l;if(null!==e&&void 0!==e&&null!==(a=e.modify_resource_preset)&&void 0!==a&&a.ok)if(n&&(null===n||void 0===n?void 0:n.length)>0){const e=F().map(n,(e=>null===e||void 0===e?void 0:e.message));F().forEach(e,(e=>{o.error(e,2.5)})),i(!1)}else o.success(s("resourcePreset.Updated")),i(!0);else o.error(null===e||void 0===e||null===(l=e.modify_resource_preset)||void 0===l?void 0:l.msg),i(!1)},onError(e){o.error(null===e||void 0===e?void 0:e.message)}})})).catch((()=>{}))},onCancel:()=>i(!1),destroyOnClose:!0,confirmLoading:h||x||C,children:(0,I.jsxs)(j.A,{ref:d,layout:"vertical",preserve:!1,initialValues:f?{...f,resource_slots:F().mapValues(JSON.parse((null===f||void 0===f?void 0:f.resource_slots)||"{}"),((e,n)=>{var a;return F().includes(n,"mem")?null===(a=(0,u.Is)(e+"b","g"))||void 0===a?void 0:a.numberUnit:e}))||{},shared_memory:null!==f&&void 0!==f&&f.shared_memory?null===(n=(0,u.Is)((null===f||void 0===f?void 0:f.shared_memory)+"b","g"))||void 0===n?void 0:n.numberUnit:null}:{},children:[(0,I.jsx)(j.A.Item,{label:s("resourcePreset.PresetName"),name:"name",rules:[{required:!0,message:s("resourcePreset.NoPresetName")},{pattern:/^[a-zA-Z0-9._-]*$/,message:s("data.AllowsLettersNumbersAnd-_Dot")},{validator:(e,n)=>!f&&null!==r&&void 0!==r&&r.includes(n)?Promise.reject(new Error(s("resourcePreset.PresetNameAlreadyExists"))):Promise.resolve()}],children:(0,I.jsx)(S.A,{disabled:!!f})}),(null===c||void 0===c?void 0:c.supports("resource-presets-per-resource-group"))&&(0,I.jsx)(j.A.Item,{label:s("general.ResourceGroup"),name:"scaling_group_name",children:(0,I.jsx)(We.A,{projectName:g.name,allowClear:!0,popupMatchSelectWidth:!1})}),(0,I.jsx)(j.A.Item,{label:s("resourcePreset.ResourcePreset"),children:(0,I.jsxs)(Qe.A,{gutter:16,children:[F().map(F().chunk(F().keys(y),2),((e,n)=>(0,I.jsx)(K.Fragment,{children:F().map(e,(e=>{var n,a;return(0,I.jsx)(Xe.A,{span:12,style:{alignSelf:"end"},children:(0,I.jsx)(j.A.Item,{label:(null===(n=F().get(p,e))||void 0===n?void 0:n.description)||e,name:["resource_slots",e],rules:[{validator:(n,a)=>a&&F().includes(e,"mem")&&(0,u.Is)(a,"p").number>(0,u.Is)("300p","p").number?Promise.reject(new Error("Memory size should be less than 300 PiB")):Promise.resolve()}],children:F().includes(e,"mem")?(0,I.jsx)(Ue.A,{}):(0,I.jsx)(He.A,{min:"cpu"===e?1:0,step:F().includes(e,".shares")?.1:1,addonAfter:null===(a=F().get(p,e))||void 0===a?void 0:a.display_unit})})},e)}))},n))),(0,I.jsx)(Xe.A,{span:12,style:{alignSelf:"end"},children:(0,I.jsx)(j.A.Item,{label:s("resourcePreset.SharedMemory"),name:"shared_memory",dependencies:["resource_slots","mem"],rules:[e=>{let{getFieldValue:n}=e;return{validator(e,a){var l,r,i,t,o,d;return a&&null!==(l=n("resource_slots"))&&void 0!==l&&l.mem&&(null!==(r=null===(i=(0,u.Is)(null===(t=n("resource_slots"))||void 0===t?void 0:t.mem,"b"))||void 0===i?void 0:i.number)&&void 0!==r?r:0)<(null!==(o=null===(d=(0,u.Is)(a,"b"))||void 0===d?void 0:d.number)&&void 0!==o?o:0)?Promise.reject(s("resourcePreset.MemoryShouldBeLargerThanSHMEM")):Promise.resolve()}}}],children:(0,I.jsx)(Ue.A,{max:"7.999p"})})})]})})]})})};var Ge,Ye;const Ze=()=>{const{t:e}=(0,L.Bd)(),{token:n}=_.A.useToken(),{modal:l}=A.A.useApp(),[r,i]=(0,K.useTransition)(),[t,s]=(0,m.Tw)("initial-fetch"),[o,d]=(0,K.useState)(),[c,g]=(0,K.useState)(null),[y,p]=(0,K.useState)(!1),v=(0,m.CX)(),{resource_presets:f}=(0,w.useLazyLoadQuery)(void 0!==Ge?Ge:Ge=a(4439),{},{fetchPolicy:"initial-fetch"===t?"store-and-network":"network-only",fetchKey:t}),[k,h]=(0,w.useMutation)(void 0!==Ye?Ye:Ye=a(15089)),x=(0,u.LY)([{title:e("resourcePreset.Name"),dataIndex:"name",sorter:(e,n)=>(0,u._f)(null===e||void 0===e?void 0:e.name,null===n||void 0===n?void 0:n.name)},{title:e("resourcePreset.Resources"),dataIndex:"resource_slots",render:e=>(0,I.jsx)(b.A,{gap:"xxs",children:F().isEmpty(e)?"-":F().map(JSON.parse(e),((e,n)=>(0,I.jsx)(Re.A,{type:n,value:e},n)))})},{title:e("resourcePreset.SharedMemory"),dataIndex:"shared_memory",render:e=>{var n;return e?null===(n=(0,u.Is)(e+"","g"))||void 0===n?void 0:n.number:"-"}},(null===v||void 0===v?void 0:v.supports("resource-presets-per-resource-group"))&&{title:e("general.ResourceGroup"),dataIndex:"scaling_group_name",sorter:(e,n)=>(0,u._f)(null===e||void 0===e?void 0:e.scaling_group_name,null===n||void 0===n?void 0:n.scaling_group_name),render:e=>null!==e&&void 0!==e?e:"-"},{title:e("general.Control"),key:"control",fixed:"right",render:(a,r)=>(0,I.jsxs)(b.A,{align:"stretch",children:[(0,I.jsx)(H.A,{title:e("button.Edit"),children:(0,I.jsx)(J.Ay,{type:"text",size:"large",icon:(0,I.jsx)(E.A,{}),style:{color:n.colorInfo},onClick:()=>{r&&g(r)}})}),(0,I.jsx)(H.A,{title:e("button.Delete"),children:(0,I.jsx)(J.Ay,{type:"text",size:"large",icon:(0,I.jsx)(D.A,{style:{color:n.colorError}}),loading:h&&o===(null===r||void 0===r?void 0:r.name)+t,disabled:h&&o!==(null===r||void 0===r?void 0:r.name)+t,onClick:()=>{l.confirm({title:e("resourcePreset.DeleteResourcePreset"),content:(0,I.jsxs)(I.Fragment,{children:[e("resourcePreset.AboutToDeletePreset")," ",(0,I.jsx)(Y.A.Text,{strong:!0,children:null===r||void 0===r?void 0:r.name})]}),onOk:()=>{var e;d((null===r||void 0===r?void 0:r.name)+t),k({variables:{name:null!==(e=null===r||void 0===r?void 0:r.name)&&void 0!==e?e:""},onCompleted:()=>{i((()=>{s()}))}})},okText:e("button.Delete"),okType:"primary",okButtonProps:{danger:!0}})}})})]})}]);return(0,I.jsxs)(b.A,{direction:"column",align:"stretch",children:[(0,I.jsx)(b.A,{direction:"row",gap:"xs",justify:"end",wrap:"wrap",style:{padding:n.paddingContentVertical,paddingLeft:n.paddingContentHorizontalSM,paddingRight:n.paddingContentHorizontalSM},children:(0,I.jsxs)(b.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:[(0,I.jsx)(H.A,{title:e("button.Refresh"),children:(0,I.jsx)(J.Ay,{icon:(0,I.jsx)(B.A,{}),loading:r,onClick:()=>{i((()=>{s()}))}})}),(0,I.jsx)(J.Ay,{type:"primary",icon:(0,I.jsx)(q.A,{}),onClick:()=>{p(!0)},children:e("resourcePreset.CreatePreset")})]})}),(0,I.jsx)(G.A,{rowKey:"name",dataSource:(0,u.tS)(f),scroll:{x:"max-content"},pagination:!1,sortDirections:["descend","ascend","descend"],showSorterTooltip:!1,columns:x}),(0,I.jsx)(K.Suspense,{fallback:null,children:(0,I.jsx)(Je,{resourcePresetFrgmt:c,open:!!c||y,onRequestClose:e=>{g(null),p(!1),e&&i((()=>{s()}))},existingResourcePresetNames:F().map(f,(e=>null===e||void 0===e?void 0:e.name))})})]})};var en=a(9567),nn=a(93409);const an=(0,nn.withDefault)(nn.StringParam,"image"),ln=()=>{const{t:e}=(0,L.Bd)(),[n,a]=(0,nn.useQueryParam)("tab",an),l=(0,m.CX)(),r=l.supports("container-registry-gql"),i=null===l||void 0===l?void 0:l.isManagerVersionCompatibleWith("24.09.0");return(0,I.jsx)(en.A,{activeTabKey:n,onTabChange:a,tabList:[{key:"image",label:e("environment.Images")},{key:"preset",label:e("environment.ResourcePresets")},...l.is_superadmin?[{key:"registry",label:e("environment.Registries")}]:[]],styles:{body:{padding:0,paddingTop:1,overflow:"hidden"}},children:(0,I.jsxs)(K.Suspense,{fallback:(0,I.jsx)(oe.A,{style:{height:"calc(100vh - 145px)"},spinSize:"large"}),children:["image"===n&&(0,I.jsx)(Ee,{}),"preset"===n&&(0,I.jsx)(Ze,{}),"registry"===n?r?i?(0,I.jsx)(Z,{}):(0,I.jsx)(se,{}):(0,I.jsx)("backend-ai-registry-list",{active:!0}):null]})})}},92559:(e,n,a)=>{a.d(n,{A:()=>o});var l=a(61293),r=a(1426),i=a(20358),t=a(3181),s=function(e,n){return r.createElement(t.A,(0,l.A)({},e,{ref:n,icon:i.A}))};const o=r.forwardRef(s)},23144:(e,n,a)=>{a.d(n,{A:()=>o});var l=a(61293),r=a(1426),i=a(20973),t=a(3181),s=function(e,n){return r.createElement(t.A,(0,l.A)({},e,{ref:n,icon:i.A}))};const o=r.forwardRef(s)}}]);
//# sourceMappingURL=2507.a7a6e15c.chunk.js.map