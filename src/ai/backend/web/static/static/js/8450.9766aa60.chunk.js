/*! For license information please see 8450.9766aa60.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[8450],{23370:(e,n,l)=>{l.d(n,{A:()=>c});const a=function(){var e=[{alias:null,args:[{kind:"Literal",name:"is_active",value:!0}],concreteType:"Domain",kind:"LinkedField",name:"domains",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:"domains(is_active:true)"}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DomainSelectorQuery",selections:e,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"DomainSelectorQuery",selections:e},params:{cacheID:"9df762094b74dc3eb8079edfcc73765f",id:null,metadata:{},name:"DomainSelectorQuery",operationKind:"query",text:"query DomainSelectorQuery {\n  domains(is_active: true) {\n    name\n  }\n}\n"}}}();a.hash="c14d362fa40cf9a3cef5d1d71202cc5f";const i=a;var t=l(89798),r=l(8348),o=l.n(r),s=(l(66610),l(54070)),u=l(89737),d=l(66906);const c=e=>{let{onSelectDomain:n,...l}=e;const{t:a}=(0,s.Bd)(),{domains:r}=(0,u.useLazyLoadQuery)(i,{},{fetchPolicy:"store-and-network"});return(0,d.jsxs)(t.A,{onChange:(e,l)=>{null===n||void 0===n||n(l)},placeholder:a("storageHost.quotaSettings.SelectDomain"),...l,children:[o().map(r,(e=>(0,d.jsx)(t.A.Option,{domainName:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.name))),";"]})}},67641:(e,n,l)=>{l.d(n,{A:()=>p});var a=l(39718),i=l(45885),t=l(88153),r=l(8804),o=l(22065),s=l(37325),u=l(8348),d=l.n(u),c=l(66610),m=l(54070),g=l(66906);const p=e=>{var n;let{open:l,onRequestClose:u,columns:p,hiddenColumnKeys:v,...y}=e;const x=(0,c.useRef)(null),{t:h}=(0,m.Bd)(),{token:b}=t.A.useToken(),f=d().map(p,(e=>{return"string"===typeof e.title?{label:e.title,value:d().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(n=e.title,c.Children.map(n.props.children,(e=>{if("string"===typeof e)return e}))),value:d().toString(e.key)}:{label:void 0,value:d().toString(e.key)};var n}));return(0,g.jsx)(a.A,{title:h("table.SettingTable"),open:l,destroyOnClose:!0,centered:!0,onOk:()=>{var e;null===(e=x.current)||void 0===e||e.validateFields().then((e=>{u(e)})).catch((()=>{}))},onCancel:()=>{u()},...y,children:(0,g.jsxs)(r.A,{ref:x,preserve:!1,initialValues:{selectedColumnKeys:null===(n=d().map(f,"value"))||void 0===n?void 0:n.filter((e=>!d().includes(v,e)))},layout:"vertical",children:[(0,g.jsx)(r.A.Item,{name:"searchInput",label:h("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,g.jsx)(o.A,{prefix:(0,g.jsx)(i.A,{}),style:{marginBottom:b.marginSM},placeholder:h("table.SearchTableColumn")})}),(0,g.jsx)(r.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>e.searchInput!==n.searchInput,children:e=>{let{getFieldValue:n}=e;const l=n("searchInput")?d().toLower(n("searchInput")):void 0,a=d().map(f,(e=>d().toLower(d().toString(e.label)).includes(l||"")?e:{...e,style:{display:"none"}}));return(0,g.jsx)(r.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},rules:[{required:!0,message:h("general.validation.PleaseSelectOptions")}],children:(0,g.jsx)(s.A.Group,{options:a,style:{flexDirection:"column"}})})}})]})})}},10936:(e,n,l)=>{l.d(n,{a:()=>i});var a=l(2212);const i=e=>{const[n,l]=(0,a.q)(`hiddenColumnKeys.${e}`);return[n,l]}},48450:(e,n,l)=>{l.r(n),l.d(n,{default:()=>Pe});const a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"filter"},n={defaultValue:null,kind:"LocalArgument",name:"limit"},l={defaultValue:null,kind:"LocalArgument",name:"offset"},a={defaultValue:null,kind:"LocalArgument",name:"order"},i={defaultValue:null,kind:"LocalArgument",name:"status"},t=[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"},{kind:"Variable",name:"order",variableName:"order"},{kind:"Variable",name:"status",variableName:"status"}],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"addr",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"compute_plugins",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"first_contact",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"lost_at",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"status_changed",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"cpu_cur_pct",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"mem_cur_bytes",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"available_slots",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"schedulable",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null};return{fragment:{argumentDefinitions:[e,n,l,a,i],kind:"Fragment",metadata:null,name:"AgentListQuery",selections:[{alias:null,args:t,concreteType:"AgentList",kind:"LinkedField",name:"agent_list",plural:!1,selections:[{alias:null,args:null,concreteType:"Agent",kind:"LinkedField",name:"items",plural:!0,selections:[r,o,s,u,d,c,m,g,p,v,y,x,h,b,f,k,_,{args:null,kind:"FragmentSpread",name:"AgentDetailModalFragment"},{args:null,kind:"FragmentSpread",name:"AgentSettingModalFragment"}],storageKey:null},A],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,l,e,i,a],kind:"Operation",name:"AgentListQuery",selections:[{alias:null,args:t,concreteType:"AgentList",kind:"LinkedField",name:"agent_list",plural:!1,selections:[{alias:null,args:null,concreteType:"Agent",kind:"LinkedField",name:"items",plural:!0,selections:[r,o,s,u,d,c,m,g,p,v,y,x,h,b,f,k,_],storageKey:null},A],storageKey:null}]},params:{cacheID:"e1a551c0261ce59a4b187a3bbb29b86b",id:null,metadata:{},name:"AgentListQuery",operationKind:"query",text:"query AgentListQuery(\n  $limit: Int!\n  $offset: Int!\n  $filter: String\n  $status: String\n  $order: String\n) {\n  agent_list(limit: $limit, offset: $offset, filter: $filter, status: $status, order: $order) {\n    items {\n      id\n      status\n      version\n      addr\n      architecture\n      region\n      compute_plugins\n      first_contact\n      lost_at\n      status_changed\n      live_stat\n      cpu_cur_pct\n      mem_cur_bytes\n      available_slots\n      occupied_slots\n      scaling_group\n      schedulable\n      ...AgentDetailModalFragment\n      ...AgentSettingModalFragment\n    }\n    total_count\n  }\n}\n\nfragment AgentDetailModalFragment on Agent {\n  id\n  live_stat\n  available_slots\n  occupied_slots\n  cpu_cur_pct\n  mem_cur_bytes\n}\n\nfragment AgentSettingModalFragment on Agent {\n  id\n  schedulable\n}\n"}}}();a.hash="1d6c6a390aad71e4b7815a623ca61d86";const i=a;var t=l(2156),r=l(19885),o=l(37615),s=l(61774),u=l(10936),d=l(77950);const c={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentDetailModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"available_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cpu_cur_pct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mem_cur_bytes",storageKey:null}],type:"Agent",abstractKey:null,hash:"cb343a0290034803cca4c2b82a1c1b68"},m=c;var g=l(39718),p=l(72190),v=l(88153),y=l(22252),x=l(35054),h=l(27480),b=l(63872),f=l(8348),k=l.n(f),_=l(66610),A=l(54070),S=l(89737),j=l(66906);const F=e=>{var n,l,a,i,r,s,u,d,c,f,_,F,O,G;let{agentDetailModalFrgmt:K=null,onRequestClose:T,...w}=e;const{t:D}=(0,A.Bd)(),{token:L}=v.A.useToken(),{mergedResourceSlots:M}=(0,o.Hv)(),I=(0,S.useFragment)(m,K),R=JSON.parse((null===I||void 0===I?void 0:I.live_stat)||"{}"),C=JSON.parse((null===I||void 0===I?void 0:I.available_slots)||"{}");return(0,j.jsx)(g.A,{...w,centered:!0,title:`${D("agent.DetailedInformation")}: ${null===I||void 0===I?void 0:I.id}`,onCancel:T,destroyOnClose:!0,footer:null,children:(0,j.jsxs)(b.OO,{direction:"column",align:"stretch",gap:"md",children:[(0,j.jsxs)(y.A,{gutter:[24,24],children:[(0,j.jsx)(x.A,{xs:24,sm:12,children:null!==R&&void 0!==R&&null!==(n=R.devices)&&void 0!==n&&n.cpu_util?(0,j.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"stretch",children:[(0,j.jsx)(h.A.Title,{level:5,style:{marginTop:0},children:null===M||void 0===M||null===(l=M.cpu)||void 0===l?void 0:l.human_readable_name}),k().map(null===R||void 0===R||null===(a=R.devices)||void 0===a?void 0:a.cpu_util,((e,n)=>{var l;return(0,j.jsxs)(b.OO,{justify:"between",children:[(0,j.jsxs)(h.A.Text,{type:"secondary",style:{flex:.5},children:[null===M||void 0===M||null===(l=M.cpu)||void 0===l?void 0:l.human_readable_name,n]},n),(0,j.jsx)(p.A,{percent:null===e||void 0===e?void 0:e.pct,valueLabel:(0,t.Z1)(null===e||void 0===e?void 0:e.pct,1)+"%"})]})}))]}):null}),(0,j.jsxs)(x.A,{xs:24,sm:12,children:[null!==C&&void 0!==C&&C.mem?(0,j.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"stretch",children:[(0,j.jsx)(h.A.Title,{level:5,style:{marginTop:0},children:null===M||void 0===M||null===(i=M.mem)||void 0===i?void 0:i.human_readable_name}),(0,j.jsx)(p.A,{percent:k().toNumber(null===(r=(0,t.mv)(k().toString(null===I||void 0===I?void 0:I.mem_cur_bytes),"g"))||void 0===r?void 0:r.number)/k().toNumber(null===(s=(0,t.mv)(null===C||void 0===C?void 0:C.mem,"g"))||void 0===s?void 0:s.number)*100||0,valueLabel:`${null===(u=(0,t.mv)(k().toString(null===I||void 0===I?void 0:I.mem_cur_bytes),"g"))||void 0===u?void 0:u.displayValue} / ${null===(d=(0,t.mv)(null===C||void 0===C?void 0:C.mem,"g"))||void 0===d?void 0:d.displayValue}`})]}):null,null!==R&&void 0!==R&&R.node?(0,j.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"start",children:[(0,j.jsx)(h.A.Title,{level:5,style:{marginTop:0},children:D("session.launcher.Network")}),(0,j.jsxs)(b.OO,{gap:"xl",children:[(0,j.jsx)(h.A.Text,{children:"TX:"}),(0,j.jsxs)(h.A.Text,{children:[null===(c=(0,t.Gh)(null===R||void 0===R||null===(f=R.node)||void 0===f||null===(_=f.net_tx)||void 0===_?void 0:_.current,"m",2))||void 0===c?void 0:c.displayValue,"B"]})]}),(0,j.jsxs)(b.OO,{gap:"xl",children:[(0,j.jsx)(h.A.Text,{children:"RX:"}),(0,j.jsxs)(h.A.Text,{children:[null===(F=(0,t.Gh)(null===R||void 0===R||null===(O=R.node)||void 0===O||null===(G=O.net_rx)||void 0===G?void 0:G.current,"m",2))||void 0===F?void 0:F.displayValue,"B"]})]})]}):null]})]}),(0,j.jsx)(y.A,{gutter:[24,24],style:{marginBottom:L.marginSM},children:k().map(k().keys(null===R||void 0===R?void 0:R.devices),(e=>{if(["cpu_util","mem","disk","net_rx","net_tx"].includes(e))return null;if(k().includes(e,"_util")){var n;const l=k().split(e,"_")[0]+".device";return(0,j.jsx)(x.A,{xs:24,sm:12,children:(0,j.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"stretch",children:[(0,j.jsxs)(h.A.Title,{level:5,style:{marginTop:0},children:[null===M||void 0===M||null===(n=M[l])||void 0===n?void 0:n.human_readable_name," ",D("session.Utilization")]}),k().map(k().toPairs(null===R||void 0===R?void 0:R.devices[e]),((e,n)=>{var a,i,r;return(0,j.jsxs)(b.OO,{justify:"between",children:[(0,j.jsxs)(h.A.Text,{type:"secondary",style:{flex:.5},children:[null===M||void 0===M||null===(a=M[l])||void 0===a?void 0:a.human_readable_name,n]},n),(0,j.jsx)(p.A,{percent:k().toFinite(null===e||void 0===e||null===(i=e[1])||void 0===i?void 0:i.pct),valueLabel:(0,t.Z1)(null===e||void 0===e||null===(r=e[1])||void 0===r?void 0:r.pct,1)+"%"})]})}))]})})}if(k().includes(e,"_mem")){var l;const n=k().split(e,"_")[0]+".device";return(0,j.jsx)(x.A,{xs:24,sm:12,children:(0,j.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"stretch",children:[(0,j.jsxs)(h.A.Title,{level:5,style:{marginTop:0},children:[null===M||void 0===M||null===(l=M[n])||void 0===l?void 0:l.human_readable_name," ",D("session.launcher.Memory")]}),k().map(k().toPairs(null===R||void 0===R?void 0:R.devices[e]),((e,l)=>{var a,i,r;return(0,j.jsxs)(b.OO,{justify:"between",children:[(0,j.jsxs)(h.A.Text,{type:"secondary",style:{flex:.5},children:[null===M||void 0===M||null===(a=M[n])||void 0===a?void 0:a.human_readable_name,l]},l),(0,j.jsx)(p.A,{percent:k().toFinite(null===e||void 0===e||null===(i=e[1])||void 0===i?void 0:i.pct),valueLabel:(0,t.Z1)(null===e||void 0===e||null===(r=e[1])||void 0===r?void 0:r.pct,1)+"%"})]})}))]})})}}))})]})})},O=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyAgent",kind:"LinkedField",name:"modify_agent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"AgentSettingModalMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"AgentSettingModalMutation",selections:n},params:{cacheID:"1a9e43d4bc6e78f3949d1a2a397ff00e",id:null,metadata:{},name:"AgentSettingModalMutation",operationKind:"mutation",text:"mutation AgentSettingModalMutation(\n  $id: String!\n  $props: ModifyAgentInput!\n) {\n  modify_agent(id: $id, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();O.hash="13b2a6a91c7f08bbced5fde155ded60e";const G=O,K={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentSettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"schedulable",storageKey:null}],type:"Agent",abstractKey:null,hash:"303f8ee06508c3b28511ab1a24a305d5"},T=K;var w=l(39452),D=l(8804),L=l(75766);const M=e=>{let{agentSettingModalFrgmt:n=null,onRequestClose:l,...a}=e;const{t:i}=(0,A.Bd)(),{message:t}=w.A.useApp(),r=(0,_.useRef)(null),o=(0,S.useFragment)(T,n),[s,u]=(0,S.useMutation)(G);return(0,j.jsx)(g.A,{...a,title:`${i("agent.AgentSetting")}: ${null===o||void 0===o?void 0:o.id}`,onCancel:()=>l(),destroyOnClose:!0,width:300,confirmLoading:u,onOk:()=>{var e;null===(e=r.current)||void 0===e||e.validateFields().then((e=>{s({variables:{id:(null===o||void 0===o?void 0:o.id)||"",props:{schedulable:e.schedulable}},onCompleted(e,n){var a,r;null===e||void 0===e||null===(a=e.modify_agent)||void 0===a||!a.ok||n?(t.error(null===e||void 0===e||null===(r=e.modify_agent)||void 0===r?void 0:r.msg),l()):(t.success(i("agent.AgentSettingUpdated")),l(!0))},onError(e){t.error(null===e||void 0===e?void 0:e.message)}})})).catch((()=>{}))},children:(0,j.jsx)(D.A,{ref:r,preserve:!1,initialValues:{...o},children:(0,j.jsx)(D.A.Item,{name:"schedulable",label:i("agent.Schedulable"),valuePropName:"checked",children:(0,j.jsx)(L.A,{})})})})};var I=l(49135),R=l(24390),C=l(95593),N=l(54802),V=l(8810),$=l(67641),z=l(95676),q=l(44276),P=l(3420),E=l(67653),Q=l(33865),B=l(89644),U=l(80770),Z=l(84395),J=l(60042),W=l(4994),X=l.n(W);const H=e=>{let{tableProps:n}=e;const{t:l}=(0,A.Bd)(),{token:a}=v.A.useToken(),{isDarkMode:c}=(0,d.e)(),{mergedResourceSlots:m}=(0,o.Hv)(),[g,y]=(0,_.useState)(),[x,f]=(0,_.useState)(),[O,{toggle:G}]=(0,B.A)(),K=(0,r.CX)(),[T,w]=(0,_.useTransition)(),[D,L]=(0,_.useTransition)(),[W,H]=(0,_.useTransition)(),[Y,ee]=(0,_.useState)("ALIVE"),[ne,le]=(0,_.useState)(Y),[ae,ie]=(0,_.useTransition)(),[te,re]=(0,_.useState)(),{baiPaginationOption:oe,tablePaginationOption:se,setTablePaginationOption:ue}=(0,s.w4)({current:1,pageSize:10}),[de,ce]=(0,_.useState)(),[me,ge]=(0,r.Tw)("first"),pe=()=>L((()=>{ge()})),{agent_list:ve}=(0,S.useLazyLoadQuery)(i,{limit:oe.limit,offset:oe.offset,filter:te,order:de,status:Y},{fetchKey:me,fetchPolicy:"first"===me?"store-and-network":"network-only"}),ye=[{title:(0,j.jsxs)(j.Fragment,{children:["ID / ",l("agent.Endpoint")]}),key:"id",dataIndex:"id",fixed:"left",render:(e,n)=>(0,j.jsxs)(b.OO,{direction:"column",align:"start",children:[(0,j.jsx)(h.A.Text,{children:e}),(0,j.jsx)(h.A.Text,{type:"secondary",children:null===n||void 0===n?void 0:n.addr})]}),sorter:!0},{title:l("agent.Region"),key:"region",dataIndex:"region",render:e=>{const n=k().split(e,"/"),l=null===n||void 0===n?void 0:n[0],a=(null===n||void 0===n?void 0:n.length)>1?n[1]:"",{color:i,icon:t}={aws:{color:"orange",icon:"aws"},amazon:{color:"orange",icon:"aws"},azure:{color:"blue",icon:"azure"},gcp:{color:"lightblue",icon:"gcp"},google:{color:"lightblue",icon:"gcp"},nbp:{color:"green",icon:"nbp"},naver:{color:"green",icon:"nbp"},openstack:{color:"red",icon:"openstack"},dgx:{color:"green",icon:"local"},local:{color:"yellow",icon:"local"}}[l]||{color:"yellow",icon:"local"};return(0,j.jsxs)(b.OO,{gap:"xxs",children:[(0,j.jsx)("img",{alt:e,src:`/resources/icons/${t}.png`,style:{width:"32px",height:"32px",filter:c&&"local"===t?"invert(1)":""}}),""!==a?(0,j.jsx)(N.A,{values:[{label:a,color:i},{label:l,color:i}]}):(0,j.jsx)(U.A,{color:i,children:l})]})}},{title:l("agent.Architecture"),key:"architecture",dataIndex:"architecture"},{title:l("agent.Starts"),key:"first_contact",dataIndex:"first_contact",render:e=>(0,j.jsxs)(b.OO,{direction:"column",children:[(0,j.jsx)(h.A.Text,{children:X()(e).format("ll LTS")}),(0,j.jsx)(I.A,{callback:()=>K.utils.elapsedTime(e,Date.now()),delay:1e3,render:e=>(0,j.jsx)(N.A,{values:[{label:l("agent.Running")},{label:e}]})})]}),sorter:!0},{title:l("agent.Allocation"),key:"allocation",render:(e,n)=>{const l=JSON.parse((null===n||void 0===n?void 0:n.occupied_slots)||"{}"),i=JSON.parse((null===n||void 0===n?void 0:n.available_slots)||"{}");return(0,j.jsx)(b.OO,{direction:"column",gap:"xxs",children:k().map(i,((e,n)=>{if("cpu"===n){var r;const e=k().toFinite(k().toNumber(l.cpu)/k().toNumber(i.cpu)*100);return(0,j.jsxs)(b.OO,{justify:"between",style:{minWidth:220},children:[(0,j.jsxs)(b.OO,{gap:"xxs",children:[(0,j.jsx)(V.s,{type:n},n),(0,j.jsxs)(h.A.Text,{children:[(0,t.Z1)(l.cpu||0,0),"\xa0/\xa0",(0,t.Z1)(i.cpu||0,0)]}),(0,j.jsx)(h.A.Text,{type:"secondary",style:{fontSize:a.sizeXS},children:null===m||void 0===m||null===(r=m.cpu)||void 0===r?void 0:r.display_unit})]}),(0,j.jsx)(p.A,{percent:e,strokeColor:e>80?a.colorError:a.colorSuccess,width:120,valueLabel:(0,t.Z1)(e,1)+" %"})]},n)}if("mem"===n){var o,s,u,d;const e=k().toFinite(k().toNumber(l.mem)/k().toNumber(i.mem)*100);return(0,j.jsxs)(b.OO,{justify:"between",style:{minWidth:220},children:[(0,j.jsxs)(b.OO,{gap:"xxs",children:[(0,j.jsx)(V.s,{type:"mem"}),(0,j.jsxs)(h.A.Text,{children:[null!==(o=null===(s=(0,t.mv)(l.mem,"g",0))||void 0===s?void 0:s.numberFixed)&&void 0!==o?o:0,"\xa0/\xa0",null!==(u=null===(d=(0,t.mv)(i.mem,"g",0))||void 0===d?void 0:d.numberFixed)&&void 0!==u?u:0]}),(0,j.jsx)(h.A.Text,{type:"secondary",style:{fontSize:a.sizeXS},children:"GiB"})]}),(0,j.jsx)(p.A,{percent:e,strokeColor:e>80?a.colorError:a.colorSuccess,width:120,valueLabel:(0,t.Z1)(e,1)+" %"})]},"mem")}if(i[n]){var c;const e=k().toFinite(k().toNumber(l[n])/k().toNumber(i[n])*100);return(0,j.jsxs)(b.OO,{justify:"between",style:{minWidth:220},gap:"xxs",children:[(0,j.jsxs)(b.OO,{gap:"xxs",children:[(0,j.jsx)(V.s,{type:n},n),(0,j.jsxs)(h.A.Text,{children:[(0,t.Z1)(l[n]||0,2),"\xa0/\xa0",(0,t.Z1)(i[n],2)]}),(0,j.jsx)(h.A.Text,{type:"secondary",style:{fontSize:a.sizeXS},children:null===m||void 0===m||null===(c=m[n])||void 0===c?void 0:c.display_unit})]}),(0,j.jsx)(p.A,{percent:e,strokeColor:e>80?a.colorError:a.colorSuccess,width:120,valueLabel:(0,t.Z1)(e,1)+" %"})]},n)}}))})}},{title:l("agent.Utilization"),key:"live_stat",dataIndex:"live_stat",render:(e,n)=>{const a=JSON.parse(e||"{}"),i=JSON.parse((null===n||void 0===n?void 0:n.available_slots)||"{}");if("ALIVE"===(null===n||void 0===n?void 0:n.status)){var r,o,s,u,d;const e={cpu_util:{capacity:0,current:0,ratio:0},mem_util:{capacity:0,current:0,ratio:0}};if(a&&a.node&&a.devices){const n=k().keys(a.devices.cpu_util).length;e.cpu_util.capacity=k().toFinite(a.node.cpu_util.capacity),e.cpu_util.current=k().toFinite(a.node.cpu_util.current),e.cpu_util.ratio=e.cpu_util.current/e.cpu_util.capacity/n||0,e.mem_util.capacity=k().toInteger(i.mem||a.node.mem.capacity),e.mem_util.current=k().toInteger(a.node.mem.current),e.mem_util.ratio=e.mem_util.current/e.mem_util.capacity||0}k().forEach(k().keys(null===a||void 0===a?void 0:a.node),(n=>{["cpu_util","mem","disk","net_rx","net_tx"].includes(n)||(k().includes(n,"_util")?e[n]={capacity:"cuda_util"===n?k().toFinite(a.node[n]["stats.max"]):k().toFinite(a.node[n].capacity),current:k().toFinite(a.node[n].current),ratio:k().toFinite(a.node[n].current)/100||0}:n.includes("_mem")&&(e[n]={capacity:k().toFinite(a.node[n].capacity),current:k().toFinite(a.node[n].current),ratio:k().toFinite(a.node[n].pct)/100||0}))}));const n=(null===(r=(0,t.Ho)(k().toString(e.mem_util.capacity),"auto"))||void 0===r?void 0:r.unit)||"g";return(0,j.jsxs)(b.OO,{direction:"column",gap:"xxs",children:[(0,j.jsxs)(b.OO,{justify:"between",style:{minWidth:200},children:[(0,j.jsx)(h.A.Text,{children:null===m||void 0===m||null===(o=m.cpu)||void 0===o?void 0:o.human_readable_name}),(0,j.jsx)(p.A,{percent:100*e.cpu_util.ratio,width:120,valueLabel:(0,t.Z1)(k().toFinite(100*e.cpu_util.ratio),1)+" %"})]}),(0,j.jsxs)(b.OO,{justify:"between",style:{minWidth:200},children:[(0,j.jsx)(h.A.Text,{children:null===m||void 0===m||null===(s=m.mem)||void 0===s?void 0:s.human_readable_name}),(0,j.jsx)(p.A,{percent:100*e.mem_util.ratio,width:120,valueLabel:(null===(u=(0,t.mv)(k().toString(e.mem_util.current),n))||void 0===u?void 0:u.numberFixed)+" / "+(null===(d=(0,t.mv)(k().toString(e.mem_util.capacity),n))||void 0===d?void 0:d.displayValue)})]}),k().map(k().keys(null===a||void 0===a?void 0:a.node),(n=>{if(!["cpu_util","mem"].includes(n)){if(k().includes(n,"_util")){var l;const a=k().split(n,"_")[0]+".device";return(0,j.jsxs)(b.OO,{justify:"between",style:{minWidth:200,width:"min-content"},gap:"xxs",children:[(0,j.jsxs)(h.A.Text,{children:[null===m||void 0===m||null===(l=m[a])||void 0===l?void 0:l.human_readable_name,"(util)"]}),(0,j.jsx)(p.A,{width:120,percent:e[n].current/e[n].capacity*100||0,valueLabel:k().toFinite((0,t.Z1)(100*e[n].ratio,1))+" %"})]},n)}if(k().includes(n,"_mem")){var a,i,r,o;const l=k().split(n,"_")[0]+".device",s=(null===(a=(0,t.Ho)(k().toString(e[n].capacity),"auto"))||void 0===a?void 0:a.unit)||"g";return(0,j.jsxs)(b.OO,{justify:"between",style:{minWidth:200,width:"min-content"},gap:"xxs",children:[(0,j.jsxs)(h.A.Text,{children:[null===m||void 0===m||null===(i=m[l])||void 0===i?void 0:i.human_readable_name,"(mem)"]}),(0,j.jsx)(p.A,{width:120,percent:e[n].current/e[n].capacity*100||0,valueLabel:(null===(r=(0,t.mv)(k().toString(e[n].current),s))||void 0===r?void 0:r.numberFixed)+" / "+(null===(o=(0,t.mv)(k().toString(e[n].capacity),s))||void 0===o?void 0:o.displayValue)})]},n)}}}))]})}return l("agent.NoAvailableLiveStat")}},{title:l("agent.DiskPerc"),key:"disk_perc",render:(e,n)=>{var l,i,r,o,s,u;const d=null!==(l=null===(i=JSON.parse((null===n||void 0===n?void 0:n.live_stat)||"{}"))||void 0===i||null===(r=i.node)||void 0===r?void 0:r.disk)&&void 0!==l?l:{},c=k().toFinite(d.pct)||0,m=k().toFinite((0,t.Z1)(c,2)),g=m>80?a.colorError:a.colorSuccess,v=(null===(o=(0,t.Ho)(null===d||void 0===d?void 0:d.capacity,"auto",{base:1e3}))||void 0===o?void 0:o.unit)||"g";return(0,j.jsxs)(b.OO,{direction:"column",children:[(0,j.jsx)(p.A,{valueLabel:(0,t.Z1)(m,1)+" %",percent:m,strokeColor:g,width:120}),(0,j.jsxs)(h.A.Text,{style:{fontSize:a.fontSizeSM},children:[null===(s=(0,t.Gh)(null===d||void 0===d?void 0:d.current,v))||void 0===s?void 0:s.numberFixed,"\xa0/\xa0",null===(u=(0,t.Gh)(null===d||void 0===d?void 0:d.capacity,v))||void 0===u?void 0:u.displayValue]})]})}},{title:l("general.ResourceGroup"),key:"resource_group",dataIndex:"scaling_group",sorter:!0},{title:l("agent.Status"),key:"status",dataIndex:"status",render:(e,n)=>{var l,a,i;const t=JSON.parse((null===n||void 0===n?void 0:n.compute_plugins)||"{}"),r=JSON.parse((null===n||void 0===n?void 0:n.available_slots)||"{}");return(0,j.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"start",children:[(0,j.jsx)(N.A,{values:[{label:"Agent"},{label:(null===n||void 0===n?void 0:n.version)||"",color:"ALIVE"===e?"green":"TERMINATED"===e?"red":"blue"}]}),null!==t&&void 0!==t&&t.cuda?(0,j.jsxs)(j.Fragment,{children:[null!==t&&void 0!==t&&null!==(l=t.cuda)&&void 0!==l&&l.cuda_version?(0,j.jsx)(N.A,{values:[{label:"CUDA"},{label:null===t||void 0===t||null===(a=t.cuda)||void 0===a?void 0:a.cuda_version,color:"green"}]}):(0,j.jsx)(U.A,{color:"green",children:"CUDA Disabled"}),(0,j.jsx)(N.A,{values:[{label:"CUDA Plugin"},{label:null===t||void 0===t||null===(i=t.cuda)||void 0===i?void 0:i.version,color:"blue"}]}),k().includes(k().keys(r),"cuda.shares")?(0,j.jsx)(U.A,{color:"blue",children:"Fractional GPU\u2122"}):null]}):null]})}},{title:l("agent.Schedulable"),key:"schedulable",dataIndex:"schedulable",render:e=>(0,j.jsx)(b.OO,{justify:"center",children:!0===e?(0,j.jsx)(z.A,{style:{color:a.colorSuccess,fontSize:a.fontSizeXL}}):(0,j.jsx)(q.A,{style:{color:a.colorTextDisabled,fontSize:a.fontSizeXL}})}),sorter:!0},{title:l("general.Control"),key:"control",fixed:"right",render:(e,n)=>(0,j.jsxs)(b.OO,{children:[(0,j.jsx)(Z.Ay,{style:{color:a.colorSuccess},type:"text",icon:(0,j.jsx)(P.A,{}),onClick:()=>y(n)}),(0,j.jsx)(Z.Ay,{style:{color:a.colorInfo},type:"text",icon:(0,j.jsx)(E.A,{}),onClick:()=>f(n)})]})}],[xe,he]=(0,u.a)("AgentList");return(0,j.jsxs)(b.OO,{direction:"column",align:"stretch",gap:"sm",children:[(0,j.jsxs)(b.OO,{justify:"between",align:"start",wrap:"wrap",children:[(0,j.jsxs)(b.OO,{direction:"row",gap:"sm",align:"start",style:{flex:1},wrap:"wrap",children:[(0,j.jsx)(C.A,{options:[{label:l("agent.Connected"),value:"ALIVE"},{label:l("agent.Terminated"),value:"TERMINATED"}],value:T?ne:Y,onChange:e=>{const n=e.target.value;le(n),w((()=>{ee(n)}))}}),(0,j.jsx)(R.Ay,{filterProperties:[{key:"id",propertyLabel:"ID",type:"string"},{key:"addr",propertyLabel:l("agent.Endpoint"),type:"string"},{key:"schedulable",propertyLabel:l("agent.Schedulable"),type:"boolean",options:[{label:l("general.Enabled"),value:"true"},{label:l("general.Disabled"),value:"false"}]}],value:te,onChange:e=>{ie((()=>{re(e)}))}})]}),(0,j.jsx)(b.OO,{gap:"xs",children:(0,j.jsx)(J.A,{title:l("button.Refresh"),children:(0,j.jsx)(Z.Ay,{loading:D,onClick:()=>pe(),icon:(0,j.jsx)(Q.A,{})})})})]}),(0,j.jsx)(b.zx,{size:"small",scroll:{x:"max-content"},rowKey:"id",dataSource:(0,t.f)(null===ve||void 0===ve?void 0:ve.items),showSorterTooltip:!1,columns:k().filter(ye,(e=>!k().includes(xe,k().toString(null===e||void 0===e?void 0:e.key)))),pagination:{pageSize:se.pageSize,total:null===ve||void 0===ve?void 0:ve.total_count,current:se.current,extraContent:(0,j.jsx)(Z.Ay,{type:"text",icon:(0,j.jsx)(E.A,{}),onClick:()=>{G()}}),onChange(e,n){H((()=>{k().isNumber(e)&&k().isNumber(n)&&ue({current:e,pageSize:n})}))}},onChangeOrder:e=>{H((()=>{ce(e)}))},loading:W||T||ae,...n}),(0,j.jsx)(F,{agentDetailModalFrgmt:g,open:!!g,onRequestClose:()=>y(null)}),(0,j.jsx)(M,{agentSettingModalFrgmt:x,open:!!x,onRequestClose:e=>{e&&pe(),f(null)}}),(0,j.jsx)($.A,{open:O,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&he(k().difference(ye.map((e=>k().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),G()},columns:ye,hiddenColumnKeys:xe})]})},Y=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteScalingGroup",kind:"LinkedField",name:"delete_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupListDeleteMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupListDeleteMutation",selections:n},params:{cacheID:"fdcd5026b9668171b8d52998b2c16c6d",id:null,metadata:{},name:"ResourceGroupListDeleteMutation",operationKind:"mutation",text:"mutation ResourceGroupListDeleteMutation(\n  $name: String!\n) {\n  delete_scaling_group(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();Y.hash="40de35d5afd64c8d906e4970b10b722d";const ee=Y,ne=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},n={defaultValue:null,kind:"LocalArgument",name:"name"},l=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"ModifyScalingGroup",kind:"LinkedField",name:"modify_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ResourceGroupListUpdateMutation",selections:l,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ResourceGroupListUpdateMutation",selections:l},params:{cacheID:"f2bb803220bb606aab5576ae85eed3c3",id:null,metadata:{},name:"ResourceGroupListUpdateMutation",operationKind:"mutation",text:"mutation ResourceGroupListUpdateMutation(\n  $name: String!\n  $input: ModifyScalingGroupInput!\n) {\n  modify_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();ne.hash="ac249dff8b2c9b629edb2ca40843c134";const le=ne,ae=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"is_active"}],n=[{kind:"Variable",name:"is_active",variableName:"is_active"}],l={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"driver",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupListQuery",selections:[{alias:null,args:n,concreteType:"ScalingGroup",kind:"LinkedField",name:"scaling_groups",plural:!0,selections:[l,a,i,t,r,o,s,{args:null,kind:"FragmentSpread",name:"ResourceGroupInfoModalFragment"},{args:null,kind:"FragmentSpread",name:"ResourceGroupSettingModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupListQuery",selections:[{alias:null,args:n,concreteType:"ScalingGroup",kind:"LinkedField",name:"scaling_groups",plural:!0,selections:[l,a,i,t,r,o,s,{alias:null,args:null,kind:"ScalarField",name:"driver_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null}],storageKey:null}]},params:{cacheID:"a388cfe6011c626e8a46a241d373f0cf",id:null,metadata:{},name:"ResourceGroupListQuery",operationKind:"query",text:"query ResourceGroupListQuery(\n  $is_active: Boolean\n) {\n  scaling_groups(is_active: $is_active) {\n    name\n    description\n    is_active\n    is_public\n    driver\n    scheduler\n    wsproxy_addr\n    ...ResourceGroupInfoModalFragment\n    ...ResourceGroupSettingModalFragment\n  }\n}\n\nfragment ResourceGroupInfoModalFragment on ScalingGroup {\n  name\n  description\n  is_active\n  is_public\n  driver\n  driver_opts\n  scheduler\n  scheduler_opts\n  wsproxy_addr\n}\n\nfragment ResourceGroupSettingModalFragment on ScalingGroup {\n  name\n  description\n  is_active\n  is_public\n  wsproxy_addr\n  scheduler\n  scheduler_opts\n}\n"}}}();ae.hash="73ad50968ae420ea2cd912e9fa046cf8";const ie=ae;var te=l(21998),re=l(84970);const oe={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ResourceGroupInfoModalFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"driver",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"driver_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null}],type:"ScalingGroup",abstractKey:null,hash:"32b9c1a86a13b37cf5abb7e88f1cd969"},se=oe;var ue=l(68049),de=l(2264),ce=l(32677);const me=e=>{var n,l;let{resourceGroupFrgmt:a=null,onRequestClose:i,...t}=e;const{t:r}=(0,A.Bd)(),{token:o}=v.A.useToken(),s=(0,S.useFragment)(se,a),u=(0,_.useMemo)((()=>JSON.parse((null===s||void 0===s?void 0:s.driver_opts)||"{}")),[null===s||void 0===s?void 0:s.driver_opts]),d=(0,_.useMemo)((()=>JSON.parse((null===s||void 0===s?void 0:s.scheduler_opts)||"{}")),[null===s||void 0===s?void 0:s.scheduler_opts]);return(0,j.jsxs)(g.A,{title:r("resourceGroup.ResourceGroupDetail"),onCancel:i,footer:null,centered:!0,...t,children:[(0,j.jsxs)(ce.A,{column:1,size:"small",title:r("resourceGroup.Information"),labelStyle:{width:"50%"},children:[(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.Name"),children:null===s||void 0===s?void 0:s.name}),(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.Description"),children:(null===s||void 0===s?void 0:s.description)||"-"}),(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.Active"),children:null!==s&&void 0!==s&&s.is_active?(0,j.jsx)(ue.A,{style:{color:o.colorSuccess}}):(0,j.jsx)(de.A,{style:{color:o.colorTextSecondary}})}),(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.Public"),children:null!==s&&void 0!==s&&s.is_public?(0,j.jsx)(ue.A,{style:{color:o.colorSuccess}}):(0,j.jsx)(de.A,{style:{color:o.colorTextSecondary}})}),(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.Driver"),children:null===s||void 0===s?void 0:s.driver}),(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.Scheduler"),children:k().toUpper(null!==(n=null===s||void 0===s?void 0:s.scheduler)&&void 0!==n?n:"")}),(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.WsproxyAddress"),children:(null===s||void 0===s?void 0:s.wsproxy_addr)||"-"})]}),(0,j.jsx)("br",{}),(0,j.jsxs)(ce.A,{column:1,size:"small",title:r("resourceGroup.SchedulerOptions"),labelStyle:{width:"50%"},children:[(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.AllowedSessionTypes"),children:(0,j.jsx)(b.OO,{wrap:"wrap",direction:"row",gap:"xs",style:{width:"100%"},children:k().map(null===d||void 0===d?void 0:d.allowed_session_types,(e=>(0,j.jsx)(U.A,{style:{margin:0},children:k().startCase(e)},e)))})}),(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.PendingTimeout"),children:k().isNil(null===d||void 0===d?void 0:d.pending_timeout)?"-":(0,j.jsxs)(b.OO,{gap:"xxs",align:"end",children:[(0,j.jsx)(h.A.Text,{children:`${d.pending_timeout}\n                ${r("resourceGroup.TimeoutSeconds")}`}),null!==d&&void 0!==d&&d.pending_timeout?null:(0,j.jsx)(h.A.Text,{style:{color:o.colorTextSecondary,fontSize:o.fontSizeSM},children:`(${r("general.Disabled")})`})]})}),(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.RetriesToSkipDesc"),children:null!==d&&void 0!==d&&null!==(l=d.config)&&void 0!==l&&l.num_retries_to_skip?`${d.config.num_retries_to_skip} ${r("resourceGroup.RetriesToSkip")}`:"-"})]}),k().isEmpty(u)?null:(0,j.jsx)(ce.A,{column:1,size:"small",title:r("resourceGroup.DriverOptions"),labelStyle:{width:"50%"},children:k().map(u,((e,n)=>(0,j.jsx)(ce.A.Item,{label:k().startCase(n),children:k().isArray(e)?(0,j.jsx)(b.OO,{direction:"column",children:k().map(e,(e=>(0,j.jsx)(U.A,{children:e},e)))}):e},n)))})]})},ge=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"domain"},{defaultValue:null,kind:"LocalArgument",name:"scaling_group"}],n=[{alias:null,args:[{kind:"Variable",name:"domain",variableName:"domain"},{kind:"Variable",name:"scaling_group",variableName:"scaling_group"}],concreteType:"AssociateScalingGroupWithDomain",kind:"LinkedField",name:"associate_scaling_group_with_domain",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalAssociateDomainMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupSettingModalAssociateDomainMutation",selections:n},params:{cacheID:"72535173512804feacec89a7cabb4ac3",id:null,metadata:{},name:"ResourceGroupSettingModalAssociateDomainMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalAssociateDomainMutation(\n  $domain: String!\n  $scaling_group: String!\n) {\n  associate_scaling_group_with_domain(domain: $domain, scaling_group: $scaling_group) {\n    ok\n    msg\n  }\n}\n"}}}();ge.hash="a1253f2e15bdfc1e59cdf2b26bc0a273";const pe=ge,ve=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},n={defaultValue:null,kind:"LocalArgument",name:"name"},l=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"CreateScalingGroup",kind:"LinkedField",name:"create_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalCreateMutation",selections:l,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ResourceGroupSettingModalCreateMutation",selections:l},params:{cacheID:"6d6716d2dedf664e623006a2315b3c66",id:null,metadata:{},name:"ResourceGroupSettingModalCreateMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalCreateMutation(\n  $name: String!\n  $input: CreateScalingGroupInput!\n) {\n  create_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();ve.hash="8642e40e794eaf1f4b0a84e05104d75c";const ye=ve,xe=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},n={defaultValue:null,kind:"LocalArgument",name:"name"},l=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"ModifyScalingGroup",kind:"LinkedField",name:"modify_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalUpdateMutation",selections:l,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ResourceGroupSettingModalUpdateMutation",selections:l},params:{cacheID:"2352dc03b1acef2df9cf7c5f686665a3",id:null,metadata:{},name:"ResourceGroupSettingModalUpdateMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalUpdateMutation(\n  $name: String!\n  $input: ModifyScalingGroupInput!\n) {\n  modify_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();xe.hash="510c22b428b17c9e16efd58a5f908c3d";const he=xe,be={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null}],type:"ScalingGroup",abstractKey:null,hash:"738d94e03577df0f1298c085d29dcb12"},fe=be;var ke=l(23370),_e=l(46936),Ae=l(9034),Se=l(22065),je=l(89798),Fe=l(4107);const Oe=e=>{var n,l,a,i,o,s;let{resourceGroupFrgmt:u,onRequestClose:d,...c}=e;const{t:m}=(0,A.Bd)(),{token:p}=v.A.useToken(),{message:h}=w.A.useApp(),f=(0,r.eZ)(),F=(0,_.useRef)(null),O=(0,S.useFragment)(fe,u),[G,K]=(0,S.useMutation)(he),[T,M]=(0,S.useMutation)(ye),[I,R]=(0,S.useMutation)(pe),C=(0,_.useMemo)((()=>JSON.parse((null===O||void 0===O?void 0:O.scheduler_opts)||"{}")),[null===O||void 0===O?void 0:O.scheduler_opts]),N=(0,t.N7)({name:null===O||void 0===O?void 0:O.name,description:null===O||void 0===O?void 0:O.description,domain:f,scheduler:null!==(n=null===O||void 0===O?void 0:O.scheduler)&&void 0!==n?n:"fifo",allowedSessionTypes:null!==(l=null===C||void 0===C?void 0:C.allowed_session_types)&&void 0!==l?l:["batch","interactive"],active:null===(a=null===O||void 0===O?void 0:O.is_active)||void 0===a||a,public:null===(i=null===O||void 0===O?void 0:O.is_public)||void 0===i||i,pendingTimeout:null!==C&&void 0!==C&&C.pending_timeout?k().toNumber(null===C||void 0===C?void 0:C.pending_timeout):null,retriesToSkip:null!==C&&void 0!==C&&null!==(o=C.config)&&void 0!==o&&o.num_retries_to_skip?k().toNumber(null===C||void 0===C||null===(s=C.config)||void 0===s?void 0:s.num_retries_to_skip):null,wsProxyAddress:null===O||void 0===O?void 0:O.wsproxy_addr});return(0,j.jsx)(g.A,{destroyOnClose:!0,title:m(O?"resourceGroup.ModifyResourceGroup":"resourceGroup.CreateResourceGroup"),onCancel:()=>{null===d||void 0===d||d(!1)},okText:m(O?"button.Update":"button.Create"),okButtonProps:{loading:M||R||K},onOk:()=>{var e;null===(e=F.current)||void 0===e||e.validateFields().then((e=>{var n;const l={driver:"static",scheduler:e.scheduler,description:null!==(n=e.description)&&void 0!==n?n:null,driver_opts:"{}",scheduler_opts:JSON.stringify({allowed_session_types:e.allowedSessionTypes,...e.pendingTimeout&&{pending_timeout:e.pendingTimeout},...e.retriesToSkip&&{config:{num_retries_to_skip:e.retriesToSkip}}}),is_public:e.public,is_active:e.active,wsproxy_addr:e.wsProxyAddress};O?G({variables:{name:O.name,input:l},onCompleted:(e,n)=>{let{modify_scaling_group:l}=e;if(null!==l&&void 0!==l&&l.ok)if(n&&n.length>0){const e=k().map(n,(e=>e.message));for(const n of e)h.error(n)}else h.success(m("resourceGroup.ResourceGroupModified")),null===d||void 0===d||d(!0);else h.error(null===l||void 0===l?void 0:l.msg)},onError:e=>{h.error(e.message)}}):T({variables:{name:e.name,input:l},onCompleted:(n,l)=>{let{create_scaling_group:a}=n;if(l&&l.length>0){const e=k().map(l,(e=>e.message));for(const n of e)h.error(n)}else null!==a&&void 0!==a&&a.ok?I({variables:{domain:e.domain,scaling_group:e.name},onCompleted:(e,n)=>{let{associate_scaling_group_with_domain:l}=e;if(null!==l&&void 0!==l&&l.ok)if(n&&n.length>0){const e=k().map(n,(e=>e.message));for(const n of e)h.error(n)}else h.success(m("resourceGroup.ResourceGroupCreated")),null===d||void 0===d||d(!0);else h.error(null===l||void 0===l?void 0:l.msg)},onError:e=>{h.error(e.message)}}):h.error(null===a||void 0===a?void 0:a.msg)},onError:e=>{h.error(e.message)}})})).catch((()=>{}))},...c,children:(0,j.jsx)(_.Suspense,{fallback:(0,j.jsx)(Ae.A,{active:!0}),children:(0,j.jsxs)(D.A,{ref:F,initialValues:N,layout:"vertical",children:[(0,j.jsx)(D.A.Item,{label:m("resourceGroup.Name"),name:"name",rules:[{required:!0,message:m("general.ValueRequired",{name:m("resourceGroup.Name")})}],children:(0,j.jsx)(Se.A,{disabled:!!O})}),O?null:(0,j.jsx)(D.A.Item,{label:m("resourceGroup.Domain"),name:"domain",rules:[{required:!0,message:m("general.ValueRequired",{name:m("resourceGroup.Domain")})}],children:(0,j.jsx)(ke.A,{})}),(0,j.jsx)(D.A.Item,{label:m("resourceGroup.Description"),name:"description",children:(0,j.jsx)(Se.A.TextArea,{})}),(0,j.jsx)(D.A.Item,{label:m("resourceGroup.AllowedSessionTypes"),name:"allowedSessionTypes",rules:[{required:!0,message:m("general.ValueRequired",{name:m("resourceGroup.AllowedSessionTypes")})}],children:(0,j.jsx)(je.A,{mode:"multiple",options:[{label:"Batch",value:"batch"},{label:"Interactive",value:"interactive"},{label:"Inference",value:"inference"}]})}),(0,j.jsx)(D.A.Item,{label:m("resourceGroup.WsproxyAddress"),name:"wsProxyAddress",rules:[{type:"url",message:m("error.InvalidUrl")}],children:(0,j.jsx)(Se.A,{placeholder:"http://localhost:10200"})}),(0,j.jsxs)(y.A,{children:[(0,j.jsx)(x.A,{span:12,children:(0,j.jsx)(D.A.Item,{layout:"horizontal",label:m("resourceGroup.Active"),name:"active",children:(0,j.jsx)(L.A,{})})}),(0,j.jsx)(x.A,{span:12,children:(0,j.jsx)(D.A.Item,{layout:"horizontal",label:m("resourceGroup.Public"),name:"public",children:(0,j.jsx)(L.A,{})})})]}),(0,j.jsx)(D.A.Item,{label:m("resourceGroup.Scheduler"),name:"scheduler",rules:[{required:!0,message:m("general.ValueRequired",{name:m("resourceGroup.Scheduler")})}],children:(0,j.jsx)(je.A,{options:[{label:"FIFO",value:"fifo"},{label:"LIFO",value:"lifo"},{label:"DRF",value:"drf"}]})}),(0,j.jsx)(D.A.Item,{label:m("resourceGroup.SchedulerOptions"),children:(0,j.jsx)(b.Zu,{styles:{body:{paddingBottom:0}},children:(0,j.jsxs)(y.A,{gutter:[24,24],children:[(0,j.jsx)(x.A,{span:12,style:{alignSelf:"end"},children:(0,j.jsx)(D.A.Item,{labelCol:{span:24},label:(0,j.jsxs)(b.OO,{gap:"xxs",children:[m("resourceGroup.PendingTimeout"),(0,j.jsx)(J.A,{title:(0,t.y1)(m("resourceGroup.PendingTimeoutDesc")),children:(0,j.jsx)(_e.A,{style:{color:p.colorTextSecondary}})})]}),name:"pendingTimeout",children:(0,j.jsx)(Fe.A,{style:{width:"100%"},addonAfter:m("resourceGroup.TimeoutSeconds"),min:0})})}),(0,j.jsx)(x.A,{span:12,children:(0,j.jsx)(D.A.Item,{label:(0,j.jsx)(b.OO,{style:{whiteSpace:"pre"},children:m("resourceGroup.RetriesToSkipDesc")}),name:"retriesToSkip",children:(0,j.jsx)(Fe.A,{style:{width:"100%"},addonAfter:m("resourceGroup.RetriesToSkip"),min:0})})})]})})})]})})})};var Ge=l(66668),Ke=l(59343),Te=l(75602),we=l(84321),De=l(9107),Le=l(28058);const Me=()=>{const{t:e}=(0,A.Bd)(),{token:n}=v.A.useToken(),{message:l}=w.A.useApp(),[a,i]=(0,_.useState)("active"),[o,{toggle:s}]=(0,B.A)(!1),[u,{toggle:d}]=(0,B.A)(!1),[c,m]=(0,_.useState)(),[g,p]=(0,_.useState)(),[y,x]=(0,r.Tw)("first"),[f,F]=(0,_.useTransition)(),[O,G]=(0,_.useTransition)(),{scaling_groups:K}=(0,S.useLazyLoadQuery)(ie,{is_active:"active"===a},{fetchPolicy:"store-and-network",fetchKey:y}),[T,D]=(0,S.useMutation)(le),[L,M]=(0,S.useMutation)(ee),I=(0,t.YM)([{key:"name",title:e("resourceGroup.Name"),dataIndex:"name"},{key:"description",title:e("resourceGroup.Description"),dataIndex:"description",render:e=>e||"-"},{key:"is_public",title:e("resourceGroup.Public"),dataIndex:"is_public",render:e=>e?(0,j.jsx)(ue.A,{style:{color:n.colorSuccess}}):(0,j.jsx)(de.A,{style:{color:n.colorTextSecondary}})},{key:"driver",title:e("resourceGroup.Driver"),dataIndex:"driver"},{key:"scheduler",title:e("resourceGroup.Scheduler"),dataIndex:"scheduler",render:e=>k().toUpper(e)},{key:"wsproxy_addr",title:e("resourceGroup.WsproxyAddress"),dataIndex:"wsproxy_addr",render:e=>e||"-"},{key:"controls",title:e("general.Control"),fixed:"right",render:(a,i)=>(0,j.jsxs)(b.OO,{children:[(0,j.jsx)(Z.Ay,{type:"text",icon:(0,j.jsx)(P.A,{}),style:{color:n.colorSuccess},onClick:()=>{m(i),d()}}),(0,j.jsx)(Z.Ay,{type:"text",icon:(0,j.jsx)(E.A,{}),style:{color:n.colorInfo},onClick:()=>{m(i),s()}}),(0,j.jsx)(J.A,{title:i.is_active?e("resourceGroup.Deactivate"):e("resourceGroup.Activate"),children:(0,j.jsx)(Te.A,{title:i.is_active?e("resourceGroup.DeactivateResourceGroup"):e("resourceGroup.ActivateResourceGroup"),placement:"left",okType:i.is_active?"danger":"primary",okText:i.is_active?e("resourceGroup.Deactivate"):e("resourceGroup.Activate"),description:null===i||void 0===i?void 0:i.name,onConfirm:()=>{var n;T({variables:{name:null!==(n=i.name)&&void 0!==n?n:"",input:{is_active:!i.is_active}},onCompleted:(n,i)=>{let{modify_scaling_group:t}=n;if(null!==t&&void 0!==t&&t.ok)if(i&&i.length>0){const e=a.map(i,(e=>e.message));for(const n of e)l.error(n)}else l.success(e("resourceGroup.ResourceGroupModified")),G((()=>{x()}));else l.error(null===t||void 0===t?void 0:t.msg)},onError:e=>{l.error(e.message)}})},children:(0,j.jsx)(Z.Ay,{type:"text",danger:!!i.is_active,icon:i.is_active?(0,j.jsx)(De.A,{}):(0,j.jsx)(Le.A,{}),loading:D})})}),(0,j.jsx)(J.A,{title:e("button.Delete"),children:(0,j.jsx)(Z.Ay,{type:"text",icon:(0,j.jsx)(Ge.A,{style:{color:n.colorError}}),onClick:()=>{p((null===i||void 0===i?void 0:i.name)||"")}})})]})}]);return(0,j.jsxs)(b.OO,{direction:"column",align:"stretch",gap:"sm",children:[(0,j.jsxs)(b.OO,{justify:"between",children:[(0,j.jsx)(C.A,{value:a,onChange:e=>{F((()=>{i(e.target.value)}))},optionType:"button",options:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}]}),(0,j.jsxs)(b.OO,{gap:"sm",children:[(0,j.jsx)(re.A,{loading:O,value:y,onChange:()=>{G((()=>{x()}))}}),(0,j.jsx)(Z.Ay,{type:"primary",icon:(0,j.jsx)(Ke.A,{}),onClick:()=>s(),children:e("button.Create")})]})]}),(0,j.jsx)(b.zx,{rowKey:"name",resizable:!0,size:"small",scroll:{x:"max-content"},columns:I,dataSource:(0,t.f)(K),loading:f}),(0,j.jsx)(te.A,{open:!!g,title:e("resourceGroup.DeleteResourceGroup"),content:(0,j.jsxs)(b.OO,{direction:"column",gap:"md",align:"stretch",style:{marginBottom:n.marginXS,width:"100%"},children:[(0,j.jsx)(we.A,{type:"warning",message:e("dialog.warning.DeleteForeverDesc"),style:{width:"100%"}}),(0,j.jsxs)(b.OO,{children:[(0,j.jsx)(h.A.Text,{style:{marginRight:n.marginXXS},children:e("resourceGroup.TypeResourceGroupNameToDelete")}),"(",(0,j.jsx)(h.A.Text,{code:!0,children:g}),")"]})]}),confirmText:null!==g&&void 0!==g?g:"",onOk:()=>{L({variables:{name:null!==g&&void 0!==g?g:""},onCompleted:(n,a)=>{let{delete_scaling_group:i}=n;if(null!==i&&void 0!==i&&i.ok)if(a&&a.length>0){const e=k().map(a,(e=>e.message));for(const n of e)l.error(n)}else l.success(e("resourceGroup.ResourceGroupDeleted")),p(void 0),G((()=>{x()}));else l.error(null===i||void 0===i?void 0:i.msg)},onError:e=>{l.error(e.message)}})},okButtonProps:{loading:M},onCancel:()=>{p(void 0)}}),(0,j.jsx)(me,{open:u&&!!c,resourceGroupFrgmt:c,onRequestClose:()=>{d(),m(void 0)}}),(0,j.jsx)(Oe,{open:o,resourceGroupFrgmt:c,onRequestClose:e=>{s(),m(void 0),e&&G((()=>{x()}))}})]})},Ie=function(){var e={defaultValue:null,kind:"LocalArgument",name:"limit"},n={defaultValue:null,kind:"LocalArgument",name:"offset"},l=[{alias:null,args:[{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"}],concreteType:"StorageVolumeList",kind:"LinkedField",name:"storage_volume_list",plural:!1,selections:[{alias:null,args:null,concreteType:"StorageVolume",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backend",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fsprefix",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"performance_metric",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"usage",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"StorageProxyListQuery",selections:l,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"StorageProxyListQuery",selections:l},params:{cacheID:"00f25e00fb3163b514baaa3ef857ead0",id:null,metadata:{},name:"StorageProxyListQuery",operationKind:"query",text:"query StorageProxyListQuery(\n  $offset: Int!\n  $limit: Int!\n) {\n  storage_volume_list(limit: $limit, offset: $offset) {\n    items {\n      id\n      backend\n      capabilities\n      path\n      fsprefix\n      performance_metric\n      usage\n    }\n    total_count\n  }\n}\n"}}}();Ie.hash="8eea8c97cb39a266757eaa25705b6633";const Re=Ie;var Ce=l(96003);const Ne=(0,l(76238).A)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),Ve={xfs:{color:"blue",icon:(0,j.jsx)(Ne,{})},ceph:{color:"lightblue",icon:(0,j.jsx)(b.qb,{})},cephfs:{color:"lightblue",icon:(0,j.jsx)(b.qb,{})},vfs:{color:"green",icon:(0,j.jsx)(Ne,{})},nfs:{color:"green",icon:(0,j.jsx)(Ne,{})},purestorage:{color:"red",icon:(0,j.jsx)(b.Zd,{})},dgx:{color:"green",icon:(0,j.jsx)(Ne,{})},spectrumscale:{color:"green",icon:(0,j.jsx)(Ne,{})},weka:{color:"purple",icon:(0,j.jsx)(Ne,{})}},$e=()=>{var e;const{token:n}=v.A.useToken(),{t:l}=(0,A.Bd)(),{baiPaginationOption:a,tablePaginationOption:i,setTablePaginationOption:o}=(0,s.aW)({current:1,pageSize:10}),[u,d]=(0,r.Tw)("first"),c=(0,_.useMemo)((()=>({offset:a.offset,limit:a.limit})),[a.offset,a.limit]),m=(0,_.useDeferredValue)(c),g=(0,_.useDeferredValue)(u),{storage_volume_list:y}=(0,S.useLazyLoadQuery)(Re,m,{fetchPolicy:"first"===g?"store-and-network":"network-only",fetchKey:"first"===g?void 0:g}),x=[{title:(0,j.jsxs)(j.Fragment,{children:["ID / ",l("agent.Endpoint")]}),key:"id",dataIndex:"id",render:(e,n)=>(0,j.jsxs)(b.OO,{direction:"column",align:"start",children:[(0,j.jsx)(h.A.Text,{children:e}),(0,j.jsx)(h.A.Text,{type:"secondary",children:n.path})]})},{title:l("agent.BackendType"),key:"backend",dataIndex:"backend",render:e=>{var n;const l=null!==(n=Ve[e])&&void 0!==n?n:{color:"gold",icon:(0,j.jsx)(Ne,{})};return(0,j.jsxs)(b.OO,{gap:"xxs",children:[l.icon,(0,j.jsx)(N.A,{values:[{label:"Backend"},{label:e,color:l.color}]})]})}},{title:l("agent.Resources"),key:"usage",dataIndex:"usage",render:(e,l)=>{var a,i,r;const o=JSON.parse(e),s=(null===o||void 0===o?void 0:o.capacity_bytes)>0?o.used_bytes/o.capacity_bytes:0,u=k().toFinite((0,t.Z1)(100*s,2)),d=u>80?n.colorError:n.colorSuccess,c=(null===(a=(0,t.Ho)(k().toString(null===o||void 0===o?void 0:o.capacity_bytes),"auto",{base:1e3}))||void 0===a?void 0:a.unit)||"g";return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(p.A,{valueLabel:(0,t.Z1)(u,1)+" %",percent:u,strokeColor:d,width:120}),(0,j.jsxs)(h.A.Text,{style:{fontSize:n.fontSizeSM},children:[o.used_bytes?null===(i=(0,t.Gh)(o.used_bytes,c))||void 0===i?void 0:i.numberFixed:"-","\xa0/\xa0",o.capacity_bytes?null===(r=(0,t.Gh)(o.capacity_bytes,c))||void 0===r?void 0:r.displayValue:"-"]})]})}},{title:l("agent.Capabilities"),key:"capabilities",dataIndex:"capabilities",width:150,render:e=>(0,j.jsx)(b.OO,{gap:"xxs",align:"start",wrap:"wrap",children:k().map(e,(e=>(0,j.jsx)(U.A,{color:"blue",style:{margin:0},children:e},e)))})},{title:l("general.Control"),key:"control",width:100,fixed:"right",render:(e,l)=>{let a;try{const e=JSON.parse(l.performance_metric||"{}");a=k().isEmpty(e)}catch(i){a=!0}return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Z.Ay,{disabled:a,style:{color:a?n.colorTextDisabled:n.colorSuccess},icon:(0,j.jsx)(P.A,{}),onClick:()=>{const e=new CustomEvent("backend-ai-selected-storage-proxy",{detail:l.id});document.dispatchEvent(e)},type:"text"}),(0,j.jsx)(Ce.A,{to:`/storage-settings/${l.id}`,children:(0,j.jsx)(Z.Ay,{style:{color:n.colorInfo},icon:(0,j.jsx)(E.A,{}),type:"text"})})]})}}];return(0,_.useEffect)((()=>{if(!k().isEmpty(null===y||void 0===y?void 0:y.items)){const e=new CustomEvent("backend-ai-storage-proxy-updated",{});document.dispatchEvent(e)}}),[y]),(0,j.jsxs)(b.OO,{direction:"column",align:"stretch",gap:"sm",children:[(0,j.jsx)(b.OO,{justify:"end",wrap:"wrap",gap:"sm",children:(0,j.jsx)(re.A,{loading:g!==u||m!==c,autoUpdateDelay:15e3,value:u,onChange:()=>{d()}})}),(0,j.jsx)(b.zx,{resizable:!0,size:"small",scroll:{x:"max-content"},rowKey:"id",dataSource:(0,t.f)(null===y||void 0===y?void 0:y.items),columns:x,loading:m!==c||g!==u,pagination:{pageSize:i.pageSize,current:i.current,total:null!==(e=null===y||void 0===y?void 0:y.total_count)&&void 0!==e?e:0,onChange(e,n){k().isNumber(e)&&k().isNumber(n)&&o({pageSize:n,current:e})}}})]})};var ze=l(83203);const qe=(0,ze.withDefault)(ze.StringParam,"agents"),Pe=e=>{const{t:n}=(0,A.Bd)(),[l,a]=(0,ze.useQueryParam)("tab",qe,{updateType:"replace"});return(0,j.jsxs)(b.Zu,{activeTabKey:l,onTabChange:e=>a(e),tabList:[{key:"agents",tab:n("agent.Agent")},{key:"storages",tab:n("general.StorageProxies")},{key:"resourceGroup",tab:n("general.ResourceGroup")}],children:["agents"===l?(0,j.jsx)(_.Suspense,{fallback:(0,j.jsx)(Ae.A,{active:!0}),children:(0,j.jsx)(H,{})}):null,"storages"===l?(0,j.jsx)(_.Suspense,{fallback:(0,j.jsx)(Ae.A,{active:!0}),children:(0,j.jsx)($e,{})}):null,"resourceGroup"===l?(0,j.jsx)(_.Suspense,{fallback:(0,j.jsx)(Ae.A,{active:!0}),children:(0,j.jsx)(Me,{})}):null]})}},9107:(e,n,l)=>{l.d(n,{A:()=>a});const a=(0,l(76238).A)("ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]])},28058:(e,n,l)=>{l.d(n,{A:()=>a});const a=(0,l(76238).A)("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]])}}]);
//# sourceMappingURL=8450.9766aa60.chunk.js.map