{"version":3,"file":"static/js/1822.1b5c6495.chunk.js","mappings":"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","sources":["components/SettingItem.tsx","components/SettingList.tsx","components/MaintenanceSettingList.tsx","pages/MaintenancePage.tsx"],"sourcesContent":["import Flex from './Flex';\nimport { Badge, Checkbox, Select, SelectProps, Typography, theme } from 'antd';\nimport { createStyles } from 'antd-style';\nimport _ from 'lodash';\nimport React, { ReactElement, ReactNode } from 'react';\n\nexport interface SettingItemProps {\n  type: 'custom' | 'checkbox' | 'select';\n  title: string;\n  description?: string | ReactElement;\n  children?: ReactNode;\n  defaultValue?: any;\n  value?: any;\n  setValue?: (value: any) => void;\n  selectProps?: Omit<SelectProps, 'value' | 'onChange' | 'defaultValue'>;\n  onChange?: (value: any) => void;\n  disabled?: boolean;\n}\n\nconst useStyles = createStyles(({ css }) => ({\n  baiSettingItemCheckbox: css`\n    .ant-checkbox {\n      align-self: flex-start;\n      margin-top: 0.2rem;\n    }\n  `,\n}));\n\nconst SettingItem: React.FC<SettingItemProps> = ({\n  type,\n  title,\n  description,\n  children,\n  defaultValue,\n  value,\n  selectProps,\n  onChange,\n  disabled,\n}) => {\n  const { token } = theme.useToken();\n  const { styles } = useStyles();\n\n  return (\n    <Flex direction=\"column\" align=\"start\" gap={'xxs'}>\n      <Flex direction=\"row\" gap={'xxs'}>\n        <Typography.Text\n          strong\n          style={{\n            fontSize: token.fontSize,\n          }}\n        >\n          {title}\n        </Typography.Text>\n        {!disabled &&\n          value !== undefined &&\n          value !== null &&\n          defaultValue !== value && <Badge dot status=\"warning\" />}\n      </Flex>\n      {type === 'custom' && (\n        <>\n          {description}\n          <div style={{ marginTop: token.marginXS }}>{children}</div>\n        </>\n      )}\n      {type === 'checkbox' && (\n        <Checkbox\n          checked={value}\n          onChange={onChange}\n          disabled={disabled}\n          className={styles.baiSettingItemCheckbox}\n        >\n          <Typography.Text type={disabled ? 'secondary' : undefined}>\n            {description}\n          </Typography.Text>\n        </Checkbox>\n      )}\n      {type === 'select' && (\n        <>\n          {description}\n          <Select\n            value={value}\n            popupMatchSelectWidth={false}\n            onChange={onChange}\n            disabled={disabled}\n            style={{\n              marginTop: token.marginXS,\n              ...selectProps?.style,\n            }}\n            {..._.omit(selectProps, ['style'])}\n          ></Select>\n        </>\n      )}\n    </Flex>\n  );\n};\n\nexport default SettingItem;\n","import BAIModal from './BAIModal';\nimport Flex from './Flex';\nimport SettingItem from './SettingItem';\nimport { SettingItemProps } from './SettingItem';\nimport { RedoOutlined, SearchOutlined } from '@ant-design/icons';\nimport { useToggle } from 'ahooks';\nimport {\n  Alert,\n  Button,\n  Checkbox,\n  Divider,\n  Empty,\n  Input,\n  Tabs,\n  Typography,\n  theme,\n} from 'antd';\nimport { createStyles } from 'antd-style';\nimport _ from 'lodash';\nimport { useState, ReactNode } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nconst useStyles = createStyles(({ css, token }) => ({\n  TabStyles: css`\n    .ant-tabs-tab-active {\n      font-weight: var(--token-fontWeightSuperStrong, 700);\n    }\n    .ant-typography-secondary {\n      font-weight: normal !important;\n    }\n  `,\n}));\n\nexport type SettingGroup = {\n  title: string;\n  description?: ReactNode;\n  settingItems: SettingItemProps[];\n};\n\ninterface SettingPageProps {\n  settingGroups: Array<SettingGroup>;\n  tabDirection?: 'top' | 'left';\n  showChangedOptionFilter?: boolean;\n  showResetButton?: boolean;\n  showSearchBar?: boolean;\n}\n\nconst TabTitle: React.FC<{\n  title: string;\n  count: number;\n}> = ({ title, count }) => {\n  return (\n    <>\n      <Typography.Text>{title}</Typography.Text>\n      <Typography.Text type=\"secondary\">{` (${count})`}</Typography.Text>\n    </>\n  );\n};\n\nconst GroupSettingItems: React.FC<{\n  group: SettingGroup;\n  hideEmpty?: boolean;\n}> = ({ group, hideEmpty }) => {\n  const { token } = theme.useToken();\n  if (hideEmpty && group.settingItems.length === 0) return false;\n  return (\n    <Flex\n      direction=\"column\"\n      align=\"stretch\"\n      style={{\n        marginBottom: token.marginMD,\n      }}\n    >\n      <Flex\n        direction=\"column\"\n        align=\"stretch\"\n        style={{\n          zIndex: 1,\n          marginBottom: token.marginMD,\n          background: token.colorBgContainer,\n        }}\n      >\n        <Typography.Title\n          level={5}\n          style={{\n            marginTop: 0,\n          }}\n        >\n          {group.title}\n        </Typography.Title>\n        <Divider style={{ marginTop: 0, marginBottom: 0 }} />\n        {group.description && (\n          <Typography.Text\n            type=\"secondary\"\n            style={{ marginTop: token.marginSM }}\n          >\n            {group.description}\n          </Typography.Text>\n        )}\n      </Flex>\n      <Flex direction=\"column\" align=\"start\" gap={'lg'}>\n        {group.settingItems.map((item, idx) => (\n          <SettingItem key={item.title + idx} {...item} />\n        ))}\n      </Flex>\n    </Flex>\n  );\n};\n\nconst SettingList: React.FC<SettingPageProps> = ({\n  settingGroups,\n  tabDirection = 'left',\n  showChangedOptionFilter,\n  showResetButton,\n  showSearchBar,\n}) => {\n  const { t } = useTranslation();\n  const { token } = theme.useToken();\n  const { styles } = useStyles();\n  const [searchValue, setSearchValue] = useState('');\n  const [changedOptionFilter, setChangedOptionFilter] = useState(false);\n  const [isOpenResetChangesModal, { toggle: setIsOpenResetChangesModal }] =\n    useToggle(false);\n  const [activeTabKey, setActiveTabKey] = useState('all');\n\n  const searchedItemFilter = (item: SettingItemProps) => {\n    return (\n      item.title.toLowerCase().includes(searchValue.toLowerCase()) ||\n      (typeof item.description === 'string' &&\n        item.description.toLowerCase().includes(searchValue.toLowerCase()))\n    );\n  };\n\n  const changedItemValidator = (item: SettingItemProps) => {\n    if (item.value === null || item.value === undefined || !!item.disabled) {\n      return false;\n    }\n    return item.value !== item.defaultValue;\n  };\n\n  const filteredSettingGroups = _.map(settingGroups, (group) => {\n    return {\n      ...group,\n      settingItems: _.filter(\n        group.settingItems,\n        (item) =>\n          (!changedOptionFilter || changedItemValidator(item)) &&\n          searchedItemFilter(item),\n      ),\n    };\n  });\n\n  return (\n    <>\n      <Flex\n        direction=\"column\"\n        gap={'md'}\n        align=\"stretch\"\n        style={{\n          padding: token.paddingContentHorizontal,\n          maxWidth: token.screenLG,\n        }}\n      >\n        <Flex justify=\"start\" gap={'xs'}>\n          {!!showSearchBar && (\n            <Input\n              prefix={<SearchOutlined />}\n              placeholder={t('settings.SearchPlaceholder')}\n              onChange={(e) => setSearchValue(e.target.value)}\n              value={searchValue}\n            />\n          )}\n          {!!showChangedOptionFilter && (\n            <Checkbox\n              onChange={(e) => setChangedOptionFilter(e.target.checked)}\n              style={{ whiteSpace: 'nowrap' }}\n            >\n              {t('settings.ShowOnlyChanged')}\n            </Checkbox>\n          )}\n          {!!showResetButton && (\n            <Button\n              icon={<RedoOutlined />}\n              onClick={() => setIsOpenResetChangesModal()}\n            >\n              {t('button.Reset')}\n            </Button>\n          )}\n        </Flex>\n        <Tabs\n          activeKey={activeTabKey}\n          onChange={setActiveTabKey}\n          className={styles.TabStyles}\n          tabPosition={tabDirection ? 'left' : 'top'}\n          tabBarStyle={{ minWidth: 200 }}\n          items={[\n            {\n              key: 'all',\n              label: (\n                <TabTitle\n                  title={t('general.All')}\n                  count={_.sumBy(\n                    filteredSettingGroups,\n                    (group) => group.settingItems.length,\n                  )}\n                />\n              ),\n              children: (\n                <Flex direction=\"column\" align=\"stretch\" gap={'xl'}>\n                  {_.sumBy(\n                    filteredSettingGroups,\n                    (group) => group.settingItems.length,\n                  ) > 0 ? (\n                    _.map(filteredSettingGroups, (group) => (\n                      <GroupSettingItems\n                        key={group.title}\n                        group={group}\n                        hideEmpty\n                      />\n                    ))\n                  ) : (\n                    <Empty\n                      image={Empty.PRESENTED_IMAGE_SIMPLE}\n                      description={t('settings.NoChangesToDisplay')}\n                    />\n                  )}\n                </Flex>\n              ),\n            },\n            ..._.map(filteredSettingGroups, (group, idx) => ({\n              key: `index${idx}`,\n              label: (\n                <TabTitle\n                  title={group.title}\n                  count={group.settingItems.length}\n                />\n              ),\n              children:\n                group.settingItems.length > 0 ? (\n                  <GroupSettingItems group={group} hideEmpty />\n                ) : (\n                  <Empty\n                    image={Empty.PRESENTED_IMAGE_SIMPLE}\n                    description={t('settings.NoChangesToDisplay')}\n                  />\n                ),\n            })),\n          ]}\n        />\n      </Flex>\n      <BAIModal\n        open={isOpenResetChangesModal}\n        title={t('dialog.ask.DoYouWantToResetChanges')}\n        okText={t('button.Reset')}\n        okButtonProps={{ danger: true }}\n        onOk={() => {\n          _.flatMap(settingGroups, (item) => item.settingItems).forEach(\n            (option) => {\n              !option.disabled &&\n                option?.setValue &&\n                option.setValue(option.defaultValue);\n            },\n          );\n          setIsOpenResetChangesModal();\n        }}\n        cancelText={t('button.Cancel')}\n        onCancel={() => setIsOpenResetChangesModal()}\n      >\n        <Alert\n          showIcon\n          message={t('dialog.warning.CannotBeUndone')}\n          type=\"warning\"\n        />\n      </BAIModal>\n    </>\n  );\n};\n\nexport default SettingList;\n","import { useSuspendedBackendaiClient } from '../hooks';\nimport { useSetBAINotification } from '../hooks/useBAINotification';\nimport SettingList, { SettingGroup } from './SettingList';\nimport { RedoOutlined } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nconst MaintenanceSettingList = () => {\n  const [isRecalculating, setIsRecalculating] = useState(false);\n  const [isRescanning, setIsRescanning] = useState(false);\n\n  const { t } = useTranslation();\n  const { upsertNotification } = useSetBAINotification();\n  const baiClient = useSuspendedBackendaiClient();\n\n  const recalculateUsage = () => {\n    setIsRecalculating(true);\n\n    upsertNotification({\n      message: t('maintenance.RecalculateUsage'),\n      description: t('maintenance.Recalculating'),\n      open: true,\n      backgroundTask: {\n        status: 'pending',\n        promise: baiClient.maintenance\n          .recalculate_usage()\n          .finally(() => setIsRecalculating(false)),\n        onChange: {\n          pending: t('maintenance.Recalculating'),\n          resolved: t('maintenance.RecalculationFinished'),\n          rejected: t('maintenance.RecalculationFailed'),\n        },\n      },\n    });\n  };\n\n  const rescanImages = () => {\n    setIsRescanning(true);\n    upsertNotification({\n      message: t('maintenance.RescanImages'),\n      open: true,\n      backgroundTask: {\n        status: 'pending',\n        promise: baiClient.maintenance.rescan_images(),\n        onChange: {\n          pending: t('maintenance.RescanImageScanning'),\n          resolved: (data) => {\n            const result = data as Awaited<\n              ReturnType<typeof baiClient.maintenance.rescan_images>\n            >;\n            if (result.rescan_images.ok) {\n              return {\n                backgroundTask: {\n                  status: 'pending',\n                  taskId: result.rescan_images.task_id,\n                  promise: null,\n                  percent: 0,\n                  onChange: {\n                    resolved: (_data, _notification) => {\n                      setIsRescanning(false);\n                      return t('maintenance.RescanImageFinished');\n                    },\n                  },\n                },\n                duration: 0,\n              };\n            } else {\n              throw new Error(t('maintenance.RescanFailed'));\n            }\n          },\n          rejected: (data, _) => {\n            const error = data as Error | undefined;\n            setIsRescanning(false);\n            return error?.message || t('maintenance.RescanFailed');\n          },\n        },\n      },\n    });\n  };\n\n  const settingGroupList: Array<SettingGroup> = [\n    {\n      title: t('maintenance.Fix'),\n      settingItems: [\n        {\n          type: 'custom',\n          title: t('maintenance.MatchDatabase'),\n          description: t('maintenance.DescMatchDatabase'),\n          children: (\n            <Button\n              icon={<RedoOutlined />}\n              onClick={recalculateUsage}\n              loading={isRecalculating}\n            >\n              {isRecalculating\n                ? t('maintenance.Recalculating')\n                : t('maintenance.RecalculateUsage')}\n            </Button>\n          ),\n        },\n      ],\n    },\n    {\n      title: t('maintenance.ImagesEnvironment'),\n      settingItems: [\n        {\n          type: 'custom',\n          title: t('maintenance.RescanImageList'),\n          description: t('maintenance.DescRescanImageList'),\n          children: (\n            <Button\n              icon={<RedoOutlined />}\n              onClick={rescanImages}\n              loading={isRescanning}\n            >\n              {isRescanning\n                ? t('maintenance.RescanImageScanning')\n                : t('maintenance.RescanImages')}\n            </Button>\n          ),\n        },\n      ],\n    },\n  ];\n\n  return <SettingList settingGroups={settingGroupList} showSearchBar />;\n};\n\nexport default MaintenanceSettingList;\n","import MaintenanceSettingList from '../components/MaintenanceSettingList';\nimport { Card } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { StringParam, useQueryParam, withDefault } from 'use-query-params';\n\ntype TabKey = 'maintenance';\n\nconst tabParam = withDefault(StringParam, 'maintenance');\n\nconst MaintenancePage = () => {\n  const { t } = useTranslation();\n  const [curTabKey, setCurTabKey] = useQueryParam('tab', tabParam);\n\n  return (\n    <Card\n      activeTabKey=\"maintenance\"\n      onTabChange={(key) => setCurTabKey(key as TabKey)}\n      tabList={[\n        {\n          key: 'maintenance',\n          tab: t('webui.menu.Maintenance'),\n        },\n      ]}\n      styles={{ body: { padding: 0 } }}\n    >\n      {curTabKey === 'maintenance' && <MaintenanceSettingList />}\n    </Card>\n  );\n};\n\nexport default MaintenancePage;\n"],"names":["useStyles","createStyles","_ref","css","baiSettingItemCheckbox","_ref2","type","title","description","children","defaultValue","value","selectProps","onChange","disabled","token","theme","useToken","styles","_jsxs","Flex","direction","align","gap","_jsx","Typography","Text","strong","style","fontSize","undefined","Badge","dot","status","_Fragment","marginTop","marginXS","Checkbox","checked","className","Select","popupMatchSelectWidth","_","TabStyles","TabTitle","count","GroupSettingItems","_ref3","group","hideEmpty","settingItems","length","marginBottom","marginMD","zIndex","background","colorBgContainer","Title","level","Divider","marginSM","map","item","idx","SettingItem","_ref4","settingGroups","tabDirection","showChangedOptionFilter","showResetButton","showSearchBar","t","useTranslation","searchValue","setSearchValue","useState","changedOptionFilter","setChangedOptionFilter","isOpenResetChangesModal","toggle","setIsOpenResetChangesModal","useToggle","activeTabKey","setActiveTabKey","filteredSettingGroups","changedItemValidator","toLowerCase","includes","searchedItemFilter","padding","paddingContentHorizontal","maxWidth","screenLG","justify","Input","prefix","SearchOutlined","placeholder","e","target","whiteSpace","Button","icon","RedoOutlined","onClick","Tabs","activeKey","tabPosition","tabBarStyle","minWidth","items","key","label","Empty","image","PRESENTED_IMAGE_SIMPLE","BAIModal","open","okText","okButtonProps","danger","onOk","forEach","option","setValue","cancelText","onCancel","Alert","showIcon","message","MaintenanceSettingList","isRecalculating","setIsRecalculating","isRescanning","setIsRescanning","upsertNotification","useSetBAINotification","baiClient","useSuspendedBackendaiClient","settingGroupList","recalculateUsage","backgroundTask","promise","maintenance","recalculate_usage","finally","pending","resolved","rejected","loading","rescanImages","rescan_images","data","result","ok","taskId","task_id","percent","_data","_notification","duration","Error","error","SettingList","tabParam","withDefault","StringParam","MaintenancePage","curTabKey","setCurTabKey","useQueryParam","Card","onTabChange","tabList","tab","body"],"sourceRoot":""}