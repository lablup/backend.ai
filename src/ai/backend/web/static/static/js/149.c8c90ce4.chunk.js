/*! For license information please see 149.c8c90ce4.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[149],{23370:(e,l,n)=>{n.d(l,{A:()=>c});const a=function(){var e=[{alias:null,args:[{kind:"Literal",name:"is_active",value:!0}],concreteType:"Domain",kind:"LinkedField",name:"domains",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:"domains(is_active:true)"}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DomainSelectorQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"DomainSelectorQuery",selections:e},params:{cacheID:"9df762094b74dc3eb8079edfcc73765f",id:null,metadata:{},name:"DomainSelectorQuery",operationKind:"query",text:"query DomainSelectorQuery {\n  domains(is_active: true) {\n    name\n  }\n}\n"}}}();a.hash="c14d362fa40cf9a3cef5d1d71202cc5f";const i=a;var t=n(89798),r=n(8348),o=n.n(r),s=(n(66610),n(54070)),u=n(89737),d=n(66906);const c=e=>{let{onSelectDomain:l,...n}=e;const{t:a}=(0,s.Bd)(),{domains:r}=(0,u.useLazyLoadQuery)(i,{},{fetchPolicy:"store-and-network"});return(0,d.jsxs)(t.A,{onChange:(e,n)=>{null===l||void 0===l||l(n)},placeholder:a("storageHost.quotaSettings.SelectDomain"),...n,children:[o().map(r,(e=>(0,d.jsx)(t.A.Option,{domainName:null===e||void 0===e?void 0:e.name,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.name))),";"]})}},67641:(e,l,n)=>{n.d(l,{A:()=>p});var a=n(39718),i=n(45885),t=n(88153),r=n(8804),o=n(22065),s=n(37325),u=n(8348),d=n.n(u),c=n(66610),m=n(54070),g=n(66906);const p=e=>{var l;let{open:n,onRequestClose:u,columns:p,hiddenColumnKeys:v,...y}=e;const x=(0,c.useRef)(null),{t:h}=(0,m.Bd)(),{token:b}=t.A.useToken(),f=d().map(p,(e=>{return"string"===typeof e.title?{label:e.title,value:d().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(l=e.title,c.Children.map(l.props.children,(e=>{if("string"===typeof e)return e}))),value:d().toString(e.key)}:{label:void 0,value:d().toString(e.key)};var l}));return(0,g.jsx)(a.A,{title:h("table.SettingTable"),open:n,destroyOnClose:!0,centered:!0,onOk:()=>{var e;null===(e=x.current)||void 0===e||e.validateFields().then((e=>{u(e)})).catch((()=>{}))},onCancel:()=>{u()},...y,children:(0,g.jsxs)(r.A,{ref:x,preserve:!1,initialValues:{selectedColumnKeys:null===(l=d().map(f,"value"))||void 0===l?void 0:l.filter((e=>!d().includes(v,e)))},layout:"vertical",children:[(0,g.jsx)(r.A.Item,{name:"searchInput",label:h("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,g.jsx)(o.A,{prefix:(0,g.jsx)(i.A,{}),style:{marginBottom:b.marginSM},placeholder:h("table.SearchTableColumn")})}),(0,g.jsx)(r.A.Item,{noStyle:!0,shouldUpdate:(e,l)=>e.searchInput!==l.searchInput,children:e=>{let{getFieldValue:l}=e;const n=l("searchInput")?d().toLower(l("searchInput")):void 0,a=d().map(f,(e=>d().toLower(d().toString(e.label)).includes(n||"")?e:{...e,style:{display:"none"}}));return(0,g.jsx)(r.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},rules:[{required:!0,message:h("general.validation.PleaseSelectOptions")}],children:(0,g.jsx)(s.A.Group,{options:a,style:{flexDirection:"column"}})})}})]})})}},10936:(e,l,n)=>{n.d(l,{a:()=>i});var a=n(2212);const i=e=>{const[l,n]=(0,a.q)(`hiddenColumnKeys.${e}`);return[l,n]}},149:(e,l,n)=>{n.r(l),n.d(l,{default:()=>qe});const a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"filter"},l={defaultValue:null,kind:"LocalArgument",name:"limit"},n={defaultValue:null,kind:"LocalArgument",name:"offset"},a={defaultValue:null,kind:"LocalArgument",name:"order"},i={defaultValue:null,kind:"LocalArgument",name:"status"},t=[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"},{kind:"Variable",name:"order",variableName:"order"},{kind:"Variable",name:"status",variableName:"status"}],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"addr",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"compute_plugins",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"first_contact",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"lost_at",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"status_changed",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"cpu_cur_pct",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"mem_cur_bytes",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"available_slots",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"schedulable",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null};return{fragment:{argumentDefinitions:[e,l,n,a,i],kind:"Fragment",metadata:null,name:"AgentListQuery",selections:[{alias:null,args:t,concreteType:"AgentList",kind:"LinkedField",name:"agent_list",plural:!1,selections:[{alias:null,args:null,concreteType:"Agent",kind:"LinkedField",name:"items",plural:!0,selections:[r,o,s,u,d,c,m,g,p,v,y,x,h,b,f,k,_,{args:null,kind:"FragmentSpread",name:"AgentDetailModalFragment"},{args:null,kind:"FragmentSpread",name:"AgentSettingModalFragment"}],storageKey:null},A],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,n,e,i,a],kind:"Operation",name:"AgentListQuery",selections:[{alias:null,args:t,concreteType:"AgentList",kind:"LinkedField",name:"agent_list",plural:!1,selections:[{alias:null,args:null,concreteType:"Agent",kind:"LinkedField",name:"items",plural:!0,selections:[r,o,s,u,d,c,m,g,p,v,y,x,h,b,f,k,_],storageKey:null},A],storageKey:null}]},params:{cacheID:"e1a551c0261ce59a4b187a3bbb29b86b",id:null,metadata:{},name:"AgentListQuery",operationKind:"query",text:"query AgentListQuery(\n  $limit: Int!\n  $offset: Int!\n  $filter: String\n  $status: String\n  $order: String\n) {\n  agent_list(limit: $limit, offset: $offset, filter: $filter, status: $status, order: $order) {\n    items {\n      id\n      status\n      version\n      addr\n      architecture\n      region\n      compute_plugins\n      first_contact\n      lost_at\n      status_changed\n      live_stat\n      cpu_cur_pct\n      mem_cur_bytes\n      available_slots\n      occupied_slots\n      scaling_group\n      schedulable\n      ...AgentDetailModalFragment\n      ...AgentSettingModalFragment\n    }\n    total_count\n  }\n}\n\nfragment AgentDetailModalFragment on Agent {\n  id\n  live_stat\n  available_slots\n  occupied_slots\n  cpu_cur_pct\n  mem_cur_bytes\n}\n\nfragment AgentSettingModalFragment on Agent {\n  id\n  schedulable\n}\n"}}}();a.hash="1d6c6a390aad71e4b7815a623ca61d86";const i=a;var t=n(2156),r=n(19885),o=n(37615),s=n(61774),u=n(10936),d=n(77950);const c={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentDetailModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"available_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cpu_cur_pct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mem_cur_bytes",storageKey:null}],type:"Agent",abstractKey:null,hash:"cb343a0290034803cca4c2b82a1c1b68"},m=c;var g=n(39718),p=n(72190),v=n(88153),y=n(22252),x=n(35054),h=n(27480),b=n(63872),f=n(8348),k=n.n(f),_=n(66610),A=n(54070),S=n(89737),j=n(66906);const F=e=>{var l,n,a,i,r,s,u,d,c,f,_,F,O,G;let{agentDetailModalFrgmt:K=null,onRequestClose:T,...w}=e;const{t:D}=(0,A.Bd)(),{token:M}=v.A.useToken(),{mergedResourceSlots:I}=(0,o.Hv)(),L=(0,S.useFragment)(m,K),R=JSON.parse((null===L||void 0===L?void 0:L.live_stat)||"{}"),C=JSON.parse((null===L||void 0===L?void 0:L.available_slots)||"{}");return(0,j.jsx)(g.A,{...w,centered:!0,title:`${D("agent.DetailedInformation")}: ${null===L||void 0===L?void 0:L.id}`,onCancel:T,destroyOnClose:!0,footer:null,children:(0,j.jsxs)(b.OO,{direction:"column",align:"stretch",gap:"md",children:[(0,j.jsxs)(y.A,{gutter:[24,24],children:[(0,j.jsx)(x.A,{xs:24,sm:12,children:null!==R&&void 0!==R&&null!==(l=R.devices)&&void 0!==l&&l.cpu_util?(0,j.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"stretch",children:[(0,j.jsx)(h.A.Title,{level:5,style:{marginTop:0},children:null===I||void 0===I||null===(n=I.cpu)||void 0===n?void 0:n.human_readable_name}),k().map(null===R||void 0===R||null===(a=R.devices)||void 0===a?void 0:a.cpu_util,((e,l)=>{var n;return(0,j.jsxs)(b.OO,{justify:"between",children:[(0,j.jsxs)(h.A.Text,{type:"secondary",style:{flex:.5},children:[null===I||void 0===I||null===(n=I.cpu)||void 0===n?void 0:n.human_readable_name,l]},l),(0,j.jsx)(p.A,{percent:null===e||void 0===e?void 0:e.pct,valueLabel:(0,t.Z1)(null===e||void 0===e?void 0:e.pct,1)+"%"})]})}))]}):null}),(0,j.jsxs)(x.A,{xs:24,sm:12,children:[null!==C&&void 0!==C&&C.mem?(0,j.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"stretch",children:[(0,j.jsx)(h.A.Title,{level:5,style:{marginTop:0},children:null===I||void 0===I||null===(i=I.mem)||void 0===i?void 0:i.human_readable_name}),(0,j.jsx)(p.A,{percent:k().toNumber(null===(r=(0,t.mv)(k().toString(null===L||void 0===L?void 0:L.mem_cur_bytes),"g"))||void 0===r?void 0:r.number)/k().toNumber(null===(s=(0,t.mv)(null===C||void 0===C?void 0:C.mem,"g"))||void 0===s?void 0:s.number)*100||0,valueLabel:`${null===(u=(0,t.mv)(k().toString(null===L||void 0===L?void 0:L.mem_cur_bytes),"g"))||void 0===u?void 0:u.displayValue} / ${null===(d=(0,t.mv)(null===C||void 0===C?void 0:C.mem,"g"))||void 0===d?void 0:d.displayValue}`})]}):null,null!==R&&void 0!==R&&R.node?(0,j.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"start",children:[(0,j.jsx)(h.A.Title,{level:5,style:{marginTop:0},children:D("session.launcher.Network")}),(0,j.jsxs)(b.OO,{gap:"xl",children:[(0,j.jsx)(h.A.Text,{children:"TX:"}),(0,j.jsxs)(h.A.Text,{children:[null===(c=(0,t.Gh)(null===R||void 0===R||null===(f=R.node)||void 0===f||null===(_=f.net_tx)||void 0===_?void 0:_.current,"m",2))||void 0===c?void 0:c.displayValue,"B"]})]}),(0,j.jsxs)(b.OO,{gap:"xl",children:[(0,j.jsx)(h.A.Text,{children:"RX:"}),(0,j.jsxs)(h.A.Text,{children:[null===(F=(0,t.Gh)(null===R||void 0===R||null===(O=R.node)||void 0===O||null===(G=O.net_rx)||void 0===G?void 0:G.current,"m",2))||void 0===F?void 0:F.displayValue,"B"]})]})]}):null]})]}),(0,j.jsx)(y.A,{gutter:[24,24],style:{marginBottom:M.marginSM},children:k().map(k().keys(null===R||void 0===R?void 0:R.devices),(e=>{if(["cpu_util","mem","disk","net_rx","net_tx"].includes(e))return null;if(k().includes(e,"_util")){var l;const n=k().split(e,"_")[0]+".device";return(0,j.jsx)(x.A,{xs:24,sm:12,children:(0,j.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"stretch",children:[(0,j.jsxs)(h.A.Title,{level:5,style:{marginTop:0},children:[null===I||void 0===I||null===(l=I[n])||void 0===l?void 0:l.human_readable_name," ",D("session.Utilization")]}),k().map(k().toPairs(null===R||void 0===R?void 0:R.devices[e]),((e,l)=>{var a,i,r;return(0,j.jsxs)(b.OO,{justify:"between",children:[(0,j.jsxs)(h.A.Text,{type:"secondary",style:{flex:.5},children:[null===I||void 0===I||null===(a=I[n])||void 0===a?void 0:a.human_readable_name,l]},l),(0,j.jsx)(p.A,{percent:k().toFinite(null===e||void 0===e||null===(i=e[1])||void 0===i?void 0:i.pct),valueLabel:(0,t.Z1)(null===e||void 0===e||null===(r=e[1])||void 0===r?void 0:r.pct,1)+"%"})]})}))]})})}if(k().includes(e,"_mem")){var n;const l=k().split(e,"_")[0]+".device";return(0,j.jsx)(x.A,{xs:24,sm:12,children:(0,j.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"stretch",children:[(0,j.jsxs)(h.A.Title,{level:5,style:{marginTop:0},children:[null===I||void 0===I||null===(n=I[l])||void 0===n?void 0:n.human_readable_name," ",D("session.launcher.Memory")]}),k().map(k().toPairs(null===R||void 0===R?void 0:R.devices[e]),((e,n)=>{var a,i,r;return(0,j.jsxs)(b.OO,{justify:"between",children:[(0,j.jsxs)(h.A.Text,{type:"secondary",style:{flex:.5},children:[null===I||void 0===I||null===(a=I[l])||void 0===a?void 0:a.human_readable_name,n]},n),(0,j.jsx)(p.A,{percent:k().toFinite(null===e||void 0===e||null===(i=e[1])||void 0===i?void 0:i.pct),valueLabel:(0,t.Z1)(null===e||void 0===e||null===(r=e[1])||void 0===r?void 0:r.pct,1)+"%"})]})}))]})})}}))})]})})},O=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"props"}],l=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyAgent",kind:"LinkedField",name:"modify_agent",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"AgentSettingModalMutation",selections:l,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"AgentSettingModalMutation",selections:l},params:{cacheID:"1a9e43d4bc6e78f3949d1a2a397ff00e",id:null,metadata:{},name:"AgentSettingModalMutation",operationKind:"mutation",text:"mutation AgentSettingModalMutation(\n  $id: String!\n  $props: ModifyAgentInput!\n) {\n  modify_agent(id: $id, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();O.hash="13b2a6a91c7f08bbced5fde155ded60e";const G=O,K={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AgentSettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"schedulable",storageKey:null}],type:"Agent",abstractKey:null,hash:"303f8ee06508c3b28511ab1a24a305d5"},T=K;var w=n(39452),D=n(8804),M=n(75766);const I=e=>{let{agentSettingModalFrgmt:l=null,onRequestClose:n,...a}=e;const{t:i}=(0,A.Bd)(),{message:t}=w.A.useApp(),r=(0,_.useRef)(null),o=(0,S.useFragment)(T,l),[s,u]=(0,S.useMutation)(G);return(0,j.jsx)(g.A,{...a,title:`${i("agent.AgentSetting")}: ${null===o||void 0===o?void 0:o.id}`,onCancel:()=>n(),destroyOnClose:!0,width:300,confirmLoading:u,onOk:()=>{var e;null===(e=r.current)||void 0===e||e.validateFields().then((e=>{s({variables:{id:(null===o||void 0===o?void 0:o.id)||"",props:{schedulable:e.schedulable}},onCompleted(e,l){var a,r;null===e||void 0===e||null===(a=e.modify_agent)||void 0===a||!a.ok||l?(t.error(null===e||void 0===e||null===(r=e.modify_agent)||void 0===r?void 0:r.msg),n()):(t.success(i("agent.AgentSettingUpdated")),n(!0))},onError(e){t.error(null===e||void 0===e?void 0:e.message)}})})).catch((()=>{}))},children:(0,j.jsx)(D.A,{ref:r,preserve:!1,initialValues:{...o},children:(0,j.jsx)(D.A.Item,{name:"schedulable",label:i("agent.Schedulable"),valuePropName:"checked",children:(0,j.jsx)(M.A,{})})})})};var L=n(49135),R=n(95593),C=n(54802),N=n(213),V=n(67641),z=n(95676),$=n(44276),q=n(3420),P=n(67653),E=n(33865),Q=n(89644),B=n(80770),U=n(84395),Z=n(60042),J=n(4994),W=n.n(J),X=n(83203);const H=e=>{let{tableProps:l}=e;const{t:n}=(0,A.Bd)(),{token:a}=v.A.useToken(),{isDarkMode:c}=(0,d.e)(),{mergedResourceSlots:m}=(0,o.Hv)(),[g,y]=(0,_.useState)(),[x,f]=(0,_.useState)(),[O,{toggle:G}]=(0,Q.A)(),K=(0,r.CX)(),[T,w]=(0,X.useQueryParams)({status:(0,X.withDefault)(X.StringParam,"ALIVE"),filter:(0,X.withDefault)(X.StringParam,void 0),order:(0,X.withDefault)(X.StringParam,void 0)}),{baiPaginationOption:D,tablePaginationOption:M,setTablePaginationOption:J}=(0,s.aW)({current:1,pageSize:10}),[H,Y]=(0,r.zu)(),ee=(0,_.useMemo)((()=>({limit:D.limit,offset:D.offset,filter:T.filter,order:T.order,status:T.status})),[D.limit,D.offset,T.filter,T.order,T.status]),le=(0,_.useDeferredValue)(ee),ne=(0,_.useDeferredValue)(H),{agent_list:ae}=(0,S.useLazyLoadQuery)(i,le,{fetchKey:ne,fetchPolicy:ne===r.eI?"store-and-network":"network-only"}),ie=[{title:(0,j.jsxs)(j.Fragment,{children:["ID / ",n("agent.Endpoint")]}),key:"id",dataIndex:"id",fixed:"left",render:(e,l)=>(0,j.jsxs)(b.OO,{direction:"column",align:"start",children:[(0,j.jsx)(h.A.Text,{children:e}),(0,j.jsx)(h.A.Text,{type:"secondary",children:null===l||void 0===l?void 0:l.addr})]}),sorter:!0},{title:n("agent.Region"),key:"region",dataIndex:"region",render:e=>{const l=k().split(e,"/"),n=null===l||void 0===l?void 0:l[0],a=(null===l||void 0===l?void 0:l.length)>1?l[1]:"",{color:i,icon:t}={aws:{color:"orange",icon:"aws"},amazon:{color:"orange",icon:"aws"},azure:{color:"blue",icon:"azure"},gcp:{color:"lightblue",icon:"gcp"},google:{color:"lightblue",icon:"gcp"},nbp:{color:"green",icon:"nbp"},naver:{color:"green",icon:"nbp"},openstack:{color:"red",icon:"openstack"},dgx:{color:"green",icon:"local"},local:{color:"yellow",icon:"local"}}[n]||{color:"yellow",icon:"local"};return(0,j.jsxs)(b.OO,{gap:"xxs",children:[(0,j.jsx)("img",{alt:e,src:`/resources/icons/${t}.png`,style:{width:"32px",height:"32px",filter:c&&"local"===t?"invert(1)":""}}),""!==a?(0,j.jsx)(C.A,{values:[{label:a,color:i},{label:n,color:i}]}):(0,j.jsx)(B.A,{color:i,children:n})]})}},{title:n("agent.Architecture"),key:"architecture",dataIndex:"architecture"},{title:n("agent.Starts"),key:"first_contact",dataIndex:"first_contact",render:e=>(0,j.jsxs)(b.OO,{direction:"column",children:[(0,j.jsx)(h.A.Text,{children:W()(e).format("ll LTS")}),(0,j.jsx)(L.A,{callback:()=>K.utils.elapsedTime(e,Date.now()),delay:1e3,render:e=>(0,j.jsx)(C.A,{values:[{label:n("agent.Running")},{label:e}]})})]}),sorter:!0},{title:n("agent.Allocation"),key:"allocation",render:(e,l)=>{const n=JSON.parse((null===l||void 0===l?void 0:l.occupied_slots)||"{}"),i=JSON.parse((null===l||void 0===l?void 0:l.available_slots)||"{}");return(0,j.jsx)(b.OO,{direction:"column",gap:"xxs",children:k().map(i,((e,l)=>{if("cpu"===l){var r;const e=k().toFinite(k().toNumber(n.cpu)/k().toNumber(i.cpu)*100);return(0,j.jsxs)(b.OO,{justify:"between",style:{minWidth:220},children:[(0,j.jsxs)(b.OO,{gap:"xxs",children:[(0,j.jsx)(N.s,{type:l},l),(0,j.jsxs)(h.A.Text,{children:[(0,t.Z1)(n.cpu||0,0),"\xa0/\xa0",(0,t.Z1)(i.cpu||0,0)]}),(0,j.jsx)(h.A.Text,{type:"secondary",style:{fontSize:a.sizeXS},children:null===m||void 0===m||null===(r=m.cpu)||void 0===r?void 0:r.display_unit})]}),(0,j.jsx)(p.A,{percent:e,strokeColor:e>80?a.colorError:a.colorSuccess,width:120,valueLabel:(0,t.Z1)(e,1)+" %"})]},l)}if("mem"===l){var o,s,u,d;const e=k().toFinite(k().toNumber(n.mem)/k().toNumber(i.mem)*100);return(0,j.jsxs)(b.OO,{justify:"between",style:{minWidth:220},children:[(0,j.jsxs)(b.OO,{gap:"xxs",children:[(0,j.jsx)(N.s,{type:"mem"}),(0,j.jsxs)(h.A.Text,{children:[null!==(o=null===(s=(0,t.mv)(n.mem,"g",0))||void 0===s?void 0:s.numberFixed)&&void 0!==o?o:0,"\xa0/\xa0",null!==(u=null===(d=(0,t.mv)(i.mem,"g",0))||void 0===d?void 0:d.numberFixed)&&void 0!==u?u:0]}),(0,j.jsx)(h.A.Text,{type:"secondary",style:{fontSize:a.sizeXS},children:"GiB"})]}),(0,j.jsx)(p.A,{percent:e,strokeColor:e>80?a.colorError:a.colorSuccess,width:120,valueLabel:(0,t.Z1)(e,1)+" %"})]},"mem")}if(i[l]){var c;const e=k().toFinite(k().toNumber(n[l])/k().toNumber(i[l])*100);return(0,j.jsxs)(b.OO,{justify:"between",style:{minWidth:220},gap:"xxs",children:[(0,j.jsxs)(b.OO,{gap:"xxs",children:[(0,j.jsx)(N.s,{type:l},l),(0,j.jsxs)(h.A.Text,{children:[(0,t.Z1)(n[l]||0,2),"\xa0/\xa0",(0,t.Z1)(i[l],2)]}),(0,j.jsx)(h.A.Text,{type:"secondary",style:{fontSize:a.sizeXS},children:null===m||void 0===m||null===(c=m[l])||void 0===c?void 0:c.display_unit})]}),(0,j.jsx)(p.A,{percent:e,strokeColor:e>80?a.colorError:a.colorSuccess,width:120,valueLabel:(0,t.Z1)(e,1)+" %"})]},l)}}))})}},{title:n("agent.Utilization"),key:"live_stat",dataIndex:"live_stat",render:(e,l)=>{const a=JSON.parse(e||"{}"),i=JSON.parse((null===l||void 0===l?void 0:l.available_slots)||"{}");if("ALIVE"===(null===l||void 0===l?void 0:l.status)){var r,o,s,u,d;const e={cpu_util:{capacity:0,current:0,ratio:0},mem_util:{capacity:0,current:0,ratio:0}};if(a&&a.node&&a.devices){const l=k().keys(a.devices.cpu_util).length;e.cpu_util.capacity=k().toFinite(a.node.cpu_util.capacity),e.cpu_util.current=k().toFinite(a.node.cpu_util.current),e.cpu_util.ratio=e.cpu_util.current/e.cpu_util.capacity/l||0,e.mem_util.capacity=k().toInteger(i.mem||a.node.mem.capacity),e.mem_util.current=k().toInteger(a.node.mem.current),e.mem_util.ratio=e.mem_util.current/e.mem_util.capacity||0}k().forEach(k().keys(null===a||void 0===a?void 0:a.node),(l=>{["cpu_util","mem","disk","net_rx","net_tx"].includes(l)||(k().includes(l,"_util")?e[l]={capacity:k().toFinite(a.node[l].capacity)||100,current:k().toFinite(a.node[l].current),ratio:k().toFinite(a.node[l].current)/100||0}:l.includes("_mem")&&(e[l]={capacity:k().toFinite(a.node[l].capacity),current:k().toFinite(a.node[l].current),ratio:k().toFinite(a.node[l].pct)/100||0}))}));const l=(null===(r=(0,t.Ho)(k().toString(e.mem_util.capacity),"auto"))||void 0===r?void 0:r.unit)||"g";return(0,j.jsxs)(b.OO,{direction:"column",gap:"xxs",children:[(0,j.jsxs)(b.OO,{justify:"between",style:{minWidth:200,width:"100%"},children:[(0,j.jsx)(h.A.Text,{children:null===m||void 0===m||null===(o=m.cpu)||void 0===o?void 0:o.human_readable_name}),(0,j.jsx)(p.A,{percent:100*e.cpu_util.ratio,width:120,valueLabel:(0,t.Z1)(k().toFinite(100*e.cpu_util.ratio),1)+" %"})]}),(0,j.jsxs)(b.OO,{justify:"between",style:{minWidth:200,width:"100%"},children:[(0,j.jsx)(h.A.Text,{children:null===m||void 0===m||null===(s=m.mem)||void 0===s?void 0:s.human_readable_name}),(0,j.jsx)(p.A,{percent:100*e.mem_util.ratio,width:120,valueLabel:(null===(u=(0,t.mv)(k().toString(e.mem_util.current),l))||void 0===u?void 0:u.numberFixed)+" / "+(null===(d=(0,t.mv)(k().toString(e.mem_util.capacity),l))||void 0===d?void 0:d.displayValue)})]}),k().map(k().keys(null===a||void 0===a?void 0:a.node),(l=>{if(!["cpu_util","mem"].includes(l)){if(k().includes(l,"_util")){var n;const a=k().split(l,"_")[0]+".device";return(0,j.jsxs)(b.OO,{justify:"between",style:{minWidth:200,width:"100%"},gap:"xxs",children:[(0,j.jsxs)(h.A.Text,{children:[null===m||void 0===m||null===(n=m[a])||void 0===n?void 0:n.human_readable_name,"(util)"]}),(0,j.jsx)(p.A,{width:120,percent:e[l].current/e[l].capacity*100||0,valueLabel:k().toFinite((0,t.Z1)(100*e[l].ratio,1))+" %"})]},l)}if(k().includes(l,"_mem")){var a,i,r,o;const n=k().split(l,"_")[0]+".device",s=(null===(a=(0,t.Ho)(k().toString(e[l].capacity),"auto"))||void 0===a?void 0:a.unit)||"g";return(0,j.jsxs)(b.OO,{justify:"between",style:{minWidth:200,width:"100%"},gap:"xxs",children:[(0,j.jsxs)(h.A.Text,{children:[null===m||void 0===m||null===(i=m[n])||void 0===i?void 0:i.human_readable_name,"(mem)"]}),(0,j.jsx)(p.A,{width:120,percent:e[l].current/e[l].capacity*100||0,valueLabel:(null===(r=(0,t.mv)(k().toString(e[l].current),s))||void 0===r?void 0:r.numberFixed)+" / "+(null===(o=(0,t.mv)(k().toString(e[l].capacity),s))||void 0===o?void 0:o.displayValue)})]},l)}}}))]})}return n("agent.NoAvailableLiveStat")}},{title:n("agent.DiskPerc"),key:"disk_perc",render:(e,l)=>{var n,i,r,o,s,u;const d=null!==(n=null===(i=JSON.parse((null===l||void 0===l?void 0:l.live_stat)||"{}"))||void 0===i||null===(r=i.node)||void 0===r?void 0:r.disk)&&void 0!==n?n:{},c=k().toFinite(d.pct)||0,m=k().toFinite((0,t.Z1)(c,2)),g=m>80?a.colorError:a.colorSuccess,v=(null===(o=(0,t.Ho)(null===d||void 0===d?void 0:d.capacity,"auto",{base:1e3}))||void 0===o?void 0:o.unit)||"g";return(0,j.jsxs)(b.OO,{direction:"column",children:[(0,j.jsx)(p.A,{valueLabel:(0,t.Z1)(m,1)+" %",percent:m,strokeColor:g,width:120}),(0,j.jsxs)(h.A.Text,{style:{fontSize:a.fontSizeSM},children:[null===(s=(0,t.Gh)(null===d||void 0===d?void 0:d.current,v))||void 0===s?void 0:s.numberFixed,"\xa0/\xa0",null===(u=(0,t.Gh)(null===d||void 0===d?void 0:d.capacity,v))||void 0===u?void 0:u.displayValue]})]})}},{title:n("general.ResourceGroup"),key:"resource_group",dataIndex:"scaling_group",sorter:!0},{title:n("agent.Status"),key:"status",dataIndex:"status",render:(e,l)=>{var n,a,i;const t=JSON.parse((null===l||void 0===l?void 0:l.compute_plugins)||"{}"),r=JSON.parse((null===l||void 0===l?void 0:l.available_slots)||"{}");return(0,j.jsxs)(b.OO,{direction:"column",gap:"xxs",align:"start",children:[(0,j.jsx)(C.A,{values:[{label:"Agent"},{label:(null===l||void 0===l?void 0:l.version)||"",color:"ALIVE"===e?"green":"TERMINATED"===e?"red":"blue"}]}),null!==t&&void 0!==t&&t.cuda?(0,j.jsxs)(j.Fragment,{children:[null!==t&&void 0!==t&&null!==(n=t.cuda)&&void 0!==n&&n.cuda_version?(0,j.jsx)(C.A,{values:[{label:"CUDA"},{label:null===t||void 0===t||null===(a=t.cuda)||void 0===a?void 0:a.cuda_version,color:"green"}]}):(0,j.jsx)(B.A,{color:"green",children:"CUDA Disabled"}),(0,j.jsx)(C.A,{values:[{label:"CUDA Plugin"},{label:null===t||void 0===t||null===(i=t.cuda)||void 0===i?void 0:i.version,color:"blue"}]}),k().includes(k().keys(r),"cuda.shares")?(0,j.jsx)(B.A,{color:"blue",children:"Fractional GPU\u2122"}):null]}):null]})}},{title:n("agent.Schedulable"),key:"schedulable",dataIndex:"schedulable",render:e=>(0,j.jsx)(b.OO,{justify:"center",children:!0===e?(0,j.jsx)(z.A,{style:{color:a.colorSuccess,fontSize:a.fontSizeXL}}):(0,j.jsx)($.A,{style:{color:a.colorTextDisabled,fontSize:a.fontSizeXL}})}),sorter:!0},{title:n("general.Control"),key:"control",fixed:"right",render:(e,l)=>(0,j.jsxs)(b.OO,{children:[(0,j.jsx)(U.Ay,{style:{color:a.colorSuccess},type:"text",icon:(0,j.jsx)(q.A,{}),onClick:()=>y(l)}),(0,j.jsx)(U.Ay,{style:{color:a.colorInfo},type:"text",icon:(0,j.jsx)(P.A,{}),onClick:()=>f(l)})]})}],[te,re]=(0,u.a)("AgentList");return(0,j.jsxs)(b.OO,{direction:"column",align:"stretch",gap:"sm",children:[(0,j.jsxs)(b.OO,{justify:"between",align:"start",wrap:"wrap",children:[(0,j.jsxs)(b.OO,{direction:"row",gap:"sm",align:"start",style:{flex:1},wrap:"wrap",children:[(0,j.jsx)(R.A,{options:[{label:n("agent.Connected"),value:"ALIVE"},{label:n("agent.Terminated"),value:"TERMINATED"}],value:T.status,onChange:e=>{w({status:e.target.value},"replaceIn")}}),(0,j.jsx)(b.Af,{filterProperties:[{key:"id",propertyLabel:"ID",type:"string"},{key:"addr",propertyLabel:n("agent.Endpoint"),type:"string"},{key:"schedulable",propertyLabel:n("agent.Schedulable"),type:"boolean",options:[{label:n("general.Enabled"),value:"true"},{label:n("general.Disabled"),value:"false"}]}],value:T.filter,onChange:e=>{w({filter:e},"replaceIn")}})]}),(0,j.jsx)(b.OO,{gap:"xs",children:(0,j.jsx)(Z.A,{title:n("button.Refresh"),children:(0,j.jsx)(U.Ay,{loading:ne!==H,onClick:()=>Y(),icon:(0,j.jsx)(E.A,{})})})})]}),(0,j.jsx)(b.zx,{size:"small",scroll:{x:"max-content"},rowKey:"id",dataSource:(0,b.f)(null===ae||void 0===ae?void 0:ae.items),showSorterTooltip:!1,columns:k().filter(ie,(e=>!k().includes(te,k().toString(null===e||void 0===e?void 0:e.key)))),resizable:!0,pagination:{pageSize:M.pageSize,total:null===ae||void 0===ae?void 0:ae.total_count,current:M.current,extraContent:(0,j.jsx)(U.Ay,{type:"text",icon:(0,j.jsx)(P.A,{}),onClick:()=>{G()}}),onChange(e,l){k().isNumber(e)&&k().isNumber(l)&&J({current:e,pageSize:l})}},onChangeOrder:e=>{w({order:e},"replaceIn")},loading:le!==ee||ne!==H,...l}),(0,j.jsx)(F,{agentDetailModalFrgmt:g,open:!!g,onRequestClose:()=>y(null)}),(0,j.jsx)(I,{agentSettingModalFrgmt:x,open:!!x,onRequestClose:e=>{e&&Y(),f(null)}}),(0,j.jsx)(V.A,{open:O,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&re(k().difference(ie.map((e=>k().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),G()},columns:ie,hiddenColumnKeys:te})]})},Y=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],l=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteScalingGroup",kind:"LinkedField",name:"delete_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupListDeleteMutation",selections:l,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupListDeleteMutation",selections:l},params:{cacheID:"fdcd5026b9668171b8d52998b2c16c6d",id:null,metadata:{},name:"ResourceGroupListDeleteMutation",operationKind:"mutation",text:"mutation ResourceGroupListDeleteMutation(\n  $name: String!\n) {\n  delete_scaling_group(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();Y.hash="40de35d5afd64c8d906e4970b10b722d";const ee=Y,le=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},l={defaultValue:null,kind:"LocalArgument",name:"name"},n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"ModifyScalingGroup",kind:"LinkedField",name:"modify_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,l],kind:"Fragment",metadata:null,name:"ResourceGroupListUpdateMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,e],kind:"Operation",name:"ResourceGroupListUpdateMutation",selections:n},params:{cacheID:"f2bb803220bb606aab5576ae85eed3c3",id:null,metadata:{},name:"ResourceGroupListUpdateMutation",operationKind:"mutation",text:"mutation ResourceGroupListUpdateMutation(\n  $name: String!\n  $input: ModifyScalingGroupInput!\n) {\n  modify_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();le.hash="ac249dff8b2c9b629edb2ca40843c134";const ne=le,ae=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"is_active"}],l=[{kind:"Variable",name:"is_active",variableName:"is_active"}],n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"driver",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupListQuery",selections:[{alias:null,args:l,concreteType:"ScalingGroup",kind:"LinkedField",name:"scaling_groups",plural:!0,selections:[n,a,i,t,r,o,s,{args:null,kind:"FragmentSpread",name:"ResourceGroupInfoModalFragment"},{args:null,kind:"FragmentSpread",name:"ResourceGroupSettingModalFragment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupListQuery",selections:[{alias:null,args:l,concreteType:"ScalingGroup",kind:"LinkedField",name:"scaling_groups",plural:!0,selections:[n,a,i,t,r,o,s,{alias:null,args:null,kind:"ScalarField",name:"driver_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null}],storageKey:null}]},params:{cacheID:"a388cfe6011c626e8a46a241d373f0cf",id:null,metadata:{},name:"ResourceGroupListQuery",operationKind:"query",text:"query ResourceGroupListQuery(\n  $is_active: Boolean\n) {\n  scaling_groups(is_active: $is_active) {\n    name\n    description\n    is_active\n    is_public\n    driver\n    scheduler\n    wsproxy_addr\n    ...ResourceGroupInfoModalFragment\n    ...ResourceGroupSettingModalFragment\n  }\n}\n\nfragment ResourceGroupInfoModalFragment on ScalingGroup {\n  name\n  description\n  is_active\n  is_public\n  driver\n  driver_opts\n  scheduler\n  scheduler_opts\n  wsproxy_addr\n}\n\nfragment ResourceGroupSettingModalFragment on ScalingGroup {\n  name\n  description\n  is_active\n  is_public\n  wsproxy_addr\n  scheduler\n  scheduler_opts\n}\n"}}}();ae.hash="73ad50968ae420ea2cd912e9fa046cf8";const ie=ae;var te=n(21998),re=n(84970);const oe={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ResourceGroupInfoModalFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"driver",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"driver_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null}],type:"ScalingGroup",abstractKey:null,hash:"32b9c1a86a13b37cf5abb7e88f1cd969"},se=oe;var ue=n(68049),de=n(2264),ce=n(32677);const me=e=>{var l,n;let{resourceGroupFrgmt:a=null,onRequestClose:i,...t}=e;const{t:r}=(0,A.Bd)(),{token:o}=v.A.useToken(),s=(0,S.useFragment)(se,a),u=(0,_.useMemo)((()=>JSON.parse((null===s||void 0===s?void 0:s.driver_opts)||"{}")),[null===s||void 0===s?void 0:s.driver_opts]),d=(0,_.useMemo)((()=>JSON.parse((null===s||void 0===s?void 0:s.scheduler_opts)||"{}")),[null===s||void 0===s?void 0:s.scheduler_opts]);return(0,j.jsxs)(g.A,{title:r("resourceGroup.ResourceGroupDetail"),onCancel:i,footer:null,centered:!0,...t,children:[(0,j.jsxs)(ce.A,{column:1,size:"small",title:r("resourceGroup.Information"),labelStyle:{width:"50%"},children:[(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.Name"),children:null===s||void 0===s?void 0:s.name}),(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.Description"),children:(null===s||void 0===s?void 0:s.description)||"-"}),(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.Active"),children:null!==s&&void 0!==s&&s.is_active?(0,j.jsx)(ue.A,{style:{color:o.colorSuccess}}):(0,j.jsx)(de.A,{style:{color:o.colorTextSecondary}})}),(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.Public"),children:null!==s&&void 0!==s&&s.is_public?(0,j.jsx)(ue.A,{style:{color:o.colorSuccess}}):(0,j.jsx)(de.A,{style:{color:o.colorTextSecondary}})}),(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.Driver"),children:null===s||void 0===s?void 0:s.driver}),(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.Scheduler"),children:k().toUpper(null!==(l=null===s||void 0===s?void 0:s.scheduler)&&void 0!==l?l:"")}),(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.WsproxyAddress"),children:(null===s||void 0===s?void 0:s.wsproxy_addr)||"-"})]}),(0,j.jsx)("br",{}),(0,j.jsxs)(ce.A,{column:1,size:"small",title:r("resourceGroup.SchedulerOptions"),labelStyle:{width:"50%"},children:[(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.AllowedSessionTypes"),children:(0,j.jsx)(b.OO,{wrap:"wrap",direction:"row",gap:"xs",style:{width:"100%"},children:k().map(null===d||void 0===d?void 0:d.allowed_session_types,(e=>(0,j.jsx)(B.A,{style:{margin:0},children:k().startCase(e)},e)))})}),(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.PendingTimeout"),children:k().isNil(null===d||void 0===d?void 0:d.pending_timeout)?"-":(0,j.jsxs)(b.OO,{gap:"xxs",align:"end",children:[(0,j.jsx)(h.A.Text,{children:`${d.pending_timeout}\n                ${r("resourceGroup.TimeoutSeconds")}`}),null!==d&&void 0!==d&&d.pending_timeout?null:(0,j.jsx)(h.A.Text,{style:{color:o.colorTextSecondary,fontSize:o.fontSizeSM},children:`(${r("general.Disabled")})`})]})}),(0,j.jsx)(ce.A.Item,{label:r("resourceGroup.RetriesToSkipDesc"),children:null!==d&&void 0!==d&&null!==(n=d.config)&&void 0!==n&&n.num_retries_to_skip?`${d.config.num_retries_to_skip} ${r("resourceGroup.RetriesToSkip")}`:"-"})]}),k().isEmpty(u)?null:(0,j.jsx)(ce.A,{column:1,size:"small",title:r("resourceGroup.DriverOptions"),labelStyle:{width:"50%"},children:k().map(u,((e,l)=>(0,j.jsx)(ce.A.Item,{label:k().startCase(l),children:k().isArray(e)?(0,j.jsx)(b.OO,{direction:"column",children:k().map(e,(e=>(0,j.jsx)(B.A,{children:e},e)))}):e},l)))})]})},ge=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"domain"},{defaultValue:null,kind:"LocalArgument",name:"scaling_group"}],l=[{alias:null,args:[{kind:"Variable",name:"domain",variableName:"domain"},{kind:"Variable",name:"scaling_group",variableName:"scaling_group"}],concreteType:"AssociateScalingGroupWithDomain",kind:"LinkedField",name:"associate_scaling_group_with_domain",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalAssociateDomainMutation",selections:l,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourceGroupSettingModalAssociateDomainMutation",selections:l},params:{cacheID:"72535173512804feacec89a7cabb4ac3",id:null,metadata:{},name:"ResourceGroupSettingModalAssociateDomainMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalAssociateDomainMutation(\n  $domain: String!\n  $scaling_group: String!\n) {\n  associate_scaling_group_with_domain(domain: $domain, scaling_group: $scaling_group) {\n    ok\n    msg\n  }\n}\n"}}}();ge.hash="a1253f2e15bdfc1e59cdf2b26bc0a273";const pe=ge,ve=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},l={defaultValue:null,kind:"LocalArgument",name:"name"},n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"CreateScalingGroup",kind:"LinkedField",name:"create_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,l],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalCreateMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,e],kind:"Operation",name:"ResourceGroupSettingModalCreateMutation",selections:n},params:{cacheID:"6d6716d2dedf664e623006a2315b3c66",id:null,metadata:{},name:"ResourceGroupSettingModalCreateMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalCreateMutation(\n  $name: String!\n  $input: CreateScalingGroupInput!\n) {\n  create_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();ve.hash="8642e40e794eaf1f4b0a84e05104d75c";const ye=ve,xe=function(){var e={defaultValue:null,kind:"LocalArgument",name:"input"},l={defaultValue:null,kind:"LocalArgument",name:"name"},n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"input"}],concreteType:"ModifyScalingGroup",kind:"LinkedField",name:"modify_scaling_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,l],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalUpdateMutation",selections:n,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,e],kind:"Operation",name:"ResourceGroupSettingModalUpdateMutation",selections:n},params:{cacheID:"2352dc03b1acef2df9cf7c5f686665a3",id:null,metadata:{},name:"ResourceGroupSettingModalUpdateMutation",operationKind:"mutation",text:"mutation ResourceGroupSettingModalUpdateMutation(\n  $name: String!\n  $input: ModifyScalingGroupInput!\n) {\n  modify_scaling_group(name: $name, props: $input) {\n    ok\n    msg\n  }\n}\n"}}}();xe.hash="510c22b428b17c9e16efd58a5f908c3d";const he=xe,be={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ResourceGroupSettingModalFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wsproxy_addr",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scheduler_opts",storageKey:null}],type:"ScalingGroup",abstractKey:null,hash:"738d94e03577df0f1298c085d29dcb12"},fe=be;var ke=n(23370),_e=n(46936),Ae=n(9034),Se=n(22065),je=n(89798),Fe=n(4107);const Oe=e=>{var l,n,a,i,o,s;let{resourceGroupFrgmt:u,onRequestClose:d,...c}=e;const{t:m}=(0,A.Bd)(),{token:p}=v.A.useToken(),{message:h}=w.A.useApp(),f=(0,r.eZ)(),F=(0,_.useRef)(null),O=(0,S.useFragment)(fe,u),[G,K]=(0,S.useMutation)(he),[T,I]=(0,S.useMutation)(ye),[L,R]=(0,S.useMutation)(pe),C=(0,_.useMemo)((()=>JSON.parse((null===O||void 0===O?void 0:O.scheduler_opts)||"{}")),[null===O||void 0===O?void 0:O.scheduler_opts]),N=(0,b.N7)({name:null===O||void 0===O?void 0:O.name,description:null===O||void 0===O?void 0:O.description,domain:f,scheduler:null!==(l=null===O||void 0===O?void 0:O.scheduler)&&void 0!==l?l:"fifo",allowedSessionTypes:null!==(n=null===C||void 0===C?void 0:C.allowed_session_types)&&void 0!==n?n:["batch","interactive"],active:null===(a=null===O||void 0===O?void 0:O.is_active)||void 0===a||a,public:null===(i=null===O||void 0===O?void 0:O.is_public)||void 0===i||i,pendingTimeout:null!==C&&void 0!==C&&C.pending_timeout?k().toNumber(null===C||void 0===C?void 0:C.pending_timeout):null,retriesToSkip:null!==C&&void 0!==C&&null!==(o=C.config)&&void 0!==o&&o.num_retries_to_skip?k().toNumber(null===C||void 0===C||null===(s=C.config)||void 0===s?void 0:s.num_retries_to_skip):null,wsProxyAddress:null===O||void 0===O?void 0:O.wsproxy_addr});return(0,j.jsx)(g.A,{destroyOnClose:!0,title:m(O?"resourceGroup.ModifyResourceGroup":"resourceGroup.CreateResourceGroup"),onCancel:()=>{null===d||void 0===d||d(!1)},okText:m(O?"button.Update":"button.Create"),okButtonProps:{loading:I||R||K},onOk:()=>{var e;null===(e=F.current)||void 0===e||e.validateFields().then((e=>{var l;const n={driver:"static",scheduler:e.scheduler,description:null!==(l=e.description)&&void 0!==l?l:null,driver_opts:"{}",scheduler_opts:JSON.stringify({allowed_session_types:e.allowedSessionTypes,...e.pendingTimeout&&{pending_timeout:e.pendingTimeout},...e.retriesToSkip&&{config:{num_retries_to_skip:e.retriesToSkip}}}),is_public:e.public,is_active:e.active,wsproxy_addr:e.wsProxyAddress};O?G({variables:{name:O.name,input:n},onCompleted:(e,l)=>{let{modify_scaling_group:n}=e;if(null!==n&&void 0!==n&&n.ok)if(l&&l.length>0){const e=k().map(l,(e=>e.message));for(const l of e)h.error(l)}else h.success(m("resourceGroup.ResourceGroupModified")),null===d||void 0===d||d(!0);else h.error(null===n||void 0===n?void 0:n.msg)},onError:e=>{h.error(e.message)}}):T({variables:{name:e.name,input:n},onCompleted:(l,n)=>{let{create_scaling_group:a}=l;if(n&&n.length>0){const e=k().map(n,(e=>e.message));for(const l of e)h.error(l)}else null!==a&&void 0!==a&&a.ok?L({variables:{domain:e.domain,scaling_group:e.name},onCompleted:(e,l)=>{let{associate_scaling_group_with_domain:n}=e;if(null!==n&&void 0!==n&&n.ok)if(l&&l.length>0){const e=k().map(l,(e=>e.message));for(const l of e)h.error(l)}else h.success(m("resourceGroup.ResourceGroupCreated")),null===d||void 0===d||d(!0);else h.error(null===n||void 0===n?void 0:n.msg)},onError:e=>{h.error(e.message)}}):h.error(null===a||void 0===a?void 0:a.msg)},onError:e=>{h.error(e.message)}})})).catch((()=>{}))},...c,children:(0,j.jsx)(_.Suspense,{fallback:(0,j.jsx)(Ae.A,{active:!0}),children:(0,j.jsxs)(D.A,{ref:F,initialValues:N,layout:"vertical",children:[(0,j.jsx)(D.A.Item,{label:m("resourceGroup.Name"),name:"name",rules:[{required:!0,message:m("general.ValueRequired",{name:m("resourceGroup.Name")})}],children:(0,j.jsx)(Se.A,{disabled:!!O})}),O?null:(0,j.jsx)(D.A.Item,{label:m("resourceGroup.Domain"),name:"domain",rules:[{required:!0,message:m("general.ValueRequired",{name:m("resourceGroup.Domain")})}],children:(0,j.jsx)(ke.A,{})}),(0,j.jsx)(D.A.Item,{label:m("resourceGroup.Description"),name:"description",children:(0,j.jsx)(Se.A.TextArea,{})}),(0,j.jsx)(D.A.Item,{label:m("resourceGroup.AllowedSessionTypes"),name:"allowedSessionTypes",rules:[{required:!0,message:m("general.ValueRequired",{name:m("resourceGroup.AllowedSessionTypes")})}],children:(0,j.jsx)(je.A,{mode:"multiple",options:[{label:"Batch",value:"batch"},{label:"Interactive",value:"interactive"},{label:"Inference",value:"inference"}]})}),(0,j.jsx)(D.A.Item,{label:m("resourceGroup.WsproxyAddress"),name:"wsProxyAddress",rules:[{type:"url",message:m("error.InvalidUrl")}],children:(0,j.jsx)(Se.A,{placeholder:"http://localhost:10200"})}),(0,j.jsxs)(y.A,{children:[(0,j.jsx)(x.A,{span:12,children:(0,j.jsx)(D.A.Item,{layout:"horizontal",label:m("resourceGroup.Active"),name:"active",children:(0,j.jsx)(M.A,{})})}),(0,j.jsx)(x.A,{span:12,children:(0,j.jsx)(D.A.Item,{layout:"horizontal",label:m("resourceGroup.Public"),name:"public",children:(0,j.jsx)(M.A,{})})})]}),(0,j.jsx)(D.A.Item,{label:m("resourceGroup.Scheduler"),name:"scheduler",rules:[{required:!0,message:m("general.ValueRequired",{name:m("resourceGroup.Scheduler")})}],children:(0,j.jsx)(je.A,{options:[{label:"FIFO",value:"fifo"},{label:"LIFO",value:"lifo"},{label:"DRF",value:"drf"}]})}),(0,j.jsx)(D.A.Item,{label:m("resourceGroup.SchedulerOptions"),children:(0,j.jsx)(b.Zu,{styles:{body:{paddingBottom:0}},children:(0,j.jsxs)(y.A,{gutter:[24,24],children:[(0,j.jsx)(x.A,{span:12,style:{alignSelf:"end"},children:(0,j.jsx)(D.A.Item,{labelCol:{span:24},label:(0,j.jsxs)(b.OO,{gap:"xxs",children:[m("resourceGroup.PendingTimeout"),(0,j.jsx)(Z.A,{title:(0,t.y1)(m("resourceGroup.PendingTimeoutDesc")),children:(0,j.jsx)(_e.A,{style:{color:p.colorTextSecondary}})})]}),name:"pendingTimeout",children:(0,j.jsx)(Fe.A,{style:{width:"100%"},addonAfter:m("resourceGroup.TimeoutSeconds"),min:0})})}),(0,j.jsx)(x.A,{span:12,children:(0,j.jsx)(D.A.Item,{label:(0,j.jsx)(b.OO,{style:{whiteSpace:"pre"},children:m("resourceGroup.RetriesToSkipDesc")}),name:"retriesToSkip",children:(0,j.jsx)(Fe.A,{style:{width:"100%"},addonAfter:m("resourceGroup.RetriesToSkip"),min:0})})})]})})})]})})})};var Ge=n(66668),Ke=n(59343),Te=n(75602),we=n(84321),De=n(92498),Me=n(26433);const Ie=()=>{const{t:e}=(0,A.Bd)(),{token:l}=v.A.useToken(),{message:n}=w.A.useApp(),[a,i]=(0,_.useState)("active"),[t,{toggle:o}]=(0,Q.A)(!1),[s,{toggle:u}]=(0,Q.A)(!1),[d,c]=(0,_.useState)(),[m,g]=(0,_.useState)(),[p,y]=(0,r.Tw)("first"),[x,f]=(0,_.useTransition)(),[F,O]=(0,_.useTransition)(),{scaling_groups:G}=(0,S.useLazyLoadQuery)(ie,{is_active:"active"===a},{fetchPolicy:"store-and-network",fetchKey:p}),[K,T]=(0,S.useMutation)(ne),[D,M]=(0,S.useMutation)(ee),I=(0,b.YM)([{key:"name",title:e("resourceGroup.Name"),dataIndex:"name"},{key:"description",title:e("resourceGroup.Description"),dataIndex:"description",render:e=>e||"-"},{key:"is_public",title:e("resourceGroup.Public"),dataIndex:"is_public",render:e=>e?(0,j.jsx)(ue.A,{style:{color:l.colorSuccess}}):(0,j.jsx)(de.A,{style:{color:l.colorTextSecondary}})},{key:"driver",title:e("resourceGroup.Driver"),dataIndex:"driver"},{key:"scheduler",title:e("resourceGroup.Scheduler"),dataIndex:"scheduler",render:e=>k().toUpper(e)},{key:"wsproxy_addr",title:e("resourceGroup.WsproxyAddress"),dataIndex:"wsproxy_addr",render:e=>e||"-"},{key:"controls",title:e("general.Control"),fixed:"right",render:(a,i)=>(0,j.jsxs)(b.OO,{children:[(0,j.jsx)(U.Ay,{type:"text",icon:(0,j.jsx)(q.A,{}),style:{color:l.colorSuccess},onClick:()=>{c(i),u()}}),(0,j.jsx)(U.Ay,{type:"text",icon:(0,j.jsx)(P.A,{}),style:{color:l.colorInfo},onClick:()=>{c(i),o()}}),(0,j.jsx)(Z.A,{title:i.is_active?e("resourceGroup.Deactivate"):e("resourceGroup.Activate"),children:(0,j.jsx)(Te.A,{title:i.is_active?e("resourceGroup.DeactivateResourceGroup"):e("resourceGroup.ActivateResourceGroup"),placement:"left",okType:i.is_active?"danger":"primary",okText:i.is_active?e("resourceGroup.Deactivate"):e("resourceGroup.Activate"),description:null===i||void 0===i?void 0:i.name,onConfirm:()=>{var l;K({variables:{name:null!==(l=i.name)&&void 0!==l?l:"",input:{is_active:!i.is_active}},onCompleted:(l,i)=>{let{modify_scaling_group:t}=l;if(null!==t&&void 0!==t&&t.ok)if(i&&i.length>0){const e=a.map(i,(e=>e.message));for(const l of e)n.error(l)}else n.success(e("resourceGroup.ResourceGroupModified")),O((()=>{y()}));else n.error(null===t||void 0===t?void 0:t.msg)},onError:e=>{n.error(e.message)}})},children:(0,j.jsx)(U.Ay,{type:"text",danger:!!i.is_active,icon:i.is_active?(0,j.jsx)(De.A,{}):(0,j.jsx)(Me.A,{}),loading:T})})}),(0,j.jsx)(Z.A,{title:e("button.Delete"),children:(0,j.jsx)(U.Ay,{type:"text",icon:(0,j.jsx)(Ge.A,{style:{color:l.colorError}}),onClick:()=>{g((null===i||void 0===i?void 0:i.name)||"")}})})]})}]);return(0,j.jsxs)(b.OO,{direction:"column",align:"stretch",gap:"sm",children:[(0,j.jsxs)(b.OO,{justify:"between",children:[(0,j.jsx)(R.A,{value:a,onChange:e=>{f((()=>{i(e.target.value)}))},optionType:"button",options:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}]}),(0,j.jsxs)(b.OO,{gap:"sm",children:[(0,j.jsx)(re.A,{loading:F,value:p,onChange:()=>{O((()=>{y()}))}}),(0,j.jsx)(U.Ay,{type:"primary",icon:(0,j.jsx)(Ke.A,{}),onClick:()=>o(),children:e("button.Create")})]})]}),(0,j.jsx)(b.zx,{rowKey:"name",resizable:!0,size:"small",scroll:{x:"max-content"},columns:I,dataSource:(0,b.f)(G),loading:x}),(0,j.jsx)(te.A,{open:!!m,title:e("resourceGroup.DeleteResourceGroup"),content:(0,j.jsxs)(b.OO,{direction:"column",gap:"md",align:"stretch",style:{marginBottom:l.marginXS,width:"100%"},children:[(0,j.jsx)(we.A,{type:"warning",message:e("dialog.warning.DeleteForeverDesc"),style:{width:"100%"}}),(0,j.jsxs)(b.OO,{children:[(0,j.jsx)(h.A.Text,{style:{marginRight:l.marginXXS},children:e("resourceGroup.TypeResourceGroupNameToDelete")}),"(",(0,j.jsx)(h.A.Text,{code:!0,children:m}),")"]})]}),confirmText:null!==m&&void 0!==m?m:"",onOk:()=>{D({variables:{name:null!==m&&void 0!==m?m:""},onCompleted:(l,a)=>{let{delete_scaling_group:i}=l;if(null!==i&&void 0!==i&&i.ok)if(a&&a.length>0){const e=k().map(a,(e=>e.message));for(const l of e)n.error(l)}else n.success(e("resourceGroup.ResourceGroupDeleted")),g(void 0),O((()=>{y()}));else n.error(null===i||void 0===i?void 0:i.msg)},onError:e=>{n.error(e.message)}})},okButtonProps:{loading:M},onCancel:()=>{g(void 0)}}),(0,j.jsx)(me,{open:s&&!!d,resourceGroupFrgmt:d,onRequestClose:()=>{u(),c(void 0)}}),(0,j.jsx)(Oe,{open:t,resourceGroupFrgmt:d,onRequestClose:e=>{o(),c(void 0),e&&O((()=>{y()}))}})]})},Le=function(){var e={defaultValue:null,kind:"LocalArgument",name:"limit"},l={defaultValue:null,kind:"LocalArgument",name:"offset"},n=[{alias:null,args:[{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"}],concreteType:"StorageVolumeList",kind:"LinkedField",name:"storage_volume_list",plural:!1,selections:[{alias:null,args:null,concreteType:"StorageVolume",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backend",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fsprefix",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"performance_metric",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"usage",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,l],kind:"Fragment",metadata:null,name:"StorageProxyListQuery",selections:n,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[l,e],kind:"Operation",name:"StorageProxyListQuery",selections:n},params:{cacheID:"00f25e00fb3163b514baaa3ef857ead0",id:null,metadata:{},name:"StorageProxyListQuery",operationKind:"query",text:"query StorageProxyListQuery(\n  $offset: Int!\n  $limit: Int!\n) {\n  storage_volume_list(limit: $limit, offset: $offset) {\n    items {\n      id\n      backend\n      capabilities\n      path\n      fsprefix\n      performance_metric\n      usage\n    }\n    total_count\n  }\n}\n"}}}();Le.hash="8eea8c97cb39a266757eaa25705b6633";const Re=Le;var Ce=n(96003);const Ne=(0,n(5335).A)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),Ve={xfs:{color:"blue",icon:(0,j.jsx)(Ne,{})},ceph:{color:"lightblue",icon:(0,j.jsx)(b.qb,{})},cephfs:{color:"lightblue",icon:(0,j.jsx)(b.qb,{})},vfs:{color:"green",icon:(0,j.jsx)(Ne,{})},nfs:{color:"green",icon:(0,j.jsx)(Ne,{})},purestorage:{color:"red",icon:(0,j.jsx)(b.Zd,{})},dgx:{color:"green",icon:(0,j.jsx)(Ne,{})},spectrumscale:{color:"green",icon:(0,j.jsx)(Ne,{})},weka:{color:"purple",icon:(0,j.jsx)(Ne,{})}},ze=()=>{var e;const{token:l}=v.A.useToken(),{t:n}=(0,A.Bd)(),{baiPaginationOption:a,tablePaginationOption:i,setTablePaginationOption:o}=(0,s.aW)({current:1,pageSize:10}),[u,d]=(0,r.zu)(),c=(0,_.useMemo)((()=>({offset:a.offset,limit:a.limit})),[a.offset,a.limit]),m=(0,_.useDeferredValue)(c),g=(0,_.useDeferredValue)(u),{storage_volume_list:y}=(0,S.useLazyLoadQuery)(Re,m,{fetchPolicy:g===r.eI?"store-and-network":"network-only",fetchKey:g}),x=[{title:(0,j.jsxs)(j.Fragment,{children:["ID / ",n("agent.Endpoint")]}),key:"id",dataIndex:"id",render:(e,l)=>(0,j.jsxs)(b.OO,{direction:"column",align:"start",children:[(0,j.jsx)(h.A.Text,{children:e}),(0,j.jsx)(h.A.Text,{type:"secondary",children:l.path})]})},{title:n("agent.BackendType"),key:"backend",dataIndex:"backend",render:e=>{var l;const n=null!==(l=Ve[e])&&void 0!==l?l:{color:"gold",icon:(0,j.jsx)(Ne,{})};return(0,j.jsxs)(b.OO,{gap:"xxs",children:[n.icon,(0,j.jsx)(C.A,{values:[{label:"Backend"},{label:e,color:n.color}]})]})}},{title:n("agent.Resources"),key:"usage",dataIndex:"usage",render:(e,n)=>{var a,i,r;const o=JSON.parse(e),s=(null===o||void 0===o?void 0:o.capacity_bytes)>0?o.used_bytes/o.capacity_bytes:0,u=k().toFinite((0,t.Z1)(100*s,2)),d=u>80?l.colorError:l.colorSuccess,c=(null===(a=(0,t.Ho)(k().toString(null===o||void 0===o?void 0:o.capacity_bytes),"auto",{base:1e3}))||void 0===a?void 0:a.unit)||"g";return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(p.A,{valueLabel:(0,t.Z1)(u,1)+" %",percent:u,strokeColor:d,width:120}),(0,j.jsxs)(h.A.Text,{style:{fontSize:l.fontSizeSM},children:[o.used_bytes?null===(i=(0,t.Gh)(o.used_bytes,c))||void 0===i?void 0:i.numberFixed:"-","\xa0/\xa0",o.capacity_bytes?null===(r=(0,t.Gh)(o.capacity_bytes,c))||void 0===r?void 0:r.displayValue:"-"]})]})}},{title:n("agent.Capabilities"),key:"capabilities",dataIndex:"capabilities",width:150,render:e=>(0,j.jsx)(b.OO,{gap:"xxs",align:"start",wrap:"wrap",children:k().map(e,(e=>(0,j.jsx)(B.A,{color:"blue",style:{margin:0},children:e},e)))})},{title:n("general.Control"),key:"control",width:100,fixed:"right",render:(e,n)=>{let a;try{const e=JSON.parse(n.performance_metric||"{}");a=k().isEmpty(e)}catch(i){a=!0}return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(U.Ay,{disabled:a,style:{color:a?l.colorTextDisabled:l.colorSuccess},icon:(0,j.jsx)(q.A,{}),onClick:()=>{const e=new CustomEvent("backend-ai-selected-storage-proxy",{detail:n.id});document.dispatchEvent(e)},type:"text"}),(0,j.jsx)(Ce.A,{to:`/storage-settings/${n.id}`,children:(0,j.jsx)(U.Ay,{style:{color:l.colorInfo},icon:(0,j.jsx)(P.A,{}),type:"text"})})]})}}];return(0,_.useEffect)((()=>{if(!k().isEmpty(null===y||void 0===y?void 0:y.items)){const e=new CustomEvent("backend-ai-storage-proxy-updated",{});document.dispatchEvent(e)}}),[y]),(0,j.jsxs)(b.OO,{direction:"column",align:"stretch",gap:"sm",children:[(0,j.jsx)(b.OO,{justify:"end",wrap:"wrap",gap:"sm",children:(0,j.jsx)(re.A,{loading:g!==u||m!==c,autoUpdateDelay:15e3,value:u,onChange:()=>{d()}})}),(0,j.jsx)(b.zx,{resizable:!0,size:"small",scroll:{x:"max-content"},rowKey:"id",dataSource:(0,b.f)(null===y||void 0===y?void 0:y.items),columns:x,loading:m!==c||g!==u,pagination:{pageSize:i.pageSize,current:i.current,total:null!==(e=null===y||void 0===y?void 0:y.total_count)&&void 0!==e?e:0,onChange(e,l){k().isNumber(e)&&k().isNumber(l)&&o({pageSize:l,current:e})}}})]})},$e=(0,X.withDefault)(X.StringParam,"agents"),qe=e=>{const{t:l}=(0,A.Bd)(),[n,a]=(0,X.useQueryParam)("tab",$e,{updateType:"replace"});return(0,j.jsxs)(b.Zu,{activeTabKey:n,onTabChange:e=>a(e),tabList:[{key:"agents",tab:l("agent.Agent")},{key:"storages",tab:l("general.StorageProxies")},{key:"resourceGroup",tab:l("general.ResourceGroup")}],children:["agents"===n?(0,j.jsx)(_.Suspense,{fallback:(0,j.jsx)(Ae.A,{active:!0}),children:(0,j.jsx)(H,{})}):null,"storages"===n?(0,j.jsx)(_.Suspense,{fallback:(0,j.jsx)(Ae.A,{active:!0}),children:(0,j.jsx)(ze,{})}):null,"resourceGroup"===n?(0,j.jsx)(_.Suspense,{fallback:(0,j.jsx)(Ae.A,{active:!0}),children:(0,j.jsx)(Ie,{})}):null]})}},92498:(e,l,n)=>{n.d(l,{A:()=>a});const a=(0,n(5335).A)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},26433:(e,l,n)=>{n.d(l,{A:()=>a});const a=(0,n(5335).A)("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]])}}]);
//# sourceMappingURL=149.c8c90ce4.chunk.js.map