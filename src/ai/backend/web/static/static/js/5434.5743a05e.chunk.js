/*! For license information please see 5434.5743a05e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[5434],{67999:(e,n,o)=>{o.d(n,{A:()=>p});var l=o(72375),i=o(85730),a=o(5901),t=o(40806),r=o(47543),s=o(12221),c=o(46976),u=o.n(c),d=o(55093),m=o(79569);const p=e=>{var n;let{dynamicSteps:o=[1,2,4,8,16,32,64,128,256,512],units:c=["m","g","t","p"],disableAutoUnit:p=!1,min:y="0m",max:_="300p",roundStep:g,...v}=e;const[x,f]=(0,i.A)(v,{defaultValue:"0g"}),[k,h]=null===x||void 0===x?[null,null]:(0,l.E8)(x),j=(0,a.A)(h),P=h||j||c[0],[b,A]=(0,l.E8)(y),[S,C]=(0,l.E8)(_),M=(0,d.useRef)(null);return(0,d.useEffect)((()=>{if(M.current){const e=e=>{var n;const o=null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value;/^\d+(g|m)$/.test(o)&&f(o)},n=M.current;return null===n||void 0===n||n.addEventListener("input",e),()=>{null===n||void 0===n||n.removeEventListener("input",e)}}}),[M,k,h,f]),(0,m.jsx)(t.A,{ref:M,...v,onBlur:()=>{if(u().isNumber(g)&&g>0){var e,n,o;const l=(null===(e=g.toString().split(".")[1])||void 0===e?void 0:e.length)||0;if(isNaN(Math.round(u().toNumber((null===(n=M.current)||void 0===n?void 0:n.value)||"0")/g)*g))return;f(`${(Math.round(u().toNumber((null===(o=M.current)||void 0===o?void 0:o.value)||"0")/g)*g).toFixed(l)}${P}`)}},value:k,onChange:e=>{f(null===e||void 0===e?e:`${e}${P}`)},max:C===P?S:null===(n=(0,l.Is)(_,P))||void 0===n?void 0:n.number,min:A===P?b:(0,l.Is)(y,P).number,addonAfter:(0,m.jsx)(r.A,{tabIndex:-1,value:P,onChange:e=>{f(`${k}${e}`)},onDropdownVisibleChange:e=>{(e&&null===x||void 0===x)&&f(`0${P}`)},options:u().map(c,(e=>({value:e,label:(0,m.jsx)(s.A.Text,{style:{fontFamily:"'SFMono-Regular',Consolas,'Liberation Mono',Menlo,Courier,monospace"},children:e.toUpperCase()+"iB"})}))),suffixIcon:c.length>1?void 0:null,open:c.length>1&&void 0,style:{cursor:c.length>1?void 0:"default"}}),step:0,onStep:(e,n)=>{const l=u().isNull(k)||u().isUndefined(k)?0:k,i=u().sortedIndex(u().sortBy(o),l);let a;a="up"===n.type?l===o[i]?i+1:i:i-1;const t=c.indexOf(P);if(!p&&a<0)if(0===t)f(`0${P}`);else{const e=o[o.length-1],n=c[t-1];f(`${e}${n}`)}else if(!p&&a>o.length-1)if(t===c.length-1)f(`${l+("up"===n.type?1:-1)}${C}`);else{const e=o[0],n=c[t+1];f(`${e}${n}`)}else if(a>=0&&a<o.length){let e=o[a];A===P&&e<b?e=b:C===P&&e>S&&(e=S),f(`${e}${P}`)}}})}},81654:(e,n,o)=>{o.d(n,{A:()=>r});var l=o(72338),i=o(68260),a=o(65489),t=(o(55093),o(79569));const r=e=>{let{style:n,children:o,spinSize:r="default"}=e;return(0,t.jsxs)(l.A,{direction:"row",justify:"center",align:"center",style:{width:"100%",height:"100%",...n},children:[(0,t.jsx)(a.A,{indicator:(0,t.jsx)(i.A,{spin:!0}),size:r}),o]})}},40367:(e,n,o)=>{o.d(n,{A:()=>c});var l=o(72338),i=o(79597),a=o(88221),t=o(55093),r=o(33364),s=o(79569);const c=e=>{let{name:n,unlimitedValue:o,children:c,...u}=e;const{t:d}=(0,r.Bd)(),[m,p]=(0,t.useState)(!1),y=i.A.useFormInstance();(0,t.useEffect)((()=>{const e=y.getFieldValue(n);p(e===o)}),[y,n,o]);const _=(0,t.isValidElement)(c)?(0,t.cloneElement)(c,{disabled:m}):c,g=m&&(0,t.isValidElement)(c)?(0,t.cloneElement)(c,{value:null,disabled:m}):null;return(0,s.jsxs)(l.A,{direction:"column",align:"start",children:[(0,s.jsx)(i.A.Item,{style:{margin:0},name:n,hidden:m,...u,children:_}),m?(0,s.jsx)(i.A.Item,{style:{margin:0},...u,children:g}):null,(0,s.jsx)(a.A,{checked:m,onChange:e=>{const l=e.target.checked;p(l),l?y.setFieldValue(n,o):y.resetFields([n])},children:d("resourcePolicy.Unlimited")})]})}},67712:(e,n,o)=>{o.a(e,(async(e,l)=>{try{o.d(n,{A:()=>q});var i,a,t=o(72375),r=o(13765),s=o(17898),c=o(23441),u=o(53767),d=o(72338),m=o(19087),p=o(42388),y=o(74325),_=o(61539),g=o(57893),v=o(27964),x=o(99159),f=o(43605),k=o(11956),h=o(66596),j=o(67089),P=o(25913),b=o(99142),A=o(25951),S=o(35364),C=o(171),M=o(8656),R=o(46976),K=o.n(R),w=o(55093),F=o(33364),z=o(63821),I=o(79569),L=e([u]);u=(L.then?(await L)():L)[0];const q=e=>{var n;const{token:l}=h.A.useToken(),{t:R}=(0,F.Bd)(),{message:L}=j.A.useApp(),[q,N]=(0,c.Tw)("initial-fetch"),[T,V]=(0,w.useTransition)(),[O,{toggle:D}]=(0,k.A)(),[$,U]=(0,w.useState)(!1),[E,B]=(0,w.useState)(),[H,Q]=(0,w.useState)(),X=(0,c.CX)(),J=null!==(n=null===X||void 0===X?void 0:X.supports("fine-grained-storage-permissions"))&&void 0!==n&&n,{keypair_resource_policies:W}=(0,z.useLazyLoadQuery)(void 0!==i?i:i=o(73939),{},{fetchPolicy:"initial-fetch"===q?"store-and-network":"network-only",fetchKey:q}),[G,Y]=(0,z.useMutation)(void 0!==a?a:a=o(53886)),Z=[{title:R("resourcePolicy.Name"),dataIndex:"name",key:"name",fixed:"left",sorter:(e,n)=>(0,t._f)(null===e||void 0===e?void 0:e.name,null===n||void 0===n?void 0:n.name)},{title:R("resourcePolicy.Resources"),dataIndex:"total_resource_slots",key:"total_resource_slots",render:(e,n)=>(0,I.jsx)(d.A,{gap:"xxs",children:K().isEmpty(JSON.parse((null===n||void 0===n?void 0:n.total_resource_slots)||"{}"))?"-":K().map(JSON.parse((null===n||void 0===n?void 0:n.total_resource_slots)||"{}"),((e,n)=>(0,I.jsx)(p.A,{type:n,value:K().toString(e)},n)))})},{title:R("resourcePolicy.Concurrency"),dataIndex:"max_concurrent_sessions",key:"max_concurrent_sessions",sorter:(e,n)=>null!==e&&void 0!==e&&e.max_concurrent_sessions&&null!==n&&void 0!==n&&n.max_concurrent_sessions?e.max_concurrent_sessions-n.max_concurrent_sessions:1,render:e=>e===r.z?"\u221e":e},{title:R("resourcePolicy.ClusterSize"),dataIndex:"max_containers_per_session",key:"max_containers_per_session",sorter:(e,n)=>null!==e&&void 0!==e&&e.max_containers_per_session&&null!==n&&void 0!==n&&n.max_containers_per_session?e.max_containers_per_session-n.max_containers_per_session:1,render:e=>e===r.o?"\u221e":e},{title:R("resourcePolicy.IdleTimeout"),dataIndex:"idle_timeout",key:"idle_timeout",sorter:(e,n)=>null!==e&&void 0!==e&&e.idle_timeout&&null!==n&&void 0!==n&&n.idle_timeout?e.idle_timeout-n.idle_timeout:1,render:e=>e||"\u221e"},{title:R("session.MaxSessionLifetime"),dataIndex:"max_session_lifetime",key:"max_session_lifetime",sorter:(e,n)=>(0,t.Oe)(null===e||void 0===e?void 0:e.max_session_lifetime,null===n||void 0===n?void 0:n.max_session_lifetime,0),render:e=>e||"\u221e"},{title:R("resourcePolicy.StorageNodes"),dataIndex:"allowed_vfolder_hosts",key:"allowed_vfolder_hosts",render:(e,n)=>{const o=J?K().keys(JSON.parse((null===n||void 0===n?void 0:n.allowed_vfolder_hosts)||"{}")):JSON.parse((null===n||void 0===n?void 0:n.allowed_vfolder_hosts)||"{}");return(0,I.jsx)(I.Fragment,{children:K().map(o,(e=>(0,I.jsx)(P.A,{children:e},e)))})}},{title:R("general.Control"),key:"control",fixed:"right",render:(e,n)=>(0,I.jsxs)(d.A,{direction:"row",align:"stretch",children:[(0,I.jsx)(b.Ay,{type:"text",size:"large",icon:(0,I.jsx)(_.A,{}),style:{color:l.colorInfo},onClick:()=>{Q(n)}}),(0,I.jsx)(A.A,{title:R("dialog.ask.DoYouWantToProceed"),description:R("dialog.warning.CannotBeUndone"),okType:"danger",okText:R("button.Delete"),onConfirm:()=>{null!==n&&void 0!==n&&n.name&&(B(n.name+q),G({variables:{name:n.name},onCompleted:(e,n)=>{var o,l;if(null!==e&&void 0!==e&&null!==(o=e.delete_keypair_resource_policy)&&void 0!==o&&o.ok)if(n&&(null===n||void 0===n?void 0:n.length)>0){const e=K().map(n,(e=>e.message));for(const n of e)L.error(n,2.5)}else V((()=>N())),L.success(R("resourcePolicy.SuccessfullyDeleted"));else L.error(null===e||void 0===e||null===(l=e.delete_keypair_resource_policy)||void 0===l?void 0:l.msg)},onError(e){L.error(null===e||void 0===e?void 0:e.message)}}))},children:(0,I.jsx)(b.Ay,{type:"text",size:"large",icon:(0,I.jsx)(g.A,{style:{color:l.colorError}}),loading:Y&&E===(null===n||void 0===n?void 0:n.name)+q,disabled:Y&&E!==(null===n||void 0===n?void 0:n.name)+q})})]})}],[ee,ne]=(0,u.a)("KeypairResourcePolicyList");return(0,I.jsxs)(d.A,{direction:"column",align:"stretch",children:[(0,I.jsxs)(d.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:l.paddingContentVertical,paddingLeft:l.paddingContentHorizontalSM,paddingRight:l.paddingContentHorizontalSM},children:[(0,I.jsx)(d.A,{direction:"column",align:"start",children:(0,I.jsx)(S.A,{menu:{items:[{key:"exportCSV",label:R("resourcePolicy.ExportCSV"),onClick:()=>{(()=>{if(!W)return void L.error(R("resourcePolicy.NoDataToExport"));const e=K().without(K().map(Z,(e=>K().toString(e.key))),"control"),n=K().map(W,(n=>K().pick(n,e.map((e=>e)))));(0,s.RM)(n,"keypair_resource_policies",{total_resource_slots:e=>K().isEmpty(e)?"-":JSON.stringify(e),max_concurrent_sessions:e=>e===r.z?"-":e,max_containers_per_session:e=>e===r.o?"-":e,idle_timeout:e=>e||"-",max_session_lifetime:e=>e||"-",allowed_vfolder_hosts:e=>K().isEmpty(e)?"-":K().keys(JSON.parse(e)).join(", ")})})()}}]},children:(0,I.jsx)(b.Ay,{type:"link",style:{padding:0},onClick:e=>e.preventDefault(),children:(0,I.jsxs)(C.A,{style:{color:l.colorLinkHover},children:[R("resourcePolicy.Tools"),(0,I.jsx)(v.A,{})]})})})}),(0,I.jsx)(d.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:(0,I.jsxs)(d.A,{gap:"xs",children:[(0,I.jsx)(b.Ay,{icon:(0,I.jsx)(x.A,{}),loading:T,onClick:()=>{V((()=>N()))}}),(0,I.jsx)(b.Ay,{type:"primary",icon:(0,I.jsx)(f.A,{}),onClick:()=>{U(!0)},children:R("button.Create")})]})})]}),(0,I.jsx)(M.A,{columns:K().filter(Z,(e=>!K().includes(ee,K().toString(null===e||void 0===e?void 0:e.key)))),dataSource:W,rowKey:"name",scroll:{x:"max-content"},pagination:!1,showSorterTooltip:!1}),(0,I.jsx)(d.A,{justify:"end",style:{padding:l.paddingXXS},children:(0,I.jsx)(b.Ay,{type:"text",icon:(0,I.jsx)(_.A,{}),onClick:()=>{D()}})}),(0,I.jsx)(y.A,{open:O,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&ne(K().difference(Z.map((e=>K().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),D()},columns:Z,hiddenColumnKeys:ee}),(0,I.jsx)(w.Suspense,{children:(0,I.jsx)(m.A,{existingPolicyNames:K().map(W,(e=>(null===e||void 0===e?void 0:e.name)||"")),open:!!H||$,keypairResourcePolicyFrgmt:H||null,onRequestClose:e=>{Q(null),U(!1),e&&V((()=>{N()}))}})})]})};l()}catch(q){l(q)}}))},19087:(e,n,o)=>{o.d(n,{A:()=>R});var l=o(72375),i=o(13765),a=o(23441),t=o(7971),r=o(47543),s=o(46976),c=o.n(s),u=o(55093),d=o(79569);const m=e=>{let{...n}=e;const o=(0,t._V)();return(0,d.jsx)(r.A,{...n,children:c().map(o,(e=>(0,d.jsx)(r.A.Option,{value:e,children:e},e)))})};var p,y,_,g=o(88543),v=o(67999),x=o(40367),f=o(66596),k=o(67089),h=o(79597),j=o(1364),P=o(80963),b=o(38926),A=o(63340),S=o(40806),C=o(33364),M=o(63821);const R=e=>{let{existingPolicyNames:n,keypairResourcePolicyFrgmt:r=null,onRequestClose:s,...R}=e;const{t:K}=(0,C.Bd)(),{token:w}=f.A.useToken(),{message:F}=k.A.useApp(),z=(0,u.useRef)(null),[I]=(0,t.bL)(),{mergedResourceSlots:L}=(0,t.Hv)(),q=(0,a.CX)(),N=null===q||void 0===q?void 0:q.supports("deprecated-max-vfolder-count-in-keypair-resource-policy"),T=(0,M.useFragment)(void 0!==p?p:p=o(11348),r),[V,O]=(0,M.useMutation)(void 0!==y?y:y=o(71583)),[D,$]=(0,M.useMutation)(void 0!==_?_:_=o(40989)),U=(0,u.useMemo)((()=>{const e=JSON.parse((null===T||void 0===T?void 0:T.total_resource_slots)||"{}");var n;null!==e&&void 0!==e&&e.mem&&(e.mem=null===(n=(0,l.Is)((null===e||void 0===e?void 0:e.mem)+"b","g",2,!0))||void 0===n?void 0:n.numberUnit);let o={};return null===T&&(o={max_session_lifetime:0,max_concurrent_sessions:i.z,max_containers_per_session:i.o,idle_timeout:0}),{parsedTotalResourceSlots:e,allowedVfolderHostNames:c().keys(JSON.parse((null===T||void 0===T?void 0:T.allowed_vfolder_hosts)||"{}")),...o,...T}}),[T,null===T||void 0===T?void 0:T.total_resource_slots,null===T||void 0===T?void 0:T.allowed_vfolder_hosts]);return(0,d.jsx)(g.A,{title:K(null===T?"resourcePolicy.CreateResourcePolicy":"resourcePolicy.UpdateResourcePolicy"),onOk:()=>{var e;return null===z||void 0===z||null===(e=z.current)||void 0===e?void 0:e.validateFields().then((e=>{let n=c().mapValues(null===e||void 0===e?void 0:e.parsedTotalResourceSlots,((e,n)=>{var o;return c().includes(n,"mem")?null===(o=(0,l.Is)(e,"b",0))||void 0===o?void 0:o.numberFixed:e}));n=c().pickBy(n,c().negate(c().isUndefined));const o=T?JSON.parse(T.allowed_vfolder_hosts||"{}"):{},i=c().fromPairs(c().map(e.allowedVfolderHostNames,(e=>[e,c().get(o,e,[])]))),a={default_for_unspecified:"UNLIMITED",total_resource_slots:JSON.stringify(n||"{}"),max_session_lifetime:null===e||void 0===e?void 0:e.max_session_lifetime,max_concurrent_sessions:null===e||void 0===e?void 0:e.max_concurrent_sessions,max_containers_per_session:null===e||void 0===e?void 0:e.max_containers_per_session,idle_timeout:null===e||void 0===e?void 0:e.idle_timeout,allowed_vfolder_hosts:JSON.stringify(i||"{}")};N||(a.max_vfolder_count=null===e||void 0===e?void 0:e.max_vfolder_count),null===T?V({variables:{name:null===e||void 0===e?void 0:e.name,props:a},onCompleted:(e,n)=>{var o,l;if(null===e||void 0===e||null===(o=e.create_keypair_resource_policy)||void 0===o||!o.ok)return F.error(null===e||void 0===e||null===(l=e.create_keypair_resource_policy)||void 0===l?void 0:l.msg),void s();if(n&&(null===n||void 0===n?void 0:n.length)>0){const e=c().map(n,(e=>e.message));for(const n of e)F.error(n,2.5);s()}else F.success(K("resourcePolicy.SuccessfullyCreated")),s(!0)},onError(e){F.error(e.message)}}):D({variables:{name:null===e||void 0===e?void 0:e.name,props:a},onCompleted:(e,n)=>{var o,l;if(null===e||void 0===e||null===(o=e.modify_keypair_resource_policy)||void 0===o||!o.ok)return F.error(null===e||void 0===e||null===(l=e.modify_keypair_resource_policy)||void 0===l?void 0:l.msg),void s();if(n&&(null===n||void 0===n?void 0:n.length)>0){const e=c().map(n,(e=>e.message));for(const n of e)F.error(n,2.5);s()}else F.success(K("resourcePolicy.SuccessfullyUpdated")),s(!0)},onError(e){F.error(e.message)}})})).catch((()=>{}))},onCancel:()=>s(),destroyOnClose:!0,confirmLoading:O||$,...R,children:(0,d.jsxs)(h.A,{ref:z,layout:"vertical",requiredMark:"optional",initialValues:U,preserve:!1,children:[(0,d.jsx)(h.A.Item,{label:K("resourcePolicy.Name"),name:"name",required:!0,rules:[{required:!0,message:K("data.explorer.ValueRequired")},{max:64},{validator:(e,o)=>!T&&null!==n&&void 0!==n&&n.includes(o)?Promise.reject(K("resourcePolicy.ResourcePolicyNameAlreadyExists")):Promise.resolve()}],children:(0,d.jsx)(j.A,{disabled:!!T})}),(0,d.jsx)(h.A.Item,{label:K("resourcePolicy.ResourcePolicy"),required:!0,children:(0,d.jsx)(P.A,{styles:{body:{paddingBottom:0}},children:c().map(c().chunk(c().keys(I),2),((e,n)=>(0,d.jsx)(b.A,{gutter:[16,16],children:c().map(e,(e=>{var n,o;return(0,d.jsx)(A.A,{span:12,style:{alignSelf:"end",marginBottom:w.marginLG},children:(0,d.jsx)(x.A,{unlimitedValue:void 0,label:(null===(n=c().get(L,e))||void 0===n?void 0:n.description)||e,name:["parsedTotalResourceSlots",e],rules:[{validator:(n,o)=>c().includes(e,"mem")&&o&&(0,l.Is)(o,"p").number>(0,l.Is)("300p","p").number?Promise.reject(new Error(K("resourcePolicy.MemorySizeExceedsLimit"))):Promise.resolve()}],children:c().includes(e,"mem")?(0,d.jsx)(v.A,{}):(0,d.jsx)(S.A,{min:0,step:c().includes(e,".shares")?.1:1,addonAfter:null===(o=c().get(L,e))||void 0===o?void 0:o.display_unit})})},e)}))},n)))})}),(0,d.jsx)(h.A.Item,{label:K("resourcePolicy.Sessions"),required:!0,children:(0,d.jsxs)(P.A,{styles:{body:{paddingBottom:0}},children:[(0,d.jsxs)(b.A,{gutter:16,children:[(0,d.jsx)(A.A,{span:12,style:{alignSelf:"end",marginBottom:w.marginLG},children:(0,d.jsx)(x.A,{name:"max_containers_per_session",unlimitedValue:i.z,label:K("resourcePolicy.ContainerPerSession"),children:(0,d.jsx)(S.A,{min:0,max:100,style:{width:"100%"}})})}),(0,d.jsx)(A.A,{span:12,style:{alignSelf:"end",marginBottom:w.marginLG},children:(0,d.jsx)(x.A,{name:"max_session_lifetime",unlimitedValue:0,label:K("resourcePolicy.MaxSessionLifetime"),children:(0,d.jsx)(S.A,{min:0,max:100,style:{width:"100%"}})})})]}),(0,d.jsxs)(b.A,{gutter:16,children:[(0,d.jsx)(A.A,{span:12,style:{alignSelf:"end",marginBottom:w.marginLG},children:(0,d.jsx)(x.A,{name:"max_concurrent_sessions",unlimitedValue:i.o,label:K("resourcePolicy.ConcurrentJobs"),children:(0,d.jsx)(S.A,{min:0,max:100,style:{width:"100%"}})})}),(0,d.jsx)(A.A,{span:12,style:{alignSelf:"end",marginBottom:w.marginLG},children:(0,d.jsx)(x.A,{name:"idle_timeout",unlimitedValue:0,label:K("resourcePolicy.IdleTimeoutSec"),children:(0,d.jsx)(S.A,{min:0,max:15552e3,style:{width:"100%"}})})})]})]})}),(0,d.jsx)(h.A.Item,{label:K("resourcePolicy.Folders"),required:!0,children:(0,d.jsxs)(P.A,{children:[(0,d.jsx)(h.A.Item,{label:K("resourcePolicy.AllowedHosts"),name:"allowedVfolderHostNames",children:(0,d.jsx)(m,{mode:"multiple"})}),N?void 0:(0,d.jsx)(h.A.Item,{label:K("credential.Max#"),name:"max_vfolder_count",children:(0,d.jsx)(S.A,{min:0,max:50})})]})})]})})}},52458:(e,n,o)=>{o.a(e,(async(e,l)=>{try{o.d(n,{A:()=>L});var i,a,t=o(72375),r=o(17898),s=o(23441),c=o(53767),u=o(72338),d=o(79093),m=o(74325),p=o(61539),y=o(57893),_=o(27964),g=o(99159),v=o(43605),x=o(11956),f=o(66596),k=o(99142),h=o(25951),j=o(75197),P=o(35364),b=o(171),A=o(8656),S=o(78502),C=o.n(S),M=o(46976),R=o.n(M),K=o(55093),w=o(33364),F=o(63821),z=o(79569),I=e([c]);c=(I.then?(await I)():I)[0];const L=()=>{const{token:e}=f.A.useToken(),{t:n}=(0,w.Bd)(),[l,S]=(0,K.useTransition)(),[M,I]=(0,s.Tw)("initial-fetch"),[L,q]=(0,K.useState)(!1),[N,{toggle:T}]=(0,x.A)(),[V,O]=(0,K.useState)(),[D,$]=(0,K.useState)(),U=(0,s.CX)(),E=null===U||void 0===U?void 0:U.supports("max-vfolder-count-in-user-and-project-resource-policy"),B=null===U||void 0===U?void 0:U.supports("max-quota-scope-size"),H=null===U||void 0===U?void 0:U.supports("max_network_count"),{project_resource_policies:Q}=(0,F.useLazyLoadQuery)(void 0!==i?i:i=o(72541),{},{fetchPolicy:"initial-fetch"===M?"store-and-network":"network-only",fetchKey:M}),[X,J]=(0,F.useMutation)(void 0!==a?a:a=o(52736)),W=(0,t.LY)([{title:n("resourcePolicy.Name"),dataIndex:"name",key:"name",fixed:"left",sorter:(e,n)=>(0,t._f)(null===e||void 0===e?void 0:e.name,null===n||void 0===n?void 0:n.name)},E?{title:n("resourcePolicy.MaxVFolderCount"),dataIndex:"max_vfolder_count",key:"max_vfolder_count",render:e=>0===R().toNumber(e)?"\u221e":e,sorter:(e,n)=>(0,t.Oe)(null===e||void 0===e?void 0:e.max_vfolder_count,null===n||void 0===n?void 0:n.max_vfolder_count,0)}:{},B?{title:n("resourcePolicy.MaxQuotaScopeSize"),dataIndex:"max_quota_scope_size",key:"max_quota_scope_size",render:e=>-1===e?"\u221e":(0,t.wb)(e),sorter:(e,n)=>(0,t.Oe)(null===e||void 0===e?void 0:e.max_quota_scope_size,null===n||void 0===n?void 0:n.max_quota_scope_size,-1)}:{},H?{title:n("resourcePolicy.MaxNetworkCount"),dataIndex:"max_network_count",key:"max_network_count",render:e=>-1===e?"\u221e":e,sorter:(e,n)=>!0}:{},{title:"ID",dataIndex:"id",key:"id",sorter:(e,n)=>(0,t._f)(null===e||void 0===e?void 0:e.id,null===n||void 0===n?void 0:n.id)},{title:n("resourcePolicy.CreatedAt"),dataIndex:"created_at",key:"created_at",render:e=>C()(e).format("lll"),sorter:(e,n)=>(0,t._f)(null===e||void 0===e?void 0:e.created_at,null===n||void 0===n?void 0:n.created_at)},{title:n("general.Control"),fixed:"right",key:"control",render:(o,l)=>(0,z.jsxs)(u.A,{direction:"row",align:"stretch",children:[(0,z.jsx)(k.Ay,{type:"text",icon:(0,z.jsx)(p.A,{}),style:{color:e.colorInfo},onClick:()=>{$(l)}}),(0,z.jsx)(h.A,{title:n("dialog.ask.DoYouWantToProceed"),description:n("dialog.warning.CannotBeUndone"),okType:"danger",okText:n("button.Delete"),onConfirm:()=>{null!==l&&void 0!==l&&l.name&&(O(l.name+M),X({variables:{name:l.name},onCompleted:(e,o)=>{var l,i;if(null!==e&&void 0!==e&&null!==(l=e.delete_project_resource_policy)&&void 0!==l&&l.ok)if(o&&(null===o||void 0===o?void 0:o.length)>0){const e=R().map(o,(e=>e.message));for(const n of e)j.Ay.error(n,2.5)}else S((()=>I())),j.Ay.success(n("resourcePolicy.SuccessfullyDeleted"));else j.Ay.error(null===e||void 0===e||null===(i=e.delete_project_resource_policy)||void 0===i?void 0:i.msg)},onError(e){j.Ay.error(null===e||void 0===e?void 0:e.message)}}))},children:(0,z.jsx)(k.Ay,{type:"text",icon:(0,z.jsx)(y.A,{style:{color:e.colorError}}),loading:J&&V===(null===l||void 0===l?void 0:l.name)+M,disabled:J&&V!==(null===l||void 0===l?void 0:l.name)+M})})]})}]),[G,Y]=(0,c.a)("ProjectResourcePolicyList");return(0,z.jsxs)(u.A,{direction:"column",align:"stretch",children:[(0,z.jsxs)(u.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:e.paddingContentVertical,paddingLeft:e.paddingContentHorizontalSM,paddingRight:e.paddingContentHorizontalSM},children:[(0,z.jsx)(u.A,{direction:"column",align:"start",children:(0,z.jsx)(P.A,{menu:{items:[{key:"exportCSV",label:n("resourcePolicy.ExportCSV"),onClick:()=>{(()=>{if(!Q)return void j.Ay.error(n("resourcePolicy.NoDataToExport"));const e=R().without(R().map(W,(e=>R().toString(e.key))),"control"),o=R().map(Q,(n=>R().pick(n,e.map((e=>e)))));(0,r.RM)(o,"project_resource_polices",{max_vfolder_count:e=>0===R().toNumber(e)?"-":e,max_quota_scope_size:e=>-1===e?"-":(0,t.wb)(e)})})()}}]},children:(0,z.jsx)(k.Ay,{type:"link",style:{padding:0},onClick:e=>e.preventDefault(),children:(0,z.jsxs)(b.A,{style:{color:e.colorLinkHover},children:[n("resourcePolicy.Tools"),(0,z.jsx)(_.A,{})]})})})}),(0,z.jsx)(u.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:(0,z.jsxs)(u.A,{gap:"xs",children:[(0,z.jsx)(k.Ay,{icon:(0,z.jsx)(g.A,{}),loading:l,onClick:()=>{S((()=>I()))}}),(0,z.jsx)(k.Ay,{type:"primary",icon:(0,z.jsx)(v.A,{}),onClick:()=>{q(!0)},children:n("button.Create")})]})})]}),(0,z.jsx)(A.A,{rowKey:"id",showSorterTooltip:!1,columns:R().filter(W,(e=>!R().includes(G,R().toString(null===e||void 0===e?void 0:e.key)))),dataSource:(0,t.tS)(Q),scroll:{x:"max-content"},pagination:!1}),(0,z.jsx)(u.A,{justify:"end",style:{padding:e.paddingXXS},children:(0,z.jsx)(k.Ay,{type:"text",icon:(0,z.jsx)(p.A,{}),onClick:()=>{T()}})}),(0,z.jsx)(m.A,{open:N,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&Y(R().difference(W.map((e=>R().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),T()},columns:W,hiddenColumnKeys:G}),(0,z.jsx)(d.A,{existingPolicyNames:R().map(Q,"name"),open:!!D||L,projectResourcePolicyFrgmt:D||null,onRequestClose:e=>{e&&S((()=>I())),$(null),q(!1)}})]})};l()}catch(L){l(L)}}))},79093:(e,n,o)=>{o.d(n,{A:()=>P});var l,i,a,t=o(72375),r=o(23441),s=o(88543),c=o(72338),u=o(40367),d=o(66596),m=o(67089),p=o(38398),y=o(79597),_=o(1364),g=o(40806),v=o(46976),x=o.n(v),f=o(55093),k=o(33364),h=o(63821),j=o(79569);const P=e=>{let{existingPolicyNames:n,projectResourcePolicyFrgmt:v=null,onRequestClose:P,...b}=e;const{t:A}=(0,k.Bd)(),{token:S}=d.A.useToken(),{message:C}=m.A.useApp(),M=(0,f.useRef)(null),R=(0,r.CX)(),K=null===R||void 0===R?void 0:R.supports("max-vfolder-count-in-user-and-project-resource-policy"),w=null===R||void 0===R?void 0:R.supports("max-quota-scope-size"),F=null===R||void 0===R?void 0:R.supports("max_network_count"),z=(0,h.useFragment)(void 0!==l?l:l=o(37386),v),[I,L]=(0,h.useMutation)(void 0!==i?i:i=o(80741)),[q,N]=(0,h.useMutation)(void 0!==a?a:a=o(25827)),T=(0,f.useMemo)((()=>{let e={};null===z&&(e={max_vfolder_count:0,max_quota_scope_size:-1,max_network_count:-1});let n=null===z||void 0===z?void 0:z.max_quota_scope_size;return n=x().isUndefined(n)||-1===n?-1:(0,t.wb)(n),{...e,...z,max_quota_scope_size:n}}),[z,null===z||void 0===z?void 0:z.max_vfolder_count,null===z||void 0===z?void 0:z.max_quota_scope_size]);return(0,j.jsxs)(s.A,{title:A(null===z?"resourcePolicy.CreateResourcePolicy":"resourcePolicy.UpdateResourcePolicy"),onOk:e=>{var n;return null===M||void 0===M||null===(n=M.current)||void 0===n?void 0:n.validateFields().then((e=>{const n={max_vfolder_count:(null===e||void 0===e?void 0:e.max_vfolder_count)||0,max_quota_scope_size:-1===(null===e||void 0===e?void 0:e.max_quota_scope_size)?-1:(0,t._S)(null===e||void 0===e?void 0:e.max_quota_scope_size),max_network_count:(null===e||void 0===e?void 0:e.max_network_count)||-1};K||delete n.max_vfolder_count,w||delete n.max_quota_scope_size,F||delete n.max_network_count,null===z?I({variables:{name:null===e||void 0===e?void 0:e.name,props:n},onCompleted(e,n){var o,l;null===e||void 0===e||null===(o=e.create_project_resource_policy)||void 0===o||!o.ok||n?(C.error(null===e||void 0===e||null===(l=e.create_project_resource_policy)||void 0===l?void 0:l.msg),P()):(C.success(A("storageHost.ResourcePolicySuccessfullyUpdated")),P(!0))},onError(e){C.error(null===e||void 0===e?void 0:e.message)}}):q({variables:{name:null===e||void 0===e?void 0:e.name,props:n},onCompleted(e,n){var o,l;null===e||void 0===e||null===(o=e.modify_project_resource_policy)||void 0===o||!o.ok||n?(C.error(null===e||void 0===e||null===(l=e.modify_project_resource_policy)||void 0===l?void 0:l.msg),P()):(C.success(A("storageHost.ResourcePolicySuccessfullyUpdated")),P(!0))},onError(e){C.error(null===e||void 0===e?void 0:e.message)}})})).catch((()=>{}))},onCancel:()=>P(),destroyOnClose:!0,confirmLoading:L||N,...b,children:[(0,j.jsx)(p.A,{message:A("storageHost.BeCarefulToSetProjectResourcePolicy"),type:"warning",showIcon:!0,style:{marginBottom:S.marginMD}}),(0,j.jsxs)(y.A,{ref:M,layout:"vertical",requiredMark:"optional",initialValues:T,preserve:!1,children:[(0,j.jsx)(y.A.Item,{label:A("resourcePolicy.Name"),name:"name",required:!0,rules:[{required:!0,message:A("data.explorer.ValueRequired")},{max:255},{validator:(e,o)=>!z&&null!==n&&void 0!==n&&n.includes(o)?Promise.reject(A("resourcePolicy.ResourcePolicyNameAlreadyExists")):Promise.resolve()}],children:(0,j.jsx)(_.A,{disabled:!!z})}),(0,j.jsxs)(c.A,{direction:"column",align:"stretch",gap:"md",style:{marginBottom:S.marginMD},children:[K?(0,j.jsx)(u.A,{name:"max_vfolder_count",unlimitedValue:0,label:A("resourcePolicy.MaxFolderCount"),style:{width:"100%",margin:0},children:(0,j.jsx)(g.A,{min:0,style:{width:"100%"}})}):null,w?(0,j.jsx)(u.A,{name:"max_quota_scope_size",unlimitedValue:-1,label:A("storageHost.MaxFolderSize"),style:{width:"100%",margin:0},children:(0,j.jsx)(g.A,{min:0,addonAfter:"GB",style:{width:"100%"}})}):null,F?(0,j.jsx)(u.A,{name:"max_network_count",unlimitedValue:-1,label:A("resourcePolicy.MaxNetworkCount"),style:{width:"100%",margin:0},children:(0,j.jsx)(g.A,{min:0,style:{width:"100%"}})}):null]})]})]})}},42388:(e,n,o)=>{o.d(n,{A:()=>x,s:()=>v});var l=o(72375),i=o(7971),a=o(81530),t=o(72338),r=o(66596),s=o(12221),c=o(2556),u=o(46976),d=o.n(u),m=o(10709),p=o(55093),y=o(79569);const _=e=>{var n,o;let{type:c,value:u,extra:m,opts:p,hideTooltip:_=!1,max:g}=e;const{token:x}=r.A.useToken(),f=(0,a.Nw)(),{mergedResourceSlots:k}=(0,i.Hv)(f||void 0),h=e=>{var n,o,i;return null!==k&&void 0!==k&&null!==(n=k[c])&&void 0!==n&&n.number_format.binary?Number(null===(o=(0,l.Is)(e,"g",3,!0))||void 0===o?void 0:o.numberFixed).toString():((null===k||void 0===k||null===(i=k[c])||void 0===i?void 0:i.number_format.round_length)||0)>0?parseFloat(e).toFixed(2):e};return(0,y.jsxs)(t.A,{direction:"row",gap:"xxs",children:[null!==k&&void 0!==k&&k[c]?(0,y.jsx)(v,{type:c,showTooltip:!_}):c,(0,y.jsxs)(s.A.Text,{children:[h(u),d().isUndefined(g)?null:"Infinity"===g?"~\u221e":`~${h(g)}`]}),(0,y.jsx)(s.A.Text,{type:"secondary",children:(null===k||void 0===k||null===(n=k[c])||void 0===n?void 0:n.display_unit)||""}),"mem"===c&&null!==p&&void 0!==p&&p.shmem&&(null===p||void 0===p?void 0:p.shmem)>0?(0,y.jsxs)(s.A.Text,{type:"secondary",style:{fontSize:x.fontSizeSM},children:["(SHM:"," ",null===(o=(0,l.Is)(p.shmem+"b","g",2,!0))||void 0===o?void 0:o.numberFixed,"GiB)"]}):null,m]})},g=e=>{let{size:n=16,children:o}=e;return(0,y.jsx)("mwc-icon",{style:{"--mdc-icon-size":`${n+2}px`,width:n,height:n},children:o})},v=e=>{var n,o;let{type:l,size:a=16,showIcon:r=!0,showUnit:s=!0,showTooltip:u=!0,...d}=e;const p={cpu:(0,y.jsx)(g,{size:a,children:"developer_board"}),mem:(0,y.jsx)(g,{size:a,children:"memory"}),"cuda.device":"/resources/icons/file_type_cuda.svg","cuda.shares":"/resources/icons/file_type_cuda.svg","rocm.device":"/resources/icons/rocm.svg","tpu.device":(0,y.jsx)(g,{size:a,children:"view_module"}),"ipu.device":(0,y.jsx)(g,{size:a,children:"view_module"}),"atom.device":"/resources/icons/rebel.svg","atom-plus.device":"/resources/icons/rebel.svg","gaudi2.device":"/resources/icons/gaudi.svg","warboy.device":"/resources/icons/furiosa.svg","rngd.device":"/resources/icons/furiosa.svg","hyperaccel-lpu.device":"/resources/icons/npu_generic.svg"},_=null!==(n=p[l])&&void 0!==n?n:(0,y.jsx)(m.A,{}),{mergedResourceSlots:v}=(0,i.Hv)(),x="string"===typeof _?(0,y.jsx)("img",{...d,style:{height:a,alignSelf:"center",...d.style||{}},src:p[l]||"",alt:l}):(0,y.jsx)(t.A,{style:{width:16,height:16},children:_||l});return u?(0,y.jsx)(c.A,{title:(null===(o=v[l])||void 0===o?void 0:o.description)||l,children:x}):(0,y.jsx)(t.A,{style:{pointerEvents:"none"},children:x})},x=p.memo(_)},74325:(e,n,o)=>{o.d(n,{A:()=>y});var l=o(88543),i=o(76975),a=o(66596),t=o(79597),r=o(1364),s=o(88221),c=o(46976),u=o.n(c),d=o(55093),m=o(33364),p=o(79569);const y=e=>{var n;let{open:o,onRequestClose:c,columns:y,hiddenColumnKeys:_,...g}=e;const v=(0,d.useRef)(null),{t:x}=(0,m.Bd)(),{token:f}=a.A.useToken(),k=u().map(y,(e=>{return"string"===typeof e.title?{label:e.title,value:u().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(n=e.title,d.Children.map(n.props.children,(e=>{if("string"===typeof e)return e}))),value:u().toString(e.key)}:{label:void 0,value:u().toString(e.key)};var n}));return(0,p.jsx)(l.A,{title:x("table.SettingTable"),open:o,destroyOnClose:!0,centered:!0,onOk:()=>{var e;null===(e=v.current)||void 0===e||e.validateFields().then((e=>{c(e)})).catch((()=>{}))},onCancel:()=>{c()},...g,children:(0,p.jsxs)(t.A,{ref:v,preserve:!1,initialValues:{selectedColumnKeys:null===(n=u().map(k,"value"))||void 0===n?void 0:n.filter((e=>!u().includes(_,e)))},layout:"vertical",children:[(0,p.jsx)(t.A.Item,{name:"searchInput",label:x("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,p.jsx)(r.A,{prefix:(0,p.jsx)(i.A,{}),style:{marginBottom:f.marginSM},placeholder:x("table.SearchTableColumn")})}),(0,p.jsx)(t.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>e.searchInput!==n.searchInput,children:e=>{let{getFieldValue:n}=e;const o=n("searchInput")?u().toLower(n("searchInput")):void 0,l=u().map(k,(e=>u().toLower(u().toString(e.label)).includes(o||"")?e:{...e,style:{display:"none"}}));return(0,p.jsx)(t.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},children:(0,p.jsx)(s.A.Group,{options:l,style:{flexDirection:"column"}})})}})]})})}},25132:(e,n,o)=>{o.a(e,(async(e,l)=>{try{o.d(n,{A:()=>L});var i,a,t=o(72375),r=o(17898),s=o(23441),c=o(53767),u=o(72338),d=o(74325),m=o(88675),p=o(61539),y=o(57893),_=o(27964),g=o(99159),v=o(43605),x=o(11956),f=o(66596),k=o(67089),h=o(99142),j=o(25951),P=o(35364),b=o(171),A=o(8656),S=o(78502),C=o.n(S),M=o(46976),R=o.n(M),K=o(55093),w=o(33364),F=o(63821),z=o(79569),I=e([c]);c=(I.then?(await I)():I)[0];const L=()=>{const{token:e}=f.A.useToken(),{t:n}=(0,w.Bd)(),{message:l}=k.A.useApp(),[S,M]=(0,K.useTransition)(),[I,L]=(0,s.Tw)("initial-fetch"),[q,N]=(0,K.useState)(!1),[T,{toggle:V}]=(0,x.A)(),[O,D]=(0,K.useState)(),[$,U]=(0,K.useState)(),E=(0,s.CX)(),B=null===E||void 0===E?void 0:E.supports("max-vfolder-count-in-user-and-project-resource-policy"),H=null===E||void 0===E?void 0:E.supports("max-quota-scope-size"),Q=null===E||void 0===E?void 0:E.supports("max-session-count-per-model-session"),X=null===E||void 0===E?void 0:E.supports("max-customized-image-count"),{user_resource_policies:J}=(0,F.useLazyLoadQuery)(void 0!==i?i:i=o(87219),{},{fetchPolicy:"initial-fetch"===I?"store-and-network":"network-only",fetchKey:I}),[W,G]=(0,F.useMutation)(void 0!==a?a:a=o(47550)),Y=(0,t.LY)([{title:n("resourcePolicy.Name"),dataIndex:"name",key:"name",fixed:"left",sorter:(e,n)=>(0,t._f)(null===e||void 0===e?void 0:e.name,null===n||void 0===n?void 0:n.name)},B&&{title:n("resourcePolicy.MaxVFolderCount"),dataIndex:"max_vfolder_count",key:"max_vfolder_count",render:e=>0===R().toNumber(e)?"\u221e":e,sorter:(e,n)=>(0,t.Oe)(null===e||void 0===e?void 0:e.max_vfolder_count,null===n||void 0===n?void 0:n.max_vfolder_count,0)},Q&&{title:n("resourcePolicy.MaxSessionCountPerModelSession"),dataIndex:"max_session_count_per_model_session",key:"max_session_count_per_model_session",sorter:(e,n)=>{var o,l;return(null!==(o=null===e||void 0===e?void 0:e.max_session_count_per_model_session)&&void 0!==o?o:0)-(null!==(l=null===n||void 0===n?void 0:n.max_session_count_per_model_session)&&void 0!==l?l:0)}},H&&{title:n("resourcePolicy.MaxQuotaScopeSize"),dataIndex:"max_quota_scope_size",key:"max_quota_scope_size",render:e=>-1===e?"\u221e":(0,t.wb)(e),sorter:(e,n)=>(0,t.Oe)(null===e||void 0===e?void 0:e.max_quota_scope_size,null===n||void 0===n?void 0:n.max_quota_scope_size,-1)},X&&{title:n("resourcePolicy.MaxCustomizedImageCount"),key:"max_customized_image_count",dataIndex:"max_customized_image_count",sorter:(e,n)=>{var o,l;return(null!==(o=null===e||void 0===e?void 0:e.max_customized_image_count)&&void 0!==o?o:0)-(null!==(l=null===n||void 0===n?void 0:n.max_customized_image_count)&&void 0!==l?l:0)}},{title:"ID",dataIndex:"id",key:"id",sorter:(e,n)=>(0,t._f)(null===e||void 0===e?void 0:e.id,null===n||void 0===n?void 0:n.id)},{title:n("resourcePolicy.CreatedAt"),dataIndex:"created_at",key:"created_at",render:e=>C()(e).format("lll"),sorter:(e,n)=>(0,t._f)(null===e||void 0===e?void 0:e.created_at,null===n||void 0===n?void 0:n.created_at)},{title:n("general.Control"),fixed:"right",key:"control",render:(o,i)=>(0,z.jsxs)(u.A,{direction:"row",align:"stretch",children:[(0,z.jsx)(h.Ay,{type:"text",icon:(0,z.jsx)(p.A,{}),style:{color:e.colorInfo},onClick:()=>{U(i)}}),(0,z.jsx)(j.A,{title:n("dialog.ask.DoYouWantToProceed"),description:n("dialog.warning.CannotBeUndone"),okType:"danger",okText:n("button.Delete"),onConfirm:()=>{null!==i&&void 0!==i&&i.name&&(D(i.name+I),W({variables:{name:i.name},onCompleted:(e,o)=>{var i,a;if(null!==e&&void 0!==e&&null!==(i=e.delete_user_resource_policy)&&void 0!==i&&i.ok)if(o&&o.length>0){const e=o.map((e=>e.message));for(const n of e)l.error(n,2.5)}else M((()=>L())),l.success(n("resourcePolicy.SuccessfullyDeleted"));else l.error(null===e||void 0===e||null===(a=e.delete_user_resource_policy)||void 0===a?void 0:a.msg)},onError(e){l.error(null===e||void 0===e?void 0:e.message)}}))},children:(0,z.jsx)(h.Ay,{type:"text",icon:(0,z.jsx)(y.A,{style:{color:e.colorError}}),loading:G&&O===(null===i||void 0===i?void 0:i.name)+I,disabled:G&&O!==(null===i||void 0===i?void 0:i.name)+I})})]})}]),[Z,ee]=(0,c.a)("UserResourcePolicyList");return(0,z.jsxs)(u.A,{direction:"column",align:"stretch",children:[(0,z.jsxs)(u.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:e.paddingContentVertical,paddingLeft:e.paddingContentHorizontalSM,paddingRight:e.paddingContentHorizontalSM},children:[(0,z.jsx)(u.A,{direction:"column",align:"start",children:(0,z.jsx)(P.A,{menu:{items:[{key:"exportCSV",label:n("resourcePolicy.ExportCSV"),onClick:()=>{(()=>{if(!J||J.length===(null===Z||void 0===Z?void 0:Z.length))return void l.error(n("resourcePolicy.NoDataToExport"));const e=R().without(R().map(Y,(e=>R().toString(e.key))),"control"),o=R().map(J,(n=>R().pick(n,e.map((e=>e)))));(0,r.RM)(o,"user-resource-policies",{max_vfolder_count:e=>0===R().toNumber(e)?"-":e,max_quota_scope_size:e=>-1===e?"-":(0,t.wb)(e)})})()}}]},children:(0,z.jsx)(h.Ay,{type:"link",style:{padding:0},onClick:e=>e.preventDefault(),children:(0,z.jsxs)(b.A,{style:{color:e.colorLinkHover},children:[n("resourcePolicy.Tools"),(0,z.jsx)(_.A,{})]})})})}),(0,z.jsx)(u.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:(0,z.jsxs)(u.A,{gap:"xs",children:[(0,z.jsx)(h.Ay,{icon:(0,z.jsx)(g.A,{}),loading:S,onClick:()=>{M((()=>L()))}}),(0,z.jsx)(h.Ay,{type:"primary",icon:(0,z.jsx)(v.A,{}),onClick:()=>{N(!0)},children:n("button.Create")})]})})]}),(0,z.jsx)(A.A,{rowKey:"id",showSorterTooltip:!1,columns:R().filter(Y,(e=>!R().includes(Z,R().toString(null===e||void 0===e?void 0:e.key)))),dataSource:(0,t.tS)(J),scroll:{x:"max-content"},pagination:!1}),(0,z.jsx)(u.A,{justify:"end",style:{padding:e.paddingXXS},children:(0,z.jsx)(h.Ay,{type:"text",icon:(0,z.jsx)(p.A,{}),onClick:()=>{V()}})}),(0,z.jsx)(d.A,{open:T,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&ee(R().difference(Y.map((e=>R().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),V()},columns:Y,hiddenColumnKeys:Z}),(0,z.jsx)(m.A,{existingPolicyNames:R().map(J,"name"),open:!!$||q,userResourcePolicyFrgmt:$||null,onRequestClose:e=>{e&&M((()=>L())),U(null),N(!1)}})]})};l()}catch(L){l(L)}}))},88675:(e,n,o)=>{o.d(n,{A:()=>P});var l,i,a,t=o(72375),r=o(23441),s=o(88543),c=o(72338),u=o(40367),d=o(66596),m=o(67089),p=o(38398),y=o(79597),_=o(1364),g=o(40806),v=o(46976),x=o.n(v),f=o(55093),k=o(33364),h=o(63821),j=o(79569);const P=e=>{let{existingPolicyNames:n,userResourcePolicyFrgmt:v=null,onRequestClose:P,...b}=e;const{t:A}=(0,k.Bd)(),{token:S}=d.A.useToken(),{message:C}=m.A.useApp(),M=(0,f.useRef)(null),R=(0,r.CX)(),K=null===R||void 0===R?void 0:R.supports("max-vfolder-count-in-user-and-project-resource-policy"),w=null===R||void 0===R?void 0:R.supports("max-quota-scope-size"),F=null===R||void 0===R?void 0:R.supports("max-session-count-per-model-session"),z=null===R||void 0===R?void 0:R.supports("max-customized-image-count"),I=(0,h.useFragment)(void 0!==l?l:l=o(2548),v),[L,q]=(0,h.useMutation)(void 0!==i?i:i=o(58399)),[N,T]=(0,h.useMutation)(void 0!==a?a:a=o(40605)),V=(0,f.useMemo)((()=>{let e={};null===I&&(e={max_vfolder_count:0,max_quota_scope_size:-1});let n=null===I||void 0===I?void 0:I.max_quota_scope_size;return n=x().isUndefined(n)||-1===n?-1:(0,t.wb)(n),{...e,...I,max_quota_scope_size:n}}),[I,null===I||void 0===I?void 0:I.max_vfolder_count,null===I||void 0===I?void 0:I.max_quota_scope_size]);return(0,j.jsxs)(s.A,{title:A(null===I?"resourcePolicy.CreateResourcePolicy":"resourcePolicy.UpdateResourcePolicy"),onOk:e=>{var n;return null===M||void 0===M||null===(n=M.current)||void 0===n?void 0:n.validateFields().then((e=>{const n={max_vfolder_count:(null===e||void 0===e?void 0:e.max_vfolder_count)||0,max_quota_scope_size:-1===(null===e||void 0===e?void 0:e.max_quota_scope_size)?-1:(0,t._S)(null===e||void 0===e?void 0:e.max_quota_scope_size),max_session_count_per_model_session:null===e||void 0===e?void 0:e.max_session_count_per_model_session,max_customized_image_count:null===e||void 0===e?void 0:e.max_customized_image_count};K||delete n.max_vfolder_count,w||delete n.max_quota_scope_size,F||delete n.max_session_count_per_model_session,z||delete n.max_customized_image_count,null===I?L({variables:{name:null===e||void 0===e?void 0:e.name,props:n},onCompleted(e,n){var o,l;null===e||void 0===e||null===(o=e.create_user_resource_policy)||void 0===o||!o.ok||n?(C.error(null===e||void 0===e||null===(l=e.create_user_resource_policy)||void 0===l?void 0:l.msg),P()):(C.success(A("storageHost.ResourcePolicySuccessfullyUpdated")),P(!0))},onError(e){C.error(null===e||void 0===e?void 0:e.message)}}):N({variables:{name:null===e||void 0===e?void 0:e.name,props:n},onCompleted(e,n){var o,l;null===e||void 0===e||null===(o=e.modify_user_resource_policy)||void 0===o||!o.ok||n?(C.error(null===e||void 0===e||null===(l=e.modify_user_resource_policy)||void 0===l?void 0:l.msg),P()):(C.success(A("storageHost.ResourcePolicySuccessfullyUpdated")),P(!0))},onError(e){C.error(null===e||void 0===e?void 0:e.message)}})})).catch((()=>{}))},onCancel:()=>P(),destroyOnClose:!0,confirmLoading:q||T,...b,children:[(0,j.jsx)(p.A,{message:A("storageHost.BeCarefulToSetUserResourcePolicy"),type:"warning",showIcon:!0,style:{marginBottom:S.marginMD}}),(0,j.jsxs)(y.A,{ref:M,layout:"vertical",requiredMark:"optional",initialValues:V,preserve:!1,children:[(0,j.jsx)(y.A.Item,{label:A("resourcePolicy.Name"),name:"name",required:!0,rules:[{required:!0,message:A("data.explorer.ValueRequired")},{max:255},{validator:(e,o)=>!I&&null!==n&&void 0!==n&&n.includes(o)?Promise.reject(A("resourcePolicy.ResourcePolicyNameAlreadyExists")):Promise.resolve()}],children:(0,j.jsx)(_.A,{disabled:!!I})}),(0,j.jsxs)(c.A,{direction:"column",align:"stretch",gap:"md",style:{marginBottom:S.marginMD},children:[K?(0,j.jsx)(u.A,{name:"max_vfolder_count",unlimitedValue:0,label:A("resourcePolicy.MaxFolderCount"),style:{width:"100%",margin:0},children:(0,j.jsx)(g.A,{min:0,style:{width:"100%"}})}):null,w?(0,j.jsx)(u.A,{name:"max_quota_scope_size",unlimitedValue:-1,label:A("storageHost.MaxFolderSize"),style:{width:"100%",margin:0},children:(0,j.jsx)(g.A,{min:0,addonAfter:"GB",style:{width:"100%"}})}):null]}),F?(0,j.jsx)(y.A.Item,{name:"max_session_count_per_model_session",label:A("resourcePolicy.MaxSessionCountPerModelSession"),rules:[{required:!0,message:A("data.explorer.ValueRequired")}],children:(0,j.jsx)(g.A,{min:0,style:{width:"100%"}})}):null,z?(0,j.jsx)(y.A.Item,{name:"max_customized_image_count",label:A("resourcePolicy.MaxCustomizedImageCount"),rules:[{required:!0,message:A("data.explorer.ValueRequired")}],children:(0,j.jsx)(g.A,{min:0,style:{width:"100%"}})}):null]})]})}},53886:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteKeyPairResourcePolicy",kind:"LinkedField",name:"delete_keypair_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"KeypairResourcePolicyListMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"KeypairResourcePolicyListMutation",selections:n},params:{cacheID:"fe182323e364c317f26c7193239af22b",id:null,metadata:{},name:"KeypairResourcePolicyListMutation",operationKind:"mutation",text:"mutation KeypairResourcePolicyListMutation(\n  $name: String!\n) {\n  delete_keypair_resource_policy(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="5771729a12a204d27a9cdf5ad31e707f";const i=l},73939:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"total_resource_slots",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"max_session_lifetime",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"max_concurrent_sessions",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"max_containers_per_session",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"idle_timeout",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"allowed_vfolder_hosts",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KeypairResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"KeyPairResourcePolicy",kind:"LinkedField",name:"keypair_resource_policies",plural:!0,selections:[e,n,o,l,i,a,t,{args:null,kind:"FragmentSpread",name:"KeypairResourcePolicySettingModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"KeypairResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"KeyPairResourcePolicy",kind:"LinkedField",name:"keypair_resource_policies",plural:!0,selections:[e,n,o,l,i,a,t,{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null}],storageKey:null}]},params:{cacheID:"05cd0ba2e87295be2064be1b38441faf",id:null,metadata:{},name:"KeypairResourcePolicyListQuery",operationKind:"query",text:'query KeypairResourcePolicyListQuery {\n  keypair_resource_policies {\n    name\n    total_resource_slots\n    max_session_lifetime\n    max_concurrent_sessions\n    max_containers_per_session\n    idle_timeout\n    allowed_vfolder_hosts\n    ...KeypairResourcePolicySettingModalFragment\n  }\n}\n\nfragment KeypairResourcePolicySettingModalFragment on KeyPairResourcePolicy {\n  name\n  total_resource_slots\n  max_session_lifetime\n  max_concurrent_sessions\n  max_containers_per_session\n  idle_timeout\n  allowed_vfolder_hosts\n  max_vfolder_count @deprecatedSince(version: "23.09.4")\n}\n'}}}();l.hash="86e382131325a58294cf015618b4920b";const i=l},71583:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateKeyPairResourcePolicy",kind:"LinkedField",name:"create_keypair_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"KeypairResourcePolicySettingModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"KeypairResourcePolicySettingModalCreateMutation",selections:n},params:{cacheID:"b52e3e869ccfabb393fb45a48074767e",id:null,metadata:{},name:"KeypairResourcePolicySettingModalCreateMutation",operationKind:"mutation",text:"mutation KeypairResourcePolicySettingModalCreateMutation(\n  $name: String!\n  $props: CreateKeyPairResourcePolicyInput!\n) {\n  create_keypair_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="7c4c5be505f02fa76e7b4db73a1f4b14";const i=l},11348:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KeypairResourcePolicySettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"total_resource_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_session_lifetime",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_concurrent_sessions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_containers_per_session",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_timeout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allowed_vfolder_hosts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null}],type:"KeyPairResourcePolicy",abstractKey:null,hash:"57d4c7b215e0e5dda0632124129e0895"},i=l},40989:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyKeyPairResourcePolicy",kind:"LinkedField",name:"modify_keypair_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"KeypairResourcePolicySettingModalModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"KeypairResourcePolicySettingModalModifyMutation",selections:n},params:{cacheID:"72be648e07857dd6923d7c81f3f19948",id:null,metadata:{},name:"KeypairResourcePolicySettingModalModifyMutation",operationKind:"mutation",text:"mutation KeypairResourcePolicySettingModalModifyMutation(\n  $name: String!\n  $props: ModifyKeyPairResourcePolicyInput!\n) {\n  modify_keypair_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="8c99c8be8781f93fed817a67c86ea966";const i=l},52736:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteProjectResourcePolicy",kind:"LinkedField",name:"delete_project_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProjectResourcePolicyListMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProjectResourcePolicyListMutation",selections:n},params:{cacheID:"9f1218faa2207eff18f5a145f12f87ac",id:null,metadata:{},name:"ProjectResourcePolicyListMutation",operationKind:"mutation",text:"mutation ProjectResourcePolicyListMutation(\n  $name: String!\n) {\n  delete_project_resource_policy(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="2c5a20c6c463174bbfc726a27cdfdcac";const i=l},72541:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"max_network_count",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProjectResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"ProjectResourcePolicy",kind:"LinkedField",name:"project_resource_policies",plural:!0,selections:[e,n,o,l,i,a,{args:null,kind:"FragmentSpread",name:"ProjectResourcePolicySettingModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"ProjectResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"ProjectResourcePolicy",kind:"LinkedField",name:"project_resource_policies",plural:!0,selections:[e,n,o,l,i,a],storageKey:null}]},params:{cacheID:"6aea9773e50cdfa81562c7a8322c8faa",id:null,metadata:{},name:"ProjectResourcePolicyListQuery",operationKind:"query",text:'query ProjectResourcePolicyListQuery {\n  project_resource_policies {\n    id\n    name\n    created_at\n    max_vfolder_count @since(version: "23.09.6")\n    max_quota_scope_size @since(version: "23.09.2")\n    max_network_count @since(version: "24.12.0")\n    ...ProjectResourcePolicySettingModalFragment\n  }\n}\n\nfragment ProjectResourcePolicySettingModalFragment on ProjectResourcePolicy {\n  id\n  name\n  created_at\n  max_vfolder_count @since(version: "23.09.6")\n  max_quota_scope_size @since(version: "23.09.2")\n  max_network_count @since(version: "24.12.0")\n}\n'}}}();l.hash="4c7451b05822ee2f8c5e2c8d35ed57db";const i=l},80741:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateProjectResourcePolicy",kind:"LinkedField",name:"create_project_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProjectResourcePolicySettingModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProjectResourcePolicySettingModalCreateMutation",selections:n},params:{cacheID:"b94d7a4b8e8341df4e396784abba4203",id:null,metadata:{},name:"ProjectResourcePolicySettingModalCreateMutation",operationKind:"mutation",text:"mutation ProjectResourcePolicySettingModalCreateMutation(\n  $name: String!\n  $props: CreateProjectResourcePolicyInput!\n) {\n  create_project_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="c0683608e8a527146563ba5bd9fcad33";const i=l},37386:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProjectResourcePolicySettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_network_count",storageKey:null}],type:"ProjectResourcePolicy",abstractKey:null,hash:"949f6a93198024700bf15197f3b613f0"},i=l},25827:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyProjectResourcePolicy",kind:"LinkedField",name:"modify_project_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProjectResourcePolicySettingModalModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProjectResourcePolicySettingModalModifyMutation",selections:n},params:{cacheID:"aedc4eab77206f7ab189ccd3f2d938b3",id:null,metadata:{},name:"ProjectResourcePolicySettingModalModifyMutation",operationKind:"mutation",text:"mutation ProjectResourcePolicySettingModalModifyMutation(\n  $name: String!\n  $props: ModifyProjectResourcePolicyInput!\n) {\n  modify_project_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="3cd62195489eba58dd9693f1fc9df8ff";const i=l},47550:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteUserResourcePolicy",kind:"LinkedField",name:"delete_user_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserResourcePolicyListMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserResourcePolicyListMutation",selections:n},params:{cacheID:"7be7fa4bc2e6ce7666489318e415d769",id:null,metadata:{},name:"UserResourcePolicyListMutation",operationKind:"mutation",text:"mutation UserResourcePolicyListMutation(\n  $name: String!\n) {\n  delete_user_resource_policy(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="5b565e4db37c96850ac85a92cd4e0290";const i=l},87219:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"max_session_count_per_model_session",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"max_customized_image_count",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"user_resource_policies",plural:!0,selections:[e,n,o,l,i,a,t,{args:null,kind:"FragmentSpread",name:"UserResourcePolicySettingModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UserResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"user_resource_policies",plural:!0,selections:[e,n,o,l,i,a,t],storageKey:null}]},params:{cacheID:"00b0583474f74c417b06d53115787d3b",id:null,metadata:{},name:"UserResourcePolicyListQuery",operationKind:"query",text:'query UserResourcePolicyListQuery {\n  user_resource_policies {\n    id\n    name\n    created_at\n    max_vfolder_count @since(version: "23.09.6")\n    max_session_count_per_model_session @since(version: "23.09.10")\n    max_quota_scope_size @since(version: "23.09.2")\n    max_customized_image_count @since(version: "24.03.0")\n    ...UserResourcePolicySettingModalFragment\n  }\n}\n\nfragment UserResourcePolicySettingModalFragment on UserResourcePolicy {\n  id\n  name\n  max_vfolder_count @since(version: "23.09.6")\n  max_session_count_per_model_session @since(version: "23.09.10")\n  max_quota_scope_size @since(version: "23.09.2")\n  max_customized_image_count @since(version: "24.03.0")\n}\n'}}}();l.hash="be57da0a1c15efb970cb1e828500e6dc";const i=l},58399:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateUserResourcePolicy",kind:"LinkedField",name:"create_user_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserResourcePolicySettingModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserResourcePolicySettingModalCreateMutation",selections:n},params:{cacheID:"129c4a570d8ae1a075d9aa9261094c48",id:null,metadata:{},name:"UserResourcePolicySettingModalCreateMutation",operationKind:"mutation",text:"mutation UserResourcePolicySettingModalCreateMutation(\n  $name: String!\n  $props: CreateUserResourcePolicyInput!\n) {\n  create_user_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="9c00928ca86d4779838243df247257aa";const i=l},2548:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserResourcePolicySettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_session_count_per_model_session",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_customized_image_count",storageKey:null}],type:"UserResourcePolicy",abstractKey:null,hash:"d93790c2b9fef92baa6999ce770cd9da"},i=l},40605:(e,n,o)=>{o.r(n),o.d(n,{default:()=>i});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyUserResourcePolicy",kind:"LinkedField",name:"modify_user_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserResourcePolicySettingModalModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserResourcePolicySettingModalModifyMutation",selections:n},params:{cacheID:"f33ed379f4871e357183803b340a938a",id:null,metadata:{},name:"UserResourcePolicySettingModalModifyMutation",operationKind:"mutation",text:"mutation UserResourcePolicySettingModalModifyMutation(\n  $name: String!\n  $props: ModifyUserResourcePolicyInput!\n) {\n  modify_user_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="d50cbcfb63bfd30da81fea8968bb6436";const i=l},13765:(e,n,o)=>{o.d(n,{o:()=>l,z:()=>i});const l=1e6,i=1e6},17898:(e,n,o)=>{o.d(n,{RM:()=>r,WN:()=>t});var l=o(46976),i=o.n(l);function a(e){return null===e||void 0===e?"":"number"===typeof e||"boolean"===typeof e?String(e):`"${(e=i().isString(e)?e:JSON.stringify(e)).replace(/"/g,'""')}"`}const t=(e,n)=>{const o=URL.createObjectURL(e),l=document.createElement("a");l.href=o,l.download=n,l.click(),URL.revokeObjectURL(o)},r=(e,n,o)=>{const l=((e,n)=>{const o=i().map(e,(e=>i().omit(e,"__fragments","__fragmentOwner","__id"))),l=i().keys(o[0]),t=i().map(o,(e=>i().map(e,((e,o)=>{var l;return null!==n&&void 0!==n&&n[o]&&(null===(l=n[o])||void 0===l?void 0:l.call(n,e))||e})))).map((e=>e.map(a).join(","))).join("\n");return[l.map(a).join(","),t].join("\n")})(e,o),r=new Blob([l],{type:"text/csv"});t(r,`${n}.csv`)}},53767:(e,n,o)=>{o.a(e,(async(e,l)=>{try{o.d(n,{a:()=>t});var i=o(39768),a=e([i]);i=(a.then?(await a)():a)[0];const t=e=>{const[n,o]=(0,i.q)(`hiddenColumnKeys.${e}`);return[n,o]};l()}catch(t){l(t)}}))},45434:(e,n,o)=>{o.a(e,(async(e,l)=>{try{o.r(n),o.d(n,{default:()=>v});var i=o(81654),a=o(67712),t=o(52458),r=o(25132),s=o(72375),c=o(23441),u=o(80963),d=o(55093),m=o(33364),p=o(2647),y=o(79569),_=e([a,t,r]);[a,t,r]=_.then?(await _)():_;const g=(0,p.withDefault)(p.StringParam,"keypair"),v=()=>{const{t:e}=(0,m.Bd)(),[n]=(0,p.useQueryParam)("tab",g),o=(0,c.f0)(),l=(0,c.CX)(),_=null===l||void 0===l?void 0:l.supports("configure-user-resource-policy");return(0,y.jsx)(u.A,{activeTabKey:n,onTabChange:e=>{o({pathname:"/resource-policy",search:`?tab=${e}`},{params:{tab:e}})},tabList:(0,s.LY)([{key:"keypair",label:e("resourcePolicy.Keypair")},_&&{key:"user",label:e("resourcePolicy.User")},{key:"project",label:e("resourcePolicy.Project")}]),styles:{body:{padding:0,paddingTop:1,overflow:"hidden"}},children:(0,y.jsxs)(d.Suspense,{fallback:(0,y.jsx)(i.A,{}),children:["keypair"===n&&(0,y.jsx)(a.A,{}),"user"===n&&(0,y.jsx)(r.A,{}),"project"===n&&(0,y.jsx)(t.A,{})]})})};l()}catch(g){l(g)}}))},5901:(e,n,o)=>{o.d(n,{A:()=>a});var l=o(55093),i=function(e,n){return!Object.is(e,n)};const a=function(e,n){void 0===n&&(n=i);var o=(0,l.useRef)(),a=(0,l.useRef)();return n(a.current,e)&&(o.current=a.current,a.current=e),o.current}},25951:(e,n,o)=>{o.d(n,{A:()=>A});var l=o(55093),i=o(86435),a=o(62097),t=o.n(a),r=o(53049),s=o(55393),c=o(19541),u=o(81291),d=o(36861),m=o(87413),p=o(99142),y=o(79427),_=o(67905),g=o(18698),v=o(79827),x=o(8836);const f=(0,x.OF)("Popconfirm",(e=>(e=>{const{componentCls:n,iconCls:o,antCls:l,zIndexPopup:i,colorText:a,colorWarning:t,marginXXS:r,marginXS:s,fontSize:c,fontWeightStrong:u,colorTextHeading:d}=e;return{[n]:{zIndex:i,[`&${l}-popover`]:{fontSize:c},[`${n}-message`]:{marginBottom:s,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${n}-message-icon ${o}`]:{color:t,fontSize:c,lineHeight:1,marginInlineEnd:s},[`${n}-title`]:{fontWeight:u,color:d,"&:only-child":{fontWeight:"normal"}},[`${n}-description`]:{marginTop:r,color:a}},[`${n}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:s}}}}})(e)),(e=>{const{zIndexPopupBase:n}=e;return{zIndexPopup:n+60}}),{resetStyle:!1});var k=function(e,n){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&n.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(l=Object.getOwnPropertySymbols(e);i<l.length;i++)n.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(o[l[i]]=e[l[i]])}return o};const h=e=>{const{prefixCls:n,okButtonProps:o,cancelButtonProps:a,title:t,description:r,cancelText:s,okText:u,okType:v="primary",icon:x=l.createElement(i.A,null),showCancel:f=!0,close:k,onConfirm:h,onCancel:j,onPopupClick:P}=e,{getPrefixCls:b}=l.useContext(c.QO),[A]=(0,_.A)("Popconfirm",g.A.Popconfirm),S=(0,m.b)(t),C=(0,m.b)(r);return l.createElement("div",{className:`${n}-inner-content`,onClick:P},l.createElement("div",{className:`${n}-message`},x&&l.createElement("span",{className:`${n}-message-icon`},x),l.createElement("div",{className:`${n}-message-text`},S&&l.createElement("div",{className:`${n}-title`},S),C&&l.createElement("div",{className:`${n}-description`},C))),l.createElement("div",{className:`${n}-buttons`},f&&l.createElement(p.Ay,Object.assign({onClick:j,size:"small"},a),s||(null===A||void 0===A?void 0:A.cancelText)),l.createElement(d.A,{buttonProps:Object.assign(Object.assign({size:"small"},(0,y.DU)(v)),o),actionFn:h,close:k,prefixCls:b("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},u||(null===A||void 0===A?void 0:A.okText))))},j=e=>{const{prefixCls:n,placement:o,className:i,style:a}=e,r=k(e,["prefixCls","placement","className","style"]),{getPrefixCls:s}=l.useContext(c.QO),u=s("popconfirm",n),[d]=f(u);return d(l.createElement(v.Ay,{placement:o,className:t()(u,i),style:a,content:l.createElement(h,Object.assign({prefixCls:u},r))}))};var P=function(e,n){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&n.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(l=Object.getOwnPropertySymbols(e);i<l.length;i++)n.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(e,l[i])&&(o[l[i]]=e[l[i]])}return o};const b=l.forwardRef(((e,n)=>{var o,a;const{prefixCls:d,placement:m="top",trigger:p="click",okType:y="primary",icon:_=l.createElement(i.A,null),children:g,overlayClassName:v,onOpenChange:x,onVisibleChange:k}=e,j=P(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:b}=l.useContext(c.QO),[A,S]=(0,r.A)(!1,{value:null!==(o=e.open)&&void 0!==o?o:e.visible,defaultValue:null!==(a=e.defaultOpen)&&void 0!==a?a:e.defaultVisible}),C=(e,n)=>{S(e,!0),null===k||void 0===k||k(e),null===x||void 0===x||x(e,n)},M=b("popconfirm",d),R=t()(M,v),[K]=f(M);return K(l.createElement(u.A,Object.assign({},(0,s.A)(j,["title"]),{trigger:p,placement:m,onOpenChange:(n,o)=>{const{disabled:l=!1}=e;l||C(n,o)},open:A,ref:n,overlayClassName:R,content:l.createElement(h,Object.assign({okType:y,icon:_},e,{prefixCls:M,close:e=>{C(!1,e)},onConfirm:n=>{var o;return null===(o=e.onConfirm)||void 0===o?void 0:o.call(void 0,n)},onCancel:n=>{var o;C(!1,n),null===(o=e.onCancel)||void 0===o||o.call(void 0,n)}})),"data-popover-inject":!0}),g))}));b._InternalPanelDoNotUseOrYouWillBeFired=j;const A=b},10709:(e,n,o)=>{o.d(n,{A:()=>l});const l=(0,o(26490).A)("Microchip",[["path",{d:"M18 12h2",key:"quuxs7"}],["path",{d:"M18 16h2",key:"zsn3lv"}],["path",{d:"M18 20h2",key:"9x5y9y"}],["path",{d:"M18 4h2",key:"1luxfb"}],["path",{d:"M18 8h2",key:"nxqzg"}],["path",{d:"M4 12h2",key:"1ltxp0"}],["path",{d:"M4 16h2",key:"8a5zha"}],["path",{d:"M4 20h2",key:"27dk57"}],["path",{d:"M4 4h2",key:"10groj"}],["path",{d:"M4 8h2",key:"18vq6w"}],["path",{d:"M8 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-1.5c-.276 0-.494.227-.562.495a2 2 0 0 1-3.876 0C9.994 2.227 9.776 2 9.5 2z",key:"1681fp"}]])}}]);
//# sourceMappingURL=5434.5743a05e.chunk.js.map