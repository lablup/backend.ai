"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[3835],{95762:(e,n,l)=>{l.d(n,{A:()=>d});var a=l(72338),i=l(66596),s=l(12221),t=l(46976),r=l.n(t),o=(l(55093),l(79569));const d=e=>{let{title:n,valueLabel:l,percent:t,width:d,strokeColor:u,labelStyle:c,progressStyle:m,size:g="small"}=e;const{token:p}=i.A.useToken(),y="small"===g?p.fontSizeSM:"middle"===g?p.fontSize:p.fontSizeLG;return(0,o.jsxs)(a.A,{style:{padding:1,border:`1px solid ${p.colorBorder}`,borderRadius:3,backgroundColor:p.colorBgContainerDisabled,...r().isNumber(d)||r().isString(d)?{width:d}:{flex:1},...m},direction:"column",align:"stretch",children:[(0,o.jsx)(a.A,{style:{height:"100%",width:`${!t||r().isNaN(t)?0:r().min([t,100])}%`,position:"absolute",left:0,top:0,backgroundColor:null!==u&&void 0!==u?u:p.colorSuccess,opacity:.7,zIndex:0,overflow:"hidden"}}),(0,o.jsxs)(a.A,{direction:"row",justify:"between",children:[(0,o.jsx)(s.A.Text,{style:{fontSize:y,...c},children:n}),(0,o.jsx)(s.A.Text,{style:{fontSize:y,color:r().isNaN(t)||r().isUndefined(t)?p.colorTextDisabled:void 0,...c},children:l})]})]})}},61823:(e,n,l)=>{l.d(n,{A:()=>j});var a=l(17898),i=l(23441),s=l(7971),t=l(69949),r=l(55093);var o,d=l(88543),u=l(22407),c=l(72338),m=l(99159),g=l(14188),p=l(66596),y=l(28354),v=l(12221),h=l(92047),k=l(2556),f=l(99142),F=l(46976),S=l.n(F),x=l(61507),_=l(33364),b=l(63821),A=l(79569);const j=e=>{var n,F,j,T,K,C;let{sessionFrgmt:N,...w}=e;const L=(0,i.CX)(),{token:R}=p.A.useToken(),E=(0,s.Am)(),I=(0,b.useFragment)(void 0!==o?o:o=l(50029),N),M=(null===I||void 0===I||null===(n=I.kernel_nodes)||void 0===n||null===(F=n.edges)||void 0===F?void 0:F.map((e=>null===e||void 0===e?void 0:e.node)))||[],[D,B]=(0,r.useState)((null===(j=S().find(M,(e=>"main"===(null===e||void 0===e?void 0:e.cluster_role))))||void 0===j?void 0:j.row_id)||(null===(T=M[0])||void 0===T?void 0:T.row_id));(0,r.useEffect)((()=>{!1===w.open&&B(void 0)}),[w.open]);const{data:U,refetch:q,isPending:P,isRefetching:$,dataUpdatedAt:z}=(0,t.nN)({queryKey:["containerLog",null===I||void 0===I?void 0:I.row_id,null===I||void 0===I?void 0:I.access_key,D,w.open],queryFn:async()=>w.open&&null!==I&&void 0!==I&&I.row_id&&null!==I&&void 0!==I&&I.access_key&&D?await L.get_logs(null===I||void 0===I?void 0:I.row_id,null===I||void 0===I?void 0:I.access_key,D,15e3).then((e=>e.result.logs)):"",staleTime:5e3}),[O,{resetPrevious:G}]=function(e,n){let{initialPrev:l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=(0,r.useRef)(l),[i,s]=(0,r.useState)({}),t=(0,r.useMemo)(e,n),o=(0,r.useMemo)((()=>a.current),[...n,i]);return(0,r.useEffect)((()=>{a.current=t}),n),[{previous:o,current:t},{resetPrevious:()=>{a.current=l,s({})}}]}((()=>(null===U||void 0===U?void 0:U.split("\n").length)||0),[U]),{md:V}=y.Ay.useBreakpoint(),{t:Q}=(0,_.Bd)();return(0,A.jsx)(d.A,{title:(0,A.jsxs)(c.A,{style:{maxWidth:"100%"},gap:"sm",children:[(0,A.jsx)(v.A.Title,{level:4,style:{margin:0,flexShrink:0},children:"Logs"}),I?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(v.A.Text,{style:{fontWeight:"normal"},ellipsis:!0,children:null===I||void 0===I?void 0:I.name}),(0,A.jsxs)(v.A.Text,{style:{fontWeight:"normal",fontFamily:"monospace"},copyable:{text:null===I||void 0===I?void 0:I.row_id,tooltips:Q("button.CopySomething",{name:Q("session.SessionId")})},children:["(",V?null===I||void 0===I?void 0:I.row_id:null===I||void 0===I||null===(K=I.row_id.split("-"))||void 0===K?void 0:K[0],")"]})]}):null]}),width:"100%",styles:{header:{width:"100%"},body:{height:"calc(100vh - 100px)",maxHeight:"calc(100vh - 100px)"}},...w,footer:null,destroyOnClose:!0,children:(0,A.jsxs)(c.A,{direction:"column",align:"start",style:{height:"100%"},gap:"sm",children:[(0,A.jsxs)(c.A,{gap:"sm",wrap:"wrap",children:["Kernel Role",(0,A.jsx)(u.A,{value:D,onChange:e=>{B(e),G()},autoSelectOption:!0,options:S().chain(null===I||void 0===I||null===(C=I.kernel_nodes)||void 0===C?void 0:C.edges).sortBy((e=>{var n,l;return`${null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.cluster_role} ${null===e||void 0===e||null===(l=e.node)||void 0===l?void 0:l.cluster_idx}`})).map((e=>{var n,l,a,i,s;return{label:(0,A.jsxs)(A.Fragment,{children:[null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.cluster_role,"main"!==(null===e||void 0===e||null===(l=e.node)||void 0===l?void 0:l.cluster_role)?null===e||void 0===e||null===(a=e.node)||void 0===a?void 0:a.cluster_idx:"","admin"===E||"superadmin"===E?(0,A.jsxs)(v.A.Text,{style:{fontFamily:"monospace",fontSize:R.fontSizeSM},type:"secondary",children:["(",((null===e||void 0===e||null===(i=e.node)||void 0===i?void 0:i.row_id)||"").substring(0,5),")"]}):null]}),value:null===e||void 0===e||null===(s=e.node)||void 0===s?void 0:s.row_id}})).value()}),(0,A.jsx)(h.A,{type:"vertical"}),(0,A.jsx)(k.A,{title:Q("button.Download"),children:(0,A.jsx)(f.Ay,{size:"middle",icon:(0,A.jsx)(x.A,{}),disabled:P||$,onClick:()=>{const e=new Blob([U||""],{type:"text/plain"});(0,a.WN)(e,`${(null===I||void 0===I?void 0:I.name)||"session"}-logs-${D}-${(new Date).toISOString()}.txt`)}})}),(0,A.jsx)(k.A,{title:Q("button.Refresh"),children:(0,A.jsx)(f.Ay,{size:"middle",loading:P||$,icon:(0,A.jsx)(m.A,{}),onClick:()=>q()})})]}),(0,A.jsx)("div",{style:{height:"calc(100% - 50px)",alignSelf:"stretch",border:`1px solid ${R.colorBorder}`,overflow:"hidden"},children:(0,A.jsx)(g.jB,{startFollowing:!0,render:e=>{let{follow:n,onScroll:l}=e;return(0,A.jsx)(g.FT,{caseInsensitive:!0,enableSearch:!0,enableSearchNavigation:!0,selectableLines:!0,text:U||"",highlight:O.previous,extraLines:1,follow:n,onScroll:l})}},z)})]})})}},26480:(e,n,l)=>{l.d(n,{A:()=>v});var a,i,s=l(7971),t=l(60661),r=l(66596),o=l(79597),d=l(1364),u=l(85540),c=l(86753),m=l(55093),g=l(33364),p=l(63821),y=l(79569);const v=e=>{let{component:n=u.A,sessionFrgmt:v,editable:h,style:k,...f}=e;const F=(0,p.useFragment)(void 0!==a?a:a=l(33589),v),[S,x]=(0,m.useState)(F.name),[_]=(0,s.U6)(),[b,A]=(0,p.useMutation)(void 0!==i?i:i=l(93178)),{t:j}=(0,g.Bd)(),{token:T}=r.A.useToken(),[K,C]=(0,m.useState)(!1),N=!["RESTARTING","PREPARING","PREPARED","CREATING","PULLING"].includes(F.status||""),w=h&&_.uuid===F.user_id&&N;return(0,y.jsxs)(y.Fragment,{children:[(!K||A)&&(0,y.jsx)(n,{editable:!(!w||A)&&{onStart:()=>{C(!0)},triggerType:["icon","text"]},copyable:!0,style:{...k,color:A?T.colorTextTertiary:null===k||void 0===k?void 0:k.color},...f,children:A?S:F.name}),K&&!A&&(0,y.jsx)(o.A,{onFinish:e=>{C(!1),x(e.sessionName),b({variables:{input:{id:F.id,name:e.sessionName}},onCompleted(e,n){},onError(e){}})},initialValues:{sessionName:F.name},style:{flex:1},children:(0,y.jsx)(o.A.Item,{name:"sessionName",rules:(0,t.j)(j),style:{margin:0},children:(0,y.jsx)(d.A,{size:"large",suffix:(0,y.jsx)(c.A,{style:{fontSize:"0.8em",color:T.colorTextTertiary}}),autoFocus:!0,onKeyDown:e=>{"Escape"===e.key&&C(!1)}})})})]})}},49354:(e,n,l)=>{l.d(n,{A:()=>z});var a=l(23441);var i,s=l(25905),t=l(88543),r=l(72338),o=l(12221),d=l(76082),u=l(92047),c=l(79597),m=l(1364),g=l(55093),p=l(33364),y=l(63821),v=l(79569);const h=e=>{let{sessionFrgmt:n,onRequestClose:h,...k}=e;const{t:f}=(0,p.Bd)(),F=(0,g.useRef)(null),S=(0,a.CX)(),{upsertNotification:x}=(0,s.js)(),[_,b]=(0,g.useState)(!1),A=(0,y.useFragment)(void 0!==i?i:i=l(5545),n);return(0,v.jsx)(t.A,{title:f("session.CommitSession"),onOk:()=>(()=>{var e;b(!0),null===F||void 0===F||null===(e=F.current)||void 0===e||e.validateFields().then((e=>{var n;S.computeSession.convertSessionToImage(null!==(n=null===A||void 0===A?void 0:A.name)&&void 0!==n?n:"",e.imageName).then((e=>{h(),x({key:"commitSession:"+(null===A||void 0===A?void 0:A.name),backgroundTask:{taskId:e.task_id,status:"pending",statusDescriptions:{pending:f("session.CommitOnGoing"),resolved:f("session.CommitFinished"),rejected:f("session.CommitFailed")}},duration:0,message:"commitSession: "+(null===A||void 0===A?void 0:A.name),open:!0})})).catch((e=>{throw null!==e&&void 0!==e&&e.message?new Error(e.message):e})).finally((()=>{b(!1)}))})).catch((e=>{console.log(e)}))})(),okButtonProps:{loading:_},onCancel:h,...k,destroyOnClose:!0,children:(0,v.jsxs)(r.A,{direction:"column",gap:"xs",align:"stretch",style:{overflow:"hidden"},children:[(0,v.jsx)(o.A.Text,{children:f("session.DescCommitSession")}),(0,v.jsxs)(d.A,{bordered:!0,size:"small",column:1,children:[(0,v.jsx)(d.A.Item,{label:f("session.SessionName"),children:null===A||void 0===A?void 0:A.name}),(0,v.jsx)(d.A.Item,{label:f("session.SessionId"),children:null===A||void 0===A?void 0:A.row_id})]}),(0,v.jsx)(u.A,{style:{marginTop:12,marginBottom:12}}),(0,v.jsx)(c.A,{ref:F,children:(0,v.jsx)(c.A.Item,{label:f("session.CommitImageName"),name:"imageName",required:!0,rules:[{required:!0},{min:4,max:32},{pattern:/^[a-zA-Z0-9-_.]+$/,message:f("session.Validation.EnterValidSessionName")}],children:(0,v.jsx)(m.A,{placeholder:f("inputLimit.4to32chars")})})})]})})};var k,f,F=l(61823),S=l(7971),x=l(69949),_=l(81530),b=l(57613),A=l(88221),j=l(80963),T=l(77946),K=l(46976),C=l.n(K);const N=(0,T.rU)((e=>{let{css:n,token:l}=e;return{custom:n`
      ul {
        list-style-type: circle;
        padding-left: ${l.paddingMD}px;
      }
    `}})),w=async e=>{let n,l;try{"GET"===e.method&&(e.body=void 0),n=await fetch(e.uri,e);const a=n.headers.get("Content-Type");if(null===a){if(l=n.ok,!n.ok)throw new Error(n)}else l=a.startsWith("application/json")||a.startsWith("application/problem+json")?await n.json():a.startsWith("text/")?await n.text():await n.blob();if(!n.ok)throw l}catch(a){return n}return l},L=async(e,n,l)=>{let a="http://127.0.0.1:5050/";if(void 0!==globalThis.__local_proxy&&void 0!==globalThis.__local_proxy.url?a=globalThis.__local_proxy.url:void 0!==l._config.proxyURL&&(a=l._config.proxyURL),void 0!==e&&void 0!==n){const i=await(async(e,n,l)=>{if(!0===l.debug){var a,i,s,t;if(null!==(a=globalThis.appLauncher)&&void 0!==a&&null!==(i=a.forceUseV1Proxy)&&void 0!==i&&i.checked)return"v1";if(null!==(s=globalThis.appLauncher)&&void 0!==s&&null!==(t=s.forceUseV2Proxy)&&void 0!==t&&t.checked)return"v2"}return globalThis.isElectron?"v1":l.scalingGroup.getWsproxyVersion(e,n).then((e=>e.wsproxy_version))})(e,n,l);"v1"!==i&&(a=new URL(`${i}/`,a).href)}return a},R=e=>{var n;let{sessionFrgmts:i,onRequestClose:d,...u}=e;const{t:c}=(0,p.Bd)(),{styles:m}=N(),h=(0,y.useFragment)(void 0!==k?k:k=l(5136),i),[F,T]=(0,g.useState)(!1),K=(0,S.Am)(),R=(0,a.CX)(),E=(0,_.hd)(),I=(0,x.ET)({mutationFn:async e=>(async(e,n,l,a)=>{const i=await L(e.scaling_group,l,a),s={method:"GET",uri:new URL(`proxy/${n}/${e.row_id}`,i).href};return w(s).then((l=>{let a=new URL(`proxy/${n}/${e.row_id}/delete`,i);return localStorage.getItem("backendaiwebui.appproxy-permit-key")&&(a.searchParams.set("permit_key",localStorage.getItem("backendaiwebui.appproxy-permit-key")||""),a=new URL(a.href)),void 0===l||404===l.code||w({method:"GET",uri:a.href,credentials:"include",mode:"cors"})}))})(e,R._config.accessKey,E.id,R).catch((e=>({error:e}))).then((n=>{const l=null===n||void 0===n?void 0:n.error;if(void 0===l||l&&l.message&&(404===l.statusCode||500===l.statusCode))return R.destroy(e.row_id,R._config.accessKey,F);throw l}))}),M=(0,y.useRelayEnvironment)(),D=(0,b.b)(),{upsertNotification:B}=(0,s.js)();return(0,v.jsx)(t.A,{centered:!0,title:c("session.TerminateSession"),open:!1,confirmLoading:I.isPending,onOk:()=>{var e;if(null!==(e=h[0])&&void 0!==e&&e.row_id){const e=h[0];I.mutateAsync(e).then((()=>{T(!1),d(!0)})).catch((e=>{B({message:D.relieve(null===e||void 0===e?void 0:e.title),description:null===e||void 0===e?void 0:e.message,open:!0})})).finally((()=>{const n=new CustomEvent("backend-ai-session-list-refreshed",{detail:"running"});return document.dispatchEvent(n),(0,y.fetchQuery)(M,void 0!==f?f:f=l(34185),{id:e.id,project_id:E.id}).toPromise()}))}},okText:c(F?"button.ForceTerminate":"session.Terminate"),okType:"danger",okButtonProps:{type:F?"primary":"default"},onCancel:()=>{T(!1),d(!1)},...u,children:(0,v.jsxs)(r.A,{className:m.custom,direction:"column",align:"stretch",gap:"xs",children:[(0,v.jsx)(o.A.Text,{children:c("userSettings.SessionTerminationDialog")}),(0,v.jsx)(o.A.Text,{mark:!0,children:1===h.length?null===(n=h[0])||void 0===n?void 0:n.name:`${h.length} sessions`}),(0,v.jsx)(A.A,{checked:F,onChange:e=>{T(e.target.checked)},children:c("button.ForceTerminate")}),F&&(0,v.jsxs)(j.A,{children:[(0,v.jsx)(o.A.Paragraph,{type:"danger",children:c("session.ForceTerminateWarningMsg")}),(0,v.jsxs)("ul",{children:[(0,v.jsx)("li",{children:c("session.ForceTerminateWarningMsg2")}),(0,v.jsx)("li",{children:c("session.ForceTerminateWarningMsg3")})]}),"superadmin"===K&&(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(j.A,{type:"inner",title:c("session.ContainerToCleanUp"),children:C().chain(h).map((e=>{var n;return null===e||void 0===e||null===(n=e.kernel_nodes)||void 0===n?void 0:n.edges})).map((e=>null===e||void 0===e?void 0:e.map((e=>null===e||void 0===e?void 0:e.node)))).flatten().groupBy("agent_id").map(((e,n)=>(0,v.jsxs)(v.Fragment,{children:[n,(0,v.jsx)("ul",{children:e.map((e=>(0,v.jsx)("li",{children:(0,v.jsx)(o.A.Text,{copyable:!0,children:e.container_id})},e.container_id)))},n)]}))).value()})})]})]})})};var E,I=l(91133),M=l(66596),D=l(2556),B=l(99142),U=l(6299),q=l(93340),P=l(83006);const $=e=>!["TERMINATED","CANCELLED"].includes((null===e||void 0===e?void 0:e.status)||""),z=e=>{const{t:n}=(0,p.Bd)(),{token:i}=M.A.useToken(),s={runTerminal:e=>{globalThis.appLauncher.runTerminal(e)},showLauncher:e=>{}},t=(0,a.CX)(),r=(0,y.useFragment)(void 0!==E?E:E=l(79825),e.sessionFrgmt),[o,d]=(0,g.useState)(!1),[u,c]=(0,g.useState)(!1),[m,k]=(0,g.useState)(!1);return r&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(D.A,{title:n("session.ExecuteTerminalApp"),children:(0,v.jsx)(B.Ay,{disabled:!$(r),icon:(0,v.jsx)(U.A,{}),onClick:()=>{s.runTerminal(null===r||void 0===r?void 0:r.row_id)}})}),(0,v.jsx)(R,{sessionFrgmts:[r],open:o,onRequestClose:()=>{d(!1)}}),(0,v.jsx)(D.A,{title:n("session.SeeContainerLogs"),children:(0,v.jsx)(B.Ay,{icon:(0,v.jsx)(q.A,{}),onClick:()=>{c(!0)}})}),(0,v.jsx)(F.A,{sessionFrgmt:r,open:u,onCancel:()=>{c(!1)}}),(0,v.jsx)(D.A,{title:n("session.RequestContainerCommit"),children:(0,v.jsx)(B.Ay,{disabled:(!t.supports("image-commit")||!t._config.enableContainerCommit)&&"system"!==r.type,icon:(0,v.jsx)(I.A,{style:{fontSize:14}}),onClick:()=>{k(!0)}})}),(0,v.jsx)(h,{sessionFrgmt:r,open:m,onRequestClose:()=>k(!1)}),(0,v.jsx)(D.A,{title:n("session.TerminateSession"),children:(0,v.jsx)(B.Ay,{disabled:!$(r),icon:(0,v.jsx)(P.A,{color:$(r)?i.colorError:void 0}),onClick:()=>{d(!0)}})})]})}},61207:(e,n,l)=>{l.d(n,{A:()=>m});var a,i=l(23441),s=l(6070),t=l(91238),r=l(78502),o=l.n(r),d=(l(55093),l(33364)),u=l(63821),c=l(79569);const m=e=>{let{sessionFrgmt:n}=e;const r=(0,i.CX)(),{t:m}=(0,d.Bd)(),g=(0,u.useFragment)(void 0!==a?a:a=l(93880),n);return(0,c.jsxs)(c.Fragment,{children:[o()(g.created_at).format("lll"),(0,c.jsx)(s.A,{callback:()=>null!==g&&void 0!==g&&g.created_at?r.utils.elapsedTime(g.created_at,null===g||void 0===g?void 0:g.terminated_at):"-",delay:1e3,render:e=>(0,c.jsx)(t.A,{values:[{label:m("session.ElapsedTime")},{label:e}]})})]})}},5415:(e,n,l)=>{l.d(n,{A:()=>y});var a,i=l(72338),s=l(68260),t=l(66596),r=l(25913),o=l(46976),d=l.n(o),u=(l(55093),l(63821)),c=l(79569);const m={RESTARTING:"blue",PREPARING:"blue",PREPARED:"blue",CREATING:"blue",PULLING:"blue",RUNNING:"green",PENDING:"green",SCHEDULED:"green",ERROR:"red"},g=e=>["RESTARTING","TERMINATING","PENDING","PREPARING","CREATING","PULLING"].includes((null===e||void 0===e?void 0:e.status)||""),p={"no-available-instances":"red","failed-to-start":"red","creation-failed":"red"},y=e=>{let{sessionFrgmt:n}=e;const o=(0,u.useFragment)(void 0!==a?a:a=l(53460),n),{token:y}=t.A.useToken();return o?d().isEmpty(o.status_info)?(0,c.jsx)(r.A,{color:o.status?d().get(m,o.status):void 0,icon:g(o)?(0,c.jsx)(s.A,{spin:!0}):void 0,children:o.status||" "}):(0,c.jsxs)(i.A,{children:[(0,c.jsx)(r.A,{style:{margin:0,zIndex:1},color:o.status?d().get(m,o.status):void 0,children:o.status}),(0,c.jsx)(r.A,{style:{margin:0,marginLeft:-1,borderStyle:"dashed",color:o.status_info&&d().get(p,o.status_info)?void 0:y.colorTextSecondary},color:o.status_info?d().get(p,o.status_info):void 0,children:o.status_info})]}):null}},89953:(e,n,l)=>{l.d(n,{A:()=>u});var a,i=l(25913),s=l(46976),t=l.n(s),r=(l(55093),l(63821)),o=l(79569);const d={INTERACTIVE:"green",BATCH:"darkgreen",INFERENCE:"blue"},u=e=>{let{sessionFrgmt:n}=e;const s=(0,r.useFragment)(void 0!==a?a:a=l(15934),n);return(0,o.jsx)(i.A,{color:t().get(d,t().toUpper(s.type||"")),children:t().toUpper(s.type||"")})}},5545:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ContainerCommitModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},action:"NONE",path:"row_id"}],type:"ComputeSessionNode",abstractKey:null,hash:"8bcd294de1ffd3f00f6ec0ed7177c304"},i=a},50029:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ContainerLogModalFragment",selections:[e,{kind:"RequiredField",field:n,action:"NONE",path:"row_id"},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"ComputeSessionNode",abstractKey:null}}();a.hash="59dda81185d3d874cd635adcae2ae9d4";const i=a},33589:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditableSessionNameFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"priority",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"9c053b92b568a9b132f7615d1869f32b"},i=a},93178:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"ModifyComputeSessionPayload",kind:"LinkedField",name:"modify_compute_session",plural:!1,selections:[{alias:null,args:null,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"item",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"EditableSessionNameMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"EditableSessionNameMutation",selections:n},params:{cacheID:"bea4b6405958ab3b9796129b5807d0fa",id:null,metadata:{},name:"EditableSessionNameMutation",operationKind:"mutation",text:"mutation EditableSessionNameMutation(\n  $input: ModifyComputeSessionInput!\n) {\n  modify_compute_session(input: $input) {\n    item {\n      id\n      name\n    }\n  }\n}\n"}}}();a.hash="92003994eaa19ceec71d4fe2efb299cd";const i=a},79825:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionActionButtonsFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},action:"NONE",path:"row_id"},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commit_status",storageKey:null},{args:null,kind:"FragmentSpread",name:"TerminateSessionModalFragment"},{args:null,kind:"FragmentSpread",name:"ContainerLogModalFragment"},{args:null,kind:"FragmentSpread",name:"ContainerCommitModalFragment"}],type:"ComputeSessionNode",abstractKey:null,hash:"691b7c3c1673640d97620822f4fff09f"},i=a},93880:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionReservationFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"terminated_at",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"73f2fc395c80c1bf672ef9d0fea66787"},i=a},53460:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionStatusTagFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status_info",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"28d44a009b8d8ecc51f60af3fc9ef8c8"},i=a},15934:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionTypeTagFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"6d4ab2b738125ee81d47483324695349"},i=a},5136:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"TerminateSessionModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},action:"NONE",path:"scaling_group"},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"agent_id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"0987c567ddd892540d949ccabd005e2b"},i=a},34185:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"project_id"}],n=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"project_id",variableName:"project_id"}],concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"TerminateSessionModalRefetchQuery",selections:n,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"TerminateSessionModalRefetchQuery",selections:n},params:{cacheID:"42872ac8084736aaf26675f9531456db",id:null,metadata:{},name:"TerminateSessionModalRefetchQuery",operationKind:"query",text:"query TerminateSessionModalRefetchQuery(\n  $id: GlobalIDField!\n  $project_id: UUID!\n) {\n  compute_session_node(id: $id, project_id: $project_id) {\n    id\n    status\n  }\n}\n"}}}();a.hash="6c928af0802a6732e5237c3f6c46db99";const i=a},59737:(e,n,l)=>{l.a(e,(async(e,a)=>{try{l.d(n,{A:()=>L});var i,s,t=l(32715),r=l(72375),o=l(7971),d=l(81530),u=l(80424),c=l(26480),m=l(49354),g=l(61207),p=l(5415),y=l(89953),v=l(72338),h=l(90184),k=l(95950),f=l(66596),F=l(28354),S=l(38398),x=l(99142),_=l(76082),b=l(12221),A=l(2556),j=l(25913),T=l(69265),K=l(33364),C=l(63821),N=l(79569),w=e([u]);u=(w.then?(await w)():w)[0];const L=e=>{var n;let{id:a,fetchKey:w="initial"}=e;const{t:L}=(0,K.Bd)(),{token:R}=f.A.useToken(),E=(0,d.hd)(),I=(0,o.Am)(),{md:M}=F.Ay.useBreakpoint(),{session_for_project_id:D}=(0,C.useLazyLoadQuery)(void 0!==i?i:i=l(66427),{uuid:a},{fetchPolicy:"network-only"}),{session:B,legacy_session:U}=(0,C.useLazyLoadQuery)(void 0!==s?s:s=l(4078),{id:(0,r.wc)("ComputeSessionNode",a),uuid:a,project_id:(null===D||void 0===D?void 0:D.group_id)||E.id},{fetchPolicy:"network-only",fetchKey:w}),q=(null===U||void 0===U?void 0:U.image)&&(null===U||void 0===U?void 0:U.architecture)&&U.image+"@"+U.architecture;return B?(0,N.jsxs)(v.A,{direction:"column",gap:"sm",align:"stretch",children:[(null===D||void 0===D?void 0:D.group_id)!==E.id&&(0,N.jsx)(S.A,{message:L("session.NotInProject"),type:"warning",showIcon:!0}),(0,N.jsxs)(v.A,{direction:"row",justify:"between",align:"start",style:{alignSelf:"stretch"},gap:"sm",children:[(0,N.jsx)(c.A,{sessionFrgmt:B,component:T.A,level:3,style:{margin:0},editable:!0}),(0,N.jsx)(x.Ay.Group,{size:"large",children:(0,N.jsx)(m.A,{sessionFrgmt:B})})]}),(0,N.jsxs)(_.A,{bordered:!0,column:M?2:1,children:[(0,N.jsx)(_.A.Item,{label:L("session.SessionId"),span:M?2:1,children:(0,N.jsx)(b.A.Text,{copyable:!0,style:{fontFamily:"monospace"},children:B.row_id})}),("admin"===I||"superadmin"===I)&&(0,N.jsx)(_.A.Item,{label:L("credential.UserID"),span:M?2:1,children:null===U||void 0===U?void 0:U.user_email}),(0,N.jsx)(_.A.Item,{label:L("session.Status"),contentStyle:{display:"flex",gap:R.marginSM},children:(0,N.jsx)(p.A,{sessionFrgmt:B})}),(0,N.jsx)(_.A.Item,{label:L("session.SessionType"),children:(0,N.jsx)(y.A,{sessionFrgmt:B})}),(0,N.jsx)(_.A.Item,{label:L("session.launcher.Environments"),children:q?(0,N.jsxs)(v.A,{gap:"sm",children:[(0,N.jsx)(h.A,{image:q}),(0,N.jsx)(v.A,{children:(0,N.jsx)(t.Ay,{image:q})})]}):"-"}),(0,N.jsx)(_.A.Item,{label:L("session.launcher.MountedFolders"),children:null===U||void 0===U||null===(n=U.mounts)||void 0===n?void 0:n.join(", ")}),(0,N.jsx)(_.A.Item,{label:L("session.launcher.ResourceAllocation"),children:(0,N.jsxs)(v.A,{gap:"sm",wrap:"wrap",children:[(0,N.jsx)(A.A,{title:L("session.ResourceGroup"),children:(0,N.jsx)(j.A,{children:B.scaling_group})}),(0,N.jsx)(u.ResourceNumbersOfSession,{resource:JSON.parse(B.requested_slots||"{}")})]})}),(0,N.jsx)(_.A.Item,{label:L("session.Agent"),children:B.agent_ids||"-"}),(0,N.jsx)(_.A.Item,{label:L("session.Reservation"),span:M?2:1,children:(0,N.jsx)(v.A,{gap:"xs",wrap:"wrap",children:(0,N.jsx)(g.A,{sessionFrgmt:B})})}),(0,N.jsx)(_.A.Item,{label:"Resource Usage",span:M?2:1,children:(0,N.jsx)(k.A,{sessionFrgmt:B})})]})]}):(0,N.jsx)(S.A,{showIcon:!0,message:L("session.SessionNotFound"),type:"error",description:a})};a()}catch(L){a(L)}}))},33835:(e,n,l)=>{l.a(e,(async(e,a)=>{try{l.d(n,{A:()=>y});var i=l(23441),s=l(59737),t=l(99159),r=l(80939),o=l(2556),d=l(99142),u=l(16954),c=l(55093),m=l(33364),g=l(79569),p=e([s]);s=(p.then?(await p)():p)[0];const y=e=>{let{sessionId:n,...l}=e;const{t:a}=(0,m.Bd)();(0,i.CX)();const[p,y]=(0,c.useTransition)(),[v,h]=(0,i.Tw)("first");return(0,g.jsx)(r.A,{title:a("session.SessionInfo"),width:800,keyboard:!1,...l,open:!!n,onClose:e=>{var n;null===(n=l.onClose)||void 0===n||n.call(l,e)},extra:(0,g.jsx)(o.A,{title:a("button.Refresh"),children:(0,g.jsx)(d.Ay,{loading:p,icon:(0,g.jsx)(t.A,{}),onClick:()=>{y((()=>{h()}))}})}),children:(0,g.jsx)(c.Suspense,{fallback:(0,g.jsx)(u.A,{}),children:n&&(0,g.jsx)(s.A,{id:n,fetchKey:v})})})};a()}catch(y){a(y)}}))},95950:(e,n,l)=>{l.d(n,{A:()=>f});var a,i=l(72375),s=l(7971),t=l(95762),r=l(72338),o=l(66596),d=l(38926),u=l(63340),c=l(12221),m=l(2556),g=l(43391),p=l(46976),y=l.n(p),v=l(55093),h=l(63821),k=l(79569);const f=e=>{var n,p,f,F,S,x,_,b,A,j,T,K,C,N,w,L,R,E,I;let{sessionFrgmt:M,size:D="default"}=e;const{token:B}=o.A.useToken(),{mergedResourceSlots:U}=(0,s.Hv)(),q=(0,h.useFragment)(void 0!==a?a:a=l(40379),M),P=y().get(q,"kernel_nodes.edges[0].node"),$=(0,v.useMemo)((()=>{var e;return JSON.parse(null!==(e=null===P||void 0===P?void 0:P.occupied_slots)&&void 0!==e?e:"{}")}),[null===P||void 0===P?void 0:P.occupied_slots]),z=y().keysIn($),O=JSON.parse(null!==(n=y().get(q,"kernel_nodes.edges[0].node.live_stat"))&&void 0!==n?n:"{}"),G=(0,v.useMemo)((()=>Object.keys(O).sort(((e,n)=>{const l=e.includes("_util"),a=n.includes("_util"),i=e.includes("_mem"),s=n.includes("_mem");return l&&!a?-1:!l&&a?1:i&&!s?-1:!i&&s?1:0})).reduce(((e,n)=>(e[n]=O[n],e)),{})),[O]),V=function(e,n){var l,a,s,t;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return`${null!==(l=null===(a=(0,i.Is)(e,"g",r))||void 0===a?void 0:a.numberFixed)&&void 0!==l?l:"-"} / ${null!==(s=null===(t=(0,i.Is)(n,"g",r))||void 0===t?void 0:t.numberFixed)&&void 0!==s?s:"-"} GiB`};return(0,k.jsxs)(d.A,{gutter:[16,16],children:[null!==G&&void 0!==G&&G.cpu_util?(0,k.jsx)(u.A,{xs:24,sm:12,children:(0,k.jsx)(r.A,{direction:"column",align:"stretch",children:"default"===D?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(c.A.Text,{children:null===U||void 0===U||null===(p=U.cpu)||void 0===p?void 0:p.human_readable_name}),(0,k.jsx)(t.A,{percent:(null===G||void 0===G||null===(f=G.cpu_util)||void 0===f?void 0:f.pct)||0,valueLabel:(0,i.Z1)((null===O||void 0===O||null===(F=O.cpu_util)||void 0===F?void 0:F.pct)||0,1)+"%",strokeColor:"#BFBFBF",progressStyle:{border:"none"}})]}):(0,k.jsx)(m.A,{title:null===U||void 0===U||null===(S=U.cpu)||void 0===S?void 0:S.human_readable_name,children:(0,k.jsx)(g.A,{format:e=>(0,k.jsx)(c.A.Text,{style:{fontSize:B.fontSizeSM},children:e+"%"}),percent:y().toNumber((0,i.Z1)(null===G||void 0===G||null===(x=G.cpu_util)||void 0===x?void 0:x.pct,1))||0,strokeColor:"#BFBFBF",strokeLinecap:"butt"})})})}):null,null!==G&&void 0!==G&&G.mem?(0,k.jsx)(u.A,{xs:24,sm:12,children:(0,k.jsx)(r.A,{direction:"column",align:"stretch",children:"default"===D?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(r.A,{justify:"between",children:[(0,k.jsx)(c.A.Text,{children:null===U||void 0===U||null===(_=U.mem)||void 0===_?void 0:_.human_readable_name}),(0,k.jsx)(c.A.Text,{type:"secondary",style:{fontSize:B.fontSizeSM},children:V(null===G||void 0===G||null===(b=G.mem)||void 0===b?void 0:b.current,null===$||void 0===$?void 0:$.mem)})]}),(0,k.jsx)(t.A,{percent:(null===G||void 0===G||null===(A=G.mem)||void 0===A?void 0:A.pct)||0,valueLabel:(0,i.Z1)((null===O||void 0===O||null===(j=O.mem)||void 0===j?void 0:j.pct)||0,1)+"%",strokeColor:"#BFBFBF",progressStyle:{border:"none"}})]}):(0,k.jsx)(m.A,{title:(0,k.jsxs)(r.A,{direction:"column",align:"stretch",children:[null===U||void 0===U||null===(T=U.mem)||void 0===T?void 0:T.human_readable_name,(0,k.jsx)("br",{}),V(null===G||void 0===G||null===(K=G.mem)||void 0===K?void 0:K.current,null===$||void 0===$?void 0:$.mem)]}),children:(0,k.jsx)(g.A,{format:e=>(0,k.jsx)(c.A.Text,{style:{fontSize:B.fontSizeSM},children:e+"%"}),percent:y().toNumber((0,i.Z1)(null===G||void 0===G||null===(C=G.mem)||void 0===C?void 0:C.pct,1))||0,strokeColor:"#BFBFBF",strokeLinecap:"butt"})})})}):null,y().map(y().omit(G,"cpu_util","cpu_used","mem"),((e,n)=>{var l,a;const s=y().split(n,"_")[0],o=y().find(z,(e=>y().includes(e,s)));return o?(0,k.jsx)(u.A,{xs:24,sm:12,children:(0,k.jsx)(r.A,{direction:"column",align:"stretch",children:"default"===D?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(r.A,{justify:"between",children:[(0,k.jsxs)(c.A.Text,{children:[null===U||void 0===U||null===(l=U[o])||void 0===l?void 0:l.human_readable_name,(0,k.jsxs)(c.A.Text,{type:"secondary",children:[y().includes(n,"util")&&" (util)",y().includes(n,"mem")&&" (mem)"]})]}),y().includes(n,"mem")?(0,k.jsx)(c.A.Text,{type:"secondary",style:{fontSize:B.fontSizeSM},children:V(null===e||void 0===e?void 0:e.current,null===e||void 0===e?void 0:e.capacity)}):null]}),(0,k.jsx)(t.A,{percent:e.pct||0,valueLabel:(0,i.Z1)(e.pct||0,1)+"%",strokeColor:"#BFBFBF",progressStyle:{border:"none"}})]}):(0,k.jsx)(m.A,{title:(0,k.jsxs)(r.A,{direction:"column",align:"stretch",children:[null===U||void 0===U||null===(a=U[o])||void 0===a?void 0:a.human_readable_name,y().includes(n,"mem")&&(0,k.jsxs)(k.Fragment,{children:["(mem)",(0,k.jsx)("br",{}),V(null===e||void 0===e?void 0:e.current,null===e||void 0===e?void 0:e.capacity)]})]}),children:(0,k.jsx)(g.A,{format:e=>(0,k.jsx)(c.A.Text,{style:{fontSize:B.fontSizeSM},children:e+"%"}),percent:y().toNumber((0,i.Z1)(null===e||void 0===e?void 0:e.pct,1))||0,strokeColor:"#BFBFBF",strokeLinecap:"butt"})})})},n):null})),(0,k.jsx)(u.A,{span:24,children:(0,k.jsx)(r.A,{justify:"end",children:(0,k.jsx)(c.A.Text,{children:`I/O Read: ${null!==(N=null===(w=(0,i.CE)(null===G||void 0===G||null===(L=G.io_read)||void 0===L?void 0:L.current,"m"))||void 0===w?void 0:w.numberUnit)&&void 0!==N?N:"-"}B / Write: ${null!==(R=null===(E=(0,i.CE)(null===G||void 0===G||null===(I=G.io_write)||void 0===I?void 0:I.current,"m"))||void 0===E?void 0:E.numberUnit)&&void 0!==R?R:"-"}B`})})})]})}},66427:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"uuid"}],n=[{kind:"Variable",name:"id",variableName:"uuid"}],l={alias:null,args:null,kind:"ScalarField",name:"group_id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"SessionDetailContentLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"SessionDetailContentLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"1c0255a2836eb7e492954c7ab0212c7f",id:null,metadata:{},name:"SessionDetailContentLegacyQuery",operationKind:"query",text:"query SessionDetailContentLegacyQuery(\n  $uuid: UUID!\n) {\n  session_for_project_id: compute_session(id: $uuid) {\n    group_id\n    id\n  }\n}\n"}}}();a.hash="d6a0dfbccdec8393f1a058dab48a0757";const i=a},4078:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"id"},n={defaultValue:null,kind:"LocalArgument",name:"project_id"},l={defaultValue:null,kind:"LocalArgument",name:"uuid"},a=[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"project_id",variableName:"project_id"}],i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"project_id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"resource_opts",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},m={alias:null,args:null,concreteType:"ImageNode",kind:"LinkedField",name:"image",plural:!1,selections:[i,t,c,{alias:null,args:null,kind:"ScalarField",name:"tag",storageKey:null}],storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"vfolder_mounts",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"terminated_at",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"agent_ids",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"requested_slots",storageKey:null},f=[{kind:"Variable",name:"id",variableName:"uuid"}],F={alias:null,args:null,kind:"ScalarField",name:"image",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"mounts",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"user_email",storageKey:null};return{fragment:{argumentDefinitions:[e,n,l],kind:"Fragment",metadata:null,name:"SessionDetailContentQuery",selections:[{alias:"session",args:a,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[i,s,t,r,o,d,u,{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[i,m],storageKey:null}],storageKey:null}],storageKey:null},g,{kind:"RequiredField",field:p,action:"NONE",path:"session.created_at"},y,v,h,k,{args:null,kind:"FragmentSpread",name:"SessionStatusTagFragment"},{args:null,kind:"FragmentSpread",name:"SessionActionButtonsFragment"},{args:null,kind:"FragmentSpread",name:"SessionTypeTagFragment"},{args:null,kind:"FragmentSpread",name:"EditableSessionNameFragment"},{args:null,kind:"FragmentSpread",name:"SessionReservationFragment"},{args:null,kind:"FragmentSpread",name:"ContainerLogModalFragment"},{args:null,kind:"FragmentSpread",name:"SessionUsageMonitorFragment"},{args:null,kind:"FragmentSpread",name:"ContainerCommitModalFragment"}],storageKey:null},{alias:"legacy_session",args:f,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[F,S,x,c],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,l,n],kind:"Operation",name:"SessionDetailContentQuery",selections:[{alias:"session",args:a,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[i,s,t,r,o,d,u,{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[i,m,{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"agent_id",storageKey:null},s,{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},g,p,y,v,h,k,{alias:null,args:null,kind:"ScalarField",name:"status_info",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commit_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"priority",storageKey:null}],storageKey:null},{alias:"legacy_session",args:f,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[F,S,x,c,i],storageKey:null}]},params:{cacheID:"971077fc06b23d5d31ceab8a9804a7e1",id:null,metadata:{},name:"SessionDetailContentQuery",operationKind:"query",text:"query SessionDetailContentQuery(\n  $id: GlobalIDField!\n  $uuid: UUID!\n  $project_id: UUID!\n) {\n  session: compute_session_node(id: $id, project_id: $project_id) {\n    id\n    row_id\n    name\n    project_id\n    user_id\n    resource_opts\n    status\n    kernel_nodes {\n      edges {\n        node {\n          id\n          image {\n            id\n            name\n            architecture\n            tag\n          }\n        }\n      }\n    }\n    vfolder_mounts\n    created_at\n    terminated_at\n    scaling_group\n    agent_ids\n    requested_slots\n    ...SessionStatusTagFragment\n    ...SessionActionButtonsFragment\n    ...SessionTypeTagFragment\n    ...EditableSessionNameFragment\n    ...SessionReservationFragment\n    ...ContainerLogModalFragment\n    ...SessionUsageMonitorFragment\n    ...ContainerCommitModalFragment\n  }\n  legacy_session: compute_session(id: $uuid) {\n    image\n    mounts\n    user_email\n    architecture\n    id\n  }\n}\n\nfragment ContainerCommitModalFragment on ComputeSessionNode {\n  id\n  name\n  row_id\n}\n\nfragment ContainerLogModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  status\n  access_key\n  kernel_nodes {\n    edges {\n      node {\n        id\n        row_id\n        container_id\n        cluster_idx\n        cluster_role\n      }\n    }\n  }\n}\n\nfragment EditableSessionNameFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  priority\n  user_id\n  status\n}\n\nfragment SessionActionButtonsFragment on ComputeSessionNode {\n  id\n  row_id\n  type\n  status\n  access_key\n  service_ports\n  commit_status\n  ...TerminateSessionModalFragment\n  ...ContainerLogModalFragment\n  ...ContainerCommitModalFragment\n}\n\nfragment SessionReservationFragment on ComputeSessionNode {\n  id\n  created_at\n  terminated_at\n}\n\nfragment SessionStatusTagFragment on ComputeSessionNode {\n  id\n  name\n  status\n  status_info\n}\n\nfragment SessionTypeTagFragment on ComputeSessionNode {\n  type\n}\n\nfragment SessionUsageMonitorFragment on ComputeSessionNode {\n  kernel_nodes {\n    edges {\n      node {\n        live_stat\n        occupied_slots\n        id\n      }\n    }\n  }\n}\n\nfragment TerminateSessionModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  scaling_group\n  kernel_nodes {\n    edges {\n      node {\n        container_id\n        agent_id\n        id\n      }\n    }\n  }\n}\n"}}}();a.hash="12dba14d97770690faabeca4052f1f9a";const i=a},40379:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionUsageMonitorFragment",selections:[{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"62951e4aee90e7e894e7f47a02b84dab"},i=a},17898:(e,n,l)=>{l.d(n,{RM:()=>r,WN:()=>t});var a=l(46976),i=l.n(a);function s(e){return null===e||void 0===e?"":"number"===typeof e||"boolean"===typeof e?String(e):`"${(e=i().isString(e)?e:JSON.stringify(e)).replace(/"/g,'""')}"`}const t=(e,n)=>{const l=URL.createObjectURL(e),a=document.createElement("a");a.href=l,a.download=n,a.click(),URL.revokeObjectURL(l)},r=(e,n,l)=>{const a=((e,n)=>{const l=i().map(e,(e=>i().omit(e,"__fragments","__fragmentOwner","__id"))),a=i().keys(l[0]),t=i().map(l,(e=>i().map(e,((e,l)=>{var a;return null!==n&&void 0!==n&&n[l]&&(null===(a=n[l])||void 0===a?void 0:a.call(n,e))||e})))).map((e=>e.map(s).join(","))).join("\n");return[a.map(s).join(","),t].join("\n")})(e,l),r=new Blob([a],{type:"text/csv"});t(r,`${n}.csv`)}},57613:(e,n,l)=>{l.d(n,{b:()=>t});var a=l(33364);const i={"Cannot read property 'map' of null":"error.APINotSupported","TypeError: NetworkError when attempting to fetch resource.":"error.NetworkConnectionFailed","Login failed. Check login information.":"error.LoginFailed","User credential mismatch.":"error.LoginFailed","Authentication failed. Check information and manager status.":"error.AuthenticationFailed","Too many failed login attempts":"error.TooManyLoginFailures","server responded failure: 400 Bad Request - The virtual folder already exists with the same name.":"error.VirtualFolderAlreadyExist","400 Bad Request - The virtual folder already exists with the same name.":"error.VirtualFolderAlreadyExist","server responded failure: 400 Bad Request - One of your accessible vfolders already has the name you requested.":"error.VirtualFolderAlreadyExist","server responded failure: 400 Bad Request - You cannot create more vfolders.":"error.MaximumVfolderCreation","server responded failure: 400 Bad Request - Missing or invalid API parameters. (You cannot create more vfolders.)":"error.MaximumVfolderCreation","server responded failure: 400 Bad Request - Cannot change the options of a vfolder that is not owned by myself.":"error.CannotChangeVirtualFolderOption","server responded failure: 403 Forbidden - Cannot share private dot-prefixed vfolders.":"error.CannotSharePrivateAutomountFolder","server responded failure: 404 Not Found - No such vfolder invitation.":"error.FolderSharingNotAvailableToUser","server responded failure: 404 Not Found - No such user.":"error.FolderSharingNotAvailableToUser","server responded failure: 412 Precondition Failed - You have reached your resource limit.":"error.ReachedResourceLimit","Cannot read property 'split' of undefined":"error.UserHasNoGroup"},s={"\\w*not found matched token with email\\w*":"error.InvalidSignupToken","\\w*Access key not found\\w*":"error.LoginInformationMismatch","\\w*401 Unauthorized - Credential/signature mismatch\\w*":"error.LoginInformationMismatch",'integrity error: duplicate key value violates unique constraint "pk_resource_presets"[\\n]DETAIL:  Key \\(name\\)=\\([\\w]+\\) already exists.[\\n]':"error.ResourcePolicyAlreadyExist",'integrity error: duplicate key value violates unique constraint "pk_scaling_groups"[\\n]DETAIL:  Key \\(name\\)=\\([\\w]+\\) already exists.[\\n]':"error.ScalingGroupAlreadyExist",'integrity error: duplicate key value violates unique constraint "uq_users_username"[\\n]DETAIL:  Key \\(username\\)=\\([\\w]+\\) already exists.[\\n]':"error.UserNameAlreadyExist","server responded failure: 400 Bad Request - Missing or invalid API parameters. (Your resource quota is exceeded. (cpu=24 mem=512g cuda.shares=80))":"error.ResourceLimitExceed",'\\w*Key \\(name\\)=\\(.+\\) is still referenced from table "keypairs"\\.\\w*':"error.ResourcePolicyStillReferenced","Your resource request is smaller than the minimum required by the image. (\\w*)":"error.SmallerResourceThenImageRequires"},t=()=>{const{t:e}=(0,a.Bd)();return{relieve:n=>{if("undefined"===typeof n)return void 0===globalThis.backendaiclient||null===globalThis.backendaiclient?"_DISCONNECTED":"Problem occurred.";if(!0===globalThis.backendaiwebui.debug)return n;if({}.hasOwnProperty.call(i,n))return e(i[n]);for(const l of Object.keys(s))if(RegExp(l).test(n))return e(s[l]);return n}}}}}]);
//# sourceMappingURL=3835.97d4df56.chunk.js.map