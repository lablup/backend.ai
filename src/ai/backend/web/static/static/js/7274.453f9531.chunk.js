(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[7274],{35334:(e,n,l)=>{"use strict";l.r(n),l.d(n,{default:()=>J});var a=l(58879),i=l(51593),r=l(60881),o=l(15634),t=l(94126),s=l(32461),u=l(89130),d=l(98957),c=l(74019),m=l(39428),g=l(76604),v=l(95056),p=l(7194),_=l(69056),y=l(89608),f=l.n(y),h=l(43373),S=l(73689);const k=e=>{var n,l;let{filter:t,autoSelectDefault:s,valuePropName:u="name",...d}=e;const c=(0,o.hd)(),m=(0,a.QE)(),[g,v]=(0,p.A)(d),[y,k]=(0,i.Tw)("first"),{data:F}=(0,r.nj)({queryKey:["VFolderSelectQuery",y],queryFn:()=>{const e=new URLSearchParams;return e.set("group_id",c.id),m({method:"GET",url:`/folders?${e.toString()}`})},staleTime:0}),b=t?f().filter(F,t):F,x=f().first(b)?{label:null===(n=f().first(b))||void 0===n?void 0:n.name,value:null===(l=f().first(b))||void 0===l?void 0:l[u]}:void 0;return(0,h.useEffect)((()=>{s&&x&&v(x.value,x)}),[s]),(0,S.jsx)(_.A,{showSearch:!0,optionFilterProp:"label",...d,value:g,onChange:v,onDropdownVisibleChange:e=>{e&&(0,h.startTransition)((()=>{k()}))},options:f().map(b,(e=>({label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e[u]})))})};var F=l(81514),b=l(40991);const x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"};var K=l(64098),j=function(e,n){return h.createElement(K.A,(0,b.A)({},e,{ref:n,icon:x}))};const A=h.forwardRef(j);var T,P,L,C,I=l(50868),N=l(44733),w=l(23702),M=l(55368),D=l(67378),V=l(15480),R=l(34948),O=l(60822),z=l(33789),E=l(15934),$=l(56762),U=l(88522),q=l(12121);const Q=h.lazy((()=>l.e(5555).then(l.bind(l,65555)))),J=e=>{var n,p,y,b,x,K,j,J,G,W,B,X,H,Z,Y,ee;let{endpointFrgmt:ne=null}=e;const{token:le}=I.A.useToken(),{message:ae}=N.A.useApp(),{t:ie}=(0,$.Bd)(),[{model:re}]=(0,q.useQueryParams)({model:q.StringParam}),oe=(0,i.f0)(),te=(0,i.CX)(),se=(0,a.QE)(),ue=(0,i.eZ)(),[de,ce]=(0,h.useState)(!1),[me]=w.A.useForm(),[ge,ve]=(0,h.useState)(!1),[pe,_e]=(0,o.zL)(),ye=(0,U.useFragment)(void 0!==T?T:T=l(49913),ne),{data:fe}=(0,r.nj)({queryKey:["baiClient.modelService.runtime.list"],queryFn:()=>te.isManagerVersionCompatibleWith("24.03.5")?se({method:"GET",url:"/services/_/runtimes"}):Promise.resolve({runtimes:[{name:"custom",human_readable_name:"Custom (Default)"}]}),staleTime:1e3}),he=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&e&&!f().isEmpty(e)},Se=function(){var e,n,l,a,i;let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1?arguments[1]:void 0;return{image:{name:r?null===(e=o.environments.manual)||void 0===e?void 0:e.split("@")[0]:o.environments.version.split("@")[0],architecture:r?null===(n=o.environments.manual)||void 0===n?void 0:n.split("@")[1]:null===(l=o.environments.image)||void 0===l?void 0:l.architecture,registry:r?null===(a=o.environments.manual)||void 0===a?void 0:a.split("/")[0]:null===(i=o.environments.image)||void 0===i?void 0:i.registry}}},ke=function(){var e,n,l,a,i,r;let o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return{image:o?null===(e=t.environments.manual)||void 0===e?void 0:e.split("@")[0]:`${null===(n=t.environments.image)||void 0===n?void 0:n.registry}/${null===(l=t.environments.image)||void 0===l?void 0:l.name}:${null===(a=t.environments.image)||void 0===a?void 0:a.tag}`,architecture:o?null===(i=t.environments.manual)||void 0===i?void 0:i.split("@")[1]:null===(r=t.environments.image)||void 0===r?void 0:r.architecture}},Fe=(0,r.ET)({mutationFn:e=>{const n={to:e.desiredRoutingCount};return(0,a.hu)({method:"POST",url:`/services/${null===ye||void 0===ye?void 0:ye.endpoint_id}/scale`,body:n,client:te})}}),be=(0,r.ET)({mutationFn:e=>{var n;const l={};e.envvars&&e.envvars.forEach((e=>l[e.variable]=e.value));const i={name:e.serviceName,desired_session_count:e.desiredRoutingCount,...ke(he(te._config.allow_manual_image_name_for_session,null===(n=e.environments)||void 0===n?void 0:n.manual),e),runtime_variant:e.runtimeVariant,group:te.current_group,domain:ue,cluster_size:e.cluster_size,cluster_mode:e.cluster_mode,open_to_public:e.openToPublic,config:{model:e.vFolderID,model_version:1,...te.supports("endpoint-extra-mounts")&&{extra_mounts:f().reduce(e.mounts,((n,l)=>(n[l]={...e.vfoldersAliasMap[l]&&{mount_destination:e.vfoldersAliasMap[l]},type:"bind"},n)),{}),model_definition_path:e.modelDefinitionPath},model_mount_destination:te.supports("endpoint-extra-mounts")&&""!==e.modelMountDestination?e.modelMountDestination:"/models",environ:l,scaling_group:e.resourceGroup,resources:{cpu:e.resource.cpu.toString(),mem:e.resource.mem,...e.resource.accelerator>0?{[e.resource.acceleratorType]:e.resource.accelerator.toString()}:void 0},resource_opts:{shmem:(0,a.Mh)(e.resource.mem,"4g")>0&&(0,a.Mh)(e.resource.shmem,"1g")<0?"1g":e.resource.shmem}}};return(0,a.hu)({method:"POST",url:"/services",body:i,client:te})}}),{user:xe}=(0,U.useLazyLoadQuery)(void 0!==P?P:P=l(55763),{domain_name:(0,i.eZ)(),email:null===te||void 0===te?void 0:te.email}),{user_resource_policy:Ke}=(0,U.useLazyLoadQuery)(void 0!==L?L:L=l(63113),{user_RP_name:null===xe||void 0===xe?void 0:xe.resource_policy}),[je]=(0,U.useMutation)(void 0!==C?C:C=l(85504)),[Ae,Te]=(0,h.useState)(),Pe=ye?{serviceName:null===ye||void 0===ye?void 0:ye.name,resourceGroup:null===ye||void 0===ye?void 0:ye.resource_group,allocationPreset:"custom",desiredRoutingCount:null!==(n=null===ye||void 0===ye?void 0:ye.desired_session_count)&&void 0!==n?n:1,resource:{cpu:parseInt(null===(p=JSON.parse(null===ye||void 0===ye?void 0:ye.resource_slots))||void 0===p?void 0:p.cpu),mem:null===(y=(0,a.Js)((null===(b=JSON.parse(null===ye||void 0===ye?void 0:ye.resource_slots))||void 0===b?void 0:b.mem)+"b","g",3,!0))||void 0===y?void 0:y.numberUnit,shmem:null===(x=(0,a.Js)((null===(K=JSON.parse(null===ye||void 0===ye?void 0:ye.resource_opts))||void 0===K?void 0:K.shmem)||m.t2,"g",3,!0))||void 0===x?void 0:x.numberUnit,...(e=>{if(Object.keys(e).length<=0)return;const n=Object.keys(e)[0];return{acceleratorType:n,accelerator:"string"===typeof e[n]?"cuda.shares"===n?parseFloat(e[n]):parseInt(e[n]):e[n]}})(f().omit(JSON.parse(null===ye||void 0===ye?void 0:ye.resource_slots),["cpu","mem"]))},cluster_mode:"MULTI_NODE"===(null===ye||void 0===ye?void 0:ye.cluster_mode)?"multi-node":"single-node",cluster_size:null===ye||void 0===ye?void 0:ye.cluster_size,openToPublic:null===ye||void 0===ye?void 0:ye.open_to_public,environments:{environment:null===ye||void 0===ye||null===(j=ye.image_object)||void 0===j?void 0:j.name,version:`${null===ye||void 0===ye||null===(J=ye.image_object)||void 0===J?void 0:J.registry}/${null===ye||void 0===ye||null===(G=ye.image_object)||void 0===G?void 0:G.name}:${null===ye||void 0===ye||null===(W=ye.image_object)||void 0===W?void 0:W.tag}@${null===ye||void 0===ye||null===(B=ye.image_object)||void 0===B?void 0:B.architecture}`,image:null===ye||void 0===ye?void 0:ye.image_object},vFolderID:null===ye||void 0===ye?void 0:ye.model,mounts:f().map(null===ye||void 0===ye?void 0:ye.extra_mounts,(e=>{var n;return null===e||void 0===e||null===(n=e.row_id)||void 0===n?void 0:n.replaceAll("-","")})),modelMountDestination:null===ye||void 0===ye?void 0:ye.model_mount_destination,modelDefinitionPath:null===ye||void 0===ye?void 0:ye.model_definition_path,runtimeVariant:null===ye||void 0===ye||null===(X=ye.runtime_variant)||void 0===X?void 0:X.name,envvars:f().map(JSON.parse((null===ye||void 0===ye?void 0:ye.environ)||"{}"),((e,n)=>({variable:n,value:e})))}:{desiredRoutingCount:1,runtimeVariant:"custom",...m.jh,...(null===(H=te._config)||void 0===H?void 0:H.default_session_environment)&&{environments:{environment:null===(Z=te._config)||void 0===Z?void 0:Z.default_session_environment}},vFolderID:re||void 0,resourceGroup:pe};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(u.A,{direction:"column",align:"stretch",style:{justifyContent:"revert"},children:(0,S.jsx)(u.A,{direction:"row",gap:"md",align:"start",children:(0,S.jsx)(u.A,{direction:"column",align:"stretch",style:{flex:1,maxWidth:700},wrap:"nowrap",children:(0,S.jsx)(w.A,{form:me,disabled:be.isPending,layout:"vertical",labelCol:{span:12},initialValues:Pe,requiredMark:"optional",children:(0,S.jsxs)(u.A,{direction:"column",gap:"md",align:"stretch",children:[(0,S.jsxs)(M.A,{children:[(te.supports("modify-endpoint")||!ye)&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(w.A.Item,{label:ie("modelService.ServiceName"),name:"serviceName",rules:[{min:4,message:ie("modelService.ServiceNameMinLength"),type:"string"},{max:24,message:ie("modelService.ServiceNameMaxLength"),type:"string"},{pattern:/^(?:[^-]|[^-].*[^-])$/,message:ie("modelService.ServiceNameCannotStartWithHyphen")},{pattern:/^[\w-]+$/,message:ie("modelService.ServiceNameRule")},{required:!0}],children:(0,S.jsx)(D.A,{disabled:!!ye})}),(0,S.jsx)(w.A.Item,{name:"openToPublic",label:ie("modelService.OpenToPublic"),valuePropName:"checked",children:(0,S.jsx)(V.A,{disabled:!!ye})}),ye?(null===ye||void 0===ye?void 0:ye.model)&&(0,S.jsx)(w.A.Item,{name:"vFolderID",label:ie("session.launcher.ModelStorageToMount"),required:!0,children:(0,S.jsx)(h.Suspense,{fallback:(0,S.jsx)(R.A.Input,{active:!0}),children:(0,S.jsx)(v.A,{uuid:null===ye||void 0===ye?void 0:ye.model})})}):(0,S.jsx)(w.A.Item,{name:"vFolderID",label:ie("session.launcher.ModelStorageToMount"),rules:[{required:!0}],children:(0,S.jsx)(k,{filter:e=>"model"===e.usage_mode&&"ready"===e.status,valuePropName:"id",autoSelectDefault:!re,disabled:!!ye})}),te.supports("endpoint-runtime-variant")?(0,S.jsx)(w.A.Item,{name:"runtimeVariant",required:!0,label:ie("modelService.RuntimeVariant"),children:(0,S.jsx)(_.A,{defaultActiveFirstOption:!0,showSearch:!0,options:f().map(null===fe||void 0===fe?void 0:fe.runtimes,(e=>({value:e.name,label:e.human_readable_name})))})}):null,(0,S.jsx)(w.A.Item,{dependencies:["runtimeVariant"],noStyle:!0,children:e=>{let{getFieldValue:n}=e;return"custom"===n("runtimeVariant")&&te.supports("endpoint-extra-mounts")?(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(u.A,{direction:"row",gap:"xxs",align:"stretch",justify:"between",children:[(0,S.jsx)(w.A.Item,{name:"modelMountDestination",label:ie("modelService.ModelMountDestination"),style:{width:"50%"},labelCol:{style:{flex:1}},children:(0,S.jsx)(D.A,{allowClear:!0,placeholder:"/models",disabled:!!ye})}),(0,S.jsx)(A,{style:{fontSize:le.fontSizeXL,color:le.colorTextDisabled},rotate:290}),(0,S.jsx)(w.A.Item,{name:"modelDefinitionPath",label:ie("modelService.ModelDefinitionPath"),style:{width:"50%"},labelCol:{style:{flex:1}},children:(0,S.jsx)(D.A,{allowClear:!0,placeholder:null!==ye&&void 0!==ye&&ye.model_definition_path?null===ye||void 0===ye?void 0:ye.model_definition_path:"model-definition.yaml"})})]})}):null}}),te.supports("endpoint-extra-mounts")?(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(w.A.Item,{noStyle:!0,dependencies:["vFolderID"],children:e=>{let{getFieldValue:n}=e;return(0,S.jsx)(F.A,{rowKey:"id",label:ie("modelService.AdditionalMounts"),filter:e=>{var l;return e.name!==n("vFolderID")&&"ready"===e.status&&"model"!==e.usage_mode&&!(null!==(l=e.name)&&void 0!==l&&l.startsWith("."))},tableProps:{size:"small"}})}})}):null]}),(0,S.jsx)(w.A.Item,{label:ie("modelService.DesiredRoutingCount"),name:"desiredRoutingCount",rules:[{required:!0},{type:"number",min:0},{type:"number",max:null!==(Y=null===Ke||void 0===Ke?void 0:Ke.max_session_count_per_model_session)&&void 0!==Y?Y:0}],children:(0,S.jsx)(c.A,{min:0,max:null!==(ee=null===Ke||void 0===Ke?void 0:Ke.max_session_count_per_model_session)&&void 0!==ee?ee:0,inputNumberProps:{addonAfter:"#"},step:1})}),(te.supports("modify-endpoint")||!ye)&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(d.A,{}),ye&&!ge&&!te._config.allowCustomResourceAllocation&&(0,S.jsx)(w.A.Item,{label:(0,S.jsxs)(S.Fragment,{children:[ie("modelService.resources"),(0,S.jsx)(O.Ay,{type:"link",onClick:()=>{me.setFieldsValue({allocationPreset:"auto-select"}),ve(!0)},children:ie("general.Change")})]}),required:!0,children:(0,S.jsxs)(u.A,{gap:"xs",children:[(0,S.jsx)(z.A,{title:ie("session.ResourceGroup"),children:(0,S.jsx)(E.A,{children:null===ye||void 0===ye?void 0:ye.resource_group})}),f().map(JSON.parse((null===ye||void 0===ye?void 0:ye.resource_slots)||"{}"),((e,n)=>(0,S.jsx)(g.A,{type:n,value:e,opts:null===ye||void 0===ye?void 0:ye.resource_opts},n)))]})}),(0,S.jsx)("div",{style:{display:!ye||ge||te._config.allowCustomResourceAllocation?"block":"none"},children:(0,S.jsx)(m.Ay,{enableResourcePresets:!0})}),(0,S.jsx)(w.A.Item,{label:ie("session.launcher.EnvironmentVariable"),children:(0,S.jsx)(s.Ay,{name:"envvars",formItemProps:{validateTrigger:["onChange","onBlur"]}})})]})]}),(0,S.jsxs)(u.A,{direction:"row",justify:"between",align:"end",gap:"xs",children:[(0,S.jsx)(u.A,{children:te.supports("model-service-validation")?(0,S.jsx)(O.Ay,{onClick:()=>{me.validateFields().then((e=>{Te(e),ce(!0)})).catch((e=>{console.log(e.message),ae.error(ie("modelService.FormValidationFailed"))}))},children:ie("modelService.Validate")}):null}),(0,S.jsx)(u.A,{gap:"sm",children:(0,S.jsx)(O.Ay,{type:"primary",onClick:()=>{me.validateFields().then((e=>{if(ye)if(te.supports("modify-endpoint")){var n;const l={endpoint_id:(null===ye||void 0===ye?void 0:ye.endpoint_id)||"",props:{resource_slots:JSON.stringify({cpu:e.resource.cpu,mem:e.resource.mem,...e.resource.accelerator>0?{[e.resource.acceleratorType]:e.resource.accelerator}:void 0}),resource_opts:JSON.stringify({shmem:e.resource.shmem}),cluster_mode:"single-node"===e.cluster_mode?"SINGLE_NODE":"MULTI_NODE",cluster_size:e.cluster_size,desired_session_count:e.desiredRoutingCount,...Se(he(te._config.allow_manual_image_name_for_session,null===(n=e.environments)||void 0===n?void 0:n.manual),e),extra_mounts:f().map(e.mounts,(n=>({vfolder_id:n,...e.vfoldersAliasMap[n]&&{mount_destination:e.vfoldersAliasMap[n]}}))),name:e.serviceName,resource_group:e.resourceGroup,model_definition_path:e.modelDefinitionPath,runtime_variant:e.runtimeVariant}};if(te.supports("modify-endpoint-environ")){const n={};e.envvars&&e.envvars.forEach((e=>n[e.variable]=e.value)),l.props.environ=JSON.stringify(n)}je({variables:l,onCompleted:(e,n)=>{var l,a;if(null!==(l=e.modify_endpoint)&&void 0!==l&&l.ok)if(n&&(null===n||void 0===n?void 0:n.length)>0){const e=f().map(n,(e=>e.message));for(const n of e)ae.error(n,2.5)}else{var i;const n=null===(i=e.modify_endpoint)||void 0===i?void 0:i.endpoint;ae.success(ie("modelService.ServiceUpdated",{name:null===n||void 0===n?void 0:n.name})),oe(`/serving/${null===ye||void 0===ye?void 0:ye.endpoint_id}`)}else ae.error(null===(a=e.modify_endpoint)||void 0===a?void 0:a.msg)},onError:e=>{e.message?ae.error(e.message):ae.error(ie("modelService.FailedToUpdateService"))}})}else Fe.mutate(e,{onSuccess:()=>{ae.success(ie("modelService.ServiceUpdated",{name:ye.name})),oe(`/serving/${null===ye||void 0===ye?void 0:ye.endpoint_id}`)},onError:e=>{console.log(e),ae.error(ie("modelService.FailedToUpdateService"))}});else be.mutate(e,{onSuccess:()=>{_e(e.resourceGroup),ae.success(ie("modelService.ServiceCreated",{name:e.serviceName})),oe("/serving")},onError:e=>{null!==e&&void 0!==e&&e.message?ae.error(f().truncate(null===e||void 0===e?void 0:e.message,{length:200})):ye?ae.error(ie("modelService.FailedToUpdateService")):ae.error(ie("modelService.FailedToStartService"))}})})).catch((e=>{var n,l;(null===e||void 0===e||null===(n=e.errorFields)||void 0===n||null===(l=n[0])||void 0===l?void 0:l.name)&&me.scrollToField(e.errorFields[0].name,{behavior:"smooth",block:"center"})}))},children:ie(ye?"button.Update":"button.Create")})})]})]})})})})}),te.supports("model-service-validation")?(0,S.jsx)(t.A,{zIndex:t.z+1,width:1e3,title:ie("modelService.ValidationInfo"),open:de,destroyOnClose:!0,onCancel:()=>{ce(!de)},okButtonProps:{style:{display:"none"}},cancelText:ie("button.Close"),maskClosable:!1,children:(0,S.jsx)(Q,{serviceData:Ae})}):null]})}},95056:(e,n,l)=>{"use strict";l.d(n,{A:()=>c});var a=l(58879),i=l(51593),r=l(60881),o=l(15634),t=l(51786),s=l(85690),u=(l(43373),l(18150)),d=l(73689);const c=e=>{let{uuid:n,clickable:l}=e;const c=(0,o.hd)(),m=(0,a.QE)(),g=(0,u.zy)(),v=(0,i.f0)(),{data:p}=(0,r.nj)({queryKey:["VFolderSelectQuery"],queryFn:()=>{const e=new URLSearchParams;return e.set("group_id",c.id),m({method:"GET",url:`/folders?${e.toString()}`})},staleTime:1e3}),_=null===p||void 0===p?void 0:p.find((e=>e.id===n.replaceAll("-","")));return _&&(l?(0,d.jsxs)(s.A.Link,{onClick:()=>{v({pathname:g.pathname,search:`?folder=${_.id}`})},children:[(0,d.jsx)(t.A,{})," ",_.name]}):(0,d.jsxs)("div",{children:[(0,d.jsx)(t.A,{})," ",_.name]}))}},49913:(e,n,l)=>{"use strict";l.r(n),l.d(n,{default:()=>i});const a=function(){var e={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ServiceLauncherPageContentFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"endpoint_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"desired_session_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"resource_group",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"resource_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"resource_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_mode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_size",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"open_to_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"model",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"model_mount_destination",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"model_definition_path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"environ",storageKey:null},{alias:null,args:null,concreteType:"RuntimeVariantInfo",kind:"LinkedField",name:"runtime_variant",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"human_readable_name",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VirtualFolderNode",kind:"LinkedField",name:"extra_mounts",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ImageNode",kind:"LinkedField",name:"image_object",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"humanized_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tag",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"registry",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_local",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"digest",storageKey:null},{alias:null,args:null,concreteType:"ResourceLimit",kind:"LinkedField",name:"resource_limits",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"KVPair",kind:"LinkedField",name:"labels",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"size_bytes",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"supported_accelerators",storageKey:null}],storageKey:null},e],type:"Endpoint",abstractKey:null}}();a.hash="15afafa90c5e47be5a52c672e0251ad3";const i=a},85504:(e,n,l)=>{"use strict";l.r(n),l.d(n,{default:()=>i});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"endpoint_id"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{kind:"Variable",name:"endpoint_id",variableName:"endpoint_id"},{kind:"Variable",name:"props",variableName:"props"}],l={alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"endpoint_id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"desired_session_count",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"resource_group",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"resource_slots",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"resource_opts",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"cluster_mode",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"cluster_size",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"open_to_public",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"model",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"humanized_name",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"tag",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"registry",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"is_local",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"digest",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},k={alias:null,args:null,concreteType:"ResourceLimit",kind:"LinkedField",name:"resource_limits",plural:!0,selections:[S,{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max",storageKey:null}],storageKey:null},F={alias:null,args:null,concreteType:"KVPair",kind:"LinkedField",name:"labels",plural:!0,selections:[S,{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"size_bytes",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"supported_accelerators",storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"model_definition_path",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"model_mount_destination",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},T={alias:null,args:null,concreteType:"VirtualFolderNode",kind:"LinkedField",name:"extra_mounts",plural:!0,selections:[A,{alias:null,args:null,kind:"ScalarField",name:"host",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"quota_scope_id",storageKey:null},g,{alias:null,args:null,kind:"ScalarField",name:"user",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"group",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"group_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creator",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"unmanaged_path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"usage_mode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"permission",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ownership_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_files",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_size",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"last_used",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"num_files",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cur_size",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cloneable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null},P={alias:null,args:null,concreteType:"RuntimeVariantInfo",kind:"LinkedField",name:"runtime_variant",plural:!1,selections:[g,{alias:null,args:null,kind:"ScalarField",name:"human_readable_name",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ServiceLauncherPageContentModifyMutation",selections:[{alias:null,args:n,concreteType:"ModifyEndpoint",kind:"LinkedField",name:"modify_endpoint",plural:!1,selections:[l,a,{alias:null,args:null,concreteType:"Endpoint",kind:"LinkedField",name:"endpoint",plural:!1,selections:[i,r,o,t,s,u,d,c,m,{alias:null,args:null,concreteType:"ImageNode",kind:"LinkedField",name:"image_object",plural:!1,selections:[g,v,p,_,y,f,h,k,F,b,x],storageKey:null},g,K,j,T,P],storageKey:null}],storageKey:null}],type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ServiceLauncherPageContentModifyMutation",selections:[{alias:null,args:n,concreteType:"ModifyEndpoint",kind:"LinkedField",name:"modify_endpoint",plural:!1,selections:[l,a,{alias:null,args:null,concreteType:"Endpoint",kind:"LinkedField",name:"endpoint",plural:!1,selections:[i,r,o,t,s,u,d,c,m,{alias:null,args:null,concreteType:"ImageNode",kind:"LinkedField",name:"image_object",plural:!1,selections:[g,v,p,_,y,f,h,k,F,b,x,A],storageKey:null},g,K,j,T,P,A],storageKey:null}],storageKey:null}]},params:{cacheID:"a2772e4a11408599165d5a1f5ae00c4c",id:null,metadata:{},name:"ServiceLauncherPageContentModifyMutation",operationKind:"mutation",text:'mutation ServiceLauncherPageContentModifyMutation(\n  $endpoint_id: UUID!\n  $props: ModifyEndpointInput!\n) {\n  modify_endpoint(endpoint_id: $endpoint_id, props: $props) {\n    ok\n    msg\n    endpoint {\n      endpoint_id\n      desired_session_count\n      resource_group\n      resource_slots\n      resource_opts\n      cluster_mode\n      cluster_size\n      open_to_public\n      model\n      image_object @since(version: "23.09.9") {\n        name\n        humanized_name\n        tag\n        registry\n        architecture\n        is_local\n        digest\n        resource_limits {\n          key\n          min\n          max\n        }\n        labels {\n          key\n          value\n        }\n        size_bytes\n        supported_accelerators\n        id\n      }\n      name\n      model_definition_path @since(version: "24.03.4")\n      model_mount_destination @since(version: "24.03.4")\n      extra_mounts @since(version: "24.03.4") {\n        id\n        host\n        quota_scope_id\n        name\n        user\n        user_email\n        group\n        group_name\n        creator\n        unmanaged_path\n        usage_mode\n        permission\n        ownership_type\n        max_files\n        max_size\n        created_at\n        last_used\n        num_files\n        cur_size\n        cloneable\n        status\n      }\n      runtime_variant @since(version: "24.03.5") {\n        name\n        human_readable_name\n      }\n      id\n    }\n  }\n}\n'}}}();a.hash="922227e735f068c9d76785eb76d820f3";const i=a},55763:(e,n,l)=>{"use strict";l.r(n),l.d(n,{default:()=>i});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"domain_name"},{defaultValue:null,kind:"LocalArgument",name:"email"}],n=[{alias:null,args:[{kind:"Variable",name:"domain_name",variableName:"domain_name"},{kind:"Variable",name:"email",variableName:"email"}],concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"resource_policy",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ServiceLauncherPageContent_UserInfoQuery",selections:n,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ServiceLauncherPageContent_UserInfoQuery",selections:n},params:{cacheID:"bd463b860cd7ab56a302e7f1dc7b2611",id:null,metadata:{},name:"ServiceLauncherPageContent_UserInfoQuery",operationKind:"query",text:'query ServiceLauncherPageContent_UserInfoQuery(\n  $domain_name: String\n  $email: String\n) {\n  user(domain_name: $domain_name, email: $email) {\n    id\n    resource_policy @since(version: "23.09.0")\n  }\n}\n'}}}();a.hash="6c33adac7ab1ae44cf36f91363ec7dbf";const i=a},63113:(e,n,l)=>{"use strict";l.r(n),l.d(n,{default:()=>i});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"user_RP_name"}],n=[{kind:"Variable",name:"name",variableName:"user_RP_name"}],l={alias:null,args:null,kind:"ScalarField",name:"max_session_count_per_model_session",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ServiceLauncherPageContent_UserResourcePolicyQuery",selections:[{alias:null,args:n,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"user_resource_policy",plural:!1,selections:[l],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ServiceLauncherPageContent_UserResourcePolicyQuery",selections:[{alias:null,args:n,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"user_resource_policy",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"9521f8ab6e4190bdffb95e25ce45d8c3",id:null,metadata:{},name:"ServiceLauncherPageContent_UserResourcePolicyQuery",operationKind:"query",text:'query ServiceLauncherPageContent_UserResourcePolicyQuery(\n  $user_RP_name: String\n) {\n  user_resource_policy(name: $user_RP_name) @since(version: "23.09.6") {\n    max_session_count_per_model_session\n    id\n  }\n}\n'}}}();a.hash="2625e741ab935b9160f781d3aba13067";const i=a},88319:(e,n,l)=>{"use strict";l.d(n,{A:()=>c});var a=l(81949),i=l(82073),r=l.n(i),o=l(43373),t=l(46976),s=l(35649),u=l(92685),d=l(77418);const c=function(e,n){var l;d.A&&((0,u.Tn)(e)||console.error("useThrottleFn expected parameter is a function, got ".concat(typeof e)));var i=(0,t.A)(e),c=null!==(l=null===n||void 0===n?void 0:n.wait)&&void 0!==l?l:1e3,m=(0,o.useMemo)((function(){return r()((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return i.current.apply(i,(0,a.fX)([],(0,a.zs)(e),!1))}),c,n)}),[]);return(0,s.A)((function(){m.cancel()})),{run:m,cancel:m.cancel,flush:m.flush}}},2412:(e,n,l)=>{var a=l(81952).Symbol;e.exports=a},98025:(e,n,l)=>{var a=l(2412),i=l(63168),r=l(39047),o=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):r(e)}},93485:(e,n,l)=>{var a=l(28343),i=/^\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(i,""):e}},47769:(e,n,l)=>{var a="object"==typeof l.g&&l.g&&l.g.Object===Object&&l.g;e.exports=a},63168:(e,n,l)=>{var a=l(2412),i=Object.prototype,r=i.hasOwnProperty,o=i.toString,t=a?a.toStringTag:void 0;e.exports=function(e){var n=r.call(e,t),l=e[t];try{e[t]=void 0;var a=!0}catch(s){}var i=o.call(e);return a&&(n?e[t]=l:delete e[t]),i}},39047:e=>{var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},81952:(e,n,l)=>{var a=l(47769),i="object"==typeof self&&self&&self.Object===Object&&self,r=a||i||Function("return this")();e.exports=r},28343:e=>{var n=/\s/;e.exports=function(e){for(var l=e.length;l--&&n.test(e.charAt(l)););return l}},88182:(e,n,l)=>{var a=l(36230),i=l(29437),r=l(57001),o=Math.max,t=Math.min;e.exports=function(e,n,l){var s,u,d,c,m,g,v=0,p=!1,_=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(n){var l=s,a=u;return s=u=void 0,v=n,c=e.apply(a,l)}function h(e){var l=e-g;return void 0===g||l>=n||l<0||_&&e-v>=d}function S(){var e=i();if(h(e))return k(e);m=setTimeout(S,function(e){var l=n-(e-g);return _?t(l,d-(e-v)):l}(e))}function k(e){return m=void 0,y&&s?f(e):(s=u=void 0,c)}function F(){var e=i(),l=h(e);if(s=arguments,u=this,g=e,l){if(void 0===m)return function(e){return v=e,m=setTimeout(S,n),p?f(e):c}(g);if(_)return clearTimeout(m),m=setTimeout(S,n),f(g)}return void 0===m&&(m=setTimeout(S,n)),c}return n=r(n)||0,a(l)&&(p=!!l.leading,d=(_="maxWait"in l)?o(r(l.maxWait)||0,n):d,y="trailing"in l?!!l.trailing:y),F.cancel=function(){void 0!==m&&clearTimeout(m),v=0,s=g=u=m=void 0},F.flush=function(){return void 0===m?c:k(i())},F}},36230:e=>{e.exports=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},35041:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},54633:(e,n,l)=>{var a=l(98025),i=l(35041);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==a(e)}},29437:(e,n,l)=>{var a=l(81952);e.exports=function(){return a.Date.now()}},82073:(e,n,l)=>{var a=l(88182),i=l(36230);e.exports=function(e,n,l){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(l)&&(r="leading"in l?!!l.leading:r,o="trailing"in l?!!l.trailing:o),a(e,n,{leading:r,maxWait:n,trailing:o})}},57001:(e,n,l)=>{var a=l(93485),i=l(36230),r=l(54633),o=/^[-+]0x[0-9a-f]+$/i,t=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return NaN;if(i(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=i(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var l=t.test(e);return l||s.test(e)?u(e.slice(2),l?2:8):o.test(e)?NaN:+e}}}]);
//# sourceMappingURL=7274.453f9531.chunk.js.map