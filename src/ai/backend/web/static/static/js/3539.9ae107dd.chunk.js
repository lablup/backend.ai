/*! For license information please see 3539.9ae107dd.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[3539],{64041:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(19876),l=n(26067),i=n(46556),a=n(42906);const r=e=>{let{value:t,onChange:n,language:r="shell",editable:o=!1,showLineNumbers:c=!0,lineWrapping:d=!1,...u}=e;const[g,h]=(0,s.A)({defaultValue:"",value:t,onChange:n}),p=[(0,l.rI)(r)];return(0,a.jsx)(i.Ay,{theme:"dark",extensions:d?[i.Lz.lineWrapping,...p]:p,editable:o,readOnly:!o,basicSetup:{lineNumbers:c},value:g,onChange:(e,t)=>h(e),...u})}},94777:(e,t,n)=>{n.d(t,{A:()=>K});var s=n(27340),l=n(90840),i=n(1869),a=n(75864),r=n(73857),o=n(60476),c=n(18695),d=n(76832),u=n(1426),g=n(42906);const h=(0,d.rU)((e=>{let{css:t}=e;return{baiSettingItemCheckbox:t`
    .ant-checkbox {
      align-self: flex-start;
      margin-top: 0.2rem;
    }
  `}})),p=e=>{let{type:t,title:n,description:s,children:d,defaultValue:u,value:p,selectProps:y,onChange:m}=e;const{token:x}=i.A.useToken(),{styles:S}=h();return(0,g.jsxs)(l.A,{direction:"column",align:"start",gap:"xxs",children:[(0,g.jsxs)(l.A,{direction:"row",gap:"xxs",children:[(0,g.jsx)(a.A.Text,{strong:!0,style:{fontSize:x.fontSize},children:n}),void 0!==p&&null!==p&&u!==p&&(0,g.jsx)(r.A,{dot:!0,status:"warning"})]}),"custom"===t&&(0,g.jsxs)(g.Fragment,{children:[s,d]}),"checkbox"===t&&(0,g.jsx)(o.A,{checked:p,onChange:m,className:S.baiSettingItemCheckbox,children:s}),"select"===t&&(0,g.jsxs)(g.Fragment,{children:[s,(0,g.jsx)(c.A,{value:p,popupMatchSelectWidth:!1,onChange:m,...y})]})]})};var y=n(89664),m=n(96099),x=n(67884),S=n(30871),f=n(81021),b=n(76415),j=n(16736),A=n(37565),k=n(27484),v=n.n(k),C=n(48602);const w=(0,d.rU)((e=>{let{css:t,token:n}=e;return{TabStyles:t`
    .ant-tabs-tab-active {
      font-weight: var(--token-fontWeightSuperStrong, 700);
    }
    .ant-typography-secondary {
      font-weight: normal !important;
    }
  `}})),T=e=>{let{title:t,count:n}=e;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(a.A.Text,{children:t}),(0,g.jsx)(a.A.Text,{type:"secondary",children:` (${n})`})]})},I=e=>{let{group:t,hideEmpty:n}=e;const{token:s}=i.A.useToken();return(!n||0!==t.settingItems.length)&&(0,g.jsxs)(l.A,{direction:"column",align:"stretch",style:{marginBottom:s.marginMD},children:[(0,g.jsxs)(l.A,{direction:"column",align:"stretch",style:{zIndex:1,marginBottom:s.marginMD,background:s.colorBgContainer},children:[(0,g.jsx)(a.A.Title,{level:5,style:{marginTop:0},children:t.title}),(0,g.jsx)(S.A,{style:{marginTop:0,marginBottom:0}}),t.description&&(0,g.jsx)(a.A.Text,{type:"secondary",style:{marginTop:s.marginSM},children:t.description})]}),(0,g.jsx)(l.A,{direction:"column",align:"start",gap:"lg",children:t.settingItems.map(((e,t)=>(0,g.jsx)(p,{...e},e.title+t)))})]})},K=e=>{let{settingGroups:t,tabDirection:n="left",showChangedOptionFilter:a,showResetButton:r,showSearchBar:c}=e;const{t:d}=(0,C.Bd)(),{token:h}=i.A.useToken(),{styles:p}=w(),[S,k]=(0,u.useState)(""),[K,E]=(0,u.useState)(!1),[_,{toggle:q}]=(0,x.A)(!1),[R,B]=(0,u.useState)("all"),D=v().map(t,(e=>({...e,settingItems:v().filter(e.settingItems,(e=>(!K||(e=>null!==e.value&&void 0!==e.value&&e.value!==e.defaultValue)(e))&&(e=>e.title.toLowerCase().includes(S.toLowerCase())||"string"===typeof e.description&&e.description.toLowerCase().includes(S.toLowerCase()))(e)))})));return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(l.A,{direction:"column",gap:"md",align:"stretch",style:{padding:h.paddingContentHorizontal,maxWidth:h.screenLG},children:[(0,g.jsxs)(l.A,{justify:"start",gap:"xs",children:[!!c&&(0,g.jsx)(f.A,{prefix:(0,g.jsx)(y.A,{}),placeholder:d("settings.SearchPlaceholder"),onChange:e=>k(e.target.value),value:S}),!!a&&(0,g.jsx)(o.A,{onChange:e=>E(e.target.checked),style:{whiteSpace:"nowrap"},children:d("settings.ShowOnlyChanged")}),!!r&&(0,g.jsx)(b.Ay,{icon:(0,g.jsx)(m.A,{}),onClick:()=>q(),children:d("button.Reset")})]}),(0,g.jsx)(j.A,{activeKey:R,onChange:B,className:p.TabStyles,tabPosition:n?"left":"top",tabBarStyle:{minWidth:200},items:[{key:"all",label:(0,g.jsx)(T,{title:d("general.All"),count:v().sumBy(D,(e=>e.settingItems.length))}),children:(0,g.jsx)(l.A,{direction:"column",align:"stretch",gap:"xl",children:v().map(D,(e=>(0,g.jsx)(I,{group:e,hideEmpty:!0},e.title)))})},...v().map(D,((e,t)=>({key:`index${t}`,label:(0,g.jsx)(T,{title:e.title,count:e.settingItems.length}),children:(0,g.jsx)(I,{group:D[t],hideEmpty:!0})})))]})]}),(0,g.jsx)(s.A,{open:_,title:d("dialog.ask.DoYouWantToResetChanges"),okText:d("button.Reset"),okButtonProps:{danger:!0},onOk:()=>{v().flatMap(t,(e=>e.settingItems)).forEach((e=>{(null===e||void 0===e?void 0:e.setValue)&&e.setValue(e.defaultValue)})),q()},cancelText:d("button.Cancel"),onCancel:()=>q(),children:(0,g.jsx)(A.A,{showIcon:!0,message:d("dialog.warning.CannotBeUndone"),type:"warning"})})]})}},39667:(e,t,n)=>{n.d(t,{A:()=>p});var s=n(27340),l=n(89664),i=n(1869),a=n(59910),r=n(81021),o=n(60476),c=n(27484),d=n.n(c),u=n(1426),g=n(48602),h=n(42906);const p=e=>{var t;let{open:n,onRequestClose:c,columns:p,hiddenColumnKeys:y,...m}=e;const x=(0,u.useRef)(null),{t:S}=(0,g.Bd)(),{token:f}=i.A.useToken(),b=d().map(p,(e=>{return"string"===typeof e.title?{label:e.title,value:d().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(t=e.title,u.Children.map(t.props.children,(e=>{if("string"===typeof e)return e}))),value:d().toString(e.key)}:{label:void 0,value:d().toString(e.key)};var t}));return(0,h.jsx)(s.A,{title:S("table.SettingTable"),open:n,destroyOnClose:!0,centered:!0,onOk:()=>{var e;null===(e=x.current)||void 0===e||e.validateFields().then((e=>{c(e)})).catch((()=>{}))},onCancel:()=>{c()},...m,children:(0,h.jsxs)(a.A,{ref:x,preserve:!1,initialValues:{selectedColumnKeys:null===(t=d().map(b,"value"))||void 0===t?void 0:t.filter((e=>!d().includes(y,e)))},layout:"vertical",children:[(0,h.jsx)(a.A.Item,{name:"searchInput",label:S("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,h.jsx)(r.A,{prefix:(0,h.jsx)(l.A,{}),style:{marginBottom:f.marginSM},placeholder:S("table.SearchTableColumn")})}),(0,h.jsx)(a.A.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.searchInput!==t.searchInput,children:e=>{let{getFieldValue:t}=e;const n=t("searchInput")?d().toLower(t("searchInput")):void 0,s=d().map(b,(e=>d().toLower(d().toString(e.label)).includes(n||"")?e:{...e,style:{display:"none"}}));return(0,h.jsx)(a.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},children:(0,h.jsx)(o.A.Group,{options:s,style:{flexDirection:"column"}})})}})]})})}},9296:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});const s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"email"}],t=[{kind:"Variable",name:"email",variableName:"email"}],n={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"main_access_key",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MyKeypairInfoModalQuery",selections:[{alias:null,args:t,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[n,s],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MyKeypairInfoModalQuery",selections:[{alias:null,args:t,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[n,s,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"f761ef63ec2ae42985aab29dd90cc78b",id:null,metadata:{},name:"MyKeypairInfoModalQuery",operationKind:"query",text:'query MyKeypairInfoModalQuery(\n  $email: String\n) {\n  user(email: $email) {\n    email\n    main_access_key @since(version: "23.09.7")\n    id\n  }\n}\n'}}}();s.hash="4d6d0135199b7cc95c03a9d90cd46f83";const l=s},50738:(e,t,n)=>{n.d(t,{a:()=>l});var s=n(46606);const l=e=>{const[t,n]=(0,s.q)(`hiddenColumnKeys.${e}`);return[t,n]}},83539:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var s=n(32967),l=n(50738),i=n(27340),a=n(90840),r=n(39667),o=n(80951),c=n(89664),d=n(36266),u=n(20572),g=n(68159),h=n(7879),p=n(67884),y=n(1869),m=n(75864),x=n(81021),S=n(60476),f=n(76415),b=n(28174),j=n(37565),A=n(89762),k=n.n(A),v=n(27484),C=n.n(v),w=n(1426),T=n(48602),I=n(42906);const K=()=>{const{t:e}=(0,T.Bd)(),{token:t}=y.A.useToken(),[n,A]=(0,w.useState)(!1),[v,{toggle:K}]=(0,p.A)(),[E,_]=(0,w.useState)(!1),[q,R]=(0,w.useState)(""),[B,D]=(0,s.Tw)("first"),[L,M]=(0,w.useTransition)(),[F,V]=(0,w.useTransition)(),[P,U]=(0,w.useTransition)();(0,s.CX)();const W=[{title:e("logs.TimeStamp"),dataIndex:"formattedTimeStamp",key:"timeStamp",render:e=>(0,I.jsx)("div",{style:{minWidth:50},children:C().isUndefined(e)?"-":(0,I.jsx)(o.A,{keyword:q,children:e})}),fixed:"left"},{title:e("logs.Status"),dataIndex:"statusCode",key:"status",render:(e,t)=>(0,I.jsx)("div",{style:{minWidth:50},children:C().isUndefined(e)?"-":(0,I.jsx)(o.A,{keyword:q,children:e+" "+t.statusText})})},{title:e("logs.ErrorTitle"),dataIndex:"title",key:"errorTitle",render:e=>(0,I.jsx)("div",{style:{minWidth:50},children:e?(0,I.jsx)(o.A,{keyword:q,children:C().toString(e)}):"-"})},{title:e("logs.ErrorMessage"),dataIndex:"message",key:"errorMessage",render:e=>(0,I.jsx)("div",{style:{minWidth:70},children:e?(0,I.jsx)(o.A,{keyword:q,children:e}):"-"})},{title:e("logs.ErrorType"),dataIndex:"type",key:"errorType",render:e=>(0,I.jsx)("div",{style:{minWidth:60},children:e?(0,I.jsx)(o.A,{keyword:q,children:e}):"-"})},{title:e("logs.Method"),dataIndex:"requestMethod",key:"method",render:e=>(0,I.jsx)("div",{style:{minWidth:60},children:e?(0,I.jsx)(o.A,{keyword:q,children:e}):"-"})},{title:e("logs.RequestUrl"),dataIndex:"requestUrl",key:"requestUrl",render:e=>(0,I.jsx)("div",{style:{minWidth:60},children:e?(0,I.jsx)(o.A,{keyword:q,children:e}):"-"})},{title:e("logs.Parameters"),dataIndex:"requestParameters",key:"requestParameter",render:e=>(0,I.jsx)("div",{style:{minWidth:100},children:e?(0,I.jsx)(o.A,{keyword:q,children:e}):"-"})}],[O,H]=(0,l.a)("ErrorLogList"),N=(0,w.useMemo)((()=>{const e=JSON.parse(localStorage.getItem("backendaiwebui.logs")||"[]");return C().map(e,((e,t)=>({...e,key:t,formattedTimeStamp:k()(e.timestamp).format("ll LTS")})))}),[B]),z=(0,w.useMemo)((()=>{if(C().isEmpty(q))return N;const e=new RegExp(`${C().escapeRegExp(q)}`,"i");return C().filter(N,(t=>C().some(t,((t,n)=>"timestamp"!==n&&e.test(C().toString(t))))))}),[q,N]);return(0,I.jsxs)(a.A,{direction:"column",align:"stretch",children:[(0,I.jsxs)(a.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:t.paddingContentVertical,paddingLeft:t.paddingContentHorizontalSM,paddingRight:t.paddingContentHorizontalSM},children:[(0,I.jsxs)(a.A,{direction:"column",align:"start",children:[(0,I.jsx)(m.A.Title,{level:4,style:{margin:0,padding:0},children:e("logs.LogMessages")}),(0,I.jsx)(m.A.Text,{type:"secondary",children:e("logs.UpTo3000Logs")})]}),(0,I.jsxs)(a.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:[(0,I.jsxs)(a.A,{gap:"xs",children:[(0,I.jsx)(x.A,{allowClear:!0,prefix:(0,I.jsx)(c.A,{}),placeholder:e("logs.SearchLogs"),onChange:e=>{V((()=>R(e.target.value)))},style:{width:200}}),(0,I.jsx)(S.A,{onChange:e=>_(e.target.checked),children:e("logs.ShowOnlyError")})]}),(0,I.jsxs)(a.A,{gap:"xs",children:[(0,I.jsx)(f.Ay,{icon:(0,I.jsx)(d.A,{}),loading:L,onClick:()=>{M((()=>D()))},children:e("button.Refresh")}),(0,I.jsx)(f.Ay,{danger:!0,icon:(0,I.jsx)(u.A,{}),onClick:()=>{A(!0)},children:e("button.ClearLogs")})]})]})]}),(0,I.jsx)(b.A,{pagination:{showSizeChanger:!1,style:{marginBottom:0}},loading:!!F&&{indicator:(0,I.jsx)(g.A,{})},scroll:{x:"max-content",y:"calc(100vh - 400px)"},dataSource:E?C().filter(z,(e=>e.isError)):z,columns:C().filter(W,(e=>!C().includes(O,C().toString(null===e||void 0===e?void 0:e.key)))),onRow:e=>({style:{color:e.isError?t.colorError:""}})}),(0,I.jsx)(a.A,{justify:"end",style:{paddingRight:t.paddingXS,paddingBottom:t.paddingXS},children:(0,I.jsx)(f.Ay,{type:"text",icon:(0,I.jsx)(h.A,{}),onClick:()=>{K()}})}),(0,I.jsx)(i.A,{open:n,title:e("dialog.warning.LogDeletion"),okText:e("button.Delete"),okButtonProps:{danger:!0},confirmLoading:P,onOk:()=>{U((()=>{localStorage.removeItem("backendaiwebui.logs"),D(),A(!1)}))},cancelText:e("button.Cancel"),onCancel:()=>A(!1),children:(0,I.jsx)(j.A,{message:e("dialog.warning.CannotBeUndone"),type:"warning"})}),(0,I.jsx)(r.A,{open:v,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&H(C().difference(W.map((e=>C().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),K()},columns:W,hiddenColumnKeys:O})]})};var E,_=n(88653),q=n(88578),R=n(47525),B=n(18347);const D=e=>{let{onRequestClose:t,...l}=e;const{t:r}=(0,T.Bd)(),[o]=(0,_.U6)(),c=(0,s.CX)(),{data:d}=(0,q.nN)({queryKey:["baiClient.keypair.list",l.open],queryFn:()=>l.open?c.keypair.list(o.email,["access_key","secret_key","is_active"],!0).then((e=>e.keypairs)):null,staleTime:0}),u=null===c||void 0===c?void 0:c.supports("main-access-key"),{user:g}=(0,B.useLazyLoadQuery)(void 0!==E?E:E=n(9296),{email:o.email});return(0,I.jsx)(i.A,{...l,title:r("userSettings.MyKeypairInfo"),centered:!0,onCancel:t,destroyOnClose:!0,width:"auto",footer:[(0,I.jsx)(f.Ay,{onClick:()=>{t()},children:r("button.Close")},"keypairInfoClose")],children:(0,I.jsx)(b.A,{scroll:{x:"max-content"},rowKey:"access_key",dataSource:d,columns:[{title:"#",fixed:"left",render:(e,t,n)=>++n,rowScope:"row"},{title:r("general.AccessKey"),key:"accessKey",dataIndex:"access_key",fixed:"left",render:e=>(0,I.jsxs)(a.A,{direction:"column",align:"start",children:[(0,I.jsx)(m.A.Text,{ellipsis:!0,copyable:!0,children:e}),u&&e===(null===g||void 0===g?void 0:g.main_access_key)&&(0,I.jsx)(R.A,{color:"red",children:r("credential.MainAccessKey")})]})},{title:r("general.SecretKey"),key:"secretKey",dataIndex:"secret_key",fixed:"left",render:e=>(0,I.jsx)(m.A.Text,{ellipsis:!0,copyable:!0,children:e})}]})})};var L=n(55616),M=n(77385);const F=e=>{let{onRequestClose:t,isRefreshModalPending:n,...l}=e;const{t:r}=(0,T.Bd)(),{token:o}=y.A.useToken(),c=(0,s.CX)(),{data:d}=(0,q.nN)({queryKey:["refreshSSHKeypair",l.open],queryFn:()=>l.open?c.refreshSSHKeypair():null});return(0,I.jsx)(i.A,{title:r("userSettings.SSHKeypairGeneration"),closeIcon:!1,footer:[(0,I.jsx)(L.A,{title:r("button.Confirm"),description:r("userSettings.ClearSSHKeypairInput"),onConfirm:t,children:(0,I.jsx)(f.Ay,{children:r("button.Close")})},"close")],...l,children:(0,I.jsxs)(M.A,{spinning:n,indicator:(0,I.jsx)(g.A,{}),children:[(0,I.jsx)(m.A.Text,{strong:!0,children:r("userSettings.PublicKey")}),(0,I.jsxs)(a.A,{direction:"row",align:"start",justify:"between",children:[(0,I.jsx)(m.A.Paragraph,{children:(0,I.jsx)("pre",{style:{width:430,maxHeight:100,overflowY:"scroll",scrollbarWidth:"none"},children:null===d||void 0===d?void 0:d.ssh_public_key})}),(0,I.jsx)(m.A.Text,{copyable:{text:null===d||void 0===d?void 0:d.ssh_public_key},style:{marginTop:o.margin}})]}),(0,I.jsx)(m.A.Text,{strong:!0,children:r("userSettings.PrivateKey")}),(0,I.jsxs)(a.A,{direction:"row",align:"start",justify:"between",children:[(0,I.jsxs)(m.A.Paragraph,{children:[(0,I.jsx)("pre",{style:{width:430,maxHeight:100,overflowY:"scroll",scrollbarWidth:"none"},children:null===d||void 0===d?void 0:d.ssh_private_key}),(0,I.jsx)(m.A.Text,{type:"danger",children:r("userSettings.SSHKeypairGenerationWarning")})]}),(0,I.jsx)(m.A.Text,{copyable:{text:null===d||void 0===d?void 0:d.ssh_private_key},style:{marginTop:o.margin}})]})]})})};var V=n(59910);const P=e=>{let{onRequestClose:t,onRequestRefresh:n,...l}=e;const{t:a}=(0,T.Bd)(),r=(0,s.CX)(),o=(0,w.useRef)(null),c=(0,q.ET)({mutationFn:e=>r.postSSHKeypair(e)});return(0,I.jsx)(i.A,{title:a("userSettings.SSHKeypairEnterManually"),okText:a("button.Save"),onOk:()=>{var e;null===(e=o.current)||void 0===e||e.validateFields().then((e=>{c.mutate(e,{onSuccess:()=>{n()}}),t()})).catch((()=>{}))},destroyOnClose:!0,...l,children:(0,I.jsxs)(V.A,{ref:o,preserve:!1,layout:"vertical",requiredMark:"optional",children:[(0,I.jsx)(V.A.Item,{name:"pubkey",label:(0,I.jsx)(m.A.Text,{strong:!0,children:a("userSettings.PublicKey")}),rules:[{required:!0,message:a("settings.InputRequired")}],children:(0,I.jsx)(x.A.TextArea,{rows:5,style:{backgroundColor:"rgba(150, 150, 150, 0.1)"}})}),(0,I.jsx)(V.A.Item,{name:"privkey",label:(0,I.jsx)(m.A.Text,{strong:!0,children:a("userSettings.PrivateKey")}),rules:[{required:!0,message:a("settings.InputRequired")}],children:(0,I.jsx)(x.A.TextArea,{rows:5,style:{backgroundColor:"rgba(150, 150, 150, 0.1)"}})})]})})},U=e=>{let{onRequestClose:t,...n}=e;const{t:l}=(0,T.Bd)(),{token:r}=y.A.useToken(),[o,c]=(0,w.useTransition)(),[d,u]=(0,s.Tw)("initial-fetch"),[g,{toggle:h}]=(0,p.A)(!1),[x,{toggle:S}]=(0,p.A)(!1),b=(0,s.CX)(),{data:j}=(0,q.nN)({queryKey:["fetchSSHKeypair",d],queryFn:()=>b.fetchSSHKeypair()});return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(i.A,{title:l("userSettings.SSHKeypairGeneration"),onCancel:()=>t(),footer:[(0,I.jsx)(f.Ay,{onClick:()=>t(),children:l("button.Close")},"back"),(0,I.jsx)(f.Ay,{type:"primary",onClick:h,children:l("button.Generate")},"generate"),(0,I.jsx)(f.Ay,{type:"primary",onClick:S,children:l("button.EnterManually")},"enterManually")],...n,children:[(0,I.jsx)(m.A.Text,{strong:!0,children:l("userSettings.CurrentSSHPublicKey")}),null!==j&&void 0!==j&&j.ssh_public_key?(0,I.jsxs)(a.A,{direction:"row",align:"start",justify:"between",children:[(0,I.jsx)(m.A.Paragraph,{children:(0,I.jsx)("pre",{style:{width:430,height:270},children:null===j||void 0===j?void 0:j.ssh_public_key})}),(0,I.jsx)(m.A.Text,{copyable:{text:null===j||void 0===j?void 0:j.ssh_public_key},style:{marginTop:r.margin}})]}):(0,I.jsx)(m.A.Paragraph,{children:(0,I.jsx)("pre",{style:{height:270},children:l("userSettings.NoExistingSSHKeypair")})})]}),(0,I.jsx)(F,{open:g,isRefreshModalPending:o,onRequestClose:()=>{h(),c((()=>{u()}))}}),(0,I.jsx)(P,{open:x,onCancel:S,onRequestClose:()=>{S()},onRequestRefresh:()=>{c((()=>{u()}))}})]})};var W=n(94777),O=n(75045),H=n(64041),N=n(8938),z=n(50184),G=n(18695);const $=e=>{let{onRequestClose:t,shellInfo:n,...s}=e;const{t:l}=(0,T.Bd)(),r=N.A.useApp(),[o,c]=(0,w.useState)(".bashrc"),[d,g]=(0,w.useState)(""),[h,p]=(0,w.useState)([]),y=(0,O.QE)(),x=(0,q.ET)({mutationFn:e=>y({method:"POST",url:"/user-config/bootstrap-script",body:{script:e}})}),S=(0,q.ET)({mutationFn:e=>y({method:"PATCH",url:"/user-config/dotfiles",body:{data:e,path:o,permission:"644"}})}),b=(0,q.ET)({mutationFn:e=>y({method:"POST",url:"/user-config/dotfiles",body:{path:o,data:e,permission:"644"}})}),j=(0,q.ET)({mutationFn:()=>y({method:"DELETE",url:"/user-config/dotfiles",body:{path:o}})}),A=()=>{"bootstrap"===n&&y({method:"GET",url:"/user-config/bootstrap-script"}).then((e=>{g(e)})),"userconfig"===n&&y({method:"GET",url:"/user-config/dotfiles"}).then((e=>{const t=C().find(e,{path:o});g((null===t||void 0===t?void 0:t.data)||""),p(e)}))};(0,w.useMemo)((()=>{A()}),[n]);const k=function(){let{closeAfter:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("bootstrap"===n){if(!d)return void r.message.error(l("userSettings.BootstrapScriptEmpty"));x.mutate(d,{onSuccess:n=>{r.message.success(l("userSettings.BootstrapScriptUpdated")),e&&t()},onError:e=>{r.message.error(e.message),console.error(e)}})}if("userconfig"===n){C().find(h,{path:o})?S.mutate(d,{onSuccess:n=>{r.message.success(l("userSettings.DescScriptUpdated")),e?t():A()},onError:e=>{r.message.error(l("userSettings.DescNewUserConfigFileCreated")),console.error(e)}}):b.mutate(d,{onSuccess:n=>{r.message.success(l("userSettings.DescScriptCreated")),e?t():A()},onError:e=>{r.message.error(l("userSettings.DescNewUserConfigFileCreated")),console.error(e)}})}},v=()=>{"bootstrap"===n&&x.mutate("",{onSuccess:e=>{r.message.success(l("userSettings.BootstrapScriptDeleted")),t()},onError:e=>{r.message.error(e.message),console.error(e)}}),"userconfig"===n&&j.mutate(void 0,{onSuccess:e=>{r.message.success(`${l("userSettings.DescScriptDeleted")}${o}`),t()},onError:e=>{r.message.error(e.message),console.error(e)}})};return(0,I.jsx)(i.A,{width:800,title:l("bootstrap"===n?"userSettings.EditBootstrapScript":"userSettings.EditUserConfigScript"),onCancel:()=>t(),okText:l("button.Save"),footer:(0,I.jsxs)(a.A,{justify:"between",style:{width:"100%"},children:[(0,I.jsx)(a.A,{children:(0,I.jsx)(z.A.Button,{type:"default",danger:!0,style:{width:"fit-content"},menu:{items:[{key:"reset",label:l("button.Reset"),onClick:()=>{r.modal.confirm({title:l("dialog.title.LetsDouble-Check"),content:l("dialog.ask.DoYouWantToResetChanges"),onOk:()=>{"bootstrap"===n&&g(""),"userconfig"===n&&g("")}})},danger:!0}]},onClick:()=>{r.modal.confirm({title:l("dialog.title.LetsDouble-Check"),content:l("dialog.ask.DoYouWantToDeleteSomething",{name:"bootstrap"===n?"Bootstrap script":`${o}`}),onOk:v})},children:(0,I.jsx)(u.A,{})})}),(0,I.jsxs)(a.A,{gap:"sm",children:[(0,I.jsx)(f.Ay,{onClick:()=>t(),style:{width:"fit-content"},children:l("button.Cancel")},"cancel"),(0,I.jsx)(z.A.Button,{type:"primary",onClick:()=>{k()},style:{width:"fit-content"},menu:{items:[{key:"save",label:l("button.SaveWithoutClose"),onClick:()=>k({closeAfter:!1})}]},children:l("button.SaveAndClose")},"submit")]})]}),destroyOnClose:!0,...s,children:(0,I.jsxs)(a.A,{direction:"column",align:"stretch",gap:"sm",children:[(0,I.jsx)(m.A.Text,{children:l("userSettings.BootstrapScriptDescription")}),"userconfig"===n&&(0,I.jsx)(G.A,{defaultValue:".bashrc",onChange:e=>{const t=C().find(h,{path:e});g((null===t||void 0===t?void 0:t.data)||""),c(e)},options:[{value:".bashrc"},{value:".zshrc"},{value:".tmux.conf.local"},{value:".vimrc"},{value:".Renviron"}],style:{width:"200px"}}),(0,I.jsx)(H.A,{onChange:e=>g(e),language:"shell",editable:!0,value:d})]})})};var Q=n(46606),X=n(9567),Y=n(93409);const J=(0,Y.withDefault)(Y.StringParam,"general"),Z=()=>{const{t:e}=(0,T.Bd)(),[t,n]=(0,Y.useQueryParam)("tab",J),[s,l]=(0,Q.q)("desktop_notification"),[i,a]=(0,Q.q)("classic_session_launcher"),[r,o]=(0,Q.q)("compact_sidebar"),[c,d]=(0,Q.q)("selected_language"),[,u]=(0,Q.f)("language"),[g,y]=(0,Q.q)("automatic_update_check"),[m,x]=(0,Q.q)("auto_logout"),[S,{toggle:b}]=(0,p.A)(!1),[j,{toggle:A}]=(0,p.A)(!1),[k,v]=(0,Q.q)("preserve_login"),[C,E]=(0,Q.q)("experimental_neo_session_list"),[_,q]=(0,Q.q)("experimental_ai_agents"),[R,B]=(0,w.useState)("bootstrap"),[L,{toggle:M}]=(0,p.A)(!1),F=[{title:e("userSettings.Preferences"),settingItems:[{type:"checkbox",title:e("userSettings.DesktopNotification"),description:(0,I.jsx)(T.x6,{i18nKey:"userSettings.DescDesktopNotification"}),defaultValue:!1,value:s,setValue:l,onChange:e=>{l(e.target.checked)}},{type:"checkbox",title:e("userSettings.UseCompactSidebar"),description:(0,I.jsx)(T.x6,{i18nKey:"userSettings.DescUseCompactSidebar"}),defaultValue:!1,value:r,setValue:o,onChange:e=>{o(e.target.checked)}},{type:"select",title:e("userSettings.Language"),description:e("userSettings.DescLanguage"),selectProps:{options:[{label:e("language.OSDefault"),value:"default"},{label:e("language.English"),value:"en"},{label:e("language.Korean"),value:"ko"},{label:e("language.Brazilian"),value:"pt-BR"},{label:e("language.Chinese"),value:"zh-CN"},{label:e("language.Chinese (Simplified)"),value:"zh-TW"},{label:e("language.French"),value:"fr"},{label:e("language.Finnish"),value:"fi"},{label:e("language.German"),value:"de"},{label:e("language.Greek"),value:"el"},{label:e("language.Indonesian"),value:"id"},{label:e("language.Italian"),value:"it"},{label:e("language.Japanese"),value:"ja"},{label:e("language.Mongolian"),value:"mn"},{label:e("language.Polish"),value:"pl"},{label:e("language.Portuguese"),value:"pt"},{label:e("language.Russian"),value:"ru"},{label:e("language.Spanish"),value:"es"},{label:e("language.Thai"),value:"th"},{label:e("language.Turkish"),value:"tr"},{label:e("language.Vietnamese"),value:"vi"}],showSearch:!0},defaultValue:"default",value:c||"default",setValue:d,onChange:e=>{d(e);const t=globalThis.navigator.language.split("-")[0],n=new CustomEvent("language-changed",{detail:{language:"default"===e?t:e}});u("default"===e?t:e),document.dispatchEvent(n),console.log(globalThis.backendaioptions.get("selected_language"))}},...[globalThis.isElectron&&{type:"checkbox",title:e("userSettings.KeepLoginSessionInformation"),description:(0,I.jsx)(T.x6,{i18nKey:"userSettings.DescKeepLoginSessionInformation"}),defaultValue:!1,value:k,onChange:e=>{v(e.target.checked)}}].filter(Boolean),{type:"checkbox",title:e("userSettings.AutomaticUpdateCheck"),description:(0,I.jsx)(T.x6,{i18nKey:"userSettings.DescAutomaticUpdateCheck"}),defaultValue:!1,value:g,setValue:y,onChange:e=>{y(e.target.checked)}},{type:"checkbox",title:e("userSettings.AutoLogout"),description:e("userSettings.DescAutoLogout"),defaultValue:!1,value:m,setValue:x,onChange:e=>{x(e.target.checked)}},{type:"custom",title:e("userSettings.MyKeypairInfo"),description:e("userSettings.DescMyKeypairInfo"),children:(0,I.jsx)(f.Ay,{icon:(0,I.jsx)(h.A,{}),onClick:()=>b(),children:e("button.Config")})},{type:"custom",title:e("userSettings.SSHKeypairManagement"),description:e("userSettings.DescSSHKeypairManagement"),children:(0,I.jsx)(f.Ay,{icon:(0,I.jsx)(h.A,{}),onClick:()=>A(),children:e("button.Config")})},{type:"checkbox",title:e("userSettings.ClassicSessionLauncher"),description:e("userSettings.DescClassicSessionLauncher"),defaultValue:!1,value:i,onChange:e=>{a(e.target.checked)}}]},{title:e("userSettings.ShellEnvironments"),settingItems:[{type:"custom",title:e("userSettings.EditBootstrapScript"),children:(0,I.jsx)(f.Ay,{icon:(0,I.jsx)(h.A,{}),onClick:()=>{B("bootstrap"),M()},children:e("button.Config")})},{type:"custom",title:e("userSettings.EditUserConfigScript"),children:(0,I.jsx)(f.Ay,{icon:(0,I.jsx)(h.A,{}),onClick:()=>{B("userconfig"),M()},children:e("button.Config")})}]},{title:e("userSettings.ExperimentalFeatures"),description:e("userSettings.ExperimentalFeaturesDesc"),settingItems:[{type:"checkbox",title:e("userSettings.NEOSessionList"),description:e("general.Enabled"),defaultValue:!1,value:C,setValue:E,onChange:e=>{E(e.target.checked)}},{type:"checkbox",title:e("userSettings.AIAgents"),description:e("general.Enabled"),defaultValue:!1,value:_,setValue:q,onChange:e=>{q(e.target.checked)}}]}];return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(X.A,{activeTabKey:t,onTabChange:e=>n(e),tabList:[{key:"general",label:e("userSettings.General")},{key:"logs",label:e("userSettings.Logs")}],bodyStyle:{padding:0},children:["general"===t&&(0,I.jsx)(W.A,{settingGroups:F,showChangedOptionFilter:!0,showResetButton:!0,showSearchBar:!0}),"logs"===t&&(0,I.jsx)(K,{})]}),(0,I.jsx)(D,{open:S,onRequestClose:b}),(0,I.jsx)(U,{open:j,onRequestClose:A}),R&&(0,I.jsx)($,{open:L,shellInfo:R,onRequestClose:()=>{M()},afterClose:()=>{B(void 0)}})]})}},96099:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(61293),l=n(1426),i=n(53886),a=n(3181),r=function(e,t){return l.createElement(a.A,(0,s.A)({},e,{ref:t,icon:i.A}))};const o=l.forwardRef(r)}}]);
//# sourceMappingURL=3539.9ae107dd.chunk.js.map