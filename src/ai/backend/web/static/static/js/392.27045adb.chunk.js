"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[392,959],{77758:function(e,n,t){t.d(n,{Z:function(){return o}});var i=t(1413),r=t(36459),l=t(83842),a=(t(4519),t(2556)),o=function(e){var n,t=Object.assign({},((0,r.Z)(e),e));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{children:".ant-modal.bai-modal .ant-modal-content {\n  padding: var(--general-modal-content-padding, 0);\n}\n.ant-modal.bai-modal .ant-modal-body {\n  padding: var(--general-modal-body-padding, 0 24px);\n}\n\n.ant-modal.bai-modal .ant-modal-footer {\n  padding: var(--general-modal-footer-padding, 0 20px 24px 20px);\n}\n\n.ant-modal.bai-modal .ant-modal-header {\n  border-bottom: 1px solid rgb(221, 221, 221);\n  border-width: 100%;\n  justify-content: space-between;\n  display: flex;\n  align-items: center;\n}\n\n.ant-modal.bai-modal .ant-modal-content .ant-modal-header,\n.ant-modal.bai-modal .ant-modal-content > button.ant-modal-close {\n  padding: var(--general-modal-header-padding, 10px 20px);\n  height: var(--general-modal-header-height, 69px);\n}\n\n.ant-modal.bai-modal .ant-modal-content > button.ant-modal-close {\n  /* center */\n  top: 0;\n}\n"}),(0,a.jsx)(l.Z,(0,i.Z)({centered:null===(n=t.centered)||void 0===n||n,className:"bai-modal"},t))]})}},5959:function(e,n,t){t.r(n);var i=t(28499),r=(t(4519),t(2556));n.default=function(e){var n=e.text,t=e.children;return(0,r.jsx)(i.Z.Text,{copyable:!0,code:!0,children:n||t})}},96451:function(e,n,t){var i,r=t(82548),l=(t(4519),t(16980)),a=t(2556);n.Z=function(e){var n,o=e.endpointFrgmt,s=(0,l.useFragment)(void 0!==i?i:i=t(58393),o),d="default";switch(null===s||void 0===s||null===(n=s.status)||void 0===n?void 0:n.toUpperCase()){case"RUNNING":case"HEALTHY":d="success"}return(0,a.jsx)(r.Z,{color:d,children:null===s||void 0===s?void 0:s.status})}},14001:function(e,n,t){var i=t(1413),r=t(29439),l=t(87760),a=t(4519),o=t(2556),s=function(e,n){var t=e.image,a=e.style,s=void 0===a?{}:a,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",u=(0,l.dS)(),c=(0,r.Z)(u,2)[1].getImageIcon;return(0,o.jsx)("img",{src:c(t),style:(0,i.Z)({width:"1.5em",height:"1.5em"},s),alt:d})};n.Z=a.memo(s)},76587:function(e,n,t){var i,r=t(1413),l=t(29439),a=t(44925),o=t(43255),s=t(87760),d=t(50164),u=t(77758),c=t(99277),m=t(44036),g=t(42257),f=t(66653),v=(t(4519),t(81748)),p=t(16980),h=t(2556),x=["onRequestClose","endpointFrgmt"];n.Z=function(e){var n=e.onRequestClose,S=e.endpointFrgmt,k=(0,a.Z)(e,x),y=m.Z.useToken().token,b=(0,s.Dj)(),_=(0,v.$G)().t,Z=g.Z.useForm(),j=(0,l.Z)(Z,1)[0],F=(0,p.useFragment)(void 0!==i?i:i=t(56326),S),I=(0,d.Y)({mutationFn:function(e){var n={to:e.desired_session_count};return(0,o.Lc)({method:"POST",url:"/services/".concat(null===F||void 0===F?void 0:F.endpoint_id,"/scale"),body:n,client:b})}});return(0,h.jsx)(u.Z,(0,r.Z)((0,r.Z)({style:{zIndex:1e4},destroyOnClose:!0,onOk:function(e){j.validateFields().then((function(e){I.mutate(e,{onSuccess:function(){console.log("service updated"),n(!0)},onError:function(e){console.log(e)}})})).catch((function(e){console.log(e)}))},onCancel:function(){n()},okButtonProps:{loading:I.isLoading},title:_("modelService.EditModelService")},k),{},{children:(0,h.jsx)(c.Z,{direction:"row",align:"stretch",justify:"around",children:(0,h.jsx)(g.Z,{form:j,preserve:!1,validateTrigger:["onChange","onBlur"],initialValues:{desired_session_count:null===F||void 0===F?void 0:F.desired_session_count},style:{marginBottom:y.marginLG,marginTop:y.margin},children:(0,h.jsx)(g.Z.Item,{name:"desired_session_count",label:_("modelService.DesiredSessionCount"),rules:[{pattern:/^[0-9]+$/,message:_("modelService.OnlyAllowsNonNegativeIntegers")}],children:(0,h.jsx)(f.Z,{type:"number",min:0})})})})}))}},58393:function(e,n,t){t.r(n);var i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EndpointStatusTagFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],type:"Endpoint",abstractKey:null,hash:"3b31efa50b55edddcb210b59003dc479"};n.default=i},56326:function(e,n,t){t.r(n);var i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ModelServiceSettingModal_endpoint",selections:[{alias:null,args:null,kind:"ScalarField",name:"endpoint_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"desired_session_count",storageKey:null}],type:"Endpoint",abstractKey:null,hash:"881f18324b27eba6ff0fcfb83ae241d2"};n.default=i},90146:function(e,n,t){t.r(n);var i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ServingRouteErrorModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"session_id",storageKey:null},{alias:null,args:null,concreteType:"InferenceSessionErrorInfo",kind:"LinkedField",name:"errors",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"repr",storageKey:null}],storageKey:null}],type:"InferenceSessionError",abstractKey:null,hash:"a1003e0f75387e665f4407909eea5ff6"};n.default=i},43255:function(e,n,t){t.d(n,{Cd:function(){return v},Hz:function(){return u},LD:function(){return d},Lc:function(){return a},PZ:function(){return m},Uz:function(){return c},VQ:function(){return g},We:function(){return l},XG:function(){return s},lA:function(){return f},y3:function(){return o}});var i=t(87760),r=t(2556),l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/(<br\s*\/?>|\n)/;return e.split(n).map((function(e,t){return e.match(n)?(0,r.jsx)("br",{},t):e}))},a=function(e){var n=e.method,t=e.url,i=e.body,r=void 0===i?null:i,l=e.client,a=null===l||void 0===l?void 0:l.newSignedRequest(n,t,r,null);return null===l||void 0===l?void 0:l._wrapWithPromise(a)},o=function(){var e=(0,i.Dj)();return function(n){var t=n.method,i=n.url,r=n.body;return a({method:t,url:i,body:void 0===r?null:r,client:e})}},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var t=Math.pow(10,3);n=n<0?0:n;var i=Math.floor(Math.log(Math.round(e))/Math.log(t));return i=i<0?0:i,parseFloat((e/Math.pow(t,i)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB"][i]},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return 0;"string"===typeof e&&(e=parseInt(e));var i,r,l=Math.pow(2,10);return n=n<0||t?0:n,i=(i=Math.floor(Math.log(Math.round(e))/Math.log(l)))<0?0:i,r=t?["","Ki","Mi","Gi","Ti","Pi","Ei"]:["Bytes","KiB","MiB","GiB","TiB","PiB","EiB"],parseFloat((e/Math.pow(l,i)).toFixed(n))+" "+r[i]};var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Math.pow(10,9);return Math.round(n*e)},c=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return null===e||void 0===e?arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-":e?(e/Math.pow(10,9)).toFixed(n):e};function m(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=["B","K","M","G","T","P","E"],r=e.slice(-1).toUpperCase(),l=parseFloat(e.slice(0,-1)),a=i.indexOf(r);if(-1===a||isNaN(l))throw new Error("Invalid size format");var o=l*Math.pow(1024,a),s=n?i.indexOf(n.toUpperCase()):a,d=o/Math.pow(1024,s),u=d.toFixed(t);return{number:d,numberFixed:u,unit:i[s],numberUnit:"".concat(u).concat(i[s])}}var g=function(e,n){return""===n||void 0===n?"":n.startsWith("".concat(e,":"))?n:"".concat(e,":").concat(n)},f=function(e){return e<70?"rgba(58, 178, 97, 1)":e<90?"rgb(223, 179, 23)":"#ef5350"},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return i=t+i>e.length?e.length:i,e.substring(0,t)+n.repeat(i)+e.substring(t+i,e.length)}},87760:function(e,n,t){t.d(n,{Dj:function(){return u},Kr:function(){return a},M:function(){return d},dS:function(){return c},qh:function(){return s},tQ:function(){return o}});var i=t(29439),r=t(4519),l=t(87112),a=function(e){return function(e){var n=(0,r.useState)(e||(new Date).toISOString()),t=(0,i.Z)(n,2),l=t[0],a=t[1];return[l,function(e){a(e||(new Date).toISOString())}]}(e)},o=function(){return u()._config.domainName},s=function(){var e=u(),n=(0,r.useState)({name:e.current_group,id:e.groupIds[e.current_group]}),t=(0,i.Z)(n,2),l=t[0],a=t[1];return(0,r.useEffect)((function(){var n=function(n){var t=n.detail;a({name:t,id:e.groupIds[t]})};return document.addEventListener("backend-ai-group-changed",n),function(){document.removeEventListener("backend-ai-group-changed",n)}})),l},d=function(e){var n=e.api_endpoint;return(0,r.useMemo)((function(){var e=new globalThis.BackendAIClientConfig("","",n,"SESSION");return new globalThis.BackendAIClient(e,"Backend.AI Console.")}),[n])},u=function(){return(0,l.useQuery)({queryKey:"backendai-client-for-suspense",queryFn:function(){return new Promise((function(e){if("undefined"!==typeof globalThis.backendaiclient&&null!==globalThis.backendaiclient&&!1!==globalThis.backendaiclient.ready)return e(globalThis.backendaiclient);document.addEventListener("backend-ai-connected",(function n(){e(globalThis.backendaiclient),document.removeEventListener("backend-ai-connected",n)}))}))},retry:!1,suspense:!0}).data},c=function(){var e=(0,l.useQuery)({queryKey:"backendai-metadata-for-suspense",queryFn:function(){return fetch("resources/image_metadata.json").then((function(e){return e.json()})).then((function(e){return e}))},suspense:!0,retry:!1}).data,n=function(e){if(!e)return{key:"",tags:[]};var n=e.split("/"),t=(n[2]||n[1]).split(":"),r=(0,i.Z)(t,2);return{key:r[0],tags:r[1].split("-")}};return[e,{getImageAliasName:function(t){var i=n(t).key;return(null===e||void 0===e?void 0:e.imageInfo[i].name)||i},getImageIcon:function(t){var i,r,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"resources/icons/";if(!t)return"default.png";var a=n(t).key;return l+(void 0!==(null===e||void 0===e||null===(i=e.imageInfo[a])||void 0===i?void 0:i.icon)?null===e||void 0===e||null===(r=e.imageInfo[a])||void 0===r?void 0:r.icon:"default.png")},getImageTags:function(e){},getBaseVersion:function(e){return n(e).tags[0]},getBaseImage:function(e){return n(e).tags[1]},getImageMeta:n}]}},50164:function(e,n,t){t.d(n,{Y:function(){return l},h:function(){return r}});var i=t(87112),r=i.useQuery,l=i.useMutation},73392:function(e,n,t){t.r(n),t.d(n,{default:function(){return ee}});var i,r,l=t(1413),a=t(29439),o=t(5959),s=t(96451),d=t(44925),u=t(43255),c=t(87760),m=t(50164),g=t(77758),f=t(99277),v=t(42257),p=t(32360),h=t(52176),x=t(66957),S=t(99517),k=t.n(S),y=t(4519),b=t(81748),_=t(2556),Z=["onRequestClose","onCancel","endpoint_id"],j=function(e){var n=e.onRequestClose,t=(e.onCancel,e.endpoint_id),i=(0,d.Z)(e,Z),r=(0,b.$G)().t,o=(0,c.Dj)(),s=v.Z.useForm(),S=(0,a.Z)(s,1)[0],y=(0,m.Y)({mutationFn:function(e){var n={valid_until:e.valid_until};return(0,u.Lc)({method:"POST",url:"/services/".concat(t,"/token"),body:n,client:o})}});return(0,_.jsx)(g.Z,(0,l.Z)((0,l.Z)({},i),{},{destroyOnClose:!0,onOk:function(e){S.validateFields().then((function(e){var t=Math.floor(k()(e.datetime.format("YYYY-MM-DD HH:mm:ss")).valueOf()/1e3);y.mutate({valid_until:t},{onSuccess:function(){p.ZP.success(r("modelService.TokenGenerated")),n(!0)},onError:function(e){var n;null!==e&&void 0!==e&&null!==(n=e.message)&&void 0!==n&&n.includes("valid_until is older than now")?p.ZP.error(r("modelService.TokenExpiredDateError")):(p.ZP.error(r("modelService.TokenGenerationFailed")),console.log(e))}})}))},onCancel:function(){n()},okText:r("modelService.Generate"),confirmLoading:y.isLoading,centered:!0,title:r("modelService.GenerateNewToken"),children:(0,_.jsx)(v.Z,{preserve:!1,labelCol:{span:10},initialValues:{datetime:k()().add(24,"hour")},validateTrigger:["onChange","onBlur"],style:{maxWidth:500},form:S,children:(0,_.jsxs)(f.Z,{direction:"column",gap:"sm",align:"stretch",children:[(0,_.jsx)(h.Z,{type:"info",showIcon:!0,message:r("modelService.TokenExpiredDateHelp")}),(0,_.jsx)(f.Z,{direction:"row",align:"stretch",justify:"around",children:(0,_.jsx)(v.Z.Item,{name:"datetime",label:r("modelService.ExpiredDate"),rules:[{type:"object",required:!0,message:r("modelService.PleaseSelectTime")},function(){return{validator:function(e,n){return n.isAfter(k()())?Promise.resolve():Promise.reject(new Error(r("modelService.TokenExpiredDateError")))}}}],children:(0,_.jsx)(x.Z,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",style:{width:200}})})})]})})}))},F=t(14001),I=t(76587),T=t(28499),E=t(32048),K=t.n(E),L=function(e){var n=e.cpu,t=e.mem,i=e.gpu;return(0,_.jsxs)(_.Fragment,{children:[!K().isUndefined(n)&&(0,_.jsxs)(T.Z.Text,{children:["CPU: ",n]}),!K().isUndefined(t)&&(0,_.jsxs)(T.Z.Text,{children:["Mem: ",(0,u.LD)(parseInt(t+""))]}),!K().isUndefined(i)&&(0,_.jsxs)(T.Z.Text,{children:["GPU: ",i]})]})},M=t(12513),w=t(21346),C=t(16980),D=["onRequestClose","onCancel","inferenceSessionErrorFrgmt"],P=function(e){var n=e.onRequestClose,r=(e.onCancel,e.inferenceSessionErrorFrgmt),a=(0,d.Z)(e,D),s=(0,b.$G)().t,u=(0,C.useFragment)(void 0!==i?i:i=t(90146),r);return(0,_.jsx)(g.Z,(0,l.Z)((0,l.Z)({centered:!0,title:s("modelService.ServingRouteErrorModalTitle"),onCancel:function(){n()},footer:[(0,_.jsx)(M.ZP,{onClick:function(){n()},children:s("button.Close")})]},a),{},{children:(0,_.jsxs)(w.Z,{bordered:!0,column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1},labelStyle:{minWidth:100},style:{marginTop:20},children:[(0,_.jsx)(w.Z.Item,{label:s("modelService.SessionId"),children:(0,_.jsx)(o.default,{children:null===u||void 0===u?void 0:u.session_id})}),(0,_.jsx)(w.Z.Item,{label:s("dialog.error.Error"),children:null===u||void 0===u?void 0:u.errors[0].repr})]})}))},R=t(43971),O=t(72842),B=t(43596),Y=t(83861),N=t(31662),q=t(20558),G=t(56713),U=t(44036),H=t(60284),A=t(227),V=t(53066),$=t(82548),Q=t(81722),z=t(26524),W=t(12674),J=function(e,n){var t=k()(e.created_at),i=k()(n.created_at);return t.diff(i)},X=function(e){var n=k()(),t=k()(e);return n.diff(t)>0},ee=function(){var e=(0,b.$G)().t,n=U.Z.useToken().token,i=(0,c.Dj)(),d=(0,W.s0)(),g=(0,W.UO)().serviceId,v=(0,c.Kr)("initial-fetch"),p=(0,a.Z)(v,2),h=p[0],x=p[1],S=(0,y.useTransition)(),Z=(0,a.Z)(S,2),E=Z[0],K=Z[1],D=(0,y.useTransition)(),ee=(0,a.Z)(D,2),ne=ee[0],te=ee[1],ie=(0,y.useState)(null),re=(0,a.Z)(ie,2),le=re[0],ae=re[1],oe=(0,y.useState)(!1),se=(0,a.Z)(oe,2),de=se[0],ue=se[1],ce=(0,y.useState)(!1),me=(0,a.Z)(ce,2),ge=me[0],fe=me[1],ve=(0,y.useState)({current:1,pageSize:100}),pe=(0,a.Z)(ve,1)[0],he=(0,C.useLazyLoadQuery)(void 0!==r?r:r=t(4464),{tokenListOffset:(pe.current-1)*pe.pageSize,tokenListLimit:pe.pageSize,endpointId:g},{fetchPolicy:"initial-fetch"===h?"store-and-network":"network-only",fetchKey:h}),xe=he.endpoint,Se=he.endpoint_token_list,ke=(0,m.Y)((function(){if(xe)return(0,u.Lc)({method:"POST",url:"/services/".concat(xe.endpoint_id,"/errors/clear"),client:i})})),ye=function(){var e="default";switch((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toUpperCase()){case"HEALTHY":e="success";break;case"PROVISIONING":e="processing";break;case"UNHEALTHY":e="warning"}return e};return(0,_.jsxs)(f.Z,{direction:"column",align:"stretch",style:{margin:n.marginSM},gap:"sm",children:[(0,_.jsx)(H.Z,{items:[{title:e("modelService.Services"),onClick:function(e){e.preventDefault(),d("/serving")},href:"/serving"},{title:e("modelService.RoutingInfo")}]}),(0,_.jsxs)(f.Z,{direction:"row",justify:"between",children:[(0,_.jsx)(T.Z.Title,{level:3,style:{margin:0},children:(null===xe||void 0===xe?void 0:xe.name)||""}),(0,_.jsxs)(f.Z,{gap:"xxs",children:[((null===xe||void 0===xe?void 0:xe.retries)||0)>0?(0,_.jsx)(A.Z,{title:e("modelService.ClearErrors"),children:(0,_.jsx)(M.ZP,{loading:ne,icon:(0,_.jsx)(R.Z,{}),onClick:function(){te((function(){ke.mutate(void 0,{onSuccess:function(){return K((function(){x()}))}})}))}})}):(0,_.jsx)(_.Fragment,{}),(0,_.jsx)(M.ZP,{loading:E,icon:(0,_.jsx)(O.Z,{}),onClick:function(){K((function(){x()}))},children:e("button.Refresh")})]})]}),(0,_.jsx)(V.Z,{title:e("modelService.ServiceInfo"),extra:(0,_.jsx)(M.ZP,{type:"primary",icon:(0,_.jsx)(B.Z,{}),disabled:((null===xe||void 0===xe?void 0:xe.desired_session_count)||0)<0,onClick:function(){ue(!0)},children:e("button.Edit")}),children:(0,_.jsxs)(w.Z,{bordered:!0,column:{xxl:3,xl:3,lg:2,md:1,sm:1,xs:1},style:{backgroundColor:n.colorBgBase},children:[(0,_.jsx)(w.Z.Item,{label:e("modelService.EndpointName"),children:(0,_.jsx)(T.Z.Text,{copyable:!0,children:null===xe||void 0===xe?void 0:xe.name})}),(0,_.jsx)(w.Z.Item,{label:e("modelService.Status"),children:(0,_.jsx)(s.Z,{endpointFrgmt:xe})}),(0,_.jsx)(w.Z.Item,{label:e("modelService.EndpointId"),children:null===xe||void 0===xe?void 0:xe.endpoint_id}),(0,_.jsx)(w.Z.Item,{label:e("modelService.SessionOwner"),children:i.email||""}),(0,_.jsx)(w.Z.Item,{label:e("modelService.DesiredSessionCount"),children:null===xe||void 0===xe?void 0:xe.desired_session_count}),(0,_.jsx)(w.Z.Item,{label:e("modelService.ServiceEndpoint"),children:null!==xe&&void 0!==xe&&xe.url?(0,_.jsx)(T.Z.Text,{copyable:!0,children:null===xe||void 0===xe?void 0:xe.url}):(0,_.jsx)($.Z,{children:e("modelService.NoServiceEndpoint")})}),(0,_.jsx)(w.Z.Item,{label:e("modelService.OpenToPublic"),children:null!==xe&&void 0!==xe&&xe.open_to_public?(0,_.jsx)(Y.Z,{}):(0,_.jsx)(N.Z,{})}),(0,_.jsx)(w.Z.Item,{label:e("modelService.resources"),span:2,children:(0,_.jsxs)(f.Z,{direction:"row",gap:"sm",children:[null===xe||void 0===xe?void 0:xe.resource_group,(0,_.jsx)(L,(0,l.Z)({},JSON.parse((null===xe||void 0===xe?void 0:xe.resource_slots)||"{}")))]})}),(0,_.jsx)(w.Z.Item,{label:"Image",children:(null===xe||void 0===xe?void 0:xe.image)&&(0,_.jsxs)(f.Z,{direction:"row",gap:"xs",children:[(0,_.jsx)(F.Z,{image:xe.image}),(0,_.jsx)(o.default,{children:xe.image})]})})]})}),(0,_.jsx)(V.Z,{title:e("modelService.GeneratedTokens"),extra:(0,_.jsx)(M.ZP,{type:"primary",icon:(0,_.jsx)(q.Z,{}),onClick:function(){fe(!0)},children:e("modelService.GenerateToken")}),children:(0,_.jsx)(Q.Z,{scroll:{x:"max-content"},rowKey:"endpoint_id",columns:[{title:"#",fixed:"left",render:function(e,n,t){return++t},showSorterTooltip:!1},{title:"Token",dataIndex:"token",fixed:"left",render:function(e,n){return(0,_.jsx)(T.Z.Text,{ellipsis:!0,copyable:!0,style:{width:150},children:n.token})}},{title:"Status",render:function(e,n){return(0,_.jsx)($.Z,{color:X(n.valid_until)?"red":"green",children:X(n.valid_until)?"Expired":"Valid"})}},{title:"Valid Until",dataIndex:"valid_until",render:function(e,n){return(0,_.jsx)("span",{children:n.valid_until?k()(n.valid_until+n.created_at.split(/(?=\+)/g)[1]).format("YYYY/MM/DD ddd HH:mm:ss"):"-"})},defaultSortOrder:"descend",sortDirections:["descend","ascend","descend"],sorter:J},{title:"Created at",dataIndex:"created_at",render:function(e,n){return(0,_.jsx)("span",{children:k()(n.created_at).format("YYYY/MM/DD ddd HH:mm:ss")})},defaultSortOrder:"descend",sortDirections:["descend","ascend","descend"],sorter:J}],pagination:!1,dataSource:null===Se||void 0===Se?void 0:Se.items,bordered:!0})}),(0,_.jsx)(V.Z,{title:e("modelService.RoutesInfo"),children:(0,_.jsx)(Q.Z,{scroll:{x:"max-content"},columns:[{title:e("modelService.RouteId"),dataIndex:"routing_id",fixed:"left"},{title:e("modelService.SessionId"),dataIndex:"session"},{title:e("modelService.Status"),render:function(e,t){var i=t.session,r=t.status;return r&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)($.Z,{color:ye(r),style:{marginRight:0},children:r.toUpperCase()},r),"FAILED_TO_START"===r&&(0,_.jsx)(z.Z,{children:(0,_.jsx)(M.ZP,{size:"small",type:"text",icon:(0,_.jsx)(G.Z,{}),style:{color:n.colorTextSecondary},onClick:function(){return function(e){if(null!==xe){var n=xe.errors.find((function(n){var t=n.session_id;return e===t}));ae(n||null)}}(i)}})})]})}},{title:e("modelService.TrafficRatio"),dataIndex:"traffic_ratio"}],pagination:!1,dataSource:null===xe||void 0===xe?void 0:xe.routings,rowKey:"routing_id",bordered:!0})}),(0,_.jsx)(P,{open:!!le,inferenceSessionErrorFrgmt:le,onRequestClose:function(){return ae(null)}}),(0,_.jsx)(I.Z,{open:de,onRequestClose:function(e){ue(!1),e&&K((function(){x()}))},endpointFrgmt:xe}),(0,_.jsx)(j,{open:ge,onRequestClose:function(e){fe(!1),e&&K((function(){x()}))},endpoint_id:(null===xe||void 0===xe?void 0:xe.endpoint_id)||""})]})}},4464:function(e,n,t){t.r(n);var i=function(){var e={defaultValue:null,kind:"LocalArgument",name:"endpointId"},n={defaultValue:null,kind:"LocalArgument",name:"tokenListLimit"},t={defaultValue:null,kind:"LocalArgument",name:"tokenListOffset"},i={kind:"Variable",name:"endpoint_id",variableName:"endpointId"},r=[i],l={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"endpoint_id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"image",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"desired_session_count",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"open_to_public",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"session_id",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"retries",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"resource_group",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"resource_slots",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"routing_id",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"session",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"traffic_ratio",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"endpoint",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},y={alias:null,args:[i,{kind:"Variable",name:"limit",variableName:"tokenListLimit"},{kind:"Variable",name:"offset",variableName:"tokenListOffset"}],concreteType:"EndpointTokenList",kind:"LinkedField",name:"endpoint_token_list",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null},{alias:null,args:null,concreteType:"EndpointToken",kind:"LinkedField",name:"items",plural:!0,selections:[k,{alias:null,args:null,kind:"ScalarField",name:"token",storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"session_owner",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"valid_until",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[e,n,t],kind:"Fragment",metadata:null,name:"RoutingListPageQuery",selections:[{alias:null,args:r,concreteType:"Endpoint",kind:"LinkedField",name:"endpoint",plural:!1,selections:[l,a,o,s,d,u,{alias:null,args:null,concreteType:"InferenceSessionError",kind:"LinkedField",name:"errors",plural:!0,selections:[c,{args:null,kind:"FragmentSpread",name:"ServingRouteErrorModalFragment"}],storageKey:null},m,g,f,{alias:null,args:null,concreteType:"Routing",kind:"LinkedField",name:"routings",plural:!0,selections:[v,p,h,x,S],storageKey:null},{args:null,kind:"FragmentSpread",name:"EndpointStatusTagFragment"},{args:null,kind:"FragmentSpread",name:"ModelServiceSettingModal_endpoint"}],storageKey:null},y],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,t,n],kind:"Operation",name:"RoutingListPageQuery",selections:[{alias:null,args:r,concreteType:"Endpoint",kind:"LinkedField",name:"endpoint",plural:!1,selections:[l,a,o,s,d,u,{alias:null,args:null,concreteType:"InferenceSessionError",kind:"LinkedField",name:"errors",plural:!0,selections:[c,{alias:null,args:null,concreteType:"InferenceSessionErrorInfo",kind:"LinkedField",name:"errors",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"repr",storageKey:null}],storageKey:null}],storageKey:null},m,g,f,{alias:null,args:null,concreteType:"Routing",kind:"LinkedField",name:"routings",plural:!0,selections:[v,p,h,x,S,k],storageKey:null},k,S],storageKey:null},y]},params:{cacheID:"61f46544837d4dc1852727ee8b62926e",id:null,metadata:{},name:"RoutingListPageQuery",operationKind:"query",text:"query RoutingListPageQuery(\n  $endpointId: UUID!\n  $tokenListOffset: Int!\n  $tokenListLimit: Int!\n) {\n  endpoint(endpoint_id: $endpointId) {\n    name\n    endpoint_id\n    image\n    desired_session_count\n    url\n    open_to_public\n    errors {\n      session_id\n      ...ServingRouteErrorModalFragment\n    }\n    retries\n    resource_group\n    resource_slots\n    routings {\n      routing_id\n      session\n      traffic_ratio\n      endpoint\n      status\n      id\n    }\n    ...EndpointStatusTagFragment\n    ...ModelServiceSettingModal_endpoint\n    id\n  }\n  endpoint_token_list(offset: $tokenListOffset, limit: $tokenListLimit, endpoint_id: $endpointId) {\n    total_count\n    items {\n      id\n      token\n      endpoint_id\n      domain\n      project\n      session_owner\n      created_at\n      valid_until\n    }\n  }\n}\n\nfragment EndpointStatusTagFragment on Endpoint {\n  id\n  status\n}\n\nfragment ModelServiceSettingModal_endpoint on Endpoint {\n  endpoint_id\n  desired_session_count\n}\n\nfragment ServingRouteErrorModalFragment on InferenceSessionError {\n  session_id\n  errors {\n    repr\n  }\n}\n"}}}();i.hash="7da96e4b274733fe0916e71096fb0c9a",n.default=i}}]);
//# sourceMappingURL=392.27045adb.chunk.js.map