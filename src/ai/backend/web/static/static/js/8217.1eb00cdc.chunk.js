"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[1661,8217],{11661(n,e,a){a.r(e),a.d(e,{default:()=>_});var l=a(18249);const s=function(){var n={defaultValue:null,kind:"LocalArgument",name:"project_id"},e={defaultValue:null,kind:"LocalArgument",name:"sessionId"},a=[{kind:"Variable",name:"id",variableName:"sessionId"},{kind:"Variable",name:"project_id",variableName:"project_id"}],l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null};return{fragment:{argumentDefinitions:[n,e],kind:"Fragment",metadata:null,name:"ContainerLogModalWithLazyQueryLoaderQuery",selections:[{alias:null,args:a,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ContainerLogModalFragment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,n],kind:"Operation",name:"ContainerLogModalWithLazyQueryLoaderQuery",selections:[{alias:null,args:a,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[l,s,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[l,s,{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_hostname",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{cacheID:"b1843ec8c1cd80c5fbc8ff362877bf6e",id:null,metadata:{},name:"ContainerLogModalWithLazyQueryLoaderQuery",operationKind:"query",text:"query ContainerLogModalWithLazyQueryLoaderQuery(\n  $sessionId: GlobalIDField!\n  $project_id: UUID!\n) {\n  compute_session_node(id: $sessionId, project_id: $project_id) {\n    ...ContainerLogModalFragment\n    id\n  }\n}\n\nfragment ContainerLogModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  status\n  access_key\n  kernel_nodes {\n    edges {\n      node {\n        id\n        row_id\n        container_id\n        cluster_idx\n        cluster_role\n        cluster_hostname\n      }\n    }\n  }\n}\n"}}}();s.hash="6c9b5934d5fea075e571c13b1c070bd1";const i=s;var o=a(45682),r=a(20398),t=a(96337),d=a(19869),u=a(33337);const g=n=>{let{sessionId:e,open:a,loading:l,onRequestClose:s}=n;const g=(0,o.hd)(),{compute_session_node:m}=(0,d.useLazyLoadQuery)(i,{sessionId:e,project_id:g.id},{fetchPolicy:e?"network-only":"store-only"});return(0,u.jsx)(t.XcZ,{children:(0,u.jsx)(r.A,{sessionFrgmt:m||null,open:a,loading:l,onCancel:()=>{s&&s()}})})};var m=a(76905),c=a(32397),p=a(22905);const _=()=>{const[n,e]=(0,p.useQueryParam)("sessionDetail",p.StringParam),[a,s]=(0,c.useState)(),[i,o]=(0,c.useTransition)(),r=(0,l.CX)();(0,c.useEffect)((()=>{const n=n=>{o((()=>{s(n.detail)}))};return document.addEventListener("bai-open-session-log",n),()=>{document.removeEventListener("bai-open-session-log",n)}}),[o,s]);const d=null===r||void 0===r?void 0:r.supports("session-node");return(0,u.jsxs)(u.Fragment,{children:[d?(0,u.jsx)(t.XcZ,{children:(0,u.jsx)(m.A,{open:!!n,sessionId:n||void 0,onClose:()=>{e(null,"replaceIn")}})}):null,(0,u.jsx)(g,{open:!!a||i,loading:i,sessionId:a,onRequestClose:()=>{s(void 0)}})]})}},88217(n,e,a){a.r(e),a.d(e,{default:()=>b});var l=a(23177),s=a(63745),i=a(96337),o=a(3372),r=a(32397),t=a(94109),d=a(47718);const u=function(){var n={defaultValue:20,kind:"LocalArgument",name:"first"},e={defaultValue:0,kind:"LocalArgument",name:"offset"},a={defaultValue:null,kind:"LocalArgument",name:"resource_group_id"},l=[{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"offset",variableName:"offset"},{kind:"Variable",name:"resource_group_id",variableName:"resource_group_id"}],s={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},d=[{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],u={alias:null,args:null,kind:"ScalarField",name:"status_info",storageKey:null};return{fragment:{argumentDefinitions:[n,e,a],kind:"Fragment",metadata:null,name:"PendingSessionNodeListQuery",selections:[{alias:null,args:l,concreteType:"SessionPendingQueueConnection",kind:"LinkedField",name:"session_pending_queue",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"SessionPendingQueueEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"SessionDetailDrawerFragment"},{args:null,kind:"FragmentSpread",name:"SessionNodesFragment"}],storageKey:null}],storageKey:null},action:"THROW"},s],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[a,n,e],kind:"Operation",name:"PendingSessionNodeListQuery",selections:[{alias:null,args:l,concreteType:"SessionPendingQueueConnection",kind:"LinkedField",name:"session_pending_queue",plural:!1,selections:[{alias:null,args:null,concreteType:"SessionPendingQueueEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"node",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"project_id",storageKey:null},o,r,{alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},{alias:null,args:null,concreteType:"UserNode",kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"resource_opts",storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"status_data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vfolder_mounts",storageKey:null},{alias:null,args:null,concreteType:"VirtualFolderConnection",kind:"LinkedField",name:"vfolder_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"VirtualFolderEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"VirtualFolderNode",kind:"LinkedField",name:"node",plural:!1,selections:[o,r,i],storageKey:null}],storageKey:null},s],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"terminated_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"agent_ids",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"requested_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"startup_command",storageKey:null},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"ImageNode",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base_image_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},r,{alias:null,args:null,concreteType:"KVPair",kind:"LinkedField",name:"tags",plural:!0,selections:d,storageKey:null},{alias:null,args:null,concreteType:"KVPair",kind:"LinkedField",name:"labels",plural:!0,selections:d,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"registry",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"namespace",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tag",storageKey:null},i],storageKey:null},i,o,{alias:null,args:null,kind:"ScalarField",name:"cluster_hostname",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null},t,u,{alias:null,args:null,kind:"ScalarField",name:"agent_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},u,{alias:null,args:null,kind:"ScalarField",name:"queue_position",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commit_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"priority",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"starts_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_mode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_size",storageKey:null}],storageKey:null}],storageKey:null},s],storageKey:null}]},params:{cacheID:"64568bf0e8361278bfcd9dcc0b3a423f",id:null,metadata:{},name:"PendingSessionNodeListQuery",operationKind:"query",text:'query PendingSessionNodeListQuery(\n  $resource_group_id: String!\n  $first: Int = 20\n  $offset: Int = 0\n) {\n  session_pending_queue(resource_group_id: $resource_group_id, first: $first, offset: $offset) {\n    edges {\n      node {\n        ...SessionDetailDrawerFragment\n        ...SessionNodesFragment\n        id\n      }\n    }\n    count\n  }\n}\n\nfragment AppLaunchConfirmationModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  ...useBackendAIAppLauncherFragment\n}\n\nfragment AppLauncherModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  service_ports\n  access_key\n  ...useBackendAIAppLauncherFragment\n  ...SFTPConnectionInfoModalFragment\n  ...TensorboardPathModalFragment\n  ...AppLaunchConfirmationModalFragment\n}\n\nfragment BAISessionAgentIdsFragment on ComputeSessionNode {\n  agent_ids\n}\n\nfragment BAISessionClusterModeFragment on ComputeSessionNode {\n  cluster_mode\n  cluster_size\n}\n\nfragment BAISessionTypeTagFragment on ComputeSessionNode {\n  type\n}\n\nfragment ConnectedKernelListFragment on KernelNode {\n  id\n  row_id\n  cluster_hostname\n  cluster_idx\n  cluster_role\n  status\n  status_info\n  agent_id\n  container_id\n}\n\nfragment ContainerCommitModalFragment on ComputeSessionNode {\n  id\n  name\n  row_id\n}\n\nfragment ContainerLogModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  status\n  access_key\n  kernel_nodes {\n    edges {\n      node {\n        id\n        row_id\n        container_id\n        cluster_idx\n        cluster_role\n        cluster_hostname\n      }\n    }\n  }\n}\n\nfragment EditableSessionNameFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  priority\n  user_id\n  status\n}\n\nfragment FolderLink_vfolderNode on VirtualFolderNode {\n  row_id\n  name\n}\n\nfragment ImageNodeSimpleTagFragment on ImageNode {\n  base_image_name @since(version: "24.12.0")\n  version @since(version: "24.12.0")\n  architecture\n  name\n  tags @since(version: "24.12.0") {\n    key\n    value\n  }\n  labels {\n    key\n    value\n  }\n  registry\n  namespace @since(version: "24.12.0")\n  tag\n}\n\nfragment MountedVFolderLinksFragment on ComputeSessionNode {\n  row_id\n  vfolder_nodes @since(version: "25.4.0") {\n    edges {\n      node {\n        ...FolderLink_vfolderNode\n        id\n      }\n    }\n  }\n  ...MountedVFolderLinksLegacyLazyFolderLinkFragment\n}\n\nfragment MountedVFolderLinksLegacyLazyFolderLinkFragment on ComputeSessionNode {\n  row_id\n  vfolder_mounts\n}\n\nfragment SFTPConnectionInfoModalFragment on ComputeSessionNode {\n  row_id\n  vfolder_mounts\n}\n\nfragment SessionActionButtonsFragment on ComputeSessionNode {\n  id\n  name\n  row_id\n  type\n  status\n  access_key\n  service_ports\n  commit_status\n  user_id\n  ...TerminateSessionModalFragment\n  ...ContainerLogModalFragment\n  ...ContainerCommitModalFragment\n  ...AppLauncherModalFragment\n  ...SFTPConnectionInfoModalFragment\n  ...useBackendAIAppLauncherFragment\n}\n\nfragment SessionDetailContentFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  project_id\n  user_id\n  owner @since(version: "25.13.0") {\n    email\n    id\n  }\n  resource_opts\n  status\n  status_data\n  vfolder_mounts\n  vfolder_nodes @since(version: "25.4.0") {\n    edges {\n      node {\n        ...FolderLink_vfolderNode\n        id\n      }\n    }\n    count\n  }\n  created_at\n  terminated_at\n  scaling_group\n  agent_ids\n  requested_slots\n  idle_checks @since(version: "24.12.0")\n  type\n  startup_command\n  kernel_nodes {\n    edges {\n      node {\n        image {\n          ...ImageNodeSimpleTagFragment\n          id\n        }\n        ...ConnectedKernelListFragment\n        id\n      }\n    }\n  }\n  ...SessionStatusTagFragment\n  ...SessionActionButtonsFragment\n  ...BAISessionTypeTagFragment\n  ...EditableSessionNameFragment\n  ...SessionReservationFragment\n  ...ContainerLogModalFragment\n  ...SessionUsageMonitorFragment\n  ...ContainerCommitModalFragment\n  ...SessionIdleChecksNodeFragment\n  ...SessionStatusDetailModalFragment\n  ...AppLauncherModalFragment\n  ...MountedVFolderLinksFragment\n  ...BAISessionAgentIdsFragment\n  ...BAISessionClusterModeFragment\n}\n\nfragment SessionDetailDrawerFragment on ComputeSessionNode {\n  id\n  project_id\n  ...SessionDetailContentFragment\n}\n\nfragment SessionIdleChecksNodeFragment on ComputeSessionNode {\n  id\n  idle_checks @since(version: "24.12.0")\n}\n\nfragment SessionNodesFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  status\n  type\n  agent_ids\n  ...SessionStatusTagFragment\n  ...SessionReservationFragment\n  ...SessionSlotCellFragment\n  ...SessionUsageMonitorFragment\n  ...SessionDetailDrawerFragment\n  ...BAISessionAgentIdsFragment\n  ...BAISessionTypeTagFragment\n  ...BAISessionClusterModeFragment\n  kernel_nodes {\n    edges {\n      node {\n        image {\n          ...ImageNodeSimpleTagFragment\n          id\n        }\n        id\n      }\n    }\n  }\n  created_at\n  scaling_group\n  owner @since(version: "25.13.0") {\n    email\n    id\n  }\n}\n\nfragment SessionReservationFragment on ComputeSessionNode {\n  id\n  created_at\n  starts_at\n  terminated_at\n}\n\nfragment SessionSlotCellFragment on ComputeSessionNode {\n  id\n  status\n  occupied_slots\n  requested_slots\n  ...useSessionNodeLiveStatSessionFragment\n}\n\nfragment SessionStatusDetailModalFragment on ComputeSessionNode {\n  id\n  name\n  status\n  status_info\n  status_data\n  starts_at\n  ...SessionStatusTagFragment\n}\n\nfragment SessionStatusTagFragment on ComputeSessionNode {\n  id\n  status\n  status_info\n  status_data\n  queue_position @since(version: "25.13.0")\n}\n\nfragment SessionUsageMonitorFragment on ComputeSessionNode {\n  occupied_slots\n  ...useSessionNodeLiveStatSessionFragment\n}\n\nfragment TensorboardPathModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  ...useBackendAIAppLauncherFragment\n}\n\nfragment TerminateSessionModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  scaling_group\n  access_key\n  kernel_nodes {\n    edges {\n      node {\n        container_id\n        agent_id\n        id\n      }\n    }\n  }\n}\n\nfragment useBackendAIAppLauncherFragment on ComputeSessionNode {\n  name\n  row_id\n  vfolder_mounts\n  scaling_group\n  project_id\n  service_ports\n}\n\nfragment useSessionNodeLiveStatSessionFragment on ComputeSessionNode {\n  id\n  kernel_nodes {\n    edges {\n      node {\n        live_stat\n        cluster_role\n        id\n      }\n    }\n  }\n}\n'}}}();u.hash="6db7f3ef05315f718654362f981b9dbf";const g=u;var m=a(69481),c=a(14944),p=a(22722),_=a(47476),S=a.n(_),F=a(19869),y=a(31356),k=a(18249),f=a(96490),K=a(83632),L=a(45682),C=a(33337);const h=()=>{var n;const{t:e}=(0,t.Bd)(),[a,l]=(0,i.zui)(),s=(0,L.Nw)(),o=(0,r.useDeferredValue)(a),d=(0,r.useDeferredValue)(s),[u,_]=(0,K.q)("table_column_overrides.PendingSessionNodeList"),h=(0,k.f0)(),v=(0,y.zy)(),{baiPaginationOption:b,tablePaginationOption:N,setTablePaginationOption:T}=(0,f.L0)({current:1,pageSize:10}),I=(0,r.useMemo)((()=>({resource_group_id:d||"default",first:b.first,offset:b.offset})),[d,b]),w=(0,r.useDeferredValue)(I),{session_pending_queue:A}=(0,F.useLazyLoadQuery)(g,w,{fetchKey:o,fetchPolicy:o===i.eIE?"store-and-network":"network-only"});return(0,C.jsxs)(i.OOm,{direction:"column",align:"stretch",gap:"sm",children:[(0,C.jsxs)(i.OOm,{align:"stretch",justify:"between",children:[(0,C.jsx)(p.A.Item,{label:e("session.ResourceGroup"),style:{marginBottom:0},children:(0,C.jsx)(c.A,{showSearch:!0,style:{minWidth:100},onChangeInTransition:()=>{T({current:1})},loading:s!==d,popupMatchSelectWidth:!1,tooltip:e("general.ResourceGroup")})}),(0,C.jsx)(i.u81,{loading:w!==I||o!==a,autoUpdateDelay:7e3,value:a,onChange:n=>{l(n)}})]}),(0,C.jsx)(m.A,{disableSorter:!0,onClickSessionName:n=>{const e=new URLSearchParams(v.search);e.set("sessionDetail",n.row_id),h({pathname:v.pathname,hash:v.hash,search:e.toString()},{state:{sessionDetailDrawerFrgmt:n,createdAt:(new Date).toISOString()}})},loading:w!==I,sessionsFrgmt:(0,i.faj)(null===A||void 0===A?void 0:A.edges.map((n=>null===n||void 0===n?void 0:n.node))),pagination:{pageSize:N.pageSize,current:N.current,total:null!==(n=null===A||void 0===A?void 0:A.count)&&void 0!==n?n:0,onChange:(n,e)=>{S().isNumber(n)&&S().isNumber(e)&&T({current:n,pageSize:e})}},tableSettings:{columnOverrides:u,onColumnOverridesChange:_}})]})};var v=a(11661);const b=()=>{const n=(0,l.c)(17),{t:e}=(0,t.Bd)();let a,u;n[0]===Symbol.for("react.memo_cache_sentinel")?(a={tab:o.tU.withDefault("pending-sessions")},u={history:"push"},n[0]=a,n[1]=u):(a=n[0],u=n[1]);const[g,m]=(0,o.ab)(a,u),c=(0,k.f0)(),p=g.tab;let _,S,F,y,f,K;return n[2]!==m||n[3]!==c?(_=n=>{c({pathname:"/admin-session",search:new URLSearchParams({tab:n}).toString()},{params:{tab:n}}),m({tab:n})},n[2]=m,n[3]=c,n[4]=_):_=n[4],n[5]!==e?(S=(0,i.YM3)([{key:"pending-sessions",label:e("adminSession.PendingSessions")}]),n[5]=e,n[6]=S):S=n[6],n[7]===Symbol.for("react.memo_cache_sentinel")?(F=(0,C.jsx)(s.A,{active:!0}),n[7]=F):F=n[7],n[8]!==g.tab?(y="pending-sessions"===g.tab&&(0,C.jsxs)(d.A,{children:[(0,C.jsx)(h,{}),(0,C.jsx)(v.default,{})]}),n[8]=g.tab,n[9]=y):y=n[9],n[10]!==y?(f=(0,C.jsx)(r.Suspense,{fallback:F,children:y}),n[10]=y,n[11]=f):f=n[11],n[12]!==g.tab||n[13]!==_||n[14]!==S||n[15]!==f?(K=(0,C.jsx)(i.Zuv,{activeTabKey:p,onTabChange:_,tabList:S,children:f}),n[12]=g.tab,n[13]=_,n[14]=S,n[15]=f,n[16]=K):K=n[16],K}}}]);
//# sourceMappingURL=8217.1eb00cdc.chunk.js.map