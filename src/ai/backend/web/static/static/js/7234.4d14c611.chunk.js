"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[7234,8247],{68247:(e,n,r)=>{r.r(n),r.d(n,{default:()=>V});var a,i,t,l=r(30032),s=r(83468),o=r(21454),d=r(9016),u=r(34103),c=r(78969),g=r(7121),m=r(63284),y=r(87627),p=r(78074),f=r(45901),h=r.n(f),k=r(76998),v=r(77678),b=r(3606),x=r(23446);const C=e=>{var n;let{existingHostnames:l,containerRegistryFrgmt:s=null,onOk:o,...d}=e;const{t:f}=(0,v.Bd)(),C=(0,k.useRef)(null),{message:R,modal:F}=c.A.useApp(),A=(0,b.useFragment)(void 0!==a?a:a=r(8869),s),[j,_]=(0,b.useMutation)(void 0!==i?i:i=r(47858)),[S,w]=(0,b.useMutation)(void 0!==t?t:t=r(7772)),K=async()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.validateFields().then((e=>{const n={hostname:e.hostname,props:{url:e.config.url,type:e.config.type,project:"docker"===e.config.project?void 0:e.config.project,username:h().isEmpty(e.config.username)?null:e.config.username,password:e.isChangedPassword?h().isEmpty(e.config.password)?null:e.config.password:void 0}};A?(e.isChangedPassword||delete n.props.password,S({variables:n,onCompleted:(e,n)=>{var r;if(h().isEmpty(null===(r=e.modify_container_registry)||void 0===r?void 0:r.container_registry))R.error(f("dialog.ErrorOccurred"));else if(n&&n.length>0){const e=h().map(n,(e=>e.message));for(const n of e)R.error(n,2.5)}else o&&o("modify")},onError:e=>{R.error(f("dialog.ErrorOccurred"))}})):j({variables:n,onCompleted:(e,n)=>{var r;if(h().isEmpty(null===e||void 0===e||null===(r=e.create_container_registry)||void 0===r?void 0:r.container_registry))R.error(f("dialog.ErrorOccurred"));else if(n&&(null===n||void 0===n?void 0:n.length)>0){const e=h().map(n,(e=>e.message));for(const n of e)R.error(n,2.5)}else o&&o("create")},onError(e){R.error(f("dialog.ErrorOccurred"))}})})).catch((e=>{}))};return(0,x.jsx)(u.A,{title:f(A?"registry.ModifyRegistry":"registry.AddRegistry"),okText:f(A?"button.Save":"button.Add"),confirmLoading:_||w,onOk:()=>{var e;null===(e=C.current)||void 0===e||e.validateFields().then((e=>{var n;h().includes(null===(n=e.config)||void 0===n?void 0:n.type,"harbor")&&(h().isEmpty(e.config.username)||(A?e.isChangedPassword&&h().isEmpty(e.config.password):h().isEmpty(e.config.password)))?F.confirm({title:f("button.Confirm"),content:f("registry.ConfirmNoUserName"),onOk:()=>{K()}}):K()})).catch((()=>{}))},...d,destroyOnClose:!0,children:(0,x.jsxs)(g.A,{ref:C,layout:"vertical",requiredMark:"optional",initialValues:A?{...A,config:{...A.config,project:(null===(n=A.config)||void 0===n?void 0:n.project)||void 0}}:{config:{type:"docker"}},preserve:!1,children:[(0,x.jsx)(g.A.Item,{label:f("registry.Hostname"),name:"hostname",required:!0,rules:[{required:!0,message:f("registry.DescHostnameIsEmpty"),pattern:new RegExp("^.+$")},{validator:(e,n)=>!A&&null!==l&&void 0!==l&&l.includes(n)?Promise.reject(f("registry.RegistryHostnameAlreadyExists")):Promise.resolve()}],children:(0,x.jsx)(m.A,{disabled:!!A,value:(null===A||void 0===A?void 0:A.hostname)||void 0})}),(0,x.jsx)(g.A.Item,{name:["config","url"],label:f("registry.RegistryURL"),required:!0,rules:[{required:!0},{validator:(e,n)=>{if(n){if(!n.startsWith("http://")&&!n.startsWith("https://"))return Promise.reject(f("registry.DescURLStartString"));try{new URL(n)}catch(r){return Promise.reject(f("registry.DescURLFormat"))}}return Promise.resolve()}}],children:(0,x.jsx)(m.A,{})}),(0,x.jsx)(g.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>{var r,a;return h().isEmpty(null===(r=e.config)||void 0===r?void 0:r.password)!==h().isEmpty(null===(a=n.config)||void 0===a?void 0:a.password)},children:e=>{let{validateFields:n,getFieldValue:r}=e;return n([["config","username"]]),(0,x.jsx)(g.A.Item,{name:["config","username"],label:f("registry.Username"),rules:[{required:!h().isEmpty(r(["config","password"]))}],children:(0,x.jsx)(m.A,{})})}}),(0,x.jsxs)(g.A.Item,{label:f("registry.Password"),children:[(0,x.jsx)(g.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>e.isChangedPassword!==n.isChangedPassword,children:e=>{let{getFieldValue:n}=e;return(0,x.jsx)(g.A.Item,{noStyle:!0,name:["config","password"],children:(0,x.jsx)(m.A.Password,{disabled:!h().isEmpty(A)&&!n("isChangedPassword")})})}}),!h().isEmpty(A)&&(0,x.jsx)(g.A.Item,{noStyle:!0,name:"isChangedPassword",valuePropName:"checked",children:(0,x.jsx)(y.A,{onChange:e=>{var n;e.target.checked||(null===(n=C.current)||void 0===n||n.setFieldValue(["config","password"],""))},children:f("webui.menu.ChangePassword")})})]}),(0,x.jsx)(g.A.Item,{name:["config","type"],label:f("registry.RegistryType"),required:!0,rules:[{required:!0,message:f("registry.PleaseSelectOption")}],children:(0,x.jsx)(p.A,{options:[{value:"docker"},{value:"harbor"},{value:"harbor2"}],onChange:()=>{}})}),(0,x.jsx)(g.A.Item,{shouldUpdate:(e,n)=>{var r,a;return(null===e||void 0===e||null===(r=e.config)||void 0===r?void 0:r.type)!==(null===n||void 0===n||null===(a=n.config)||void 0===a?void 0:a.type)},noStyle:!0,children:e=>{let{getFieldValue:n}=e;return"docker"!==n(["config","type"])&&(0,x.jsx)(g.A.Item,{name:["config","project"],label:f("registry.ProjectName"),required:!0,rules:[{required:!0,message:f("registry.ProjectNameIsRequired")}],children:(0,x.jsx)(p.A,{mode:"tags",open:!1,tokenSeparators:[","," "],suffixIcon:null})})}})]})})};var R,F,A,j=r(29871),_=r(94519),S=r(71038),w=r(63718),K=r(97041),L=r(69048),T=r(22424),M=r(50840),E=r(20307),I=r(6932),D=r(94120),q=r(48713),P=r(82745),N=r(97080);const V=e=>{let{style:n}=e;const a=(0,s.CX)(),[i,t]=(0,s.Tw)("initial-fetch"),[y,p]=(0,k.useTransition)(),f=(0,d.b)(),{message:V}=c.A.useApp(),{upsertNotification:O}=(0,o.js)(),{container_registries:U,domain:$}=(0,b.useLazyLoadQuery)(void 0!==R?R:R=r(27067),{domain:a._config.domainName},{fetchPolicy:"store-and-network",fetchKey:i}),[B,H]=(0,b.useMutation)(void 0!==F?F:F=r(45341)),[Q,z]=(0,b.useMutation)(void 0!==A?A:A=r(80754)),{t:Y}=(0,v.Bd)(),{token:W}=M.A.useToken(),[G,X]=(0,k.useState)(null),[J,Z]=(0,k.useState)(null),[ee,ne]=(0,k.useState)(""),[re,ae]=(0,k.useState)(!1),[ie,te]=(0,k.useState)();return(0,x.jsxs)(j.A,{direction:"column",align:"stretch",style:{flex:1,...n},children:[(0,x.jsxs)(j.A,{direction:"row",justify:"end",gap:"sm",style:{padding:W.paddingSM},children:[(0,x.jsx)(E.A,{title:Y("button.Refresh"),children:(0,x.jsx)(I.Ay,{loading:y,icon:(0,x.jsx)(_.A,{}),onClick:()=>{p((()=>{t()}))}})}),(0,x.jsx)(I.Ay,{type:"primary",icon:(0,x.jsx)(S.A,{}),onClick:()=>{ae(!0)},children:Y("registry.AddRegistry")})]}),(0,x.jsx)(D.A,{rowKey:e=>e.id,scroll:{x:"max-content"},pagination:!1,columns:[{title:Y("registry.Hostname"),dataIndex:"hostname"},{title:Y("registry.RegistryURL"),dataIndex:["config","url"]},{title:Y("registry.Type"),dataIndex:["config","type"]},{title:Y("registry.HarborProject"),render:(e,n)=>{var r;return h().map(null===(r=n.config)||void 0===r?void 0:r.project,(e=>(0,x.jsx)(q.A,{children:e||""},e)))}},{title:Y("registry.Username"),dataIndex:["config","username"]},{title:Y("registry.Password"),dataIndex:["config","password"]},{title:Y("general.Enabled"),render:(e,n)=>{const r=h().includes(null===$||void 0===$?void 0:$.allowed_docker_registries,n.hostname);return(0,x.jsx)(P.A,{checked:ie===n.hostname+i?!r:r,disabled:y||z,loading:(y||z)&&ie===n.hostname+i,onChange:e=>{if(!h().isString(n.hostname))return;let r=h().clone((null===$||void 0===$?void 0:$.allowed_docker_registries)||[]);e?r.push(n.hostname):r=h().without(r,n.hostname),te(n.hostname+i),Q({variables:{domain:a._config.domainName,allowed_docker_registries:r},onCompleted:(n,r)=>{var a;if(null!==n&&void 0!==n&&null!==(a=n.modify_domain)&&void 0!==a&&a.ok){if(r&&(null===r||void 0===r?void 0:r.length)>0){const e=h().map(r,(e=>e.message));for(const n of e)V.error(n,2.5)}else p((()=>{t()}));V.info({key:"registry-enabled",content:Y(e?"registry.RegistryTurnedOn":"registry.RegistryTurnedOff")})}else{var i;V.error(null===n||void 0===n||null===(i=n.modify_domain)||void 0===i?void 0:i.msg)}}})}})}},{title:Y("general.Control"),fixed:"right",render:(e,n,r)=>(0,x.jsxs)(j.A,{children:[(0,x.jsx)(E.A,{title:Y("button.Edit"),children:(0,x.jsx)(I.Ay,{size:"large",style:{color:W.colorInfo},type:"text",icon:(0,x.jsx)(w.A,{}),onClick:()=>{X(n)}})}),(0,x.jsx)(E.A,{title:Y("button.Delete"),children:(0,x.jsx)(I.Ay,{size:"large",danger:!0,type:"text",icon:(0,x.jsx)(K.A,{}),onClick:()=>{Z(n)}})}),(0,x.jsx)(E.A,{title:Y("maintenance.RescanImages"),children:(0,x.jsx)(I.Ay,{size:"large",type:"text",icon:(0,x.jsx)(L.A,{onClick:()=>{n.hostname&&(async e=>{const n=O({message:"".concat(e," ").concat(Y("maintenance.RescanImages")),description:Y("registry.UpdatingRegistryInfo"),open:!0,backgroundTask:{status:"pending"},duration:0});a.maintenance.rescan_images(e).then((e=>{let{rescan_images:r}=e;r.ok?O({key:n,backgroundTask:{status:"pending",percent:0,taskId:r.task_id,statusDescriptions:{pending:Y("registry.RescanImages"),resolved:Y("registry.RegistryUpdateFinished"),rejected:Y("registry.RegistryUpdateFailed")}}}):O({key:n,backgroundTask:{status:"rejected"},duration:1})})).catch((e=>{console.log(e),O({key:n,backgroundTask:{status:"rejected"},duration:1}),e&&e.message&&(globalThis.lablupNotification.text=f.relieve(e.title),globalThis.lablupNotification.detail=e.message,globalThis.lablupNotification.show(!0,e))}))})(n.hostname)}})})})]})}],dataSource:(0,l.tS)(U)}),(0,x.jsx)(C,{containerRegistryFrgmt:G,existingHostnames:h().map(U,(e=>(null===e||void 0===e?void 0:e.hostname)||"")),open:!!G||re,onOk:e=>{"create"===e?(t(),V.info(Y("registry.RegistrySuccessfullyAdded"))):"modify"===e&&V.info(Y("registry.RegistrySuccessfullyModified")),X(null),ae(!1)},onCancel:()=>{X(null),ae(!1)},centered:!1}),(0,x.jsx)(u.A,{title:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(T.A,{style:{color:W.colorWarning}})," ",Y("dialog.warning.CannotBeUndone")]}),okText:Y("button.Delete"),okButtonProps:{danger:!0,disabled:ee!==(null===J||void 0===J?void 0:J.hostname)},onOk:()=>{J?B({variables:{hostname:J.hostname||""},onCompleted:(e,n)=>{n?(Z(null),V.error({key:"registry-deletion-failed",content:Y("dialog.ErrorOccurred")})):(p((()=>{t()})),V.info({key:"registry-deleted",content:Y("registry.RegistrySuccessfullyDeleted")}),Z(null))},onError:e=>{V.error({key:"registry-deletion-failed",content:Y("dialog.ErrorOccurred")})}}):Z(null)},confirmLoading:H,onCancel:()=>{Z(null)},destroyOnClose:!0,open:!!J,children:(0,x.jsxs)(j.A,{direction:"column",align:"stretch",gap:"sm",style:{marginTop:W.marginMD},children:[(0,x.jsxs)(N.A.Text,{children:[(0,x.jsx)(N.A.Text,{code:!0,children:null===J||void 0===J?void 0:J.hostname})," ",Y("registry.TypeRegistryNameToDelete")]}),(0,x.jsx)(g.A,{children:(0,x.jsx)(g.A.Item,{name:"confirmText",rules:[{required:!0,message:Y("registry.HostnameDoesNotMatch"),validator:async()=>ee===(null===J||void 0===J?void 0:J.hostname)?Promise.resolve():Promise.reject()}],children:(0,x.jsx)(m.A,{autoComplete:"off",value:ee,onChange:e=>ne(e.target.value)})})})]})})]})}},47858:(e,n,r)=>{r.r(n),r.d(n,{default:()=>i});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"hostname"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"hostname",variableName:"hostname"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateContainerRegistry",kind:"LinkedField",name:"create_container_registry",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistry",kind:"LinkedField",name:"container_registry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hostname",storageKey:null},{alias:null,args:null,concreteType:"ContainerRegistryConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"password",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ssl_verify",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ContainerRegistryEditorModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ContainerRegistryEditorModalCreateMutation",selections:n},params:{cacheID:"f076fed995ef5122c04aaba2b76d22d5",id:null,metadata:{},name:"ContainerRegistryEditorModalCreateMutation",operationKind:"mutation",text:"mutation ContainerRegistryEditorModalCreateMutation(\n  $hostname: String!\n  $props: CreateContainerRegistryInput!\n) {\n  create_container_registry(hostname: $hostname, props: $props) {\n    container_registry {\n      id\n      hostname\n      config {\n        url\n        type\n        project\n        username\n        password\n        ssl_verify\n      }\n    }\n  }\n}\n"}}}();a.hash="547863dc03f9faf465e8a26175e5a101";const i=a},8869:(e,n,r)=>{r.r(n),r.d(n,{default:()=>i});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ContainerRegistryEditorModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hostname",storageKey:null},{alias:null,args:null,concreteType:"ContainerRegistryConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ssl_verify",storageKey:null}],storageKey:null}],type:"ContainerRegistry",abstractKey:null,hash:"57f748e00ec698f8b3e133570e377c71"},i=a},7772:(e,n,r)=>{r.r(n),r.d(n,{default:()=>i});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"hostname"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"hostname",variableName:"hostname"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyContainerRegistry",kind:"LinkedField",name:"modify_container_registry",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistry",kind:"LinkedField",name:"container_registry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hostname",storageKey:null},{alias:null,args:null,concreteType:"ContainerRegistryConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"password",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ssl_verify",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ContainerRegistryEditorModalModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ContainerRegistryEditorModalModifyMutation",selections:n},params:{cacheID:"5157cbd573b855028a9856c295dab17c",id:null,metadata:{},name:"ContainerRegistryEditorModalModifyMutation",operationKind:"mutation",text:"mutation ContainerRegistryEditorModalModifyMutation(\n  $hostname: String!\n  $props: ModifyContainerRegistryInput!\n) {\n  modify_container_registry(hostname: $hostname, props: $props) {\n    container_registry {\n      id\n      hostname\n      config {\n        url\n        type\n        project\n        username\n        password\n        ssl_verify\n      }\n    }\n  }\n}\n"}}}();a.hash="0fe59a8682e5d7c502bc48da7cc3320a";const i=a},45341:(e,n,r)=>{r.r(n),r.d(n,{default:()=>i});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"hostname"}],n=[{alias:null,args:[{kind:"Variable",name:"hostname",variableName:"hostname"}],concreteType:"DeleteContainerRegistry",kind:"LinkedField",name:"delete_container_registry",plural:!1,selections:[{alias:null,args:null,concreteType:"ContainerRegistry",kind:"LinkedField",name:"container_registry",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ContainerRegistryListDeleteMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ContainerRegistryListDeleteMutation",selections:n},params:{cacheID:"4482108b7e256e27225f91b432f0a856",id:null,metadata:{},name:"ContainerRegistryListDeleteMutation",operationKind:"mutation",text:"mutation ContainerRegistryListDeleteMutation(\n  $hostname: String!\n) {\n  delete_container_registry(hostname: $hostname) {\n    container_registry {\n      id\n    }\n  }\n}\n"}}}();a.hash="131801c7f9561f645743bbbe4b464676";const i=a},80754:(e,n,r)=>{r.r(n),r.d(n,{default:()=>i});const a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"allowed_docker_registries"},n={defaultValue:null,kind:"LocalArgument",name:"domain"},r=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"domain"},{fields:[{kind:"Variable",name:"allowed_docker_registries",variableName:"allowed_docker_registries"}],kind:"ObjectValue",name:"props"}],concreteType:"ModifyDomain",kind:"LinkedField",name:"modify_domain",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"ContainerRegistryListDomainMutation",selections:r,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"ContainerRegistryListDomainMutation",selections:r},params:{cacheID:"5ea7ebdd79d15e15b23a9fb2d8568d34",id:null,metadata:{},name:"ContainerRegistryListDomainMutation",operationKind:"mutation",text:"mutation ContainerRegistryListDomainMutation(\n  $domain: String!\n  $allowed_docker_registries: [String]!\n) {\n  modify_domain(name: $domain, props: {allowed_docker_registries: $allowed_docker_registries}) {\n    ok\n    msg\n  }\n}\n"}}}();a.hash="647ec7cdf3bcffc8cc1d8cd3cced159f";const i=a},27067:(e,n,r)=>{r.r(n),r.d(n,{default:()=>i});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"domain"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"hostname",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"password",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"ssl_verify",storageKey:null},d={alias:null,args:[{kind:"Variable",name:"name",variableName:"domain"}],concreteType:"Domain",kind:"LinkedField",name:"domain",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allowed_docker_registries",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ContainerRegistryListQuery",selections:[{alias:null,args:null,concreteType:"ContainerRegistry",kind:"LinkedField",name:"container_registries",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"ContainerRegistryEditorModalFragment"},n,r,{alias:null,args:null,concreteType:"ContainerRegistryConfig",kind:"LinkedField",name:"config",plural:!1,selections:[a,i,t,l,s,o],storageKey:null}],storageKey:null},d],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ContainerRegistryListQuery",selections:[{alias:null,args:null,concreteType:"ContainerRegistry",kind:"LinkedField",name:"container_registries",plural:!0,selections:[n,r,{alias:null,args:null,concreteType:"ContainerRegistryConfig",kind:"LinkedField",name:"config",plural:!1,selections:[a,i,t,l,o,s],storageKey:null}],storageKey:null},d]},params:{cacheID:"9f9e16fde586191ea3e0ae553f834b51",id:null,metadata:{},name:"ContainerRegistryListQuery",operationKind:"query",text:"query ContainerRegistryListQuery(\n  $domain: String!\n) {\n  container_registries {\n    ...ContainerRegistryEditorModalFragment\n    id\n    hostname\n    config {\n      url\n      type\n      project\n      username\n      password\n      ssl_verify\n    }\n  }\n  domain(name: $domain) {\n    name\n    allowed_docker_registries\n  }\n}\n\nfragment ContainerRegistryEditorModalFragment on ContainerRegistry {\n  id\n  hostname\n  config {\n    url\n    type\n    project\n    username\n    ssl_verify\n  }\n}\n"}}}();a.hash="0f4709e3ecfb8366c214098902385269";const i=a},9016:(e,n,r)=>{r.d(n,{b:()=>l});var a=r(77678);const i={"Cannot read property 'map' of null":"error.APINotSupported","TypeError: NetworkError when attempting to fetch resource.":"error.NetworkConnectionFailed","Login failed. Check login information.":"error.LoginFailed","User credential mismatch.":"error.LoginFailed","Authentication failed. Check information and manager status.":"error.AuthenticationFailed","Too many failed login attempts":"error.TooManyLoginFailures","server responded failure: 400 Bad Request - The virtual folder already exists with the same name.":"error.VirtualFolderAlreadyExist","400 Bad Request - The virtual folder already exists with the same name.":"error.VirtualFolderAlreadyExist","server responded failure: 400 Bad Request - One of your accessible vfolders already has the name you requested.":"error.VirtualFolderAlreadyExist","server responded failure: 400 Bad Request - You cannot create more vfolders.":"error.MaximumVfolderCreation","server responded failure: 400 Bad Request - Missing or invalid API parameters. (You cannot create more vfolders.)":"error.MaximumVfolderCreation","server responded failure: 400 Bad Request - Cannot change the options of a vfolder that is not owned by myself.":"error.CannotChangeVirtualFolderOption","server responded failure: 403 Forbidden - Cannot share private dot-prefixed vfolders.":"error.CannotSharePrivateAutomountFolder","server responded failure: 404 Not Found - No such vfolder invitation.":"error.FolderSharingNotAvailableToUser","server responded failure: 404 Not Found - No such user.":"error.FolderSharingNotAvailableToUser","server responded failure: 412 Precondition Failed - You have reached your resource limit.":"error.ReachedResourceLimit","Cannot read property 'split' of undefined":"error.UserHasNoGroup"},t={"\\w*not found matched token with email\\w*":"error.InvalidSignupToken","\\w*Access key not found\\w*":"error.LoginInformationMismatch","\\w*401 Unauthorized - Credential/signature mismatch\\w*":"error.LoginInformationMismatch",'integrity error: duplicate key value violates unique constraint "pk_resource_presets"[\\n]DETAIL:  Key \\(name\\)=\\([\\w]+\\) already exists.[\\n]':"error.ResourcePolicyAlreadyExist",'integrity error: duplicate key value violates unique constraint "pk_scaling_groups"[\\n]DETAIL:  Key \\(name\\)=\\([\\w]+\\) already exists.[\\n]':"error.ScalingGroupAlreadyExist",'integrity error: duplicate key value violates unique constraint "uq_users_username"[\\n]DETAIL:  Key \\(username\\)=\\([\\w]+\\) already exists.[\\n]':"error.UserNameAlreadyExist","server responded failure: 400 Bad Request - Missing or invalid API parameters. (Your resource quota is exceeded. (cpu=24 mem=512g cuda.shares=80))":"error.ResourceLimitExceed",'\\w*Key \\(name\\)=\\(.+\\) is still referenced from table "keypairs"\\.\\w*':"error.ResourcePolicyStillReferenced","Your resource request is smaller than the minimum required by the image. (\\w*)":"error.SmallerResourceThenImageRequires"},l=()=>{const{t:e}=(0,a.Bd)();return{relieve:n=>{if("undefined"===typeof n)return void 0===globalThis.backendaiclient||null===globalThis.backendaiclient?"_DISCONNECTED":"Problem occurred.";if(!0===globalThis.backendaiwebui.debug)return n;if({}.hasOwnProperty.call(i,n))return e(i[n]);for(const r of Object.keys(t))if(RegExp(r).test(n))return e(t[r]);return n}}}},27234:(e,n,r)=>{r.r(n),r.d(n,{default:()=>c});var a=r(68247),i=r(29871),t=r(83468),l=r(50840),s=r(89667),o=r(76998),d=r(77678),u=r(23446);const c=()=>{const{t:e}=(0,d.Bd)(),[n,r]=(0,o.useState)("imageList"),c=(0,t.CX)(),g=c.supports("container-registry-gql"),{token:m}=l.A.useToken();return(0,u.jsxs)(s.A,{activeTabKey:n,onTabChange:e=>r(e),tabList:[{key:"imageList",label:e("environment.Images")},{key:"presetList",label:e("environment.ResourcePresets")},...c.is_superadmin?[{key:"registryList",label:e("environment.Registries")}]:[]],styles:{body:{padding:0,paddingTop:1,overflow:"hidden"}},children:[(0,u.jsx)(i.A,{style:{display:"imageList"===n?"block":"none",paddingTop:m.paddingContentVerticalSM},children:(0,u.jsx)("backend-ai-environment-list",{active:"imageList"===n})}),(0,u.jsx)(i.A,{style:{display:"presetList"===n?"block":"none",paddingTop:m.paddingContentVerticalSM},children:(0,u.jsx)("backend-ai-resource-preset-list",{active:"presetList"===n})}),(0,u.jsx)(i.A,{style:{display:"registryList"===n?"block":"none",height:"calc(100vh - 145px)"},children:g?"registryList"===n?(0,u.jsx)(o.Suspense,{children:(0,u.jsx)(a.default,{})}):null:(0,u.jsx)("backend-ai-registry-list",{active:"registryList"===n})})]})}}}]);
//# sourceMappingURL=7234.4d14c611.chunk.js.map