/*! For license information please see 1210.cbde39a9.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[1210,6214],{36214:(e,n,l)=>{l.r(n),l.d(n,{default:()=>t});var a=l(50128),i=(l(53350),l(60598));const t=e=>{let{text:n,children:l}=e;return(0,i.jsx)(a.A.Text,{copyable:!0,code:!0,children:n||l})}},20936:(e,n,l)=>{l.d(n,{A:()=>c});var a=l(72375),i=l(23441),t=l(73e3),o=l(81530),r=l(2759),s=l(50128),d=(l(53350),l(50423)),u=l(60598);const c=e=>{let{uuid:n,clickable:l}=e;const c=(0,o.hd)(),m=(0,a.QE)(),g=(0,d.zy)(),p=(0,i.f0)(),{data:v}=(0,t.nj)({queryKey:["VFolderSelectQuery"],queryFn:()=>{const e=new URLSearchParams;return e.set("group_id",c.id),m({method:"GET",url:`/folders?${e.toString()}`})},staleTime:1e3}),_=null===v||void 0===v?void 0:v.find((e=>e.id===n.replaceAll("-","")));return _&&(l?(0,u.jsxs)(s.A.Link,{onClick:()=>{p({pathname:g.pathname,search:`?folder=${_.id}`})},children:[(0,u.jsx)(r.A,{})," ",_.name]}):(0,u.jsxs)("div",{children:[(0,u.jsx)(r.A,{})," ",_.name]}))}},59567:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"endpoint"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{kind:"Variable",name:"endpoint",variableName:"endpoint"},{kind:"Variable",name:"props",variableName:"props"}],l={alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"metric_name",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"metric_source",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"threshold",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"comparator",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"step_size",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"cooldown_seconds",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"min_replicas",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"max_replicas",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"AutoScalingRuleEditorModalCreateMutation",selections:[{alias:null,args:n,concreteType:"CreateEndpointAutoScalingRuleNode",kind:"LinkedField",name:"create_endpoint_auto_scaling_rule_node",plural:!1,selections:[l,a,{alias:null,args:null,concreteType:"EndpointAutoScalingRuleNode",kind:"LinkedField",name:"rule",plural:!1,selections:[i,t,o,r,s,d,u,c],storageKey:null}],storageKey:null}],type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"AutoScalingRuleEditorModalCreateMutation",selections:[{alias:null,args:n,concreteType:"CreateEndpointAutoScalingRuleNode",kind:"LinkedField",name:"create_endpoint_auto_scaling_rule_node",plural:!1,selections:[l,a,{alias:null,args:null,concreteType:"EndpointAutoScalingRuleNode",kind:"LinkedField",name:"rule",plural:!1,selections:[i,t,o,r,s,d,u,c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{cacheID:"615e9654d0bf5791383c99c8fb5ab1ee",id:null,metadata:{},name:"AutoScalingRuleEditorModalCreateMutation",operationKind:"mutation",text:"mutation AutoScalingRuleEditorModalCreateMutation(\n  $endpoint: String!\n  $props: EndpointAutoScalingRuleInput!\n) {\n  create_endpoint_auto_scaling_rule_node(endpoint: $endpoint, props: $props) {\n    ok\n    msg\n    rule {\n      metric_name\n      metric_source\n      threshold\n      comparator\n      step_size\n      cooldown_seconds\n      min_replicas\n      max_replicas\n      id\n    }\n  }\n}\n"}}}();a.hash="518c2a6f9b37a86854dfe0681e3d035b";const i=a},55300:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AutoScalingRuleEditorModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"endpoint",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"metric_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"metric_source",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"threshold",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"comparator",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"step_size",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cooldown_seconds",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"min_replicas",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_replicas",storageKey:null}],type:"EndpointAutoScalingRuleNode",abstractKey:null,hash:"e3ce8046ec702e752e597d2cb348e85b"},i=a},49773:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"props",variableName:"props"}],l={alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"metric_name",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"metric_source",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"threshold",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"comparator",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"step_size",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"cooldown_seconds",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"min_replicas",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"max_replicas",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"AutoScalingRuleEditorModalModifyMutation",selections:[{alias:null,args:n,concreteType:"ModifyEndpointAutoScalingRuleNode",kind:"LinkedField",name:"modify_endpoint_auto_scaling_rule_node",plural:!1,selections:[l,a,{alias:null,args:null,concreteType:"EndpointAutoScalingRuleNode",kind:"LinkedField",name:"rule",plural:!1,selections:[i,t,o,r,s,d,u,c],storageKey:null}],storageKey:null}],type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"AutoScalingRuleEditorModalModifyMutation",selections:[{alias:null,args:n,concreteType:"ModifyEndpointAutoScalingRuleNode",kind:"LinkedField",name:"modify_endpoint_auto_scaling_rule_node",plural:!1,selections:[l,a,{alias:null,args:null,concreteType:"EndpointAutoScalingRuleNode",kind:"LinkedField",name:"rule",plural:!1,selections:[i,t,o,r,s,d,u,c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{cacheID:"254010dfb40e9042cd73b62325fc264d",id:null,metadata:{},name:"AutoScalingRuleEditorModalModifyMutation",operationKind:"mutation",text:"mutation AutoScalingRuleEditorModalModifyMutation(\n  $id: String!\n  $props: ModifyEndpointAutoScalingRuleInput!\n) {\n  modify_endpoint_auto_scaling_rule_node(id: $id, props: $props) {\n    ok\n    msg\n    rule {\n      metric_name\n      metric_source\n      threshold\n      comparator\n      step_size\n      cooldown_seconds\n      min_replicas\n      max_replicas\n      id\n    }\n  }\n}\n"}}}();a.hash="51be0409e782d9a60ce0b9a3d5e490f9";const i=a},36414:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"InferenceSessionErrorModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"session_id",storageKey:null},{alias:null,args:null,concreteType:"InferenceSessionErrorInfo",kind:"LinkedField",name:"errors",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"repr",storageKey:null}],storageKey:null}],type:"InferenceSessionError",abstractKey:null,hash:"3aff870b3138311d3e5415b7bbb32f53"},i=a},46735:(e,n,l)=>{l.d(n,{A:()=>me});var a=l(72375),i=l(23441),t=l(53350);const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const[n,a]=(0,t.useState)(0);return(0,t.useEffect)((()=>{(0,t.startTransition)((()=>{(async e=>{const{encode:n}=await l.e(2471).then(l.bind(l,32471));return n(e).length})(e).then(a).catch((()=>{a(e.length)}))}))}),[e]),n};var r=l(72338),s=l(11383),d=l(60598);const u=e=>{let{style:n,loading:l,autoFocus:a,onStop:i,onSend:o,...r}=e;const u=(0,t.useRef)(null);return(0,t.useEffect)((()=>{a&&u.current&&u.current.focus()}),[a]),(0,d.jsx)(s.A,{ref:u,...r,loading:l,onSubmit:()=>{null===o||void 0===o||o()},onCancel:()=>{null===i||void 0===i||i()},submitType:"enter"})};var c=l(1581),m=l(46976),g=l.n(m),p=l(91788);const v=e=>{let{models:n,allowCustomModel:l,...a}=e;const{t:i}=(0,p.Bd)();return(0,d.jsx)(c.A,{placeholder:i("chatui.SelectModel"),style:{fontWeight:"normal"},showSearch:!0,options:g().concat(l?[{label:"Custom",value:"custom"}]:[],g().chain(n).groupBy("group").mapValues((e=>g().map(e,(e=>({label:e.label,value:e.name}))))).map(((e,n)=>({label:"undefined"===n?"Others":n,options:e}))).value()),popupMatchSelectWidth:!1,...a})};var _=l(82919),y=l(52335),h=l(31456),S=l(167),x=l(37542);const k=e=>{let{copyable:n,defaultIcon:l,...a}=e;const[i,o]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{if(i){const e=setTimeout((()=>{o(!1)}),2e3);return()=>clearTimeout(e)}}),[i]),(0,d.jsx)(_.A,{title:i?"Copied!":"Copy",open:!!i||void 0,children:(0,d.jsx)(x.CopyToClipboard,{text:(null===n||void 0===n?void 0:n.text)||"",onCopy:async()=>{o(!0)},children:(0,d.jsx)(y.Ay,{icon:i?(0,d.jsx)(h.A,{}):l||(0,d.jsx)(S.A,{}),...a})})})};var f=l(50128),A=l(20418),b=l(25710),j=l(28304),F=l(83376);const{Text:R}=f.A,K=e=>{let{children:n}=e;return(0,d.jsx)(b.o,{components:{p(e){let{node:n,...l}=e;return(0,d.jsx)("p",{...l,style:{whiteSpace:"pre-wrap"}})},code(e){const{children:n,className:l,node:a,ref:i,...t}=e,o=/language-(\w+)/.exec(l||""),r=String(n).replace(/\n$/,"");return o?(0,d.jsx)(A.A,{title:(0,d.jsx)(R,{style:{fontWeight:"normal"},type:"secondary",children:o[1]}),type:"inner",size:"small",extra:(0,d.jsx)(k,{type:"text",copyable:{text:"s"}}),styles:{body:{padding:0},header:{margin:0}},children:(0,d.jsx)("div",{style:{margin:"-0.5em 0",width:"100%"},children:(0,d.jsx)(T,{ref:i,...t,PreTag:"div",language:o[1],style:F.A,wrapLongLines:!0,wrapLines:!0,children:r})})}):(0,d.jsx)("code",{...t,className:l,children:n})}},children:n})},E=e=>{let{children:n,...l}=e;return(0,d.jsx)(j.A,{...l,children:n})},T=t.memo(E),w=t.memo(K);var L=l(79429),C=l(65839),I=l(9571),M=l(69546),D=l(38385),N=l(78502),z=l.n(N),V=l(48787),O=l.n(V),$=l(2660),P=l.n($);z().extend(O()),z().extend(P());const U=e=>{let{extra:n,message:l,placement:a="left",containerStyle:i,enableExtraHover:o,isStreaming:s}=e;const{token:u}=I.A.useToken(),[c,m]=(0,t.useState)(!1),p=(0,C.A)(l.content,{wait:50});return(0,d.jsxs)(r.A,{direction:"left"===a?"row":"row-reverse",justify:"start",align:"baseline",style:{marginLeft:"left"===a?"0":"15%",marginRight:"right"===a?"0":20,...i},gap:"sm",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:["user"!==l.role?(0,d.jsx)(M.A,{icon:"\ud83e\udd16",style:{fontSize:u.fontSizeHeading3}}):null,(0,d.jsxs)(r.A,{direction:"column",align:"left"===a?"start":"end",wrap:"wrap",style:{flex:1},gap:"xs",children:[g().map(l.experimental_attachments,((e,n)=>g().includes(null===e||void 0===e?void 0:e.contentType,"image/")?(0,d.jsx)(r.A,{style:{border:"none",textAlign:"end"},align:"end",children:(0,d.jsx)(D.A,{src:null===e||void 0===e?void 0:e.url,alt:null===e||void 0===e?void 0:e.name,style:{maxWidth:"50vw",maxHeight:"12vh",borderRadius:u.borderRadius}},`${null===l||void 0===l?void 0:l.id}-${n}`)}):(0,d.jsx)(L.A.FileCard,{item:{uid:`${null===l||void 0===l?void 0:l.id}-${n}`,name:(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.url),type:null===e||void 0===e?void 0:e.contentType,description:null===e||void 0===e?void 0:e.name,url:null===e||void 0===e?void 0:e.url}},n))),(0,d.jsx)(r.A,{align:"stretch",direction:"column",style:{borderRadius:u.borderRadius,borderColor:u.colorBorderSecondary,borderWidth:u.lineWidth,padding:"1em",paddingTop:0,paddingBottom:0,backgroundColor:"user"!==l.role?u.colorBgContainer:u.colorBgContainerDisabled,maxWidth:"100%"},children:(0,d.jsx)(w,{children:p+(s?"\n\u25cf":"")})}),(0,d.jsx)(r.A,{style:{fontSize:u.fontSizeSM,...o?{opacity:c?1:0,transition:"opacity 0.2s",transitionDelay:c?"0s":"0.2s"}:{}},children:n})]})]})};var B=l(68098),q=l(7126);const H=e=>{let{autoScroll:n,atBottom:l,lastMessageContent:a,...i}=e;const o=(0,B.E)(i.onScrollToBottom);return(0,t.useEffect)((()=>{l&&n&&(null===o||void 0===o||o("auto"))}),[l,n,a,o]),(0,d.jsx)(y.Ay,{icon:(0,d.jsx)(q.A,{}),shape:"circle",onClick:()=>{o&&o("click")}})};var G=l(85064),W=l(2646);const Q=e=>{let{messages:n,isStreaming:l}=e;const a=(0,t.useRef)(null),[i,o]=(0,t.useState)(!0),{token:s}=I.A.useToken(),u="undefined"!==typeof window?1.5*window.innerHeight:0;return(0,d.jsxs)(r.A,{direction:"column",align:"stretch",style:{height:"100%",flex:1},children:[(0,d.jsx)(W.aY,{atBottomStateChange:o,atBottomThreshold:60,computeItemKey:(e,n)=>n.id,data:n,followOutput:"auto",initialTopMostItemIndex:(null===n||void 0===n?void 0:n.length)-1,itemContent:(e,a)=>(0,d.jsx)(U,{message:a,placement:"user"===a.role?"right":"left",containerStyle:{paddingLeft:s.paddingMD,paddingRight:s.paddingMD,paddingTop:0===e?s.paddingMD:0,paddingBottom:e===n.length-1?s.paddingMD:0},isStreaming:"user"!==a.role&&l&&e===n.length-1,enableExtraHover:"user"===a.role,extra:"user"!==a.role?(0,d.jsx)(G.Ay,{children:(0,d.jsx)(k,{type:"text",size:"small",copyable:{text:a.content}})}):(0,d.jsx)(G.Ay,{children:null})},a.id),overscan:u,ref:a}),(0,d.jsx)("div",{style:{position:"absolute",right:"50%",transform:"translateX(+50%)",bottom:s.marginSM,opacity:i?0:1,transition:"opacity 0.2s",transitionDelay:i?"0s":"0.2s"},children:(0,d.jsx)(H,{atBottom:i,autoScroll:l,onScrollToBottom:e=>{const n=a.current;switch(e){case"auto":null===n||void 0===n||n.scrollToIndex({align:"end",behavior:"auto",index:"LAST"});break;case"click":null===n||void 0===n||n.scrollToIndex({align:"end",behavior:"smooth",index:"LAST"})}},lastMessageContent:g().get(g().last(n),"content")})})]})};var Y=l(34902),J=l(81340),X=l(10424),Z=l(51282),ee=l(27319),ne=l(12943),le=l(56431),ae=l(51847),ie=l(61279),te=l(79773),oe=l(9712),re=l(13170),se=l(83978),de=l(58325),ue=l(24798),ce=l(2822);const me=e=>{var n;let{models:l=[],endpointId:c,baseURL:m,headers:_,credentials:h,apiKey:S,fetchOnClient:x,allowCustomModel:k,alert:b,leftExtra:j,inputMessage:F,submitKey:R,onInputChange:K,onSubmitChange:E,showCompareMenuItem:T,modelToken:w,...C}=e;const M=(0,i.f0)(),[D,N]=(0,t.useState)(!1),[z,V]=(0,ae.A)(C,{valuePropName:"modelId",trigger:"onModelChange",defaultValue:null===l||void 0===l||null===(n=l[0])||void 0===n?void 0:n.id}),O=(0,t.useRef)(null),$=(0,t.useRef)(null),{messages:P,error:U,input:B,setInput:q,stop:H,isLoading:G,append:W,setMessages:me}=(0,J.Y_)({api:m,headers:_,credentials:h,body:{modelId:z},fetch:async(e,n)=>{if(x||"custom"===z){var l,a,i;const e=JSON.parse(null===n||void 0===n?void 0:n.body),t=(0,Y.r)({baseURL:k?null===(l=O.current)||void 0===l?void 0:l.getFieldValue("baseURL"):m,apiKey:(k?null===(a=O.current)||void 0===a?void 0:a.getFieldValue("token"):S)||"dummy"}),o=await(0,ie.gM)({abortSignal:(null===n||void 0===n?void 0:n.signal)||void 0,model:t(k?null===(i=O.current)||void 0===i?void 0:i.getFieldValue("modelId"):z),messages:null===e||void 0===e?void 0:e.messages});return _e(Date.now()),o.toDataStreamResponse()}return fetch(e,n)}}),{token:ge}=I.A.useToken(),{t:pe}=(0,p.Bd)(),[ve,_e]=(0,t.useState)(null);(0,t.useEffect)((()=>{g().isUndefined(F)||q(F)}),[F,q]),(0,t.useEffect)((()=>{!g().isUndefined(R)&&B&&W({role:"user",content:B})}),[R]);const ye=o(B),he=(0,t.useMemo)((()=>g().map(P,(e=>null===e||void 0===e?void 0:e.content)).join("")),[P]),Se=ye+o(he),xe=(0,t.useMemo)((()=>{const e=g().last(P);return"assistant"===(null===e||void 0===e?void 0:e.role)?null===e||void 0===e?void 0:e.content:""}),[P]),ke=o(xe),fe=(0,t.useMemo)((()=>ke>0&&ve?ke/((Date.now()-ve)/1e3):0),[ke,ve]),[Ae,be]=(0,t.useState)([]),je=(0,a.LY)([T&&{key:"compare",label:pe("chatui.CompareWithOtherModels"),icon:(0,d.jsx)(ce.A,{}),onClick:()=>{M(`/serving?tab=chatting&endpointId=${c}&modelId=${z}`)}},T&&{type:"divider"},{key:"clear",danger:!0,label:pe("chatui.DeleteChatHistory"),icon:(0,d.jsx)(X.A,{}),onClick:()=>{me([])}}]);return(0,d.jsxs)(A.A,{ref:$,bordered:!0,extra:[],...C,title:(0,d.jsx)(r.A,{direction:"column",align:"stretch",gap:"sm",children:(0,d.jsxs)(r.A,{direction:"row",gap:"xs",children:[j,(0,d.jsx)(v,{models:l,value:z,onChange:V,allowCustomModel:k}),(0,d.jsx)(te.A,{menu:{items:je},trigger:["click"],children:(0,d.jsx)(y.Ay,{type:"link",onClick:e=>e.preventDefault(),icon:(0,d.jsx)(Z.A,{}),style:{color:ge.colorTextSecondary,width:ge.sizeMS}})})]})}),style:{height:"100%",width:"100%",display:"flex",flexDirection:"column"},styles:{body:{backgroundColor:ge.colorFillQuaternary,borderRadius:0,flex:1,display:"flex",flexDirection:"column",padding:0,height:"50%",position:"relative"},actions:{paddingLeft:ge.paddingContentHorizontal,paddingRight:ge.paddingContentHorizontal},header:{zIndex:1}},actions:[(0,d.jsx)(u,{autoFocus:!0,value:B,placeholder:"Say something...",header:(0,d.jsx)(s.A.Header,{closable:!1,title:pe("chatui.Attachments"),open:!!D&&!g().isEmpty(Ae),onOpenChange:N,styles:{content:{padding:0}},children:(0,d.jsx)(L.A,{beforeUpload:()=>!1,getDropContainer:()=>$.current,accept:"image/*,text/*",items:Ae,onChange:e=>{let{fileList:n}=e;return be(n)},placeholder:e=>"drop"===e?{title:pe("chatui.DropFileHere")}:{icon:(0,d.jsx)(ee.A,{}),title:pe("chatui.UploadFiles"),description:pe("chatui.UploadFilesDescription")}})}),prefix:(0,d.jsx)(L.A,{beforeUpload:()=>!1,getDropContainer:()=>$.current,accept:"image/*,text/*",items:Ae,onChange:e=>{let{fileList:n}=e;be(n),N(!0)},placeholder:e=>"drop"===e?{title:pe("chatui.DropFileHere")}:{icon:(0,d.jsx)(ee.A,{}),title:pe("chatui.UploadFiles"),description:pe("chatui.UploadFilesDescription")},children:(0,d.jsx)(oe.A,{dot:!g().isEmpty(Ae)&&!D,children:(0,d.jsx)(y.Ay,{type:"text",icon:(0,d.jsx)(ne.A,{})})})}),onChange:e=>{q(e),K&&K(e)},loading:G,onStop:()=>{H()},onSend:()=>{if(B||!g().isEmpty(Ae)){const e=g().map(Ae,(e=>e.originFileObj)),n=g().filter(e,Boolean),l=new DataTransfer;g().forEach(n,(e=>{l.items.add(e)})),W({role:"user",content:B},{experimental_attachments:l.files}),setTimeout((()=>{q(""),be([]),N(!1)}),0),null===E||void 0===E||E()}},style:{flex:1}})],children:[(0,d.jsx)(r.A,{direction:"row",style:{padding:ge.paddingSM,paddingRight:ge.paddingContentHorizontalLG,paddingLeft:ge.paddingContentHorizontalLG,backgroundColor:ge.colorBgContainer,display:k&&"custom"===z?"flex":"none"},children:(0,d.jsxs)(re.A,{ref:O,layout:"horizontal",size:"small",requiredMark:"optional",style:{flex:1},initialValues:{baseURL:m,token:w},children:[b?(0,d.jsx)("div",{style:{marginBottom:ge.size},children:b}):null,(0,d.jsx)(re.A.Item,{label:"baseURL",name:"baseURL",rules:[{type:"url"},{required:!0}],children:(0,d.jsx)(se.A,{placeholder:"https://domain/v1"})}),(0,d.jsx)(re.A.Item,{label:"Model ID",name:"modelId",rules:[{required:!0}],children:(0,d.jsx)(se.A,{placeholder:"llm-model"})}),(0,d.jsx)(re.A.Item,{label:"Token",name:"token",children:(0,d.jsx)(se.A,{})})]},m)}),g().isEmpty(null===U||void 0===U?void 0:U.message)?null:(0,d.jsx)(de.A,{message:null===U||void 0===U?void 0:U.message,type:"error",showIcon:!0,style:{margin:ge.marginSM},closable:!0}),(0,d.jsx)(Q,{messages:P,isStreaming:G}),(0,d.jsx)(r.A,{justify:"end",align:"end",style:{margin:ge.marginSM},children:(0,d.jsx)(ue.A,{children:(0,d.jsxs)(r.A,{gap:"xs",children:[(0,d.jsx)(le.A,{}),(0,d.jsxs)(r.A,{gap:"xxs",children:[(0,d.jsx)(f.A.Text,{children:fe.toFixed(2)}),(0,d.jsx)(f.A.Text,{type:"secondary",children:"tok/s"})]}),(0,d.jsxs)(r.A,{gap:"xxs",children:[(0,d.jsx)(f.A.Text,{children:Se}),(0,d.jsx)(f.A.Text,{type:"secondary",children:"total tokens"})]})]})})})]})}},45367:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatUIModalEndpointTokenListFragment",selections:[{alias:null,args:null,concreteType:"EndpointToken",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"token",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"valid_until",storageKey:null}],storageKey:null}],type:"EndpointTokenList",abstractKey:null,hash:"978a0d212433e32468a98dad175d1900"},i=a},73687:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ChatUIModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"endpoint_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],type:"Endpoint",abstractKey:null,hash:"f75cc1d0067e6a7d85e506a61c62a351"},i=a},41210:(e,n,l)=>{l.r(n),l.d(n,{default:()=>Te});var a,i,t,o=l(13765),r=l(9189),s=l(72338),d=l(67710),u=l(13170),c=l(83978),m=l(1581),g=l(58668),p=l(88005),v=l(46976),_=l.n(v),y=l(53350),h=l(91788),S=l(22018),x=l(60598);const k={LESS_THAN:"<",LESS_THAN_OR_EQUAL:"\u2264",GREATER_THAN:">",GREATER_THAN_OR_EQUAL:"\u2265"},f=e=>{let{onRequestClose:n,onCancel:v,endpoint_id:f,autoScalingRuleFrgmt:A,...b}=e;const{t:j}=(0,h.Bd)(),{message:F}=d.A.useApp(),R=(0,S.useFragment)(void 0!==a?a:a=l(55300),A),K=(0,y.useRef)(null),[E,T]=(0,S.useMutation)(void 0!==i?i:i=l(59567)),[w,L]=(0,S.useMutation)(void 0!==t?t:t=l(49773));return(0,x.jsx)(r.A,{...b,destroyOnClose:!0,onOk:()=>{var e;return null===(e=K.current)||void 0===e?void 0:e.validateFields().then((e=>{R?w({variables:{id:R.id,props:{metric_name:e.metric_name,metric_source:e.metric_source,threshold:e.threshold,comparator:e.comparator,step_size:e.step_size,cooldown_seconds:e.cooldown_seconds,min_replicas:e.min_replicas,max_replicas:e.max_replicas}},onCompleted:(e,l)=>{var a,i;if(null===e||void 0===e||null===(a=e.modify_endpoint_auto_scaling_rule_node)||void 0===a||!a.ok)return F.error(null===e||void 0===e||null===(i=e.modify_endpoint_auto_scaling_rule_node)||void 0===i?void 0:i.msg),void n(!1);if(l&&l.length>0){const e=_().map(l,(e=>e.message));for(const n of e)F.error(n,2.5);n(!1)}else F.success(j("autoScalingRule.SuccessfullyUpdated")),n(!0)},onError:e=>{F.error(e.message),n(!1)}}):E({variables:{endpoint:null!==f&&void 0!==f?f:"",props:{metric_name:e.metric_name,metric_source:e.metric_source,threshold:e.threshold,comparator:e.comparator,step_size:e.step_size,cooldown_seconds:e.cooldown_seconds,min_replicas:e.min_replicas,max_replicas:e.max_replicas}},onCompleted:(e,l)=>{var a,i;if(null===e||void 0===e||null===(a=e.create_endpoint_auto_scaling_rule_node)||void 0===a||!a.ok)return F.error(null===e||void 0===e||null===(i=e.create_endpoint_auto_scaling_rule_node)||void 0===i?void 0:i.msg),void n(!1);if(l&&l.length>0){const e=_().map(l,(e=>e.message));for(const n of e)F.error(n,2.5);n(!1)}else F.success(j("autoScalingRule.SuccessfullyCreated")),n(!0)},onError:e=>{F.error(e.message),n(!1)}})})).catch((e=>{console.log(e)}))},onCancel:()=>{n(!1)},centered:!0,title:j(R?"autoScalingRule.EditAutoScalingRule":"autoScalingRule.AddAutoScalingRule"),confirmLoading:T||L,children:(0,x.jsxs)(u.A,{ref:K,preserve:!1,layout:"vertical",requiredMark:"optional",initialValues:R||{metric_source:"KERNEL",comparators:"LESS_THAN",threshold:"10",step_size:0,cooldown_seconds:300,min_replicas:0,max_replicas:3},children:[(0,x.jsx)(u.A.Item,{label:j("autoScalingRule.MetricName"),name:"metric_name",rules:[{required:!0}],children:(0,x.jsx)(c.A,{})}),(0,x.jsx)(u.A.Item,{label:j("autoScalingRule.MetricSource"),name:"metric_source",rules:[{required:!0}],children:(0,x.jsxs)(m.A,{children:[(0,x.jsx)(m.A.Option,{value:"INFERENCE_FRAMEWORK",children:"Inference Framework"}),(0,x.jsx)(m.A.Option,{value:"KERNEL",children:"Kernel"})]})}),(0,x.jsxs)(s.A,{direction:"row",justify:"around",align:"stretch",style:{width:"100%"},gap:"md",children:[(0,x.jsx)(u.A.Item,{label:j("autoScalingRule.Comparator"),name:"comparator",rules:[{required:!0}],style:{flex:3},children:(0,x.jsx)(g.Ay.Group,{block:!0,size:"small",options:_().map(k,((e,n)=>({label:e,value:n}))),optionType:"button"})}),(0,x.jsx)(u.A.Item,{label:j("autoScalingRule.Threshold"),name:"threshold",rules:[{required:!0}],style:{flex:1},children:(0,x.jsx)(c.A,{})})]}),(0,x.jsxs)(s.A,{direction:"row",justify:"around",align:"stretch",style:{width:"100%"},gap:"xs",children:[(0,x.jsx)(u.A.Item,{label:j("autoScalingRule.MinReplicas"),name:"min_replicas",style:{width:"100%"},rules:[{required:!0,min:0,max:o.tu,type:"number"},{validator:(e,n)=>n%1!==0?Promise.reject(new Error(j("error.OnlyPositiveIntegersAreAllowed"))):Promise.resolve()}],children:(0,x.jsx)(p.A,{min:0,max:o.tu,style:{width:"100%"}})}),(0,x.jsx)(u.A.Item,{label:j("autoScalingRule.MaxReplicas"),name:"max_replicas",style:{width:"100%"},rules:[{required:!0,min:0,max:o.tu,type:"number"},{validator:(e,n)=>n%1!==0?Promise.reject(new Error(j("error.OnlyPositiveIntegersAreAllowed"))):Promise.resolve()}],children:(0,x.jsx)(p.A,{min:0,max:o.tu,style:{width:"100%"}})})]}),(0,x.jsx)(u.A.Item,{label:j("autoScalingRule.StepSize"),name:"step_size",rules:[{required:!0},{type:"number",min:o.TE,max:o.tu},{validator:(e,n)=>n%1!==0?Promise.reject(new Error(j("error.OnlyIntegersAreAllowed"))):Promise.resolve()}],children:(0,x.jsx)(p.A,{step:1,style:{width:"100%"}})}),(0,x.jsx)(u.A.Item,{label:j("autoScalingRule.CoolDownSeconds"),name:"cooldown_seconds",rules:[{required:!0,min:0,type:"number"},{validator:(e,n)=>n%1!==0?Promise.reject(new Error(j("error.OnlyPositiveIntegersAreAllowed"))):Promise.resolve()}],children:(0,x.jsx)(p.A,{style:{width:"100%"}})})]})})};var A=l(36214),b=l(88175),j=l(18744),F=l(72375),R=l(23441),K=l(73e3),E=l(66972),T=l(58325),w=l(10353),L=l(78502),C=l.n(L);const I=e=>{let{onRequestClose:n,onCancel:l,endpoint_id:a,...i}=e;const{t:t}=(0,h.Bd)(),o=(0,R.CX)(),d=(0,y.useRef)(null),c=(0,K.ET)({mutationFn:e=>{const n={valid_until:e.valid_until};return(0,F.hu)({method:"POST",url:`/services/${a}/token`,body:n,client:o})}});return(0,x.jsx)(r.A,{...i,destroyOnClose:!0,onOk:e=>{var l;null===(l=d.current)||void 0===l||l.validateFields().then((e=>{const l=e.datetime.unix();c.mutate({valid_until:l},{onSuccess:()=>{E.Ay.success(t("modelService.TokenGenerated")),n(!0)},onError:e=>{var n;null!==e&&void 0!==e&&null!==(n=e.message)&&void 0!==n&&n.includes("valid_until is older than now")?E.Ay.error(t("modelService.TokenExpiredDateError")):(E.Ay.error(t("modelService.TokenGenerationFailed")),console.log(e))}})}))},onCancel:()=>{n()},okText:t("modelService.Generate"),confirmLoading:c.isPending,centered:!0,title:t("modelService.GenerateNewToken"),children:(0,x.jsx)(u.A,{ref:d,preserve:!1,labelCol:{span:10},initialValues:{datetime:C()().add(24,"hour")},validateTrigger:["onChange","onBlur"],style:{maxWidth:500},children:(0,x.jsxs)(s.A,{direction:"column",gap:"sm",align:"stretch",children:[(0,x.jsx)(T.A,{type:"info",showIcon:!0,message:t("modelService.TokenExpiredDateHelp")}),(0,x.jsx)(s.A,{direction:"row",align:"stretch",justify:"around",children:(0,x.jsx)(u.A.Item,{name:"datetime",label:t("modelService.ExpiredDate"),rules:[{type:"object",required:!0,message:t("modelService.PleaseSelectTime")},()=>({validator:(e,n)=>n.isAfter(C()())?Promise.resolve():Promise.reject(new Error(t("modelService.TokenExpiredDateError")))})],children:(0,x.jsx)(w.A,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",style:{width:200}})})})]})})})};var M,D=l(75863),N=l(90184),z=l(52335),V=l(8227);const O=e=>{let{onRequestClose:n,onCancel:a,inferenceSessionErrorFrgmt:i,...t}=e;const{t:o}=(0,h.Bd)(),s=(0,S.useFragment)(void 0!==M?M:M=l(36414),i);return(0,x.jsx)(r.A,{centered:!0,title:o("modelService.ServingRouteErrorModalTitle"),onCancel:()=>{n()},footer:[(0,x.jsx)(z.Ay,{onClick:()=>{n()},children:o("button.Close")})],...t,children:(0,x.jsxs)(V.A,{bordered:!0,column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1},labelStyle:{minWidth:100},style:{marginTop:20},children:[(0,x.jsx)(V.A.Item,{label:o("modelService.SessionId"),children:(0,x.jsx)(A.default,{children:null===s||void 0===s?void 0:s.session_id})}),(0,x.jsx)(V.A.Item,{label:o("dialog.error.Error"),children:null===s||void 0===s?void 0:s.errors[0].repr})]})})};var $,P,U=l(42388),B=l(23492),q=l(20936),H=l(46735),G=l(43622),W=l(9571),Q=l(85265),Y=l(91867);const J=e=>{var n,a;let{endpointFrgmt:i,endpointTokenFrgmt:t,basePath:o="v1"}=e;const{t:r}=(0,h.Bd)(),s=(0,S.useFragment)(void 0!==$?$:$=l(73687),i),d=(0,S.useFragment)(void 0!==P?P:P=l(45367),t),u=_().maxBy(null===d||void 0===d?void 0:d.items,(e=>null===e||void 0===e?void 0:e.created_at)),c=C().utc(null===u||void 0===u?void 0:u.valid_until).tz().isAfter(C()())?null===u||void 0===u?void 0:u.token:void 0,{data:m,isFetching:g,refetch:p}=(0,K.nN)({queryKey:["models",null===s||void 0===s?void 0:s.url],queryFn:()=>fetch(new URL(o+"/models",(null===s||void 0===s?void 0:s.url)||"").toString()).then((e=>e.json()))});return g?(0,x.jsx)(Y.A,{active:!0}):(0,x.jsx)(H.A,{endpointId:(null===s||void 0===s?void 0:s.endpoint_id)||"",baseURL:new URL(o,(null===s||void 0===s?void 0:s.url)||"").toString(),models:_().map(null===m||void 0===m?void 0:m.data,(e=>({id:e.id,name:e.id}))),fetchOnClient:!0,style:{flex:1},allowCustomModel:_().isEmpty(null===m||void 0===m?void 0:m.data),alert:_().isEmpty(null===m||void 0===m?void 0:m.data)&&(0,x.jsx)(T.A,{type:"warning",showIcon:!0,message:r("chatui.CannotFindModel"),action:(0,x.jsx)(z.Ay,{icon:(0,x.jsx)(G.A,{}),onClick:()=>{p()},children:r("button.Refresh")})}),modelId:null!==(n=null===m||void 0===m||null===(a=m.data)||void 0===a?void 0:a[0].id)&&void 0!==n?n:"custom",modelToken:c,showCompareMenuItem:!0})},X=e=>{let{endpointFrgmt:n=null,endpointTokenFrgmt:l=null,basePath:a,...i}=e;const{token:t}=W.A.useToken();return(0,x.jsx)(Q.A,{...i,styles:{body:{height:"80vh",display:"flex"},content:{padding:0}},footer:null,centered:!0,width:"80%",style:{maxWidth:t.screenLGMax},destroyOnClose:!0,children:(0,x.jsx)(s.A,{direction:"column",align:"stretch",style:{flex:1},children:(0,x.jsx)(J,{basePath:a,endpointFrgmt:n,endpointTokenFrgmt:l})})})};var Z=l(7971),ee=l(54690),ne=l(68615),le=l(93143),ae=l(59203),ie=l(2667),te=l(40991),oe=l(17987),re=l(90055),se=function(e,n){return y.createElement(re.A,(0,te.A)({},e,{ref:n,icon:oe.A}))};const de=y.forwardRef(se);var ue=l(2759),ce=l(31291),me=l(53651),ge=l(53051),pe=l(10424),ve=l(50524),_e=l(30351),ye=l(50128),he=l(82919),Se=l(24798),xe=l(49978),ke=l(41170),fe=l(20418),Ae=l(37826),be=l(24034);const je=(0,l(60521).A)("BotMessageSquare",[["path",{d:"M12 6V2H8",key:"1155em"}],["path",{d:"m8 18-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z",key:"w2lp3e"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M9 11v2",key:"1ueba0"}],["path",{d:"M15 11v2",key:"i11awn"}],["path",{d:"M20 12h2",key:"1q8mjw"}]]);var Fe,Re,Ke=l(50423);const Ee=(e,n)=>{const l=C()(e.created_at),a=C()(n.created_at);return l.diff(a)},Te=()=>{var e,n,a,i,t,o,r,u,c;const{t:m}=(0,h.Bd)(),{token:g}=W.A.useToken(),{message:p}=d.A.useApp(),{baiPaginationOption:v}=(0,ee.w4)({current:1,pageSize:100}),{serviceId:E}=(0,Ke.g)(),[T,w]=(0,R.Tw)("initial-fetch"),[L,M]=(0,y.useTransition)(),[$,P]=(0,y.useTransition)(),[H,Q]=(0,y.useState)(null),[Y,J]=(0,y.useState)(null),[te,oe]=(0,y.useState)(!1),[re,se]=(0,y.useState)(!1),[Te,we]=(0,y.useState)(!1),[Le]=(0,Z.U6)(),Ce=(0,R.CX)(),Ie=(0,R.f0)(),{open:Me}=(0,D.useFolderExplorerOpener)(),[De,Ne]=(0,y.useState)(),ze=Ce.isManagerVersionCompatibleWith("25.1.0"),{endpoint:Ve,endpoint_token_list:Oe,endpoint_auto_scaling_rules:$e}=(0,S.useLazyLoadQuery)(void 0!==Fe?Fe:Fe=l(83555),{tokenListOffset:v.offset,tokenListLimit:v.limit,endpointId:E||"",autoScalingRules_endpointId:E,autoScalingRules_filter:void 0,autoScalingRules_offset:void 0,autoScalingRules_before:void 0,autoScalingRules_after:void 0,autoScalingRules_first:void 0,autoScalingRules_last:void 0,skipScalingRules:!ze},{fetchPolicy:"initial-fetch"===T?"store-and-network":"network-only",fetchKey:T}),Pe=(0,K.ET)({mutationFn:()=>{if(Ve)return(0,F.hu)({method:"POST",url:`/services/${Ve.endpoint_id}/errors/clear`,client:Ce})}}),Ue=(0,K.ET)({mutationFn:e=>(0,F.hu)({method:"POST",url:`/services/${e}/sync`,client:Ce})}),[Be,qe]=(0,S.useMutation)(void 0!==Re?Re:Re=l(67389)),He=function(){let e="default";switch((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toUpperCase()){case"HEALTHY":e="success";break;case"PROVISIONING":e="processing";break;case"UNHEALTHY":e="warning"}return e},Ge=_().map(null===$e||void 0===$e?void 0:$e.edges,(e=>null===e||void 0===e?void 0:e.node)),We=Ce.supports("modify-endpoint")&&null!==Ve&&void 0!==Ve&&Ve.image_object?`${Ve.image_object.registry}/${null!==(e=Ve.image_object.namespace)&&void 0!==e?e:Ve.image_object.name}:${Ve.image_object.tag}@${Ve.image_object.architecture}`:null===Ve||void 0===Ve?void 0:Ve.image,Qe=JSON.parse((null===Ve||void 0===Ve?void 0:Ve.resource_opts)||"{}"),Ye=[{label:m("modelService.EndpointName"),children:(0,x.jsx)(ye.A.Text,{copyable:!0,children:null===Ve||void 0===Ve?void 0:Ve.name})},{label:m("modelService.Status"),children:(0,x.jsx)(j.A,{endpointFrgmt:Ve})},{label:m("modelService.EndpointId"),children:null===Ve||void 0===Ve?void 0:Ve.endpoint_id},{label:m("modelService.SessionOwner"),children:(0,x.jsx)(b.A,{endpointFrgmt:Ve})},{label:m("modelService.NumberOfReplicas"),children:null!==(n=null===Ve||void 0===Ve?void 0:Ve.replicas)&&void 0!==n?n:null===Ve||void 0===Ve?void 0:Ve.desired_session_count},{label:m("modelService.ServiceEndpoint"),children:null!==Ve&&void 0!==Ve&&Ve.url?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(ye.A.Text,{copyable:!0,children:null===Ve||void 0===Ve?void 0:Ve.url}),(0,x.jsx)(he.A,{title:"LLM Chat Test",children:(0,x.jsx)(z.Ay,{type:"link",icon:(0,x.jsx)(je,{}),onClick:()=>{se(!0)},disabled:"HEALTHY"!==(null===Ve||void 0===Ve?void 0:Ve.status)})})]}):(0,x.jsx)(ye.A.Text,{type:"secondary",children:m("modelService.NoServiceEndpoint")})},{label:m("modelService.OpenToPublic"),children:null!==Ve&&void 0!==Ve&&Ve.open_to_public?(0,x.jsx)(le.A,{}):(0,x.jsx)(ae.A,{})},{label:m("modelService.Resources"),children:(0,x.jsxs)(s.A,{direction:"row",wrap:"wrap",gap:"md",children:[(0,x.jsx)(he.A,{title:m("session.ResourceGroup"),children:(0,x.jsx)(Se.A,{children:null===Ve||void 0===Ve?void 0:Ve.resource_group})}),_().map(JSON.parse((null===Ve||void 0===Ve?void 0:Ve.resource_slots)||"{}"),((e,n)=>(0,x.jsx)(U.A,{type:n,value:e,opts:Qe},n)))]}),span:{xl:2}},{label:m("session.launcher.ModelStorage"),children:(0,x.jsx)(y.Suspense,{fallback:(0,x.jsx)(xe.A,{indicator:(0,x.jsx)(ie.A,{spin:!0})}),children:(0,x.jsxs)(s.A,{direction:"column",align:"start",children:[(0,x.jsx)(q.A,{uuid:null===Ve||void 0===Ve?void 0:Ve.model,clickable:!0}),Ce.supports("endpoint-extra-mounts")&&(null===Ve||void 0===Ve?void 0:Ve.model_mount_destination)&&(0,x.jsxs)(s.A,{direction:"row",align:"center",gap:"xxs",children:[(0,x.jsx)(de,{type:"secondary"}),(0,x.jsx)(ye.A.Text,{type:"secondary",children:null===Ve||void 0===Ve?void 0:Ve.model_mount_destination})]})]})})}];return Ce.supports("endpoint-extra-mounts")&&Ye.push({label:m("modelService.AdditionalMounts"),children:(0,x.jsx)(s.A,{direction:"column",align:"start",children:_().map(null===Ve||void 0===Ve?void 0:Ve.extra_mounts,(e=>(0,x.jsx)(s.A,{direction:"row",gap:"xxs",children:(0,x.jsxs)(ye.A.Link,{onClick:()=>{(null===e||void 0===e?void 0:e.row_id)&&Me(null===e||void 0===e?void 0:e.row_id)},children:[(0,x.jsx)(ue.A,{})," ",null===e||void 0===e?void 0:e.name]})},null===e||void 0===e?void 0:e.row_id)))})}),Ye.push({label:m("session.launcher.EnvironmentVariable"),children:(0,x.jsx)(ye.A.Text,{style:{fontFamily:"monospace"},children:_().isEmpty(JSON.parse((null===Ve||void 0===Ve?void 0:Ve.environ)||"{}"))?"-":null===Ve||void 0===Ve?void 0:Ve.environ}),span:{sm:1}}),Ye.push({label:m("modelService.Image"),children:(Ce.supports("modify-endpoint")?null===Ve||void 0===Ve?void 0:Ve.image_object:null===Ve||void 0===Ve?void 0:Ve.image)&&(0,x.jsxs)(s.A,{direction:"row",gap:"xs",children:[(0,x.jsx)(N.A,{image:We||null}),(0,x.jsx)(A.default,{children:We}),null!==Ve&&void 0!==Ve&&null!==(a=Ve.runtime_variant)&&void 0!==a&&a.human_readable_name?(0,x.jsx)(Se.A,{children:null===Ve||void 0===Ve||null===(i=Ve.runtime_variant)||void 0===i?void 0:i.human_readable_name}):null]}),span:{xl:3}}),(0,x.jsxs)(s.A,{direction:"column",align:"stretch",gap:"sm",children:[(0,x.jsx)(ke.A,{items:[{title:m("modelService.Services"),onClick:e=>{e.preventDefault(),Ie("/serving")},href:"/serving"},{title:m("modelService.RoutingInfo")}]}),(0,x.jsxs)(s.A,{direction:"row",justify:"between",children:[(0,x.jsx)(ye.A.Title,{level:3,style:{margin:0},children:(null===Ve||void 0===Ve?void 0:Ve.name)||""}),(0,x.jsxs)(s.A,{gap:"xxs",children:[((null===Ve||void 0===Ve?void 0:Ve.retries)||0)>0?(0,x.jsx)(he.A,{title:m("modelService.ClearErrors"),children:(0,x.jsx)(z.Ay,{loading:$,icon:(0,x.jsx)(ce.A,{}),onClick:()=>{P((()=>{Pe.mutate(void 0,{onSuccess:()=>M((()=>{w()}))})}))}})}):(0,x.jsx)(x.Fragment,{}),(0,x.jsx)(z.Ay,{loading:L,icon:(0,x.jsx)(G.A,{}),disabled:(0,ne.isDestroyingStatus)(null!==(t=null===Ve||void 0===Ve?void 0:Ve.replicas)&&void 0!==t?t:null===Ve||void 0===Ve?void 0:Ve.desired_session_count,null===Ve||void 0===Ve?void 0:Ve.status),onClick:()=>{M((()=>{w()}))},children:m("button.Refresh")})]})]}),(0,x.jsx)(fe.A,{title:m("modelService.ServiceInfo"),extra:(0,x.jsx)(z.Ay,{type:"primary",icon:(0,x.jsx)(me.A,{}),disabled:(0,ne.isDestroyingStatus)(null!==(o=null===Ve||void 0===Ve?void 0:Ve.replicas)&&void 0!==o?o:null===Ve||void 0===Ve?void 0:Ve.desired_session_count,null===Ve||void 0===Ve?void 0:Ve.status)||!(null===Ve||void 0===Ve||!Ve.created_user_email)&&(null===Ve||void 0===Ve?void 0:Ve.created_user_email)!==Le.email,onClick:()=>{Ie("/service/update/"+E)},children:m("button.Edit")}),children:(0,x.jsx)(V.A,{bordered:!0,column:{xxl:3,xl:3,lg:2,md:1,sm:1,xs:1},style:{backgroundColor:g.colorBgBase},items:Ye})}),ze&&(0,x.jsx)(fe.A,{title:m("modelService.AutoScalingRules"),extra:(0,x.jsx)(z.Ay,{type:"primary",icon:(0,x.jsx)(ge.A,{}),disabled:(0,ne.isDestroyingStatus)(null!==(r=null===Ve||void 0===Ve?void 0:Ve.replicas)&&void 0!==r?r:null===Ve||void 0===Ve?void 0:Ve.desired_session_count,null===Ve||void 0===Ve?void 0:Ve.status),onClick:()=>{we(!0)},children:m("modelService.AddRules")}),children:(0,x.jsx)(Ae.A,{scroll:{x:"max-content"},rowKey:"id",columns:[{title:"#",fixed:"left",render:(e,n,l)=>++l},{title:m("autoScalingRule.MetricName"),dataIndex:"metric_name",fixed:"left",render:(e,n)=>(0,x.jsx)(ye.A.Text,{ellipsis:!0,copyable:!0,style:{width:150},children:null===n||void 0===n?void 0:n.metric_name})},{title:m("modelService.Controls"),dataIndex:"controls",key:"controls",render:(e,n)=>{var l,a,i;return(0,x.jsxs)(s.A,{direction:"row",align:"stretch",children:[(0,x.jsx)(z.Ay,{type:"text",icon:(0,x.jsx)(me.A,{}),style:(0,ne.isDestroyingStatus)(null!==(l=null===Ve||void 0===Ve?void 0:Ve.replicas)&&void 0!==l?l:null===Ve||void 0===Ve?void 0:Ve.desired_session_count,null===Ve||void 0===Ve?void 0:Ve.status)||null!==Ve&&void 0!==Ve&&Ve.created_user_email&&(null===Ve||void 0===Ve?void 0:Ve.created_user_email)!==Le.email?{color:g.colorTextDisabled}:{color:g.colorInfo},disabled:(0,ne.isDestroyingStatus)(null!==(a=null===Ve||void 0===Ve?void 0:Ve.replicas)&&void 0!==a?a:null===Ve||void 0===Ve?void 0:Ve.desired_session_count,null===Ve||void 0===Ve?void 0:Ve.status)||!(null===Ve||void 0===Ve||!Ve.created_user_email)&&(null===Ve||void 0===Ve?void 0:Ve.created_user_email)!==Le.email,onClick:()=>{n&&(J(n),we(!0))}}),(0,x.jsx)(be.A,{title:m("dialog.warning.CannotBeUndone"),okText:m("button.Delete"),okButtonProps:{danger:!0},disabled:qe,onConfirm:()=>{Ge&&Be({variables:{id:null===n||void 0===n?void 0:n.id},onCompleted:(e,n)=>{var l,a;if(null!==e&&void 0!==e&&null!==(l=e.delete_endpoint_auto_scaling_rule_node)&&void 0!==l&&l.ok)if(n&&n.length>0){const e=_().map(n,(e=>e.message||m("dialog.ErrorOccurred")));for(const n of e)p.error(n,2.5)}else J(null),M((()=>{w()})),p.success({key:"autoscaling-rule-deleted",content:m("autoScalingRule.SuccessfullyDeleted")});else p.error(null===e||void 0===e||null===(a=e.delete_endpoint_auto_scaling_rule_node)||void 0===a?void 0:a.msg)},onError:e=>{p.error((null===e||void 0===e?void 0:e.message)||m("dialog.ErrorOccurred"))}})},children:(0,x.jsx)(z.Ay,{type:"text",icon:(0,x.jsx)(pe.A,{style:(0,ne.isDestroyingStatus)(null!==(i=null===Ve||void 0===Ve?void 0:Ve.replicas)&&void 0!==i?i:null===Ve||void 0===Ve?void 0:Ve.desired_session_count,null===Ve||void 0===Ve?void 0:Ve.status)?void 0:{color:g.colorError}}),disabled:!1,onClick:()=>{n&&J(n)}})})]})}},{title:m("autoScalingRule.MetricSource"),dataIndex:"metric_source",render:(e,n)=>(0,x.jsx)(Se.A,{children:null===n||void 0===n?void 0:n.metric_source})},{title:m("autoScalingRule.Comparator"),dataIndex:"comparator",render:(e,n)=>(0,x.jsx)(he.A,{title:e,children:k[e]})},{title:m("autoScalingRule.Threshold"),render:(e,n)=>(0,x.jsx)("span",{children:null===n||void 0===n?void 0:n.threshold})},{title:m("autoScalingRule.StepSize"),dataIndex:"step_size"},{title:m("autoScalingRule.MIN/MAXReplicas"),render:(e,n)=>(0,x.jsxs)("span",{children:["Min: ",null===n||void 0===n?void 0:n.min_replicas," / Max: ",null===n||void 0===n?void 0:n.max_replicas]})},{title:m("autoScalingRule.CoolDownSeconds"),dataIndex:"cooldown_seconds"},{title:m("autoScalingRule.LastTriggered"),render:(e,n)=>(0,x.jsx)("span",{children:null!==n&&void 0!==n&&n.last_triggered_at?C().utc(null===n||void 0===n?void 0:n.last_triggered_at).tz().format("ll LTS"):"-"}),sorter:Ee},{title:m("autoScalingRule.CreatedAt"),dataIndex:"created_at",render:(e,n)=>(0,x.jsx)("span",{children:C()(null===n||void 0===n?void 0:n.created_at).format("ll LT")}),sorter:Ee}],pagination:!1,sortDirections:["descend","ascend","descend"],showSorterTooltip:!1,dataSource:Ge,bordered:!0})}),(0,x.jsx)(fe.A,{title:m("modelService.GeneratedTokens"),extra:(0,x.jsx)(z.Ay,{type:"primary",icon:(0,x.jsx)(ge.A,{}),disabled:(0,ne.isDestroyingStatus)(null!==(u=null===Ve||void 0===Ve?void 0:Ve.replicas)&&void 0!==u?u:null===Ve||void 0===Ve?void 0:Ve.desired_session_count,null===Ve||void 0===Ve?void 0:Ve.status),onClick:()=>{oe(!0)},children:m("modelService.GenerateToken")}),children:(0,x.jsx)(Ae.A,{scroll:{x:"max-content"},rowKey:"token",columns:[{title:"#",fixed:"left",render:(e,n,l)=>++l},{title:"Token",dataIndex:"token",fixed:"left",render:(e,n)=>(0,x.jsx)(ye.A.Text,{ellipsis:!0,copyable:!0,style:{width:150},children:n.token})},{title:"Status",render:(e,n)=>{const l=C().utc(n.valid_until).isBefore();return(0,x.jsx)(Se.A,{color:l?"red":"green",children:l?"Expired":"Valid"})}},{title:"Valid Until",dataIndex:"valid_until",render:(e,n)=>(0,x.jsx)("span",{children:n.valid_until?C().utc(n.valid_until).tz().format("ll LTS"):"-"}),sorter:Ee},{title:"Created at",dataIndex:"created_at",render:(e,n)=>(0,x.jsx)("span",{children:C()(n.created_at).format("ll LT")}),sorter:Ee}],sortDirections:["descend","ascend","descend"],showSorterTooltip:!1,pagination:!1,dataSource:(0,F.tS)(null===Oe||void 0===Oe?void 0:Oe.items),bordered:!0})}),(0,x.jsx)(fe.A,{title:m("modelService.RoutesInfo"),extra:null!==Ve&&void 0!==Ve&&Ve.endpoint_id?(0,x.jsx)(z.Ay,{icon:(0,x.jsx)(ve.A,{}),loading:Ue.isPending,disabled:(0,ne.isDestroyingStatus)(null!==(c=null===Ve||void 0===Ve?void 0:Ve.replicas)&&void 0!==c?c:null===Ve||void 0===Ve?void 0:Ve.desired_session_count,null===Ve||void 0===Ve?void 0:Ve.status),onClick:()=>{(null===Ve||void 0===Ve?void 0:Ve.endpoint_id)&&Ue.mutateAsync(null===Ve||void 0===Ve?void 0:Ve.endpoint_id,{onSuccess:e=>{null!==e&&void 0!==e&&e.success?(p.success(m("modelService.SyncRoutesRequested")),M((()=>{w()}))):p.error(m("modelService.SyncRoutesFailed"))},onError:e=>{p.error(m("modelService.SyncRoutesFailed"))}})},children:m("modelService.SyncRoutes")}):null,children:(0,x.jsx)(Ae.A,{scroll:{x:"max-content"},columns:[{title:m("modelService.RouteId"),dataIndex:"routing_id",fixed:"left"},{title:m("modelService.SessionId"),dataIndex:"session",render:e=>Ce.supports("session-node")?(0,x.jsx)(ye.A.Link,{onClick:()=>{Ne(e)},children:e}):(0,x.jsx)(ye.A.Text,{children:e})},{title:m("modelService.Status"),render:(e,n)=>n.status&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Se.A,{color:He(null===n||void 0===n?void 0:n.status),style:{marginRight:0},children:n.status.toUpperCase()},null===n||void 0===n?void 0:n.status),"FAILED_TO_START"===n.status&&n.session&&(0,x.jsx)(z.Ay,{size:"small",type:"text",icon:(0,x.jsx)(_e.A,{}),style:{color:g.colorTextSecondary},onClick:()=>{n.session&&(e=>{if(null===Ve)return;const{errors:n}=Ve||{},l=null===n||void 0===n?void 0:n.find((n=>{let{session_id:l}=n;return e===l}));Q(l||null)})(n.session)}})]})},{title:m("modelService.TrafficRatio"),dataIndex:"traffic_ratio"}],pagination:!1,dataSource:null===Ve||void 0===Ve?void 0:Ve.routings,rowKey:"routing_id",bordered:!0})}),(0,x.jsx)(O,{open:!!H,inferenceSessionErrorFrgmt:H,onRequestClose:()=>Q(null)}),(0,x.jsx)(I,{open:te,onRequestClose:e=>{oe(!te),e&&M((()=>{w()}))},endpoint_id:(null===Ve||void 0===Ve?void 0:Ve.endpoint_id)||""}),(0,x.jsx)(X,{endpointFrgmt:Ve,endpointTokenFrgmt:Oe,open:re,onCancel:()=>{se(!1)}}),ze&&(0,x.jsx)(f,{open:Te,endpoint_id:null===Ve||void 0===Ve?void 0:Ve.endpoint_id,autoScalingRuleFrgmt:Y,onRequestClose:e=>{we(!Te),J(null),e&&M((()=>{w()}))}}),(0,x.jsx)(B.A,{open:!De,sessionId:De,onClose:()=>{Ne(void 0)}})]})}},67389:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],n=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"id"}],concreteType:"DeleteEndpointAutoScalingRuleNode",kind:"LinkedField",name:"delete_endpoint_auto_scaling_rule_node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"EndpointDetailPageAutoScalingRuleDeleteMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"EndpointDetailPageAutoScalingRuleDeleteMutation",selections:n},params:{cacheID:"e647347518ca7cfd97bf2fbaae817544",id:null,metadata:{},name:"EndpointDetailPageAutoScalingRuleDeleteMutation",operationKind:"mutation",text:"mutation EndpointDetailPageAutoScalingRuleDeleteMutation(\n  $id: String!\n) {\n  delete_endpoint_auto_scaling_rule_node(id: $id) {\n    ok\n    msg\n  }\n}\n"}}}();a.hash="b2c728c3dedd10a4ef2c345f6ba3cfaf";const i=a},83555:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"autoScalingRules_after"},n={defaultValue:null,kind:"LocalArgument",name:"autoScalingRules_before"},l={defaultValue:null,kind:"LocalArgument",name:"autoScalingRules_endpointId"},a={defaultValue:null,kind:"LocalArgument",name:"autoScalingRules_filter"},i={defaultValue:null,kind:"LocalArgument",name:"autoScalingRules_first"},t={defaultValue:null,kind:"LocalArgument",name:"autoScalingRules_last"},o={defaultValue:null,kind:"LocalArgument",name:"autoScalingRules_offset"},r={defaultValue:null,kind:"LocalArgument",name:"autoScalingRules_order"},s={defaultValue:null,kind:"LocalArgument",name:"endpointId"},d={defaultValue:null,kind:"LocalArgument",name:"skipScalingRules"},u={defaultValue:null,kind:"LocalArgument",name:"tokenListLimit"},c={defaultValue:null,kind:"LocalArgument",name:"tokenListOffset"},m={kind:"Variable",name:"endpoint_id",variableName:"endpointId"},g=[m],p={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"endpoint_id",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"image",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"namespace",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"humanized_name",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"tag",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"registry",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"is_local",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"digest",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},F={alias:null,args:null,concreteType:"ResourceLimit",kind:"LinkedField",name:"resource_limits",plural:!0,selections:[j,{alias:null,args:null,kind:"ScalarField",name:"min",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max",storageKey:null}],storageKey:null},R={alias:null,args:null,concreteType:"KVPair",kind:"LinkedField",name:"labels",plural:!0,selections:[j,{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],storageKey:null},K={alias:null,args:null,kind:"ScalarField",name:"size_bytes",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"supported_accelerators",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"desired_session_count",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"replicas",storageKey:null},L={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"open_to_public",storageKey:null},I={alias:null,args:null,kind:"ScalarField",name:"session_id",storageKey:null},M={alias:null,args:null,kind:"ScalarField",name:"retries",storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"human_readable_name",storageKey:null},N={alias:null,args:null,kind:"ScalarField",name:"model",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"model_mount_destiation",storageKey:null},V={alias:null,args:null,kind:"ScalarField",name:"model_mount_destination",storageKey:null},O={alias:null,args:null,kind:"ScalarField",name:"model_definition_path",storageKey:null},$={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"environ",storageKey:null},U={alias:null,args:null,kind:"ScalarField",name:"resource_group",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"resource_slots",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"resource_opts",storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"routing_id",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"session",storageKey:null},W={alias:null,args:null,kind:"ScalarField",name:"traffic_ratio",storageKey:null},Q={alias:null,args:null,kind:"ScalarField",name:"endpoint",storageKey:null},Y={alias:null,args:null,kind:"ScalarField",name:"created_user_email",storageKey:null},J=[m,{kind:"Variable",name:"limit",variableName:"tokenListLimit"},{kind:"Variable",name:"offset",variableName:"tokenListOffset"}],X={alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null},Z={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},ee={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},ne={alias:null,args:null,concreteType:"EndpointToken",kind:"LinkedField",name:"items",plural:!0,selections:[Z,{alias:null,args:null,kind:"ScalarField",name:"token",storageKey:null},_,{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"session_owner",storageKey:null},ee,{alias:null,args:null,kind:"ScalarField",name:"valid_until",storageKey:null}],storageKey:null},le=[{kind:"Variable",name:"after",variableName:"autoScalingRules_after"},{kind:"Variable",name:"before",variableName:"autoScalingRules_before"},{kind:"Variable",name:"endpoint",variableName:"autoScalingRules_endpointId"},{kind:"Variable",name:"filter",variableName:"autoScalingRules_filter"},{kind:"Variable",name:"first",variableName:"autoScalingRules_first"},{kind:"Variable",name:"last",variableName:"autoScalingRules_last"},{kind:"Variable",name:"offset",variableName:"autoScalingRules_offset"},{kind:"Variable",name:"order",variableName:"autoScalingRules_order"}],ae={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasPreviousPage",storageKey:null}],storageKey:null},ie={alias:null,args:null,kind:"ScalarField",name:"metric_name",storageKey:null},te={alias:null,args:null,kind:"ScalarField",name:"metric_source",storageKey:null},oe={alias:null,args:null,kind:"ScalarField",name:"threshold",storageKey:null},re={alias:null,args:null,kind:"ScalarField",name:"comparator",storageKey:null},se={alias:null,args:null,kind:"ScalarField",name:"step_size",storageKey:null},de={alias:null,args:null,kind:"ScalarField",name:"cooldown_seconds",storageKey:null},ue={alias:null,args:null,kind:"ScalarField",name:"min_replicas",storageKey:null},ce={alias:null,args:null,kind:"ScalarField",name:"max_replicas",storageKey:null},me={alias:null,args:null,kind:"ScalarField",name:"last_triggered_at",storageKey:null};return{fragment:{argumentDefinitions:[e,n,l,a,i,t,o,r,s,d,u,c],kind:"Fragment",metadata:null,name:"EndpointDetailPageQuery",selections:[{alias:null,args:g,concreteType:"Endpoint",kind:"LinkedField",name:"endpoint",plural:!1,selections:[p,v,_,y,{alias:null,args:null,concreteType:"ImageNode",kind:"LinkedField",name:"image_object",plural:!1,selections:[p,h,S,x,k,f,A,b,F,R,K,E],storageKey:null},T,w,L,C,{alias:null,args:null,concreteType:"InferenceSessionError",kind:"LinkedField",name:"errors",plural:!0,selections:[I,{args:null,kind:"FragmentSpread",name:"InferenceSessionErrorModalFragment"}],storageKey:null},M,{alias:null,args:null,concreteType:"RuntimeVariantInfo",kind:"LinkedField",name:"runtime_variant",plural:!1,selections:[D],storageKey:null},N,z,V,O,{alias:null,args:null,concreteType:"VirtualFolderNode",kind:"LinkedField",name:"extra_mounts",plural:!0,selections:[$,p],storageKey:null},P,U,B,q,{alias:null,args:null,concreteType:"Routing",kind:"LinkedField",name:"routings",plural:!0,selections:[H,G,W,Q,v],storageKey:null},Y,{args:null,kind:"FragmentSpread",name:"EndpointOwnerInfoFragment"},{args:null,kind:"FragmentSpread",name:"EndpointStatusTagFragment"},{args:null,kind:"FragmentSpread",name:"ChatUIModalFragment"},{args:null,kind:"FragmentSpread",name:"ServiceLauncherPageContentFragment"}],storageKey:null},{alias:null,args:J,concreteType:"EndpointTokenList",kind:"LinkedField",name:"endpoint_token_list",plural:!1,selections:[X,ne,{args:null,kind:"FragmentSpread",name:"ChatUIModalEndpointTokenListFragment"}],storageKey:null},{alias:"endpoint_auto_scaling_rules",args:le,concreteType:"EndpointAutoScalingRuleConnection",kind:"LinkedField",name:"endpoint_auto_scaling_rule_nodes",plural:!1,selections:[ae,{alias:null,args:null,concreteType:"EndpointAutoScalingRuleEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"EndpointAutoScalingRuleNode",kind:"LinkedField",name:"node",plural:!1,selections:[Z,Q,ie,te,oe,re,se,de,ue,ce,ee,me,{args:null,kind:"FragmentSpread",name:"AutoScalingRuleEditorModalFragment"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[s,c,u,l,a,o,r,n,e,i,t,d],kind:"Operation",name:"EndpointDetailPageQuery",selections:[{alias:null,args:g,concreteType:"Endpoint",kind:"LinkedField",name:"endpoint",plural:!1,selections:[p,v,_,y,{alias:null,args:null,concreteType:"ImageNode",kind:"LinkedField",name:"image_object",plural:!1,selections:[p,h,S,x,k,f,A,b,F,R,K,E,Z,p],storageKey:null},T,w,L,C,{alias:null,args:null,concreteType:"InferenceSessionError",kind:"LinkedField",name:"errors",plural:!0,selections:[I,{alias:null,args:null,concreteType:"InferenceSessionErrorInfo",kind:"LinkedField",name:"errors",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"repr",storageKey:null}],storageKey:null}],storageKey:null},M,{alias:null,args:null,concreteType:"RuntimeVariantInfo",kind:"LinkedField",name:"runtime_variant",plural:!1,selections:[D,p],storageKey:null},N,z,V,O,{alias:null,args:null,concreteType:"VirtualFolderNode",kind:"LinkedField",name:"extra_mounts",plural:!0,selections:[$,p,Z],storageKey:null},P,U,B,q,{alias:null,args:null,concreteType:"Routing",kind:"LinkedField",name:"routings",plural:!0,selections:[H,G,W,Q,v,Z],storageKey:null},Y,Z,{alias:null,args:null,kind:"ScalarField",name:"session_owner_email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_mode",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_size",storageKey:null}],storageKey:null},{alias:null,args:J,concreteType:"EndpointTokenList",kind:"LinkedField",name:"endpoint_token_list",plural:!1,selections:[X,ne],storageKey:null},{alias:"endpoint_auto_scaling_rules",args:le,concreteType:"EndpointAutoScalingRuleConnection",kind:"LinkedField",name:"endpoint_auto_scaling_rule_nodes",plural:!1,selections:[ae,{alias:null,args:null,concreteType:"EndpointAutoScalingRuleEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"EndpointAutoScalingRuleNode",kind:"LinkedField",name:"node",plural:!1,selections:[Z,Q,ie,te,oe,re,se,de,ue,ce,ee,me],storageKey:null}],storageKey:null}],storageKey:null}]},params:{cacheID:"ae926019d37d1cc28d71f771ebbc4a70",id:null,metadata:{},name:"EndpointDetailPageQuery",operationKind:"query",text:'query EndpointDetailPageQuery(\n  $endpointId: UUID!\n  $tokenListOffset: Int!\n  $tokenListLimit: Int!\n  $autoScalingRules_endpointId: String!\n  $autoScalingRules_filter: String\n  $autoScalingRules_offset: Int\n  $autoScalingRules_order: String\n  $autoScalingRules_before: String\n  $autoScalingRules_after: String\n  $autoScalingRules_first: Int\n  $autoScalingRules_last: Int\n  $skipScalingRules: Boolean!\n) {\n  endpoint(endpoint_id: $endpointId) {\n    name\n    status\n    endpoint_id\n    image @deprecatedSince(version: "23.09.9")\n    image_object @since(version: "23.09.9") {\n      name\n      namespace @since(version: "24.12.0")\n      humanized_name\n      tag\n      registry\n      architecture\n      is_local\n      digest\n      resource_limits {\n        key\n        min\n        max\n      }\n      labels {\n        key\n        value\n      }\n      size_bytes\n      supported_accelerators\n      id\n    }\n    desired_session_count @deprecatedSince(version: "24.12.0")\n    replicas @since(version: "24.12.0")\n    url\n    open_to_public\n    errors {\n      session_id\n      ...InferenceSessionErrorModalFragment\n    }\n    retries\n    runtime_variant @since(version: "24.03.5") {\n      human_readable_name\n    }\n    model\n    model_mount_destiation @deprecatedSince(version: "24.03.4")\n    model_mount_destination @since(version: "24.03.4")\n    model_definition_path @since(version: "24.03.4")\n    extra_mounts @since(version: "24.03.4") {\n      row_id\n      name\n      id\n    }\n    environ\n    resource_group\n    resource_slots\n    resource_opts\n    routings {\n      routing_id\n      session\n      traffic_ratio\n      endpoint\n      status\n      id\n    }\n    created_user_email @since(version: "23.09.8")\n    ...EndpointOwnerInfoFragment\n    ...EndpointStatusTagFragment\n    ...ChatUIModalFragment\n    ...ServiceLauncherPageContentFragment\n    id\n  }\n  endpoint_token_list(offset: $tokenListOffset, limit: $tokenListLimit, endpoint_id: $endpointId) {\n    total_count\n    items {\n      id\n      token\n      endpoint_id\n      domain\n      project\n      session_owner\n      created_at\n      valid_until\n    }\n    ...ChatUIModalEndpointTokenListFragment\n  }\n  endpoint_auto_scaling_rules: endpoint_auto_scaling_rule_nodes(endpoint: $autoScalingRules_endpointId, filter: $autoScalingRules_filter, order: $autoScalingRules_order, offset: $autoScalingRules_offset, before: $autoScalingRules_before, after: $autoScalingRules_after, first: $autoScalingRules_first, last: $autoScalingRules_last) @skipOnClient(if: $skipScalingRules) {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n    }\n    edges {\n      node {\n        id\n        endpoint\n        metric_name\n        metric_source\n        threshold\n        comparator\n        step_size\n        cooldown_seconds\n        min_replicas\n        max_replicas\n        created_at\n        last_triggered_at\n        ...AutoScalingRuleEditorModalFragment\n      }\n    }\n  }\n}\n\nfragment AutoScalingRuleEditorModalFragment on EndpointAutoScalingRuleNode {\n  id\n  endpoint\n  metric_name\n  metric_source\n  threshold\n  comparator\n  step_size\n  cooldown_seconds\n  min_replicas\n  max_replicas\n}\n\nfragment ChatUIModalEndpointTokenListFragment on EndpointTokenList {\n  items {\n    id\n    token\n    created_at\n    valid_until\n  }\n}\n\nfragment ChatUIModalFragment on Endpoint {\n  endpoint_id\n  url\n  status\n}\n\nfragment EndpointOwnerInfoFragment on Endpoint {\n  id\n  created_user_email @since(version: "23.09.8")\n  session_owner_email @since(version: "23.09.8")\n}\n\nfragment EndpointStatusTagFragment on Endpoint {\n  id\n  status\n}\n\nfragment InferenceSessionErrorModalFragment on InferenceSessionError {\n  session_id\n  errors {\n    repr\n  }\n}\n\nfragment ServiceLauncherPageContentFragment on Endpoint {\n  endpoint_id\n  desired_session_count @deprecatedSince(version: "24.12.0")\n  replicas @since(version: "24.12.0")\n  resource_group\n  resource_slots\n  resource_opts\n  cluster_mode\n  cluster_size\n  open_to_public\n  model\n  model_mount_destination @since(version: "24.03.4")\n  model_definition_path @since(version: "24.03.4")\n  environ\n  runtime_variant @since(version: "24.03.5") {\n    name\n    human_readable_name\n  }\n  extra_mounts @since(version: "24.03.4") {\n    row_id\n    id\n  }\n  image_object @since(version: "23.09.9") {\n    name @deprecatedSince(version: "24.12.0")\n    namespace @since(version: "24.12.0")\n    humanized_name\n    tag\n    registry\n    architecture\n    is_local\n    digest\n    resource_limits {\n      key\n      min\n      max\n    }\n    labels {\n      key\n      value\n    }\n    size_bytes\n    supported_accelerators\n    id\n  }\n  name\n}\n'}}}();a.hash="fb6f1dacde54bce33a0763f97a2bb663";const i=a},17987:(e,n,l)=>{l.d(n,{A:()=>a});const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"}},37385:(e,n,l)=>{l.d(n,{A:()=>a});const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"}},49412:(e,n,l)=>{l.d(n,{A:()=>a});const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"}},50524:(e,n,l)=>{l.d(n,{A:()=>s});var a=l(40991),i=l(53350),t=l(37385),o=l(90055),r=function(e,n){return i.createElement(o.A,(0,a.A)({},e,{ref:n,icon:t.A}))};const s=i.forwardRef(r)},31291:(e,n,l)=>{l.d(n,{A:()=>s});var a=l(40991),i=l(53350),t=l(49412),o=l(90055),r=function(e,n){return i.createElement(o.A,(0,a.A)({},e,{ref:n,icon:t.A}))};const s=i.forwardRef(r)}}]);
//# sourceMappingURL=1210.cbde39a9.chunk.js.map