"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[620,502],{1502:function(e,n,a){a.r(n),a.d(n,{default:function(){return M},useShadowRoot:function(){return Z},useWebComponentInfo:function(){return R}});var l=a(9439),t=a(4519),o=a(6980),i=a(6114),r=a(9002),s=a(7112),u=a(4447),c=a(1748),d=a(3881),m=a(9883),g=a(6670),p=a(4165),y=a(5861),f=a(1011),_=a(1413);function v(e,n){var a=(0,_.Z)({},n);return function(e){for(var n,a=/(\w+)\s@\s*(\w+)\s*\(\s*(\w+)\s*:\s*(\$?\w+)\s*\)/g,t=[];null!==(n=a.exec(e));){var o=n,i=(0,l.Z)(o,5),r=i[0],s=i[1],u=i[2],c=i[3],d=i[4];t.push({fieldName:s,directive:u,argumentName:c,argumentValue:d,originFieldStr:r})}return t}(e).forEach((function(l){if("skipOnClient"===l.directive&&"if"===l.argumentName&&(e=!l.argumentValue||!0!==n[l.argumentValue.substring(1)]&&"true"!==l.argumentValue?e.replace(l.originFieldStr,l.originFieldStr.replace(/@\s*(skipOnClient)\s*\(\s*(\w+)\s*:\s*(\$?\w+)\s*\)/,"")):e.replace(l.originFieldStr,""),l.argumentValue.startsWith("$")&&2===e.split(l.argumentValue).length)){var t=l.argumentValue.substring(1),o=new RegExp(".*".concat(t,".*\n"),"g");e=e.replace(o,""),delete a[l.argumentValue.substring(1)]}})),{query:e,variables:a}}f.RelayFeatureFlags.ENABLE_RELAY_RESOLVERS=!0;var k=function(){var e=(0,y.Z)((0,p.Z)().mark((function e(n,a){var l,t,o,i,r,s;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=v(n.text||"",a),i={query:o.query,variables:o.variables},r=null===(l=globalThis.backendaiclient)||void 0===l?void 0:l.newSignedRequest("POST","/admin/gql",i),e.next=5,null===(t=globalThis.backendaiclient)||void 0===t?void 0:t._wrapWithPromise(r,!1,null,1e4,0);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}();var S,b=new f.Environment({network:f.Network.create(k,void 0),store:new f.Store(new f.RecordSource)}),h=a(382),P=a(4322),F=a(2556),j=t.createContext(null),x=t.createContext(null),Z=function(){return t.useContext(x)},R=function(){return t.useContext(j)},K=new s.QueryClient({defaultOptions:{queries:{suspense:!0,refetchOnWindowFocus:!1,retry:!1}}});u.ZP.use(c.Db).use(d.Z).init({backend:{loadPath:"/resources/i18n/{{lng}}.json"},lng:(null===globalThis||void 0===globalThis||null===(S=globalThis.backendaioptions)||void 0===S?void 0:S.get("current_language"))||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});var M=function(e){var n=e.children,a=e.value,u=e.styles,d=e.shadowRoot,p=e.dispatchEvent,y=(0,t.useMemo)((function(){return(0,i.Df)()}),[]),f=function(){var e,n=(0,t.useState)(null===globalThis||void 0===globalThis||null===(e=globalThis.backendaioptions)||void 0===e?void 0:e.get("current_language")),a=(0,l.Z)(n,2),o=a[0],i=a[1],r=(0,c.$G)().i18n;return(0,t.useEffect)((function(){setTimeout((function(){return null===r||void 0===r?void 0:r.changeLanguage(o)}),0)}),[]),(0,t.useEffect)((function(){var e=function(e){var n,a;i(null===e||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.lang);var l=(null===e||void 0===e||null===(a=e.detail)||void 0===a?void 0:a.lang)||"en";null===r||void 0===r||r.changeLanguage(l)};return window.addEventListener("langChanged",e),function(){return window.removeEventListener("langChanged",e)}}),[r]),[o]}(),_=(0,l.Z)(f,1)[0],v=(0,h.x)(),k=(0,t.useMemo)((function(){return{value:a,dispatchEvent:p,moveTo:function(e){p("moveTo",{path:e})}}}),[a,p]);return(0,F.jsx)(F.Fragment,{children:b&&(0,F.jsx)(o.RelayEnvironmentProvider,{environment:b,children:(0,F.jsxs)(t.StrictMode,{children:[(0,F.jsxs)("style",{children:[u,"\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n"]}),(0,F.jsx)(s.QueryClientProvider,{client:K,children:(0,F.jsx)(x.Provider,{value:d,children:(0,F.jsx)(j.Provider,{value:k,children:(0,F.jsx)(r.ZP,{getPopupContainer:function(e){return null!==e&&void 0!==e&&e.parentNode?e.parentNode:d},locale:"ko"===_?g.Z:m.Z,theme:v,children:(0,F.jsx)(i.V9,{container:d,cache:y,children:(0,F.jsx)(t.Suspense,{fallback:"",children:(0,F.jsx)(P.VK,{children:n})})})})})})})]})})})}},9277:function(e,n,a){var l=a(1413),t=a(4925),o=a(4036),i=(a(4519),a(2556)),r=["direction","wrap","justify","align","gap","style","children"];n.Z=function(e){var n=e.direction,a=void 0===n?"row":n,s=e.wrap,u=void 0===s?"nowrap":s,c=e.justify,d=void 0===c?"flex-start":c,m=e.align,g=void 0===m?"center":m,p=e.gap,y=void 0===p?0:p,f=e.style,_=e.children,v=(0,t.Z)(e,r),k=o.Z.useToken().token,S=[d,g],b=null===S||void 0===S?void 0:S.map((function(e){var n;switch(e){case"start":n="flex-start";break;case"end":n="flex-end";break;case"between":n="space-between";break;case"around":n="space-around";break;default:n=e}return n})),h=(0,l.Z)({display:"flex",flexDirection:a,flexWrap:u,justifyContent:b[0],alignItems:b[1]},f);return(0,i.jsx)("div",(0,l.Z)((0,l.Z)({style:(0,l.Z)({alignItems:"stretch",backgroundColor:"transparent",border:"0 solid black",boxSizing:"border-box",display:"flex",flexBasis:"auto",flexDirection:"column",flexShrink:0,listStyle:"none",margin:0,minHeight:0,minWidth:0,padding:0,position:"relative",textDecoration:"none",gap:"string"===typeof y?k["padding"+y.toUpperCase()]:y},h)},v),{},{children:_}))}},453:function(e,n,a){a.r(n);var l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateProjectResourcePolicy",kind:"LinkedField",name:"create_project_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null},{alias:null,args:null,concreteType:"ProjectResourcePolicy",kind:"LinkedField",name:"resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_size",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProjectResourcePolicySettingModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProjectResourcePolicySettingModalCreateMutation",selections:n},params:{cacheID:"3a411e9a4782713efe26879d8c4c81dd",id:null,metadata:{},name:"ProjectResourcePolicySettingModalCreateMutation",operationKind:"mutation",text:"mutation ProjectResourcePolicySettingModalCreateMutation(\n  $name: String!\n  $props: CreateProjectResourcePolicyInput!\n) {\n  create_project_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n    resource_policy {\n      max_vfolder_size\n    }\n  }\n}\n"}}}();l.hash="b4aeb3a2a387d9722c44a8bde5e6c7cf",n.default=l},2480:function(e,n,a){a.r(n);var l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProjectResourcePolicySettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_size",storageKey:null}],type:"ProjectResourcePolicy",abstractKey:null,hash:"a11454523af2ce0351cf9b2bfe041744"};n.default=l},2980:function(e,n,a){a.r(n);var l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyProjectResourcePolicy",kind:"LinkedField",name:"modify_project_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProjectResourcePolicySettingModalModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProjectResourcePolicySettingModalModifyMutation",selections:n},params:{cacheID:"aedc4eab77206f7ab189ccd3f2d938b3",id:null,metadata:{},name:"ProjectResourcePolicySettingModalModifyMutation",operationKind:"mutation",text:"mutation ProjectResourcePolicySettingModalModifyMutation(\n  $name: String!\n  $props: ModifyProjectResourcePolicyInput!\n) {\n  modify_project_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="3cd62195489eba58dd9693f1fc9df8ff",n.default=l},3361:function(e,n,a){a.r(n);var l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"domain_name"}],n=[{alias:"projects",args:[{kind:"Variable",name:"domain_name",variableName:"domain_name"},{kind:"Literal",name:"is_active",value:!0}],concreteType:"Group",kind:"LinkedField",name:"groups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"resource_policy",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProjectSelectorQuery",selections:n,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProjectSelectorQuery",selections:n},params:{cacheID:"eecad68ff1a08d753ce22ff2c5136c26",id:null,metadata:{},name:"ProjectSelectorQuery",operationKind:"query",text:"query ProjectSelectorQuery(\n  $domain_name: String\n) {\n  projects: groups(domain_name: $domain_name, is_active: true) {\n    id\n    is_active\n    name\n    resource_policy\n  }\n}\n"}}}();l.hash="2845b31197571f750613f64207ded239",n.default=l},1674:function(e,n,a){a.r(n);var l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"QuotaScopeCardFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"quota_scope_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storage_host_name",storageKey:null},{alias:null,args:null,concreteType:"QuotaDetails",kind:"LinkedField",name:"details",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hard_limit_bytes",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"QuotaSettingModalFragment"}],type:"QuotaScope",abstractKey:null,hash:"a676a5c2cd9f97cceb59361b769c88e8"};n.default=l},6685:function(e,n,a){a.r(n);var l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"quota_scope_id"},{defaultValue:null,kind:"LocalArgument",name:"storage_host_name"}],n=[{alias:null,args:[{kind:"Variable",name:"quota_scope_id",variableName:"quota_scope_id"},{kind:"Variable",name:"storage_host_name",variableName:"storage_host_name"}],concreteType:"UnsetQuotaScope",kind:"LinkedField",name:"unset_quota_scope",plural:!1,selections:[{alias:null,args:null,concreteType:"QuotaScope",kind:"LinkedField",name:"quota_scope",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"quota_scope_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storage_host_name",storageKey:null},{alias:null,args:null,concreteType:"QuotaDetails",kind:"LinkedField",name:"details",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hard_limit_bytes",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"QuotaScopeCardUnsetMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"QuotaScopeCardUnsetMutation",selections:n},params:{cacheID:"338836966362b14e823520f40fa56a73",id:null,metadata:{},name:"QuotaScopeCardUnsetMutation",operationKind:"mutation",text:"mutation QuotaScopeCardUnsetMutation(\n  $quota_scope_id: String!\n  $storage_host_name: String!\n) {\n  unset_quota_scope(quota_scope_id: $quota_scope_id, storage_host_name: $storage_host_name) {\n    quota_scope {\n      id\n      quota_scope_id\n      storage_host_name\n      details {\n        hard_limit_bytes\n      }\n    }\n  }\n}\n"}}}();l.hash="272001cc642518fb66015dcc367b9f65",n.default=l},4133:function(e,n,a){a.r(n);var l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"QuotaSettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"quota_scope_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storage_host_name",storageKey:null},{alias:null,args:null,concreteType:"QuotaDetails",kind:"LinkedField",name:"details",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hard_limit_bytes",storageKey:null}],storageKey:null}],type:"QuotaScope",abstractKey:null,hash:"1c5ad8315a2d78cb376e7436dc6a8627"};n.default=l},5005:function(e,n,a){a.r(n);var l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"props"},n={defaultValue:null,kind:"LocalArgument",name:"quota_scope_id"},a={defaultValue:null,kind:"LocalArgument",name:"storage_host_name"},l=[{alias:null,args:[{kind:"Variable",name:"props",variableName:"props"},{kind:"Variable",name:"quota_scope_id",variableName:"quota_scope_id"},{kind:"Variable",name:"storage_host_name",variableName:"storage_host_name"}],concreteType:"SetQuotaScope",kind:"LinkedField",name:"set_quota_scope",plural:!1,selections:[{alias:null,args:null,concreteType:"QuotaScope",kind:"LinkedField",name:"quota_scope",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"quota_scope_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storage_host_name",storageKey:null},{alias:null,args:null,concreteType:"QuotaDetails",kind:"LinkedField",name:"details",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hard_limit_bytes",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,a],kind:"Fragment",metadata:null,name:"QuotaSettingModalSetMutation",selections:l,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,a,e],kind:"Operation",name:"QuotaSettingModalSetMutation",selections:l},params:{cacheID:"d337cab9be9523bfde2bfb7d6bed595b",id:null,metadata:{},name:"QuotaSettingModalSetMutation",operationKind:"mutation",text:"mutation QuotaSettingModalSetMutation(\n  $quota_scope_id: String!\n  $storage_host_name: String!\n  $props: QuotaScopeInput!\n) {\n  set_quota_scope(quota_scope_id: $quota_scope_id, storage_host_name: $storage_host_name, props: $props) {\n    quota_scope {\n      id\n      quota_scope_id\n      storage_host_name\n      details {\n        hard_limit_bytes\n      }\n    }\n  }\n}\n"}}}();l.hash="0e8509b3174920c1dd917ece91d41161",n.default=l},5478:function(e,n,a){a.r(n);var l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyProjectResourcePolicy",kind:"LinkedField",name:"modify_project_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourcePolicyCardModifyProjectMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourcePolicyCardModifyProjectMutation",selections:n},params:{cacheID:"187f01c6b4def3afeb9b1890160738ff",id:null,metadata:{},name:"ResourcePolicyCardModifyProjectMutation",operationKind:"mutation",text:"mutation ResourcePolicyCardModifyProjectMutation(\n  $name: String!\n  $props: ModifyProjectResourcePolicyInput!\n) {\n  modify_project_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="0aa47dc55b37b27a5c880470a2e98ceb",n.default=l},2272:function(e,n,a){a.r(n);var l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyUserResourcePolicy",kind:"LinkedField",name:"modify_user_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ResourcePolicyCardModifyUserMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ResourcePolicyCardModifyUserMutation",selections:n},params:{cacheID:"9359c1f4ce56dfae06cb5dce603bd527",id:null,metadata:{},name:"ResourcePolicyCardModifyUserMutation",operationKind:"mutation",text:"mutation ResourcePolicyCardModifyUserMutation(\n  $name: String!\n  $props: ModifyUserResourcePolicyInput!\n) {\n  modify_user_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="0ec87fb70626f0880b7db7124a879bbd",n.default=l},4068:function(e,n,a){a.r(n);var l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ResourcePolicyCard_project_resource_policy",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_size",storageKey:null},{args:null,kind:"FragmentSpread",name:"ProjectResourcePolicySettingModalFragment"}],type:"ProjectResourcePolicy",abstractKey:null,hash:"fff3d1eace997c19028ac10821a659a8"};n.default=l},7503:function(e,n,a){a.r(n);var l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ResourcePolicyCard_user_resource_policy",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_size",storageKey:null},{args:null,kind:"FragmentSpread",name:"UserResourcePolicySettingModalFragment"}],type:"UserResourcePolicy",abstractKey:null,hash:"449af16bb5d0d4ad3854575394e69e40"};n.default=l},8156:function(e,n,a){a.r(n);var l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StorageHostResourcePanelFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"backend",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"usage",storageKey:null}],type:"StorageVolume",abstractKey:null,hash:"30a1b4101eeb2fae45385780dbc0ddcc"};n.default=l},1047:function(e,n,a){a.r(n);var l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"project_resource_policy_name"},n={defaultValue:null,kind:"LocalArgument",name:"quota_scope_id"},a={defaultValue:null,kind:"LocalArgument",name:"skipProjectResourcePolicy"},l={defaultValue:null,kind:"LocalArgument",name:"skipQuotaScope"},t={defaultValue:null,kind:"LocalArgument",name:"skipUserResourcePolicy"},o={defaultValue:null,kind:"LocalArgument",name:"storage_host_name"},i={defaultValue:null,kind:"LocalArgument",name:"user_resource_policy_name"},r=[{kind:"Variable",name:"name",variableName:"project_resource_policy_name"}],s={alias:null,args:null,kind:"ScalarField",name:"max_vfolder_size",storageKey:null},u=[{kind:"Variable",name:"name",variableName:"user_resource_policy_name"}],c=[{kind:"Variable",name:"quota_scope_id",variableName:"quota_scope_id"},{kind:"Variable",name:"storage_host_name",variableName:"storage_host_name"}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},m=[s,d,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null}];return{fragment:{argumentDefinitions:[e,n,a,l,t,o,i],kind:"Fragment",metadata:null,name:"StorageHostSettingsPanelQuery",selections:[{condition:"skipProjectResourcePolicy",kind:"Condition",passingValue:!1,selections:[{alias:null,args:r,concreteType:"ProjectResourcePolicy",kind:"LinkedField",name:"project_resource_policy",plural:!1,selections:[s,{args:null,kind:"FragmentSpread",name:"ResourcePolicyCard_project_resource_policy"}],storageKey:null}]},{condition:"skipUserResourcePolicy",kind:"Condition",passingValue:!1,selections:[{alias:null,args:u,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"user_resource_policy",plural:!1,selections:[s,{args:null,kind:"FragmentSpread",name:"ResourcePolicyCard_user_resource_policy"}],storageKey:null}]},{condition:"skipQuotaScope",kind:"Condition",passingValue:!1,selections:[{alias:null,args:c,concreteType:"QuotaScope",kind:"LinkedField",name:"quota_scope",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"QuotaSettingModalFragment"},{args:null,kind:"FragmentSpread",name:"QuotaScopeCardFragment"}],storageKey:null}]}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,a,i,t,n,o,l],kind:"Operation",name:"StorageHostSettingsPanelQuery",selections:[{condition:"skipProjectResourcePolicy",kind:"Condition",passingValue:!1,selections:[{alias:null,args:r,concreteType:"ProjectResourcePolicy",kind:"LinkedField",name:"project_resource_policy",plural:!1,selections:m,storageKey:null}]},{condition:"skipUserResourcePolicy",kind:"Condition",passingValue:!1,selections:[{alias:null,args:u,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"user_resource_policy",plural:!1,selections:m,storageKey:null}]},{condition:"skipQuotaScope",kind:"Condition",passingValue:!1,selections:[{alias:null,args:c,concreteType:"QuotaScope",kind:"LinkedField",name:"quota_scope",plural:!1,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"quota_scope_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storage_host_name",storageKey:null},{alias:null,args:null,concreteType:"QuotaDetails",kind:"LinkedField",name:"details",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"hard_limit_bytes",storageKey:null}],storageKey:null}],storageKey:null}]}]},params:{cacheID:"aa1f27fc178c88b21219a7c716dd1d6e",id:null,metadata:{},name:"StorageHostSettingsPanelQuery",operationKind:"query",text:"query StorageHostSettingsPanelQuery(\n  $project_resource_policy_name: String!\n  $skipProjectResourcePolicy: Boolean!\n  $user_resource_policy_name: String\n  $skipUserResourcePolicy: Boolean!\n  $quota_scope_id: String!\n  $storage_host_name: String!\n  $skipQuotaScope: Boolean!\n) {\n  project_resource_policy(name: $project_resource_policy_name) @skip(if: $skipProjectResourcePolicy) {\n    max_vfolder_size\n    ...ResourcePolicyCard_project_resource_policy\n  }\n  user_resource_policy(name: $user_resource_policy_name) @skip(if: $skipUserResourcePolicy) {\n    max_vfolder_size\n    ...ResourcePolicyCard_user_resource_policy\n  }\n  quota_scope(storage_host_name: $storage_host_name, quota_scope_id: $quota_scope_id) @skip(if: $skipQuotaScope) {\n    ...QuotaSettingModalFragment\n    ...QuotaScopeCardFragment\n  }\n}\n\nfragment ProjectResourcePolicySettingModalFragment on ProjectResourcePolicy {\n  id\n  name\n  created_at\n  max_vfolder_size\n}\n\nfragment QuotaScopeCardFragment on QuotaScope {\n  id\n  quota_scope_id\n  storage_host_name\n  details {\n    hard_limit_bytes\n  }\n  ...QuotaSettingModalFragment\n}\n\nfragment QuotaSettingModalFragment on QuotaScope {\n  id\n  quota_scope_id\n  storage_host_name\n  details {\n    hard_limit_bytes\n  }\n}\n\nfragment ResourcePolicyCard_project_resource_policy on ProjectResourcePolicy {\n  id\n  name\n  max_vfolder_size\n  ...ProjectResourcePolicySettingModalFragment\n}\n\nfragment ResourcePolicyCard_user_resource_policy on UserResourcePolicy {\n  id\n  name\n  max_vfolder_size\n  ...UserResourcePolicySettingModalFragment\n}\n\nfragment UserResourcePolicySettingModalFragment on UserResourcePolicy {\n  id\n  name\n  created_at\n  max_vfolder_size\n}\n"}}}();l.hash="48491998ccff178a7d2b714b05f49115",n.default=l},6678:function(e,n,a){a.r(n);var l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StorageHostSettingsPanel_storageVolumeFrgmt",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null}],type:"StorageVolume",abstractKey:null,hash:"2f9e5e6060806e6f9265e5cbbd325afe"};n.default=l},7002:function(e,n,a){a.r(n);var l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateUserResourcePolicy",kind:"LinkedField",name:"create_user_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null},{alias:null,args:null,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_size",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserResourcePolicySettingModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserResourcePolicySettingModalCreateMutation",selections:n},params:{cacheID:"4a3be550849e48eea509656b8e21cefd",id:null,metadata:{},name:"UserResourcePolicySettingModalCreateMutation",operationKind:"mutation",text:"mutation UserResourcePolicySettingModalCreateMutation(\n  $name: String!\n  $props: CreateUserResourcePolicyInput!\n) {\n  create_user_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n    resource_policy {\n      max_vfolder_size\n    }\n  }\n}\n"}}}();l.hash="72d37eb1ea7d8204010443f404c627eb",n.default=l},9328:function(e,n,a){a.r(n);var l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserResourcePolicySettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_size",storageKey:null}],type:"UserResourcePolicy",abstractKey:null,hash:"00ce66ded6bf021a4faadaa78814ccf4"};n.default=l},7827:function(e,n,a){a.r(n);var l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyUserResourcePolicy",kind:"LinkedField",name:"modify_user_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserResourcePolicySettingModalModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserResourcePolicySettingModalModifyMutation",selections:n},params:{cacheID:"f33ed379f4871e357183803b340a938a",id:null,metadata:{},name:"UserResourcePolicySettingModalModifyMutation",operationKind:"mutation",text:"mutation UserResourcePolicySettingModalModifyMutation(\n  $name: String!\n  $props: ModifyUserResourcePolicyInput!\n) {\n  modify_user_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();l.hash="d50cbcfb63bfd30da81fea8968bb6436",n.default=l},4880:function(e,n,a){a.r(n);var l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"filter"},n={defaultValue:null,kind:"LocalArgument",name:"limit"},a={defaultValue:null,kind:"LocalArgument",name:"offset"},l=[{alias:null,args:[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Literal",name:"is_active",value:!0},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"}],concreteType:"UserList",kind:"LinkedField",name:"user_list",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_active",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"resource_policy",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n,a],kind:"Fragment",metadata:null,name:"UserSelectorQuery",selections:l,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,a,e],kind:"Operation",name:"UserSelectorQuery",selections:l},params:{cacheID:"09dbd9bf5dab92b023be3c3c1401a57e",id:null,metadata:{},name:"UserSelectorQuery",operationKind:"query",text:"query UserSelectorQuery(\n  $limit: Int!\n  $offset: Int!\n  $filter: String\n) {\n  user_list(limit: $limit, offset: $offset, filter: $filter, is_active: true) {\n    items {\n      id\n      is_active\n      username\n      resource_policy\n    }\n  }\n}\n"}}}();l.hash="ba16f5707f025478e8739eed645dc2f9",n.default=l},3255:function(e,n,a){a.d(n,{Hz:function(){return r},Lc:function(){return o},Uz:function(){return s},VQ:function(){return u},We:function(){return t},en:function(){return i}});var l=a(2556),t=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/(<br\s*\/?>|\n)/;return e.split(n).map((function(e,a){return e.match(n)?(0,l.jsx)("br",{},a):e}))},o=function(e){var n=e.method,a=e.url,l=e.body,t=void 0===l?null:l,o=e.client,i=null===o||void 0===o?void 0:o.newSignedRequest(n,a,t,null);return null===o||void 0===o?void 0:o._wrapWithPromise(i)},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var a=Math.pow(10,3);n=n<0?0:n;var l=Math.floor(Math.log(Math.round(e))/Math.log(a));return l=l<0?0:l,parseFloat((e/Math.pow(a,l)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB"][l]},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Math.pow(10,9);return Math.round(n*e)},s=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return null===e||void 0===e?"Unlimited":e?(e/Math.pow(10,9)).toFixed(n):e},u=function(e,n){return""===n||void 0===n?"":n.startsWith("".concat(e,":"))?n:"".concat(e,":").concat(n)}},7760:function(e,n,a){a.d(n,{Dj:function(){return u},Kr:function(){return i},M:function(){return s},qh:function(){return r}});var l=a(9439),t=a(4519),o=a(7112),i=function(e){var n=(0,t.useState)(e||(new Date).toISOString()),a=(0,l.Z)(n,2),o=a[0],i=a[1];return[o,function(e){i(e||(new Date).toISOString())}]},r=function(){var e=u(),n=(0,t.useState)({name:e.current_group,id:e.groupIds[e.current_group]}),a=(0,l.Z)(n,2),o=a[0],i=a[1];return(0,t.useEffect)((function(){var n=function(n){var a=n.detail;i({name:a,id:e.groupIds[a]})};return document.addEventListener("backend-ai-group-changed",n),function(){document.removeEventListener("backend-ai-group-changed",n)}})),o},s=function(e){var n=e.api_endpoint;return(0,t.useMemo)((function(){var e=new globalThis.BackendAIClientConfig("","",n,"SESSION");return new globalThis.BackendAIClient(e,"Backend.AI Console.")}),[n])},u=function(){return(0,o.useQuery)({queryKey:"backendai-client-for-suspense",queryFn:function(){return new Promise((function(e){if("undefined"!==typeof globalThis.backendaiclient&&null!==globalThis.backendaiclient&&!1!==globalThis.backendaiclient.ready)return e(globalThis.backendaiclient);document.addEventListener("backend-ai-connected",(function n(){e(globalThis.backendaiclient),document.removeEventListener("backend-ai-connected",n)}))}))},retry:!1,suspense:!0}).data}},7620:function(e,n,a){a.r(n),a.d(n,{default:function(){return Fe}});var l,t,o,i,r,s,u,c,d,m,g,p,y,f,_,v,k,S,b,h,P=a(4519),F=a(6980),j=a(4036),x=a(284),Z=a(3656),R=a(9277),K=a(1748),M=a(4479),C=a(5444),q=a(867),V=a(3255),L=a(1502),w=a(2556),T=M.Z.Meta,Q=function(e){var n,t,o=e.storageVolumeFrgmt,i=(0,K.$G)().t,r=j.Z.useToken().token,s=((0,L.useWebComponentInfo)().moveTo,(0,F.useFragment)(void 0!==l?l:l=a(8156),o)),u=JSON.parse((null===s||void 0===s?void 0:s.usage)||"{}"),c=null===u||void 0===u?void 0:u.used_bytes,d=null===u||void 0===u?void 0:u.capacity_bytes,m={used_bytes:c,capacity_bytes:d,percent:Number((100*(d>0?c/d:0)).toFixed(1))};return(0,w.jsx)(R.Z,{direction:"column",align:"stretch",children:(0,w.jsx)(M.Z,{title:i("storageHost.Resource"),children:(0,w.jsxs)(R.Z,{children:[(0,w.jsxs)(M.Z,{bordered:!1,children:[(0,w.jsx)(T,{title:i("storageHost.Usage")}),(0,w.jsxs)(R.Z,{style:{margin:r.marginSM,gap:r.margin},children:[m.percent<100?(0,w.jsx)(C.Z,{type:"circle",size:120,strokeWidth:15,percent:null===m||void 0===m?void 0:m.percent,strokeColor:(t=null===m||void 0===m?void 0:m.percent,t<70?"rgba(58, 178, 97, 1)":t<90?"rgb(223, 179, 23)":"#ef5350")}):(0,w.jsx)(C.Z,{type:"circle",size:120,strokeWidth:15,percent:null===m||void 0===m?void 0:m.percent,status:"exception"}),(0,w.jsxs)(q.Z,{column:1,style:{marginLeft:20},children:[(0,w.jsx)(q.Z.Item,{label:i("storageHost.Total"),children:(0,V.en)(null===m||void 0===m?void 0:m.used_bytes)}),(0,w.jsx)(q.Z.Item,{label:i("storageHost.Used"),children:(0,V.en)(null===m||void 0===m?void 0:m.capacity_bytes)})]})]})]}),(0,w.jsxs)(M.Z,{bordered:!1,children:[(0,w.jsx)(T,{title:i("storageHost.Detail")}),(0,w.jsxs)(q.Z,{column:1,style:{marginTop:20},children:[(0,w.jsx)(q.Z.Item,{label:i("agent.Endpoint"),children:null===s||void 0===s?void 0:s.path}),(0,w.jsx)(q.Z.Item,{label:i("agent.BackendType"),children:null===s||void 0===s?void 0:s.backend}),(0,w.jsx)(q.Z.Item,{label:i("agent.Capabilities"),children:null===s||void 0===s||null===(n=s.capabilities)||void 0===n?void 0:n.join(",")})]})]})]})})})},U=a(9439),$=a(7171),D=a(4473),z=a(1413),I=a(4925),H=a(2048),E=a.n(H),A=a(1215),N=a(7760),O=["onSelectProject"],B=function(e){var n=e.onSelectProject,l=(0,I.Z)(e,O),o=(0,K.$G)().t,i=(0,N.qh)(),r=(0,F.useLazyLoadQuery)(void 0!==t?t:t=a(3361),{domain_name:null===i||void 0===i?void 0:i.name},{fetchPolicy:"store-and-network"}).projects;return(0,w.jsx)(A.Z,(0,z.Z)((0,z.Z)({onChange:function(e,a){null===n||void 0===n||n(a)},placeholder:o("storageHost.quotaSettings.SelectProject")},l),{},{children:E().map(r,(function(e){return(0,w.jsx)(A.Z.Option,{projectId:null===e||void 0===e?void 0:e.id,projectResourcePolicy:null===e||void 0===e?void 0:e.resource_policy,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)}))}))},G=["onSelectUser","limit","currentPage","pageSize"],W=function(e){var n=e.onSelectUser,l=(e.limit,e.currentPage),t=void 0===l?1:l,i=e.pageSize,r=void 0===i?50:i,s=(0,I.Z)(e,G),u=(0,K.$G)().t,c=(0,P.useState)(""),d=(0,U.Z)(c,2),m=d[0],g=d[1],p=(0,F.useLazyLoadQuery)(void 0!==o?o:o=a(4880),{limit:r,offset:(t-1)*r,filter:0===(null===m||void 0===m?void 0:m.length)?null:'username ilike "%'+m+'%"'},{fetchPolicy:"store-and-network"}).user_list;return(0,w.jsx)(A.Z,(0,z.Z)((0,z.Z)({filterOption:!1,onSearch:function(e){(0,P.startTransition)((function(){g(e)}))},onChange:function(e,a){null===n||void 0===n||n(a)},showSearch:!0,placeholder:u("storageHost.quotaSettings.SelectUser")},s),{},{children:E().map(null===p||void 0===p?void 0:p.items,(function(e){return(0,w.jsx)(A.Z.Option,{userId:null===e||void 0===e?void 0:e.id,userResourcePolicy:null===e||void 0===e?void 0:e.resource_policy,children:null===e||void 0===e?void 0:e.username},null===e||void 0===e?void 0:e.id)}))}))},Y=a(3842),J=a(4787),X=a(4894),ee=a(4954),ne=a(6814),ae=a(372),le=a(8841),te=a(4039),oe=a(2094),ie=a(8818),re=["projectResourcePolicyFrgmt","onRequestClose"],se=function(e){var n=e.projectResourcePolicyFrgmt,l=e.onRequestClose,t=(0,I.Z)(e,re),o=(0,K.$G)().t,u=te.Z.useForm(),c=(0,U.Z)(u,1)[0],d=(0,F.useFragment)(void 0!==i?i:i=a(2480),n),m=(0,F.useMutation)(void 0!==r?r:r=a(453)),g=(0,U.Z)(m,2),p=(g[0],g[1],(0,F.useMutation)(void 0!==s?s:s=a(2980))),y=(0,U.Z)(p,2),f=y[0];y[1];return(0,w.jsxs)(Y.Z,(0,z.Z)((0,z.Z)({},t),{},{style:{zIndex:1e4},destroyOnClose:!0,title:o("storageHost.ResourcePolicySettings"),onOk:function(e){c.validateFields().then((function(e){null!==d&&void 0!==d&&d.name&&null!==d&&void 0!==d&&d.max_vfolder_size&&f({variables:{name:null===d||void 0===d?void 0:d.name,props:{max_vfolder_size:(0,V.Hz)(null===e||void 0===e?void 0:e.max_vfolder_size)}},onCompleted:function(e){var n,a;null!==e&&void 0!==e&&null!==(n=e.modify_project_resource_policy)&&void 0!==n&&n.ok?J.ZP.success(o("storageHost.ResourcePolicySuccessfullyUpdated")):J.ZP.error(null===e||void 0===e||null===(a=e.modify_project_resource_policy)||void 0===a?void 0:a.msg);l()},onError:function(e){console.log(e),J.ZP.error(e.message)}})}))},children:[(0,w.jsx)(oe.Z,{message:o("storageHost.BeCarefulToSetProjectResourcePolicy"),type:"warning",showIcon:!0,style:{marginTop:20,marginBottom:25}}),(0,w.jsx)(te.Z,{form:c,preserve:!1,labelCol:{span:6},wrapperCol:{span:20},validateTrigger:["onChange","onBlur"],initialValues:{id:null===d||void 0===d?void 0:d.id,name:null===d||void 0===d?void 0:d.name,created_at:null===d||void 0===d?void 0:d.created_at,max_vfolder_size:-1===(null===d||void 0===d?void 0:d.max_vfolder_size)?null:(0,V.Uz)(null===d||void 0===d?void 0:d.max_vfolder_size)},children:(0,w.jsx)(te.Z.Item,{name:"max_vfolder_size",label:o("storageHost.MaxFolderSize"),rules:[{pattern:/^\d+(\.\d+)?$/,message:o("storageHost.quotaSettings.AllowNumberAndDot")||"Allows numbers and .(dot) only"}],children:(0,w.jsx)(ie.Z,{addonAfter:"GB",type:"number",step:.25})})})]}))},ue=["userResourcePolicyFrgmt","onRequestClose"],ce=function(e){var n=e.userResourcePolicyFrgmt,l=e.onRequestClose,t=(0,I.Z)(e,ue),o=(0,K.$G)().t,i=te.Z.useForm(),r=(0,U.Z)(i,1)[0],s=(0,F.useFragment)(void 0!==u?u:u=a(9328),n),m=(0,F.useMutation)(void 0!==c?c:c=a(7002)),g=(0,U.Z)(m,2),p=(g[0],g[1],(0,F.useMutation)(void 0!==d?d:d=a(7827))),y=(0,U.Z)(p,2),f=y[0];y[1];return(0,w.jsxs)(Y.Z,(0,z.Z)((0,z.Z)({},t),{},{style:{zIndex:1e4},destroyOnClose:!0,title:o("storageHost.ResourcePolicySettings"),onOk:function(e){r.validateFields().then((function(e){null!==s&&void 0!==s&&s.name&&f({variables:{name:null===s||void 0===s?void 0:s.name,props:{max_vfolder_size:(0,V.Hz)(null===e||void 0===e?void 0:e.max_vfolder_size)}},onCompleted:function(e){var n,a;null!==(n=e.modify_user_resource_policy)&&void 0!==n&&n.ok?J.ZP.success(o("storageHost.ResourcePolicySuccessfullyUpdated")):J.ZP.error(null===e||void 0===e||null===(a=e.modify_user_resource_policy)||void 0===a?void 0:a.msg);l()},onError:function(e){console.log(e),J.ZP.error(null===e||void 0===e?void 0:e.message)}})}))},children:[(0,w.jsx)(oe.Z,{message:o("storageHost.BeCarefulToSetUserResourcePolicy"),type:"warning",showIcon:!0,style:{marginTop:20,marginBottom:25}}),(0,w.jsx)(te.Z,{form:r,preserve:!1,labelCol:{span:6},wrapperCol:{span:20},validateTrigger:["onChange","onBlur"],initialValues:{id:null===s||void 0===s?void 0:s.id,name:null===s||void 0===s?void 0:s.name,created_at:null===s||void 0===s?void 0:s.created_at,max_vfolder_size:-1===(null===s||void 0===s?void 0:s.max_vfolder_size)?null:(0,V.Uz)(null===s||void 0===s?void 0:s.max_vfolder_size)},children:(0,w.jsx)(te.Z.Item,{name:"max_vfolder_size",label:o("storageHost.MaxFolderSize"),rules:[{pattern:/^\d+(\.\d+)?$/,message:o("storageHost.quotaSettings.AllowNumberAndDot")||"Allows numbers and .(dot) only"}],children:(0,w.jsx)(ie.Z,{addonAfter:"GB",type:"number",step:.25})})})]}))},de=a(374),me=["projectResourcePolicyFrgmt","userResourcePolicyFrgmt","onChangePolicy"],ge=function(e){var n=e.projectResourcePolicyFrgmt,l=e.userResourcePolicyFrgmt,t=e.onChangePolicy,o=((0,I.Z)(e,me),(0,K.$G)().t),i=(0,de.Z)(!1),r=(0,U.Z)(i,2),s=r[0],u=r[1].toggle,c=(0,de.Z)(!1),d=(0,U.Z)(c,2),f=d[0],_=d[1].toggle,v=(0,F.useFragment)(void 0!==m?m:m=a(4068),n),k=(0,F.useFragment)(void 0!==g?g:g=a(7503),l),S=(0,F.useMutation)(void 0!==p?p:p=a(5478)),b=(0,U.Z)(S,1)[0],h=(0,F.useMutation)(void 0!==y?y:y=a(2272)),P=(0,U.Z)(h,1)[0];return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(M.Z,{extra:v||k?(0,w.jsx)(X.Z,{placement:"bottomRight",menu:{items:[{key:"edit",label:o("button.Edit"),icon:(0,w.jsx)(ne.Z,{}),onClick:function(){v?u():_()}},{key:"unset",label:o("button.Unset"),icon:(0,w.jsx)(ae.Z,{}),danger:!0,onClick:function(){Y.Z.confirm({title:o("storageHost.UnsetResourcePolicy"),content:o("storageHost.DoYouWantToUseDefaultValue"),icon:(0,w.jsx)(ee.Z,{}),okText:o("button.Confirm"),onOk:function(){v?b({variables:{name:v.name,props:{max_vfolder_size:-1}},onCompleted:function(e){var n,a;null!==e&&void 0!==e&&null!==(n=e.modify_project_resource_policy)&&void 0!==n&&n.ok?(t(),J.ZP.success(o("storageHost.ResourcePolicySuccessfullyUpdated"))):J.ZP.error(null===e||void 0===e||null===(a=e.modify_project_resource_policy)||void 0===a?void 0:a.msg)},onError:function(e){J.ZP.error(null===e||void 0===e?void 0:e.message)}}):k?P({variables:{name:k.name,props:{max_vfolder_size:-1}},onCompleted:function(e){var n,a;null!==e&&void 0!==e&&null!==(n=e.modify_user_resource_policy)&&void 0!==n&&n.ok?(t(),J.ZP.success(o("storageHost.ResourcePolicySuccessfullyUpdated"))):J.ZP.error(null===e||void 0===e||null===(a=e.modify_user_resource_policy)||void 0===a?void 0:a.msg)},onError:function(e){J.ZP.error(null===e||void 0===e?void 0:e.message)}}):J.ZP.error(o("storageHost.SelectProjectOrUserFirst"))}})}}]},children:(0,w.jsx)(le.Z,{})}):null,title:o("storageHost.ResourcePolicy"),bordered:!1,headStyle:{borderBottom:"none"},style:{marginBottom:10},children:(0,w.jsx)(q.Z,{children:v||k?(0,w.jsx)(q.Z.Item,{label:o("storageHost.MaxFolderSize"),children:v?v&&-1!==(null===v||void 0===v?void 0:v.max_vfolder_size)?(0,V.en)(null===v||void 0===v?void 0:v.max_vfolder_size):o("resourcePolicy.Unlimited"):k&&-1!==(null===k||void 0===k?void 0:k.max_vfolder_size)?(0,V.en)(null===k||void 0===k?void 0:k.max_vfolder_size):o("resourcePolicy.Unlimited")}):(0,w.jsx)(q.Z.Item,{children:(0,w.jsx)(D.Z,{style:{width:"100%"},image:D.Z.PRESENTED_IMAGE_SIMPLE,description:(0,w.jsx)("div",{children:o("storageHost.quotaSettings.SelectFirst")})})})})}),(0,w.jsx)(se,{open:s,destroyOnClose:!0,onCancel:u,onOk:u,onRequestClose:function(){t(),u()},projectResourcePolicyFrgmt:v||null}),(0,w.jsx)(ce,{open:f,destroyOnClose:!0,onCancel:_,onOk:_,userResourcePolicyFrgmt:k||null,onRequestClose:function(){t(),_()}})]})},pe=a(2513),ye=a(6043),fe=a(6540),_e=a(558),ve=a(4176),ke=["quotaScopeFrgmt","showAddButtonWhenEmpty","onClickEdit"],Se=function(e){var n=e.quotaScopeFrgmt,l=e.showAddButtonWhenEmpty,t=e.onClickEdit,o=((0,I.Z)(e,ke),(0,K.$G)().t),i=(0,F.useFragment)(void 0!==f?f:f=a(1674),n),r=(0,F.useMutation)(void 0!==_?_:_=a(6685)),s=(0,U.Z)(r,2),u=s[0],c=s[1],d=(0,w.jsx)(D.Z,{style:{width:"100%"},image:D.Z.PRESENTED_IMAGE_SIMPLE,description:(0,w.jsx)("div",{children:o("storageHost.quotaSettings.SelectFirst")})}),m=(0,w.jsx)(D.Z,{style:{width:"100%"},image:D.Z.PRESENTED_IMAGE_SIMPLE,description:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{style:{margin:10},children:o("storageHost.quotaSettings.ClickSettingButton")}),(0,w.jsx)(pe.ZP,{icon:(0,w.jsx)(_e.Z,{}),onClick:function(){return t&&t()},children:o("storageHost.quotaSettings.AddQuotaConfigs")})]})});return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(M.Z,{bordered:!1,children:(0,w.jsx)(ye.Z,{columns:[{title:"ID",dataIndex:"quota_scope_id",key:"quota_scope_id",render:function(e){return(0,w.jsx)("code",{children:e})}},{title:o("storageHost.HardLimit")+" (GB)",dataIndex:["details","hard_limit_bytes"],key:"hard_limit_bytes",render:function(e){return(0,w.jsx)(w.Fragment,{children:(0,V.Uz)(e)})}},{title:o("general.Control"),key:"control",render:function(){return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(pe.ZP,{type:"text",icon:(0,w.jsx)(ne.Z,{}),onClick:function(){return t&&t()},children:o("button.Edit")}),(0,w.jsx)(fe.Z,{title:o("storageHost.quotaSettings.UnsetCustomSettings"),description:o("storageHost.quotaSettings.ConfirmUnsetCustomQuota"),placement:"bottom",onConfirm:function(){i&&u({variables:{quota_scope_id:i.quota_scope_id,storage_host_name:i.storage_host_name},onCompleted:function(){J.ZP.success(o("storageHost.quotaSettings.QuotaScopeSuccessfullyUpdated"))},onError:function(e){J.ZP.error(null===e||void 0===e?void 0:e.message)}})},children:(0,w.jsx)(pe.ZP,{loading:c,danger:!0,icon:(0,w.jsx)(ve.Z,{}),children:o("button.Unset")})})]})}}],dataSource:i?[i]:[],locale:{emptyText:l?m:d},pagination:!1})})})},be=["quotaScopeFrgmt","resourcePolicyMaxVFolderSize","onRequestClose"],he=function(e){var n,l=e.quotaScopeFrgmt,t=void 0===l?null:l,o=(e.resourcePolicyMaxVFolderSize,e.onRequestClose),i=(0,I.Z)(e,be),r=(0,K.$G)().t,s=te.Z.useForm(),u=(0,U.Z)(s,1)[0],c=(0,F.useFragment)(void 0!==v?v:v=a(4133),t),d=(0,F.useMutation)(void 0!==k?k:k=a(5005)),m=(0,U.Z)(d,2),g=m[0],p=m[1];return(0,w.jsx)(Y.Z,(0,z.Z)((0,z.Z)({},i),{},{style:{zIndex:1e4},destroyOnClose:!0,onOk:function(e){u.validateFields().then((function(e){g({variables:{quota_scope_id:(null===c||void 0===c?void 0:c.quota_scope_id)||"",storage_host_name:(null===c||void 0===c?void 0:c.storage_host_name)||"",props:{hard_limit_bytes:(0,V.Hz)(null===e||void 0===e?void 0:e.hard_limit_bytes)}},onCompleted:function(e){var n,a;null!==e&&void 0!==e&&null!==(n=e.set_quota_scope)&&void 0!==n&&null!==(a=n.quota_scope)&&void 0!==a&&a.id?J.ZP.success(r("storageHost.quotaSettings.QuotaScopeSuccessfullyUpdated")):J.ZP.error(r("dialog.ErrorOccurred")),o()},onError:function(e){console.log(e),J.ZP.error(null===e||void 0===e?void 0:e.message)}})}))},confirmLoading:p,onCancel:o,title:r("storageHost.quotaSettings.QuotaSettings"),children:(0,w.jsx)(te.Z,{form:u,preserve:!1,labelCol:{span:6},wrapperCol:{span:20},validateTrigger:["onChange","onBlur"],style:{marginBottom:40,marginTop:20},children:(0,w.jsx)(te.Z.Item,{name:"hard_limit_bytes",label:r("storageHost.HardLimit"),initialValue:(0,V.Uz)(null===c||void 0===c||null===(n=c.details)||void 0===n?void 0:n.hard_limit_bytes),rules:[{pattern:/^\d+(\.\d+)?$/,message:r("storageHost.quotaSettings.AllowNumberAndDot")||"Allows numbers and .(dot) only"}],children:(0,w.jsx)(ie.Z,{addonAfter:"GB",type:"number",step:.25,style:{width:"70%"}})})})}))},Pe=function(e){var n,l,t=e.storageVolumeFrgmt,o=(0,K.$G)().t,i=(j.Z.useToken().token,(0,F.useFragment)(void 0!==S?S:S=a(6678),t)),r=null!==(n=null===i||void 0===i||null===(l=i.capabilities)||void 0===l?void 0:l.includes("quota"))&&void 0!==n&&n,s=(0,P.useTransition)(),u=(0,U.Z)(s,2),c=u[0],d=u[1],m=(0,P.useState)("user"),g=(0,U.Z)(m,2),p=g[0],y=g[1],f=(0,P.useState)(),_=(0,U.Z)(f,2),v=_[0],k=_[1],h=(0,P.useState)(),x=(0,U.Z)(h,2),Z=x[0],C=x[1],q=(0,P.useState)(),L=(0,U.Z)(q,2),T=L[0],Q=L[1],z=(0,P.useState)(),I=(0,U.Z)(z,2),H=I[0],E=I[1],A=(0,V.VQ)(p,("project"===p?v:T)||""),O=(0,de.Z)(!1),G=(0,U.Z)(O,2),Y=G[0],J=G[1].toggle,X=(0,N.Kr)("default"),ee=(0,U.Z)(X,2),ne=ee[0],ae=ee[1],le=(0,F.useLazyLoadQuery)(void 0!==b?b:b=a(1047),{project_resource_policy_name:Z||"",skipProjectResourcePolicy:""===Z||void 0===Z,user_resource_policy_name:H||"",skipUserResourcePolicy:""===H||void 0===H,quota_scope_id:A,skipQuotaScope:void 0===A||""===A,storage_host_name:(null===i||void 0===i?void 0:i.id)||""},{fetchPolicy:"network-only",fetchKey:ne}),te=le.project_resource_policy,oe=le.user_resource_policy,ie=le.quota_scope;return(0,w.jsx)(R.Z,{direction:"column",align:"stretch",children:(0,w.jsx)(M.Z,{title:o("storageHost.QuotaSettings"),tabList:[{key:"user",tab:o("storageHost.ForUser")},{key:"project",tab:o("storageHost.ForProject")}],activeTabKey:p,onTabChange:function(e){d((function(){y(e)}))},children:r?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(R.Z,{justify:"between",children:"project"===p?(0,w.jsx)(B,{style:{width:"30vw",marginBottom:10},value:v,onSelectProject:function(e){d((function(){k(null===e||void 0===e?void 0:e.projectId),C(null===e||void 0===e?void 0:e.projectResourcePolicy)}))}}):(0,w.jsx)(W,{style:{width:"30vw",marginBottom:10},value:T,onSelectUser:function(e){d((function(){Q(null===e||void 0===e?void 0:e.userId),E(null===e||void 0===e?void 0:e.userResourcePolicy)}))}})}),(0,w.jsxs)($.Z,{spinning:c,children:[(0,w.jsx)(ge,{projectResourcePolicyFrgmt:"project"===p&&te||null,userResourcePolicyFrgmt:"user"===p&&oe||null,onChangePolicy:function(){d((function(){ae()}))}}),(0,w.jsx)(Se,{quotaScopeFrgmt:ie||null,onClickEdit:function(){J()},showAddButtonWhenEmpty:"project"===p&&!!v||"user"===p&&!!T})]}),(0,w.jsx)(he,{open:Y,quotaScopeFrgmt:ie||null,resourcePolicyMaxVFolderSize:"project"===p?null===te||void 0===te?void 0:te.max_vfolder_size:null===oe||void 0===oe?void 0:oe.max_vfolder_size,onRequestClose:function(){J()}})]}):(0,w.jsx)(D.Z,{image:D.Z.PRESENTED_IMAGE_SIMPLE,description:o("storageHost.QuotaDoesNotSupported")})})})},Fe=function(e){var n=e.storageHostId,l=j.Z.useToken().token;(0,N.Dj)();var t=(0,L.useWebComponentInfo)().moveTo,o=(0,F.useLazyLoadQuery)(void 0!==h?h:h=a(2913),{id:n||""}).storage_volume;return(0,w.jsxs)(R.Z,{direction:"column",align:"stretch",style:{margin:l.marginSM,gap:l.margin},children:[(0,w.jsx)(x.Z,{items:[{title:"Resources",onClick:function(e){e.preventDefault(),t("/agent")},href:"/agent"},{title:"Storage setting"}]}),(0,w.jsx)(Z.Z.Title,{level:3,style:{margin:0},children:n||""}),(0,w.jsx)(Q,{storageVolumeFrgmt:o||null}),(0,w.jsx)(P.Suspense,{fallback:(0,w.jsx)("div",{children:"loading..."}),children:(0,w.jsx)(Pe,{storageVolumeFrgmt:o||null})})]})}},2913:function(e,n,a){a.r(n);var l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],n=[{kind:"Variable",name:"id",variableName:"id"}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"StorageHostSettingPageQuery",selections:[{alias:null,args:n,concreteType:"StorageVolume",kind:"LinkedField",name:"storage_volume",plural:!1,selections:[a,l,{args:null,kind:"FragmentSpread",name:"StorageHostResourcePanelFragment"},{args:null,kind:"FragmentSpread",name:"StorageHostSettingsPanel_storageVolumeFrgmt"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"StorageHostSettingPageQuery",selections:[{alias:null,args:n,concreteType:"StorageVolume",kind:"LinkedField",name:"storage_volume",plural:!1,selections:[a,l,{alias:null,args:null,kind:"ScalarField",name:"backend",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"usage",storageKey:null}],storageKey:null}]},params:{cacheID:"821175f86743d9d81be2a55aca371919",id:null,metadata:{},name:"StorageHostSettingPageQuery",operationKind:"query",text:"query StorageHostSettingPageQuery(\n  $id: String\n) {\n  storage_volume(id: $id) {\n    id\n    capabilities\n    ...StorageHostResourcePanelFragment\n    ...StorageHostSettingsPanel_storageVolumeFrgmt\n  }\n}\n\nfragment StorageHostResourcePanelFragment on StorageVolume {\n  id\n  backend\n  capabilities\n  path\n  usage\n}\n\nfragment StorageHostSettingsPanel_storageVolumeFrgmt on StorageVolume {\n  id\n  capabilities\n}\n"}}}();l.hash="f6e77057e83b0449ef99e8918e794b24",n.default=l}}]);
//# sourceMappingURL=620.09a8fa3a.chunk.js.map