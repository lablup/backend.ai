"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[8408],{91069:(e,t,s)=>{s.d(t,{A:()=>P});var i=s(68144),n=s(28599),l=s(72412),r=s(40546),a=s(2600),o=s(6975),c=s(91313),u=s(8348),d=s.n(u),g=s(84100),p=s(7960);const h=(0,o.rU)((e=>{let{css:t}=e;return{baiSettingItemCheckbox:t`
    .ant-checkbox {
      align-self: flex-start;
      margin-top: 0.2rem;
    }
  `}})),m=e=>{let{"data-testid":t,type:s,title:o,description:u,children:g,defaultValue:m,value:x,selectProps:y,onChange:v,disabled:b}=e;const{token:_}=i.A.useToken(),{styles:j}=h();return(0,p.jsxs)(c.OO,{"data-testid":t,direction:"column",align:"start",gap:"xxs",children:[(0,p.jsxs)(c.OO,{direction:"row",gap:"xxs",children:[(0,p.jsx)(n.A.Text,{strong:!0,style:{fontSize:_.fontSize},children:o}),!b&&void 0!==x&&null!==x&&m!==x&&(0,p.jsx)(l.A,{dot:!0,status:"warning"})]}),"custom"===s&&(0,p.jsxs)(p.Fragment,{children:[u,(0,p.jsx)("div",{style:{marginTop:_.marginXS},children:g})]}),"checkbox"===s&&(0,p.jsx)(r.A,{checked:x,onChange:v,disabled:b,className:j.baiSettingItemCheckbox,children:(0,p.jsx)(n.A.Text,{type:b?"secondary":void 0,children:u})}),"select"===s&&(0,p.jsxs)(p.Fragment,{children:[u,(0,p.jsx)(a.A,{value:x,popupMatchSelectWidth:!1,onChange:v,disabled:b,style:{marginTop:_.marginXS,...null===y||void 0===y?void 0:y.style},...d().omit(y,["style"])})]})]})};var x=s(84831),y=s(25300),v=s(61964),b=s(36830),_=s(38069),j=s(46038),f=s(59562),k=s(61649),S=s(98840),A=s(81291);const w=(0,o.rU)((e=>{let{css:t}=e;return{TabStyles:t`
    .ant-tabs-tab-active {
      font-weight: var(--token-fontWeightSuperStrong, 700);
    }
    .ant-typography-secondary {
      font-weight: normal !important;
    }
  `}})),C=e=>{let{title:t,count:s}=e;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(n.A.Text,{children:t}),(0,p.jsx)(n.A.Text,{type:"secondary",children:` (${s})`})]})},T=e=>{let{group:t,hideEmpty:s,...l}=e;const{token:r}=i.A.useToken();return(!s||0!==t.settingItems.length)&&(0,p.jsxs)(c.OO,{direction:"column",align:"stretch",style:{marginBottom:r.marginMD},...l,children:[(0,p.jsxs)(c.OO,{direction:"column",align:"stretch",style:{zIndex:1,marginBottom:r.marginMD,background:r.colorBgContainer},children:[(0,p.jsx)(n.A.Title,{level:5,style:{marginTop:0},children:t.title}),(0,p.jsx)(b.A,{style:{marginTop:0,marginBottom:0}}),t.description&&(0,p.jsx)(n.A.Text,{type:"secondary",style:{marginTop:r.marginSM},children:t.description})]}),(0,p.jsx)(c.OO,{direction:"column",align:"start",gap:"lg",children:t.settingItems.map(((e,t)=>(0,p.jsx)(m,{...e},e.title+t)))})]})},P=e=>{let{settingGroups:t,tabDirection:s="left",showChangedOptionFilter:i,showResetButton:n,showSearchBar:l}=e;const{t:a}=(0,A.Bd)(),{styles:o}=w(),[u,h]=(0,g.useState)(""),[m,b]=(0,g.useState)(!1),[P,{toggle:O}]=(0,v.A)(!1),[F,I]=(0,g.useState)("all"),R=d().map(t,(e=>({...e,settingItems:d().filter(e.settingItems,(e=>(!m||(e=>null!==e.value&&void 0!==e.value&&!e.disabled&&e.value!==e.defaultValue)(e))&&(e=>e.title.toLowerCase().includes(u.toLowerCase())||"string"===typeof e.description&&e.description.toLowerCase().includes(u.toLowerCase()))(e)))})));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(c.OO,{direction:"column",gap:"md",align:"stretch",children:[(0,p.jsxs)(c.OO,{justify:"start",gap:"xs",children:[!!l&&(0,p.jsx)(_.A,{prefix:(0,p.jsx)(x.A,{}),placeholder:a("settings.SearchPlaceholder"),onChange:e=>h(e.target.value),value:u}),!!i&&(0,p.jsx)(r.A,{onChange:e=>b(e.target.checked),style:{whiteSpace:"nowrap"},children:a("settings.ShowOnlyChanged")}),!!n&&(0,p.jsx)(j.Ay,{icon:(0,p.jsx)(y.A,{}),onClick:()=>O(),children:a("button.Reset")})]}),(0,p.jsx)(f.A,{activeKey:F,onChange:I,className:o.TabStyles,tabPosition:s?"left":"top",tabBarStyle:{minWidth:200},items:[{key:"all",label:(0,p.jsx)(C,{title:a("general.All"),count:d().sumBy(R,(e=>e.settingItems.length))}),children:(0,p.jsx)(c.OO,{direction:"column",align:"stretch",gap:"xl",children:d().sumBy(R,(e=>e.settingItems.length))>0?d().map(R,(e=>(0,p.jsx)(T,{"data-testid":null===e||void 0===e?void 0:e["data-testid"],group:e,hideEmpty:!0},e.title))):(0,p.jsx)(k.A,{image:k.A.PRESENTED_IMAGE_SIMPLE,description:a("settings.NoChangesToDisplay")})})},...d().map(R,((e,t)=>({key:`index${t}`,label:(0,p.jsx)(C,{title:e.title,count:e.settingItems.length}),children:e.settingItems.length>0?(0,p.jsx)(T,{group:e,hideEmpty:!0}):(0,p.jsx)(k.A,{image:k.A.PRESENTED_IMAGE_SIMPLE,description:a("settings.NoChangesToDisplay")})})))]})]}),(0,p.jsx)(c.Ib,{open:P,title:a("dialog.ask.DoYouWantToResetChanges"),okText:a("button.Reset"),okButtonProps:{danger:!0},onOk:()=>{d().flatMap(t,(e=>e.settingItems)).forEach((e=>{!e.disabled&&(null===e||void 0===e?void 0:e.setValue)&&e.setValue(e.defaultValue)})),O()},cancelText:a("button.Cancel"),onCancel:()=>O(),children:(0,p.jsx)(S.A,{showIcon:!0,message:a("dialog.warning.CannotBeUndone"),type:"warning"})})]})}},28408:(e,t,s)=>{s.r(t),s.d(t,{default:()=>F});var i=s(19885),n=s(79887),l=s(92491),r=s(83925),a=s(74826),o=s(52088),c=s(40546),u=s(91313),d=s(84100),g=s(81291),p=s(7960);const h=e=>{let{onRequestClose:t,open:s}=e;const{t:h}=(0,g.Bd)(),{message:m}=r.A.useApp(),x=(0,d.useRef)(null),[y,v]=(0,d.useState)(!1),b=(0,i.CX)(),{isFetching:_}=(0,n.nN)({queryKey:["mtu"],queryFn:async()=>{var e;const{result:t}=await b.setting.get("network/overlay/mtu");return null===(e=x.current)||void 0===e||e.setFieldsValue({mtu:t,mtu_checkbox:null===t||void 0===t||""===t}),t},enabled:s});return(0,p.jsx)(u.Ib,{open:s,title:(0,p.jsxs)(u.OO,{gap:"xxs",children:[h("settings.OverlayNetworkSettings"),(0,p.jsx)(l.A,{title:h("settings.OverlayNetworkSettingsDescription")})]}),onCancel:t,confirmLoading:y,centered:!0,width:"auto",okText:h("button.Save"),onOk:()=>{x.current&&x.current.validateFields().then((async e=>{try{if(e.mtu_checkbox){v(!0);const{result:e}=await b.setting.delete("network/overlay/mtu",!0);if("ok"!==e)throw new Error;m.success(h("notification.SuccessfullyUpdated")),t()}else{v(!0);const{result:s}=await b.setting.set("network/overlay/mtu",e.mtu);if("ok"!==s)throw new Error;m.success(h("notification.SuccessfullyUpdated")),t()}}catch(i){var s;m.error(null!==(s=null===i||void 0===i?void 0:i.message)&&void 0!==s?s:h("settings.FailedToSaveSettings"))}finally{v(!1)}})).catch((()=>{}))},cancelText:h("button.Cancel"),destroyOnHidden:!0,children:(0,p.jsx)(a.A,{ref:x,layout:"vertical",children:(0,p.jsx)(a.A.Item,{label:"MTU",tooltip:h("settings.MTUDescription"),required:!0,children:(0,p.jsxs)(u.OO,{gap:"sm",align:"center",children:[(0,p.jsx)(a.A.Item,{noStyle:!0,dependencies:["mtu_checkbox"],children:()=>{var e;return(0,p.jsx)(a.A.Item,{noStyle:!0,name:"mtu",rules:[{validator:(e,t)=>{var s;return!0===(null===(s=x.current)||void 0===s?void 0:s.getFieldValue("mtu_checkbox"))?Promise.resolve():void 0===t||null===t?Promise.reject(h("data.explorer.ValueRequired")):Promise.resolve()}}],children:(0,p.jsx)(o.A,{style:{flex:1},min:0,max:15e3,disabled:!0===(null===(e=x.current)||void 0===e?void 0:e.getFieldValue("mtu_checkbox"))||_})})}}),(0,p.jsx)(a.A.Item,{noStyle:!0,name:"mtu_checkbox",valuePropName:"checked",children:(0,p.jsx)(c.A,{disabled:_,onChange:e=>{var t;e.target.checked&&(null===(t=x.current)||void 0===t||t.setFieldsValue({mtu:null}))},children:h("settings.Unset")})})]})})})})};var m=s(68144),x=s(28599),y=s(2600),v=s(76459);const b=e=>{let{onRequestClose:t,open:s}=e;const{t:n}=(0,g.Bd)(),[c,h]=(0,d.useState)(!1),[b,_]=(0,d.useState)(!1),j=(0,d.useRef)(null),{token:f}=m.A.useToken(),k=(0,i.CX)(),{message:S}=r.A.useApp();return(0,p.jsx)(u.Ib,{title:(0,p.jsxs)(u.OO,{align:"center",gap:"xxs",children:[n("settings.ConfigPerJobSchduler"),(0,p.jsx)(l.A,{title:n("settings.ConfigPerJobSchdulerDescription")})]}),confirmLoading:c,open:s,centered:!0,width:"auto",onCancel:t,onOk:()=>{j.current&&j.current.validateFields().then((async e=>{const s=e.schedulerType,i=e.num_retries_to_skip;try{if(e.num_retries_to_skip_checkbox){h(!0);const{result:e}=await k.setting.delete(`plugins/scheduler/${s}/num_retries_to_skip`,!0);if("ok"!==e)throw new Error;S.success(n("notification.SuccessfullyUpdated")),t()}else{if("fifo"!==s&&"0"!==i)throw new Error(n("settings.FifoOnly"));h(!0);const{result:e}=await k.setting.set(`plugins/scheduler/${s}/num_retries_to_skip`,i);if("ok"!==e)throw new Error;S.success(n("notification.SuccessfullyUpdated")),t()}}catch(r){var l;S.error(null!==(l=null===r||void 0===r?void 0:r.message)&&void 0!==l?l:n("settings.FailedToSaveSettings"))}finally{h(!1)}})).catch((()=>{}))},cancelText:n("button.Cancel"),okText:n("button.Save"),okButtonProps:{type:"primary"},destroyOnHidden:!0,children:(0,p.jsxs)(a.A,{ref:j,layout:"vertical",children:[(0,p.jsx)(a.A.Item,{label:n("settings.Scheduler"),name:"schedulerType",required:!0,rules:[{required:!0,message:n("settings.SchedulerRequired")}],extra:(0,p.jsx)(x.A.Text,{type:"secondary",style:{fontSize:f.fontSizeSM},children:n("settings.SchedulerSelectComment")}),children:(0,p.jsx)(y.A,{loading:b,popupMatchSelectWidth:!1,onChange:e=>{null!==e&&(_(!0),k.setting.get(`plugins/scheduler/${e}/num_retries_to_skip`).then((e=>{var t;null===(t=j.current)||void 0===t||t.setFieldsValue({num_retries_to_skip:e.result,num_retries_to_skip_checkbox:null===e.result})})).finally((()=>{_(!1)})))},options:[{label:"FIFO",value:"fifo"},{label:"LIFO",value:"lifo"},{label:"DRF",value:"drf"}]})}),(0,p.jsxs)(u.OO,{direction:"column",align:"start",style:{width:"100%"},children:[(0,p.jsx)(x.A.Text,{strong:!0,children:n("settings.SchedulerOptions")}),(0,p.jsx)(a.A.Item,{label:n("settings.SessionCreationRetries"),required:!0,style:{width:"100%"},children:(0,p.jsxs)(u.OO,{gap:"sm",align:"center",style:{width:"100%"},children:[(0,p.jsx)(a.A.Item,{noStyle:!0,dependencies:["schedulerType","num_retries_to_skip_checkbox"],style:{width:"100%"},children:()=>{var e,t;return(0,p.jsx)(a.A.Item,{noStyle:!0,name:"num_retries_to_skip",rules:[{validator:(e,t)=>{var s;return!0===(null===(s=j.current)||void 0===s?void 0:s.getFieldValue("num_retries_to_skip_checkbox"))?Promise.resolve():void 0===t||null===t?Promise.reject(n("data.explorer.ValueRequired")):Promise.resolve()}}],children:(0,p.jsx)(o.A,{min:0,max:1e3,disabled:!0===(null===(e=j.current)||void 0===e?void 0:e.getFieldValue("num_retries_to_skip_checkbox"))||void 0===(null===(t=j.current)||void 0===t?void 0:t.getFieldValue("schedulerType"))||b,style:{flex:1}})})}}),(0,p.jsx)(a.A.Item,{noStyle:!0,dependencies:["schedulerType"],children:()=>{var e;return(0,p.jsx)(a.A.Item,{noStyle:!0,name:"num_retries_to_skip_checkbox",valuePropName:"checked",children:(0,p.jsx)(v.A,{disabled:void 0===(null===(e=j.current)||void 0===e?void 0:e.getFieldValue("schedulerType"))||b,onChange:e=>{var t;e.target.checked&&(null===(t=j.current)||void 0===t||t.setFieldsValue({num_retries_to_skip:null}))},children:n("settings.Unset")})})}})]})})]})]})})};var _=s(91069),j=s(86155),f=s(61964),k=s(46038),S=s(98840);const A={image_pulling_behavior:"digest",cuda_gpu:!1,cuda_fgpu:!1,rocm_gpu:!1,tpu:!1,ipu:!1,atom:!1,atom_plus:!1,atom_max:!1,gaudi2:!1,warboy:!1,rngd:!1,hyperaccel_lpu:!1,schedulerType:"fifo",scheduler:{num_retries_to_skip:"0"},network:{mtu:""}},w={"cuda.device":"cuda_gpu","cuda.shares":"cuda_fgpu","rocm.device":"rocm_gpu","tpu.device":"tpu","ipu.device":"ipu","atom.device":"atom","atom-plus.device":"atom_plus","atom-max.device":"atom_max","warboy.device":"warboy","rngd.device":"rngd","hyperaccel-lpu.device":"hyperaccel_lpu"},C=()=>{const{t:e}=(0,g.Bd)(),[t,{toggle:s}]=(0,f.A)(!1),[n,{toggle:l}]=(0,f.A)(!1),[a,o]=(0,d.useState)({...A}),c=(0,i.CX)(),{message:u}=r.A.useApp(),m=async()=>{const{result:e}=await c.setting.get("docker/image/auto_pull");o(null===e||"digest"===e?e=>({...e,image_pulling_behavior:"digest"}):"tag"===e?e=>({...e,image_pulling_behavior:"tag"}):e=>({...e,image_pulling_behavior:"none"}))},x=async t=>{if(t!==a.image_pulling_behavior)try{const{result:s}=await c.setting.set("docker/image/auto_pull",t);"ok"===s?(m(),u.success(e("notification.SuccessfullyUpdated"))):u.error(e("settings.FailedToSaveSettings"))}catch(s){u.error(e("settings.FailedToSaveSettings"))}};(0,d.useEffect)((()=>{Promise.all([m(),c.get_resource_slots().then((e=>{o((t=>({...t,...Object.fromEntries(Object.keys(w).map((t=>[w[t],t in e])))})))}))])}),[]);const y=[{"data-testid":"settings-general",title:e("settings.General"),settingItems:[{type:"select",title:e("settings.ImagePullBehavior"),description:e("settings.DescImagePullBehavior"),selectProps:{options:[{label:e("settings.image.Digest"),value:"digest"},{label:e("settings.image.Tag"),value:"tag"},{label:e("settings.image.None"),value:"none"}]},setValue:e=>x(e),defaultValue:A.image_pulling_behavior,value:a.image_pulling_behavior,onChange:e=>x(e)},{type:"custom",title:e("settings.OverlayNetwork"),description:e("settings.OverlayNetworkConfiguration"),children:(0,p.jsx)(k.Ay,{icon:(0,p.jsx)(j.A,{}),onClick:s,children:e("settings.Config")})},{type:"custom",title:e("settings.Scheduler"),description:e("settings.SchedulerConfiguration"),children:(0,p.jsx)(k.Ay,{icon:(0,p.jsx)(j.A,{}),onClick:l,children:e("settings.Config")})}]},{"data-testid":"settings-plugins",title:e("settings.Plugins"),description:(0,p.jsx)(S.A,{message:e("settings.NoteAboutFixedSetup"),type:"info",showIcon:!0}),settingItems:[{type:"checkbox",title:e("settings.OpenSourceCudaGPUSupport"),description:(0,p.jsxs)(p.Fragment,{children:[e("settings.DescCudaGPUSupport")," ",a.cuda_fgpu&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("br",{}),e("settings.CUDAGPUdisabledByFGPUsupport")]})]}),value:a.cuda_gpu,defaultValue:A.cuda_gpu,disabled:!0},{type:"checkbox",title:e("settings.ROCMGPUSupport"),description:e("settings.DescRocmGPUSupport"),value:a.rocm_gpu,defaultValue:A.rocm_gpu,disabled:!0}]},{"data-testid":"settings-enterprise",title:e("settings.EnterpriseFeatures"),description:(0,p.jsx)(S.A,{message:e("settings.NoteAboutFixedSetup"),type:"info",showIcon:!0}),settingItems:[{type:"checkbox",title:e("settings.FractionalGPU"),description:(0,p.jsxs)(p.Fragment,{children:[e("settings.DescFractionalGPU"),(0,p.jsx)("br",{}),e("settings.RequireFGPUPlugin")]}),value:a.cuda_fgpu,defaultValue:A.cuda_fgpu,disabled:!0},{type:"checkbox",title:e("settings.TPU"),description:(0,p.jsxs)(p.Fragment,{children:[e("settings.DescTPU"),(0,p.jsx)("br",{}),e("settings.RequireTPUPlugin")]}),value:a.tpu,defaultValue:A.tpu,disabled:!0},{type:"checkbox",title:e("settings.IPUSupport"),description:(0,p.jsxs)(p.Fragment,{children:[e("settings.DescIPUSupport"),(0,p.jsx)("br",{}),e("settings.RequireTPUPlugin")]}),value:a.ipu,defaultValue:A.ipu,disabled:!0},{type:"checkbox",title:e("settings.ATOMSupport"),description:(0,p.jsxs)(p.Fragment,{children:[e("settings.DescATOMSupport"),(0,p.jsx)("br",{}),e("settings.RequireATOMPlugin")]}),value:a.atom,defaultValue:A.atom,disabled:!0},{type:"checkbox",title:e("settings.ATOMPlusSupport"),description:(0,p.jsxs)(p.Fragment,{children:[e("settings.DescATOMPlusSupport"),(0,p.jsx)("br",{}),e("settings.RequireATOMPlusPlugin")]}),value:a.atom_plus,defaultValue:A.atom_plus,disabled:!0},{type:"checkbox",title:e("settings.ATOMMaxSupport"),description:(0,p.jsxs)(p.Fragment,{children:[e("settings.DescATOMMaxSupport"),(0,p.jsx)("br",{}),e("settings.RequireATOMMaxPlugin")]}),value:a.atom_max,defaultValue:A.atom_max,disabled:!0},{type:"checkbox",title:e("settings.Gaudi2Support"),description:(0,p.jsxs)(p.Fragment,{children:[e("settings.DescGaudi2Support"),(0,p.jsx)("br",{}),e("settings.RequireGaudi2Plugin")]}),value:a.gaudi2,defaultValue:A.gaudi2,disabled:!0},{type:"checkbox",title:e("settings.WarboySupport"),description:(0,p.jsxs)(p.Fragment,{children:[e("settings.DescWarboySupport"),(0,p.jsx)("br",{}),e("settings.RequireWarboyPlugin")]}),value:a.warboy,defaultValue:A.warboy,disabled:!0},{type:"checkbox",title:e("settings.RNGDSupport"),description:(0,p.jsxs)(p.Fragment,{children:[e("settings.DescRNGDSupport"),(0,p.jsx)("br",{}),e("settings.RequireRNGDPlugin")]}),value:a.rngd,defaultValue:A.rngd,disabled:!0},{type:"checkbox",title:e("settings.HyperaccelLPUSupport"),description:(0,p.jsxs)(p.Fragment,{children:[e("settings.DescHyperaccelLPUSupport"),(0,p.jsx)("br",{}),e("settings.RequireHyperaccelLPUPlugin")]}),value:a.hyperaccel_lpu,defaultValue:A.hyperaccel_lpu,disabled:!0}]}];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(_.A,{settingGroups:y,showSearchBar:!0,showChangedOptionFilter:!0,showResetButton:!0}),(0,p.jsx)(h,{onRequestClose:s,open:t}),(0,p.jsx)(b,{onRequestClose:l,open:n})]})};var T=s(69677),P=s(42667);const O=(0,P.withDefault)(P.StringParam,"configurations"),F=()=>{const{t:e}=(0,g.Bd)(),[t,s]=(0,P.useQueryParam)("tab",O);return(0,p.jsx)(T.A,{activeTabKey:"configurations",onTabChange:e=>s(e),tabList:[{key:"configurations",tab:e("webui.menu.Configurations")}],children:"configurations"===t&&(0,p.jsx)(C,{})})}},25300:(e,t,s)=>{s.d(t,{A:()=>o});var i=s(1139),n=s(84100);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};var r=s(29815),a=function(e,t){return n.createElement(r.A,(0,i.A)({},e,{ref:t,icon:l}))};const o=n.forwardRef(a)}}]);
//# sourceMappingURL=8408.ef41c1a7.chunk.js.map