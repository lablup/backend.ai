"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[3492],{95762:(e,n,l)=>{l.d(n,{A:()=>d});var i=l(72338),a=l(9571),s=l(50128),t=l(46976),r=l.n(t),o=(l(53350),l(60598));const d=e=>{let{title:n,valueLabel:l,percent:t,width:d,strokeColor:u,labelStyle:c,progressStyle:m,size:g="small"}=e;const{token:p}=a.A.useToken(),y="small"===g?p.fontSizeSM:"middle"===g?p.fontSize:p.fontSizeLG;return(0,o.jsxs)(i.A,{style:{padding:1,border:`1px solid ${p.colorBorder}`,borderRadius:3,backgroundColor:p.colorBgContainerDisabled,...r().isNumber(d)||r().isString(d)?{width:d}:{flex:1},...m},direction:"column",align:"stretch",children:[(0,o.jsx)(i.A,{style:{height:"100%",width:`${!t||r().isNaN(t)?0:r().min([t,100])}%`,position:"absolute",left:0,top:0,backgroundColor:null!==u&&void 0!==u?u:p.colorSuccess,opacity:.7,zIndex:0,overflow:"hidden"}}),(0,o.jsxs)(i.A,{direction:"row",justify:"between",children:[(0,o.jsx)(s.A.Text,{style:{fontSize:y,...c},children:n}),(0,o.jsx)(s.A.Text,{style:{fontSize:y,color:r().isNaN(t)||r().isUndefined(t)?p.colorTextDisabled:void 0,...c},children:l})]})]})}},8699:(e,n,l)=>{l.d(n,{A:()=>k});var i=l(23524),a=l(82776),s=l(18659),t=l(37826),r=l(43403),o=l(62097),d=l.n(o),u=l(46976),c=l.n(u),m=l(53350),g=l(48556),p=l(60598);const y=(0,r.rU)((e=>{let{token:n,css:l}=e;return{resizableTable:l`
    .react-resizable-handle {
      position: absolute;
      inset-inline-end: 0px;
      bottom: 0;
      z-index: 1;
      width: 10px;
      height: 100%;
      cursor: col-resize;
    }
    .ant-table-cell {
      overflow: hidden;
      whitespace: 'pre';
      wordwrap: 'break-word';
    }
  `,neoHeader:l`
    thead.ant-table-thead > tr > th.ant-table-cell {
      font-weight: 500;
      color: ${n.colorTextTertiary};
    }
  `}})),h=e=>{const{onResize:n,width:l,onClick:i,...s}=e,t=(0,m.useRef)(null),[r,o]=(0,m.useState)(!1),d=(0,a.A)(r,{wait:100});return(0,m.useEffect)((()=>{t.current&&c().isUndefined(l)&&(null===n||void 0===n||n(void 0,{size:{width:t.current.offsetWidth,height:t.current.offsetHeight},node:t.current,handle:"e"}))})),c().isUndefined(l)?(0,p.jsx)("th",{ref:t,...s}):(0,p.jsx)(g.Resizable,{width:l,height:0,handle:(0,p.jsx)("span",{className:"react-resizable-handle",onClick:e=>{e.stopPropagation()}}),onResize:n,onResizeStart:()=>{o(!0)},onResizeStop:()=>{o(!1)},draggableOpts:{enableUserSelectHack:!1},children:(0,p.jsx)("th",{onClick:e=>{d?e.preventDefault():null===i||void 0===i||i(e)},...s})})},v=(e,n)=>e.key||`index_${n}`,k=e=>{let{resizable:n=!1,columns:l,components:a,neoStyle:r,...o}=e;const{styles:u}=y(),{isDarkMode:g}=(0,i.e)(),[k,f]=(0,m.useState)((e=>{const n={};return c().each(e,((e,l)=>{n[v(e,l)]=e.width})),n})(l)),x=(0,m.useMemo)((()=>n?c().map(l,((e,n)=>({...e,width:k[v(e,n)]||e.width,onHeaderCell:e=>({width:e.width,onResize:(l,i)=>{let{size:a}=i;f((l=>({...l,[v(e,n)]:a.width})))}})}))):l),[n,l,k]);return(0,p.jsx)(s.Ay,{theme:{components:{Table:!g&&r?{headerBg:"#E3E3E3"}:void 0}},children:(0,p.jsx)(t.A,{sortDirections:["descend","ascend","descend"],showSorterTooltip:!1,className:d()(n&&u.resizableTable,r&&u.neoHeader),components:n?c().merge(a||{},{header:{cell:h}}):a,columns:x,...o})})}},61823:(e,n,l)=>{l.d(n,{A:()=>A});var i=l(17898),a=l(23441),s=l(7971),t=l(73e3),r=l(53350);var o,d=l(9189),u=l(22407),c=l(72338),m=l(43622),g=l(50681),p=l(9571),y=l(9769),h=l(50128),v=l(40056),k=l(82919),f=l(52335),x=l(46976),_=l.n(x),S=l(53102),F=l(91788),b=l(22018),j=l(60598);const A=e=>{var n,x,A,T,C,K;let{sessionFrgmt:N,...w}=e;const I=(0,a.CX)(),{token:L}=p.A.useToken(),R=(0,s.Am)(),E=(0,b.useFragment)(void 0!==o?o:o=l(50029),N),D=(null===E||void 0===E||null===(n=E.kernel_nodes)||void 0===n||null===(x=n.edges)||void 0===x?void 0:x.map((e=>null===e||void 0===e?void 0:e.node)))||[],[M,U]=(0,r.useState)((null===(A=_().find(D,(e=>"main"===(null===e||void 0===e?void 0:e.cluster_role))))||void 0===A?void 0:A.row_id)||(null===(T=D[0])||void 0===T?void 0:T.row_id));(0,r.useEffect)((()=>{!1===w.open&&U(void 0)}),[w.open]);const{data:z,refetch:P,isPending:B,isRefetching:$,dataUpdatedAt:q}=(0,t.nN)({queryKey:["containerLog",null===E||void 0===E?void 0:E.row_id,null===E||void 0===E?void 0:E.access_key,M,w.open],queryFn:async()=>w.open&&null!==E&&void 0!==E&&E.row_id&&null!==E&&void 0!==E&&E.access_key&&M?await I.get_logs(null===E||void 0===E?void 0:E.row_id,null===E||void 0===E?void 0:E.access_key,M,15e3).then((e=>e.result.logs)):"",staleTime:5e3}),[G,{resetPrevious:O}]=function(e,n){let{initialPrev:l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=(0,r.useRef)(l),[a,s]=(0,r.useState)({}),t=(0,r.useMemo)(e,n),o=(0,r.useMemo)((()=>i.current),[...n,a]);return(0,r.useEffect)((()=>{i.current=t}),n),[{previous:o,current:t},{resetPrevious:()=>{i.current=l,s({})}}]}((()=>(null===z||void 0===z?void 0:z.split("\n").length)||0),[z]),{md:V}=y.Ay.useBreakpoint(),{t:Q}=(0,F.Bd)();return(0,j.jsx)(d.A,{title:(0,j.jsxs)(c.A,{style:{maxWidth:"100%"},gap:"sm",children:[(0,j.jsx)(h.A.Title,{level:4,style:{margin:0,flexShrink:0},children:"Logs"}),E?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(h.A.Text,{style:{fontWeight:"normal"},ellipsis:!0,children:null===E||void 0===E?void 0:E.name}),(0,j.jsxs)(h.A.Text,{style:{fontWeight:"normal",fontFamily:"monospace"},copyable:{text:null===E||void 0===E?void 0:E.row_id,tooltips:Q("button.CopySomething",{name:Q("session.SessionId")})},children:["(",V?null===E||void 0===E?void 0:E.row_id:null===E||void 0===E||null===(C=E.row_id.split("-"))||void 0===C?void 0:C[0],")"]})]}):null]}),width:"100%",styles:{header:{width:"100%"},body:{height:"calc(100vh - 100px)",maxHeight:"calc(100vh - 100px)"}},...w,footer:null,destroyOnClose:!0,children:(0,j.jsxs)(c.A,{direction:"column",align:"start",style:{height:"100%"},gap:"sm",children:[(0,j.jsxs)(c.A,{gap:"sm",wrap:"wrap",children:["Kernel Role",(0,j.jsx)(u.A,{value:M,onChange:e=>{U(e),O()},autoSelectOption:!0,options:_().chain(null===E||void 0===E||null===(K=E.kernel_nodes)||void 0===K?void 0:K.edges).sortBy((e=>{var n,l;return`${null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.cluster_role} ${null===e||void 0===e||null===(l=e.node)||void 0===l?void 0:l.cluster_idx}`})).map((e=>{var n,l,i,a,s;return{label:(0,j.jsxs)(j.Fragment,{children:[null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.cluster_role,"main"!==(null===e||void 0===e||null===(l=e.node)||void 0===l?void 0:l.cluster_role)?null===e||void 0===e||null===(i=e.node)||void 0===i?void 0:i.cluster_idx:"","admin"===R||"superadmin"===R?(0,j.jsxs)(h.A.Text,{style:{fontFamily:"monospace",fontSize:L.fontSizeSM},type:"secondary",children:["(",((null===e||void 0===e||null===(a=e.node)||void 0===a?void 0:a.row_id)||"").substring(0,5),")"]}):null]}),value:null===e||void 0===e||null===(s=e.node)||void 0===s?void 0:s.row_id}})).value()}),(0,j.jsx)(v.A,{type:"vertical"}),(0,j.jsx)(k.A,{title:Q("button.Download"),children:(0,j.jsx)(f.Ay,{size:"middle",icon:(0,j.jsx)(S.A,{}),disabled:B||$,onClick:()=>{const e=new Blob([z||""],{type:"text/plain"});(0,i.WN)(e,`${(null===E||void 0===E?void 0:E.name)||"session"}-logs-${M}-${(new Date).toISOString()}.txt`)}})}),(0,j.jsx)(k.A,{title:Q("button.Refresh"),children:(0,j.jsx)(f.Ay,{size:"middle",loading:B||$,icon:(0,j.jsx)(m.A,{}),onClick:()=>P()})})]}),(0,j.jsx)("div",{style:{height:"calc(100% - 50px)",alignSelf:"stretch",border:`1px solid ${L.colorBorder}`,overflow:"hidden"},children:(0,j.jsx)(g.jB,{startFollowing:!0,render:e=>{let{follow:n,onScroll:l}=e;return(0,j.jsx)(g.FT,{caseInsensitive:!0,enableSearch:!0,enableSearchNavigation:!0,selectableLines:!0,text:z||"",highlight:G.previous,extraLines:1,follow:n,onScroll:l})}},q)})]})})}},61207:(e,n,l)=>{l.d(n,{A:()=>m});var i,a=l(72375),s=l(30331),t=l(91238),r=l(78502),o=l.n(r),d=(l(53350),l(91788)),u=l(22018),c=l(60598);const m=e=>{let{sessionFrgmt:n,mode:r="detail"}=e;const{t:m}=(0,d.Bd)(),g=(0,u.useFragment)(void 0!==i?i:i=l(93880),n);return(0,c.jsxs)(c.Fragment,{children:["simple-elapsed"!==r&&o()(g.created_at).format("lll"),(0,c.jsx)(s.A,{callback:()=>{const e=(null===g||void 0===g?void 0:g.starts_at)||(null===g||void 0===g?void 0:g.created_at);return e&&o()(e).isBefore()?(0,a.bB)(e,null===g||void 0===g?void 0:g.terminated_at):"-"},delay:1e3,render:e=>"simple-elapsed"===r?e:(0,c.jsx)(t.A,{values:[{label:m("session.ElapsedTime")},{label:e}]})},g.id)]})}},5415:(e,n,l)=>{l.d(n,{A:()=>y});var i,a=l(72338),s=l(2667),t=l(9571),r=l(24798),o=l(46976),d=l.n(o),u=(l(53350),l(22018)),c=l(60598);const m={RESTARTING:"blue",PREPARING:"blue",PREPARED:"blue",CREATING:"blue",PULLING:"blue",RUNNING:"green",PENDING:"green",SCHEDULED:"green",ERROR:"red"},g=e=>["RESTARTING","TERMINATING","PENDING","PREPARING","CREATING","PULLING"].includes((null===e||void 0===e?void 0:e.status)||""),p={"no-available-instances":"red","failed-to-start":"red","creation-failed":"red"},y=e=>{let{sessionFrgmt:n,showInfo:o}=e;const y=(0,u.useFragment)(void 0!==i?i:i=l(53460),n),{token:h}=t.A.useToken();return y?d().isEmpty(y.status_info)||!o?(0,c.jsx)(r.A,{color:y.status?d().get(m,y.status):void 0,icon:g(y)?(0,c.jsx)(s.A,{spin:!0}):void 0,children:y.status||" "}):(0,c.jsxs)(a.A,{children:[(0,c.jsx)(r.A,{style:{margin:0,zIndex:1},color:y.status?d().get(m,y.status):void 0,children:y.status}),(0,c.jsx)(r.A,{style:{margin:0,marginLeft:-1,borderStyle:"dashed",color:y.status_info&&d().get(p,y.status_info)?void 0:h.colorTextSecondary},color:y.status_info?d().get(p,y.status_info):void 0,children:y.status_info})]}):null}},90857:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"uuid"}],n=[{kind:"Variable",name:"id",variableName:"uuid"}],l={alias:null,args:null,kind:"ScalarField",name:"group_id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ConnectedKernelListLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ConnectedKernelListLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"b8db3f5005362f059f55439e393c1838",id:null,metadata:{},name:"ConnectedKernelListLegacyQuery",operationKind:"query",text:"query ConnectedKernelListLegacyQuery(\n  $uuid: UUID!\n) {\n  session_for_project_id: compute_session(id: $uuid) {\n    group_id\n    id\n  }\n}\n"}}}();i.hash="19ed5dde0fb95d8ff8cfbe9114129348";const a=i},52476:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"project_id"}],n=[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"project_id",variableName:"project_id"}],l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},i={alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status_info",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"agent_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ConnectedKernelListQuery",selections:[{alias:"session",args:n,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[i],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ConnectedKernelListQuery",selections:[{alias:"session",args:n,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[i,l],storageKey:null}]},params:{cacheID:"eb1093ca788f80abf6bfd99741878aa2",id:null,metadata:{},name:"ConnectedKernelListQuery",operationKind:"query",text:"query ConnectedKernelListQuery(\n  $id: GlobalIDField!\n  $project_id: UUID!\n) {\n  session: compute_session_node(id: $id, project_id: $project_id) {\n    kernel_nodes {\n      edges {\n        node {\n          id\n          row_id\n          cluster_role\n          status\n          status_info\n          agent_id\n          container_id\n        }\n      }\n      count\n    }\n    id\n  }\n}\n"}}}();i.hash="fa187f8a1e76cdbb680e1103fd57bcc2";const a=i},5545:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ContainerCommitModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},action:"NONE",path:"row_id"}],type:"ComputeSessionNode",abstractKey:null,hash:"8bcd294de1ffd3f00f6ec0ed7177c304"},a=i},50029:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ContainerLogModalFragment",selections:[e,{kind:"RequiredField",field:n,action:"NONE",path:"row_id"},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"ComputeSessionNode",abstractKey:null}}();i.hash="59dda81185d3d874cd635adcae2ae9d4";const a=i},33589:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditableSessionNameFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"priority",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"9c053b92b568a9b132f7615d1869f32b"},a=i},93178:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"ModifyComputeSessionPayload",kind:"LinkedField",name:"modify_compute_session",plural:!1,selections:[{alias:null,args:null,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"item",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"EditableSessionNameMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"EditableSessionNameMutation",selections:n},params:{cacheID:"bea4b6405958ab3b9796129b5807d0fa",id:null,metadata:{},name:"EditableSessionNameMutation",operationKind:"mutation",text:"mutation EditableSessionNameMutation(\n  $input: ModifyComputeSessionInput!\n) {\n  modify_compute_session(input: $input) {\n    item {\n      id\n      name\n    }\n  }\n}\n"}}}();i.hash="92003994eaa19ceec71d4fe2efb299cd";const a=i},79825:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionActionButtonsFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},action:"NONE",path:"row_id"},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commit_status",storageKey:null},{args:null,kind:"FragmentSpread",name:"TerminateSessionModalFragment"},{args:null,kind:"FragmentSpread",name:"ContainerLogModalFragment"},{args:null,kind:"FragmentSpread",name:"ContainerCommitModalFragment"}],type:"ComputeSessionNode",abstractKey:null,hash:"691b7c3c1673640d97620822f4fff09f"},a=i},73921:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionIdleChecksFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null}],type:"ComputeSession",abstractKey:null,hash:"d2bf721ec94f22eba99980925b3f9656"},a=i},7281:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionIdleChecksNodeFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"09a1dd685c8942ebb5c69e6dddaf6da0"},a=i},93880:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionReservationFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"starts_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"terminated_at",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"c0801fe0feb37a1bce71461255d0998f"},a=i},53460:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionStatusTagFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status_info",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"28d44a009b8d8ecc51f60af3fc9ef8c8"},a=i},15934:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionTypeTagFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"6d4ab2b738125ee81d47483324695349"},a=i},5136:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"TerminateSessionModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},action:"NONE",path:"scaling_group"},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"agent_id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"0987c567ddd892540d949ccabd005e2b"},a=i},34185:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"project_id"}],n=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"project_id",variableName:"project_id"}],concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"TerminateSessionModalRefetchQuery",selections:n,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"TerminateSessionModalRefetchQuery",selections:n},params:{cacheID:"42872ac8084736aaf26675f9531456db",id:null,metadata:{},name:"TerminateSessionModalRefetchQuery",operationKind:"query",text:"query TerminateSessionModalRefetchQuery(\n  $id: GlobalIDField!\n  $project_id: UUID!\n) {\n  compute_session_node(id: $id, project_id: $project_id) {\n    id\n    status\n  }\n}\n"}}}();i.hash="6c928af0802a6732e5237c3f6c46db99";const a=i},23492:(e,n,l)=>{l.d(n,{A:()=>Ie});var i,a,s=l(23441),t=l(50332),r=l(32715),o=l(72375),d=l(7971),u=l(81530),c=l(94132),m=l(8699),g=l(91238),p=l(72338),y=l(50128),h=l(24798),v=l(46976),k=l.n(v),f=l(91788),x=l(22018),_=l(60598);const S={PREPARING:"blue",BUILDING:"blue",PULLING:"blue",PREPARED:"blue",CREATING:"blue",PENDING:"green",SCHEDULED:"green",RUNNING:"green",RESTARTING:"green",RESIZING:"green",SUSPENDED:"green",TERMINATING:"default",TERMINATED:"default",CANCELLED:"default",ERROR:"red"},F=e=>{let{id:n,fetchKey:s}=e;const{t:t}=(0,f.Bd)(),r=(0,u.hd)(),{session_for_project_id:d}=(0,x.useLazyLoadQuery)(void 0!==i?i:i=l(90857),{uuid:n},{fetchPolicy:"network-only"}),{session:c}=(0,x.useLazyLoadQuery)(void 0!==a?a:a=l(52476),{id:(0,o.wc)("ComputeSessionNode",n),project_id:(null===d||void 0===d?void 0:d.group_id)||r.id},{fetchPolicy:"network-only",fetchKey:s}),v=null===c||void 0===c?void 0:c.kernel_nodes,F=(0,o.LY)([{title:"#",fixed:"left",render:(e,n,l)=>l+1,showSorterTooltip:!1,rowScope:"row"},{title:t("kernel.KernelId"),fixed:"left",dataIndex:"row_id",render:e=>(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(y.A.Text,{copyable:!0,ellipsis:!0,children:e})})},{title:t("kernel.Role"),dataIndex:"cluster_role",render:e=>(0,_.jsx)(h.A,{children:e})},{title:t("kernel.Status"),dataIndex:"status",render:(e,n)=>{var l;return(0,_.jsx)(_.Fragment,{children:""!==(null===n||void 0===n?void 0:n.status_info)?(0,_.jsx)(g.A,{values:[{label:e,color:k().get(S,e)},{label:null===n||void 0===n?void 0:n.status_info,color:k().get(S,null!==(l=null===n||void 0===n?void 0:n.status_info)&&void 0!==l?l:"")}]}):(0,_.jsx)(h.A,{color:k().get(S,e),children:e})})}},{title:t("kernel.ContainerId"),dataIndex:"container_id",onCell:()=>({style:{maxWidth:250}}),render:e=>(0,_.jsx)(y.A.Text,{copyable:!0,ellipsis:!0,children:e})},{title:t("kernel.AgentId"),dataIndex:"agent_id",render:e=>(0,_.jsx)(y.A.Text,{copyable:!0,children:e})}]);return(0,_.jsx)(p.A,{direction:"column",align:"stretch",gap:"sm",children:(0,_.jsx)(m.A,{bordered:!0,rowKey:"id",scroll:{x:"max-content"},columns:F,dataSource:(0,o.tS)(null===v||void 0===v?void 0:v.edges.map((e=>null===e||void 0===e?void 0:e.node))),style:{width:"100%"},pagination:!1})})};var b,j,A=l(60661),T=l(9571),C=l(13170),K=l(83978),N=l(96365),w=l(7824),I=l(53350);const L=e=>{let{component:n=N.A,sessionFrgmt:i,editable:a,style:s,...t}=e;const r=(0,x.useFragment)(void 0!==b?b:b=l(33589),i),[o,u]=(0,I.useState)(r.name),[c]=(0,d.U6)(),[m,g]=(0,x.useMutation)(void 0!==j?j:j=l(93178)),{t:p}=(0,f.Bd)(),{token:y}=T.A.useToken(),[h,v]=(0,I.useState)(!1),k=!["RESTARTING","PREPARING","PREPARED","CREATING","PULLING"].includes(r.status||""),S=a&&c.uuid===r.user_id&&k;return(0,_.jsxs)(_.Fragment,{children:[(!h||g)&&(0,_.jsx)(n,{editable:!(!S||g)&&{onStart:()=>{v(!0)},triggerType:["icon","text"]},copyable:!0,style:{...s,color:g?y.colorTextTertiary:null===s||void 0===s?void 0:s.color},...t,children:g?o:r.name}),h&&!g&&(0,_.jsx)(C.A,{onFinish:e=>{v(!1),u(e.sessionName),m({variables:{input:{id:r.id,name:e.sessionName}},onCompleted(e,n){},onError(e){}})},initialValues:{sessionName:r.name},style:{flex:1},children:(0,_.jsx)(C.A.Item,{name:"sessionName",rules:(0,A.j)(p),style:{margin:0},children:(0,_.jsx)(K.A,{size:"large",suffix:(0,_.jsx)(w.A,{style:{fontSize:"0.8em",color:y.colorTextTertiary}}),autoFocus:!0,onKeyDown:e=>{"Escape"===e.key&&v(!1)}})})})]})};var R,E=l(25905),D=l(9189),M=l(8227),U=l(40056);const z=e=>{let{sessionFrgmt:n,onRequestClose:i,...a}=e;const{t:t}=(0,f.Bd)(),r=(0,I.useRef)(null),o=(0,s.CX)(),{upsertNotification:d}=(0,E.js)(),[u,c]=(0,I.useState)(!1),m=(0,x.useFragment)(void 0!==R?R:R=l(5545),n);return(0,_.jsx)(D.A,{title:t("session.CommitSession"),onOk:()=>(()=>{var e;c(!0),null===r||void 0===r||null===(e=r.current)||void 0===e||e.validateFields().then((e=>{var n;o.computeSession.convertSessionToImage(null!==(n=null===m||void 0===m?void 0:m.name)&&void 0!==n?n:"",e.imageName).then((e=>{i(),d({key:"commitSession:"+(null===m||void 0===m?void 0:m.name),backgroundTask:{taskId:e.task_id,status:"pending",onChange:{pending:t("session.CommitOnGoing"),resolved:t("session.CommitFinished"),rejected:t("session.CommitFailed")}},duration:0,message:"commitSession: "+(null===m||void 0===m?void 0:m.name),open:!0})})).catch((e=>{throw null!==e&&void 0!==e&&e.message?new Error(e.message):e})).finally((()=>{c(!1)}))})).catch((e=>{console.log(e)}))})(),okButtonProps:{loading:u},onCancel:i,...a,destroyOnClose:!0,children:(0,_.jsxs)(p.A,{direction:"column",gap:"xs",align:"stretch",style:{overflow:"hidden"},children:[(0,_.jsx)(y.A.Text,{children:t("session.DescCommitSession")}),(0,_.jsxs)(M.A,{bordered:!0,size:"small",column:1,children:[(0,_.jsx)(M.A.Item,{label:t("session.SessionName"),children:null===m||void 0===m?void 0:m.name}),(0,_.jsx)(M.A.Item,{label:t("session.SessionId"),children:null===m||void 0===m?void 0:m.row_id})]}),(0,_.jsx)(U.A,{style:{marginTop:12,marginBottom:12}}),(0,_.jsx)(C.A,{ref:r,children:(0,_.jsx)(C.A.Item,{label:t("session.CommitImageName"),name:"imageName",required:!0,rules:[{required:!0},{min:4,max:32},{pattern:/^[a-zA-Z0-9-_.]+$/,message:t("session.Validation.EnterValidSessionName")}],children:(0,_.jsx)(K.A,{placeholder:t("inputLimit.4to32chars")})})})]})})};var P,B,$=l(61823),q=l(73e3),G=l(57613),O=l(92280),V=l(20418);const Q=(0,l(43403).rU)((e=>{let{css:n,token:l}=e;return{custom:n`
      ul {
        list-style-type: circle;
        padding-left: ${l.paddingMD}px;
      }
    `}})),W=async e=>{let n,l;try{"GET"===e.method&&(e.body=void 0),n=await fetch(e.uri,e);const i=n.headers.get("Content-Type");if(null===i){if(l=n.ok,!n.ok)throw new Error(n)}else l=i.startsWith("application/json")||i.startsWith("application/problem+json")?await n.json():i.startsWith("text/")?await n.text():await n.blob();if(!n.ok)throw l}catch(i){return n}return l},H=async(e,n,l)=>{let i="http://127.0.0.1:5050/";if(void 0!==globalThis.__local_proxy&&void 0!==globalThis.__local_proxy.url?i=globalThis.__local_proxy.url:void 0!==l._config.proxyURL&&(i=l._config.proxyURL),void 0!==e&&void 0!==n){const a=await(async(e,n,l)=>{if(!0===l.debug){var i,a,s,t;if(null!==(i=globalThis.appLauncher)&&void 0!==i&&null!==(a=i.forceUseV1Proxy)&&void 0!==a&&a.checked)return"v1";if(null!==(s=globalThis.appLauncher)&&void 0!==s&&null!==(t=s.forceUseV2Proxy)&&void 0!==t&&t.checked)return"v2"}return globalThis.isElectron?"v1":l.scalingGroup.getWsproxyVersion(e,n).then((e=>e.wsproxy_version))})(e,n,l);"v1"!==a&&(i=new URL(`${a}/`,i).href)}return i},Y=e=>{var n;let{sessionFrgmts:i,onRequestClose:a,...t}=e;const{t:r}=(0,f.Bd)(),{styles:o}=Q(),c=(0,x.useFragment)(void 0!==P?P:P=l(5136),i),[m,g]=(0,I.useState)(!1),h=(0,d.Am)(),v=(0,s.CX)(),S=(0,u.hd)(),F=(0,q.ET)({mutationFn:async e=>(async(e,n,l,i)=>{const a=await H(e.scaling_group,l,i),s={method:"GET",uri:new URL(`proxy/${n}/${e.row_id}`,a).href};return W(s).then((l=>{let i=new URL(`proxy/${n}/${e.row_id}/delete`,a);return localStorage.getItem("backendaiwebui.appproxy-permit-key")&&(i.searchParams.set("permit_key",localStorage.getItem("backendaiwebui.appproxy-permit-key")||""),i=new URL(i.href)),void 0===l||404===l.code||W({method:"GET",uri:i.href,credentials:"include",mode:"cors"})}))})(e,v._config.accessKey,S.id,v).catch((e=>({error:e}))).then((n=>{const l=null===n||void 0===n?void 0:n.error;if(void 0===l||l&&l.message&&(404===l.statusCode||500===l.statusCode))return v.destroy(e.row_id,v._config.accessKey,m);throw l}))}),b=(0,x.useRelayEnvironment)(),j=(0,G.b)(),{upsertNotification:A}=(0,E.js)();return(0,_.jsx)(D.A,{centered:!0,title:r("session.TerminateSession"),open:!1,confirmLoading:F.isPending,onOk:()=>{var e;if(null!==(e=c[0])&&void 0!==e&&e.row_id){const e=c[0];F.mutateAsync(e).then((()=>{g(!1),a(!0)})).catch((e=>{A({message:j.relieve(null===e||void 0===e?void 0:e.title),description:null===e||void 0===e?void 0:e.message,open:!0})})).finally((()=>{const n=new CustomEvent("backend-ai-session-list-refreshed",{detail:"running"});return document.dispatchEvent(n),(0,x.fetchQuery)(b,void 0!==B?B:B=l(34185),{id:e.id,project_id:S.id}).toPromise()}))}},okText:r(m?"button.ForceTerminate":"session.Terminate"),okType:"danger",okButtonProps:{type:m?"primary":"default"},onCancel:()=>{g(!1),a(!1)},...t,children:(0,_.jsxs)(p.A,{className:o.custom,direction:"column",align:"stretch",gap:"xs",children:[(0,_.jsx)(y.A.Text,{children:r("userSettings.SessionTerminationDialog")}),(0,_.jsx)(y.A.Text,{mark:!0,children:1===c.length?null===(n=c[0])||void 0===n?void 0:n.name:`${c.length} sessions`}),(0,_.jsx)(O.A,{checked:m,onChange:e=>{g(e.target.checked)},children:r("button.ForceTerminate")}),m&&(0,_.jsxs)(V.A,{children:[(0,_.jsx)(y.A.Paragraph,{type:"danger",children:r("session.ForceTerminateWarningMsg")}),(0,_.jsxs)("ul",{children:[(0,_.jsx)("li",{children:r("session.ForceTerminateWarningMsg2")}),(0,_.jsx)("li",{children:r("session.ForceTerminateWarningMsg3")})]}),"superadmin"===h&&(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(V.A,{type:"inner",title:r("session.ContainerToCleanUp"),children:k().chain(c).map((e=>{var n;return null===e||void 0===e||null===(n=e.kernel_nodes)||void 0===n?void 0:n.edges})).map((e=>null===e||void 0===e?void 0:e.map((e=>null===e||void 0===e?void 0:e.node)))).flatten().groupBy("agent_id").map(((e,n)=>(0,_.jsxs)(_.Fragment,{children:[n,(0,_.jsx)("ul",{children:e.map((e=>(0,_.jsx)("li",{children:(0,_.jsx)(y.A.Text,{copyable:!0,children:e.container_id})},e.container_id)))},n)]}))).value()})})]})]})})};var J,X=l(32582),Z=l(82919),ee=l(52335),ne=l(10566),le=l(33879),ie=l(15517);const ae=e=>!["TERMINATED","CANCELLED"].includes((null===e||void 0===e?void 0:e.status)||""),se=e=>{const{t:n}=(0,f.Bd)(),{token:i}=T.A.useToken(),a={runTerminal:e=>{globalThis.appLauncher.runTerminal(e)},showLauncher:e=>{}},t=(0,s.CX)(),r=(0,x.useFragment)(void 0!==J?J:J=l(79825),e.sessionFrgmt),[o,d]=(0,I.useState)(!1),[u,c]=(0,I.useState)(!1),[m,g]=(0,I.useState)(!1);return r&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(Z.A,{title:n("session.ExecuteTerminalApp"),children:(0,_.jsx)(ee.Ay,{disabled:!ae(r),icon:(0,_.jsx)(ne.A,{}),onClick:()=>{a.runTerminal(null===r||void 0===r?void 0:r.row_id)}})}),(0,_.jsx)(Y,{sessionFrgmts:[r],open:o,onRequestClose:()=>{d(!1)}}),(0,_.jsx)(Z.A,{title:n("session.SeeContainerLogs"),children:(0,_.jsx)(ee.Ay,{icon:(0,_.jsx)(le.A,{}),onClick:()=>{c(!0)}})}),(0,_.jsx)($.A,{sessionFrgmt:r,open:u,onCancel:()=>{c(!1)}}),(0,_.jsx)(Z.A,{title:n("session.RequestContainerCommit"),children:(0,_.jsx)(ee.Ay,{disabled:(!t.supports("image-commit")||!t._config.enableContainerCommit)&&"system"!==r.type,icon:(0,_.jsx)(X.A,{style:{fontSize:14}}),onClick:()=>{g(!0)}})}),(0,_.jsx)(z,{sessionFrgmt:r,open:m,onRequestClose:()=>g(!1)}),(0,_.jsx)(Z.A,{title:n("session.TerminateSession"),children:(0,_.jsx)(ee.Ay,{disabled:!ae(r),icon:(0,_.jsx)(ie.A,{color:ae(r)?i.colorError:void 0}),onClick:()=>{d(!0)}})})]})};var te,re,oe=l(30351);function de(e){let n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!l){const[n,l]=e;return n<2*l?"red":n<10*l?"orange":"green"}return"and"===l&&k().every(e,(e=>{let[l,i]=e;return l<Math.min(2*i,i+5)?(n="red",!0):l<Math.min(10*i,i+10)?(n="orange",!0):(n="green",!0)})),"or"===l&&k().some(e,(e=>{let[l,i]=e;return l<Math.min(2*i,i+5)?(n="red",!0):l<Math.min(10*i,i+10)?(n="orange",!0):(n="green",!0)})),n}function ue(e,n){return"remaining"===n?!e.remaining||e.remaining<3600?"red":e.remaining<14400?"orange":"green":e.extra&&(!e.remaining||e.remaining<14400)?de(e.extra.resources,e.extra.thresholds_check_operator):void 0}const ce=e=>{let{sessionNodeFrgmt:n=null,sessionFrgmt:i=null,direction:a="row"}=e;const{t:s}=(0,f.Bd)(),{token:t}=T.A.useToken(),{mergedResourceSlots:r}=(0,d.Hv)(),u=(0,x.useFragment)(void 0!==te?te:te=l(7281),n),c=(0,x.useFragment)(void 0!==re?re:re=l(73921),i),m=JSON.parse((null===u||void 0===u?void 0:u.idle_checks)||(null===c||void 0===c?void 0:c.idle_checks)||"{}"),h=e=>s("network_timeout"===e?"session.NetworkIdleTimeout":"session_lifetime"===e?"session.MaxSessionLifetime":"session.UtilizationIdleTimeout");return(0,_.jsx)(p.A,{direction:a,align:"stretch",gap:"sm",children:k().map(m,((e,n)=>{var l,i;return e.remaining?(0,_.jsxs)(p.A,{style:{flex:1},direction:"column",align:"stretch",children:[(0,_.jsxs)(p.A,{gap:"xxs",children:[(0,_.jsx)(y.A.Text,{children:h(n)}),"utilization"===n&&(0,_.jsx)(Z.A,{title:(0,_.jsxs)(_.Fragment,{children:[`${s("session.Utilization")} / ${s("session.Threshold")} (%)`,(0,_.jsx)("br",{}),k().map(null===(l=e.extra)||void 0===l?void 0:l.resources,((e,n)=>{var l;const i=["cpu_util","mem"].includes(n)?k().split(n,"_")[0]:k().split(n,"_")[0]+".device",[a,s]=e;return(0,_.jsxs)(p.A,{gap:"xs",children:[(0,_.jsx)(y.A.Text,{style:{color:t.colorWhite},children:`${null===r||void 0===r||null===(l=r[i])||void 0===l?void 0:l.human_readable_name}:`}),(0,_.jsx)(y.A.Text,{style:{color:de(e)},children:`${a>=0?(0,o.Z1)(a,1):"-"} / ${s}`}),(0,_.jsx)("br",{})]},n)}))]}),children:(0,_.jsx)(oe.A,{style:{color:t.colorTextSecondary,cursor:"pointer"}})})]}),e.remaining>=0?(0,_.jsx)(g.A,{values:[{label:(i=e.remaining_time_type,s("expire_after"===i?"session.ExpiresAfter":"session.GracePeriod")),color:ue(e,"utilization"===n?"utilization":"remaining")},{label:(0,o.bB)((new Date).toISOString(),new Date((new Date).getTime()+1e3*(e.remaining||0)).toISOString()),color:ue(e,"utilization"===n?"utilization":"remaining")}]}):(0,_.jsx)(y.A.Text,{type:"danger",children:s("session.TimeoutExceeded")})]},n):null}))})};var me,ge=l(61207),pe=l(5415);const ye={INTERACTIVE:"green",BATCH:"darkgreen",INFERENCE:"blue"},he=e=>{let{sessionFrgmt:n}=e;const i=(0,x.useFragment)(void 0!==me?me:me=l(15934),n);return(0,_.jsx)(h.A,{color:k().get(ye,k().toUpper(i.type||"")),children:k().toUpper(i.type||"")})};var ve=l(75863);const ke=e=>{let{...n}=e;const{t:l}=(0,f.Bd)(),{token:i}=T.A.useToken();return(0,_.jsxs)(D.A,{title:l("session.IdleChecks"),footer:null,width:700,...n,children:[(0,_.jsx)(y.A.Text,{children:l("session.IdleChecksDesc")}),(0,_.jsx)(y.A.Title,{level:5,children:l("session.MaxSessionLifetime")}),(0,_.jsx)("p",{children:l("session.MaxSessionLifetimeDesc")}),(0,_.jsx)(y.A.Title,{level:5,children:l("session.NetworkIdleTimeout")}),(0,_.jsx)("p",{children:l("session.NetworkIdleTimeoutDesc")}),(0,_.jsx)(y.A.Title,{level:5,children:l("session.UtilizationIdleTimeout")}),(0,_.jsx)("p",{children:l("session.UtilizationIdleTimeoutDesc")}),(0,_.jsxs)(p.A,{direction:"column",align:"stretch",style:{marginLeft:i.marginMD},children:[(0,_.jsx)(y.A.Title,{level:5,style:{margin:0},children:l("session.GracePeriod")}),(0,_.jsx)("p",{children:l("session.GracePeriodDesc")}),(0,_.jsx)(y.A.Title,{level:5,style:{margin:0},children:l("session.UtilizationThreshold")}),(0,_.jsx)("p",{children:l("session.UtilizationThresholdDesc")})]})]})};var fe,xe,_e=l(90184),Se=l(95950),Fe=l(2759),be=l(38639),je=l(9769),Ae=l(58325),Te=l(91867),Ce=l(9542);const Ke=e=>{var n;let{id:i,fetchKey:a}=e;const{t:t}=(0,f.Bd)(),{token:m}=T.A.useToken(),{md:g}=je.Ay.useBreakpoint(),{open:v}=(0,ve.useFolderExplorerOpener)(),S=(0,u.hd)(),b=(0,d.Am)(),j=(0,s.CX)(),[A,C]=(0,I.useState)(!1),{session_for_project_id:K}=(0,x.useLazyLoadQuery)(void 0!==fe?fe:fe=l(66427),{uuid:i},{fetchPolicy:"network-only"}),{session:N,legacy_session:w}=(0,x.useLazyLoadQuery)(void 0!==xe?xe:xe=l(4078),{id:(0,o.wc)("ComputeSessionNode",i),uuid:i,project_id:(null===K||void 0===K?void 0:K.group_id)||S.id},{fetchPolicy:"network-only",fetchKey:a}),R=(null===w||void 0===w?void 0:w.image)&&(null===w||void 0===w?void 0:w.architecture)&&w.image+"@"+w.architecture,E=JSON.parse((null===N||void 0===N?void 0:N.idle_checks)||(null===w||void 0===w?void 0:w.idle_checks)||"{}"),D=k().min(k().values(E).map((e=>e.remaining)).filter(Boolean)),U=j._config.showKernelList;return N?(0,_.jsxs)(p.A,{direction:"column",gap:"lg",align:"stretch",children:[(null===K||void 0===K?void 0:K.group_id)!==S.id&&(0,_.jsx)(Ae.A,{message:t("session.NotInProject"),type:"warning",showIcon:!0}),D&&D<3600&&(0,_.jsx)(Ae.A,{message:t("session.IdleCheckExpirationWarning"),type:"warning",showIcon:!0}),(0,_.jsxs)(p.A,{direction:"column",gap:"sm",children:[(0,_.jsxs)(p.A,{direction:"row",justify:"between",align:"start",style:{alignSelf:"stretch"},gap:"sm",children:[(0,_.jsx)(L,{sessionFrgmt:N,component:Ce.A,level:3,style:{margin:0,color:["TERMINATED","CANCELLED"].includes(N.status||"")?m.colorTextTertiary:void 0},editable:!["TERMINATED","CANCELLED"].includes(N.status||"")}),(0,_.jsx)(ee.Ay.Group,{size:"large",children:(0,_.jsx)(se,{sessionFrgmt:N})})]}),(0,_.jsxs)(M.A,{bordered:!0,column:g?2:1,children:[(0,_.jsx)(M.A.Item,{label:t("session.SessionId"),span:g?2:1,children:(0,_.jsx)(y.A.Text,{copyable:!0,style:{fontFamily:"monospace"},children:N.row_id})}),("admin"===b||"superadmin"===b)&&(0,_.jsx)(M.A.Item,{label:t("credential.UserID"),span:g?2:1,children:null===w||void 0===w?void 0:w.user_email}),(0,_.jsx)(M.A.Item,{label:t("session.Status"),contentStyle:{display:"flex",gap:m.marginSM},children:(0,_.jsx)(pe.A,{sessionFrgmt:N,showInfo:!0})}),(0,_.jsx)(M.A.Item,{label:t("session.SessionType"),children:(0,_.jsx)(he,{sessionFrgmt:N})}),(0,_.jsx)(M.A.Item,{label:t("session.launcher.Environments"),children:R?(0,_.jsxs)(p.A,{gap:"sm",children:[(0,_.jsx)(_e.A,{image:R}),(0,_.jsx)(p.A,{children:(0,_.jsx)(r.Ay,{image:R})})]}):"-"}),(0,_.jsx)(M.A.Item,{label:t("session.launcher.MountedFolders"),children:j.supports("vfolder-mounts")?k().map(k().zip(null===w||void 0===w?void 0:w.mounts,null===N||void 0===N?void 0:N.vfolder_mounts),(e=>{const[n,l]=e;return(0,_.jsx)(ee.Ay,{type:"link",size:"small",icon:(0,_.jsx)(Fe.A,{}),onClick:()=>{v(null!==l&&void 0!==l?l:"")},children:n},l)})):null===w||void 0===w||null===(n=w.mounts)||void 0===n?void 0:n.join(", ")}),(0,_.jsx)(M.A.Item,{label:t("session.launcher.ResourceAllocation"),children:(0,_.jsxs)(p.A,{gap:"sm",wrap:"wrap",children:[(0,_.jsx)(Z.A,{title:t("session.ResourceGroup"),children:(0,_.jsx)(h.A,{children:N.scaling_group})}),(0,_.jsx)(c.ResourceNumbersOfSession,{resource:JSON.parse(N.requested_slots||"{}")})]})}),(0,_.jsx)(M.A.Item,{label:t("session.Agent"),children:N.agent_ids||"-"}),(0,_.jsx)(M.A.Item,{label:t("session.Reservation"),span:g?2:1,children:(0,_.jsx)(p.A,{gap:"xs",wrap:"wrap",children:(0,_.jsx)(ge.A,{sessionFrgmt:N})})}),j.supports("idle-checks-gql")&&"RUNNING"===N.status&&D?(0,_.jsx)(M.A.Item,{label:(0,_.jsxs)(p.A,{gap:"xxs",children:[t("session.IdleChecks"),(0,_.jsx)(Z.A,{title:t("button.ClickForMoreDetails"),children:(0,_.jsx)(be.A,{style:{cursor:"pointer"},onClick:()=>C(!0)})})]}),span:g?2:1,children:(0,_.jsx)(ce,{sessionNodeFrgmt:N,sessionFrgmt:w,direction:g?"row":"column"})}):null,(0,_.jsx)(M.A.Item,{label:"Resource Usage",span:g?2:1,children:(0,_.jsx)(Se.A,{sessionFrgmt:N})})]})]}),U?(0,_.jsx)(I.Suspense,{fallback:(0,_.jsx)(Te.A,{}),children:(0,_.jsxs)(p.A,{direction:"column",gap:"sm",align:"stretch",children:[(0,_.jsx)(y.A.Title,{level:4,style:{margin:0},children:t("kernel.Kernels")}),(0,_.jsx)(F,{id:i,fetchKey:a})]})}):null,(0,_.jsx)(ke,{open:A,onCancel:()=>C(!1)})]}):(0,_.jsx)(Ae.A,{showIcon:!0,message:t("session.SessionNotFound"),type:"error",description:i})};var Ne=l(43622),we=l(43710);const Ie=e=>{let{sessionId:n,...l}=e;const{t:i}=(0,f.Bd)();(0,s.CX)();const[a,r]=(0,I.useTransition)(),[o,d]=(0,s.Tw)("first");return(0,t.$)((()=>{r((()=>{d()}))}),7e3),(0,_.jsx)(we.A,{title:i("session.SessionInfo"),width:800,keyboard:!1,...l,open:!!n,onClose:e=>{var n;null===(n=l.onClose)||void 0===n||n.call(l,e)},extra:(0,_.jsx)(Z.A,{title:i("button.Refresh"),children:(0,_.jsx)(ee.Ay,{loading:a,icon:(0,_.jsx)(Ne.A,{}),onClick:()=>{r((()=>{d()}))}})}),children:(0,_.jsx)(I.Suspense,{fallback:(0,_.jsx)(Te.A,{}),children:n&&(0,_.jsx)(Ke,{id:n,fetchKey:o})})})}},95950:(e,n,l)=>{l.d(n,{A:()=>f});var i,a=l(72375),s=l(7971),t=l(95762),r=l(72338),o=l(9571),d=l(50128),u=l(82919),c=l(92351),m=l(56625),g=l(46976),p=l.n(g),y=l(53350),h=l(22018),v=l(60598);const k=e=>{let{size:n,title:l,percent:i,tooltipTitle:s,description:c}=e;const{token:m}=o.A.useToken(),g=(0,a.Z1)(i||0,1)+"%";return"default"===n?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(r.A,{justify:"between",children:[(0,v.jsx)(d.A.Text,{children:l}),c&&(0,v.jsx)(d.A.Text,{type:"secondary",style:{fontSize:m.fontSizeSM},children:c})]}),(0,v.jsx)(t.A,{percent:p().toNumber(i),valueLabel:g,strokeColor:"#BFBFBF",progressStyle:{border:"none"}})]}):(0,v.jsx)(u.A,{title:s||l,placement:"left",children:(0,v.jsxs)(r.A,{direction:"row",gap:"xxs",children:[(0,v.jsx)(r.A,{style:{width:p().max([Math.round(1.4*p().toNumber(i)),3]),height:12,backgroundColor:"#BFBFBF"}}),(0,v.jsx)(d.A.Text,{style:{fontSize:m.fontSizeSM,lineHeight:`${m.fontSizeSM}px`},children:p().toNumber(i).toFixed(0)+"%"})]})})},f=e=>{var n,t,o,u,g,f,x,_,S,F,b,j,A,T;let{sessionFrgmt:C,size:K="default"}=e;const{mergedResourceSlots:N}=(0,s.Hv)(),w=(0,h.useFragment)(void 0!==i?i:i=l(40379),C),I=p().get(w,"kernel_nodes.edges[0].node"),L=(0,y.useMemo)((()=>{var e;return JSON.parse(null!==(e=null===I||void 0===I?void 0:I.occupied_slots)&&void 0!==e?e:"{}")}),[null===I||void 0===I?void 0:I.occupied_slots]),R=p().keysIn(L),E=JSON.parse(null!==(n=p().get(w,"kernel_nodes.edges[0].node.live_stat"))&&void 0!==n?n:"{}"),D=(0,y.useMemo)((()=>Object.keys(E).sort(((e,n)=>{const l=e.includes("_util"),i=n.includes("_util"),a=e.includes("_mem"),s=n.includes("_mem");return l&&!i?-1:!l&&i?1:a&&!s?-1:!a&&s?1:0})).reduce(((e,n)=>(e[n]=E[n],e)),{})),[E]),M=function(e,n){var l,i,s,t;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return`${null!==(l=null===(i=(0,a.Is)(e,"g",r))||void 0===i?void 0:i.numberFixed)&&void 0!==l?l:"-"} / ${null!==(s=null===(t=(0,a.Is)(n,"g",r))||void 0===t?void 0:t.numberFixed)&&void 0!==s?s:"-"} GiB`},U=(0,a.LY)([(null===D||void 0===D?void 0:D.cpu_util)&&(0,v.jsx)(k,{size:K,title:null===N||void 0===N||null===(t=N.cpu)||void 0===t?void 0:t.human_readable_name,percent:(null===D||void 0===D||null===(o=D.cpu_util)||void 0===o?void 0:o.pct)||0},"cpu"),(null===D||void 0===D?void 0:D.mem)&&(0,v.jsx)(k,{size:K,title:null===N||void 0===N||null===(u=N.mem)||void 0===u?void 0:u.human_readable_name,percent:(null===D||void 0===D||null===(g=D.mem)||void 0===g?void 0:g.pct)||0,description:M(null===D||void 0===D||null===(f=D.mem)||void 0===f?void 0:f.current,null===L||void 0===L?void 0:L.mem),tooltipTitle:(0,v.jsxs)(r.A,{direction:"column",align:"stretch",children:[null===N||void 0===N||null===(x=N.mem)||void 0===x?void 0:x.human_readable_name,(0,v.jsx)("br",{}),M(null===D||void 0===D||null===(_=D.mem)||void 0===_?void 0:_.current,null===L||void 0===L?void 0:L.mem)]})},"mem"),...p().map(p().omit(D,"cpu_util","cpu_used","mem"),((e,n)=>{var l,i;const a=p().split(n,"_")[0];let s=p().find(R,(e=>p().includes(e,a)));return"small"!==K||null!==n&&void 0!==n&&n.endsWith("mem")||(s=void 0),s?(0,v.jsx)(k,{size:K,title:(0,v.jsxs)(v.Fragment,{children:[null===N||void 0===N||null===(l=N[s])||void 0===l?void 0:l.human_readable_name,(0,v.jsxs)(d.A.Text,{type:"secondary",children:[p().includes(n,"util")&&" (util)",p().includes(n,"mem")&&" (mem)"]})]}),percent:e.pct||0,description:p().includes(n,"mem")?M(null===e||void 0===e?void 0:e.current,null===e||void 0===e?void 0:e.capacity):void 0,tooltipTitle:(0,v.jsxs)(r.A,{direction:"column",align:"stretch",children:[null===N||void 0===N||null===(i=N[s])||void 0===i?void 0:i.human_readable_name,p().includes(n,"mem")&&(0,v.jsxs)(v.Fragment,{children:["(mem)",(0,v.jsx)("br",{}),M(null===e||void 0===e?void 0:e.current,null===e||void 0===e?void 0:e.capacity)]})]})},n):null}))]);return(0,v.jsxs)(c.A,{gutter:[16,16],children:["default"===K?p().map(U,((e,n)=>(0,v.jsx)(m.A,{xs:24,sm:12,children:(0,v.jsx)(r.A,{direction:"column",align:"stretch",children:e})},n))):(0,v.jsx)(r.A,{direction:"column",align:"stretch",gap:3,children:U}),"default"===K&&(0,v.jsx)(m.A,{span:24,children:(0,v.jsx)(r.A,{justify:"end",children:(0,v.jsx)(d.A.Text,{children:`I/O Read: ${null!==(S=null===(F=(0,a.CE)(null===D||void 0===D||null===(b=D.io_read)||void 0===b?void 0:b.current,"m"))||void 0===F?void 0:F.numberUnit)&&void 0!==S?S:"-"}B / Write: ${null!==(j=null===(A=(0,a.CE)(null===D||void 0===D||null===(T=D.io_write)||void 0===T?void 0:T.current,"m"))||void 0===A?void 0:A.numberUnit)&&void 0!==j?j:"-"}B`})})})]})}},66427:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"uuid"}],n=[{kind:"Variable",name:"id",variableName:"uuid"}],l={alias:null,args:null,kind:"ScalarField",name:"group_id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"SessionDetailContentLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"SessionDetailContentLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"1c0255a2836eb7e492954c7ab0212c7f",id:null,metadata:{},name:"SessionDetailContentLegacyQuery",operationKind:"query",text:"query SessionDetailContentLegacyQuery(\n  $uuid: UUID!\n) {\n  session_for_project_id: compute_session(id: $uuid) {\n    group_id\n    id\n  }\n}\n"}}}();i.hash="d6a0dfbccdec8393f1a058dab48a0757";const a=i},4078:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i=function(){var e={defaultValue:null,kind:"LocalArgument",name:"id"},n={defaultValue:null,kind:"LocalArgument",name:"project_id"},l={defaultValue:null,kind:"LocalArgument",name:"uuid"},i=[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"project_id",variableName:"project_id"}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"project_id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"resource_opts",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"vfolder_mounts",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"terminated_at",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"agent_ids",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"requested_slots",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null},k=[{kind:"Variable",name:"id",variableName:"uuid"}],f={alias:null,args:null,kind:"ScalarField",name:"image",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"mounts",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"user_email",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null};return{fragment:{argumentDefinitions:[e,n,l],kind:"Fragment",metadata:null,name:"SessionDetailContentQuery",selections:[{alias:"session",args:i,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[a,s,t,r,o,d,u,c,{kind:"RequiredField",field:m,action:"NONE",path:"session.created_at"},g,p,y,h,v,{args:null,kind:"FragmentSpread",name:"SessionStatusTagFragment"},{args:null,kind:"FragmentSpread",name:"SessionActionButtonsFragment"},{args:null,kind:"FragmentSpread",name:"SessionTypeTagFragment"},{args:null,kind:"FragmentSpread",name:"EditableSessionNameFragment"},{args:null,kind:"FragmentSpread",name:"SessionReservationFragment"},{args:null,kind:"FragmentSpread",name:"ContainerLogModalFragment"},{args:null,kind:"FragmentSpread",name:"SessionUsageMonitorFragment"},{args:null,kind:"FragmentSpread",name:"ContainerCommitModalFragment"},{args:null,kind:"FragmentSpread",name:"SessionIdleChecksNodeFragment"}],storageKey:null},{alias:"legacy_session",args:k,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[f,x,_,S,v,{args:null,kind:"FragmentSpread",name:"SessionIdleChecksFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,l,n],kind:"Operation",name:"SessionDetailContentQuery",selections:[{alias:"session",args:i,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[a,s,t,r,o,d,u,c,m,g,p,y,h,v,{alias:null,args:null,kind:"ScalarField",name:"status_info",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commit_status",storageKey:null},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"agent_id",storageKey:null},a,s,{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"priority",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"starts_at",storageKey:null}],storageKey:null},{alias:"legacy_session",args:k,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[f,x,_,S,v,a],storageKey:null}]},params:{cacheID:"e0308612a16a49c1d3f8af5b039313ca",id:null,metadata:{},name:"SessionDetailContentQuery",operationKind:"query",text:'query SessionDetailContentQuery(\n  $id: GlobalIDField!\n  $uuid: UUID!\n  $project_id: UUID!\n) {\n  session: compute_session_node(id: $id, project_id: $project_id) {\n    id\n    row_id\n    name\n    project_id\n    user_id\n    resource_opts\n    status\n    vfolder_mounts\n    created_at\n    terminated_at\n    scaling_group\n    agent_ids\n    requested_slots\n    idle_checks @since(version: "24.12.0")\n    ...SessionStatusTagFragment\n    ...SessionActionButtonsFragment\n    ...SessionTypeTagFragment\n    ...EditableSessionNameFragment\n    ...SessionReservationFragment\n    ...ContainerLogModalFragment\n    ...SessionUsageMonitorFragment\n    ...ContainerCommitModalFragment\n    ...SessionIdleChecksNodeFragment\n  }\n  legacy_session: compute_session(id: $uuid) {\n    image\n    mounts\n    user_email\n    architecture\n    idle_checks @since(version: "24.09.0")\n    ...SessionIdleChecksFragment\n    id\n  }\n}\n\nfragment ContainerCommitModalFragment on ComputeSessionNode {\n  id\n  name\n  row_id\n}\n\nfragment ContainerLogModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  status\n  access_key\n  kernel_nodes {\n    edges {\n      node {\n        id\n        row_id\n        container_id\n        cluster_idx\n        cluster_role\n      }\n    }\n  }\n}\n\nfragment EditableSessionNameFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  priority\n  user_id\n  status\n}\n\nfragment SessionActionButtonsFragment on ComputeSessionNode {\n  id\n  row_id\n  type\n  status\n  access_key\n  service_ports\n  commit_status\n  ...TerminateSessionModalFragment\n  ...ContainerLogModalFragment\n  ...ContainerCommitModalFragment\n}\n\nfragment SessionIdleChecksFragment on ComputeSession {\n  id\n  idle_checks @since(version: "24.09.0")\n}\n\nfragment SessionIdleChecksNodeFragment on ComputeSessionNode {\n  id\n  idle_checks @since(version: "24.12.0")\n}\n\nfragment SessionReservationFragment on ComputeSessionNode {\n  id\n  created_at\n  starts_at\n  terminated_at\n}\n\nfragment SessionStatusTagFragment on ComputeSessionNode {\n  id\n  name\n  status\n  status_info\n}\n\nfragment SessionTypeTagFragment on ComputeSessionNode {\n  type\n}\n\nfragment SessionUsageMonitorFragment on ComputeSessionNode {\n  kernel_nodes {\n    edges {\n      node {\n        live_stat\n        occupied_slots\n        id\n      }\n    }\n  }\n}\n\nfragment TerminateSessionModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  scaling_group\n  kernel_nodes {\n    edges {\n      node {\n        container_id\n        agent_id\n        id\n      }\n    }\n  }\n}\n'}}}();i.hash="93950b0e90c5428c5cac947b9590f657";const a=i},40379:(e,n,l)=>{l.r(n),l.d(n,{default:()=>a});const i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionUsageMonitorFragment",selections:[{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"62951e4aee90e7e894e7f47a02b84dab"},a=i},17898:(e,n,l)=>{l.d(n,{RM:()=>r,WN:()=>t});var i=l(46976),a=l.n(i);function s(e){return null===e||void 0===e?"":"number"===typeof e||"boolean"===typeof e?String(e):`"${(e=a().isString(e)?e:JSON.stringify(e)).replace(/"/g,'""')}"`}const t=(e,n)=>{const l=URL.createObjectURL(e),i=document.createElement("a");i.href=l,i.download=n,i.click(),URL.revokeObjectURL(l)},r=(e,n,l)=>{const i=((e,n)=>{const l=a().map(e,(e=>a().omit(e,"__fragments","__fragmentOwner","__id"))),i=a().keys(l[0]),t=a().map(l,(e=>a().map(e,((e,l)=>{var i;return null!==n&&void 0!==n&&n[l]&&(null===(i=n[l])||void 0===i?void 0:i.call(n,e))||e})))).map((e=>e.map(s).join(","))).join("\n");return[i.map(s).join(","),t].join("\n")})(e,l),r=new Blob([i],{type:"text/csv"});t(r,`${n}.csv`)}},57613:(e,n,l)=>{l.d(n,{b:()=>t});var i=l(91788);const a={"Cannot read property 'map' of null":"error.APINotSupported","TypeError: NetworkError when attempting to fetch resource.":"error.NetworkConnectionFailed","Login failed. Check login information.":"error.LoginFailed","User credential mismatch.":"error.LoginFailed","Authentication failed. Check information and manager status.":"error.AuthenticationFailed","Too many failed login attempts":"error.TooManyLoginFailures","server responded failure: 400 Bad Request - The virtual folder already exists with the same name.":"error.VirtualFolderAlreadyExist","400 Bad Request - The virtual folder already exists with the same name.":"error.VirtualFolderAlreadyExist","server responded failure: 400 Bad Request - One of your accessible vfolders already has the name you requested.":"error.VirtualFolderAlreadyExist","server responded failure: 400 Bad Request - You cannot create more vfolders.":"error.MaximumVfolderCreation","server responded failure: 400 Bad Request - Missing or invalid API parameters. (You cannot create more vfolders.)":"error.MaximumVfolderCreation","server responded failure: 400 Bad Request - Cannot change the options of a vfolder that is not owned by myself.":"error.CannotChangeVirtualFolderOption","server responded failure: 403 Forbidden - Cannot share private dot-prefixed vfolders.":"error.CannotSharePrivateAutomountFolder","server responded failure: 404 Not Found - No such vfolder invitation.":"error.FolderSharingNotAvailableToUser","server responded failure: 404 Not Found - No such user.":"error.FolderSharingNotAvailableToUser","server responded failure: 412 Precondition Failed - You have reached your resource limit.":"error.ReachedResourceLimit","Cannot read property 'split' of undefined":"error.UserHasNoGroup"},s={"\\w*not found matched token with email\\w*":"error.InvalidSignupToken","\\w*Access key not found\\w*":"error.LoginInformationMismatch","\\w*401 Unauthorized - Credential/signature mismatch\\w*":"error.LoginInformationMismatch",'integrity error: duplicate key value violates unique constraint "pk_resource_presets"[\\n]DETAIL:  Key \\(name\\)=\\([\\w]+\\) already exists.[\\n]':"error.ResourcePolicyAlreadyExist",'integrity error: duplicate key value violates unique constraint "pk_scaling_groups"[\\n]DETAIL:  Key \\(name\\)=\\([\\w]+\\) already exists.[\\n]':"error.ScalingGroupAlreadyExist",'integrity error: duplicate key value violates unique constraint "uq_users_username"[\\n]DETAIL:  Key \\(username\\)=\\([\\w]+\\) already exists.[\\n]':"error.UserNameAlreadyExist","server responded failure: 400 Bad Request - Missing or invalid API parameters. (Your resource quota is exceeded. (cpu=24 mem=512g cuda.shares=80))":"error.ResourceLimitExceed",'\\w*Key \\(name\\)=\\(.+\\) is still referenced from table "keypairs"\\.\\w*':"error.ResourcePolicyStillReferenced","Your resource request is smaller than the minimum required by the image. (\\w*)":"error.SmallerResourceThenImageRequires"},t=()=>{const{t:e}=(0,i.Bd)();return{relieve:n=>{if("undefined"===typeof n)return void 0===globalThis.backendaiclient||null===globalThis.backendaiclient?"_DISCONNECTED":"Problem occurred.";if(!0===globalThis.backendaiwebui.debug)return n;if({}.hasOwnProperty.call(a,n))return e(a[n]);for(const l of Object.keys(s))if(RegExp(l).test(n))return e(s[l]);return n}}}}}]);
//# sourceMappingURL=3492.426b2385.chunk.js.map