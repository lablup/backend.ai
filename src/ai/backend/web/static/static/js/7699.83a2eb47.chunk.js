"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[7699],{67699:(e,n,o)=>{o.r(n),o.d(n,{default:()=>$});var r=o(72375),t=o(23441),i=o(9189),l=o(72338),a=o(10424),s=o(40991),c=o(53350),d=o(68875),u=o(90055),p=function(e,n){return c.createElement(u.A,(0,s.A)({},e,{ref:n,icon:d.A}))};const g=c.forwardRef(p);var m=o(39745),v=function(e,n){return c.createElement(u.A,(0,s.A)({},e,{ref:n,icon:m.A}))};const f=c.forwardRef(v);var w=o(5743),b=function(e,n){return c.createElement(u.A,(0,s.A)({},e,{ref:n,icon:w.A}))};const x=c.forwardRef(b);var h,A=o(9571),S=o(9769),y=o(91867),C=o(52335),I=o(79773),j=o(38385),k=o(82919),M=o(50128),D=o(43403),N=o(91788),O=o(22018),E=o(60598);const L=(0,D.rU)((e=>{let{token:n,css:o}=e;return{baiModalHeader:o`
    .ant-modal-title {
      width: 100%;
      margin-right: ${n.marginXXL}px;
    }
  `}})),z=e=>{let{vfolderID:n}=e;const{token:t}=A.A.useToken(),{vfolder:i,vfolder_node:l}=(0,O.useLazyLoadQuery)(void 0!==h?h:h=o(70723),{vfolderID:n,vfolderUUID:btoa("VirtualFolderNode:"+(0,r._4)(n))},{fetchPolicy:"store-and-network"}),a=(null===i||void 0===i?void 0:i.name)||(null===l||void 0===l?void 0:l.name)||"";return(0,E.jsx)(k.A,{title:a,children:(0,E.jsx)(M.A.Title,{level:3,style:{marginTop:t.marginSM},ellipsis:!0,children:a})})},$=e=>{let{vfolderID:n,onRequestClose:o,...r}=e;const{t:s}=(0,N.Bd)(),{token:d}=A.A.useToken(),{styles:u}=L(),{lg:p}=S.Ay.useBreakpoint(),[m,v]=(0,c.useState)(!1),[w,b]=(0,c.useState)(!1),h=(0,c.useRef)(null);return(0,t.CX)(),(0,c.useEffect)((()=>{const e=e=>{v(e.detail||!1)},n=e=>{b(e.detail||!1)};return document.addEventListener("folderExplorer:connected",e),document.addEventListener("folderExplorer:columnSelected",n),()=>{document.removeEventListener("folderExplorer:connected",e),document.removeEventListener("folderExplorer:columnSelected",n)}}),[]),(0,E.jsx)(i.A,{className:u.baiModalHeader,centered:!0,width:1200,destroyOnClose:!0,footer:null,title:(0,E.jsxs)(l.A,{justify:"between",gap:d.marginMD,style:{width:"100%"},children:[(0,E.jsx)(l.A,{gap:d.marginMD,style:{flex:1},children:(0,E.jsx)(c.Suspense,{fallback:(0,E.jsx)(y.A.Input,{active:!0}),children:(0,E.jsx)(z,{vfolderID:n})})}),(0,E.jsxs)(l.A,{justify:"end",gap:d.marginSM,style:{flex:p?2:1},children:[(0,E.jsx)(C.Ay,{danger:!0,disabled:!w||!m,icon:(0,E.jsx)(a.A,{}),onClick:()=>{var e;null===(e=h.current)||void 0===e||e._openDeleteMultipleFileDialog()},children:p&&s("button.Delete")}),(0,E.jsx)(C.Ay,{disabled:!m,icon:(0,E.jsx)(g,{}),onClick:()=>{var e;null===(e=h.current)||void 0===e||e.openMkdirDialog()},children:p&&s("button.Create")}),(0,E.jsx)(I.A,{disabled:!m,menu:{items:[{key:"upload files",label:s("data.explorer.UploadFiles"),icon:(0,E.jsx)(f,{}),onClick:()=>{var e;null===(e=h.current)||void 0===e||e.handleUpload("file")}},{key:"upload folder",label:s("data.explorer.UploadFolder"),icon:(0,E.jsx)(g,{}),onClick:()=>{var e;null===(e=h.current)||void 0===e||e.handleUpload("folder")}}]},children:(0,E.jsx)(C.Ay,{icon:(0,E.jsx)(x,{}),children:p&&"Upload"})}),(0,E.jsx)(C.Ay,{icon:(0,E.jsx)(j.A,{width:"18px",src:"/resources/icons/filebrowser.svg",alt:"File Browser",preview:!1}),onClick:()=>{var e;return null===(e=h.current)||void 0===e?void 0:e._executeFileBrowser()},children:p&&s("data.explorer.ExecuteFileBrowser")}),(0,E.jsx)(C.Ay,{icon:(0,E.jsx)(j.A,{width:"18px",src:"/resources/icons/sftp.png",alt:"SSH / SFTP",preview:!1}),onClick:()=>{var e;null===(e=h.current)||void 0===e||e._executeSSHProxyAgent()},children:p&&s("data.explorer.RunSSH/SFTPserver")})]})]}),onCancel:()=>{o()},...r,children:(0,E.jsx)("backend-ai-folder-explorer",{ref:h,active:!0,vfolderID:n})})}},70723:(e,n,o)=>{o.r(n),o.d(n,{default:()=>t});const r=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"vfolderID"},{defaultValue:null,kind:"LocalArgument",name:"vfolderUUID"}],n=[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],o=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"vfolderID"}],concreteType:"VirtualFolder",kind:"LinkedField",name:"vfolder",plural:!1,selections:n,storageKey:null},{alias:null,args:[{kind:"Variable",name:"id",variableName:"vfolderUUID"}],concreteType:"VirtualFolderNode",kind:"LinkedField",name:"vfolder_node",plural:!1,selections:n,storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LegacyFolderExplorerVFolderNameTitleQuery",selections:o,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LegacyFolderExplorerVFolderNameTitleQuery",selections:o},params:{cacheID:"d068f3eaad8b8108353e61ba6cdf73e9",id:null,metadata:{},name:"LegacyFolderExplorerVFolderNameTitleQuery",operationKind:"query",text:'query LegacyFolderExplorerVFolderNameTitleQuery(\n  $vfolderID: String!\n  $vfolderUUID: String!\n) {\n  vfolder(id: $vfolderID) @deprecatedSince(version: "24.03.4") {\n    id\n    name\n  }\n  vfolder_node(id: $vfolderUUID) @since(version: "24.03.4") {\n    id\n    name\n  }\n}\n'}}}();r.hash="9c571e622253de1513d54bf011a863ef";const t=r},39745:(e,n,o)=>{o.d(n,{A:()=>r});const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"}},68875:(e,n,o)=>{o.d(n,{A:()=>r});const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M484 443.1V528h-84.5c-4.1 0-7.5 3.1-7.5 7v42c0 3.8 3.4 7 7.5 7H484v84.9c0 3.9 3.2 7.1 7 7.1h42c3.9 0 7-3.2 7-7.1V584h84.5c4.1 0 7.5-3.2 7.5-7v-42c0-3.9-3.4-7-7.5-7H540v-84.9c0-3.9-3.1-7.1-7-7.1h-42c-3.8 0-7 3.2-7 7.1zm396-144.7H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder-add",theme:"outlined"}},5743:(e,n,o)=>{o.d(n,{A:()=>r});const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"}},38385:(e,n,o)=>{o.d(n,{A:()=>R});var r=o(53350),t=o(60567),i=o(62097),l=o.n(i),a=o(79190),s=o(44432),c=o(58518),d=o(22028),u=o(45467),p=o(43),g=o(6161),m=o(94008),v=o(24899),f=o(18864),w=o(92657),b=o(34869),x=o(25206),h=o(18682),A=o(68049),S=o(9153),y=o(18300),C=o(92778),I=o(22162),j=o(53387),k=o(14275),M=o(37453);const D=e=>({position:e||"absolute",inset:0}),N=e=>{const{iconCls:n,motionDurationSlow:o,paddingXXS:r,marginXXS:t,prefixCls:i,colorTextLightSolid:l}=e;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:l,background:new S.FastColor("#000").setA(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${o}`,[`.${i}-mask-info`]:Object.assign(Object.assign({},C.L9),{padding:`0 ${(0,A.unit)(r)}`,[n]:{marginInlineEnd:t,svg:{verticalAlign:"baseline"}}})}},O=e=>{const{previewCls:n,modalMaskBg:o,paddingSM:r,marginXL:t,margin:i,paddingLG:l,previewOperationColorDisabled:a,previewOperationHoverColor:s,motionDurationSlow:c,iconCls:d,colorTextLightSolid:u}=e,p=new S.FastColor(o).setA(.1),g=p.clone().setA(.2);return{[`${n}-footer`]:{position:"fixed",bottom:t,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:e.previewOperationColor,transform:"translateX(-50%)"},[`${n}-progress`]:{marginBottom:i},[`${n}-close`]:{position:"fixed",top:t,right:{_skip_check_:!0,value:t},display:"flex",color:u,backgroundColor:p.toRgbString(),borderRadius:"50%",padding:r,outline:0,border:0,cursor:"pointer",transition:`all ${c}`,"&:hover":{backgroundColor:g.toRgbString()},[`& > ${d}`]:{fontSize:e.previewOperationSize}},[`${n}-operations`]:{display:"flex",alignItems:"center",padding:`0 ${(0,A.unit)(l)}`,backgroundColor:p.toRgbString(),borderRadius:100,"&-operation":{marginInlineStart:r,padding:r,cursor:"pointer",transition:`all ${c}`,userSelect:"none",[`&:not(${n}-operations-operation-disabled):hover > ${d}`]:{color:s},"&-disabled":{color:a,cursor:"not-allowed"},"&:first-of-type":{marginInlineStart:0},[`& > ${d}`]:{fontSize:e.previewOperationSize}}}}},E=e=>{const{modalMaskBg:n,iconCls:o,previewOperationColorDisabled:r,previewCls:t,zIndexPopup:i,motionDurationSlow:l}=e,a=new S.FastColor(n).setA(.1),s=a.clone().setA(.2);return{[`${t}-switch-left, ${t}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:e.calc(i).add(1).equal(),display:"flex",alignItems:"center",justifyContent:"center",width:e.imagePreviewSwitchSize,height:e.imagePreviewSwitchSize,marginTop:e.calc(e.imagePreviewSwitchSize).mul(-1).div(2).equal(),color:e.previewOperationColor,background:a.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${l}`,userSelect:"none","&:hover":{background:s.toRgbString()},"&-disabled":{"&, &:hover":{color:r,background:"transparent",cursor:"not-allowed",[`> ${o}`]:{cursor:"not-allowed"}}},[`> ${o}`]:{fontSize:e.previewOperationSize}},[`${t}-switch-left`]:{insetInlineStart:e.marginSM},[`${t}-switch-right`]:{insetInlineEnd:e.marginSM}}},L=e=>{const{motionEaseOut:n,previewCls:o,motionDurationSlow:r,componentCls:t}=e;return[{[`${t}-preview-root`]:{[o]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${o}-body`]:Object.assign(Object.assign({},D()),{overflow:"hidden"}),[`${o}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${r} ${n} 0s`,userSelect:"none","&-wrapper":Object.assign(Object.assign({},D()),{transition:`transform ${r} ${n} 0s`,display:"flex",justifyContent:"center",alignItems:"center","& > *":{pointerEvents:"auto"},"&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${o}-moving`]:{[`${o}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${t}-preview-root`]:{[`${o}-wrap`]:{zIndex:e.zIndexPopup}}},{[`${t}-preview-operations-wrapper`]:{position:"fixed",zIndex:e.calc(e.zIndexPopup).add(1).equal()},"&":[O(e),E(e)]}]},z=e=>{const{componentCls:n}=e;return{[n]:{position:"relative",display:"inline-block",[`${n}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${n}-img-placeholder`]:{backgroundColor:e.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${n}-mask`]:Object.assign({},N(e)),[`${n}-mask:hover`]:{opacity:1},[`${n}-placeholder`]:Object.assign({},D())}}},$=e=>{const{previewCls:n}=e;return{[`${n}-root`]:(0,I.aB)(e,"zoom"),"&":(0,j.p9)(e,!0)}},T=(0,k.OF)("Image",(e=>{const n=`${e.componentCls}-preview`,o=(0,M.mergeToken)(e,{previewCls:n,modalMaskBg:new S.FastColor("#000").setA(.45).toRgbString(),imagePreviewSwitchSize:e.controlHeightLG});return[z(o),L(o),(0,y.Dk)((0,M.mergeToken)(o,{componentCls:n})),$(o)]}),(e=>({zIndexPopup:e.zIndexPopupBase+80,previewOperationColor:new S.FastColor(e.colorTextLightSolid).setA(.65).toRgbString(),previewOperationHoverColor:new S.FastColor(e.colorTextLightSolid).setA(.85).toRgbString(),previewOperationColorDisabled:new S.FastColor(e.colorTextLightSolid).setA(.25).toRgbString(),previewOperationSize:1.5*e.fontSizeIcon})));var F=function(e,n){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(o[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var t=0;for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)n.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(e,r[t])&&(o[r[t]]=e[r[t]])}return o};const P={rotateLeft:r.createElement(f.A,null),rotateRight:r.createElement(w.A,null),zoomIn:r.createElement(x.A,null),zoomOut:r.createElement(h.A,null),close:r.createElement(g.A,null),left:r.createElement(m.A,null),right:r.createElement(v.A,null),flipX:r.createElement(b.A,null),flipY:r.createElement(b.A,{rotate:90})};var V=function(e,n){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(o[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var t=0;for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)n.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(e,r[t])&&(o[r[t]]=e[r[t]])}return o};const H=e=>{var n;const{prefixCls:o,preview:i,className:g,rootClassName:m,style:v}=e,f=V(e,["prefixCls","preview","className","rootClassName","style"]),{getPrefixCls:w,locale:b=p.A,getPopupContainer:x,image:h}=r.useContext(d.QO),A=w("image",o),S=w(),y=b.Image||p.A.Image,C=(0,u.A)(A),[I,j,k]=T(A,C),M=l()(m,j,k,C),D=l()(g,j,null===h||void 0===h?void 0:h.className),[N]=(0,s.YK)("ImagePreview","object"===typeof i?i.zIndex:void 0),O=r.useMemo((()=>{var e;if(!1===i)return i;const n="object"===typeof i?i:{},{getContainer:o,closeIcon:a,rootClassName:s}=n,d=V(n,["getContainer","closeIcon","rootClassName"]);return Object.assign(Object.assign({mask:r.createElement("div",{className:`${A}-mask-info`},r.createElement(t.A,null),null===y||void 0===y?void 0:y.preview),icons:P},d),{rootClassName:l()(M,s),getContainer:null!==o&&void 0!==o?o:x,transitionName:(0,c.b)(S,"zoom",n.transitionName),maskTransitionName:(0,c.b)(S,"fade",n.maskTransitionName),zIndex:N,closeIcon:null!==a&&void 0!==a?a:null===(e=null===h||void 0===h?void 0:h.preview)||void 0===e?void 0:e.closeIcon})}),[i,y,null===(n=null===h||void 0===h?void 0:h.preview)||void 0===n?void 0:n.closeIcon]),E=Object.assign(Object.assign({},null===h||void 0===h?void 0:h.style),v);return I(r.createElement(a.default,Object.assign({prefixCls:A,preview:O,rootClassName:M,className:D,style:E},f)))};H.PreviewGroup=e=>{var{previewPrefixCls:n,preview:o}=e,t=F(e,["previewPrefixCls","preview"]);const{getPrefixCls:i}=r.useContext(d.QO),p=i("image",n),g=`${p}-preview`,m=i(),v=(0,u.A)(p),[f,w,b]=T(p,v),[x]=(0,s.YK)("ImagePreview","object"===typeof o?o.zIndex:void 0),h=r.useMemo((()=>{var e;if(!1===o)return o;const n="object"===typeof o?o:{},r=l()(w,b,v,null!==(e=n.rootClassName)&&void 0!==e?e:"");return Object.assign(Object.assign({},n),{transitionName:(0,c.b)(m,"zoom",n.transitionName),maskTransitionName:(0,c.b)(m,"fade",n.maskTransitionName),rootClassName:r,zIndex:x})}),[o]);return f(r.createElement(a.default.PreviewGroup,Object.assign({preview:h,previewPrefixCls:g,icons:P},t)))};const R=H}}]);
//# sourceMappingURL=7699.83a2eb47.chunk.js.map