/*! For license information please see 7522.63fb87a6.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[7522],{55547(e,t,n){n.d(t,{A:()=>c});var a=n(90953);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};var s=n(37805);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}const o=(e,t)=>a.createElement(s.A,l({},e,{ref:t,icon:i}));const c=a.forwardRef(o)},77522(e,t,n){n.r(t),n.d(t,{default:()=>b});var a=n(5519),i=n(99634),s=n(82779),l=n(55547),o=n(88951),c=n(90953),r=n(48130),d=n(83037);const g=()=>{const[e,t]=(0,c.useState)(!1),[n,g]=(0,c.useState)(!1),{t:m}=(0,r.Bd)(),{upsertNotification:u}=(0,i.js)(),h=(0,a.CX)(),p=[{"data-testid":"maintenance-fix",title:m("maintenance.Fix"),settingItems:[{type:"custom",title:m("maintenance.MatchDatabase"),description:m("maintenance.DescMatchDatabase"),children:(0,d.jsx)(o.Ay,{icon:(0,d.jsx)(l.A,{}),onClick:()=>{t(!0),u({message:m("maintenance.RecalculateUsage"),description:m("maintenance.Recalculating"),open:!0,backgroundTask:{status:"pending",promise:h.maintenance.recalculate_usage().finally((()=>t(!1))),onChange:{pending:m("maintenance.Recalculating"),resolved:m("maintenance.RecalculationFinished"),rejected:m("maintenance.RecalculationFailed")}}})},loading:e,children:m(e?"maintenance.Recalculating":"maintenance.RecalculateUsage")}),showResetButton:!1}]},{"data-testid":"maintenance-images",title:m("maintenance.ImagesEnvironment"),settingItems:[{type:"custom",title:m("maintenance.RescanImageList"),description:m("maintenance.DescRescanImageList"),children:(0,d.jsx)(o.Ay,{icon:(0,d.jsx)(l.A,{}),onClick:()=>{g(!0),u({message:m("maintenance.RescanImages"),open:!0,backgroundTask:{status:"pending",promise:h.maintenance.rescan_images(),onChange:{pending:m("maintenance.RescanImageScanning"),resolved:e=>{const t=e;if(t.rescan_images.ok)return{backgroundTask:{status:"pending",taskId:t.rescan_images.task_id,promise:null,percent:0,onChange:{resolved:(e,t)=>(g(!1),m("maintenance.RescanImageFinished"))}},duration:0};throw new Error(m("maintenance.RescanFailed"))},rejected:(e,t)=>{const n=e;return g(!1),(null===n||void 0===n?void 0:n.message)||m("maintenance.RescanFailed")}}}})},loading:n,children:m(n?"maintenance.RescanImageScanning":"maintenance.RescanImages")}),showResetButton:!1}]}];return(0,d.jsx)(s.A,{settingGroups:p,showSearchBar:!0})};var m=n(29730),u=n(83765),h=n(81977),p=n(67313);const x=(0,p.withDefault)(p.StringParam,"maintenance"),b=()=>{const{t:e}=(0,r.Bd)(),[t,n]=(0,p.useQueryParam)("tab",x);return(0,d.jsx)(u.Zuv,{activeTabKey:t,onTabChange:e=>n(e),tabList:[{key:"maintenance",tab:e("webui.menu.Maintenance")}],children:(0,d.jsx)(c.Suspense,{fallback:(0,d.jsx)(m.A,{active:!0}),children:"maintenance"===t&&(0,d.jsx)(h.A,{children:(0,d.jsx)(g,{})})})})}},82779(e,t,n){n.d(t,{A:()=>L});var a,i=n(56276),s=n(11863),l=n(7871),o=n(34917),c=n(52378),r=n(48888),d=n(49749),g=n(85212),m=n(82481),u=n(25036),h=n(54814),p=n(54841),x=n(90855),b=n(16419),v=n(83765),y=n(32601),j=n(47984),A=n.n(j),f=n(90953),k=n(83037);const S=(0,b.rU)((e=>{let{css:t}=e;return{baiSettingItemCheckbox:t(a||(a=(0,l.A)(["\n    .ant-checkbox {\n      align-self: flex-start;\n      margin-top: 0.2rem;\n    }\n  "])))}})),w=e=>{const t=(0,o.c)(71),{"data-testid":n,type:a,title:s,description:l,children:b,defaultValue:j,value:w,onChange:C,onReset:O,selectProps:R,checkboxProps:T,showResetButton:I}=e,_=void 0===I||I,{token:B}=d.A.useToken(),{styles:E}=S(),[P,M]=(0,f.useState)(!1),[D,F]=(0,r.A)(!1),{toggle:L}=F;let N,z,U,W,G,X,V,K,Y,Q,Z,q,H,J,$,ee,te,ne,ae,ie,se;if(t[0]!==(null===T||void 0===T?void 0:T.disabled)||t[1]!==j||t[2]!==C||t[3]!==O||t[4]!==(null===R||void 0===R?void 0:R.disabled)||t[5]!==a){let e;t[8]!==j||t[9]!==C||t[10]!==O?(e=()=>{O?O():N&&C&&C(j)},t[8]=j,t[9]=C,t[10]=O,t[11]=e):e=t[11],z=e,N="select"===a&&!(null!==R&&void 0!==R&&R.disabled)||"checkbox"===a&&!(null!==T&&void 0!==T&&T.disabled)||"custom"===a,t[0]=null===T||void 0===T?void 0:T.disabled,t[1]=j,t[2]=C,t[3]=O,t[4]=null===R||void 0===R?void 0:R.disabled,t[5]=a,t[6]=N,t[7]=z}else N=t[6],z=t[7];return t[12]===Symbol.for("react.memo_cache_sentinel")?(U=()=>M(!0),W=()=>M(!1),t[12]=U,t[13]=W):(U=t[12],W=t[13]),t[14]!==B.fontSize?(G={fontSize:B.fontSize},t[14]=B.fontSize,t[15]=G):G=t[15],t[16]!==G||t[17]!==s?(X=(0,k.jsx)(g.A.Text,{strong:!0,style:G,children:s}),t[16]=G,t[17]=s,t[18]=X):X=t[18],t[19]!==j||t[20]!==N||t[21]!==w?(V=N&&void 0!==w&&null!==w&&j!==w&&(0,k.jsx)(m.A,{dot:!0,status:"warning"}),t[19]=j,t[20]=N,t[21]=w,t[22]=V):V=t[22],t[23]!==P||t[24]!==N||t[25]!==L||t[26]!==_?(K=N&&_&&(0,k.jsx)(u.A,{menu:{items:[{key:"reset",label:(0,y.t)("button.Reset"),onClick:()=>L(),danger:!0}]},placement:"topLeft",onOpenChange:e=>e&&M(!0),children:(0,k.jsx)(v.Fvl,{icon:(0,k.jsx)(c.A,{}),type:"text",style:{width:20,height:20,opacity:P?1:0,transition:"opacity 0.2s ease-in-out"}})}),t[23]=P,t[24]=N,t[25]=L,t[26]=_,t[27]=K):K=t[27],t[28]!==X||t[29]!==V||t[30]!==K?(Y=(0,k.jsx)(v.OOm,{direction:"row",gap:"xxs",children:(0,k.jsxs)(v.OOm,{gap:"xxs",align:"start",children:[X,V,K]})}),t[28]=X,t[29]=V,t[30]=K,t[31]=Y):Y=t[31],t[32]!==b||t[33]!==l||t[34]!==a?(Q="custom"===a&&(0,k.jsxs)(v.OOm,{direction:"column",gap:"xs",align:"start",style:{width:"100%"},children:[l,b]}),t[32]=b,t[33]=l,t[34]=a,t[35]=Q):Q=t[35],t[36]!==T||t[37]!==l||t[38]!==C||t[39]!==E||t[40]!==a||t[41]!==w?(Z="checkbox"===a&&(0,k.jsx)(h.A,(0,i.A)((0,i.A)({className:E.baiSettingItemCheckbox,checked:w,onChange:e=>{null===C||void 0===C||C(e.target.checked)}},T),{},{children:(0,k.jsx)(g.A.Text,{type:null!==T&&void 0!==T&&T.disabled?"secondary":void 0,children:l})})),t[36]=T,t[37]=l,t[38]=C,t[39]=E,t[40]=a,t[41]=w,t[42]=Z):Z=t[42],t[43]!==l||t[44]!==C||t[45]!==R||t[46]!==B.marginXS||t[47]!==a||t[48]!==w?(q="select"===a&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(g.A.Text,{type:null!==R&&void 0!==R&&R.disabled?"secondary":void 0,children:l}),(0,k.jsx)(p.A,(0,i.A)({value:w,popupMatchSelectWidth:!1,onChange:e=>{null===C||void 0===C||C(e)},style:(0,i.A)({marginTop:B.marginXS,width:"fit-content"},null===R||void 0===R?void 0:R.style)},A().omit(R,["style"])))]}),t[43]=l,t[44]=C,t[45]=R,t[46]=B.marginXS,t[47]=a,t[48]=w,t[49]=q):q=t[49],t[50]===Symbol.for("react.memo_cache_sentinel")?(H=(0,y.t)("dialog.ask.DoYouWantToResetChanges"),J=(0,y.t)("button.Reset"),$={danger:!0},t[50]=H,t[51]=J,t[52]=$):(H=t[50],J=t[51],$=t[52]),t[53]!==z||t[54]!==L?(ee=()=>{z(),L()},t[53]=z,t[54]=L,t[55]=ee):ee=t[55],t[56]===Symbol.for("react.memo_cache_sentinel")?(te=(0,y.t)("button.Cancel"),t[56]=te):te=t[56],t[57]!==L?(ne=()=>L(),t[57]=L,t[58]=ne):ne=t[58],t[59]===Symbol.for("react.memo_cache_sentinel")?(ae=(0,k.jsx)(x.A,{showIcon:!0,title:(0,y.t)("dialog.warning.CannotBeUndone"),type:"warning"}),t[59]=ae):ae=t[59],t[60]!==D||t[61]!==ee||t[62]!==ne?(ie=(0,k.jsx)(v.IbE,{open:D,title:H,okText:J,okButtonProps:$,onOk:ee,cancelText:te,onCancel:ne,children:ae}),t[60]=D,t[61]=ee,t[62]=ne,t[63]=ie):ie=t[63],t[64]!==n||t[65]!==Q||t[66]!==Z||t[67]!==q||t[68]!==ie||t[69]!==Y?(se=(0,k.jsxs)(v.OOm,{"data-testid":n,direction:"column",align:"stretch",gap:"xxs",onMouseEnter:U,onMouseLeave:W,children:[Y,Q,Z,q,ie]}),t[64]=n,t[65]=Q,t[66]=Z,t[67]=q,t[68]=ie,t[69]=Y,t[70]=se):se=t[70],se};var C=n(64933),O=n(55547),R=n(38157),T=n(48871),I=n(72602),_=n(19408),B=n(48130);const E=["group","hideEmpty"];var P;const M=(0,b.rU)((e=>{let{css:t}=e;return{TabStyles:t(P||(P=(0,l.A)(["\n    .ant-tabs-tab-active {\n      font-weight: var(--token-fontWeightSuperStrong, 700);\n    }\n    .ant-typography-secondary {\n      font-weight: normal !important;\n    }\n  "])))}})),D=e=>{let{title:t,count:n}=e;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(g.A.Text,{children:t}),(0,k.jsx)(g.A.Text,{type:"secondary",children:" (".concat(n,")")})]})},F=e=>{let{group:t,hideEmpty:n=!0}=e,a=(0,s.A)(e,E);const{token:l}=d.A.useToken();return(!n||0!==t.settingItems.length)&&(0,k.jsxs)(v.OOm,(0,i.A)((0,i.A)({direction:"column",align:"stretch",style:{marginBottom:l.marginMD}},a),{},{children:[(0,k.jsxs)(v.OOm,{direction:"column",align:"stretch",style:{zIndex:1,marginBottom:l.marginMD,background:l.colorBgContainer},children:[(0,k.jsx)(v.OOm,{align:"start",justify:"between",children:(0,k.jsxs)(v.OOm,{gap:"sm",align:"start",children:[(0,k.jsx)(g.A.Title,{level:5,style:{marginTop:0},children:t.title}),t.titleExtra&&(0,k.jsx)("div",{children:t.titleExtra})]})}),(0,k.jsx)(R.A,{style:{marginTop:0,marginBottom:0}}),t.description&&(0,k.jsx)(g.A.Text,{type:"secondary",style:{marginTop:l.marginSM},children:t.description})]}),(0,k.jsxs)(v.OOm,{direction:"column",align:"stretch",gap:"lg",children:[t.alert,t.settingItems.map(((e,t)=>(0,k.jsx)(w,(0,i.A)({},e),e.title+t)))]})]}))},L=e=>{const t=(0,o.c)(97),{settingGroups:n,tabDirection:a,showChangedOptionFilter:s,showResetButton:l,showSearchBar:c,primaryButton:d,extraButton:g,onReset:m}=e,u=void 0===a?"left":a,{t:p}=(0,B.Bd)(),{styles:b}=M(),[y,j]=(0,f.useState)(""),[S,w]=(0,f.useState)(!1),[R,E]=(0,r.A)(!1),{toggle:P}=E,[L,G]=(0,f.useState)("all");let X;t[0]!==y?(X=e=>{const t=A().toLower(y);return A().includes(A().toLower(e.title),t)||A().isString(e.description)&&A().includes(A().toLower(e.description),t)},t[0]=y,t[1]=X):X=t[1];const V=X,K=z;let Y,Q,Z,q,H,J,$,ee,te,ne,ae,ie,se,le,oe,ce,re,de,ge,me,ue,he,pe,xe;if(t[2]!==L||t[3]!==S||t[4]!==g||t[5]!==d||t[6]!==y||t[7]!==V||t[8]!==P||t[9]!==n||t[10]!==s||t[11]!==l||t[12]!==c||t[13]!==b.TabStyles||t[14]!==p||t[15]!==u){let e;t[28]!==S||t[29]!==V?(e=e=>(0,i.A)((0,i.A)({},e),{},{settingItems:A().filter(e.settingItems,(e=>(!S||K(e))&&V(e)))}),t[28]=S,t[29]=V,t[30]=e):e=t[30];const a=A().map(n,e);let o,r,m,x,f;Q=v.OOm,Z="column",q="md",H="stretch",t[31]!==y||t[32]!==c||t[33]!==p?(o=!!c&&(0,k.jsx)(T.A,{prefix:(0,k.jsx)(C.A,{}),placeholder:p("settings.SearchPlaceholder"),onChange:e=>j(e.target.value),value:y}),t[31]=y,t[32]=c,t[33]=p,t[34]=o):o=t[34],t[35]!==s||t[36]!==p?(r=!!s&&(0,k.jsx)(h.A,{onChange:e=>w(e.target.checked),style:{whiteSpace:"nowrap"},children:p("settings.ShowOnlyChanged")}),t[35]=s,t[36]=p,t[37]=r):r=t[37],t[38]!==P||t[39]!==l||t[40]!==p?(m=!!l&&(0,k.jsx)(v.Fvl,{danger:!0,icon:(0,k.jsx)(O.A,{}),onClick:()=>P(),children:p("button.Reset")}),t[38]=P,t[39]=l,t[40]=p,t[41]=m):m=t[41],t[42]!==g||t[43]!==d||t[44]!==o||t[45]!==r||t[46]!==m?(J=(0,k.jsxs)(v.OOm,{justify:"start",gap:"xs",children:[o,r,g,m,d]}),t[42]=g,t[43]=d,t[44]=o,t[45]=r,t[46]=m,t[47]=J):J=t[47],Y=I.A,$=L,ee=G,te=b.TabStyles,ne=u?"start":"top",t[48]===Symbol.for("react.memo_cache_sentinel")?(ae={minWidth:200},t[48]=ae):ae=t[48],t[49]!==p?(x=p("general.All"),t[49]=p,t[50]=x):x=t[50],t[51]!==P||t[52]!==p?(f=(e,t)=>({key:"index".concat(t),label:(0,k.jsx)(D,{title:e.title,count:e.settingItems.length}),children:(0,k.jsx)(v.OOm,{direction:"column",align:"stretch",gap:"xl",children:e.settingItems.length>0?(0,k.jsx)(F,{group:e,hideEmpty:!0,onReset:()=>{P()}}):(0,k.jsx)(_.A,{image:_.A.PRESENTED_IMAGE_SIMPLE,description:p("settings.NoChangesToDisplay")})})}),t[51]=P,t[52]=p,t[53]=f):f=t[53],ie=[{key:"all",label:(0,k.jsx)(D,{title:x,count:A().sumBy(a,U)}),children:(0,k.jsx)(v.OOm,{direction:"column",align:"stretch",gap:"xl",children:A().sumBy(a,W)>0?A().map(a,(e=>(0,k.jsx)(F,{"data-testid":null===e||void 0===e?void 0:e["data-testid"],group:e,hideEmpty:!0,onReset:()=>{P()}},e.title))):(0,k.jsx)(_.A,{image:_.A.PRESENTED_IMAGE_SIMPLE,description:p("settings.NoChangesToDisplay")})})},...A().map(a,f)],t[2]=L,t[3]=S,t[4]=g,t[5]=d,t[6]=y,t[7]=V,t[8]=P,t[9]=n,t[10]=s,t[11]=l,t[12]=c,t[13]=b.TabStyles,t[14]=p,t[15]=u,t[16]=Y,t[17]=Q,t[18]=Z,t[19]=q,t[20]=H,t[21]=J,t[22]=$,t[23]=ee,t[24]=te,t[25]=ne,t[26]=ae,t[27]=ie}else Y=t[16],Q=t[17],Z=t[18],q=t[19],H=t[20],J=t[21],$=t[22],ee=t[23],te=t[24],ne=t[25],ae=t[26],ie=t[27];return t[54]!==Y||t[55]!==$||t[56]!==ee||t[57]!==te||t[58]!==ne||t[59]!==ae||t[60]!==ie?(se=(0,k.jsx)(Y,{activeKey:$,onChange:ee,className:te,tabPlacement:ne,tabBarStyle:ae,items:ie}),t[54]=Y,t[55]=$,t[56]=ee,t[57]=te,t[58]=ne,t[59]=ae,t[60]=ie,t[61]=se):se=t[61],t[62]!==Q||t[63]!==Z||t[64]!==q||t[65]!==H||t[66]!==J||t[67]!==se?(le=(0,k.jsxs)(Q,{direction:Z,gap:q,align:H,children:[J,se]}),t[62]=Q,t[63]=Z,t[64]=q,t[65]=H,t[66]=J,t[67]=se,t[68]=le):le=t[68],t[69]!==p?(oe=p("dialog.ask.DoYouWantToResetChanges"),t[69]=p,t[70]=oe):oe=t[70],t[71]!==p?(ce=p("button.Reset"),t[71]=p,t[72]=ce):ce=t[72],t[73]===Symbol.for("react.memo_cache_sentinel")?(re={danger:!0},t[73]=re):re=t[73],t[74]!==m||t[75]!==P||t[76]!==n?(de=()=>{m?m():N(n),P()},t[74]=m,t[75]=P,t[76]=n,t[77]=de):de=t[77],t[78]!==p?(ge=p("button.Cancel"),t[78]=p,t[79]=ge):ge=t[79],t[80]!==P?(me=()=>P(),t[80]=P,t[81]=me):me=t[81],t[82]!==p?(ue=p("dialog.warning.CannotBeUndone"),t[82]=p,t[83]=ue):ue=t[83],t[84]!==ue?(he=(0,k.jsx)(x.A,{showIcon:!0,title:ue,type:"warning"}),t[84]=ue,t[85]=he):he=t[85],t[86]!==R||t[87]!==oe||t[88]!==ce||t[89]!==de||t[90]!==ge||t[91]!==me||t[92]!==he?(pe=(0,k.jsx)(v.IbE,{open:R,title:oe,okText:ce,okButtonProps:re,onOk:de,cancelText:ge,onCancel:me,children:he}),t[86]=R,t[87]=oe,t[88]=ce,t[89]=de,t[90]=ge,t[91]=me,t[92]=he,t[93]=pe):pe=t[93],t[94]!==le||t[95]!==pe?(xe=(0,k.jsxs)(k.Fragment,{children:[le,pe]}),t[94]=le,t[95]=pe,t[96]=xe):xe=t[96],xe},N=e=>{A().flatMap(e,(e=>e.settingItems)).forEach((e=>{var t,n,a;e.onReset?e.onReset():(null===e||void 0===e||null===(t=e.selectProps)||void 0===t||!t.disabled)&&(null===e||void 0===e||null===(n=e.checkboxProps)||void 0===n||!n.disabled)&&(null===e||void 0===e||null===(a=e.onChange)||void 0===a||a.call(e,e.defaultValue))}))};function z(e){var t,n;return!(null===e.value||void 0===e.value||null!==e&&void 0!==e&&null!==(t=e.selectProps)&&void 0!==t&&t.disabled||null!==e&&void 0!==e&&null!==(n=e.checkboxProps)&&void 0!==n&&n.disabled)&&e.value!==e.defaultValue}function U(e){return e.settingItems.length}function W(e){return e.settingItems.length}}}]);
//# sourceMappingURL=7522.63fb87a6.chunk.js.map