/*! For license information please see 5177.53aa31f1.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[5177],{51579:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(68798),i=n(9877),a=n(88453),l=n(7960);const r=e=>{let{value:t,onChange:n,language:r="sh",editable:o=!1,showLineNumbers:c=!0,lineWrapping:d=!1,...u}=e;const[g,h]=(0,s.A)({defaultValue:"",value:t,onChange:n}),p=[(0,i.rI)(r)];return(0,l.jsx)(a.Ay,{theme:"dark",extensions:d?[a.Lz.lineWrapping,...p]:p,editable:o,readOnly:!o,basicSetup:{lineNumbers:c},value:g,onChange:e=>h(e),...u})}},91069:(e,t,n)=>{n.d(t,{A:()=>O});var s=n(68144),i=n(28599),a=n(72412),l=n(40546),r=n(2600),o=n(6975),c=n(91313),d=n(8348),u=n.n(d),g=n(84100),h=n(7960);const p=(0,o.rU)((e=>{let{css:t}=e;return{baiSettingItemCheckbox:t`
    .ant-checkbox {
      align-self: flex-start;
      margin-top: 0.2rem;
    }
  `}})),m=e=>{let{"data-testid":t,type:n,title:o,description:d,children:g,defaultValue:m,value:y,selectProps:x,onChange:b,disabled:S}=e;const{token:f}=s.A.useToken(),{styles:j}=p();return(0,h.jsxs)(c.OO,{"data-testid":t,direction:"column",align:"start",gap:"xxs",children:[(0,h.jsxs)(c.OO,{direction:"row",gap:"xxs",children:[(0,h.jsx)(i.A.Text,{strong:!0,style:{fontSize:f.fontSize},children:o}),!S&&void 0!==y&&null!==y&&m!==y&&(0,h.jsx)(a.A,{dot:!0,status:"warning"})]}),"custom"===n&&(0,h.jsxs)(h.Fragment,{children:[d,(0,h.jsx)("div",{style:{marginTop:f.marginXS},children:g})]}),"checkbox"===n&&(0,h.jsx)(l.A,{checked:y,onChange:b,disabled:S,className:j.baiSettingItemCheckbox,children:(0,h.jsx)(i.A.Text,{type:S?"secondary":void 0,children:d})}),"select"===n&&(0,h.jsxs)(h.Fragment,{children:[d,(0,h.jsx)(r.A,{value:y,popupMatchSelectWidth:!1,onChange:b,disabled:S,style:{marginTop:f.marginXS,...null===x||void 0===x?void 0:x.style},...u().omit(x,["style"])})]})]})};var y=n(84831),x=n(25300),b=n(61964),S=n(36830),f=n(38069),j=n(46038),v=n(59562),k=n(61649),A=n(98840),C=n(81291);const T=(0,o.rU)((e=>{let{css:t}=e;return{TabStyles:t`
    .ant-tabs-tab-active {
      font-weight: var(--token-fontWeightSuperStrong, 700);
    }
    .ant-typography-secondary {
      font-weight: normal !important;
    }
  `}})),w=e=>{let{title:t,count:n}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(i.A.Text,{children:t}),(0,h.jsx)(i.A.Text,{type:"secondary",children:` (${n})`})]})},I=e=>{let{group:t,hideEmpty:n,...a}=e;const{token:l}=s.A.useToken();return(!n||0!==t.settingItems.length)&&(0,h.jsxs)(c.OO,{direction:"column",align:"stretch",style:{marginBottom:l.marginMD},...a,children:[(0,h.jsxs)(c.OO,{direction:"column",align:"stretch",style:{zIndex:1,marginBottom:l.marginMD,background:l.colorBgContainer},children:[(0,h.jsx)(i.A.Title,{level:5,style:{marginTop:0},children:t.title}),(0,h.jsx)(S.A,{style:{marginTop:0,marginBottom:0}}),t.description&&(0,h.jsx)(i.A.Text,{type:"secondary",style:{marginTop:l.marginSM},children:t.description})]}),(0,h.jsx)(c.OO,{direction:"column",align:"start",gap:"lg",children:t.settingItems.map(((e,t)=>(0,h.jsx)(m,{...e},e.title+t)))})]})},O=e=>{let{settingGroups:t,tabDirection:n="left",showChangedOptionFilter:s,showResetButton:i,showSearchBar:a}=e;const{t:r}=(0,C.Bd)(),{styles:o}=T(),[d,p]=(0,g.useState)(""),[m,S]=(0,g.useState)(!1),[O,{toggle:E}]=(0,b.A)(!1),[K,_]=(0,g.useState)("all"),q=u().map(t,(e=>({...e,settingItems:u().filter(e.settingItems,(e=>(!m||(e=>null!==e.value&&void 0!==e.value&&!e.disabled&&e.value!==e.defaultValue)(e))&&(e=>e.title.toLowerCase().includes(d.toLowerCase())||"string"===typeof e.description&&e.description.toLowerCase().includes(d.toLowerCase()))(e)))})));return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(c.OO,{direction:"column",gap:"md",align:"stretch",children:[(0,h.jsxs)(c.OO,{justify:"start",gap:"xs",children:[!!a&&(0,h.jsx)(f.A,{prefix:(0,h.jsx)(y.A,{}),placeholder:r("settings.SearchPlaceholder"),onChange:e=>p(e.target.value),value:d}),!!s&&(0,h.jsx)(l.A,{onChange:e=>S(e.target.checked),style:{whiteSpace:"nowrap"},children:r("settings.ShowOnlyChanged")}),!!i&&(0,h.jsx)(j.Ay,{icon:(0,h.jsx)(x.A,{}),onClick:()=>E(),children:r("button.Reset")})]}),(0,h.jsx)(v.A,{activeKey:K,onChange:_,className:o.TabStyles,tabPosition:n?"left":"top",tabBarStyle:{minWidth:200},items:[{key:"all",label:(0,h.jsx)(w,{title:r("general.All"),count:u().sumBy(q,(e=>e.settingItems.length))}),children:(0,h.jsx)(c.OO,{direction:"column",align:"stretch",gap:"xl",children:u().sumBy(q,(e=>e.settingItems.length))>0?u().map(q,(e=>(0,h.jsx)(I,{"data-testid":null===e||void 0===e?void 0:e["data-testid"],group:e,hideEmpty:!0},e.title))):(0,h.jsx)(k.A,{image:k.A.PRESENTED_IMAGE_SIMPLE,description:r("settings.NoChangesToDisplay")})})},...u().map(q,((e,t)=>({key:`index${t}`,label:(0,h.jsx)(w,{title:e.title,count:e.settingItems.length}),children:e.settingItems.length>0?(0,h.jsx)(I,{group:e,hideEmpty:!0}):(0,h.jsx)(k.A,{image:k.A.PRESENTED_IMAGE_SIMPLE,description:r("settings.NoChangesToDisplay")})})))]})]}),(0,h.jsx)(c.Ib,{open:O,title:r("dialog.ask.DoYouWantToResetChanges"),okText:r("button.Reset"),okButtonProps:{danger:!0},onOk:()=>{u().flatMap(t,(e=>e.settingItems)).forEach((e=>{!e.disabled&&(null===e||void 0===e?void 0:e.setValue)&&e.setValue(e.defaultValue)})),E()},cancelText:r("button.Cancel"),onCancel:()=>E(),children:(0,h.jsx)(A.A,{showIcon:!0,message:r("dialog.warning.CannotBeUndone"),type:"warning"})})]})}},67641:(e,t,n)=>{n.d(t,{A:()=>p});var s=n(84831),i=n(68144),a=n(74826),l=n(38069),r=n(40546),o=n(91313),c=n(8348),d=n.n(c),u=n(84100),g=n(81291),h=n(7960);const p=e=>{var t;let{open:n,onRequestClose:c,columns:p,hiddenColumnKeys:m,...y}=e;const x=(0,u.useRef)(null),{t:b}=(0,g.Bd)(),{token:S}=i.A.useToken(),f=d().map(p,(e=>{return"string"===typeof e.title?{label:e.title,value:d().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(t=e.title,u.Children.map(t.props.children,(e=>{if("string"===typeof e)return e}))),value:d().toString(e.key)}:{label:void 0,value:d().toString(e.key)};var t}));return(0,h.jsx)(o.Ib,{title:b("table.SettingTable"),open:n,destroyOnHidden:!0,centered:!0,onOk:()=>{var e;null===(e=x.current)||void 0===e||e.validateFields().then((e=>{c(e)})).catch((()=>{}))},onCancel:()=>{c()},...y,children:(0,h.jsxs)(a.A,{ref:x,preserve:!1,initialValues:{selectedColumnKeys:null===(t=d().map(f,"value"))||void 0===t?void 0:t.filter((e=>!d().includes(m,e)))},layout:"vertical",children:[(0,h.jsx)(a.A.Item,{name:"searchInput",label:b("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,h.jsx)(l.A,{prefix:(0,h.jsx)(s.A,{}),style:{marginBottom:S.marginSM},placeholder:b("table.SearchTableColumn")})}),(0,h.jsx)(a.A.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.searchInput!==t.searchInput,children:e=>{let{getFieldValue:t}=e;const n=t("searchInput")?d().toLower(t("searchInput")):void 0,s=d().map(f,(e=>d().toLower(d().toString(e.label)).includes(n||"")?e:{...e,style:{display:"none"}}));return(0,h.jsx)(a.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},rules:[{required:!0,message:b("general.validation.PleaseSelectOptions")}],children:(0,h.jsx)(r.A.Group,{options:s,style:{flexDirection:"column"}})})}})]})})}},10936:(e,t,n)=>{n.d(t,{a:()=>i});var s=n(2212);const i=e=>{const[t,n]=(0,s.q)(`hiddenColumnKeys.${e}`);return[t,n]}},35177:(e,t,n)=>{n.r(t),n.d(t,{default:()=>te});var s=n(19885),i=n(10936),a=n(67641),l=n(51873),r=n(84831),o=n(18491),c=n(62778),d=n(97814),u=n(86155),g=n(61964),h=n(68144),p=n(28599),m=n(38069),y=n(40546),x=n(46038),b=n(98840),S=n(91313),f=n(77629),j=n.n(f),v=n(8348),k=n.n(v),A=n(84100),C=n(81291),T=n(7960);const w=()=>{const{t:e}=(0,C.Bd)(),{token:t}=h.A.useToken(),[n,f]=(0,A.useState)(!1),[v,{toggle:w}]=(0,g.A)(),[I,O]=(0,A.useState)(!1),[E,K]=(0,A.useState)(""),[_,q]=(0,s.Tw)("first"),[D,B]=(0,A.useTransition)(),[R,M]=(0,A.useTransition)(),[P,L]=(0,A.useTransition)();(0,s.CX)();const F=[{title:e("logs.TimeStamp"),dataIndex:"formattedTimeStamp",key:"timeStamp",render:e=>(0,T.jsx)("div",{style:{minWidth:50},children:k().isUndefined(e)?"-":(0,T.jsx)(l.A,{keyword:E,children:e})}),fixed:"left"},{title:e("logs.Status"),dataIndex:"statusCode",key:"status",render:(e,t)=>(0,T.jsx)("div",{style:{minWidth:50},children:k().isUndefined(e)?"-":(0,T.jsx)(l.A,{keyword:E,children:e+" "+t.statusText})})},{title:e("logs.ErrorTitle"),dataIndex:"title",key:"errorTitle",render:e=>(0,T.jsx)("div",{style:{minWidth:50},children:k().isNil(e)||k().isObject(e)&&k().isEmpty(e)?"-":(0,T.jsx)(l.A,{keyword:E,children:k().isObject(e)?JSON.stringify(e):k().toString(e)})})},{title:e("logs.ErrorMessage"),dataIndex:"message",key:"errorMessage",render:e=>(0,T.jsx)("div",{style:{minWidth:70},children:e?(0,T.jsx)(l.A,{keyword:E,children:e}):"-"})},{title:e("logs.ErrorType"),dataIndex:"type",key:"errorType",render:e=>(0,T.jsx)("div",{style:{minWidth:60},children:e?(0,T.jsx)(l.A,{keyword:E,children:e}):"-"})},{title:e("logs.Method"),dataIndex:"requestMethod",key:"method",render:e=>(0,T.jsx)("div",{style:{minWidth:60},children:e?(0,T.jsx)(l.A,{keyword:E,children:e}):"-"})},{title:e("logs.RequestUrl"),dataIndex:"requestUrl",key:"requestUrl",render:e=>(0,T.jsx)("div",{style:{minWidth:60},children:e?(0,T.jsx)(l.A,{keyword:E,children:e}):"-"})},{title:e("logs.Parameters"),dataIndex:"requestParameters",key:"requestParameter",render:e=>(0,T.jsx)("div",{style:{minWidth:100},children:e?(0,T.jsx)(l.A,{keyword:E,children:e}):"-"})}],[V,N]=(0,i.a)("ErrorLogList"),U=(0,A.useMemo)((()=>{const e=JSON.parse(localStorage.getItem("backendaiwebui.logs")||"[]");return k().map(e,((e,t)=>({...e,key:t,formattedTimeStamp:j()(e.timestamp).format("ll LTS")})))}),[_]),W=(0,A.useMemo)((()=>{if(k().isEmpty(E))return U;const e=new RegExp(`${k().escapeRegExp(E)}`,"i");return k().filter(U,(t=>k().some(t,((t,n)=>"timestamp"!==n&&e.test(k().toString(t))))))}),[E,U]);return(0,T.jsxs)(S.OO,{direction:"column",align:"stretch",gap:"xs",children:[(0,T.jsxs)(S.OO,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",children:[(0,T.jsx)(p.A.Text,{children:e("logs.UpTo3000Logs")}),(0,T.jsxs)(S.OO,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:[(0,T.jsxs)(S.OO,{gap:"xs",children:[(0,T.jsx)(m.A,{allowClear:!0,prefix:(0,T.jsx)(r.A,{}),placeholder:e("logs.SearchLogs"),onChange:e=>{M((()=>K(e.target.value)))},style:{width:200}}),(0,T.jsx)(y.A,{onChange:e=>O(e.target.checked),children:e("logs.ShowOnlyError")})]}),(0,T.jsxs)(S.OO,{gap:"xs",children:[(0,T.jsx)(x.Ay,{icon:(0,T.jsx)(o.A,{}),loading:D,onClick:()=>{B((()=>q()))},children:e("button.Refresh")}),(0,T.jsx)(x.Ay,{danger:!0,icon:(0,T.jsx)(c.A,{}),onClick:()=>{f(!0)},children:e("button.ClearLogs")})]})]})]}),(0,T.jsx)(S.zx,{pagination:{showSizeChanger:!1,style:{marginBottom:0}},loading:!!R&&{indicator:(0,T.jsx)(d.A,{})},scroll:{x:"max-content",y:0===k().filter(W,(e=>e.isError)).length?void 0:"calc(100vh - 400px)"},dataSource:I?k().filter(W,(e=>e.isError)):W,columns:k().filter(F,(e=>!k().includes(V,k().toString(null===e||void 0===e?void 0:e.key)))),onRow:e=>({style:{color:e.isError?t.colorError:""}})}),(0,T.jsx)(S.OO,{justify:"end",style:{paddingRight:t.paddingXS,paddingBottom:t.paddingXS},children:(0,T.jsx)(x.Ay,{type:"text",icon:(0,T.jsx)(u.A,{}),onClick:()=>{w()}})}),(0,T.jsx)(S.Ib,{open:n,title:e("dialog.warning.LogDeletion"),okText:e("button.Delete"),okButtonProps:{danger:!0},confirmLoading:P,onOk:()=>{L((()=>{localStorage.removeItem("backendaiwebui.logs"),q(),f(!1)}))},cancelText:e("button.Cancel"),onCancel:()=>f(!1),children:(0,T.jsx)(b.A,{message:e("dialog.warning.CannotBeUndone"),type:"warning"})}),(0,T.jsx)(S.Xc,{children:(0,T.jsx)(a.A,{open:v,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&N(k().difference(F.map((e=>k().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),w()},columns:F,hiddenColumnKeys:V})})]})},I=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"email"}],t=[{kind:"Variable",name:"email",variableName:"email"}],n={alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"main_access_key",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MyKeypairInfoModalQuery",selections:[{alias:null,args:t,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[n,s],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MyKeypairInfoModalQuery",selections:[{alias:null,args:t,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[n,s,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"f761ef63ec2ae42985aab29dd90cc78b",id:null,metadata:{},name:"MyKeypairInfoModalQuery",operationKind:"query",text:'query MyKeypairInfoModalQuery(\n  $email: String\n) {\n  user(email: $email) {\n    email\n    main_access_key @since(version: "23.09.7")\n    id\n  }\n}\n'}}}();I.hash="4d6d0135199b7cc95c03a9d90cd46f83";const O=I;var E=n(37615),K=n(79887),_=n(90567),q=n(73067),D=n(85724);const B=e=>{let{onRequestClose:t,...n}=e;const{t:i}=(0,C.Bd)(),[a]=(0,E.U6)(),l=(0,s.CX)(),{data:r}=(0,K.nN)({queryKey:["baiClient.keypair.list",n.open],queryFn:()=>n.open?l.keypair.list(a.email,["access_key","secret_key","is_active"],!0).then((e=>e.keypairs)):null,staleTime:0}),{user:o}=(0,D.useLazyLoadQuery)(O,{email:a.email});return(0,T.jsx)(S.Ib,{...n,title:i("userSettings.MyKeypairInfo"),centered:!0,onCancel:t,destroyOnHidden:!0,width:"auto",footer:[(0,T.jsx)(x.Ay,{onClick:()=>{t()},children:i("button.Close")},"keypairInfoClose")],children:(0,T.jsx)(_.A,{scroll:{x:"max-content"},rowKey:"access_key",dataSource:r,columns:[{title:i("general.AccessKey"),key:"accessKey",dataIndex:"access_key",fixed:"left",render:e=>(0,T.jsxs)(S.OO,{direction:"column",align:"start",children:[(0,T.jsx)(p.A.Text,{ellipsis:!0,copyable:!0,children:e}),e===(null===o||void 0===o?void 0:o.main_access_key)&&(0,T.jsx)(q.A,{color:"red",children:i("credential.MainAccessKey")})]})},{title:i("general.SecretKey"),key:"secretKey",dataIndex:"secret_key",fixed:"left",render:e=>(0,T.jsx)(p.A.Text,{ellipsis:!0,copyable:!0,children:e})}]})})};var R=n(90421),M=n(91502);const P=e=>{let{onRequestClose:t,isRefreshModalPending:n,...i}=e;const{t:a}=(0,C.Bd)(),{token:l}=h.A.useToken(),r=(0,s.CX)(),{data:o}=(0,K.nN)({queryKey:["refreshSSHKeypair",i.open],queryFn:()=>i.open?r.refreshSSHKeypair():null});return(0,T.jsx)(S.Ib,{title:a("userSettings.SSHKeypairGeneration"),closeIcon:!1,footer:[(0,T.jsx)(R.A,{title:a("button.Confirm"),description:a("userSettings.ClearSSHKeypairInput"),onConfirm:t,children:(0,T.jsx)(x.Ay,{children:a("button.Close")})},"close")],...i,children:(0,T.jsxs)(M.A,{spinning:n,indicator:(0,T.jsx)(d.A,{}),children:[(0,T.jsx)(p.A.Text,{strong:!0,children:a("userSettings.PublicKey")}),(0,T.jsxs)(S.OO,{direction:"row",align:"start",justify:"between",children:[(0,T.jsx)(p.A.Paragraph,{children:(0,T.jsx)("pre",{style:{width:430,maxHeight:100,overflowY:"scroll",scrollbarWidth:"none"},children:null===o||void 0===o?void 0:o.ssh_public_key})}),(0,T.jsx)(p.A.Text,{copyable:{text:null===o||void 0===o?void 0:o.ssh_public_key},style:{marginTop:l.margin}})]}),(0,T.jsx)(p.A.Text,{strong:!0,children:a("userSettings.PrivateKey")}),(0,T.jsxs)(S.OO,{direction:"row",align:"start",justify:"between",children:[(0,T.jsxs)(p.A.Paragraph,{children:[(0,T.jsx)("pre",{style:{width:430,maxHeight:100,overflowY:"scroll",scrollbarWidth:"none"},children:null===o||void 0===o?void 0:o.ssh_private_key}),(0,T.jsx)(p.A.Text,{type:"danger",children:a("userSettings.SSHKeypairGenerationWarning")})]}),(0,T.jsx)(p.A.Text,{copyable:{text:null===o||void 0===o?void 0:o.ssh_private_key},style:{marginTop:l.margin}})]})]})})};var L=n(74826);const F=e=>{let{onRequestClose:t,onRequestRefresh:n,...i}=e;const{t:a}=(0,C.Bd)(),l=(0,s.CX)(),r=(0,A.useRef)(null),o=(0,K.ET)({mutationFn:e=>l.postSSHKeypair(e)});return(0,T.jsx)(S.Ib,{title:a("userSettings.SSHKeypairEnterManually"),okText:a("button.Save"),onOk:()=>{var e;null===(e=r.current)||void 0===e||e.validateFields().then((e=>{o.mutate(e,{onSuccess:()=>{n()}}),t()})).catch((()=>{}))},destroyOnHidden:!0,...i,children:(0,T.jsxs)(L.A,{ref:r,preserve:!1,layout:"vertical",children:[(0,T.jsx)(L.A.Item,{name:"pubkey",label:(0,T.jsx)(p.A.Text,{strong:!0,children:a("userSettings.PublicKey")}),rules:[{required:!0,message:a("settings.InputRequired")}],children:(0,T.jsx)(m.A.TextArea,{rows:5,style:{backgroundColor:"rgba(150, 150, 150, 0.1)"}})}),(0,T.jsx)(L.A.Item,{name:"privkey",label:(0,T.jsx)(p.A.Text,{strong:!0,children:a("userSettings.PrivateKey")}),rules:[{required:!0,message:a("settings.InputRequired")}],children:(0,T.jsx)(m.A.TextArea,{rows:5,style:{backgroundColor:"rgba(150, 150, 150, 0.1)"}})})]})})},V=e=>{let{onRequestClose:t,...n}=e;const{t:i}=(0,C.Bd)(),{token:a}=h.A.useToken(),[l,r]=(0,A.useTransition)(),[o,c]=(0,s.Tw)("initial-fetch"),[d,{toggle:u}]=(0,g.A)(!1),[m,{toggle:y}]=(0,g.A)(!1),b=(0,s.CX)(),{data:f}=(0,K.nN)({queryKey:["fetchSSHKeypair",o],queryFn:()=>b.fetchSSHKeypair()});return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(S.Ib,{title:i("userSettings.SSHKeypairGeneration"),onCancel:()=>t(),footer:[(0,T.jsx)(x.Ay,{onClick:()=>t(),children:i("button.Close")},"back"),(0,T.jsx)(x.Ay,{type:"primary",onClick:u,children:i("button.Generate")},"generate"),(0,T.jsx)(x.Ay,{type:"primary",onClick:y,children:i("button.EnterManually")},"enterManually")],...n,children:[(0,T.jsx)(p.A.Text,{strong:!0,children:i("userSettings.CurrentSSHPublicKey")}),null!==f&&void 0!==f&&f.ssh_public_key?(0,T.jsxs)(S.OO,{direction:"row",align:"start",justify:"between",children:[(0,T.jsx)(p.A.Paragraph,{children:(0,T.jsx)("pre",{style:{width:430,height:270},children:null===f||void 0===f?void 0:f.ssh_public_key})}),(0,T.jsx)(p.A.Text,{copyable:{text:null===f||void 0===f?void 0:f.ssh_public_key},style:{marginTop:a.margin}})]}):(0,T.jsx)(p.A.Paragraph,{children:(0,T.jsx)("pre",{style:{height:270},children:i("userSettings.NoExistingSSHKeypair")})})]}),(0,T.jsx)(P,{open:d,isRefreshModalPending:l,onRequestClose:()=>{u(),r((()=>{c()}))}}),(0,T.jsx)(F,{open:m,onCancel:y,onRequestClose:()=>{y()},onRequestRefresh:()=>{r((()=>{c()}))}})]})};var N=n(91069),U=n(2156),W=n(51579),H=n(83925),z=n(74581),G=n(2600);const X=e=>{let{onRequestClose:t,shellInfo:n,...s}=e;const{t:i}=(0,C.Bd)(),{message:a,modal:l}=H.A.useApp(),{getErrorMessage:r}=(0,S.B7)(),[o,d]=(0,A.useState)(".bashrc"),[u,g]=(0,A.useState)(""),[h,m]=(0,A.useState)([]),y=(0,U.QE)(),b=(0,K.ET)({mutationFn:e=>y({method:"POST",url:"/user-config/bootstrap-script",body:{script:e}})}),f=(0,K.ET)({mutationFn:e=>y({method:"PATCH",url:"/user-config/dotfiles",body:{data:e,path:o,permission:"644"}})}),j=(0,K.ET)({mutationFn:e=>y({method:"POST",url:"/user-config/dotfiles",body:{path:o,data:e,permission:"644"}})}),v=(0,K.ET)({mutationFn:()=>y({method:"DELETE",url:"/user-config/dotfiles",body:{path:o}})}),w=()=>{"bootstrap"===n&&y({method:"GET",url:"/user-config/bootstrap-script"}).then((e=>{g(e)})),"userconfig"===n&&y({method:"GET",url:"/user-config/dotfiles"}).then((e=>{const t=k().find(e,{path:o});g((null===t||void 0===t?void 0:t.data)||""),m(e)}))};(0,A.useMemo)((()=>{w()}),[n]);const I=function(){let{closeAfter:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("bootstrap"===n){if(!u)return void a.error(i("userSettings.BootstrapScriptEmpty"));b.mutate(u,{onSuccess:()=>{a.success(i("userSettings.BootstrapScriptUpdated")),e&&t()},onError:e=>{a.error(r(e)),console.error(e)}})}if("userconfig"===n){k().find(h,{path:o})?f.mutate(u,{onSuccess:()=>{a.success(i("userSettings.DescScriptUpdated")),e?t():w()},onError:e=>{a.error(r(e)),console.error(e)}}):j.mutate(u,{onSuccess:()=>{a.success(i("userSettings.DescScriptCreated")),e?t():w()},onError:e=>{a.error(r(e)),console.error(e)}})}},O=()=>{"bootstrap"===n&&b.mutate("",{onSuccess:()=>{a.success(i("userSettings.BootstrapScriptDeleted")),t()},onError:e=>{a.error(r(e)),console.error(e)}}),"userconfig"===n&&v.mutate(void 0,{onSuccess:()=>{a.success(`${i("userSettings.DescScriptDeleted")}${o}`),t()},onError:e=>{a.error(r(e)),console.error(e)}})};return(0,T.jsx)(S.Ib,{width:800,title:i("bootstrap"===n?"userSettings.EditBootstrapScript":"userSettings.EditUserConfigScript"),onCancel:()=>t(),okText:i("button.Save"),footer:(0,T.jsxs)(S.OO,{justify:"between",style:{width:"100%"},children:[(0,T.jsx)(S.OO,{children:(0,T.jsx)(z.A.Button,{type:"default",danger:!0,style:{width:"fit-content"},menu:{items:[{key:"reset",label:i("button.Reset"),onClick:()=>{l.confirm({title:i("dialog.title.LetsDouble-Check"),content:i("dialog.ask.DoYouWantToResetChanges"),onOk:()=>{"bootstrap"===n&&g(""),"userconfig"===n&&g("")}})},danger:!0}]},onClick:()=>{l.confirm({title:i("dialog.title.LetsDouble-Check"),content:i("dialog.ask.DoYouWantToDeleteSomething",{name:"bootstrap"===n?"Bootstrap script":`${o}`}),onOk:O})},children:(0,T.jsx)(c.A,{})})}),(0,T.jsxs)(S.OO,{gap:"sm",children:[(0,T.jsx)(x.Ay,{onClick:()=>t(),style:{width:"fit-content"},children:i("button.Cancel")},"cancel"),(0,T.jsx)(z.A.Button,{type:"primary",onClick:()=>{I()},style:{width:"fit-content"},menu:{items:[{key:"save",label:i("button.SaveWithoutClose"),onClick:()=>I({closeAfter:!1})}]},children:i("button.SaveAndClose")},"submit")]})]}),destroyOnHidden:!0,...s,children:(0,T.jsxs)(S.OO,{direction:"column",align:"stretch",gap:"sm",children:["bootstrap"===n&&(0,T.jsx)(p.A.Text,{children:i("userSettings.BootstrapScriptDescription")}),"userconfig"===n&&(0,T.jsx)(L.A.Item,{style:{marginBottom:0},label:i("userSettings.UserConfigScript"),children:(0,T.jsx)(G.A,{defaultValue:".bashrc",onChange:e=>{const t=k().find(h,{path:e});g((null===t||void 0===t?void 0:t.data)||""),d(e)},options:[{value:".bashrc"},{value:".zshrc"},{value:".tmux.conf.local"},{value:".vimrc"},{value:".Renviron"}],style:{width:"200px"}})}),(0,T.jsx)(W.A,{onChange:e=>g(e),language:"sh",editable:!0,value:u})]})})};var $=n(2212),Q=n(51181),Y=n(59083),J=n(67907),Z=n(42667);const ee=(0,Z.withDefault)(Z.StringParam,"general"),te=()=>{var e,t;const{t:n}=(0,C.Bd)(),{message:s}=H.A.useApp(),[i,a]=(0,Z.useQueryParam)("tab",ee),[l,r]=(0,$.q)("desktop_notification"),[o,c]=(0,$.q)("compact_sidebar"),[d,h]=(0,$.q)("selected_language"),[,m]=(0,$.f)("language"),[y,b]=(0,$.q)("automatic_update_check"),[f,j]=(0,$.q)("auto_logout"),[v,{toggle:I}]=(0,g.A)(!1),[O,{toggle:E}]=(0,g.A)(!1),[K,_]=(0,$.q)("preserve_login"),[q,D]=(0,$.q)("classic_session_list"),[R,M]=(0,$.q)("experimental_ai_agents"),[P,L]=(0,$.q)("classic_dashboard_page"),[F,U]=(0,A.useState)("bootstrap"),[W,{toggle:z}]=(0,g.A)(!1),[G,te]=(0,$.q)("max_concurrent_uploads"),ne=[{label:n("language.English"),value:"en"},{label:n("language.Korean"),value:"ko"},{label:n("language.Brazilian"),value:"pt-BR"},{label:n("language.SimplifiedChinese"),value:"zh-CN"},{label:n("language.TraditionalChinese"),value:"zh-TW"},{label:n("language.French"),value:"fr"},{label:n("language.Finnish"),value:"fi"},{label:n("language.German"),value:"de"},{label:n("language.Greek"),value:"el"},{label:n("language.Indonesian"),value:"id"},{label:n("language.Italian"),value:"it"},{label:n("language.Japanese"),value:"ja"},{label:n("language.Mongolian"),value:"mn"},{label:n("language.Polish"),value:"pl"},{label:n("language.Portuguese"),value:"pt"},{label:n("language.Russian"),value:"ru"},{label:n("language.Spanish"),value:"es"},{label:n("language.Thai"),value:"th"},{label:n("language.Turkish"),value:"tr"},{label:n("language.Vietnamese"),value:"vi"}];let se=globalThis.navigator.language;se=k().includes(["zh-CN","zh-TW","pt-BR"],se)?se:se.split("-")[0],se=null!==(e=null===(t=ne.find((e=>e.value===se)))||void 0===t?void 0:t.value)&&void 0!==e?e:"en";const ie=[{"data-testid":"group-preferences",title:n("userSettings.Preferences"),settingItems:(0,S.YM)([{"data-testid":"items-desktop-notification",type:"checkbox",title:n("userSettings.DesktopNotification"),description:(0,T.jsx)(C.x6,{i18nKey:"userSettings.DescDesktopNotification"}),defaultValue:!1,value:l,setValue:r,onChange:e=>{if(r(e.target.checked),e.target.checked&&"granted"!==Notification.permission)return"Notification"in window?"denied"===Notification.permission?(s.error(n("desktopNotification.PermissionDenied")),void r(!1)):void Notification.requestPermission().then((e=>{"denied"===e&&(s.error(n("desktopNotification.PermissionDenied")),r(!1))})):(s.error(n("desktopNotification.NotSupported")),void r(!1))}},{"data-testid":"items-use-compact-sidebar",type:"checkbox",title:n("userSettings.UseCompactSidebar"),description:(0,T.jsx)(C.x6,{i18nKey:"userSettings.DescUseCompactSidebar"}),defaultValue:!1,value:o,setValue:c,onChange:e=>{c(e.target.checked)}},{"data-testid":"items-language-select",type:"select",title:n("userSettings.Language"),description:n("userSettings.DescLanguage"),selectProps:{options:ne.map((e=>e.value===se?{...e,label:(0,T.jsxs)(T.Fragment,{children:[e.label,"\xa0",(0,T.jsxs)(p.A.Text,{type:"secondary",children:["(",n("userSettings.Default"),")"]})]}),filterValue:e.label}:{...e,filterValue:e.label})),showSearch:!0,optionFilterProp:"filterValue"},defaultValue:se,value:d||se,setValue:e=>{h(e);const t=new CustomEvent("language-changed",{detail:{language:e}});m(e),document.dispatchEvent(t)},onChange:e=>{h(e);const t=new CustomEvent("language-changed",{detail:{language:e}});m(e),document.dispatchEvent(t)}},globalThis.isElectron&&{"data-testid":"items-keep-login-session-information",type:"checkbox",title:n("userSettings.KeepLoginSessionInformation"),description:(0,T.jsx)(C.x6,{i18nKey:"userSettings.DescKeepLoginSessionInformation"}),defaultValue:!1,value:K,onChange:e=>{_(e.target.checked)}},{"data-testid":"items-automatic-update-check",type:"checkbox",title:n("userSettings.AutomaticUpdateCheck"),description:(0,T.jsx)(C.x6,{i18nKey:"userSettings.DescAutomaticUpdateCheck"}),defaultValue:!1,value:y,setValue:b,onChange:e=>{b(e.target.checked)}},{"data-testid":"items-auto-logout",type:"checkbox",title:n("userSettings.AutoLogout"),description:n("userSettings.DescAutoLogout"),defaultValue:!1,value:f,setValue:j,onChange:e=>{j(e.target.checked)}},{"data-testid":"items-my-keypair-info",type:"custom",title:n("userSettings.MyKeypairInfo"),description:n("userSettings.DescMyKeypairInfo"),children:(0,T.jsx)(x.Ay,{icon:(0,T.jsx)(u.A,{}),onClick:()=>I(),children:n("button.Config")})},{"data-testid":"items-ssh-keypair-management",type:"custom",title:n("userSettings.SSHKeypairManagement"),description:n("userSettings.DescSSHKeypairManagement"),children:(0,T.jsx)(x.Ay,{icon:(0,T.jsx)(u.A,{}),onClick:()=>E(),children:n("button.Config")})},{"data-testid":"items-max-concurrent-uploads",type:"select",title:n("userSettings.MaxConcurrentUploads"),description:n("userSettings.DescMaxConcurrentUploads"),selectProps:{options:k().map([2,3,4,5],(e=>2===e?{label:(0,T.jsxs)(T.Fragment,{children:[e,"\xa0",(0,T.jsxs)(p.A.Text,{type:"secondary",children:["(",n("userSettings.Default"),")"]})]}),value:e}:{label:e.toString(),value:e}))},defaultValue:2,value:G||2,setValue:te,onChange:e=>{te(e)}}])},{"data-testid":"group-shell-environments",title:n("userSettings.ShellEnvironments"),settingItems:[{"data-testid":"items-edit-bootstrap-script",type:"custom",title:n("userSettings.EditBootstrapScript"),children:(0,T.jsx)(x.Ay,{icon:(0,T.jsx)(u.A,{}),onClick:()=>{U("bootstrap"),z()},children:n("button.Config")})},{"data-testid":"items-edit-user-config-script",type:"custom",title:n("userSettings.EditUserConfigScript"),children:(0,T.jsx)(x.Ay,{icon:(0,T.jsx)(u.A,{}),onClick:()=>{U("userconfig"),z()},children:n("button.Config")})}]},{"data-testid":"group-classic-features",title:n("userSettings.BackToClassicFeatures"),description:n("userSettings.BackToClassicFeaturesDesc"),settingItems:[{"data-testid":"items-experimental-neo-session-list",type:"checkbox",title:n("userSettings.ClassicSessionList"),description:n("general.Enabled"),defaultValue:!1,value:q,setValue:D,onChange:e=>{D(e.target.checked)}},{"data-testid":"items-classic-dashboard",type:"checkbox",title:n("webui.menu.ClassicDashboardPage"),description:n("general.Enabled"),defaultValue:!1,value:P,setValue:L,onChange:e=>{L(e.target.checked)}}]},{"data-testid":"group-experimental-features",title:n("userSettings.ExperimentalFeatures"),description:n("userSettings.ExperimentalFeaturesDesc"),settingItems:[{"data-testid":"items-experimental-ai-agents",type:"checkbox",title:n("userSettings.AIAgents"),description:n("general.Enabled"),defaultValue:!1,value:R,setValue:M,onChange:e=>{M(e.target.checked)}}]}];return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Y.A,{activeTabKey:i,onTabChange:e=>a(e),tabList:[{key:"general",label:n("userSettings.General")},{key:"logs",label:n("userSettings.Logs")}],children:(0,T.jsxs)(A.Suspense,{fallback:(0,T.jsx)(Q.A,{active:!0}),children:["general"===i&&(0,T.jsx)(J.A,{children:(0,T.jsx)(N.A,{settingGroups:ie,showChangedOptionFilter:!0,showResetButton:!0,showSearchBar:!0})}),"logs"===i&&(0,T.jsx)(J.A,{children:(0,T.jsx)(w,{})})]})}),(0,T.jsx)(B,{open:v,onRequestClose:I}),(0,T.jsx)(V,{open:O,onRequestClose:E}),F&&(0,T.jsx)(X,{open:W,shellInfo:F,onRequestClose:()=>{z()},afterClose:()=>{U(void 0)}})]})}},25300:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(1139),i=n(84100);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};var l=n(29815),r=function(e,t){return i.createElement(l.A,(0,s.A)({},e,{ref:t,icon:a}))};const o=i.forwardRef(r)}}]);
//# sourceMappingURL=5177.53aa31f1.chunk.js.map