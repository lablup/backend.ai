/*! For license information please see 6019.cb8abc80.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[6019],{16019:(e,n,r)=>{r.r(n),r.d(n,{default:()=>y,passwordPattern:()=>k});var s=r(48880),a=r(40690),t=r(62378),o=r(59682),i=r(17534);const d={icon:function(e,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z",fill:e}},{tag:"path",attrs:{d:"M172.2 828.1h679.6L512 239.9 172.2 828.1zM560 720a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm-16-304v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8z",fill:n}},{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8z",fill:e}}]}},name:"warning",theme:"twotone"};var l=r(91101);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},c.apply(this,arguments)}const u=(e,n)=>i.createElement(l.A,c({},e,{ref:n,icon:d}));const w=i.forwardRef(u);var m=r(20353),h=r(284),p=r(10477),g=r(7957),b=r(87621),P=r(15121),f=r(67631),v=r(62962),j=r(89374);const k=/^(?=.*\d)(?=.*[a-zA-Z])(?=.*[_\W]).{8,}$/,y=()=>{const{value:e,dispatchEvent:n}=(0,o.useWebComponentInfo)();let r;try{r=JSON.parse(e||"")}catch(O){r={open:!1,currentPassword:"",username:"",api_endpoint:""}}const{open:d,currentPassword:l,username:c,api_endpoint:u}=r,{token:y}=m.A.useToken(),[A]=h.A.useForm(),{t:_}=(0,v.Bd)();(0,i.useEffect)((()=>{d&&A.resetFields()}),[d,A]);const x=(0,a.oM)({api_endpoint:u}),C=(0,t.ET)({mutationFn:e=>(0,s.hu)({method:"POST",url:"/server/update-password-no-auth",body:e,client:x})}),M=()=>{A.validateFields().then((e=>{C.mutate({username:c,current_password:l,new_password:e.newPassword},{onSuccess(){n("ok",null)},onError(){}})}))};return(0,j.jsx)(p.A,{open:d,centered:!0,mask:!1,onCancel:()=>{n("cancel",null)},keyboard:!1,maskClosable:!1,footer:null,width:450,destroyOnHidden:!0,forceRender:!0,children:(0,j.jsxs)(f.OO,{direction:"column",justify:"start",align:"stretch",gap:"md",style:{alignSelf:"stretch",paddingTop:y.paddingMD,paddingBottom:y.paddingMD},children:[(0,j.jsxs)(g.A.Title,{level:3,style:{margin:0},children:[(0,j.jsx)(w,{twoToneColor:y.colorWarning})," ",_("webui.menu.PleaseChangeYourPassword")]}),_("webui.menu.YouMushChangeYourPassword"),(0,j.jsxs)(h.A,{form:A,layout:"vertical",initialValues:{currentPassword:l},disabled:C.isPending,children:[(0,j.jsx)(h.A.Item,{name:"newPassword",label:_("webui.menu.NewPassword"),rules:[{required:!0},{pattern:k,message:_("webui.menu.InvalidPasswordMessage").toString()},()=>({validator:(e,n)=>l===n?Promise.reject(new Error(_("webui.menu.NewPasswordCannotBeSame").toString())):Promise.resolve()})],hasFeedback:!0,children:(0,j.jsx)(b.A.Password,{})}),(0,j.jsx)(h.A.Item,{name:"confirm",label:_("webui.menu.NewPasswordAgain"),dependencies:["newPassword"],hasFeedback:!0,rules:[{required:!0},e=>{let{getFieldValue:n}=e;return{validator:(e,r)=>r&&n("newPassword")!==r?Promise.reject(new Error(_("environment.PasswordsDoNotMatch").toString())):Promise.resolve()}}],children:(0,j.jsx)(b.A.Password,{onPressEnter:M})})]}),(0,j.jsx)(P.Ay,{type:"primary",onClick:M,loading:C.isPending,children:_("webui.menu.Update")})]})})}}}]);
//# sourceMappingURL=6019.cb8abc80.chunk.js.map