"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[890,2251],{33162:(e,n,l)=>{l.d(n,{A:()=>K});const a=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ContainerLogModalFragment",selections:[e,{kind:"RequiredField",field:n,action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"ComputeSessionNode",abstractKey:null}}();a.hash="59dda81185d3d874cd635adcae2ae9d4";const s=a;var i=l(310),r=l(19885),t=l(37615),o=l(17457),d=l(66610);var u=l(39718),c=l(61659),m=l(33865),g=l(47637),p=l(88153),y=l(78824),k=l(27480),h=l(82851),v=l(60042),F=l(84395),x=l(63872),S=l(8348),_=l.n(S),f=l(42352),j=l(54070),A=l(89737),b=l(66906);const K=e=>{var n,l,a,S,K,C;let{sessionFrgmt:T,defaultKernelId:L,...N}=e;const I=(0,r.CX)(),{token:w}=p.A.useToken(),D=(0,t.Am)(),O=(0,A.useFragment)(s,T),E=(null===O||void 0===O||null===(n=O.kernel_nodes)||void 0===n||null===(l=n.edges)||void 0===l?void 0:l.map((e=>null===e||void 0===e?void 0:e.node)))||[],[R,M]=(0,d.useState)(L||(null===(a=_().find(E,(e=>"main"===(null===e||void 0===e?void 0:e.cluster_role))))||void 0===a?void 0:a.row_id)||(null===(S=E[0])||void 0===S?void 0:S.row_id));(0,d.useEffect)((()=>{!1===N.open&&M(void 0)}),[N.open]);const{data:P,refetch:V,isPending:U,isRefetching:$,dataUpdatedAt:q}=(0,o.nN)({queryKey:["containerLog",null===O||void 0===O?void 0:O.row_id,null===O||void 0===O?void 0:O.access_key,R,N.open],queryFn:async()=>N.open&&null!==O&&void 0!==O&&O.row_id&&null!==O&&void 0!==O&&O.access_key&&R?await I.get_logs(null===O||void 0===O?void 0:O.row_id,null===O||void 0===O?void 0:O.access_key,R,15e3).then((e=>e.result.logs)):"",staleTime:5e3}),[z,{resetPrevious:B}]=function(e,n){let{initialPrev:l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=(0,d.useRef)(l),[s,i]=(0,d.useState)({}),r=(0,d.useMemo)(e,n),t=(0,d.useMemo)((()=>a.current),[...n,s]);return(0,d.useEffect)((()=>{a.current=r}),n),[{previous:t,current:r},{resetPrevious:()=>{a.current=l,i({})}}]}((()=>(null===P||void 0===P?void 0:P.split("\n").length)||0),[P]),{md:Q}=y.Ay.useBreakpoint(),{t:G}=(0,j.Bd)();return(0,b.jsx)(u.A,{title:(0,b.jsxs)(x.OO,{style:{maxWidth:"100%"},gap:"sm",children:[(0,b.jsx)(k.A.Title,{level:4,style:{margin:0,flexShrink:0},children:"Logs"}),O?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.A.Text,{style:{fontWeight:"normal"},ellipsis:!0,children:null===O||void 0===O?void 0:O.name}),(0,b.jsxs)(k.A.Text,{style:{fontWeight:"normal",fontFamily:"monospace"},copyable:{text:null===O||void 0===O?void 0:O.row_id,tooltips:G("button.CopySomething",{name:G("session.SessionId")})},children:["(",Q?null===O||void 0===O?void 0:O.row_id:null===O||void 0===O||null===(K=O.row_id.split("-"))||void 0===K?void 0:K[0],")"]})]}):null]}),width:"100%",styles:{header:{width:"100%"},body:{height:"calc(100vh - 100px)",maxHeight:"calc(100vh - 100px)"}},...N,footer:null,destroyOnClose:!0,children:(0,b.jsxs)(x.OO,{direction:"column",align:"start",style:{height:"100%"},gap:"sm",children:[(0,b.jsxs)(x.OO,{gap:"sm",wrap:"wrap",children:["Kernel Role",(0,b.jsx)(c.A,{value:R,onChange:e=>{M(e),B()},autoSelectOption:!0,options:_().chain(null===O||void 0===O||null===(C=O.kernel_nodes)||void 0===C?void 0:C.edges).sortBy((e=>{var n,l;return`${null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.cluster_role} ${null===e||void 0===e||null===(l=e.node)||void 0===l?void 0:l.cluster_idx}`})).map((e=>{var n,l,a,s,i;return{label:(0,b.jsxs)(b.Fragment,{children:[null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.cluster_role,"main"!==(null===e||void 0===e||null===(l=e.node)||void 0===l?void 0:l.cluster_role)?null===e||void 0===e||null===(a=e.node)||void 0===a?void 0:a.cluster_idx:"","admin"===D||"superadmin"===D?(0,b.jsxs)(k.A.Text,{style:{fontFamily:"monospace",fontSize:w.fontSizeSM},type:"secondary",children:["(",((null===e||void 0===e||null===(s=e.node)||void 0===s?void 0:s.row_id)||"").substring(0,5),")"]}):null]}),value:null===e||void 0===e||null===(i=e.node)||void 0===i?void 0:i.row_id}})).value()}),(0,b.jsx)(h.A,{type:"vertical"}),(0,b.jsx)(v.A,{title:G("button.Download"),children:(0,b.jsx)(F.Ay,{size:"middle",icon:(0,b.jsx)(f.A,{}),disabled:U||$,onClick:()=>{const e=new Blob([P||""],{type:"text/plain"});(0,i.WN)(e,`${(null===O||void 0===O?void 0:O.name)||"session"}-logs-${R}-${(new Date).toISOString()}.txt`)}})}),(0,b.jsx)(v.A,{title:G("button.Refresh"),children:(0,b.jsx)(F.Ay,{size:"middle",loading:U||$,icon:(0,b.jsx)(m.A,{}),onClick:()=>V()})})]}),(0,b.jsx)("div",{style:{height:"calc(100% - 50px)",alignSelf:"stretch",border:`1px solid ${w.colorBorder}`,overflow:"hidden"},children:(0,b.jsx)(g.jB,{startFollowing:!0,render:e=>{let{follow:n,onScroll:l}=e;return(0,b.jsx)(g.FT,{caseInsensitive:!0,enableSearch:!0,enableSearchNavigation:!0,selectableLines:!0,text:P||"",highlight:z.previous,extraLines:1,follow:n,onScroll:l})}},q)})]})})}},10890:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});var a=l(27480),s=(l(66610),l(66906));const i=e=>{let{text:n,children:l}=e;return(0,s.jsx)(a.A.Text,{copyable:!0,code:!0,children:n||l})}},22525:(e,n,l)=>{l.d(n,{A:()=>F});const a=function(){var e={alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ImageNodeSimpleTagFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"base_image_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"KVPair",kind:"LinkedField",name:"tags",plural:!0,selections:[e,n],storageKey:null},{alias:null,args:null,concreteType:"KVPair",kind:"LinkedField",name:"labels",plural:!0,selections:[{kind:"RequiredField",field:e,action:"NONE"},n],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"registry",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"namespace",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tag",storageKey:null}],type:"ImageNode",abstractKey:null}}();a.hash="7d3e723aea008e972ff157814ff9c27e";const s=a;var i=l(2156),r=l(19885),t=l(10890),o=l(54802),d=l(652),u=l(88153),c=l(27480),m=l(82851),g=l(80770),p=l(63872),y=l(8348),k=l.n(y),h=(l(66610),l(89737)),v=l(66906);const F=e=>{let{imageFrgmt:n,copyable:l=!0}=e;const[,{tagAlias:a}]=(0,r.Gj)(),{token:y}=u.A.useToken(),F=(0,r.CX)(),x=(0,h.useFragment)(s,n);if(!x)return null;const S=`${x.registry}/${x.namespace}:${x.tag}@${x.architecture}`,_=`${x.registry}/${x.name}:${x.tag}@${x.architecture}`;return F.supports("base-image-name")?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(d.A,{image:S,style:{marginRight:y.marginXS}}),(0,v.jsx)(c.A.Text,{children:a(x.base_image_name||"")}),(0,v.jsx)(m.A,{type:"vertical"}),(0,v.jsx)(c.A.Text,{children:x.version}),(0,v.jsx)(m.A,{type:"vertical"}),(0,v.jsx)(c.A.Text,{children:x.architecture}),(0,v.jsx)(m.A,{type:"vertical"}),k().map(x.tags,((e,n)=>{var l;if(!e)return null;const s=e.key&&k().includes(e.key,"customized_"),r=(s?null===(l=k().find(null===x||void 0===x?void 0:x.labels,{key:"ai.backend.customized-image.name"}))||void 0===l?void 0:l.value:null===e||void 0===e?void 0:e.value)||"",t=null!==e&&void 0!==e&&e.key?a(e.key+r):void 0;return null!==e&&void 0!==e&&e.key&&k().isEqual(t,(0,i.WY)(e.key+r))?(0,v.jsx)(o.A,{values:[{label:a(e.key),color:s?"cyan":"blue"},{label:r,color:s?"cyan":"blue"}]},`${e.key}-${n}`):(0,v.jsx)(g.A,{color:s?"cyan":"blue",children:t},`${e.key}-${n}`)})),l&&(0,v.jsx)(c.A.Text,{style:{color:y.colorLink},copyable:{text:S}})]}):(0,v.jsxs)(p.OO,{direction:"row",gap:"xs",children:[(0,v.jsx)(d.A,{image:_||null}),(0,v.jsx)(t.default,{children:_})]})}},2251:(e,n,l)=>{l.d(n,{A:()=>ln});const a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionDetailDrawerFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"project_id",storageKey:null},{args:null,kind:"FragmentSpread",name:"SessionDetailContentFragment"}],type:"ComputeSessionNode",abstractKey:null,hash:"eb57207016a6a8cf6abbf348456840de"},s=a;var i=l(19885),r=l(84970);const t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionDetailContentFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"project_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"resource_opts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status_data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vfolder_mounts",storageKey:null},{alias:null,args:null,concreteType:"VirtualFolderConnection",kind:"LinkedField",name:"vfolder_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"VirtualFolderEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"VirtualFolderNode",kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"FolderLink_vfolderNode"}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"terminated_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"agent_ids",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"requested_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"ImageNode",kind:"LinkedField",name:"image",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ImageNodeSimpleTagFragment"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"ConnectedKernelListFragment"}],storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"SessionStatusTagFragment"},{args:null,kind:"FragmentSpread",name:"SessionActionButtonsFragment"},{args:null,kind:"FragmentSpread",name:"BAISessionTypeTagFragment"},{args:null,kind:"FragmentSpread",name:"EditableSessionNameFragment"},{args:null,kind:"FragmentSpread",name:"SessionReservationFragment"},{args:null,kind:"FragmentSpread",name:"ContainerLogModalFragment"},{args:null,kind:"FragmentSpread",name:"SessionUsageMonitorFragment"},{args:null,kind:"FragmentSpread",name:"ContainerCommitModalFragment"},{args:null,kind:"FragmentSpread",name:"SessionIdleChecksNodeFragment"},{args:null,kind:"FragmentSpread",name:"SessionStatusDetailModalFragment"},{args:null,kind:"FragmentSpread",name:"AppLauncherModalFragment"},{args:null,kind:"FragmentSpread",name:"MountedVFolderLinksFragment"}],type:"ComputeSessionNode",abstractKey:null,hash:"da1d548b789b85bc9bd89fbbf4f6e337"},o=t,d=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"project_id"}],n=[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"project_id",variableName:"project_id"}],l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},r=[{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null}],t={alias:null,args:null,kind:"ScalarField",name:"status_info",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"SessionDetailContentQuery",selections:[{alias:"internalLoadedSession",args:n,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"SessionDetailContentFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"SessionDetailContentQuery",selections:[{alias:"internalLoadedSession",args:n,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[l,a,s,{alias:null,args:null,kind:"ScalarField",name:"project_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"resource_opts",storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"status_data",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vfolder_mounts",storageKey:null},{alias:null,args:null,concreteType:"VirtualFolderConnection",kind:"LinkedField",name:"vfolder_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"VirtualFolderEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"VirtualFolderNode",kind:"LinkedField",name:"node",plural:!1,selections:[a,s,l],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"terminated_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"agent_ids",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"requested_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:"ImageNode",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"base_image_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null},s,{alias:null,args:null,concreteType:"KVPair",kind:"LinkedField",name:"tags",plural:!0,selections:r,storageKey:null},{alias:null,args:null,concreteType:"KVPair",kind:"LinkedField",name:"labels",plural:!0,selections:r,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"registry",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"namespace",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tag",storageKey:null},l],storageKey:null},l,a,{alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null},i,t,{alias:null,args:null,kind:"ScalarField",name:"agent_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commit_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"priority",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"starts_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null}],storageKey:null}]},params:{cacheID:"3ad272073b5db8987ef6588878788ea8",id:null,metadata:{},name:"SessionDetailContentQuery",operationKind:"query",text:'query SessionDetailContentQuery(\n  $id: GlobalIDField!\n  $project_id: UUID!\n) {\n  internalLoadedSession: compute_session_node(id: $id, project_id: $project_id) {\n    ...SessionDetailContentFragment\n    id\n  }\n}\n\nfragment AppLauncherModalFragment on ComputeSessionNode {\n  id\n  row_id\n  service_ports\n  access_key\n}\n\nfragment BAISessionTypeTagFragment on ComputeSessionNode {\n  type\n}\n\nfragment ConnectedKernelListFragment on KernelNode {\n  id\n  row_id\n  cluster_role\n  status\n  status_info\n  agent_id\n  container_id\n}\n\nfragment ContainerCommitModalFragment on ComputeSessionNode {\n  id\n  name\n  row_id\n}\n\nfragment ContainerLogModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  status\n  access_key\n  kernel_nodes {\n    edges {\n      node {\n        id\n        row_id\n        container_id\n        cluster_idx\n        cluster_role\n      }\n    }\n  }\n}\n\nfragment EditableSessionNameFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  priority\n  user_id\n  status\n}\n\nfragment FolderLink_vfolderNode on VirtualFolderNode {\n  row_id\n  name\n}\n\nfragment ImageNodeSimpleTagFragment on ImageNode {\n  base_image_name @since(version: "24.12.0")\n  version @since(version: "24.12.0")\n  architecture\n  name\n  tags @since(version: "24.12.0") {\n    key\n    value\n  }\n  labels {\n    key\n    value\n  }\n  registry\n  namespace @since(version: "24.12.0")\n  tag\n}\n\nfragment MountedVFolderLinksFragment on ComputeSessionNode {\n  row_id\n  vfolder_nodes @since(version: "25.4.0") {\n    edges {\n      node {\n        ...FolderLink_vfolderNode\n        id\n      }\n    }\n  }\n  ...MountedVFolderLinksLegacyLazyFolderLinkFragment\n}\n\nfragment MountedVFolderLinksLegacyLazyFolderLinkFragment on ComputeSessionNode {\n  row_id\n  vfolder_mounts\n}\n\nfragment SessionActionButtonsFragment on ComputeSessionNode {\n  id\n  row_id\n  type\n  status\n  access_key\n  service_ports\n  commit_status\n  user_id\n  ...TerminateSessionModalFragment\n  ...ContainerLogModalFragment\n  ...ContainerCommitModalFragment\n  ...AppLauncherModalFragment\n}\n\nfragment SessionDetailContentFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  project_id\n  user_id\n  resource_opts\n  status\n  status_data\n  vfolder_mounts\n  vfolder_nodes @since(version: "25.4.0") {\n    edges {\n      node {\n        ...FolderLink_vfolderNode\n        id\n      }\n    }\n    count\n  }\n  created_at\n  terminated_at\n  scaling_group\n  agent_ids\n  requested_slots\n  idle_checks @since(version: "24.12.0")\n  kernel_nodes {\n    edges {\n      node {\n        image {\n          ...ImageNodeSimpleTagFragment\n          id\n        }\n        ...ConnectedKernelListFragment\n        id\n      }\n    }\n  }\n  ...SessionStatusTagFragment\n  ...SessionActionButtonsFragment\n  ...BAISessionTypeTagFragment\n  ...EditableSessionNameFragment\n  ...SessionReservationFragment\n  ...ContainerLogModalFragment\n  ...SessionUsageMonitorFragment\n  ...ContainerCommitModalFragment\n  ...SessionIdleChecksNodeFragment\n  ...SessionStatusDetailModalFragment\n  ...AppLauncherModalFragment\n  ...MountedVFolderLinksFragment\n}\n\nfragment SessionIdleChecksNodeFragment on ComputeSessionNode {\n  id\n  idle_checks @since(version: "24.12.0")\n}\n\nfragment SessionReservationFragment on ComputeSessionNode {\n  id\n  created_at\n  starts_at\n  terminated_at\n}\n\nfragment SessionStatusDetailModalFragment on ComputeSessionNode {\n  id\n  name\n  status\n  status_info\n  status_data\n  starts_at\n}\n\nfragment SessionStatusTagFragment on ComputeSessionNode {\n  id\n  status\n  status_info\n  status_data\n}\n\nfragment SessionUsageMonitorFragment on ComputeSessionNode {\n  occupied_slots\n  ...useSessionNodeLiveStatSessionFragment\n}\n\nfragment TerminateSessionModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  scaling_group\n  access_key\n  kernel_nodes {\n    edges {\n      node {\n        container_id\n        agent_id\n        id\n      }\n    }\n  }\n}\n\nfragment useSessionNodeLiveStatSessionFragment on ComputeSessionNode {\n  id\n  kernel_nodes {\n    edges {\n      node {\n        live_stat\n        cluster_role\n        id\n      }\n    }\n  }\n}\n'}}}();d.hash="752a64ec8ea79d4eaa6876f526ddc326";const u=d,c=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"uuid"}],n=[{kind:"Variable",name:"id",variableName:"uuid"}],l={alias:null,args:null,kind:"ScalarField",name:"group_id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"SessionDetailContentLegacyQuery",selections:[{alias:"legacy_session",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"SessionDetailContentLegacyQuery",selections:[{alias:"legacy_session",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"780428975b2d9c6608ca3db2d90b013e",id:null,metadata:{},name:"SessionDetailContentLegacyQuery",operationKind:"query",text:"query SessionDetailContentLegacyQuery(\n  $uuid: UUID!\n) {\n  legacy_session: compute_session(id: $uuid) {\n    group_id\n    id\n  }\n}\n"}}}();c.hash="407c9aac95a1b3572cd4f83828c8a0aa";const m=c;var g=l(2156),p=l(37615),y=l(71526),k=l(27891);const h={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ConnectedKernelListFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status_info",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"agent_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null}],type:"KernelNode",abstractKey:null,hash:"1448eea015fe3c7edc6b5331ddcda7ae"},v=h;var F=l(54802),x=l(49613),S=l(33162),_=l(88153),f=l(27480),j=l(60042),A=l(84395),b=l(80770),K=l(63872),C=l(8348),T=l.n(C),L=l(37909),N=l(66610),I=l(54070),w=l(89737),D=l(66906);const O={PREPARING:"blue",BUILDING:"blue",PULLING:"blue",PREPARED:"blue",CREATING:"blue",PENDING:"green",SCHEDULED:"green",RUNNING:"green",RESTARTING:"green",RESIZING:"green",SUSPENDED:"green",TERMINATING:"default",TERMINATED:"default",CANCELLED:"default",ERROR:"red"},E=e=>{let{kernelsFrgmt:n,sessionFrgmtForLogModal:l}=e;const{t:a}=(0,I.Bd)(),[s,i]=(0,N.useState)(),{token:r}=_.A.useToken(),t=(0,w.useFragment)(v,n),o=(0,g.YM)([{title:a("kernel.KernelId"),fixed:"left",dataIndex:"row_id",render:e=>(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(f.A.Text,{copyable:!0,ellipsis:!0,children:e}),(0,D.jsx)(j.A,{title:a("session.SeeContainerLogs"),children:(0,D.jsx)(A.Ay,{icon:(0,D.jsx)(L.A,{}),type:"link",onClick:()=>{i(e)},style:{width:"auto",height:"auto",marginInlineStart:r.marginXXS,border:"none"}})})]})},{title:a("kernel.Role"),dataIndex:"cluster_role",render:e=>(0,D.jsx)(b.A,{children:e})},{title:a("kernel.Status"),dataIndex:"status",render:(e,n)=>{var l;return(0,D.jsx)(D.Fragment,{children:""!==(null===n||void 0===n?void 0:n.status_info)?(0,D.jsx)(F.A,{values:[{label:e,color:T().get(O,e)},{label:null===n||void 0===n?void 0:n.status_info,color:T().get(O,null!==(l=null===n||void 0===n?void 0:n.status_info)&&void 0!==l?l:"")}]}):(0,D.jsx)(b.A,{color:T().get(O,e),children:e})})}},{title:a("kernel.ContainerId"),dataIndex:"container_id",onCell:()=>({style:{maxWidth:250}}),render:e=>T().isEmpty(e)?"-":(0,D.jsx)(f.A.Text,{copyable:!0,ellipsis:!0,children:e})},{title:a("kernel.AgentId"),dataIndex:"agent_id",render:e=>(0,D.jsx)(f.A.Text,{copyable:!0,children:e})}]);return(0,D.jsxs)(K.OO,{direction:"column",align:"stretch",gap:"sm",children:[(0,D.jsx)(K.zx,{bordered:!0,rowKey:"id",scroll:{x:"max-content"},columns:o,dataSource:(0,g.f)(t),style:{width:"100%"},pagination:!1}),(0,D.jsx)(x.A,{children:(0,D.jsx)(S.A,{open:!!s,sessionFrgmt:l||null,defaultKernelId:s,onCancel:()=>{i(void 0)}})})]})},R=function(){var e={defaultValue:null,kind:"LocalArgument",name:"project_id"},n={defaultValue:null,kind:"LocalArgument",name:"sessionId"},l=[{alias:null,args:[{kind:"Variable",name:"id",variableName:"sessionId"},{kind:"Variable",name:"project_id",variableName:"project_id"}],concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,n],kind:"Fragment",metadata:null,name:"EditableSessionNameRefetchQuery",selections:l,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e],kind:"Operation",name:"EditableSessionNameRefetchQuery",selections:l},params:{cacheID:"8b69af7860896e4611f1af57de4220c8",id:null,metadata:{},name:"EditableSessionNameRefetchQuery",operationKind:"query",text:"query EditableSessionNameRefetchQuery(\n  $sessionId: GlobalIDField!\n  $project_id: UUID!\n) {\n  compute_session_node(id: $sessionId, project_id: $project_id) {\n    id\n    name\n  }\n}\n"}}}();R.hash="8c0f641cc3f0f3d44322877d137c6fcf";const M=R,P={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditableSessionNameFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"priority",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"9c053b92b568a9b132f7615d1869f32b"},V=P;var U=l(17457),$=l(68554),q=l(39452),z=l(8804),B=l(22065),Q=l(20958),G=l(5238);const X=e=>{let{component:n=Q.A,sessionFrgmt:l,editable:a,style:s,...i}=e;const r=(0,w.useRelayEnvironment)(),t=(0,y.hd)(),o=(0,w.useFragment)(V,l),[d,u]=(0,N.useState)(o.name),c=(0,$.f)(d),[m]=(0,p.U6)(),k=(0,g.QE)(),h=(0,U.ET)({mutationFn:e=>k({method:"POST",url:`/session/${o.name}/rename`,body:{name:e}})}),{t:v}=(0,I.Bd)(),{token:F}=_.A.useToken(),{message:x}=q.A.useApp(),[S,f]=(0,N.useState)(!1),j=!["RESTARTING","PREPARING","PREPARED","CREATING","PULLING"].includes(o.status||""),A=a&&m.uuid===o.user_id&&j,b=h.isPending||d!==o.name;return(0,D.jsxs)(D.Fragment,{children:[(!S||b)&&(0,D.jsx)(n,{editable:!(!A||b)&&{onStart:()=>{f(!0)},triggerType:["icon","text"]},copyable:!0,style:{...s,color:b?F.colorTextTertiary:null===s||void 0===s?void 0:s.color},...i,children:h.isPending||d!==o.name?d:o.name}),S&&!b&&(0,D.jsx)(z.A,{onFinish:e=>{f(!1),u(e.sessionName),h.mutate(e.sessionName,{onSuccess:()=>{(0,w.fetchQuery)(r,M,{sessionId:o.id,project_id:t.id}).toPromise().catch(),document.dispatchEvent(new CustomEvent("backend-ai-session-list-refreshed"))},onError:n=>{o.name!==e.sessionName&&x.error(v("session.FailToRenameSession"))}})},initialValues:{sessionName:o.name},style:{flex:1},children:(0,D.jsx)(z.A.Item,{name:"sessionName",rules:c,validateDebounce:200,children:(0,D.jsx)(B.A,{size:"large",value:d||"",suffix:(0,D.jsx)(G.A,{style:{fontSize:"0.8em",color:F.colorTextTertiary}}),autoFocus:!0,onKeyDown:e=>{"Escape"===e.key&&f(!1)}})})})]})},W={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionActionButtonsFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},action:"NONE"},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commit_status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},{args:null,kind:"FragmentSpread",name:"TerminateSessionModalFragment"},{args:null,kind:"FragmentSpread",name:"ContainerLogModalFragment"},{args:null,kind:"FragmentSpread",name:"ContainerCommitModalFragment"},{args:null,kind:"FragmentSpread",name:"AppLauncherModalFragment"}],type:"ComputeSessionNode",abstractKey:null,hash:"103a9b6ca717c568c1cdfc2dcde10f1a"},H=W,J={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AppLauncherModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"5851a2f65c24221db8a7dddee2487e40"},Z=J;var Y=l(39718),ee=l(46936),ne=l(22252),le=l(35054),ae=l(92174),se=l(37325),ie=l(4107);const re=e=>{var n,l;let{onRequestClose:a,sessionFrgmt:s,...r}=e;const{t:t}=(0,I.Bd)(),o=(0,i.CX)(),d=(0,N.useRef)(null),[u,c]=(0,N.useState)(!1),[m,g]=(0,N.useState)(!1),[p,y]=(0,N.useState)(!1),[k,h]=(0,N.useState)(!1),[v,F]=(0,N.useState)(!1),x=(0,w.useFragment)(Z,s),S=JSON.parse(null!==(n=null===x||void 0===x?void 0:x.service_ports)&&void 0!==n?n:"{}"),{preOpenAppTemplate:_,baseAppTemplate:b}=(e=>{const{data:n={}}=(0,U.nj)({queryKey:["backendai-app-template"],queryFn:()=>fetch("resources/app_template.json").then((e=>e.json())).then((e=>e.appTemplate)),staleTime:864e5}),l=(0,i.CX)(),a=globalThis.isElectron||l._config.allowNonAuthTCP,s=T().filter(e,(e=>"preopen"===e.protocol&&!1===e.is_inference)),r=T().map(s,(e=>({name:e.name,title:e.name,src:"/resources/icons/default_app.svg"}))),t=T().filter(e,(e=>e.is_inference)),o=T().map(t,(e=>({name:e.name,title:e.name,src:"/resources/icons/default_app.svg"}))),d=T().filter(e,(e=>!T().includes(s,e)&&!T().includes(t,e)));let u=T().chain(d).map((e=>{const l=T().find(T().flatten(Object.values(n)),(n=>n.name===e.name));return T().includes(s,e)||e.is_inference?null:"sshd"!==e.name||a?{name:e.name,title:(null===l||void 0===l?void 0:l.title)||e.name,category:(null===l||void 0===l?void 0:l.category)||"99.Custom",redirect:(null===l||void 0===l?void 0:l.redirect)||"",src:(null===l||void 0===l?void 0:l.src)||"./resources/icons/default_app.svg"}:null})).filter(Boolean).value();T().some(d,{name:"ttyd"})||u.push({name:n.ttyd[0].name,title:n.ttyd[0].title,category:"99.Custom",redirect:n.ttyd[0].redirect,src:n.ttyd[0].src}),a&&u.push({name:"vscode-desktop",title:"Visual Studio Code (Desktop)",category:"2.Development",redirect:"",src:"./resources/icons/vscode.svg"});const c=T().chain(u).sortBy("category").groupBy("category").value();return{appTemplate:n,preOpenAppTemplate:r,inferenceAppTemplate:o,baseAppTemplate:c}})(S),C=async e=>{var n,l,s,i,r;if(null===e||void 0===e||!e.name)return;await(null===(n=d.current)||void 0===n?void 0:n.validateFields().then((e=>{var n;(u&&(globalThis.appLauncher.clientIps=e.clientIps),m)&&(globalThis.appLauncher.userPort=null!==(n=e.preferredPort)&&void 0!==n?n:10250);v&&(globalThis.appLauncher.subDomain=e.subDomain),p&&(globalThis.appLauncher.forceUseV1Proxy=!0),k&&(globalThis.appLauncher.forceUseV2Proxy=!0)})));const t={"app-name":null!==(l=null===e||void 0===e?void 0:e.name)&&void 0!==l?l:"","session-uuid":null!==(s=null===x||void 0===x?void 0:x.row_id)&&void 0!==s?s:"","url-postfix":null!==(i=null===e||void 0===e?void 0:e.redirect)&&void 0!==i?i:""};if(["nniboard","mlflow-ui"].includes(null!==(r=null===e||void 0===e?void 0:e.name)&&void 0!==r?r:""))globalThis.appLauncher._openAppLaunchConfirmationDialog(t);else{if("tensorboard"===(null===e||void 0===e?void 0:e.name))return globalThis.appLauncher._openTensorboardDialog(),void a();globalThis.appLauncher._runApp(t).then((()=>{})),c(!1),g(!1),a()}};return(0,D.jsx)(Y.A,{title:t("session.appLauncher.App"),width:450,onCancel:a,footer:null,destroyOnClose:!0,...r,children:(0,D.jsxs)(K.OO,{direction:"column",gap:"md",align:"stretch",children:[T().map(b,((e,n)=>(0,D.jsxs)("div",{children:[(0,D.jsx)(f.A.Title,{level:5,style:{marginTop:0},children:n.split(".")[1]}),(0,D.jsx)(ne.A,{gutter:[24,24],children:T().map(e,(e=>(0,D.jsx)(le.A,{span:6,style:{alignContent:"center"},children:(0,D.jsxs)(K.OO,{direction:"column",gap:"xs",style:{height:"100%"},children:[(0,D.jsx)(A.Ay,{icon:(0,D.jsx)(ae.A,{src:null===e||void 0===e?void 0:e.src,alt:null===e||void 0===e?void 0:e.name,preview:!1,style:{height:36,width:36}}),onClick:()=>{C(e)},style:{height:72,width:72}}),(0,D.jsx)(f.A.Text,{style:{textAlign:"center"},children:null===e||void 0===e?void 0:e.title})]})},null===e||void 0===e?void 0:e.name)))})]},n))),_.length>0?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(f.A.Title,{level:5,style:{marginTop:0},children:t("session.launcher.PreOpenPortTitle")}),(0,D.jsx)(ne.A,{gutter:[12,12],children:T().map(_,(e=>(0,D.jsx)(le.A,{span:6,style:{alignContent:"center"},children:(0,D.jsxs)(K.OO,{direction:"column",gap:"xs",style:{height:"100%"},children:[(0,D.jsx)(A.Ay,{icon:(0,D.jsx)(ae.A,{src:null===e||void 0===e?void 0:e.src,alt:null===e||void 0===e?void 0:e.name,preview:!1,style:{height:36,width:36}}),onClick:()=>{C(e)},style:{height:72,width:72}}),(0,D.jsx)(f.A.Text,{style:{textAlign:"center"},children:null===e||void 0===e?void 0:e.title})]})},null===e||void 0===e?void 0:e.name)))})]}):null,(0,D.jsx)(z.A,{ref:d,layout:"vertical",children:(0,D.jsxs)(ne.A,{gutter:16,children:[!globalThis.isElectron&&o._config.openPortToPublic?(0,D.jsx)(le.A,{span:12,children:(0,D.jsx)(z.A.Item,{name:"clientIps",label:(0,D.jsxs)(K.OO,{gap:"xs",children:[(0,D.jsx)(se.A,{value:u,onChange:e=>c(e.target.checked)}),t("session.OpenToPublic"),(0,D.jsx)(j.A,{title:(0,D.jsx)(I.x6,{i18nKey:"session.OpenToPublicDesc"}),children:(0,D.jsx)(ee.A,{style:{cursor:"pointer"}})})]}),children:(0,D.jsx)(B.A,{disabled:!u,placeholder:t("session.AllowedClientIps")})})}):null,o._config.allowPreferredPort?(0,D.jsx)(le.A,{span:12,children:(0,D.jsx)(z.A.Item,{name:"preferredPort",label:(0,D.jsxs)(K.OO,{gap:"xs",children:[(0,D.jsx)(se.A,{value:m,onChange:e=>g(e.target.checked)}),t("session.TryPreferredPort")]}),rules:[{type:"number",min:1025},{type:"number",max:65534}],children:(0,D.jsx)(ie.A,{placeholder:"10250",disabled:!m,style:{width:"100%"}})})}):null,null!==globalThis&&void 0!==globalThis&&null!==(l=globalThis.backendaiwebui)&&void 0!==l&&l.debug?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(le.A,{span:12,children:(0,D.jsx)(z.A.Item,{name:"subDomain",label:(0,D.jsxs)(K.OO,{gap:"xs",children:[(0,D.jsx)(se.A,{value:v,onChange:e=>F(e.target.checked)}),t("session.UseSubdomain")]}),children:(0,D.jsx)(B.A,{disabled:!v})})}),(0,D.jsx)(le.A,{}),(0,D.jsx)(le.A,{span:12,children:(0,D.jsx)(z.A.Item,{name:"forceUseV1Proxy",children:(0,D.jsx)(se.A,{disabled:k,onChange:e=>y(e.target.checked),children:t("session.ForceUseV1Proxy")})})}),(0,D.jsx)(le.A,{span:12,children:(0,D.jsx)(z.A.Item,{name:"forceUseV2Proxy",children:(0,D.jsx)(se.A,{disabled:p,onChange:e=>h(e.target.checked),children:t("session.ForceUseV2Proxy")})})})]}):null]})})]})})},te={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ContainerCommitModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},action:"NONE"}],type:"ComputeSessionNode",abstractKey:null,hash:"8bcd294de1ffd3f00f6ec0ed7177c304"},oe=te;var de=l(82860),ue=l(32677),ce=l(82851);const me=e=>{let{sessionFrgmt:n,onRequestClose:l,...a}=e;const{t:s}=(0,I.Bd)(),{upsertNotification:r}=(0,de.js)(),[t,o]=(0,N.useState)(!1),d=(0,N.useRef)(null),u=(0,i.CX)(),c=(0,w.useFragment)(oe,n);return(0,D.jsx)(Y.A,{title:s("session.CommitSession"),onOk:()=>(()=>{var e;o(!0),null===d||void 0===d||null===(e=d.current)||void 0===e||e.validateFields().then((e=>{var n;r({message:"commitSession: "+(null===c||void 0===c?void 0:c.name),open:!0,backgroundTask:{status:"pending",promise:u.computeSession.convertSessionToImage(null!==(n=null===c||void 0===c?void 0:c.name)&&void 0!==n?n:"",e.imageName),onChange:{pending:s("session.CommitOnGoing"),resolved:e=>{const n=e.task_id;return l(),{backgroundTask:{status:"pending",taskId:n,promise:null,percent:0,onChange:{pending:s("session.CommitOnGoing"),resolved:s("session.CommitFinished"),rejected:s("session.CommitFailed")}}}},rejected:e=>({open:!0,type:"error",message:"commitSession: "+(null===c||void 0===c?void 0:c.name),description:null===e||void 0===e?void 0:e.message,toText:s("button.SeeErrorLogs"),to:"/usersettings?tab=logs"})}}})})).catch((()=>{})).finally((()=>{o(!1)}))})(),okButtonProps:{loading:t},onCancel:l,...a,destroyOnClose:!0,children:(0,D.jsxs)(K.OO,{direction:"column",gap:"xs",align:"stretch",style:{overflow:"hidden"},children:[(0,D.jsx)(f.A.Text,{children:s("session.DescCommitSession")}),(0,D.jsxs)(ue.A,{bordered:!0,size:"small",column:1,children:[(0,D.jsx)(ue.A.Item,{label:s("session.SessionName"),children:null===c||void 0===c?void 0:c.name}),(0,D.jsx)(ue.A.Item,{label:s("session.SessionId"),children:null===c||void 0===c?void 0:c.row_id})]}),(0,D.jsx)(ce.A,{style:{marginTop:12,marginBottom:12}}),(0,D.jsx)(z.A,{ref:d,children:(0,D.jsx)(z.A.Item,{label:s("session.CommitImageName"),name:"imageName",required:!0,rules:[{required:!0},{min:4,max:32},{pattern:/^[a-zA-Z0-9-_.]+$/,message:s("session.validation.EnterValidSessionName")}],children:(0,D.jsx)(B.A,{placeholder:s("inputLimit.4to32chars")})})})]})})};var ge=l(10848);const pe=e=>!["TERMINATED","CANCELLED","TERMINATING"].includes((null===e||void 0===e?void 0:e.status)||""),ye=e=>{var n;return["batch","interactive","inference","system","running"].includes((null===e||void 0===e?void 0:e.type)||"")&&!T().isEmpty(JSON.parse(null!==(n=null===e||void 0===e?void 0:e.service_ports)&&void 0!==n?n:"{}"))},ke=e=>{var n;const{t:l}=(0,I.Bd)(),{token:a}=_.A.useToken(),s={runTerminal:e=>{globalThis.appLauncher.runTerminal(e)},showLauncher:e=>{}},r=(0,i.CX)(),t=(0,w.useFragment)(H,e.sessionFrgmt),[o,d]=(0,N.useState)(!1),[u,c]=(0,N.useState)(!1),[m,g]=(0,N.useState)(!1),[y,k]=(0,N.useState)(!1),h=(null===(n=(0,p.U6)()[0])||void 0===n?void 0:n.uuid)===(null===t||void 0===t?void 0:t.user_id);return t&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(j.A,{title:l("session.SeeAppDialog"),children:(0,D.jsx)(A.Ay,{disabled:!ye(t)||!pe(t)||!h,icon:(0,D.jsx)(K.Ho,{}),onClick:()=>{d(!0)}})}),(0,D.jsx)(N.Suspense,{fallback:null,children:(0,D.jsx)(re,{sessionFrgmt:t,open:o,onRequestClose:()=>{d(!1)}})}),(0,D.jsx)(j.A,{title:l("session.ExecuteTerminalApp"),children:(0,D.jsx)(A.Ay,{disabled:!ye(t)||!pe(t)||!h,icon:(0,D.jsx)(K.xt,{}),onClick:()=>{s.runTerminal(null===t||void 0===t?void 0:t.row_id)}})}),(0,D.jsx)(ge.A,{sessionFrgmts:[t],open:u,onRequestClose:()=>{c(!1)}}),(0,D.jsx)(j.A,{title:l("session.SeeContainerLogs"),children:(0,D.jsx)(A.Ay,{icon:(0,D.jsx)(K.EB,{}),onClick:()=>{g(!0)}})}),(0,D.jsx)(S.A,{sessionFrgmt:t,open:m,onCancel:()=>{g(!1)}}),(0,D.jsx)(j.A,{title:l("session.RequestContainerCommit"),children:(0,D.jsx)(A.Ay,{disabled:!r._config.enableContainerCommit||"system"===t.type||!pe(t)||!h,icon:(0,D.jsx)(K.GR,{}),onClick:()=>{k(!0)}})}),(0,D.jsx)(me,{sessionFrgmt:t,open:y,onRequestClose:()=>k(!1)}),(0,D.jsx)(j.A,{title:l("session.TerminateSession"),children:(0,D.jsx)(A.Ay,{disabled:!pe(t),icon:(0,D.jsx)(K.r_,{style:{color:pe(t)?a.colorError:void 0}}),onClick:()=>{c(!0)}})})]})},he=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"sessionID"}],n=[{alias:"session",args:[{kind:"Variable",name:"id",variableName:"sessionID"}],concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"SessionIdleChecksQuery",selections:n,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"SessionIdleChecksQuery",selections:n},params:{cacheID:"6cdc796358ac64699fe0cf2492423e18",id:null,metadata:{},name:"SessionIdleChecksQuery",operationKind:"query",text:'query SessionIdleChecksQuery(\n  $sessionID: UUID!\n) {\n  session: compute_session(id: $sessionID) {\n    id\n    idle_checks @since(version: "24.09.0")\n  }\n}\n'}}}();he.hash="d46ba0743f1bd14d265cddaa3fbeb6c1";const ve=he,Fe={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionIdleChecksNodeFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"09a1dd685c8942ebb5c69e6dddaf6da0"},xe=Fe;var Se=l(3420);function _e(e){let n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!l){const[n,l]=e;return n<2*l?"red":n<10*l?"orange":"green"}return"and"===l&&T().every(e,(e=>{let[l,a]=e;return l<Math.min(2*a,a+5)?(n="red",!0):l<Math.min(10*a,a+10)?(n="orange",!0):(n="green",!0)})),"or"===l&&T().some(e,(e=>{let[l,a]=e;return l<Math.min(2*a,a+5)?(n="red",!0):l<Math.min(10*a,a+10)?(n="orange",!0):(n="green",!0)})),n}function fe(e,n){return"remaining"===n?!e.remaining||e.remaining<3600?"red":e.remaining<14400?"orange":"green":e.extra&&(!e.remaining||e.remaining<14400)?_e(e.extra.resources,e.extra.thresholds_check_operator):void 0}const je=e=>{let{sessionNodeFrgmt:n=null,direction:l="row",fetchKeyForLegacyLoadQuery:a}=e;const{t:s}=(0,I.Bd)(),{token:i}=_.A.useToken(),{mergedResourceSlots:r}=(0,p.Hv)(),t=(0,w.useFragment)(xe,n),{session:o}=(0,w.useLazyLoadQuery)(ve,{sessionID:(null===t||void 0===t?void 0:t.id)||""},{fetchKey:a,fetchPolicy:null!==t&&void 0!==t&&t.idle_checks?"store-only":"network-only"}),d=(0,K.Nw)((null===t||void 0===t?void 0:t.idle_checks)||(null===o||void 0===o?void 0:o.idle_checks),{fallbackValue:{}}),u=e=>s("network_timeout"===e?"session.NetworkIdleTimeout":"session_lifetime"===e?"session.MaxSessionLifetime":"session.UtilizationIdleTimeout");return(0,D.jsx)(K.OO,{direction:l,align:"stretch",gap:"sm",children:T().map(d,((e,n)=>{var l,a;return e.remaining?(0,D.jsxs)(K.OO,{style:{flex:1},direction:"column",align:"stretch",children:[(0,D.jsxs)(K.OO,{gap:"xxs",children:[(0,D.jsx)(f.A.Text,{children:u(n)}),"utilization"===n&&(0,D.jsx)(j.A,{title:(0,D.jsxs)(D.Fragment,{children:[`${s("session.Utilization")} / ${s("session.Threshold")} (%)`,(0,D.jsx)("br",{}),T().map(null===(l=e.extra)||void 0===l?void 0:l.resources,((e,n)=>{var l;const a=["cpu_util","mem"].includes(n)?T().split(n,"_")[0]:T().split(n,"_")[0]+".device",[s,t]=e;return(0,D.jsxs)(K.OO,{gap:"xs",children:[(0,D.jsx)(f.A.Text,{style:{color:i.colorWhite},children:`${null===r||void 0===r||null===(l=r[a])||void 0===l?void 0:l.human_readable_name}:`}),(0,D.jsx)(f.A.Text,{style:{color:_e(e)},children:`${s>=0?(0,g.Z1)(s,1):"-"} / ${t}`}),(0,D.jsx)("br",{})]},n)}))]}),children:(0,D.jsx)(Se.A,{style:{color:i.colorTextSecondary,cursor:"pointer"}})})]}),e.remaining>=0?(0,D.jsx)(F.A,{values:[{label:(a=e.remaining_time_type,s("expire_after"===a?"session.ExpiresAfter":"session.GracePeriod")),color:fe(e,"utilization"===n?"utilization":"remaining")},{label:(0,g.bB)((new Date).toISOString(),new Date((new Date).getTime()+1e3*(e.remaining||0)).toISOString()),color:fe(e,"utilization"===n?"utilization":"remaining")}]}):(0,D.jsx)(f.A.Text,{type:"danger",children:s("session.TimeoutExceeded")})]},n):null}))})};var Ae=l(36756),be=l(16888),Ke=l(50670);const Ce=e=>{let{...n}=e;const{t:l}=(0,I.Bd)(),{token:a}=_.A.useToken();return(0,D.jsxs)(Y.A,{title:l("session.IdleChecks"),footer:null,width:700,...n,children:[(0,D.jsx)(f.A.Text,{children:l("session.IdleChecksDesc")}),(0,D.jsx)(f.A.Title,{level:5,children:l("session.MaxSessionLifetime")}),(0,D.jsx)("p",{children:l("session.MaxSessionLifetimeDesc")}),(0,D.jsx)(f.A.Title,{level:5,children:l("session.NetworkIdleTimeout")}),(0,D.jsx)("p",{children:l("session.NetworkIdleTimeoutDesc")}),(0,D.jsx)(f.A.Title,{level:5,children:l("session.UtilizationIdleTimeout")}),(0,D.jsx)("p",{children:l("session.UtilizationIdleTimeoutDesc")}),(0,D.jsxs)(K.OO,{direction:"column",align:"stretch",style:{marginLeft:a.marginMD},children:[(0,D.jsx)(f.A.Title,{level:5,style:{margin:0},children:l("session.GracePeriod")}),(0,D.jsx)("p",{children:l("session.GracePeriodDesc")}),(0,D.jsx)(f.A.Title,{level:5,style:{margin:0},children:l("session.UtilizationThreshold")}),(0,D.jsx)("p",{children:l("session.UtilizationThresholdDesc")})]})]})};var Te=l(22525),Le=l(67208);const Ne=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"uuid"}],n=[{kind:"Variable",name:"id",variableName:"uuid"}],l={alias:null,args:null,kind:"ScalarField",name:"mounts",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MountedVFolderLinksQuery",selections:[{alias:"legacy_session",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MountedVFolderLinksQuery",selections:[{alias:"legacy_session",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"9025af1e54e75a0d3041d0e12150939c",id:null,metadata:{},name:"MountedVFolderLinksQuery",operationKind:"query",text:"query MountedVFolderLinksQuery(\n  $uuid: UUID!\n) {\n  legacy_session: compute_session(id: $uuid) {\n    mounts\n    id\n  }\n}\n"}}}();Ne.hash="f1e2ef43ac11c6b980313ddac8cd1ec9";const Ie=Ne,we={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MountedVFolderLinksLegacyLazyFolderLinkFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"vfolder_mounts",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"72fda7ec47bcaa5e7fc83cbaabc822c6"},De=we,Oe={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MountedVFolderLinksFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,concreteType:"VirtualFolderConnection",kind:"LinkedField",name:"vfolder_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"VirtualFolderEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"VirtualFolderNode",kind:"LinkedField",name:"node",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"FolderLink_vfolderNode"}],storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"MountedVFolderLinksLegacyLazyFolderLinkFragment"}],type:"ComputeSessionNode",abstractKey:null,hash:"f26bc04640693f4094c9a072011821b0"},Ee=Oe,Re={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FolderLink_vfolderNode",selections:[{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],type:"VirtualFolderNode",abstractKey:null,hash:"a8ea258e8c3e20439b53af93ec37be13"},Me=Re;var Pe=l(96003),Ve=l(28299),Ue=l(91257);const $e=e=>{var n,l;let{vfolderNodeFragment:a,folderId:s,folderName:i,showIcon:r,...t}=e;const{generateFolderPath:o}=(0,Ve.useFolderExplorerOpener)(),d=(0,w.useFragment)(Me,a);return(0,D.jsxs)(Pe.A,{to:o(null!==(n=null!==s&&void 0!==s?s:null===d||void 0===d?void 0:d.row_id)&&void 0!==n?n:""),style:{wordBreak:"break-all"},...t,children:[r&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Ue.A,{})," \xa0"]}),null!==(l=null!==i&&void 0!==i?i:null===d||void 0===d?void 0:d.name)&&void 0!==l?l:""]})};var qe=l(9034);const ze=e=>{var n;let{sessionFrgmt:l}=e;const a=(0,i.CX)(),s=(0,w.useFragment)(Ee,l);return a.supports("vfolder_nodes_in_session_node")?T().map(null===(n=s.vfolder_nodes)||void 0===n?void 0:n.edges,((e,n)=>(null===e||void 0===e?void 0:e.node)&&(0,D.jsx)($e,{showIcon:!0,vfolderNodeFragment:e.node},`mounted-vfolder-${n}`))):s.row_id?(0,D.jsx)(N.Suspense,{fallback:(0,D.jsx)(qe.A.Input,{size:"small",active:!0,block:!0}),children:(0,D.jsx)(Be,{sessionFrgmt:s})}):null},Be=e=>{var n;let{sessionFrgmt:l}=e;const a=(0,i.CX)(),s=(0,w.useFragment)(De,l),{legacy_session:r}=(0,w.useLazyLoadQuery)(Ie,{uuid:s.row_id||""},{fetchPolicy:s.row_id?"store-and-network":"store-only"});return a.supports("vfolder-mounts")?T().map(T().zip(null===r||void 0===r?void 0:r.mounts,null===s||void 0===s?void 0:s.vfolder_mounts),(e=>{const[n,l]=e;return(0,D.jsx)($e,{folderId:null!==l&&void 0!==l?l:"",folderName:null!==n&&void 0!==n?n:"",showIcon:!0},l)})):null===r||void 0===r||null===(n=r.mounts)||void 0===n?void 0:n.join(", ")};var Qe=l(70694),Ge=l(78824),Xe=l(84321),We=l(89798),He=l(27975);const Je=e=>{var n,l,a,s,r,t,d;let{id:c,fetchKey:h,sessionFrgmt:v,deprecatedProjectId:F}=e;const{t:x}=(0,I.Bd)(),{token:S}=_.A.useToken(),{md:C}=Ge.Ay.useBreakpoint(),L=(0,y.hd)(),[O]=(0,p.U6)(),R=(0,p.Am)(),M=(0,i.CX)(),[P,V]=(0,N.useState)(!1),[U,$]=(0,N.useState)(!1),[q,z]=(0,N.useState)("current"),{legacy_session:B}=(0,w.useLazyLoadQuery)(m,{uuid:c},{fetchPolicy:F?"store-only":"store-or-network"}),{internalLoadedSession:Q}=(0,w.useLazyLoadQuery)(u,{id:(0,K.wc)("ComputeSessionNode",c),project_id:(null===B||void 0===B?void 0:B.group_id)||F||L.id},{fetchPolicy:h===i.eI?v?"store-only":"store-and-network":"network-only",fetchKey:h}),G=(0,w.useFragment)(o,Q||v);let W=T().min(T().values((0,K.Nw)(null===G||void 0===G?void 0:G.idle_checks,{fallbackValue:{}})).map((e=>e.remaining)).filter(Boolean));const H=(null===G||void 0===G?void 0:G.project_id)||(null===B||void 0===B?void 0:B.group_id);return G?(0,D.jsxs)(K.OO,{direction:"column",gap:"lg",align:"stretch",children:[H!==L.id&&(0,D.jsx)(Xe.A,{message:x("session.NotInProject"),type:"warning",showIcon:!0}),O.uuid!==(null===G||void 0===G?void 0:G.user_id)&&(0,D.jsx)(Xe.A,{message:x("session.AnotherUserSession"),type:"warning",showIcon:!0}),W&&W<3600&&(0,D.jsx)(Xe.A,{message:x("session.IdleCheckExpirationWarning"),type:"warning",showIcon:!0}),(0,D.jsxs)(K.OO,{direction:"column",gap:"sm",align:"stretch",children:[(0,D.jsxs)(K.OO,{direction:"row",justify:"between",align:"start",style:{alignSelf:"stretch"},gap:"sm",children:[(0,D.jsx)(X,{sessionFrgmt:G,component:He.A,level:3,style:{margin:0,color:["TERMINATED","CANCELLED"].includes(G.status||"")?S.colorTextTertiary:void 0},editable:!["TERMINATED","CANCELLED"].includes(G.status||"")}),(0,D.jsx)(A.Ay.Group,{size:"large",children:(0,D.jsx)(ke,{sessionFrgmt:G})})]}),(0,D.jsxs)(ue.A,{bordered:!0,column:C?2:1,children:[(0,D.jsx)(ue.A.Item,{label:x("session.SessionId"),span:C?2:1,children:(0,D.jsx)(f.A.Text,{ellipsis:!0,copyable:!0,style:{fontFamily:"monospace"},children:G.row_id})}),("admin"===R||"superadmin"===R)&&(0,D.jsx)(ue.A.Item,{label:x("credential.UserID"),span:C?2:1,children:G.user_id?(0,D.jsx)(N.Suspense,{fallback:(0,D.jsx)(qe.A.Input,{size:"small",active:!0}),children:(0,D.jsx)(K.$K,{uuid:G.user_id})}):"-"}),(0,D.jsx)(ue.A.Item,{label:x("session.Status"),children:(0,D.jsxs)(K.OO,{children:[(0,D.jsx)(Ke.A,{sessionFrgmt:G,showInfo:!0}),null!==G&&void 0!==G&&G.status_data&&"{}"!==(null===G||void 0===G?void 0:G.status_data)?(0,D.jsx)(j.A,{title:x("button.ClickForMoreDetails"),children:(0,D.jsx)(A.Ay,{type:"link",icon:(0,D.jsx)(Se.A,{}),onClick:()=>{$(!0)}})}):null]})}),(0,D.jsx)(ue.A.Item,{label:x("session.SessionType"),children:(0,D.jsx)(K.xL,{sessionFrgmt:G})}),(0,D.jsx)(ue.A.Item,{label:x("session.launcher.Environments"),children:null!==(n=G.kernel_nodes)&&void 0!==n&&null!==(l=n.edges[0])&&void 0!==l&&null!==(a=l.node)&&void 0!==a&&a.image?(0,D.jsx)(Te.A,{imageFrgmt:(null===(s=G.kernel_nodes)||void 0===s||null===(r=s.edges[0])||void 0===r||null===(t=r.node)||void 0===t?void 0:t.image)||null}):G.row_id?(0,D.jsx)(N.Suspense,{fallback:(0,D.jsx)(qe.A.Input,{size:"small",active:!0}),children:(0,D.jsx)(Le.e,{sessionId:G.row_id})}):null}),(0,D.jsx)(ue.A.Item,{label:x("session.launcher.MountedFolders"),children:(0,D.jsx)(K.OO,{gap:"xs",wrap:"wrap",children:(0,D.jsx)(ze,{sessionFrgmt:G})})}),(0,D.jsx)(ue.A.Item,{label:x("session.launcher.ResourceAllocation"),children:(0,D.jsxs)(K.OO,{gap:"sm",wrap:"wrap",children:[(0,D.jsx)(j.A,{title:x("session.ResourceGroup"),children:(0,D.jsx)(b.A,{children:G.scaling_group})}),(0,D.jsx)(k.ResourceNumbersOfSession,{resource:JSON.parse(G.requested_slots||"{}")})]})}),(0,D.jsx)(ue.A.Item,{label:x("session.Agent"),children:T().uniq(G.agent_ids).join(", ")||"-"}),(0,D.jsx)(ue.A.Item,{label:x("session.Reservation"),span:C?2:1,children:(0,D.jsx)(K.OO,{gap:"xs",wrap:"wrap",children:(0,D.jsx)(Ae.A,{sessionFrgmt:G})})}),M.supports("idle-checks-gql")&&"RUNNING"===G.status&&W?(0,D.jsx)(ue.A.Item,{label:(0,D.jsxs)(K.OO,{gap:"xxs",children:[x("session.IdleChecks"),(0,D.jsx)(j.A,{title:x("button.ClickForMoreDetails"),children:(0,D.jsx)(ee.A,{style:{cursor:"pointer"},onClick:()=>V(!0)})})]}),span:C?2:1,children:(0,D.jsx)(N.Suspense,{fallback:(0,D.jsx)(qe.A.Input,{active:!0,size:"small"}),children:(0,D.jsx)(je,{sessionNodeFrgmt:G,direction:C?"row":"column",fetchKeyForLegacyLoadQuery:h})})}):null,(0,D.jsx)(ue.A.Item,{label:(0,D.jsxs)(K.OO,{direction:"column",align:"start",gap:S.marginSM,children:[(0,D.jsx)(f.A.Text,{style:{color:S.colorTextSecondary},children:x("session.ResourceUsage")}),(0,D.jsx)(We.A,{size:"small",popupMatchSelectWidth:!1,style:{width:"100%",display:"none"},variant:"filled",defaultValue:"current",options:[{label:x("session.CurrentUsage"),value:"current"},{label:x("session.MaxUsage"),value:"max"},{label:x("session.AverageUsage"),value:"avg"}],onChange:e=>{z(e)}})]}),span:C?2:1,children:(0,D.jsx)(Qe.A,{sessionFrgmt:G,displayTarget:q})})]})]}),(0,D.jsx)(N.Suspense,{fallback:(0,D.jsx)(qe.A,{active:!0}),children:(0,D.jsxs)(K.OO,{direction:"column",gap:"sm",align:"stretch",children:[(0,D.jsx)(f.A.Title,{level:4,style:{margin:0},children:x("kernel.Kernels")}),(0,D.jsx)(E,{kernelsFrgmt:(0,g.f)(null===(d=G.kernel_nodes)||void 0===d?void 0:d.edges.map((e=>null===e||void 0===e?void 0:e.node))),sessionFrgmtForLogModal:G})]})}),(0,D.jsx)(Ce,{open:P,onCancel:()=>V(!1)}),(0,D.jsx)(be.A,{sessionFrgmt:G,open:U,onCancel:()=>$(!1)})]}):(0,D.jsx)(Xe.A,{showIcon:!0,message:x("session.SessionNotFound"),type:"error",description:c})};var Ze=l(5137),Ye=l(4994),en=l.n(Ye),nn=l(19022);const ln=e=>{let{sessionId:n,...l}=e;const{t:a}=(0,I.Bd)();(0,i.CX)();const[t,o]=(0,N.useTransition)(),[d,u]=(0,i.zu)(),c=(0,nn.zy)(),{sessionDetailDrawerFrgmt:m,createdAt:g}=c.state||{},p=(0,w.useFragment)(s,m),y=(0,N.useMemo)((()=>g&&en()().diff(en()(g),"second")<60?p:null),[]);return(0,D.jsx)(Ze.A,{title:a("session.SessionInfo"),width:800,extra:(0,D.jsx)(j.A,{title:a("button.Refresh"),children:(0,D.jsx)(r.A,{loading:t,autoUpdateDelay:7e3,value:d,onChange:e=>{o((()=>{u(e)}))}})}),...l,children:(0,D.jsx)(N.Suspense,{fallback:(0,D.jsx)(qe.A,{active:!0}),children:n&&(0,D.jsx)(Je,{id:n,fetchKey:d,sessionFrgmt:y,deprecatedProjectId:null===p||void 0===p?void 0:p.project_id})})})}},49613:(e,n,l)=>{l.d(n,{A:()=>s});var a=l(66610);const s=e=>{let{children:n}=e;const l=a.Children.only(n),s=l.props.open,[i,r]=(0,a.useState)(s);if((0,a.useLayoutEffect)((()=>{s&&r(!0)}),[s]),!i)return null;const t=l.props.afterClose,o=l.props.afterOpenChange;return a.cloneElement(l,{afterClose:function(){t&&t(...arguments),r(!1)},afterOpenChange:e=>{o&&o(e),e||r(!1)}})}},310:(e,n,l)=>{l.d(n,{RM:()=>t,WN:()=>r});var a=l(8348),s=l.n(a);function i(e){return null===e||void 0===e?"":"number"===typeof e||"boolean"===typeof e?String(e):`"${(e=s().isString(e)?e:JSON.stringify(e)).replace(/"/g,'""')}"`}const r=(e,n)=>{const l=URL.createObjectURL(e),a=document.createElement("a");a.href=l,a.download=n,a.click(),URL.revokeObjectURL(l)},t=(e,n,l)=>{const a=((e,n)=>{const l=s().map(e,(e=>s().omit(e,"__fragments","__fragmentOwner","__id"))),a=s().keys(l[0]),r=s().map(l,(e=>s().map(e,((e,l)=>{var a;return null!==n&&void 0!==n&&n[l]&&(null===(a=n[l])||void 0===a?void 0:a.call(n,e))||e})))).map((e=>e.map(i).join(","))).join("\n");return[a.map(i).join(","),r].join("\n")})(e,l),t=new Blob([a],{type:"text/csv"});r(t,`${n}.csv`)}}}]);
//# sourceMappingURL=2251.6cb422dd.chunk.js.map