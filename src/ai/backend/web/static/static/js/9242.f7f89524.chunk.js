(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[9242],{90003:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>l});const i=function(){var e={defaultValue:null,kind:"LocalArgument",name:"endpoint_id"},n={defaultValue:null,kind:"LocalArgument",name:"filter"},t={defaultValue:null,kind:"LocalArgument",name:"limit"},i={defaultValue:null,kind:"LocalArgument",name:"offset"},l={defaultValue:null,kind:"LocalArgument",name:"projectID"},o={defaultValue:null,kind:"LocalArgument",name:"skipEndpoint"},a=[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"},{kind:"Variable",name:"project",variableName:"projectID"}],r={alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"endpoint_id",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},c={args:null,kind:"FragmentSpread",name:"EndpointLLMChatCard_endpoint"},p=[{kind:"Variable",name:"endpoint_id",variableName:"endpoint_id"}],m=[d,s,u,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}];return{fragment:{argumentDefinitions:[e,n,t,i,l,o],kind:"Fragment",metadata:null,name:"EndpointSelectQuery",selections:[{alias:null,args:a,concreteType:"EndpointList",kind:"LinkedField",name:"endpoint_list",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Endpoint",kind:"LinkedField",name:"items",plural:!0,selections:[d,s,u,c],storageKey:null}],storageKey:null},{alias:null,args:p,concreteType:"Endpoint",kind:"LinkedField",name:"endpoint",plural:!1,selections:[d,s,c],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[i,t,l,n,e,o],kind:"Operation",name:"EndpointSelectQuery",selections:[{alias:null,args:a,concreteType:"EndpointList",kind:"LinkedField",name:"endpoint_list",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Endpoint",kind:"LinkedField",name:"items",plural:!0,selections:m,storageKey:null}],storageKey:null},{alias:null,args:p,concreteType:"Endpoint",kind:"LinkedField",name:"endpoint",plural:!1,selections:m,storageKey:null}]},params:{cacheID:"4ed77e0d8d228a82aa36a46316bc28ca",id:null,metadata:{},name:"EndpointSelectQuery",operationKind:"query",text:"query EndpointSelectQuery(\n  $offset: Int!\n  $limit: Int!\n  $projectID: UUID\n  $filter: String\n  $endpoint_id: UUID!\n  $skipEndpoint: Boolean!\n) {\n  endpoint_list(offset: $offset, limit: $limit, project: $projectID, filter: $filter) {\n    total_count\n    items {\n      name\n      endpoint_id\n      url\n      ...EndpointLLMChatCard_endpoint\n      id\n    }\n  }\n  endpoint(endpoint_id: $endpoint_id) @skipOnClient(if: $skipEndpoint) {\n    name\n    endpoint_id\n    ...EndpointLLMChatCard_endpoint\n    id\n  }\n}\n\nfragment EndpointLLMChatCard_endpoint on Endpoint {\n  endpoint_id\n  url\n}\n"}}}();i.hash="bc98e0b499fc7a18b88e87841f5e6e47";const l=i},46735:(e,n,t)=>{"use strict";t.d(n,{A:()=>pe});var i=t(72375),l=t(23441),o=t(55093);const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const[n,i]=(0,o.useState)(0);return(0,o.useEffect)((()=>{(0,o.startTransition)((()=>{(async e=>{const{encode:n}=await t.e(2471).then(t.bind(t,32471));return n(e).length})(e).then(i).catch((()=>{i(e.length)}))}))}),[e]),n};var r=t(72338),d=t(42741),s=t(79569);const u=e=>{let{style:n,loading:t,autoFocus:i,onStop:l,onSend:a,...r}=e;const u=(0,o.useRef)(null);return(0,o.useEffect)((()=>{i&&u.current&&u.current.focus()}),[i]),(0,s.jsx)(d.A,{ref:u,...r,loading:t,onSubmit:()=>{null===a||void 0===a||a()},onCancel:()=>{null===l||void 0===l||l()},submitType:"enter"})};var c=t(47543),p=t(46976),m=t.n(p),g=t(33364);const f=e=>{let{models:n,allowCustomModel:t,...i}=e;const{t:l}=(0,g.Bd)();return(0,s.jsx)(c.A,{placeholder:l("chatui.SelectModel"),style:{fontWeight:"normal"},showSearch:!0,options:m().concat(t?[{label:"Custom",value:"custom"}]:[],m().chain(n).groupBy("group").mapValues((e=>m().map(e,(e=>({label:e.label,value:e.name}))))).map(((e,n)=>({label:"undefined"===n?"Others":n,options:e}))).value()),popupMatchSelectWidth:!1,...i})};var v=t(2556),h=t(99142),y=t(18939),x=t(72450),j=t(60569);const b=e=>{let{copyable:n,defaultIcon:t,...i}=e;const[l,a]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{if(l){const e=setTimeout((()=>{a(!1)}),2e3);return()=>clearTimeout(e)}}),[l]),(0,s.jsx)(v.A,{title:l?"Copied!":"Copy",open:!!l||void 0,children:(0,s.jsx)(j.CopyToClipboard,{text:(null===n||void 0===n?void 0:n.text)||"",onCopy:async()=>{a(!0)},children:(0,s.jsx)(h.Ay,{icon:l?(0,s.jsx)(y.A,{}):t||(0,s.jsx)(x.A,{}),...i})})})};var k=t(12221),A=t(80963),S=t(23593),C=t(86533),L=t(55529);const{Text:w}=k.A,E=e=>{let{children:n}=e;return(0,s.jsx)(S.o,{components:{p(e){let{node:n,...t}=e;return(0,s.jsx)("p",{...t,style:{whiteSpace:"pre-wrap"}})},code(e){const{children:n,className:t,node:i,ref:l,...o}=e,a=/language-(\w+)/.exec(t||""),r=String(n).replace(/\n$/,"");return a?(0,s.jsx)(A.A,{title:(0,s.jsx)(w,{style:{fontWeight:"normal"},type:"secondary",children:a[1]}),type:"inner",size:"small",extra:(0,s.jsx)(b,{type:"text",copyable:{text:"s"}}),styles:{body:{padding:0},header:{margin:0}},children:(0,s.jsx)("div",{style:{margin:"-0.5em 0",width:"100%"},children:(0,s.jsx)(M,{ref:l,...o,PreTag:"div",language:a[1],style:L.A,wrapLongLines:!0,wrapLines:!0,children:r})})}):(0,s.jsx)("code",{...o,className:t,children:n})}},children:n})},T=e=>{let{children:n,...t}=e;return(0,s.jsx)(C.A,{...t,children:n})},M=o.memo(T),_=o.memo(E);var I=t(77538),F=t(300),D=t(66596),K=t(66355),R=t(85632),$=t(78502),O=t.n($),U=t(48787),B=t.n(U),V=t(2660),P=t.n(V);O().extend(B()),O().extend(P());const z=e=>{let{extra:n,message:t,placement:i="left",containerStyle:l,enableExtraHover:a,isStreaming:d}=e;const{token:u}=D.A.useToken(),[c,p]=(0,o.useState)(!1),g=(0,F.A)(t.content,{wait:50});return(0,s.jsxs)(r.A,{direction:"left"===i?"row":"row-reverse",justify:"start",align:"baseline",style:{marginLeft:"left"===i?"0":"15%",marginRight:"right"===i?"0":20,...l},gap:"sm",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:["user"!==t.role?(0,s.jsx)(K.A,{icon:"\ud83e\udd16",style:{fontSize:u.fontSizeHeading3}}):null,(0,s.jsxs)(r.A,{direction:"column",align:"left"===i?"start":"end",wrap:"wrap",style:{flex:1},gap:"xs",children:[m().map(t.experimental_attachments,((e,n)=>m().includes(null===e||void 0===e?void 0:e.contentType,"image/")?(0,s.jsx)(r.A,{style:{border:"none",textAlign:"end"},align:"end",children:(0,s.jsx)(R.A,{src:null===e||void 0===e?void 0:e.url,alt:null===e||void 0===e?void 0:e.name,style:{maxWidth:"50vw",maxHeight:"12vh",borderRadius:u.borderRadius}},`${null===t||void 0===t?void 0:t.id}-${n}`)}):(0,s.jsx)(I.A.FileCard,{item:{uid:`${null===t||void 0===t?void 0:t.id}-${n}`,name:(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.url),type:null===e||void 0===e?void 0:e.contentType,description:null===e||void 0===e?void 0:e.name,url:null===e||void 0===e?void 0:e.url}},n))),(0,s.jsx)(r.A,{align:"stretch",direction:"column",style:{borderRadius:u.borderRadius,borderColor:u.colorBorderSecondary,borderWidth:u.lineWidth,padding:"1em",paddingTop:0,paddingBottom:0,backgroundColor:"user"!==t.role?u.colorBgContainer:u.colorBgContainerDisabled,maxWidth:"100%"},children:(0,s.jsx)(_,{children:g+(d?"\n\u25cf":"")})}),(0,s.jsx)(r.A,{style:{fontSize:u.fontSizeSM,...a?{opacity:c?1:0,transition:"opacity 0.2s",transitionDelay:c?"0s":"0.2s"}:{}},children:n})]})]})};var N=t(68098),H=t(68347);const Q=e=>{let{autoScroll:n,atBottom:t,lastMessageContent:i,...l}=e;const a=(0,N.E)(l.onScrollToBottom);return(0,o.useEffect)((()=>{t&&n&&(null===a||void 0===a||a("auto"))}),[t,n,i,a]),(0,s.jsx)(h.Ay,{icon:(0,s.jsx)(H.A,{}),shape:"circle",onClick:()=>{a&&a("click")}})};var q=t(62153),W=t(95673);const X=e=>{let{messages:n,isStreaming:t}=e;const i=(0,o.useRef)(null),[l,a]=(0,o.useState)(!0),{token:d}=D.A.useToken(),u="undefined"!==typeof window?1.5*window.innerHeight:0;return(0,s.jsxs)(r.A,{direction:"column",align:"stretch",style:{height:"100%",flex:1},children:[(0,s.jsx)(W.aY,{atBottomStateChange:a,atBottomThreshold:60,computeItemKey:(e,n)=>n.id,data:n,followOutput:"auto",initialTopMostItemIndex:(null===n||void 0===n?void 0:n.length)-1,itemContent:(e,i)=>(0,s.jsx)(z,{message:i,placement:"user"===i.role?"right":"left",containerStyle:{paddingLeft:d.paddingMD,paddingRight:d.paddingMD,paddingTop:0===e?d.paddingMD:0,paddingBottom:e===n.length-1?d.paddingMD:0},isStreaming:"user"!==i.role&&t&&e===n.length-1,enableExtraHover:"user"===i.role,extra:"user"!==i.role?(0,s.jsx)(q.Ay,{children:(0,s.jsx)(b,{type:"text",size:"small",copyable:{text:i.content}})}):(0,s.jsx)(q.Ay,{children:null})},i.id),overscan:u,ref:i}),(0,s.jsx)("div",{style:{position:"absolute",right:"50%",transform:"translateX(+50%)",bottom:d.marginSM,opacity:l?0:1,transition:"opacity 0.2s",transitionDelay:l?"0s":"0.2s"},children:(0,s.jsx)(Q,{atBottom:l,autoScroll:t,onScrollToBottom:e=>{const n=i.current;switch(e){case"auto":null===n||void 0===n||n.scrollToIndex({align:"end",behavior:"auto",index:"LAST"});break;case"click":null===n||void 0===n||n.scrollToIndex({align:"end",behavior:"smooth",index:"LAST"})}},lastMessageContent:m().get(m().last(n),"content")})})]})};var Y=t(74145),G=t(13659),J=t(57893),Z=t(55887),ee=t(27872),ne=t(64690),te=t(75970),ie=t(62976),le=t(4463),oe=t(35364),ae=t(29759),re=t(79597),de=t(1364),se=t(38398),ue=t(25913),ce=t(16649);const pe=e=>{var n;let{models:t=[],endpointId:c,baseURL:p,headers:v,credentials:y,apiKey:x,fetchOnClient:j,allowCustomModel:b,alert:S,leftExtra:C,inputMessage:L,submitKey:w,onInputChange:E,onSubmitChange:T,showCompareMenuItem:M,modelToken:_,...F}=e;const K=(0,l.f0)(),[R,$]=(0,o.useState)(!1),[O,U]=(0,ie.A)(F,{valuePropName:"modelId",trigger:"onModelChange",defaultValue:null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id}),B=(0,o.useRef)(null),V=(0,o.useRef)(null),{messages:P,error:z,input:N,setInput:H,stop:Q,isLoading:q,append:W,setMessages:pe}=(0,G.Y_)({api:p,headers:v,credentials:y,body:{modelId:O},fetch:async(e,n)=>{if(j||"custom"===O){var t,i,l;const e=JSON.parse(null===n||void 0===n?void 0:n.body),o=(0,Y.r)({baseURL:b?null===(t=B.current)||void 0===t?void 0:t.getFieldValue("baseURL"):p,apiKey:(b?null===(i=B.current)||void 0===i?void 0:i.getFieldValue("token"):x)||"dummy"}),a=await(0,le.gM)({abortSignal:(null===n||void 0===n?void 0:n.signal)||void 0,model:o(b?null===(l=B.current)||void 0===l?void 0:l.getFieldValue("modelId"):O),messages:null===e||void 0===e?void 0:e.messages});return ve(Date.now()),a.toDataStreamResponse()}return fetch(e,n)}}),{token:me}=D.A.useToken(),{t:ge}=(0,g.Bd)(),[fe,ve]=(0,o.useState)(null);(0,o.useEffect)((()=>{m().isUndefined(L)||H(L)}),[L,H]),(0,o.useEffect)((()=>{!m().isUndefined(w)&&N&&W({role:"user",content:N})}),[w]);const he=a(N),ye=(0,o.useMemo)((()=>m().map(P,(e=>null===e||void 0===e?void 0:e.content)).join("")),[P]),xe=he+a(ye),je=(0,o.useMemo)((()=>{const e=m().last(P);return"assistant"===(null===e||void 0===e?void 0:e.role)?null===e||void 0===e?void 0:e.content:""}),[P]),be=a(je),ke=(0,o.useMemo)((()=>be>0&&fe?be/((Date.now()-fe)/1e3):0),[be,fe]),[Ae,Se]=(0,o.useState)([]),Ce=(0,i.LY)([M&&{key:"compare",label:ge("chatui.CompareWithOtherModels"),icon:(0,s.jsx)(ce.A,{}),onClick:()=>{K(`/serving?tab=chatting&endpointId=${c}&modelId=${O}`)}},M&&{type:"divider"},{key:"clear",danger:!0,label:ge("chatui.DeleteChatHistory"),icon:(0,s.jsx)(J.A,{}),onClick:()=>{pe([])}}]);return(0,s.jsxs)(A.A,{ref:V,bordered:!0,extra:[],...F,title:(0,s.jsx)(r.A,{direction:"column",align:"stretch",gap:"sm",children:(0,s.jsxs)(r.A,{direction:"row",gap:"xs",children:[C,(0,s.jsx)(f,{models:t,value:O,onChange:U,allowCustomModel:b}),(0,s.jsx)(oe.A,{menu:{items:Ce},trigger:["click"],children:(0,s.jsx)(h.Ay,{type:"link",onClick:e=>e.preventDefault(),icon:(0,s.jsx)(Z.A,{}),style:{color:me.colorTextSecondary,width:me.sizeMS}})})]})}),style:{height:"100%",width:"100%",display:"flex",flexDirection:"column"},styles:{body:{backgroundColor:me.colorFillQuaternary,borderRadius:0,flex:1,display:"flex",flexDirection:"column",padding:0,height:"50%",position:"relative"},actions:{paddingLeft:me.paddingContentHorizontal,paddingRight:me.paddingContentHorizontal},header:{zIndex:1}},actions:[(0,s.jsx)(u,{autoFocus:!0,value:N,placeholder:"Say something...",header:(0,s.jsx)(d.A.Header,{closable:!1,title:ge("chatui.Attachments"),open:!!R&&!m().isEmpty(Ae),onOpenChange:$,styles:{content:{padding:0}},children:(0,s.jsx)(I.A,{beforeUpload:()=>!1,getDropContainer:()=>V.current,accept:"image/*,text/*",items:Ae,onChange:e=>{let{fileList:n}=e;return Se(n)},placeholder:e=>"drop"===e?{title:ge("chatui.DropFileHere")}:{icon:(0,s.jsx)(ee.A,{}),title:ge("chatui.UploadFiles"),description:ge("chatui.UploadFilesDescription")}})}),prefix:(0,s.jsx)(I.A,{beforeUpload:()=>!1,getDropContainer:()=>V.current,accept:"image/*,text/*",items:Ae,onChange:e=>{let{fileList:n}=e;Se(n),$(!0)},placeholder:e=>"drop"===e?{title:ge("chatui.DropFileHere")}:{icon:(0,s.jsx)(ee.A,{}),title:ge("chatui.UploadFiles"),description:ge("chatui.UploadFilesDescription")},children:(0,s.jsx)(ae.A,{dot:!m().isEmpty(Ae)&&!R,children:(0,s.jsx)(h.Ay,{type:"text",icon:(0,s.jsx)(ne.A,{})})})}),onChange:e=>{H(e),E&&E(e)},loading:q,onStop:()=>{Q()},onSend:()=>{if(N||!m().isEmpty(Ae)){const e=m().map(Ae,(e=>e.originFileObj)),n=m().filter(e,Boolean),t=new DataTransfer;m().forEach(n,(e=>{t.items.add(e)})),W({role:"user",content:N},{experimental_attachments:t.files}),setTimeout((()=>{H(""),Se([]),$(!1)}),0),null===T||void 0===T||T()}},style:{flex:1}})],children:[(0,s.jsx)(r.A,{direction:"row",style:{padding:me.paddingSM,paddingRight:me.paddingContentHorizontalLG,paddingLeft:me.paddingContentHorizontalLG,backgroundColor:me.colorBgContainer,display:b&&"custom"===O?"flex":"none"},children:(0,s.jsxs)(re.A,{ref:B,layout:"horizontal",size:"small",requiredMark:"optional",style:{flex:1},initialValues:{baseURL:p,token:_},children:[S?(0,s.jsx)("div",{style:{marginBottom:me.size},children:S}):null,(0,s.jsx)(re.A.Item,{label:"baseURL",name:"baseURL",rules:[{type:"url"},{required:!0}],children:(0,s.jsx)(de.A,{placeholder:"https://domain/v1"})}),(0,s.jsx)(re.A.Item,{label:"Model ID",name:"modelId",rules:[{required:!0}],children:(0,s.jsx)(de.A,{placeholder:"llm-model"})}),(0,s.jsx)(re.A.Item,{label:"Token",name:"token",children:(0,s.jsx)(de.A,{})})]},p)}),m().isEmpty(null===z||void 0===z?void 0:z.message)?null:(0,s.jsx)(se.A,{message:null===z||void 0===z?void 0:z.message,type:"error",showIcon:!0,style:{margin:me.marginSM},closable:!0}),(0,s.jsx)(X,{messages:P,isStreaming:q}),(0,s.jsx)(r.A,{justify:"end",align:"end",style:{margin:me.marginSM},children:(0,s.jsx)(ue.A,{children:(0,s.jsxs)(r.A,{gap:"xs",children:[(0,s.jsx)(te.A,{}),(0,s.jsxs)(r.A,{gap:"xxs",children:[(0,s.jsx)(k.A.Text,{children:ke.toFixed(2)}),(0,s.jsx)(k.A.Text,{type:"secondary",children:"tok/s"})]}),(0,s.jsxs)(r.A,{gap:"xxs",children:[(0,s.jsx)(k.A.Text,{children:xe}),(0,s.jsx)(k.A.Text,{type:"secondary",children:"total tokens"})]})]})})})]})}},76575:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>$});var i,l=t(72338),o=t(23441),a=t(69949),r=t(62976),d=t(47543),s=t(46976),u=t.n(s),c=t(55093),p=t(63821),m=t(79569);const g=e=>{let{fetchKey:n,lifecycleStageFilter:l=["created"],loading:a,...s}=e;const g=(0,o.CX)(),[f,v]=(0,r.A)(s),[h,y]=(0,c.useState)(),[x,j]=(0,c.useTransition)(),b=l.map((e=>`lifecycle_stage == "${e}"`)).join(" | "),{endpoint_list:k,endpoint:A}=(0,p.useLazyLoadQuery)(void 0!==i?i:i=t(90003),{limit:10,offset:0,filter:g.supports("endpoint-lifecycle-stage-filter")?[b,h].filter(Boolean).map((e=>`(${e})`)).join(" & "):void 0,endpoint_id:f,skipEndpoint:!f},{fetchKey:n}),S=A?u().map(u().uniqBy(u().concat(null===k||void 0===k?void 0:k.items,A),"endpoint_id"),(e=>({label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.endpoint_id,endpoint:e}))):u().map(null===k||void 0===k?void 0:k.items,(e=>({label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e.endpoint_id,endpoint:e})));return(0,m.jsx)(d.A,{showSearch:!0,onSearch:e=>{j((()=>{y(e&&`name ilike "%${e}%"`)}))},filterOption:!1,loading:x||a,options:S,...s,value:f,onChange:(e,n)=>{var t;v(e,null===(t=u().castArray(n))||void 0===t?void 0:t[0].endpoint)}})};var f,v=t(46735),h=t(38116),y=t(99159),x=t(66596),j=t(25951),b=t(99142),k=t(38398),A=t(23147),S=t(96067),C=t(33364);const L=(0,A.eU)(""),w=(0,A.eU)(void 0),E=e=>{var n,i,l,r;let{basePath:d="v1",closable:s,defaultModelId:A,defaultEndpoint:E,isSynchronous:T,onRequestClose:M,onModelChange:_,...I}=e;const{t:F}=(0,C.Bd)(),{token:D}=x.A.useToken(),[K,R]=(0,o.Tw)("first"),[$,O]=(0,c.useState)(E||null),U=(0,p.useFragment)(void 0!==f?f:f=t(67646),$),[B,V]=(0,c.useState)(U),[P,z]=(0,S.fp)(L),[N,H]=(0,S.fp)(w),{data:Q}=(0,a.nj)({queryKey:["models",K,null===U||void 0===U?void 0:U.endpoint_id],queryFn:()=>{var e;return null!==U&&void 0!==U&&U.url?fetch(new URL(d+"/models",null!==(e=null===U||void 0===U?void 0:U.url)&&void 0!==e?e:void 0).toString()).then((e=>e.json())).catch((e=>({data:[]}))):Promise.resolve({data:[]})}}),q=u().map(null===Q||void 0===Q?void 0:Q.data,(e=>({id:e.id,name:e.id}))),W=(0,c.useId)();return(0,m.jsx)(v.A,{...I,baseURL:null!==U&&void 0!==U&&U.url?new URL(d,null!==(n=null===U||void 0===U?void 0:U.url)&&void 0!==n?n:void 0).toString():void 0,models:q,fetchOnClient:!0,leftExtra:(0,m.jsx)(g,{placeholder:F("chatui.SelectEndpoint"),style:{fontWeight:"normal"},fetchKey:K,showSearch:!0,loading:(null===B||void 0===B?void 0:B.endpoint_id)!==(null===U||void 0===U?void 0:U.endpoint_id),onChange:(e,n)=>{V(n),(0,c.startTransition)((()=>{O(n)}))},value:null===U||void 0===U?void 0:U.endpoint_id,popupMatchSelectWidth:!1}),modelId:A&&u().includes(u().map(null===Q||void 0===Q?void 0:Q.data,"id"),A)?A:null!==(i=null===Q||void 0===Q||null===(l=Q.data)||void 0===l||null===(r=l[0])||void 0===r?void 0:r.id)&&void 0!==i?i:"custom",extra:s?(0,m.jsx)(j.A,{title:F("chatui.DeleteChattingSession"),description:F("chatui.DeleteChattingSessionDescription"),onConfirm:()=>{null===M||void 0===M||M()},okText:F("button.Delete"),okButtonProps:{danger:!0},children:(0,m.jsx)(b.Ay,{icon:(0,m.jsx)(h.A,{}),type:"text",style:{color:D.colorIcon}})}):void 0,allowCustomModel:u().isEmpty(q),alert:u().isEmpty(q)&&(0,m.jsx)(k.A,{type:"warning",showIcon:!0,message:F("chatui.CannotFindModel"),action:(0,m.jsx)(b.Ay,{icon:(0,m.jsx)(y.A,{}),onClick:()=>{R()},children:F("button.Refresh")})}),inputMessage:T?P:void 0,onInputChange:e=>{z(e)},submitKey:(null===N||void 0===N?void 0:N.id)===W||null===N||void 0===N?void 0:N.key,onSubmitChange:()=>{z(""),T&&H({id:W,key:(new Date).toString()})}})};var T,M=t(43605),_=t(72757),I=t(12221),F=t(47149),D=t(80963),K=t(16954),R=t(2647);const $=e=>{let{...n}=e;const{token:i}=x.A.useToken(),{t:o}=(0,C.Bd)(),{list:a,remove:r,getKey:d,push:s}=(0,_.A)(["0","1"]),[g,f]=(0,c.useState)(!1),[v]=(0,R.useQueryParam)("endpointId",R.StringParam),[h]=(0,R.useQueryParam)("modelId",R.StringParam),y=!v,{endpoint:j,endpoint_list:k}=(0,p.useLazyLoadQuery)(void 0!==T?T:T=t(52965),{endpointId:v||"",isEmptyEndpointId:y});return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(l.A,{direction:"column",align:"stretch",children:[(0,m.jsxs)(l.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:i.paddingContentVertical,paddingLeft:i.paddingContentHorizontalSM,paddingRight:i.paddingContentHorizontalSM},children:[(0,m.jsx)(l.A,{direction:"column",align:"start",children:(0,m.jsx)(I.A.Text,{style:{margin:0,padding:0},children:"LLM Playground"})}),(0,m.jsx)(l.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:(0,m.jsxs)(l.A,{gap:"xs",children:[(0,m.jsx)(I.A.Text,{type:"secondary",children:o("chatui.SyncInput")}),(0,m.jsx)(F.A,{value:g,onClick:e=>{f(e)}}),(0,m.jsx)(b.Ay,{onClick:()=>{s((new Date).toString())},icon:(0,m.jsx)(M.A,{})})]})})]}),(0,m.jsx)(l.A,{gap:"xs",direction:"row",style:{margin:i.margin,marginTop:0,overflow:"auto",height:"calc(100vh - 215px)"},align:"stretch",children:u().map(a,((e,n)=>{var t;return(0,m.jsx)(c.Suspense,{fallback:(0,m.jsx)(D.A,{bordered:!0,style:{width:"100%",display:"flex",flexDirection:"column"},children:(0,m.jsx)(K.A,{active:!0})}),children:(0,m.jsx)(E,{defaultModelId:0===n&&j&&h?h:void 0,defaultEndpoint:0===n&&j?j:(null===k||void 0===k||null===(t=k.items)||void 0===t?void 0:t[0])||void 0,style:{flex:1},onRequestClose:()=>{r(n)},closable:a.length>1,isSynchronous:g},d(n))},d(n))}))})]})})}},67646:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>l});const i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EndpointLLMChatCard_endpoint",selections:[{alias:null,args:null,kind:"ScalarField",name:"endpoint_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"Endpoint",abstractKey:null,hash:"d5fbaab35efda649f9f7847ee51028b6"},l=i},52965:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>l});const i=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"endpointId"},{defaultValue:null,kind:"LocalArgument",name:"isEmptyEndpointId"}],n=[{kind:"Variable",name:"endpoint_id",variableName:"endpointId"}],t=[{args:null,kind:"FragmentSpread",name:"EndpointLLMChatCard_endpoint"}],i=[{kind:"Literal",name:"limit",value:1},{kind:"Literal",name:"offset",value:0}],l=[{alias:null,args:null,kind:"ScalarField",name:"endpoint_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"LLMPlaygroundPageQuery",selections:[{alias:null,args:n,concreteType:"Endpoint",kind:"LinkedField",name:"endpoint",plural:!1,selections:t,storageKey:null},{alias:null,args:i,concreteType:"EndpointList",kind:"LinkedField",name:"endpoint_list",plural:!1,selections:[{alias:null,args:null,concreteType:"Endpoint",kind:"LinkedField",name:"items",plural:!0,selections:t,storageKey:null}],storageKey:"endpoint_list(limit:1,offset:0)"}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"LLMPlaygroundPageQuery",selections:[{alias:null,args:n,concreteType:"Endpoint",kind:"LinkedField",name:"endpoint",plural:!1,selections:l,storageKey:null},{alias:null,args:i,concreteType:"EndpointList",kind:"LinkedField",name:"endpoint_list",plural:!1,selections:[{alias:null,args:null,concreteType:"Endpoint",kind:"LinkedField",name:"items",plural:!0,selections:l,storageKey:null}],storageKey:"endpoint_list(limit:1,offset:0)"}]},params:{cacheID:"2666fd687919647b3aaa7f1d6cda6662",id:null,metadata:{},name:"LLMPlaygroundPageQuery",operationKind:"query",text:"query LLMPlaygroundPageQuery(\n  $endpointId: UUID!\n  $isEmptyEndpointId: Boolean!\n) {\n  endpoint(endpoint_id: $endpointId) @skipOnClient(if: $isEmptyEndpointId) {\n    ...EndpointLLMChatCard_endpoint\n    id\n  }\n  endpoint_list(limit: 1, offset: 0) {\n    items {\n      ...EndpointLLMChatCard_endpoint\n      id\n    }\n  }\n}\n\nfragment EndpointLLMChatCard_endpoint on Endpoint {\n  endpoint_id\n  url\n}\n"}}}();i.hash="ebf5c41c874617edc639e99afe6789d2";const l=i},62976:(e,n,t)=>{"use strict";t.d(n,{A:()=>d});var i=t(92509),l=t(55093),o=t(99358),a=t(4060);const r=function(){var e=(0,i.zs)((0,l.useState)({}),2)[1];return(0,l.useCallback)((function(){return e({})}),[])};const d=function(e,n){void 0===e&&(e={}),void 0===n&&(n={});var t=n.defaultValue,d=n.defaultValuePropName,s=void 0===d?"defaultValue":d,u=n.valuePropName,c=void 0===u?"value":u,p=n.trigger,m=void 0===p?"onChange":p,g=e[c],f=Object.prototype.hasOwnProperty.call(e,c),v=(0,l.useMemo)((function(){return f?g:Object.prototype.hasOwnProperty.call(e,s)?e[s]:t}),[]),h=(0,l.useRef)(v);f&&(h.current=g);var y=r();return[h.current,(0,a.A)((function(n){for(var t=[],l=1;l<arguments.length;l++)t[l-1]=arguments[l];var a=(0,o.Tn)(n)?n(h.current):n;f||(h.current=a,y()),e[m]&&e[m].apply(e,(0,i.fX)([a],(0,i.zs)(t),!1))}))]}},80056:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var i=t(92509),l=t(48977),o=t.n(l),a=t(55093),r=t(84079),d=t(80388),s=t(99358),u=t(24685);const c=function(e,n){var t;u.A&&((0,s.Tn)(e)||console.error("useThrottleFn expected parameter is a function, got ".concat(typeof e)));var l=(0,r.A)(e),c=null!==(t=null===n||void 0===n?void 0:n.wait)&&void 0!==t?t:1e3,p=(0,a.useMemo)((function(){return o()((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return l.current.apply(l,(0,i.fX)([],(0,i.zs)(e),!1))}),c,n)}),[]);return(0,d.A)((function(){p.cancel()})),{run:p,cancel:p.cancel,flush:p.flush}}},45140:(e,n,t)=>{var i=t(40936).Symbol;e.exports=i},27793:(e,n,t)=>{var i=t(45140),l=t(34552),o=t(6847),a=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?l(e):o(e)}},97429:(e,n,t)=>{var i=t(13855),l=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(l,""):e}},49521:(e,n,t)=>{var i="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g;e.exports=i},34552:(e,n,t)=>{var i=t(45140),l=Object.prototype,o=l.hasOwnProperty,a=l.toString,r=i?i.toStringTag:void 0;e.exports=function(e){var n=o.call(e,r),t=e[r];try{e[r]=void 0;var i=!0}catch(d){}var l=a.call(e);return i&&(n?e[r]=t:delete e[r]),l}},6847:e=>{var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},40936:(e,n,t)=>{var i=t(49521),l="object"==typeof self&&self&&self.Object===Object&&self,o=i||l||Function("return this")();e.exports=o},13855:e=>{var n=/\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},2174:(e,n,t)=>{var i=t(42366),l=t(48117),o=t(88513),a=Math.max,r=Math.min;e.exports=function(e,n,t){var d,s,u,c,p,m,g=0,f=!1,v=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(n){var t=d,i=s;return d=s=void 0,g=n,c=e.apply(i,t)}function x(e){var t=e-m;return void 0===m||t>=n||t<0||v&&e-g>=u}function j(){var e=l();if(x(e))return b(e);p=setTimeout(j,function(e){var t=n-(e-m);return v?r(t,u-(e-g)):t}(e))}function b(e){return p=void 0,h&&d?y(e):(d=s=void 0,c)}function k(){var e=l(),t=x(e);if(d=arguments,s=this,m=e,t){if(void 0===p)return function(e){return g=e,p=setTimeout(j,n),f?y(e):c}(m);if(v)return clearTimeout(p),p=setTimeout(j,n),y(m)}return void 0===p&&(p=setTimeout(j,n)),c}return n=o(n)||0,i(t)&&(f=!!t.leading,u=(v="maxWait"in t)?a(o(t.maxWait)||0,n):u,h="trailing"in t?!!t.trailing:h),k.cancel=function(){void 0!==p&&clearTimeout(p),g=0,d=m=s=p=void 0},k.flush=function(){return void 0===p?c:b(l())},k}},42366:e=>{e.exports=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},91945:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},85153:(e,n,t)=>{var i=t(27793),l=t(91945);e.exports=function(e){return"symbol"==typeof e||l(e)&&"[object Symbol]"==i(e)}},48117:(e,n,t)=>{var i=t(40936);e.exports=function(){return i.Date.now()}},48977:(e,n,t)=>{var i=t(2174),l=t(42366);e.exports=function(e,n,t){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return l(t)&&(o="leading"in t?!!t.leading:o,a="trailing"in t?!!t.trailing:a),i(e,n,{leading:o,maxWait:n,trailing:a})}},88513:(e,n,t)=>{var i=t(97429),l=t(42366),o=t(85153),a=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,d=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(l(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=l(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var t=r.test(e);return t||d.test(e)?s(e.slice(2),t?2:8):a.test(e)?NaN:+e}}}]);
//# sourceMappingURL=9242.f7f89524.chunk.js.map