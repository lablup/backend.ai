"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[624],{61823:(e,n,l)=>{l.d(n,{A:()=>C});var s=l(17898),i=l(23441),a=l(7971),o=l(73e3),t=l(53350);var r,d=l(9189),u=l(22407),c=l(72338),m=l(43622),g=l(50681),p=l(9571),y=l(9769),k=l(50128),h=l(40056),_=l(82919),S=l(52335),v=l(46976),F=l.n(v),x=l(53102),f=l(91788),j=l(22018),A=l(60598);const C=e=>{var n,v,C,K,b,T;let{sessionFrgmt:N,defaultKernelId:L,...I}=e;const w=(0,i.CX)(),{token:E}=p.A.useToken(),D=(0,a.Am)(),R=(0,j.useFragment)(void 0!==r?r:r=l(50029),N),M=(null===R||void 0===R||null===(n=R.kernel_nodes)||void 0===n||null===(v=n.edges)||void 0===v?void 0:v.map((e=>null===e||void 0===e?void 0:e.node)))||[],[U,$]=(0,t.useState)(L||(null===(C=F().find(M,(e=>"main"===(null===e||void 0===e?void 0:e.cluster_role))))||void 0===C?void 0:C.row_id)||(null===(K=M[0])||void 0===K?void 0:K.row_id));(0,t.useEffect)((()=>{!1===I.open&&$(void 0)}),[I.open]);const{data:q,refetch:z,isPending:O,isRefetching:B,dataUpdatedAt:P}=(0,o.nN)({queryKey:["containerLog",null===R||void 0===R?void 0:R.row_id,null===R||void 0===R?void 0:R.access_key,U,I.open],queryFn:async()=>I.open&&null!==R&&void 0!==R&&R.row_id&&null!==R&&void 0!==R&&R.access_key&&U?await w.get_logs(null===R||void 0===R?void 0:R.row_id,null===R||void 0===R?void 0:R.access_key,U,15e3).then((e=>e.result.logs)):"",staleTime:5e3}),[Q,{resetPrevious:G}]=function(e,n){let{initialPrev:l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(0,t.useRef)(l),[i,a]=(0,t.useState)({}),o=(0,t.useMemo)(e,n),r=(0,t.useMemo)((()=>s.current),[...n,i]);return(0,t.useEffect)((()=>{s.current=o}),n),[{previous:r,current:o},{resetPrevious:()=>{s.current=l,a({})}}]}((()=>(null===q||void 0===q?void 0:q.split("\n").length)||0),[q]),{md:V}=y.Ay.useBreakpoint(),{t:W}=(0,f.Bd)();return(0,A.jsx)(d.A,{title:(0,A.jsxs)(c.A,{style:{maxWidth:"100%"},gap:"sm",children:[(0,A.jsx)(k.A.Title,{level:4,style:{margin:0,flexShrink:0},children:"Logs"}),R?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(k.A.Text,{style:{fontWeight:"normal"},ellipsis:!0,children:null===R||void 0===R?void 0:R.name}),(0,A.jsxs)(k.A.Text,{style:{fontWeight:"normal",fontFamily:"monospace"},copyable:{text:null===R||void 0===R?void 0:R.row_id,tooltips:W("button.CopySomething",{name:W("session.SessionId")})},children:["(",V?null===R||void 0===R?void 0:R.row_id:null===R||void 0===R||null===(b=R.row_id.split("-"))||void 0===b?void 0:b[0],")"]})]}):null]}),width:"100%",styles:{header:{width:"100%"},body:{height:"calc(100vh - 100px)",maxHeight:"calc(100vh - 100px)"}},...I,footer:null,destroyOnClose:!0,children:(0,A.jsxs)(c.A,{direction:"column",align:"start",style:{height:"100%"},gap:"sm",children:[(0,A.jsxs)(c.A,{gap:"sm",wrap:"wrap",children:["Kernel Role",(0,A.jsx)(u.A,{value:U,onChange:e=>{$(e),G()},autoSelectOption:!0,options:F().chain(null===R||void 0===R||null===(T=R.kernel_nodes)||void 0===T?void 0:T.edges).sortBy((e=>{var n,l;return`${null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.cluster_role} ${null===e||void 0===e||null===(l=e.node)||void 0===l?void 0:l.cluster_idx}`})).map((e=>{var n,l,s,i,a;return{label:(0,A.jsxs)(A.Fragment,{children:[null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.cluster_role,"main"!==(null===e||void 0===e||null===(l=e.node)||void 0===l?void 0:l.cluster_role)?null===e||void 0===e||null===(s=e.node)||void 0===s?void 0:s.cluster_idx:"","admin"===D||"superadmin"===D?(0,A.jsxs)(k.A.Text,{style:{fontFamily:"monospace",fontSize:E.fontSizeSM},type:"secondary",children:["(",((null===e||void 0===e||null===(i=e.node)||void 0===i?void 0:i.row_id)||"").substring(0,5),")"]}):null]}),value:null===e||void 0===e||null===(a=e.node)||void 0===a?void 0:a.row_id}})).value()}),(0,A.jsx)(h.A,{type:"vertical"}),(0,A.jsx)(_.A,{title:W("button.Download"),children:(0,A.jsx)(S.Ay,{size:"middle",icon:(0,A.jsx)(x.A,{}),disabled:O||B,onClick:()=>{const e=new Blob([q||""],{type:"text/plain"});(0,s.WN)(e,`${(null===R||void 0===R?void 0:R.name)||"session"}-logs-${U}-${(new Date).toISOString()}.txt`)}})}),(0,A.jsx)(_.A,{title:W("button.Refresh"),children:(0,A.jsx)(S.Ay,{size:"middle",loading:O||B,icon:(0,A.jsx)(m.A,{}),onClick:()=>z()})})]}),(0,A.jsx)("div",{style:{height:"calc(100% - 50px)",alignSelf:"stretch",border:`1px solid ${E.colorBorder}`,overflow:"hidden"},children:(0,A.jsx)(g.jB,{startFollowing:!0,render:e=>{let{follow:n,onScroll:l}=e;return(0,A.jsx)(g.FT,{caseInsensitive:!0,enableSearch:!0,enableSearchNavigation:!0,selectableLines:!0,text:q||"",highlight:Q.previous,extraLines:1,follow:n,onScroll:l})}},P)})]})})}},90857:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"uuid"}],n=[{kind:"Variable",name:"id",variableName:"uuid"}],l={alias:null,args:null,kind:"ScalarField",name:"group_id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ConnectedKernelListLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ConnectedKernelListLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"b8db3f5005362f059f55439e393c1838",id:null,metadata:{},name:"ConnectedKernelListLegacyQuery",operationKind:"query",text:"query ConnectedKernelListLegacyQuery(\n  $uuid: UUID!\n) {\n  session_for_project_id: compute_session(id: $uuid) {\n    group_id\n    id\n  }\n}\n"}}}();s.hash="19ed5dde0fb95d8ff8cfbe9114129348";const i=s},52476:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"project_id"}],n=[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"project_id",variableName:"project_id"}],l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"status_info",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"agent_id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ConnectedKernelListQuery",selections:[{alias:"session",args:n,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[l,s,i,a,o,t,r],storageKey:null}],storageKey:null},d],storageKey:null},{args:null,kind:"FragmentSpread",name:"ContainerLogModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ConnectedKernelListQuery",selections:[{alias:"session",args:n,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[l,s,i,a,o,t,r,{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null}],storageKey:null}],storageKey:null},d],storageKey:null},l,s,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null}],storageKey:null}]},params:{cacheID:"2e6cc39dd042b4d260abf65705f92cb5",id:null,metadata:{},name:"ConnectedKernelListQuery",operationKind:"query",text:"query ConnectedKernelListQuery(\n  $id: GlobalIDField!\n  $project_id: UUID!\n) {\n  session: compute_session_node(id: $id, project_id: $project_id) {\n    kernel_nodes {\n      edges {\n        node {\n          id\n          row_id\n          cluster_role\n          status\n          status_info\n          agent_id\n          container_id\n        }\n      }\n      count\n    }\n    ...ContainerLogModalFragment\n    id\n  }\n}\n\nfragment ContainerLogModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  status\n  access_key\n  kernel_nodes {\n    edges {\n      node {\n        id\n        row_id\n        container_id\n        cluster_idx\n        cluster_role\n      }\n    }\n  }\n}\n"}}}();s.hash="d7ddfbcf29d38fad8451d13a176ce279";const i=s},5545:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ContainerCommitModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},action:"NONE",path:"row_id"}],type:"ComputeSessionNode",abstractKey:null,hash:"8bcd294de1ffd3f00f6ec0ed7177c304"},i=s},50029:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const s=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ContainerLogModalFragment",selections:[e,{kind:"RequiredField",field:n,action:"NONE",path:"row_id"},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"ComputeSessionNode",abstractKey:null}}();s.hash="59dda81185d3d874cd635adcae2ae9d4";const i=s},33589:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EditableSessionNameFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"priority",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"9c053b92b568a9b132f7615d1869f32b"},i=s},93178:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n={alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"ModifyComputeSessionPayload",kind:"LinkedField",name:"modify_compute_session",plural:!1,selections:[{alias:null,args:null,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"item",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"EditableSessionNameMutation",selections:[{kind:"CatchField",field:n,to:"RESULT",path:"modify_compute_session"}],type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"EditableSessionNameMutation",selections:[n]},params:{cacheID:"bea4b6405958ab3b9796129b5807d0fa",id:null,metadata:{},name:"EditableSessionNameMutation",operationKind:"mutation",text:"mutation EditableSessionNameMutation(\n  $input: ModifyComputeSessionInput!\n) {\n  modify_compute_session(input: $input) {\n    item {\n      id\n      name\n    }\n  }\n}\n"}}}();s.hash="055a00b906a6c6ab62ad29ea3ebc6e46";const i=s},79825:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionActionButtonsFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},action:"NONE",path:"row_id"},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commit_status",storageKey:null},{args:null,kind:"FragmentSpread",name:"TerminateSessionModalFragment"},{args:null,kind:"FragmentSpread",name:"ContainerLogModalFragment"},{args:null,kind:"FragmentSpread",name:"ContainerCommitModalFragment"}],type:"ComputeSessionNode",abstractKey:null,hash:"691b7c3c1673640d97620822f4fff09f"},i=s},73921:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionIdleChecksFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null}],type:"ComputeSession",abstractKey:null,hash:"d2bf721ec94f22eba99980925b3f9656"},i=s},7281:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionIdleChecksNodeFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"09a1dd685c8942ebb5c69e6dddaf6da0"},i=s},15934:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const s={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SessionTypeTagFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],type:"ComputeSessionNode",abstractKey:null,hash:"6d4ab2b738125ee81d47483324695349"},i=s},30624:(e,n,l)=>{l.d(n,{A:()=>Ae});var s,i,a=l(23441),o=l(50332),t=l(32715),r=l(72375),d=l(7971),u=l(81530),c=l(94132),m=l(8699),g=l(91238),p=l(72338),y=l(49090),k=l(61823),h=l(50128),_=l(82919),S=l(52335),v=l(24798),F=l(46976),x=l.n(F),f=l(33879),j=l(53350),A=l(91788),C=l(22018),K=l(60598);const b={PREPARING:"blue",BUILDING:"blue",PULLING:"blue",PREPARED:"blue",CREATING:"blue",PENDING:"green",SCHEDULED:"green",RUNNING:"green",RESTARTING:"green",RESIZING:"green",SUSPENDED:"green",TERMINATING:"default",TERMINATED:"default",CANCELLED:"default",ERROR:"red"},T=e=>{let{id:n,fetchKey:a}=e;const{t:o}=(0,A.Bd)(),t=(0,u.hd)(),[d,c]=(0,j.useState)(),{session_for_project_id:F}=(0,C.useLazyLoadQuery)(void 0!==s?s:s=l(90857),{uuid:n},{fetchPolicy:"network-only"}),{session:T}=(0,C.useLazyLoadQuery)(void 0!==i?i:i=l(52476),{id:(0,r.wc)("ComputeSessionNode",n),project_id:(null===F||void 0===F?void 0:F.group_id)||t.id},{fetchPolicy:"network-only",fetchKey:a}),N=null===T||void 0===T?void 0:T.kernel_nodes,L=(0,r.LY)([{title:"#",fixed:"left",render:(e,n,l)=>l+1,showSorterTooltip:!1,rowScope:"row"},{title:o("kernel.KernelId"),fixed:"left",dataIndex:"row_id",render:e=>(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(h.A.Text,{copyable:!0,ellipsis:!0,children:e}),(0,K.jsx)(_.A,{title:o("session.SeeContainerLogs"),children:(0,K.jsx)(S.Ay,{icon:(0,K.jsx)(f.A,{}),type:"link",onClick:()=>{c(e)}})})]})},{title:o("kernel.Role"),dataIndex:"cluster_role",render:e=>(0,K.jsx)(v.A,{children:e})},{title:o("kernel.Status"),dataIndex:"status",render:(e,n)=>{var l;return(0,K.jsx)(K.Fragment,{children:""!==(null===n||void 0===n?void 0:n.status_info)?(0,K.jsx)(g.A,{values:[{label:e,color:x().get(b,e)},{label:null===n||void 0===n?void 0:n.status_info,color:x().get(b,null!==(l=null===n||void 0===n?void 0:n.status_info)&&void 0!==l?l:"")}]}):(0,K.jsx)(v.A,{color:x().get(b,e),children:e})})}},{title:o("kernel.ContainerId"),dataIndex:"container_id",onCell:()=>({style:{maxWidth:250}}),render:e=>(0,K.jsx)(h.A.Text,{copyable:!0,ellipsis:!0,children:e})},{title:o("kernel.AgentId"),dataIndex:"agent_id",render:e=>(0,K.jsx)(h.A.Text,{copyable:!0,children:e})}]);return(0,K.jsxs)(p.A,{direction:"column",align:"stretch",gap:"sm",children:[(0,K.jsx)(m.A,{bordered:!0,rowKey:"id",scroll:{x:"max-content"},columns:L,dataSource:(0,r.tS)(null===N||void 0===N?void 0:N.edges.map((e=>null===e||void 0===e?void 0:e.node))),style:{width:"100%"},pagination:!1}),(0,K.jsx)(y.A,{children:(0,K.jsx)(k.A,{open:!!d,sessionFrgmt:T||null,defaultKernelId:d,onCancel:()=>{c(void 0)}})})]})};var N,L,I=l(60661),w=l(9571),E=l(67710),D=l(13170),R=l(83978),M=l(96365),U=l(7824);const $=e=>{let{component:n=M.A,sessionFrgmt:s,editable:i,style:a,...o}=e;const t=(0,C.useFragment)(void 0!==N?N:N=l(33589),s),[r,u]=(0,j.useState)(t.name),[c]=(0,d.U6)(),[m,g]=(0,C.useMutation)(void 0!==L?L:L=l(93178)),{t:p}=(0,A.Bd)(),{token:y}=w.A.useToken(),[k,h]=(0,j.useState)(!1),{message:_}=E.A.useApp(),S=!["RESTARTING","PREPARING","PREPARED","CREATING","PULLING"].includes(t.status||""),v=i&&c.uuid===t.user_id&&S;return(0,K.jsxs)(K.Fragment,{children:[(!k||g)&&(0,K.jsx)(n,{editable:!(!v||g)&&{onStart:()=>{h(!0)},triggerType:["icon","text"]},copyable:!0,style:{...a,color:g?y.colorTextTertiary:null===a||void 0===a?void 0:a.color},...o,children:g?r:t.name}),k&&!g&&(0,K.jsx)(D.A,{onFinish:e=>{h(!1),u(e.sessionName),m({variables:{input:{id:t.id,name:e.sessionName}},onCompleted(e,n){if(e.modify_compute_session.ok)document.dispatchEvent(new CustomEvent("backend-ai-session-list-refreshed"));else{var l;var s;if(((null===n||void 0===n||null===(l=n[0])||void 0===l?void 0:l.message)||"").includes("Duplicate session name."))_.error(p("session.launcher.SessionAlreadyExists"));else null!==n&&void 0!==n&&null!==(s=n[0])&&void 0!==s&&s.message&&_.error(p("session.FailToRenameSession"))}},onError(e){_.error(p("session.FailToRenameSession"))}})},initialValues:{sessionName:t.name},style:{flex:1},children:(0,K.jsx)(D.A.Item,{name:"sessionName",rules:(0,I.j)(p),style:{margin:0},children:(0,K.jsx)(R.A,{size:"large",suffix:(0,K.jsx)(U.A,{style:{fontSize:"0.8em",color:y.colorTextTertiary}}),autoFocus:!0,onKeyDown:e=>{"Escape"===e.key&&h(!1)}})})})]})};var q,z=l(25905),O=l(9189),B=l(8227),P=l(40056);const Q=e=>{let{sessionFrgmt:n,onRequestClose:s,...i}=e;const{t:o}=(0,A.Bd)(),t=(0,j.useRef)(null),r=(0,a.CX)(),{upsertNotification:d}=(0,z.js)(),[u,c]=(0,j.useState)(!1),m=(0,C.useFragment)(void 0!==q?q:q=l(5545),n);return(0,K.jsx)(O.A,{title:o("session.CommitSession"),onOk:()=>(()=>{var e;c(!0),null===t||void 0===t||null===(e=t.current)||void 0===e||e.validateFields().then((e=>{var n;r.computeSession.convertSessionToImage(null!==(n=null===m||void 0===m?void 0:m.name)&&void 0!==n?n:"",e.imageName).then((e=>{s(),d({key:"commitSession:"+(null===m||void 0===m?void 0:m.name),backgroundTask:{taskId:e.task_id,status:"pending",onChange:{pending:o("session.CommitOnGoing"),resolved:o("session.CommitFinished"),rejected:o("session.CommitFailed")}},duration:0,message:"commitSession: "+(null===m||void 0===m?void 0:m.name),open:!0})})).catch((e=>{throw null!==e&&void 0!==e&&e.message?new Error(e.message):e})).finally((()=>{c(!1)}))})).catch((e=>{console.log(e)}))})(),okButtonProps:{loading:u},onCancel:s,...i,destroyOnClose:!0,children:(0,K.jsxs)(p.A,{direction:"column",gap:"xs",align:"stretch",style:{overflow:"hidden"},children:[(0,K.jsx)(h.A.Text,{children:o("session.DescCommitSession")}),(0,K.jsxs)(B.A,{bordered:!0,size:"small",column:1,children:[(0,K.jsx)(B.A.Item,{label:o("session.SessionName"),children:null===m||void 0===m?void 0:m.name}),(0,K.jsx)(B.A.Item,{label:o("session.SessionId"),children:null===m||void 0===m?void 0:m.row_id})]}),(0,K.jsx)(P.A,{style:{marginTop:12,marginBottom:12}}),(0,K.jsx)(D.A,{ref:t,children:(0,K.jsx)(D.A.Item,{label:o("session.CommitImageName"),name:"imageName",required:!0,rules:[{required:!0},{min:4,max:32},{pattern:/^[a-zA-Z0-9-_.]+$/,message:o("session.Validation.EnterValidSessionName")}],children:(0,K.jsx)(R.A,{placeholder:o("inputLimit.4to32chars")})})})]})})};var G,V=l(26059),W=l(32582),X=l(10566),H=l(15517);const J=e=>!["TERMINATED","CANCELLED"].includes((null===e||void 0===e?void 0:e.status)||""),Z=e=>{const{t:n}=(0,A.Bd)(),{token:s}=w.A.useToken(),i={runTerminal:e=>{globalThis.appLauncher.runTerminal(e)},showLauncher:e=>{}},o=(0,a.CX)(),t=(0,C.useFragment)(void 0!==G?G:G=l(79825),e.sessionFrgmt),[r,d]=(0,j.useState)(!1),[u,c]=(0,j.useState)(!1),[m,g]=(0,j.useState)(!1);return t&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(_.A,{title:n("session.ExecuteTerminalApp"),children:(0,K.jsx)(S.Ay,{disabled:!J(t),icon:(0,K.jsx)(X.A,{}),onClick:()=>{i.runTerminal(null===t||void 0===t?void 0:t.row_id)}})}),(0,K.jsx)(V.A,{sessionFrgmts:[t],open:r,onRequestClose:()=>{d(!1)}}),(0,K.jsx)(_.A,{title:n("session.SeeContainerLogs"),children:(0,K.jsx)(S.Ay,{icon:(0,K.jsx)(f.A,{}),onClick:()=>{c(!0)}})}),(0,K.jsx)(k.A,{sessionFrgmt:t,open:u,onCancel:()=>{c(!1)}}),(0,K.jsx)(_.A,{title:n("session.RequestContainerCommit"),children:(0,K.jsx)(S.Ay,{disabled:(!o.supports("image-commit")||!o._config.enableContainerCommit)&&"system"!==t.type,icon:(0,K.jsx)(W.A,{style:{fontSize:14}}),onClick:()=>{g(!0)}})}),(0,K.jsx)(Q,{sessionFrgmt:t,open:m,onRequestClose:()=>g(!1)}),(0,K.jsx)(_.A,{title:n("session.TerminateSession"),children:(0,K.jsx)(S.Ay,{disabled:!J(t),icon:(0,K.jsx)(H.A,{color:J(t)?s.colorError:void 0}),onClick:()=>{d(!0)}})})]})};var Y,ee,ne=l(30351);function le(e){let n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!l){const[n,l]=e;return n<2*l?"red":n<10*l?"orange":"green"}return"and"===l&&x().every(e,(e=>{let[l,s]=e;return l<Math.min(2*s,s+5)?(n="red",!0):l<Math.min(10*s,s+10)?(n="orange",!0):(n="green",!0)})),"or"===l&&x().some(e,(e=>{let[l,s]=e;return l<Math.min(2*s,s+5)?(n="red",!0):l<Math.min(10*s,s+10)?(n="orange",!0):(n="green",!0)})),n}function se(e,n){return"remaining"===n?!e.remaining||e.remaining<3600?"red":e.remaining<14400?"orange":"green":e.extra&&(!e.remaining||e.remaining<14400)?le(e.extra.resources,e.extra.thresholds_check_operator):void 0}const ie=e=>{let{sessionNodeFrgmt:n=null,sessionFrgmt:s=null,direction:i="row"}=e;const{t:a}=(0,A.Bd)(),{token:o}=w.A.useToken(),{mergedResourceSlots:t}=(0,d.Hv)(),u=(0,C.useFragment)(void 0!==Y?Y:Y=l(7281),n),c=(0,C.useFragment)(void 0!==ee?ee:ee=l(73921),s),m=JSON.parse((null===u||void 0===u?void 0:u.idle_checks)||(null===c||void 0===c?void 0:c.idle_checks)||"{}"),y=e=>a("network_timeout"===e?"session.NetworkIdleTimeout":"session_lifetime"===e?"session.MaxSessionLifetime":"session.UtilizationIdleTimeout");return(0,K.jsx)(p.A,{direction:i,align:"stretch",gap:"sm",children:x().map(m,((e,n)=>{var l,s;return e.remaining?(0,K.jsxs)(p.A,{style:{flex:1},direction:"column",align:"stretch",children:[(0,K.jsxs)(p.A,{gap:"xxs",children:[(0,K.jsx)(h.A.Text,{children:y(n)}),"utilization"===n&&(0,K.jsx)(_.A,{title:(0,K.jsxs)(K.Fragment,{children:[`${a("session.Utilization")} / ${a("session.Threshold")} (%)`,(0,K.jsx)("br",{}),x().map(null===(l=e.extra)||void 0===l?void 0:l.resources,((e,n)=>{var l;const s=["cpu_util","mem"].includes(n)?x().split(n,"_")[0]:x().split(n,"_")[0]+".device",[i,a]=e;return(0,K.jsxs)(p.A,{gap:"xs",children:[(0,K.jsx)(h.A.Text,{style:{color:o.colorWhite},children:`${null===t||void 0===t||null===(l=t[s])||void 0===l?void 0:l.human_readable_name}:`}),(0,K.jsx)(h.A.Text,{style:{color:le(e)},children:`${i>=0?(0,r.Z1)(i,1):"-"} / ${a}`}),(0,K.jsx)("br",{})]},n)}))]}),children:(0,K.jsx)(ne.A,{style:{color:o.colorTextSecondary,cursor:"pointer"}})})]}),e.remaining>=0?(0,K.jsx)(g.A,{values:[{label:(s=e.remaining_time_type,a("expire_after"===s?"session.ExpiresAfter":"session.GracePeriod")),color:se(e,"utilization"===n?"utilization":"remaining")},{label:(0,r.bB)((new Date).toISOString(),new Date((new Date).getTime()+1e3*(e.remaining||0)).toISOString()),color:se(e,"utilization"===n?"utilization":"remaining")}]}):(0,K.jsx)(h.A.Text,{type:"danger",children:a("session.TimeoutExceeded")})]},n):null}))})};var ae,oe=l(61207),te=l(5415);const re={INTERACTIVE:"green",BATCH:"darkgreen",INFERENCE:"blue"},de=e=>{let{sessionFrgmt:n}=e;const s=(0,C.useFragment)(void 0!==ae?ae:ae=l(15934),n);return(0,K.jsx)(v.A,{color:x().get(re,x().toUpper(s.type||"")),children:x().toUpper(s.type||"")})};var ue=l(75863);const ce=e=>{let{...n}=e;const{t:l}=(0,A.Bd)(),{token:s}=w.A.useToken();return(0,K.jsxs)(O.A,{title:l("session.IdleChecks"),footer:null,width:700,...n,children:[(0,K.jsx)(h.A.Text,{children:l("session.IdleChecksDesc")}),(0,K.jsx)(h.A.Title,{level:5,children:l("session.MaxSessionLifetime")}),(0,K.jsx)("p",{children:l("session.MaxSessionLifetimeDesc")}),(0,K.jsx)(h.A.Title,{level:5,children:l("session.NetworkIdleTimeout")}),(0,K.jsx)("p",{children:l("session.NetworkIdleTimeoutDesc")}),(0,K.jsx)(h.A.Title,{level:5,children:l("session.UtilizationIdleTimeout")}),(0,K.jsx)("p",{children:l("session.UtilizationIdleTimeoutDesc")}),(0,K.jsxs)(p.A,{direction:"column",align:"stretch",style:{marginLeft:s.marginMD},children:[(0,K.jsx)(h.A.Title,{level:5,style:{margin:0},children:l("session.GracePeriod")}),(0,K.jsx)("p",{children:l("session.GracePeriodDesc")}),(0,K.jsx)(h.A.Title,{level:5,style:{margin:0},children:l("session.UtilizationThreshold")}),(0,K.jsx)("p",{children:l("session.UtilizationThresholdDesc")})]})]})};var me,ge,pe=l(90184),ye=l(95950),ke=l(2759),he=l(38639),_e=l(9769),Se=l(58325),ve=l(91867),Fe=l(9542);const xe=e=>{var n;let{id:s,fetchKey:i}=e;const{t:o}=(0,A.Bd)(),{token:m}=w.A.useToken(),{md:g}=_e.Ay.useBreakpoint(),{open:y}=(0,ue.useFolderExplorerOpener)(),k=(0,u.hd)(),F=(0,d.Am)(),f=(0,a.CX)(),[b,N]=(0,j.useState)(!1),{session_for_project_id:L}=(0,C.useLazyLoadQuery)(void 0!==me?me:me=l(66427),{uuid:s},{fetchPolicy:"network-only"}),{session:I,legacy_session:E}=(0,C.useLazyLoadQuery)(void 0!==ge?ge:ge=l(4078),{id:(0,r.wc)("ComputeSessionNode",s),uuid:s,project_id:(null===L||void 0===L?void 0:L.group_id)||k.id},{fetchPolicy:"network-only",fetchKey:i}),D=(null===E||void 0===E?void 0:E.image)&&(null===E||void 0===E?void 0:E.architecture)&&E.image+"@"+E.architecture,R=JSON.parse((null===I||void 0===I?void 0:I.idle_checks)||(null===E||void 0===E?void 0:E.idle_checks)||"{}"),M=x().min(x().values(R).map((e=>e.remaining)).filter(Boolean)),U=f._config.showKernelList;return I?(0,K.jsxs)(p.A,{direction:"column",gap:"lg",align:"stretch",children:[(null===L||void 0===L?void 0:L.group_id)!==k.id&&(0,K.jsx)(Se.A,{message:o("session.NotInProject"),type:"warning",showIcon:!0}),M&&M<3600&&(0,K.jsx)(Se.A,{message:o("session.IdleCheckExpirationWarning"),type:"warning",showIcon:!0}),(0,K.jsxs)(p.A,{direction:"column",gap:"sm",align:"stretch",children:[(0,K.jsxs)(p.A,{direction:"row",justify:"between",align:"start",style:{alignSelf:"stretch"},gap:"sm",children:[(0,K.jsx)($,{sessionFrgmt:I,component:Fe.A,level:3,style:{margin:0,color:["TERMINATED","CANCELLED"].includes(I.status||"")?m.colorTextTertiary:void 0},editable:!["TERMINATED","CANCELLED"].includes(I.status||"")}),(0,K.jsx)(S.Ay.Group,{size:"large",children:(0,K.jsx)(Z,{sessionFrgmt:I})})]}),(0,K.jsxs)(B.A,{bordered:!0,column:g?2:1,children:[(0,K.jsx)(B.A.Item,{label:o("session.SessionId"),span:g?2:1,children:(0,K.jsx)(h.A.Text,{copyable:!0,style:{fontFamily:"monospace"},children:I.row_id})}),("admin"===F||"superadmin"===F)&&(0,K.jsx)(B.A.Item,{label:o("credential.UserID"),span:g?2:1,children:null===E||void 0===E?void 0:E.user_email}),(0,K.jsx)(B.A.Item,{label:o("session.Status"),contentStyle:{display:"flex",gap:m.marginSM},children:(0,K.jsx)(te.A,{sessionFrgmt:I,showInfo:!0})}),(0,K.jsx)(B.A.Item,{label:o("session.SessionType"),children:(0,K.jsx)(de,{sessionFrgmt:I})}),(0,K.jsx)(B.A.Item,{label:o("session.launcher.Environments"),children:D?(0,K.jsxs)(p.A,{gap:"sm",children:[(0,K.jsx)(pe.A,{image:D}),(0,K.jsx)(p.A,{children:(0,K.jsx)(t.Ay,{image:D})})]}):"-"}),(0,K.jsx)(B.A.Item,{label:o("session.launcher.MountedFolders"),children:f.supports("vfolder-mounts")?x().map(x().zip(null===E||void 0===E?void 0:E.mounts,null===I||void 0===I?void 0:I.vfolder_mounts),(e=>{const[n,l]=e;return(0,K.jsx)(S.Ay,{type:"link",size:"small",icon:(0,K.jsx)(ke.A,{}),onClick:()=>{y(null!==l&&void 0!==l?l:"")},children:n},l)})):null===E||void 0===E||null===(n=E.mounts)||void 0===n?void 0:n.join(", ")}),(0,K.jsx)(B.A.Item,{label:o("session.launcher.ResourceAllocation"),children:(0,K.jsxs)(p.A,{gap:"sm",wrap:"wrap",children:[(0,K.jsx)(_.A,{title:o("session.ResourceGroup"),children:(0,K.jsx)(v.A,{children:I.scaling_group})}),(0,K.jsx)(c.ResourceNumbersOfSession,{resource:JSON.parse(I.requested_slots||"{}")})]})}),(0,K.jsx)(B.A.Item,{label:o("session.Agent"),children:I.agent_ids||"-"}),(0,K.jsx)(B.A.Item,{label:o("session.Reservation"),span:g?2:1,children:(0,K.jsx)(p.A,{gap:"xs",wrap:"wrap",children:(0,K.jsx)(oe.A,{sessionFrgmt:I})})}),f.supports("idle-checks-gql")&&"RUNNING"===I.status&&M?(0,K.jsx)(B.A.Item,{label:(0,K.jsxs)(p.A,{gap:"xxs",children:[o("session.IdleChecks"),(0,K.jsx)(_.A,{title:o("button.ClickForMoreDetails"),children:(0,K.jsx)(he.A,{style:{cursor:"pointer"},onClick:()=>N(!0)})})]}),span:g?2:1,children:(0,K.jsx)(ie,{sessionNodeFrgmt:I,sessionFrgmt:E,direction:g?"row":"column"})}):null,(0,K.jsx)(B.A.Item,{label:"Resource Usage",span:g?2:1,children:(0,K.jsx)(ye.A,{sessionFrgmt:I})})]})]}),U?(0,K.jsx)(j.Suspense,{fallback:(0,K.jsx)(ve.A,{}),children:(0,K.jsxs)(p.A,{direction:"column",gap:"sm",align:"stretch",children:[(0,K.jsx)(h.A.Title,{level:4,style:{margin:0},children:o("kernel.Kernels")}),(0,K.jsx)(T,{id:s,fetchKey:i})]})}):null,(0,K.jsx)(ce,{open:b,onCancel:()=>N(!1)})]}):(0,K.jsx)(Se.A,{showIcon:!0,message:o("session.SessionNotFound"),type:"error",description:s})};var fe=l(43622),je=l(43710);const Ae=e=>{let{sessionId:n,...l}=e;const{t:s}=(0,A.Bd)();(0,a.CX)();const[i,t]=(0,j.useTransition)(),[r,d]=(0,a.Tw)("first");return(0,o.$)((()=>{t((()=>{d()}))}),7e3),(0,K.jsx)(je.A,{title:s("session.SessionInfo"),width:800,keyboard:!1,...l,open:!!n,onClose:e=>{var n;null===(n=l.onClose)||void 0===n||n.call(l,e)},extra:(0,K.jsx)(_.A,{title:s("button.Refresh"),children:(0,K.jsx)(S.Ay,{loading:i,icon:(0,K.jsx)(fe.A,{}),onClick:()=>{t((()=>{d()}))}})}),children:(0,K.jsx)(j.Suspense,{fallback:(0,K.jsx)(ve.A,{}),children:n&&(0,K.jsx)(xe,{id:n,fetchKey:r})})})}},49090:(e,n,l)=>{l.d(n,{A:()=>i});var s=l(53350);const i=e=>{let{children:n}=e;const l=s.Children.only(n),i=l.props.open,[a,o]=(0,s.useState)(i);if((0,s.useLayoutEffect)((()=>{i&&o(!0)}),[i]),!a)return null;const t=l.props.afterClose;return s.cloneElement(l,{afterClose:function(){t&&t(...arguments),o(!1)}})}},66427:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const s=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"uuid"}],n=[{kind:"Variable",name:"id",variableName:"uuid"}],l={alias:null,args:null,kind:"ScalarField",name:"group_id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"SessionDetailContentLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"SessionDetailContentLegacyQuery",selections:[{alias:"session_for_project_id",args:n,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{cacheID:"1c0255a2836eb7e492954c7ab0212c7f",id:null,metadata:{},name:"SessionDetailContentLegacyQuery",operationKind:"query",text:"query SessionDetailContentLegacyQuery(\n  $uuid: UUID!\n) {\n  session_for_project_id: compute_session(id: $uuid) {\n    group_id\n    id\n  }\n}\n"}}}();s.hash="d6a0dfbccdec8393f1a058dab48a0757";const i=s},4078:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const s=function(){var e={defaultValue:null,kind:"LocalArgument",name:"id"},n={defaultValue:null,kind:"LocalArgument",name:"project_id"},l={defaultValue:null,kind:"LocalArgument",name:"uuid"},s=[{kind:"Variable",name:"id",variableName:"id"},{kind:"Variable",name:"project_id",variableName:"project_id"}],i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"row_id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"project_id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"user_id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"resource_opts",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"vfolder_mounts",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"terminated_at",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"scaling_group",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"agent_ids",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"requested_slots",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"idle_checks",storageKey:null},_=[{kind:"Variable",name:"id",variableName:"uuid"}],S={alias:null,args:null,kind:"ScalarField",name:"image",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"mounts",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"user_email",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"architecture",storageKey:null};return{fragment:{argumentDefinitions:[e,n,l],kind:"Fragment",metadata:null,name:"SessionDetailContentQuery",selections:[{alias:"session",args:s,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[i,a,o,t,r,d,u,c,{kind:"RequiredField",field:m,action:"NONE",path:"session.created_at"},g,p,y,k,h,{args:null,kind:"FragmentSpread",name:"SessionStatusTagFragment"},{args:null,kind:"FragmentSpread",name:"SessionActionButtonsFragment"},{args:null,kind:"FragmentSpread",name:"SessionTypeTagFragment"},{args:null,kind:"FragmentSpread",name:"EditableSessionNameFragment"},{args:null,kind:"FragmentSpread",name:"SessionReservationFragment"},{args:null,kind:"FragmentSpread",name:"ContainerLogModalFragment"},{args:null,kind:"FragmentSpread",name:"SessionUsageMonitorFragment"},{args:null,kind:"FragmentSpread",name:"ContainerCommitModalFragment"},{args:null,kind:"FragmentSpread",name:"SessionIdleChecksNodeFragment"}],storageKey:null},{alias:"legacy_session",args:_,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[S,v,F,x,h,{args:null,kind:"FragmentSpread",name:"SessionIdleChecksFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,l,n],kind:"Operation",name:"SessionDetailContentQuery",selections:[{alias:"session",args:s,concreteType:"ComputeSessionNode",kind:"LinkedField",name:"compute_session_node",plural:!1,selections:[i,a,o,t,r,d,u,c,m,g,p,y,k,h,{alias:null,args:null,kind:"ScalarField",name:"status_info",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access_key",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"service_ports",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commit_status",storageKey:null},{alias:null,args:null,concreteType:"KernelConnection",kind:"LinkedField",name:"kernel_nodes",plural:!1,selections:[{alias:null,args:null,concreteType:"KernelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"KernelNode",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"container_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"agent_id",storageKey:null},i,a,{alias:null,args:null,kind:"ScalarField",name:"cluster_idx",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cluster_role",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"live_stat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"occupied_slots",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"priority",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"starts_at",storageKey:null}],storageKey:null},{alias:"legacy_session",args:_,concreteType:"ComputeSession",kind:"LinkedField",name:"compute_session",plural:!1,selections:[S,v,F,x,h,i],storageKey:null}]},params:{cacheID:"e0308612a16a49c1d3f8af5b039313ca",id:null,metadata:{},name:"SessionDetailContentQuery",operationKind:"query",text:'query SessionDetailContentQuery(\n  $id: GlobalIDField!\n  $uuid: UUID!\n  $project_id: UUID!\n) {\n  session: compute_session_node(id: $id, project_id: $project_id) {\n    id\n    row_id\n    name\n    project_id\n    user_id\n    resource_opts\n    status\n    vfolder_mounts\n    created_at\n    terminated_at\n    scaling_group\n    agent_ids\n    requested_slots\n    idle_checks @since(version: "24.12.0")\n    ...SessionStatusTagFragment\n    ...SessionActionButtonsFragment\n    ...SessionTypeTagFragment\n    ...EditableSessionNameFragment\n    ...SessionReservationFragment\n    ...ContainerLogModalFragment\n    ...SessionUsageMonitorFragment\n    ...ContainerCommitModalFragment\n    ...SessionIdleChecksNodeFragment\n  }\n  legacy_session: compute_session(id: $uuid) {\n    image\n    mounts\n    user_email\n    architecture\n    idle_checks @since(version: "24.09.0")\n    ...SessionIdleChecksFragment\n    id\n  }\n}\n\nfragment ContainerCommitModalFragment on ComputeSessionNode {\n  id\n  name\n  row_id\n}\n\nfragment ContainerLogModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  status\n  access_key\n  kernel_nodes {\n    edges {\n      node {\n        id\n        row_id\n        container_id\n        cluster_idx\n        cluster_role\n      }\n    }\n  }\n}\n\nfragment EditableSessionNameFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  priority\n  user_id\n  status\n}\n\nfragment SessionActionButtonsFragment on ComputeSessionNode {\n  id\n  row_id\n  type\n  status\n  access_key\n  service_ports\n  commit_status\n  ...TerminateSessionModalFragment\n  ...ContainerLogModalFragment\n  ...ContainerCommitModalFragment\n}\n\nfragment SessionIdleChecksFragment on ComputeSession {\n  id\n  idle_checks @since(version: "24.09.0")\n}\n\nfragment SessionIdleChecksNodeFragment on ComputeSessionNode {\n  id\n  idle_checks @since(version: "24.12.0")\n}\n\nfragment SessionReservationFragment on ComputeSessionNode {\n  id\n  created_at\n  starts_at\n  terminated_at\n}\n\nfragment SessionStatusTagFragment on ComputeSessionNode {\n  id\n  name\n  status\n  status_info\n}\n\nfragment SessionTypeTagFragment on ComputeSessionNode {\n  type\n}\n\nfragment SessionUsageMonitorFragment on ComputeSessionNode {\n  kernel_nodes {\n    edges {\n      node {\n        live_stat\n        occupied_slots\n        id\n      }\n    }\n  }\n}\n\nfragment TerminateSessionModalFragment on ComputeSessionNode {\n  id\n  row_id\n  name\n  scaling_group\n  kernel_nodes {\n    edges {\n      node {\n        container_id\n        agent_id\n        id\n      }\n    }\n  }\n}\n'}}}();s.hash="93950b0e90c5428c5cac947b9590f657";const i=s},17898:(e,n,l)=>{l.d(n,{RM:()=>t,WN:()=>o});var s=l(46976),i=l.n(s);function a(e){return null===e||void 0===e?"":"number"===typeof e||"boolean"===typeof e?String(e):`"${(e=i().isString(e)?e:JSON.stringify(e)).replace(/"/g,'""')}"`}const o=(e,n)=>{const l=URL.createObjectURL(e),s=document.createElement("a");s.href=l,s.download=n,s.click(),URL.revokeObjectURL(l)},t=(e,n,l)=>{const s=((e,n)=>{const l=i().map(e,(e=>i().omit(e,"__fragments","__fragmentOwner","__id"))),s=i().keys(l[0]),o=i().map(l,(e=>i().map(e,((e,l)=>{var s;return null!==n&&void 0!==n&&n[l]&&(null===(s=n[l])||void 0===s?void 0:s.call(n,e))||e})))).map((e=>e.map(a).join(","))).join("\n");return[s.map(a).join(","),o].join("\n")})(e,l),t=new Blob([s],{type:"text/csv"});o(t,`${n}.csv`)}}}]);
//# sourceMappingURL=624.c5880a6d.chunk.js.map