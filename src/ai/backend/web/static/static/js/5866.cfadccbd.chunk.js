"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[5866],{65881:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AllowedVfolderHostsWithPermissionFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"allowed_vfolder_hosts",storageKey:null}],type:"KeyPairResourcePolicy",abstractKey:null,hash:"88754f6c7c2bfa9a294612649a04c28d"},i=o},70515:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o=function(){var e=[{alias:null,args:null,concreteType:"PredefinedAtomicPermission",kind:"LinkedField",name:"vfolder_host_permissions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"vfolder_host_permission_list",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AllowedVfolderHostsWithPermissionQuery",selections:e,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"AllowedVfolderHostsWithPermissionQuery",selections:e},params:{cacheID:"c2191fa992017dd81dcc6b1d4ee384ed",id:null,metadata:{},name:"AllowedVfolderHostsWithPermissionQuery",operationKind:"query",text:"query AllowedVfolderHostsWithPermissionQuery {\n  vfolder_host_permissions {\n    vfolder_host_permission_list\n  }\n}\n"}}}();o.hash="57e7242aa0b6f250ac9b785bfe923b20";const i=o},37471:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KeypairResourcePolicyInfoModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"default_for_unspecified",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"total_resource_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_session_lifetime",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_concurrent_sessions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_containers_per_session",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_timeout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allowed_vfolder_hosts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_pending_session_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_concurrent_sftp_sessions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_pending_session_resource_slots",storageKey:null},{args:null,kind:"FragmentSpread",name:"AllowedVfolderHostsWithPermissionFragment"}],type:"KeyPairResourcePolicy",abstractKey:null,hash:"f60e76eb6ce221489d74a9da831b76dc"},i=o},54845:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteKeyPairResourcePolicy",kind:"LinkedField",name:"delete_keypair_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"KeypairResourcePolicyListMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"KeypairResourcePolicyListMutation",selections:n},params:{cacheID:"fe182323e364c317f26c7193239af22b",id:null,metadata:{},name:"KeypairResourcePolicyListMutation",operationKind:"mutation",text:"mutation KeypairResourcePolicyListMutation(\n  $name: String!\n) {\n  delete_keypair_resource_policy(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="5771729a12a204d27a9cdf5ad31e707f";const i=o},49602:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o=function(){var e={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"total_resource_slots",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"max_session_lifetime",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"max_concurrent_sessions",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"max_containers_per_session",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"idle_timeout",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"allowed_vfolder_hosts",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"max_pending_session_count",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"max_concurrent_sftp_sessions",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KeypairResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"KeyPairResourcePolicy",kind:"LinkedField",name:"keypair_resource_policies",plural:!0,selections:[e,n,l,o,i,a,s,r,t,{args:null,kind:"FragmentSpread",name:"KeypairResourcePolicySettingModalFragment"},{args:null,kind:"FragmentSpread",name:"KeypairResourcePolicyInfoModalFragment"},{args:null,kind:"FragmentSpread",name:"AllowedVfolderHostsWithPermissionFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"KeypairResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"KeyPairResourcePolicy",kind:"LinkedField",name:"keypair_resource_policies",plural:!0,selections:[e,n,l,o,i,a,s,r,t,{alias:null,args:null,kind:"ScalarField",name:"default_for_unspecified",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_pending_session_resource_slots",storageKey:null}],storageKey:null}]},params:{cacheID:"390cf077a35f68c93af458c60a6c4342",id:null,metadata:{},name:"KeypairResourcePolicyListQuery",operationKind:"query",text:'query KeypairResourcePolicyListQuery {\n  keypair_resource_policies {\n    name\n    total_resource_slots\n    max_session_lifetime\n    max_concurrent_sessions\n    max_containers_per_session\n    idle_timeout\n    allowed_vfolder_hosts\n    max_pending_session_count @since(version: "24.03.4")\n    max_concurrent_sftp_sessions @since(version: "24.03.4")\n    ...KeypairResourcePolicySettingModalFragment\n    ...KeypairResourcePolicyInfoModalFragment\n    ...AllowedVfolderHostsWithPermissionFragment\n  }\n}\n\nfragment AllowedVfolderHostsWithPermissionFragment on KeyPairResourcePolicy {\n  allowed_vfolder_hosts\n}\n\nfragment KeypairResourcePolicyInfoModalFragment on KeyPairResourcePolicy {\n  name\n  created_at\n  default_for_unspecified\n  total_resource_slots\n  max_session_lifetime\n  max_concurrent_sessions\n  max_containers_per_session\n  idle_timeout\n  allowed_vfolder_hosts\n  max_pending_session_count @since(version: "24.03.4")\n  max_concurrent_sftp_sessions @since(version: "24.03.4")\n  max_pending_session_resource_slots @since(version: "24.03.4")\n  ...AllowedVfolderHostsWithPermissionFragment\n}\n\nfragment KeypairResourcePolicySettingModalFragment on KeyPairResourcePolicy {\n  name\n  default_for_unspecified\n  total_resource_slots\n  max_session_lifetime\n  max_concurrent_sessions\n  max_containers_per_session\n  idle_timeout\n  allowed_vfolder_hosts\n  max_vfolder_count @deprecatedSince(version: "23.09.4")\n  max_pending_session_count @since(version: "24.03.4")\n  max_concurrent_sftp_sessions @since(version: "24.03.4")\n}\n'}}}();o.hash="a96a9de63550ac26899c02dc31666d2f";const i=o},74052:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateKeyPairResourcePolicy",kind:"LinkedField",name:"create_keypair_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"KeypairResourcePolicySettingModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"KeypairResourcePolicySettingModalCreateMutation",selections:n},params:{cacheID:"b52e3e869ccfabb393fb45a48074767e",id:null,metadata:{},name:"KeypairResourcePolicySettingModalCreateMutation",operationKind:"mutation",text:"mutation KeypairResourcePolicySettingModalCreateMutation(\n  $name: String!\n  $props: CreateKeyPairResourcePolicyInput!\n) {\n  create_keypair_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="7c4c5be505f02fa76e7b4db73a1f4b14";const i=o},92271:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"KeypairResourcePolicySettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"default_for_unspecified",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"total_resource_slots",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_session_lifetime",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_concurrent_sessions",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_containers_per_session",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"idle_timeout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allowed_vfolder_hosts",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_pending_session_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_concurrent_sftp_sessions",storageKey:null}],type:"KeyPairResourcePolicy",abstractKey:null,hash:"a69e5217597269e6b0c96d2410d9f85b"},i=o},1414:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyKeyPairResourcePolicy",kind:"LinkedField",name:"modify_keypair_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"KeypairResourcePolicySettingModalModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"KeypairResourcePolicySettingModalModifyMutation",selections:n},params:{cacheID:"72be648e07857dd6923d7c81f3f19948",id:null,metadata:{},name:"KeypairResourcePolicySettingModalModifyMutation",operationKind:"mutation",text:"mutation KeypairResourcePolicySettingModalModifyMutation(\n  $name: String!\n  $props: ModifyKeyPairResourcePolicyInput!\n) {\n  modify_keypair_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="8c99c8be8781f93fed817a67c86ea966";const i=o},3279:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteProjectResourcePolicy",kind:"LinkedField",name:"delete_project_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProjectResourcePolicyListMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProjectResourcePolicyListMutation",selections:n},params:{cacheID:"9f1218faa2207eff18f5a145f12f87ac",id:null,metadata:{},name:"ProjectResourcePolicyListMutation",operationKind:"mutation",text:"mutation ProjectResourcePolicyListMutation(\n  $name: String!\n) {\n  delete_project_resource_policy(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="2c5a20c6c463174bbfc726a27cdfdcac";const i=o},89756:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"max_network_count",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProjectResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"ProjectResourcePolicy",kind:"LinkedField",name:"project_resource_policies",plural:!0,selections:[e,n,l,o,i,a,{args:null,kind:"FragmentSpread",name:"ProjectResourcePolicySettingModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"ProjectResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"ProjectResourcePolicy",kind:"LinkedField",name:"project_resource_policies",plural:!0,selections:[e,n,l,o,i,a],storageKey:null}]},params:{cacheID:"6aea9773e50cdfa81562c7a8322c8faa",id:null,metadata:{},name:"ProjectResourcePolicyListQuery",operationKind:"query",text:'query ProjectResourcePolicyListQuery {\n  project_resource_policies {\n    id\n    name\n    created_at\n    max_vfolder_count @since(version: "23.09.6")\n    max_quota_scope_size @since(version: "23.09.2")\n    max_network_count @since(version: "24.12.0")\n    ...ProjectResourcePolicySettingModalFragment\n  }\n}\n\nfragment ProjectResourcePolicySettingModalFragment on ProjectResourcePolicy {\n  id\n  name\n  created_at\n  max_vfolder_count @since(version: "23.09.6")\n  max_quota_scope_size @since(version: "23.09.2")\n  max_network_count @since(version: "24.12.0")\n}\n'}}}();o.hash="4c7451b05822ee2f8c5e2c8d35ed57db";const i=o},46930:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateProjectResourcePolicy",kind:"LinkedField",name:"create_project_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProjectResourcePolicySettingModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProjectResourcePolicySettingModalCreateMutation",selections:n},params:{cacheID:"b94d7a4b8e8341df4e396784abba4203",id:null,metadata:{},name:"ProjectResourcePolicySettingModalCreateMutation",operationKind:"mutation",text:"mutation ProjectResourcePolicySettingModalCreateMutation(\n  $name: String!\n  $props: CreateProjectResourcePolicyInput!\n) {\n  create_project_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="c0683608e8a527146563ba5bd9fcad33";const i=o},27557:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProjectResourcePolicySettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_network_count",storageKey:null}],type:"ProjectResourcePolicy",abstractKey:null,hash:"949f6a93198024700bf15197f3b613f0"},i=o},57564:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyProjectResourcePolicy",kind:"LinkedField",name:"modify_project_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProjectResourcePolicySettingModalModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProjectResourcePolicySettingModalModifyMutation",selections:n},params:{cacheID:"aedc4eab77206f7ab189ccd3f2d938b3",id:null,metadata:{},name:"ProjectResourcePolicySettingModalModifyMutation",operationKind:"mutation",text:"mutation ProjectResourcePolicySettingModalModifyMutation(\n  $name: String!\n  $props: ModifyProjectResourcePolicyInput!\n) {\n  modify_project_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="3cd62195489eba58dd9693f1fc9df8ff";const i=o},71087:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"}],concreteType:"DeleteUserResourcePolicy",kind:"LinkedField",name:"delete_user_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserResourcePolicyListMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserResourcePolicyListMutation",selections:n},params:{cacheID:"7be7fa4bc2e6ce7666489318e415d769",id:null,metadata:{},name:"UserResourcePolicyListMutation",operationKind:"mutation",text:"mutation UserResourcePolicyListMutation(\n  $name: String!\n) {\n  delete_user_resource_policy(name: $name) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="5b565e4db37c96850ac85a92cd4e0290";const i=o},75420:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"max_session_count_per_model_session",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"max_customized_image_count",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"user_resource_policies",plural:!0,selections:[e,n,l,o,i,a,s,{args:null,kind:"FragmentSpread",name:"UserResourcePolicySettingModalFragment"}],storageKey:null}],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"UserResourcePolicyListQuery",selections:[{alias:null,args:null,concreteType:"UserResourcePolicy",kind:"LinkedField",name:"user_resource_policies",plural:!0,selections:[e,n,l,o,i,a,s],storageKey:null}]},params:{cacheID:"00b0583474f74c417b06d53115787d3b",id:null,metadata:{},name:"UserResourcePolicyListQuery",operationKind:"query",text:'query UserResourcePolicyListQuery {\n  user_resource_policies {\n    id\n    name\n    created_at\n    max_vfolder_count @since(version: "23.09.6")\n    max_session_count_per_model_session @since(version: "23.09.10")\n    max_quota_scope_size @since(version: "23.09.2")\n    max_customized_image_count @since(version: "24.03.0")\n    ...UserResourcePolicySettingModalFragment\n  }\n}\n\nfragment UserResourcePolicySettingModalFragment on UserResourcePolicy {\n  id\n  name\n  max_vfolder_count @since(version: "23.09.6")\n  max_session_count_per_model_session @since(version: "23.09.10")\n  max_quota_scope_size @since(version: "23.09.2")\n  max_customized_image_count @since(version: "24.03.0")\n}\n'}}}();o.hash="be57da0a1c15efb970cb1e828500e6dc";const i=o},28306:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"CreateUserResourcePolicy",kind:"LinkedField",name:"create_user_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserResourcePolicySettingModalCreateMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserResourcePolicySettingModalCreateMutation",selections:n},params:{cacheID:"129c4a570d8ae1a075d9aa9261094c48",id:null,metadata:{},name:"UserResourcePolicySettingModalCreateMutation",operationKind:"mutation",text:"mutation UserResourcePolicySettingModalCreateMutation(\n  $name: String!\n  $props: CreateUserResourcePolicyInput!\n) {\n  create_user_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="9c00928ca86d4779838243df247257aa";const i=o},26213:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UserResourcePolicySettingModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_vfolder_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_session_count_per_model_session",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_quota_scope_size",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_customized_image_count",storageKey:null}],type:"UserResourcePolicy",abstractKey:null,hash:"d93790c2b9fef92baa6999ce770cd9da"},i=o},38940:(e,n,l)=>{l.r(n),l.d(n,{default:()=>i});const o=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"name"},{defaultValue:null,kind:"LocalArgument",name:"props"}],n=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"props",variableName:"props"}],concreteType:"ModifyUserResourcePolicy",kind:"LinkedField",name:"modify_user_resource_policy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ok",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"msg",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"UserResourcePolicySettingModalModifyMutation",selections:n,type:"Mutations",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"UserResourcePolicySettingModalModifyMutation",selections:n},params:{cacheID:"f33ed379f4871e357183803b340a938a",id:null,metadata:{},name:"UserResourcePolicySettingModalModifyMutation",operationKind:"mutation",text:"mutation UserResourcePolicySettingModalModifyMutation(\n  $name: String!\n  $props: ModifyUserResourcePolicyInput!\n) {\n  modify_user_resource_policy(name: $name, props: $props) {\n    ok\n    msg\n  }\n}\n"}}}();o.hash="d50cbcfb63bfd30da81fea8968bb6436";const i=o},68707:(e,n,l)=>{l.d(n,{A:()=>p});var o=l(38053),i=l(58394),a=l(37090),s=l(79837),r=l(294),t=l(36256),u=l(64428),d=l.n(u),c=l(55202),m=l(90635),_=l(52426);const p=e=>{var n;let{open:l,onRequestClose:u,columns:p,hiddenColumnKeys:y,...g}=e;const v=(0,c.useRef)(null),{t:x}=(0,m.Bd)(),{token:f}=a.A.useToken(),k=d().map(p,(e=>{return"string"===typeof e.title?{label:e.title,value:d().toString(e.key)}:"object"===typeof e.title&&"props"in e.title?{label:(n=e.title,c.Children.map(n.props.children,(e=>{if("string"===typeof e)return e}))),value:d().toString(e.key)}:{label:void 0,value:d().toString(e.key)};var n}));return(0,_.jsx)(o.A,{title:x("table.SettingTable"),open:l,destroyOnClose:!0,centered:!0,onOk:()=>{var e;null===(e=v.current)||void 0===e||e.validateFields().then((e=>{u(e)})).catch((()=>{}))},onCancel:()=>{u()},...g,children:(0,_.jsxs)(s.A,{ref:v,preserve:!1,initialValues:{selectedColumnKeys:null===(n=d().map(k,"value"))||void 0===n?void 0:n.filter((e=>!d().includes(y,e)))},layout:"vertical",children:[(0,_.jsx)(s.A.Item,{name:"searchInput",label:x("table.SelectColumnToDisplay"),style:{marginBottom:0},children:(0,_.jsx)(r.A,{prefix:(0,_.jsx)(i.A,{}),style:{marginBottom:f.marginSM},placeholder:x("table.SearchTableColumn")})}),(0,_.jsx)(s.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>e.searchInput!==n.searchInput,children:e=>{let{getFieldValue:n}=e;const l=n("searchInput")?d().toLower(n("searchInput")):void 0,o=d().map(k,(e=>d().toLower(d().toString(e.label)).includes(l||"")?e:{...e,style:{display:"none"}}));return(0,_.jsx)(s.A.Item,{name:"selectedColumnKeys",style:{height:220,overflowY:"auto"},children:(0,_.jsx)(t.A.Group,{options:o,style:{flexDirection:"column"}})})}})]})})}},40648:(e,n,l)=>{l.d(n,{RM:()=>r,WN:()=>s});var o=l(64428),i=l.n(o);function a(e){return null===e||void 0===e?"":"number"===typeof e||"boolean"===typeof e?String(e):`"${(e=i().isString(e)?e:JSON.stringify(e)).replace(/"/g,'""')}"`}const s=(e,n)=>{const l=URL.createObjectURL(e),o=document.createElement("a");o.href=l,o.download=n,o.click(),URL.revokeObjectURL(l)},r=(e,n,l)=>{const o=((e,n)=>{const l=i().map(e,(e=>i().omit(e,"__fragments","__fragmentOwner","__id"))),o=i().keys(l[0]),s=i().map(l,(e=>i().map(e,((e,l)=>{var o;return null!==n&&void 0!==n&&n[l]&&(null===(o=n[l])||void 0===o?void 0:o.call(n,e))||e})))).map((e=>e.map(a).join(","))).join("\n");return[o.map(a).join(","),s].join("\n")})(e,l),r=new Blob([o],{type:"text/csv"});s(r,`${n}.csv`)}},92674:(e,n,l)=>{l.d(n,{a:()=>i});var o=l(79678);const i=e=>{const[n,l]=(0,o.q)(`hiddenColumnKeys.${e}`);return[n,l]}},95866:(e,n,l)=>{l.r(n),l.d(n,{default:()=>Ve});var o=l(48648),i=l(65079),a=l(93059),s=l(40648),r=l(81751),t=l(92674),u=l(54145),d=l(38053),c=l(38773),m=l(96520),_=l(36311),p=l(81679),y=l(55202);const g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm234.8 736.5L223.5 277.2c16-19.7 34-37.7 53.7-53.7l523.3 523.3c-16 19.6-34 37.7-53.7 53.7z"}}]},name:"stop",theme:"filled"};var v=l(42688),x=function(e,n){return y.createElement(v.A,(0,p.A)({},e,{ref:n,icon:g}))};const f=y.forwardRef(x);var k,h,P=l(37090),S=l(70441),j=l(64428),A=l.n(j),b=l(90635),F=l(18139),K=l(52426);const R=e=>{let{allowedVfolderHostsWithPermissionFrgmt:n}=e;const{t:o}=(0,b.Bd)(),{token:i}=P.A.useToken(),[a,s]=y.useState(),r=(0,F.useFragment)(void 0!==k?k:k=l(65881),n),t=JSON.parse((null===r||void 0===r?void 0:r.allowed_vfolder_hosts)||"{}"),{vfolder_host_permissions:p}=(0,F.useLazyLoadQuery)(void 0!==h?h:h=l(70515),{}),g=e=>{var n;return A().isEqual(new Set(t[e]),new Set((null===p||void 0===p?void 0:p.vfolder_host_permission_list)||null))?"green":(null===(n=t[e])||void 0===n?void 0:n.length)>0?"gold":"red"};return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(m.A,{gap:"xs",wrap:"wrap",children:A().map(A().keys(t),(e=>(0,K.jsxs)(u.A,{onClick:()=>{s(e)},type:"hover",children:[(0,K.jsx)(S.A,{color:g(e)}),"\xa0",e]},e)))}),(0,K.jsx)(d.A,{centered:!0,title:`${a} ${o("data.explorer.Permission")}`,open:!A().isEmpty(a),onCancel:()=>s(null),footer:null,children:(0,K.jsx)(c.A,{pagination:!1,size:"small",dataSource:A().map(null===p||void 0===p?void 0:p.vfolder_host_permission_list,(e=>({key:e,permission:e,isAllowed:A().includes(A().get(t,a||""),e)?(0,K.jsx)(m.A,{justify:"center",children:(0,K.jsx)(_.A,{style:{color:i.green5,fontSize:i.fontSizeLG}})}):(0,K.jsx)(m.A,{justify:"center",children:(0,K.jsx)(f,{style:{color:i.red5,fontSize:i.fontSizeLG}})})}))),columns:[{title:o("data.explorer.Permission"),dataIndex:"permission",key:"permission"},{title:o("data.explorer.Allowed"),dataIndex:"isAllowed",key:"isAllowed"}]})})]})};var M,C=l(52628),w=l(18959),L=l(69788),I=l(77397),q=l(52530),z=l.n(q);const D=(0,I.rU)((e=>{let{css:n}=e;return{description:n`
    .ant-descriptions-row {
      border: none !important;
    }
    .ant-descriptions-view > table {
      width: fit-content !important;
    }
  `}})),V=e=>{let{open:n,onRequestClose:o,resourcePolicyFrgmt:a,...s}=e;const{styles:t}=D(),{t:u}=(0,b.Bd)(),{token:c}=P.A.useToken(),_=(0,r.CX)(),p=(0,F.useFragment)(void 0!==M?M:M=l(37471),a),y=(0,i.LY)([{label:u("resourcePolicy.Name"),children:(0,K.jsx)(w.A.Text,{copyable:!0,children:null===p||void 0===p?void 0:p.name})},{label:u("resourcePolicy.DefaultForUnspecified"),children:(null===p||void 0===p?void 0:p.default_for_unspecified)||"\u221e"},{label:u("resourcePolicy.CreatedAt"),children:z()(null===p||void 0===p?void 0:p.created_at).format("lll")||"\u221e"},{label:u("resourcePolicy.ResourcePolicy"),children:null!==p&&void 0!==p&&p.total_resource_slots?A().isEmpty(JSON.parse(null===p||void 0===p?void 0:p.total_resource_slots))?"-":(0,K.jsx)(L.A,{className:t.description,size:"small",column:2,children:(0,K.jsx)(L.A.Item,{children:(0,K.jsx)(m.A,{direction:"column",align:"start",style:{width:"100%"},children:A().map(JSON.parse(null===p||void 0===p?void 0:p.total_resource_slots),((e,n)=>(0,K.jsx)(C.A,{type:n,value:A().toString(e)},n)))})})}):"-"},{label:u("resourcePolicy.StorageNodes"),children:p&&!A().isEmpty(JSON.parse((null===p||void 0===p?void 0:p.allowed_vfolder_hosts)||"{}"))?(0,K.jsx)(R,{allowedVfolderHostsWithPermissionFrgmt:p}):"-"},{label:u("resourcePolicy.Concurrency"),children:(null===p||void 0===p?void 0:p.max_concurrent_sessions)||"\u221e"},{label:u("resourcePolicy.ClusterSize"),children:null===p||void 0===p?void 0:p.max_containers_per_session},{label:u("resourcePolicy.IdleTimeout"),children:(null===p||void 0===p?void 0:p.idle_timeout)||"\u221e"},{label:u("session.MaxSessionLifetime"),children:(null===p||void 0===p?void 0:p.max_session_lifetime)||"\u221e"},(null===_||void 0===_?void 0:_.supports("max-pending-session-count"))&&{label:u("resourcePolicy.MaxPendingSessionCount"),children:A().isNull(null===p||void 0===p?void 0:p.max_pending_session_count)||A().isUndefined(null===p||void 0===p?void 0:p.max_pending_session_count)?"\u221e":null===p||void 0===p?void 0:p.max_pending_session_count},(null===_||void 0===_?void 0:_.supports("max-concurrent-sftp-sessions"))&&{label:u("resourcePolicy.MaxConcurrentSFTPSessions"),children:(null===p||void 0===p?void 0:p.max_concurrent_sftp_sessions)||"\u221e"},(null===_||void 0===_?void 0:_.supports("max-pending-session-resource-slots"))&&{label:u("resourcePolicy.MaxPendingSessionResourceSlots"),children:null!==p&&void 0!==p&&p.max_pending_session_resource_slots?A().isEmpty(JSON.parse(null===p||void 0===p?void 0:p.max_pending_session_resource_slots))?"-":(0,K.jsx)(L.A,{className:t.description,size:"small",column:2,children:(0,K.jsx)(L.A.Item,{children:(0,K.jsx)(m.A,{direction:"column",align:"start",children:A().map(JSON.parse(null===p||void 0===p?void 0:p.max_pending_session_resource_slots),((e,n)=>(0,K.jsx)(C.A,{type:n,value:A().toString(e)},n)))})})}):"-"}]);return(0,K.jsx)(d.A,{open:n,onCancel:()=>o(),footer:null,title:`${u("resourcePolicy.ResourcePolicy")}: '${null===p||void 0===p?void 0:p.name}'`,centered:!0,width:c.screenSM,...s,children:(0,K.jsx)(L.A,{bordered:!0,column:1,items:y})})};var T=l(78909),N=l(49965);const U=e=>{let{...n}=e;const l=(0,T._V)();return(0,K.jsx)(N.A,{...n,children:A().map(l,(e=>(0,K.jsx)(N.A.Option,{value:e,children:e},e)))})};var E=l(7247),O=l(79837),$=l(36256);const H=e=>{let{name:n,unlimitedValue:l,disableUnlimited:o,children:i,...a}=e;const{t:s}=(0,b.Bd)(),[r,t]=(0,y.useState)(!1),u=O.A.useFormInstance();(0,y.useEffect)((()=>{const e=u.getFieldValue(n);t(e===l)}),[u,n,l]);const d=(0,y.isValidElement)(i)?(0,y.cloneElement)(i,{disabled:r}):i,c=r&&(0,y.isValidElement)(i)?(0,y.cloneElement)(i,{value:void 0,disabled:r}):void 0;return(0,K.jsxs)(m.A,{direction:"column",align:"start",children:[(0,K.jsx)(O.A.Item,{style:{margin:0},name:n,hidden:r,...a,children:d}),r?(0,K.jsx)(O.A.Item,{style:{margin:0},...a,children:c}):null,(0,K.jsx)($.A,{checked:r,disabled:o,onChange:e=>{const o=e.target.checked;t(o),o?u.setFieldValue(n,l):u.resetFields([n])},children:s("resourcePolicy.Unlimited")})]})};var B,Q,J,X=l(58915),W=l(24480),G=l(294),Y=l(86663),Z=l(70554),ee=l(4828),ne=l(56222),le=l(23917);const oe=e=>{let{existingPolicyNames:n,keypairResourcePolicyFrgmt:o=null,onRequestClose:s,...t}=e;const{t:u}=(0,b.Bd)(),{message:c}=W.A.useApp(),{token:_}=P.A.useToken(),p=(0,y.useRef)(null),[g]=(0,T.bL)(),{mergedResourceSlots:v}=(0,T.Hv)(),x=(0,r.CX)(),f=null===x||void 0===x?void 0:x.supports("deprecated-max-vfolder-count-in-keypair-resource-policy"),k=(0,F.useFragment)(void 0!==B?B:B=l(92271),o),[h,S]=(0,F.useMutation)(void 0!==Q?Q:Q=l(74052)),[j,R]=(0,F.useMutation)(void 0!==J?J:J=l(1414)),M=(0,y.useMemo)((()=>{var e,n,l,o,a,s,r,t,u,d;const c=JSON.parse(null!==(e=null===k||void 0===k?void 0:k.allowed_vfolder_hosts)&&void 0!==e?e:"{}"),m=JSON.parse(null!==(n=null===k||void 0===k?void 0:k.total_resource_slots)&&void 0!==n?n:"{}");if(null!==m&&void 0!==m&&m.mem){var _,p,y;let e=(0,i.mv)(null===m||void 0===m?void 0:m.mem,"auto",2,!0);""!==(null===(_=e)||void 0===_?void 0:_.unit)&&"k"!==(null===(p=e)||void 0===p?void 0:p.unit)||(e=(0,i.mv)(null===m||void 0===m?void 0:m.mem,"m",3,!0)),m.mem=(null===(y=e)||void 0===y?void 0:y.value)||"0g"}return{name:null!==(l=null===k||void 0===k?void 0:k.name)&&void 0!==l?l:"",default_for_unspecified:(null===k||void 0===k?void 0:k.default_for_unspecified)||"UNLIMITED",total_resource_slots:null!==m&&void 0!==m?m:{},max_session_lifetime:null!==(o=null===k||void 0===k?void 0:k.max_session_lifetime)&&void 0!==o?o:0,max_concurrent_sessions:null!==(a=null===k||void 0===k?void 0:k.max_concurrent_sessions)&&void 0!==a?a:0,max_containers_per_session:null!==(s=null===k||void 0===k?void 0:k.max_containers_per_session)&&void 0!==s?s:1,idle_timeout:null!==(r=null===k||void 0===k?void 0:k.idle_timeout)&&void 0!==r?r:0,allowed_vfolder_hosts:null!==(t=A().keys(c))&&void 0!==t?t:[],max_pending_session_count:null!==(u=null===k||void 0===k?void 0:k.max_pending_session_count)&&void 0!==u?u:null,max_concurrent_sftp_sessions:null!==(d=null===k||void 0===k?void 0:k.max_concurrent_sftp_sessions)&&void 0!==d?d:0}}),[k]);return(0,K.jsx)(d.A,{width:800,title:u(null===k?"resourcePolicy.CreateResourcePolicy":"resourcePolicy.UpdateResourcePolicy"),onOk:()=>{var e;return null===p||void 0===p||null===(e=p.current)||void 0===e?void 0:e.validateFields().then((e=>{const n=A().mapValues(A().pickBy(e.total_resource_slots,(e=>!A().isUndefined(e))),((e,n)=>{var l;return A().includes(n,"mem")?null===(l=(0,i.mv)(e,"",0))||void 0===l?void 0:l.numberFixed:e})),l=A().fromPairs(A().map(e.allowed_vfolder_hosts,(n=>{var l;if(null!==M&&void 0!==M&&null!==(l=M.allowed_vfolder_hosts)&&void 0!==l&&l.includes(n)){return[n,JSON.parse((null===k||void 0===k?void 0:k.allowed_vfolder_hosts)||"{}")[n]]}return[n,A().get(e,n,["create-vfolder","modify-vfolder","delete-vfolder","mount-in-session","upload-file","download-file","invite-others","set-user-specific-permission"])]}))),{name:o,...a}=e,r={...A().omit(a,"parsedTotalResourceSlots"),total_resource_slots:JSON.stringify(n),allowed_vfolder_hosts:JSON.stringify(l)};f||(r.max_vfolder_count=null===e||void 0===e?void 0:e.max_vfolder_count),x.supports("max-pending-session-count")||null===r||void 0===r||delete r.max_pending_session_count,x.supports("max-concurrent-sftp-sessions")||null===r||void 0===r||delete r.max_concurrent_sftp_sessions,null===k?h({variables:{name:null===e||void 0===e?void 0:e.name,props:r},onCompleted:(e,n)=>{var l,o,i,a;return(null!==e&&void 0!==e&&null!==(l=e.create_keypair_resource_policy)&&void 0!==l&&l.ok||null===(o=e.create_keypair_resource_policy)||void 0===o||!o.msg)&&(null!==e&&void 0!==e&&null!==(i=e.create_keypair_resource_policy)&&void 0!==i&&i.ok||null===(a=e.create_keypair_resource_policy)||void 0===a||!a.msg)?(c.success(u("resourcePolicy.SuccessfullyCreated")),void s(!0)):(c.error(e.create_keypair_resource_policy.msg),void s(!1))},onError(e){c.error((null===e||void 0===e?void 0:e.message)||u("resourcePolicy.CannotCreateResourcePolicy"))}}):j({variables:{name:null===e||void 0===e?void 0:e.name,props:r},onCompleted:(e,n)=>{var l,o;return null!==e&&void 0!==e&&null!==(l=e.modify_keypair_resource_policy)&&void 0!==l&&l.ok||null===(o=e.modify_keypair_resource_policy)||void 0===o||!o.msg?n&&n.length>0?(n.forEach((e=>c.error(e.message))),void s(!1)):(c.success(u("resourcePolicy.SuccessfullyUpdated")),void s(!0)):(c.error(e.modify_keypair_resource_policy.msg),void s(!1))},onError(e){c.error((null===e||void 0===e?void 0:e.message)||u("resourcePolicy.CannotUpdateResourcePolicy"))}})})).catch((()=>{}))},onCancel:()=>s(),destroyOnClose:!0,confirmLoading:S||R,...t,children:(0,K.jsxs)(O.A,{requiredMark:!1,ref:p,layout:"vertical",initialValues:M,preserve:!1,children:[(0,K.jsx)(O.A.Item,{label:u("resourcePolicy.Name"),name:"name",required:!0,rules:[{required:!0,message:u("data.explorer.ValueRequired")},{max:64},{validator:(e,l)=>!k&&null!==n&&void 0!==n&&n.includes(l)?Promise.reject(u("resourcePolicy.ResourcePolicyNameAlreadyExists")):Promise.resolve()}],children:(0,K.jsx)(G.A,{disabled:!!k})}),(0,K.jsx)(O.A.Item,{label:(0,K.jsxs)(m.A,{gap:"xxs",children:[(0,K.jsx)(w.A.Text,{children:u("resourcePolicy.DefaultForUnspecified")}),(0,K.jsx)(Y.A,{title:(0,K.jsxs)(K.Fragment,{children:[u("resourcePolicy.DefaultForUnspecifiedTooltipDesc1"),(0,K.jsx)("br",{}),(0,K.jsx)("br",{}),u("resourcePolicy.DefaultForUnspecifiedTooltipDesc2")]}),placement:"right",children:(0,K.jsx)(X.A,{style:{color:_.colorTextSecondary,cursor:"pointer"}})})]}),name:"default_for_unspecified",children:(0,K.jsx)(N.A,{options:[{key:"unlimited",label:"UNLIMITED",value:"UNLIMITED"},{key:"limited",label:"LIMITED",value:"LIMITED"}]})}),(0,K.jsx)(O.A.Item,{label:u("resourcePolicy.ResourcePolicy"),required:!0,children:(0,K.jsx)(Z.A,{children:A().chain(g).keys().chunk(3).map(((e,n)=>(0,K.jsx)(ee.A,{gutter:[24,16],children:A().map(e,(e=>{var n,l;return(0,K.jsx)(ne.A,{xs:{span:12},md:{span:8},style:{alignSelf:"end",marginBottom:_.marginLG},children:(0,K.jsx)(H,{unlimitedValue:void 0,label:(null===(n=A().get(v,e))||void 0===n?void 0:n.description)||e,name:["total_resource_slots",e],rules:[{validator:(n,l)=>A().includes(e,"mem")&&l&&(0,i.mv)(l,"p").number>(0,i.mv)("300p","p").number?Promise.reject(new Error(u("resourcePolicy.MemorySizeExceedsLimit"))):Promise.resolve()}],style:{margin:0,width:"100%"},children:A().includes(e,"mem")?(0,K.jsx)(E.A,{style:{width:"100%"}}):(0,K.jsx)(le.A,{min:0,max:a.d7,step:A().includes(e,".shares")?.1:1,addonAfter:null===(l=A().get(v,e))||void 0===l?void 0:l.display_unit,style:{width:"100%"}})})},e)}))},n))).value()})}),(0,K.jsx)(O.A.Item,{label:u("resourcePolicy.Sessions"),required:!0,children:(0,K.jsx)(Z.A,{children:(0,K.jsxs)(ee.A,{gutter:[24,16],style:{alignSelf:"end"},children:[(0,K.jsx)(ne.A,{xs:{span:12},md:{span:8},style:{alignSelf:"end"},children:(0,K.jsx)(H,{label:u("resourcePolicy.ClusterSize"),name:"max_containers_per_session",style:{margin:0,width:"100%"},disableUnlimited:!0,children:(0,K.jsx)(le.A,{min:0,max:a.tu,style:{width:"100%"}})})}),(0,K.jsx)(ne.A,{xs:{span:12},md:{span:8},style:{alignSelf:"end"},children:(0,K.jsx)(H,{name:"max_session_lifetime",unlimitedValue:0,label:u("resourcePolicy.MaxSessionLifetime"),style:{margin:0,width:"100%"},children:(0,K.jsx)(le.A,{min:0,max:100,style:{width:"100%"}})})}),x.supports("max-pending-session-count")?(0,K.jsx)(ne.A,{xs:{span:12},md:{span:8},style:{alignSelf:"end"},children:(0,K.jsx)(H,{name:"max_pending_session_count",unlimitedValue:null,label:u("resourcePolicy.MaxPendingSessionCount"),style:{margin:0,width:"100%"},children:(0,K.jsx)(le.A,{min:0,max:a.tu,style:{width:"100%"}})})}):null,(0,K.jsx)(ne.A,{xs:{span:12},md:{span:8},style:{alignSelf:"end"},children:(0,K.jsx)(H,{name:"max_concurrent_sessions",label:u("resourcePolicy.ConcurrentJobs"),unlimitedValue:0,style:{margin:0,width:"100%"},children:(0,K.jsx)(le.A,{min:0,max:a.tu,style:{width:"100%"}})})}),(0,K.jsx)(ne.A,{xs:{span:12},md:{span:8},style:{alignSelf:"end"},children:(0,K.jsx)(H,{name:"idle_timeout",unlimitedValue:0,label:u("resourcePolicy.IdleTimeoutSec"),style:{margin:0,width:"100%"},children:(0,K.jsx)(le.A,{min:0,max:Number.MAX_SAFE_INTEGER,style:{width:"100%"}})})}),x.supports("max-concurrent-sftp-sessions")?(0,K.jsx)(ne.A,{xs:{span:12},md:{span:8},style:{alignSelf:"end"},children:(0,K.jsx)(H,{name:"max_concurrent_sftp_sessions",unlimitedValue:0,label:u("resourcePolicy.MaxConcurrentSFTPSessions"),style:{margin:0,width:"100%"},children:(0,K.jsx)(le.A,{min:0,max:a.tu,style:{width:"100%"}})})}):null]})})}),(0,K.jsx)(O.A.Item,{label:u("resourcePolicy.Folders"),required:!0,children:(0,K.jsxs)(Z.A,{children:[(0,K.jsx)(O.A.Item,{label:u("resourcePolicy.AllowedHosts"),name:"allowed_vfolder_hosts",children:(0,K.jsx)(U,{mode:"multiple"})}),f?void 0:(0,K.jsx)(O.A.Item,{label:u("credential.Max#"),name:"max_vfolder_count",children:(0,K.jsx)(le.A,{min:0,max:50})})]})})]})})};var ie,ae,se=l(68707),re=l(42519),te=l(50473),ue=l(42896),de=l(72804),ce=l(24262),me=l(30978),_e=l(82844),pe=l(90086),ye=l(16672),ge=l(13128),ve=l(56909);const xe=e=>{const{token:n}=P.A.useToken(),{t:o}=(0,b.Bd)(),{message:u,modal:d}=W.A.useApp(),[c,_]=(0,r.Tw)("initial-fetch"),[p,g]=(0,y.useTransition)(),[v,{toggle:x}]=(0,_e.A)(),[f,k]=(0,y.useState)(!1),[h,S]=(0,y.useState)(),[j,M]=(0,y.useState)(),[L,I]=(0,y.useState)(null),[q,z]=(0,y.useTransition)(),D=(0,r.CX)(),{keypair_resource_policies:T}=(0,F.useLazyLoadQuery)(void 0!==ie?ie:ie=l(49602),{},{fetchPolicy:"initial-fetch"===c?"store-and-network":"network-only",fetchKey:c}),[N,U]=(0,F.useMutation)(void 0!==ae?ae:ae=l(54845)),E=(0,i.LY)([{title:o("resourcePolicy.Name"),dataIndex:"name",key:"name",fixed:"left",sorter:(e,n)=>(0,i._f)(null===e||void 0===e?void 0:e.name,null===n||void 0===n?void 0:n.name)},{title:o("resourcePolicy.ResourcePolicy"),dataIndex:"total_resource_slots",key:"total_resource_slots",render:(e,n)=>(0,K.jsx)(m.A,{gap:"xxs",children:A().isEmpty(JSON.parse((null===n||void 0===n?void 0:n.total_resource_slots)||"{}"))?"-":A().map(JSON.parse((null===n||void 0===n?void 0:n.total_resource_slots)||"{}"),((e,n)=>(0,K.jsx)(C.A,{type:n,value:A().toString(e)},n)))})},{title:o("resourcePolicy.Concurrency"),dataIndex:"max_concurrent_sessions",key:"max_concurrent_sessions",sorter:(e,n)=>null!==e&&void 0!==e&&e.max_concurrent_sessions&&null!==n&&void 0!==n&&n.max_concurrent_sessions?e.max_concurrent_sessions-n.max_concurrent_sessions:1,render:e=>e||"\u221e"},{title:o("resourcePolicy.ClusterSize"),dataIndex:"max_containers_per_session",key:"max_containers_per_session",sorter:(e,n)=>null!==e&&void 0!==e&&e.max_containers_per_session&&null!==n&&void 0!==n&&n.max_containers_per_session?e.max_containers_per_session-n.max_containers_per_session:1,render:e=>e===a.tu?"\u221e":e},{title:o("resourcePolicy.IdleTimeout"),dataIndex:"idle_timeout",key:"idle_timeout",sorter:(e,n)=>null!==e&&void 0!==e&&e.idle_timeout&&null!==n&&void 0!==n&&n.idle_timeout?e.idle_timeout-n.idle_timeout:1,render:e=>e||"\u221e"},{title:o("session.MaxSessionLifetime"),dataIndex:"max_session_lifetime",key:"max_session_lifetime",sorter:(e,n)=>(0,i.Oe)(null===e||void 0===e?void 0:e.max_session_lifetime,null===n||void 0===n?void 0:n.max_session_lifetime,0),render:e=>e||"\u221e"},{title:o("resourcePolicy.StorageNodes"),dataIndex:"allowed_vfolder_hosts",key:"allowed_vfolder_hosts",render:(e,n)=>(0,K.jsx)(K.Fragment,{children:e&&n?(0,K.jsx)(R,{allowedVfolderHostsWithPermissionFrgmt:n}):"-"})},(null===D||void 0===D?void 0:D.supports("max-pending-session-count"))&&{title:o("resourcePolicy.MaxPendingSessionCount"),dataIndex:"max_pending_session_count",key:"max_pending_session_count",sorter:(e,n)=>(0,i.Oe)(null===e||void 0===e?void 0:e.max_pending_session_count,null===n||void 0===n?void 0:n.max_pending_session_count,0),render:e=>e||"\u221e"},(null===D||void 0===D?void 0:D.supports("max-concurrent-sftp-sessions"))&&{title:o("resourcePolicy.MaxConcurrentSFTPSessions"),dataIndex:"max_concurrent_sftp_sessions",key:"max_concurrent_sftp_sessions",sorter:(e,n)=>(0,i.Oe)(null===e||void 0===e?void 0:e.max_concurrent_sftp_sessions,null===n||void 0===n?void 0:n.max_concurrent_sftp_sessions,0),render:e=>e||"\u221e"},{title:o("general.Control"),key:"control",fixed:"right",render:(e,l)=>(0,K.jsxs)(m.A,{direction:"row",align:"stretch",children:[(0,K.jsx)(pe.Ay,{type:"text",size:"large",icon:(0,K.jsx)(re.A,{style:{color:n.colorSuccess}}),onClick:()=>{z((()=>{I(l||null)}))}}),(0,K.jsx)(pe.Ay,{type:"text",size:"large",icon:(0,K.jsx)(te.A,{}),style:{color:n.colorInfo},onClick:()=>{M(l)}}),(0,K.jsx)(pe.Ay,{type:"text",size:"large",icon:(0,K.jsx)(ue.A,{style:{color:n.colorError}}),loading:U&&h===(null===l||void 0===l?void 0:l.name)+c,disabled:U&&h!==(null===l||void 0===l?void 0:l.name)+c,onClick:()=>{d.confirm({title:o("resourcePolicy.DeletePolicy"),content:(0,K.jsxs)(m.A,{direction:"column",align:"stretch",children:[(0,K.jsxs)(m.A,{gap:"xxs",children:[(0,K.jsx)(w.A.Text,{children:o("resourcePolicy.DeletePolicyDescription")}),(0,K.jsx)(w.A.Text,{strong:!0,children:null===l||void 0===l?void 0:l.name})]}),(0,K.jsx)("br",{}),(0,K.jsx)(w.A.Text,{type:"danger",children:o("dialog.warning.CannotBeUndone")})]}),okButtonProps:{danger:!0},okText:o("button.Delete"),onOk:()=>{null!==l&&void 0!==l&&l.name&&(S(l.name+c),N({variables:{name:l.name},onCompleted:(e,n)=>{var l,i;if(null!==e&&void 0!==e&&null!==(l=e.delete_keypair_resource_policy)&&void 0!==l&&l.ok)if(n&&(null===n||void 0===n?void 0:n.length)>0){const e=A().map(n,(e=>e.message));for(const n of e)u.error(n)}else g((()=>_())),u.success(o("resourcePolicy.SuccessfullyDeleted"));else u.error(null===e||void 0===e||null===(i=e.delete_keypair_resource_policy)||void 0===i?void 0:i.msg)},onError(e){u.error(null===e||void 0===e?void 0:e.message)}}))}})}})]})}]),[O,$]=(0,t.a)("KeypairResourcePolicyList");return(0,K.jsxs)(m.A,{direction:"column",align:"stretch",...e,children:[(0,K.jsxs)(m.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:n.paddingContentVertical,paddingLeft:n.paddingContentHorizontalSM,paddingRight:n.paddingContentHorizontalSM},children:[(0,K.jsx)(m.A,{direction:"column",align:"start",children:(0,K.jsx)(ye.A,{menu:{items:[{key:"exportCSV",label:o("resourcePolicy.ExportCSV"),onClick:()=>{(()=>{if(!T)return void u.error(o("resourcePolicy.NoDataToExport"));const e=A().without(A().map(E,(e=>A().toString(e.key))),"control"),n=A().map(T,(n=>A().pick(n,e.map((e=>e)))));(0,s.RM)(n,"keypair_resource_policies",{total_resource_slots:e=>A().isEmpty(e)?"-":JSON.stringify(e),max_concurrent_sessions:e=>e||"-",max_containers_per_session:e=>e===a.tu?"\u221e":e,idle_timeout:e=>e||"-",max_session_lifetime:e=>e||"-",allowed_vfolder_hosts:e=>A().isEmpty(e)?"-":A().keys(JSON.parse(e)).join(", ")})})()}}]},children:(0,K.jsx)(pe.Ay,{type:"link",style:{padding:0},onClick:e=>e.preventDefault(),children:(0,K.jsxs)(ge.A,{style:{color:n.colorLinkHover},children:[o("resourcePolicy.Tools"),(0,K.jsx)(de.A,{})]})})})}),(0,K.jsx)(m.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:(0,K.jsxs)(m.A,{gap:"xs",children:[(0,K.jsx)(pe.Ay,{icon:(0,K.jsx)(ce.A,{}),loading:p,onClick:()=>{g((()=>_()))}}),(0,K.jsx)(pe.Ay,{type:"primary",icon:(0,K.jsx)(me.A,{}),onClick:()=>{k(!0)},children:o("button.Create")})]})})]}),(0,K.jsx)(ve.A,{columns:A().filter(E,(e=>!A().includes(O,A().toString(null===e||void 0===e?void 0:e.key)))),dataSource:T,rowKey:"name",scroll:{x:"max-content"},pagination:!1,showSorterTooltip:!1}),(0,K.jsx)(m.A,{justify:"end",style:{padding:n.paddingXXS},children:(0,K.jsx)(pe.Ay,{type:"text",icon:(0,K.jsx)(te.A,{}),onClick:()=>{x()}})}),(0,K.jsx)(se.A,{open:v,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&$(A().difference(E.map((e=>A().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),x()},columns:E,hiddenColumnKeys:O}),(0,K.jsx)(y.Suspense,{children:(0,K.jsx)(oe,{existingPolicyNames:A().map(T,(e=>(null===e||void 0===e?void 0:e.name)||"")),open:!!j||f,keypairResourcePolicyFrgmt:j||null,onRequestClose:e=>{M(null),k(!1),e&&g((()=>{_()}))}})}),(0,K.jsx)(V,{open:!!L||q,onRequestClose:()=>{I(null)},loading:q,resourcePolicyFrgmt:L||null})]})};var fe,ke,he,Pe=l(43299);const Se=e=>{let{existingPolicyNames:n,projectResourcePolicyFrgmt:o=null,onRequestClose:s,...t}=e;const{t:u}=(0,b.Bd)(),{token:c}=P.A.useToken(),{message:_}=W.A.useApp(),p=(0,y.useRef)(null),g=(0,r.CX)(),v=null===g||void 0===g?void 0:g.supports("max-vfolder-count-in-user-and-project-resource-policy"),x=null===g||void 0===g?void 0:g.supports("max-quota-scope-size"),f=null===g||void 0===g?void 0:g.supports("max_network_count"),k=(0,F.useFragment)(void 0!==fe?fe:fe=l(27557),o),[h,S]=(0,F.useMutation)(void 0!==ke?ke:ke=l(46930)),[j,R]=(0,F.useMutation)(void 0!==he?he:he=l(57564)),M=(0,y.useMemo)((()=>{let e={};null===k&&(e={max_vfolder_count:0,max_quota_scope_size:-1,max_network_count:-1});let n=null===k||void 0===k?void 0:k.max_quota_scope_size;return n=A().isUndefined(n)||-1===n?-1:(0,i.wb)(n),{...e,...k,max_quota_scope_size:n}}),[k,null===k||void 0===k?void 0:k.max_vfolder_count,null===k||void 0===k?void 0:k.max_quota_scope_size]);return(0,K.jsxs)(d.A,{title:u(null===k?"resourcePolicy.CreateResourcePolicy":"resourcePolicy.UpdateResourcePolicy"),onOk:e=>{var n;return null===p||void 0===p||null===(n=p.current)||void 0===n?void 0:n.validateFields().then((e=>{const n={max_vfolder_count:(null===e||void 0===e?void 0:e.max_vfolder_count)||0,max_quota_scope_size:-1===(null===e||void 0===e?void 0:e.max_quota_scope_size)?-1:(0,i._S)(null===e||void 0===e?void 0:e.max_quota_scope_size),max_network_count:(null===e||void 0===e?void 0:e.max_network_count)||-1};v||delete n.max_vfolder_count,x||delete n.max_quota_scope_size,f||delete n.max_network_count,null===k?h({variables:{name:null===e||void 0===e?void 0:e.name,props:n},onCompleted(e,n){var l,o;null===e||void 0===e||null===(l=e.create_project_resource_policy)||void 0===l||!l.ok||n?(_.error((null===e||void 0===e||null===(o=e.create_project_resource_policy)||void 0===o?void 0:o.msg)||u("resourcePolicy.CannotCreateResourcePolicy")),s()):(_.success(u("storageHost.ResourcePolicySuccessfullyUpdated")),s(!0))},onError(e){_.error((null===e||void 0===e?void 0:e.message)||u("resourcePolicy.CannotCreateResourcePolicy"))}}):j({variables:{name:null===e||void 0===e?void 0:e.name,props:n},onCompleted(e,n){var l,o;null===e||void 0===e||null===(l=e.modify_project_resource_policy)||void 0===l||!l.ok||n?(_.error((null===e||void 0===e||null===(o=e.modify_project_resource_policy)||void 0===o?void 0:o.msg)||u("resourcePolicy.CannotUpdateResourcePolicy")),s()):(_.success(u("storageHost.ResourcePolicySuccessfullyUpdated")),s(!0))},onError(e){_.error((null===e||void 0===e?void 0:e.message)||u("resourcePolicy.CannotUpdateResourcePolicy"))}})})).catch((()=>{}))},onCancel:()=>s(),destroyOnClose:!0,confirmLoading:S||R,...t,children:[(0,K.jsx)(Pe.A,{message:u("storageHost.BeCarefulToSetProjectResourcePolicy"),type:"warning",showIcon:!0,style:{marginBottom:c.marginMD}}),(0,K.jsxs)(O.A,{ref:p,layout:"vertical",requiredMark:"optional",initialValues:M,preserve:!1,children:[(0,K.jsx)(O.A.Item,{label:u("resourcePolicy.Name"),name:"name",required:!0,rules:[{required:!0,message:u("data.explorer.ValueRequired")},{max:255},{validator:(e,l)=>!k&&null!==n&&void 0!==n&&n.includes(l)?Promise.reject(u("resourcePolicy.ResourcePolicyNameAlreadyExists")):Promise.resolve()}],children:(0,K.jsx)(G.A,{disabled:!!k})}),(0,K.jsxs)(m.A,{direction:"column",align:"stretch",gap:"md",style:{marginBottom:c.marginMD},children:[v?(0,K.jsx)(H,{name:"max_vfolder_count",unlimitedValue:0,label:u("resourcePolicy.MaxFolderCount"),style:{width:"100%",margin:0},children:(0,K.jsx)(le.A,{min:0,max:a.tu,style:{width:"100%"}})}):null,x?(0,K.jsx)(H,{name:"max_quota_scope_size",unlimitedValue:-1,label:u("storageHost.MaxFolderSize"),style:{width:"100%",margin:0},children:(0,K.jsx)(le.A,{min:0,max:Math.floor(Number.MAX_SAFE_INTEGER/Math.pow(10,9)),addonAfter:"GB",style:{width:"100%"}})}):null,f?(0,K.jsx)(H,{name:"max_network_count",unlimitedValue:-1,label:u("resourcePolicy.MaxNetworkCount"),style:{width:"100%",margin:0},children:(0,K.jsx)(le.A,{min:0,max:a.tu,style:{width:"100%"}})}):null]})]})]})};var je,Ae,be=l(39979),Fe=l(27283);const Ke=()=>{const{token:e}=P.A.useToken(),{t:n}=(0,b.Bd)(),[o,a]=(0,y.useTransition)(),[u,d]=(0,r.Tw)("initial-fetch"),[c,_]=(0,y.useState)(!1),[p,{toggle:g}]=(0,_e.A)(),[v,x]=(0,y.useState)(),[f,k]=(0,y.useState)(),h=(0,r.CX)(),S=null===h||void 0===h?void 0:h.supports("max-vfolder-count-in-user-and-project-resource-policy"),j=null===h||void 0===h?void 0:h.supports("max-quota-scope-size"),R=null===h||void 0===h?void 0:h.supports("max_network_count"),{project_resource_policies:M}=(0,F.useLazyLoadQuery)(void 0!==je?je:je=l(89756),{},{fetchPolicy:"initial-fetch"===u?"store-and-network":"network-only",fetchKey:u}),[C,w]=(0,F.useMutation)(void 0!==Ae?Ae:Ae=l(3279)),L=(0,i.LY)([{title:n("resourcePolicy.Name"),dataIndex:"name",key:"name",fixed:"left",sorter:(e,n)=>(0,i._f)(null===e||void 0===e?void 0:e.name,null===n||void 0===n?void 0:n.name)},S?{title:n("resourcePolicy.MaxVFolderCount"),dataIndex:"max_vfolder_count",key:"max_vfolder_count",render:e=>0===A().toNumber(e)?"\u221e":e,sorter:(e,n)=>(0,i.Oe)(null===e||void 0===e?void 0:e.max_vfolder_count,null===n||void 0===n?void 0:n.max_vfolder_count,0)}:{},j?{title:n("resourcePolicy.MaxQuotaScopeSize"),dataIndex:"max_quota_scope_size",key:"max_quota_scope_size",render:e=>-1===e?"\u221e":(0,i.wb)(e),sorter:(e,n)=>(0,i.Oe)(null===e||void 0===e?void 0:e.max_quota_scope_size,null===n||void 0===n?void 0:n.max_quota_scope_size,-1)}:{},R?{title:n("resourcePolicy.MaxNetworkCount"),dataIndex:"max_network_count",key:"max_network_count",render:e=>-1===e?"\u221e":e,sorter:(e,n)=>!0}:{},{title:"ID",dataIndex:"id",key:"id",sorter:(e,n)=>(0,i._f)(null===e||void 0===e?void 0:e.id,null===n||void 0===n?void 0:n.id)},{title:n("resourcePolicy.CreatedAt"),dataIndex:"created_at",key:"created_at",render:e=>z()(e).format("lll"),sorter:(e,n)=>(0,i._f)(null===e||void 0===e?void 0:e.created_at,null===n||void 0===n?void 0:n.created_at)},{title:n("general.Control"),fixed:"right",key:"control",render:(l,o)=>(0,K.jsxs)(m.A,{direction:"row",align:"stretch",children:[(0,K.jsx)(pe.Ay,{type:"text",icon:(0,K.jsx)(te.A,{}),style:{color:e.colorInfo},onClick:()=>{k(o)}}),(0,K.jsx)(be.A,{title:n("dialog.ask.DoYouWantToProceed"),description:n("dialog.warning.CannotBeUndone"),okType:"danger",okText:n("button.Delete"),onConfirm:()=>{null!==o&&void 0!==o&&o.name&&(x(o.name+u),C({variables:{name:o.name},onCompleted:(e,l)=>{var o,i;if(null!==e&&void 0!==e&&null!==(o=e.delete_project_resource_policy)&&void 0!==o&&o.ok)if(l&&(null===l||void 0===l?void 0:l.length)>0){const e=A().map(l,(e=>e.message));for(const n of e)Fe.Ay.error(n)}else a((()=>d())),Fe.Ay.success(n("resourcePolicy.SuccessfullyDeleted"));else Fe.Ay.error(null===e||void 0===e||null===(i=e.delete_project_resource_policy)||void 0===i?void 0:i.msg)},onError(e){Fe.Ay.error(null===e||void 0===e?void 0:e.message)}}))},children:(0,K.jsx)(pe.Ay,{type:"text",icon:(0,K.jsx)(ue.A,{style:{color:e.colorError}}),loading:w&&v===(null===o||void 0===o?void 0:o.name)+u,disabled:w&&v!==(null===o||void 0===o?void 0:o.name)+u})})]})}]),[I,q]=(0,t.a)("ProjectResourcePolicyList");return(0,K.jsxs)(m.A,{direction:"column",align:"stretch",children:[(0,K.jsxs)(m.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:e.paddingContentVertical,paddingLeft:e.paddingContentHorizontalSM,paddingRight:e.paddingContentHorizontalSM},children:[(0,K.jsx)(m.A,{direction:"column",align:"start",children:(0,K.jsx)(ye.A,{menu:{items:[{key:"exportCSV",label:n("resourcePolicy.ExportCSV"),onClick:()=>{(()=>{if(!M)return void Fe.Ay.error(n("resourcePolicy.NoDataToExport"));const e=A().without(A().map(L,(e=>A().toString(e.key))),"control"),l=A().map(M,(n=>A().pick(n,e.map((e=>e)))));(0,s.RM)(l,"project_resource_polices",{max_vfolder_count:e=>0===A().toNumber(e)?"-":e,max_quota_scope_size:e=>-1===e?"-":(0,i.wb)(e)})})()}}]},children:(0,K.jsx)(pe.Ay,{type:"link",style:{padding:0},onClick:e=>e.preventDefault(),children:(0,K.jsxs)(ge.A,{style:{color:e.colorLinkHover},children:[n("resourcePolicy.Tools"),(0,K.jsx)(de.A,{})]})})})}),(0,K.jsx)(m.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:(0,K.jsxs)(m.A,{gap:"xs",children:[(0,K.jsx)(pe.Ay,{icon:(0,K.jsx)(ce.A,{}),loading:o,onClick:()=>{a((()=>d()))}}),(0,K.jsx)(pe.Ay,{type:"primary",icon:(0,K.jsx)(me.A,{}),onClick:()=>{_(!0)},children:n("button.Create")})]})})]}),(0,K.jsx)(ve.A,{rowKey:"id",showSorterTooltip:!1,columns:A().filter(L,(e=>!A().includes(I,A().toString(null===e||void 0===e?void 0:e.key)))),dataSource:(0,i.tS)(M),scroll:{x:"max-content"},pagination:!1}),(0,K.jsx)(m.A,{justify:"end",style:{padding:e.paddingXXS},children:(0,K.jsx)(pe.Ay,{type:"text",icon:(0,K.jsx)(te.A,{}),onClick:()=>{g()}})}),(0,K.jsx)(se.A,{open:p,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&q(A().difference(L.map((e=>A().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),g()},columns:L,hiddenColumnKeys:I}),(0,K.jsx)(Se,{existingPolicyNames:A().map(M,"name"),open:!!f||c,projectResourcePolicyFrgmt:f||null,onRequestClose:e=>{e&&a((()=>d())),k(null),_(!1)}})]})};var Re,Me,Ce;const we=e=>{let{existingPolicyNames:n,userResourcePolicyFrgmt:o=null,onRequestClose:s,...t}=e;const{t:u}=(0,b.Bd)(),{token:c}=P.A.useToken(),{message:_}=W.A.useApp(),p=(0,y.useRef)(null),g=(0,r.CX)(),v=null===g||void 0===g?void 0:g.supports("max-vfolder-count-in-user-and-project-resource-policy"),x=null===g||void 0===g?void 0:g.supports("max-quota-scope-size"),f=null===g||void 0===g?void 0:g.supports("max-session-count-per-model-session"),k=null===g||void 0===g?void 0:g.supports("max-customized-image-count"),h=(0,F.useFragment)(void 0!==Re?Re:Re=l(26213),o),[S,j]=(0,F.useMutation)(void 0!==Me?Me:Me=l(28306)),[R,M]=(0,F.useMutation)(void 0!==Ce?Ce:Ce=l(38940)),C=(0,y.useMemo)((()=>{let e={};null===h&&(e={max_vfolder_count:0,max_quota_scope_size:-1});let n=null===h||void 0===h?void 0:h.max_quota_scope_size;return n=A().isUndefined(n)||-1===n?-1:(0,i.wb)(n),{...e,...h,max_quota_scope_size:n}}),[h,null===h||void 0===h?void 0:h.max_vfolder_count,null===h||void 0===h?void 0:h.max_quota_scope_size]);return(0,K.jsxs)(d.A,{title:u(null===h?"resourcePolicy.CreateResourcePolicy":"resourcePolicy.UpdateResourcePolicy"),onOk:e=>{var n;return null===p||void 0===p||null===(n=p.current)||void 0===n?void 0:n.validateFields().then((e=>{const n={max_vfolder_count:(null===e||void 0===e?void 0:e.max_vfolder_count)||0,max_quota_scope_size:-1===(null===e||void 0===e?void 0:e.max_quota_scope_size)?-1:(0,i._S)(null===e||void 0===e?void 0:e.max_quota_scope_size),max_session_count_per_model_session:null===e||void 0===e?void 0:e.max_session_count_per_model_session,max_customized_image_count:null===e||void 0===e?void 0:e.max_customized_image_count};v||delete n.max_vfolder_count,x||delete n.max_quota_scope_size,f||delete n.max_session_count_per_model_session,k||delete n.max_customized_image_count,null===h?S({variables:{name:null===e||void 0===e?void 0:e.name,props:n},onCompleted(e,n){var l,o;null===e||void 0===e||null===(l=e.create_user_resource_policy)||void 0===l||!l.ok||n?(_.error((null===e||void 0===e||null===(o=e.create_user_resource_policy)||void 0===o?void 0:o.msg)||u("resourcePolicy.CannotCreateResourcePolicy")),s()):(_.success(u("storageHost.ResourcePolicySuccessfullyUpdated")),s(!0))},onError(e){_.error((null===e||void 0===e?void 0:e.message)||u("resourcePolicy.CannotCreateResourcePolicy"))}}):R({variables:{name:null===e||void 0===e?void 0:e.name,props:n},onCompleted(e,n){var l,o;null===e||void 0===e||null===(l=e.modify_user_resource_policy)||void 0===l||!l.ok||n?(_.error((null===e||void 0===e||null===(o=e.modify_user_resource_policy)||void 0===o?void 0:o.msg)||u("resourcePolicy.CannotUpdateResourcePolicy")),s()):(_.success(u("storageHost.ResourcePolicySuccessfullyUpdated")),s(!0))},onError(e){_.error((null===e||void 0===e?void 0:e.message)||u("resourcePolicy.CannotUpdateResourcePolicy"))}})})).catch((()=>{}))},onCancel:()=>s(),destroyOnClose:!0,confirmLoading:j||M,...t,children:[(0,K.jsx)(Pe.A,{message:u("storageHost.BeCarefulToSetUserResourcePolicy"),type:"warning",showIcon:!0,style:{marginBottom:c.marginMD}}),(0,K.jsxs)(O.A,{ref:p,layout:"vertical",requiredMark:"optional",initialValues:C,preserve:!1,children:[(0,K.jsx)(O.A.Item,{label:u("resourcePolicy.Name"),name:"name",required:!0,rules:[{required:!0,message:u("data.explorer.ValueRequired")},{max:255},{validator:(e,l)=>!h&&null!==n&&void 0!==n&&n.includes(l)?Promise.reject(u("resourcePolicy.ResourcePolicyNameAlreadyExists")):Promise.resolve()}],children:(0,K.jsx)(G.A,{disabled:!!h})}),(0,K.jsxs)(m.A,{direction:"column",align:"stretch",gap:"md",style:{marginBottom:c.marginMD},children:[v?(0,K.jsx)(H,{name:"max_vfolder_count",unlimitedValue:0,label:u("resourcePolicy.MaxFolderCount"),style:{width:"100%",margin:0},children:(0,K.jsx)(le.A,{min:0,max:a.tu,style:{width:"100%"}})}):null,x?(0,K.jsx)(H,{name:"max_quota_scope_size",unlimitedValue:-1,label:u("storageHost.MaxFolderSize"),style:{width:"100%",margin:0},children:(0,K.jsx)(le.A,{min:0,max:Math.floor(Number.MAX_SAFE_INTEGER/Math.pow(10,9)),addonAfter:"GB",style:{width:"100%"}})}):null]}),f?(0,K.jsx)(O.A.Item,{name:"max_session_count_per_model_session",label:u("resourcePolicy.MaxSessionCountPerModelSession"),rules:[{required:!0,message:u("data.explorer.ValueRequired")}],children:(0,K.jsx)(le.A,{min:0,max:a.tu,style:{width:"100%"}})}):null,k?(0,K.jsx)(O.A.Item,{name:"max_customized_image_count",label:u("resourcePolicy.MaxCustomizedImageCount"),rules:[{required:!0,message:u("data.explorer.ValueRequired")}],children:(0,K.jsx)(le.A,{min:0,max:a.tu,style:{width:"100%"}})}):null]})]})};var Le,Ie;const qe=()=>{const{token:e}=P.A.useToken(),{t:n}=(0,b.Bd)(),{message:o}=W.A.useApp(),[a,u]=(0,y.useTransition)(),[d,c]=(0,r.Tw)("initial-fetch"),[_,p]=(0,y.useState)(!1),[g,{toggle:v}]=(0,_e.A)(),[x,f]=(0,y.useState)(),[k,h]=(0,y.useState)(),S=(0,r.CX)(),j=null===S||void 0===S?void 0:S.supports("max-vfolder-count-in-user-and-project-resource-policy"),R=null===S||void 0===S?void 0:S.supports("max-quota-scope-size"),M=null===S||void 0===S?void 0:S.supports("max-session-count-per-model-session"),C=null===S||void 0===S?void 0:S.supports("max-customized-image-count"),{user_resource_policies:w}=(0,F.useLazyLoadQuery)(void 0!==Le?Le:Le=l(75420),{},{fetchPolicy:"initial-fetch"===d?"store-and-network":"network-only",fetchKey:d}),[L,I]=(0,F.useMutation)(void 0!==Ie?Ie:Ie=l(71087)),q=(0,i.LY)([{title:n("resourcePolicy.Name"),dataIndex:"name",key:"name",fixed:"left",sorter:(e,n)=>(0,i._f)(null===e||void 0===e?void 0:e.name,null===n||void 0===n?void 0:n.name)},j&&{title:n("resourcePolicy.MaxVFolderCount"),dataIndex:"max_vfolder_count",key:"max_vfolder_count",render:e=>0===A().toNumber(e)?"\u221e":e,sorter:(e,n)=>(0,i.Oe)(null===e||void 0===e?void 0:e.max_vfolder_count,null===n||void 0===n?void 0:n.max_vfolder_count,0)},M&&{title:n("resourcePolicy.MaxSessionCountPerModelSession"),dataIndex:"max_session_count_per_model_session",key:"max_session_count_per_model_session",sorter:(e,n)=>{var l,o;return(null!==(l=null===e||void 0===e?void 0:e.max_session_count_per_model_session)&&void 0!==l?l:0)-(null!==(o=null===n||void 0===n?void 0:n.max_session_count_per_model_session)&&void 0!==o?o:0)}},R&&{title:n("resourcePolicy.MaxQuotaScopeSize"),dataIndex:"max_quota_scope_size",key:"max_quota_scope_size",render:e=>-1===e?"\u221e":(0,i.wb)(e),sorter:(e,n)=>(0,i.Oe)(null===e||void 0===e?void 0:e.max_quota_scope_size,null===n||void 0===n?void 0:n.max_quota_scope_size,-1)},C&&{title:n("resourcePolicy.MaxCustomizedImageCount"),key:"max_customized_image_count",dataIndex:"max_customized_image_count",sorter:(e,n)=>{var l,o;return(null!==(l=null===e||void 0===e?void 0:e.max_customized_image_count)&&void 0!==l?l:0)-(null!==(o=null===n||void 0===n?void 0:n.max_customized_image_count)&&void 0!==o?o:0)}},{title:"ID",dataIndex:"id",key:"id",sorter:(e,n)=>(0,i._f)(null===e||void 0===e?void 0:e.id,null===n||void 0===n?void 0:n.id)},{title:n("resourcePolicy.CreatedAt"),dataIndex:"created_at",key:"created_at",render:e=>z()(e).format("lll"),sorter:(e,n)=>(0,i._f)(null===e||void 0===e?void 0:e.created_at,null===n||void 0===n?void 0:n.created_at)},{title:n("general.Control"),fixed:"right",key:"control",render:(l,i)=>(0,K.jsxs)(m.A,{direction:"row",align:"stretch",children:[(0,K.jsx)(pe.Ay,{type:"text",icon:(0,K.jsx)(te.A,{}),style:{color:e.colorInfo},onClick:()=>{h(i)}}),(0,K.jsx)(be.A,{title:n("dialog.ask.DoYouWantToProceed"),description:n("dialog.warning.CannotBeUndone"),okType:"danger",okText:n("button.Delete"),onConfirm:()=>{null!==i&&void 0!==i&&i.name&&(f(i.name+d),L({variables:{name:i.name},onCompleted:(e,l)=>{var i,a;if(null!==e&&void 0!==e&&null!==(i=e.delete_user_resource_policy)&&void 0!==i&&i.ok)if(l&&l.length>0){const e=l.map((e=>e.message));for(const n of e)o.error(n)}else u((()=>c())),o.success(n("resourcePolicy.SuccessfullyDeleted"));else o.error(null===e||void 0===e||null===(a=e.delete_user_resource_policy)||void 0===a?void 0:a.msg)},onError(e){o.error(null===e||void 0===e?void 0:e.message)}}))},children:(0,K.jsx)(pe.Ay,{type:"text",icon:(0,K.jsx)(ue.A,{style:{color:e.colorError}}),loading:I&&x===(null===i||void 0===i?void 0:i.name)+d,disabled:I&&x!==(null===i||void 0===i?void 0:i.name)+d})})]})}]),[D,V]=(0,t.a)("UserResourcePolicyList");return(0,K.jsxs)(m.A,{direction:"column",align:"stretch",children:[(0,K.jsxs)(m.A,{direction:"row",justify:"between",wrap:"wrap",gap:"xs",style:{padding:e.paddingContentVertical,paddingLeft:e.paddingContentHorizontalSM,paddingRight:e.paddingContentHorizontalSM},children:[(0,K.jsx)(m.A,{direction:"column",align:"start",children:(0,K.jsx)(ye.A,{menu:{items:[{key:"exportCSV",label:n("resourcePolicy.ExportCSV"),onClick:()=>{(()=>{if(!w||w.length===(null===D||void 0===D?void 0:D.length))return void o.error(n("resourcePolicy.NoDataToExport"));const e=A().without(A().map(q,(e=>A().toString(e.key))),"control"),l=A().map(w,(n=>A().pick(n,e.map((e=>e)))));(0,s.RM)(l,"user-resource-policies",{max_vfolder_count:e=>0===A().toNumber(e)?"-":e,max_quota_scope_size:e=>-1===e?"-":(0,i.wb)(e)})})()}}]},children:(0,K.jsx)(pe.Ay,{type:"link",style:{padding:0},onClick:e=>e.preventDefault(),children:(0,K.jsxs)(ge.A,{style:{color:e.colorLinkHover},children:[n("resourcePolicy.Tools"),(0,K.jsx)(de.A,{})]})})})}),(0,K.jsx)(m.A,{direction:"row",gap:"xs",wrap:"wrap",style:{flexShrink:1},children:(0,K.jsxs)(m.A,{gap:"xs",children:[(0,K.jsx)(pe.Ay,{icon:(0,K.jsx)(ce.A,{}),loading:a,onClick:()=>{u((()=>c()))}}),(0,K.jsx)(pe.Ay,{type:"primary",icon:(0,K.jsx)(me.A,{}),onClick:()=>{p(!0)},children:n("button.Create")})]})})]}),(0,K.jsx)(ve.A,{rowKey:"id",showSorterTooltip:!1,columns:A().filter(q,(e=>!A().includes(D,A().toString(null===e||void 0===e?void 0:e.key)))),dataSource:(0,i.tS)(w),scroll:{x:"max-content"},pagination:!1}),(0,K.jsx)(m.A,{justify:"end",style:{padding:e.paddingXXS},children:(0,K.jsx)(pe.Ay,{type:"text",icon:(0,K.jsx)(te.A,{}),onClick:()=>{v()}})}),(0,K.jsx)(se.A,{open:g,onRequestClose:e=>{(null===e||void 0===e?void 0:e.selectedColumnKeys)&&V(A().difference(q.map((e=>A().toString(e.key))),null===e||void 0===e?void 0:e.selectedColumnKeys)),v()},columns:q,hiddenColumnKeys:D}),(0,K.jsx)(we,{existingPolicyNames:A().map(w,"name"),open:!!k||_,userResourcePolicyFrgmt:k||null,onRequestClose:e=>{e&&u((()=>c())),h(null),p(!1)}})]})};var ze=l(47174);const De=(0,ze.withDefault)(ze.StringParam,"keypair"),Ve=()=>{const{t:e}=(0,b.Bd)(),[n]=(0,ze.useQueryParam)("tab",De),l=(0,r.f0)(),a=(0,r.CX)(),s=null===a||void 0===a?void 0:a.supports("configure-user-resource-policy");return(0,K.jsx)(Z.A,{activeTabKey:n,onTabChange:e=>{l({pathname:"/resource-policy",search:new URLSearchParams({tab:e}).toString()},{params:{tab:e}})},tabList:(0,i.LY)([{key:"keypair",label:e("resourcePolicy.Keypair")},s&&{key:"user",label:e("resourcePolicy.User")},{key:"project",label:e("resourcePolicy.Project")}]),styles:{body:{padding:0,paddingTop:1,overflow:"hidden"}},children:(0,K.jsxs)(y.Suspense,{fallback:(0,K.jsx)(o.A,{}),children:["keypair"===n&&(0,K.jsx)(xe,{}),"user"===n&&(0,K.jsx)(qe,{}),"project"===n&&(0,K.jsx)(Ke,{})]})})}}}]);
//# sourceMappingURL=5866.cfadccbd.chunk.js.map