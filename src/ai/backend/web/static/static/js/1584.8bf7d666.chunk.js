/*! For license information please see 1584.8bf7d666.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[1584],{68314:(e,n,i)=>{i.d(n,{A:()=>l});var t=i(27480),a=(i(66610),i(66906));const l=e=>{let{type:n,style:i,monospace:l,children:r,...s}=e;return l?(0,a.jsx)(t.A.Text,{type:n,...s,style:{fontFamily:"monospace",...i},children:r}):(0,a.jsx)(t.A.Text,{type:n,style:i,...s,children:r})}},1584:(e,n,i)=>{i.r(n),i.d(n,{default:()=>P});const t=function(){var e={defaultValue:null,kind:"LocalArgument",name:"filter"},n={defaultValue:null,kind:"LocalArgument",name:"id"},i={defaultValue:null,kind:"LocalArgument",name:"limit"},t={defaultValue:null,kind:"LocalArgument",name:"offset"},a=[{kind:"Variable",name:"id",variableName:"id"}],l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},o=[r,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],d={alias:null,args:null,concreteType:"SourceInfo",kind:"LinkedField",name:"registry",plural:!1,selections:o,storageKey:null},c={alias:null,args:null,concreteType:"SourceInfo",kind:"LinkedField",name:"source",plural:!1,selections:o,storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"updatedAt",storageKey:null},g={kind:"Literal",name:"orderBy",value:{direction:"DESC",field:"VERSION"}},m=[{kind:"Literal",name:"filter",value:{status:{equals:"PULLING"}}},g],f={alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},v=[{kind:"Literal",name:"first",value:1},g],p={alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"version",storageKey:null},k={args:null,kind:"FragmentSpread",name:"BAIImportArtifactModalArtifactRevisionFragment"},F=[{kind:"Variable",name:"filter",variableName:"filter"},{kind:"Variable",name:"limit",variableName:"limit"},{kind:"Variable",name:"offset",variableName:"offset"},g];return{fragment:{argumentDefinitions:[e,n,i,t],kind:"Fragment",metadata:null,name:"ReservoirArtifactDetailPageQuery",selections:[{alias:null,args:a,concreteType:"Artifact",kind:"LinkedField",name:"artifact",plural:!1,selections:[l,r,{args:null,kind:"FragmentSpread",name:"BAIArtifactTypeTagFragment"},s,d,c,u,{alias:"pullingArtifactRevisions",args:m,concreteType:"ArtifactRevisionConnection",kind:"LinkedField",name:"revisions",plural:!1,selections:[f,{alias:null,args:null,concreteType:"ArtifactRevisionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ArtifactRevision",kind:"LinkedField",name:"node",plural:!1,selections:[l,A,{args:null,kind:"FragmentSpread",name:"BAIPullingArtifactRevisionAlertFragment"}],storageKey:null}],storageKey:null}],storageKey:'revisions(filter:{"status":{"equals":"PULLING"}},orderBy:{"direction":"DESC","field":"VERSION"})'},{alias:"latestVersion",args:v,concreteType:"ArtifactRevisionConnection",kind:"LinkedField",name:"revisions",plural:!1,selections:[{alias:null,args:null,concreteType:"ArtifactRevisionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ArtifactRevision",kind:"LinkedField",name:"node",plural:!1,selections:[l,p,y,A,k,{args:null,kind:"FragmentSpread",name:"BAIArtifactRevisionTableLatestRevisionFragment"}],storageKey:null}],storageKey:null}],storageKey:'revisions(first:1,orderBy:{"direction":"DESC","field":"VERSION"})'},{alias:null,args:F,concreteType:"ArtifactRevisionConnection",kind:"LinkedField",name:"revisions",plural:!1,selections:[f,{alias:null,args:null,concreteType:"ArtifactRevisionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ArtifactRevision",kind:"LinkedField",name:"node",plural:!1,selections:[l,A,{args:null,kind:"FragmentSpread",name:"BAIArtifactRevisionTableArtifactRevisionFragment"},k,{args:null,kind:"FragmentSpread",name:"BAIDeleteArtifactModalArtifactRevisionFragment"},{args:null,kind:"FragmentSpread",name:"BAIArtifactRevisionDeleteButtonFragment"},{args:null,kind:"FragmentSpread",name:"BAIArtifactRevisionDownloadButtonFragment"}],storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"BAIImportArtifactModalArtifactFragment"},{args:null,kind:"FragmentSpread",name:"BAIDeleteArtifactModalArtifactFragment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,t,i,e],kind:"Operation",name:"ReservoirArtifactDetailPageQuery",selections:[{alias:null,args:a,concreteType:"Artifact",kind:"LinkedField",name:"artifact",plural:!1,selections:[l,r,{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},s,d,c,u,{alias:"pullingArtifactRevisions",args:m,concreteType:"ArtifactRevisionConnection",kind:"LinkedField",name:"revisions",plural:!1,selections:[f,{alias:null,args:null,concreteType:"ArtifactRevisionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ArtifactRevision",kind:"LinkedField",name:"node",plural:!1,selections:[l,A,y],storageKey:null}],storageKey:null}],storageKey:'revisions(filter:{"status":{"equals":"PULLING"}},orderBy:{"direction":"DESC","field":"VERSION"})'},{alias:"latestVersion",args:v,concreteType:"ArtifactRevisionConnection",kind:"LinkedField",name:"revisions",plural:!1,selections:[{alias:null,args:null,concreteType:"ArtifactRevisionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ArtifactRevision",kind:"LinkedField",name:"node",plural:!1,selections:[l,p,y,A],storageKey:null}],storageKey:null}],storageKey:'revisions(first:1,orderBy:{"direction":"DESC","field":"VERSION"})'},{alias:null,args:F,concreteType:"ArtifactRevisionConnection",kind:"LinkedField",name:"revisions",plural:!1,selections:[f,{alias:null,args:null,concreteType:"ArtifactRevisionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"ArtifactRevision",kind:"LinkedField",name:"node",plural:!1,selections:[l,A,y,p,u],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{cacheID:"5bb87a20de6a9c2890b3a65b44dd506c",id:null,metadata:{},name:"ReservoirArtifactDetailPageQuery",operationKind:"query",text:"query ReservoirArtifactDetailPageQuery(\n  $id: ID!\n  $offset: Int!\n  $limit: Int!\n  $filter: ArtifactRevisionFilter!\n) {\n  artifact(id: $id) {\n    id\n    name\n    ...BAIArtifactTypeTagFragment\n    description\n    registry {\n      name\n      url\n    }\n    source {\n      name\n      url\n    }\n    updatedAt\n    pullingArtifactRevisions: revisions(filter: {status: {equals: PULLING}}, orderBy: {field: VERSION, direction: DESC}) {\n      count\n      edges {\n        node {\n          id\n          status\n          ...BAIPullingArtifactRevisionAlertFragment\n        }\n      }\n    }\n    latestVersion: revisions(first: 1, orderBy: {field: VERSION, direction: DESC}) {\n      edges {\n        node {\n          id\n          size\n          version\n          status\n          ...BAIImportArtifactModalArtifactRevisionFragment\n          ...BAIArtifactRevisionTableLatestRevisionFragment\n        }\n      }\n    }\n    revisions(offset: $offset, limit: $limit, orderBy: {field: VERSION, direction: DESC}, filter: $filter) {\n      count\n      edges {\n        node {\n          id\n          status\n          ...BAIArtifactRevisionTableArtifactRevisionFragment\n          ...BAIImportArtifactModalArtifactRevisionFragment\n          ...BAIDeleteArtifactModalArtifactRevisionFragment\n          ...BAIArtifactRevisionDeleteButtonFragment\n          ...BAIArtifactRevisionDownloadButtonFragment\n        }\n      }\n    }\n    ...BAIImportArtifactModalArtifactFragment\n    ...BAIDeleteArtifactModalArtifactFragment\n  }\n}\n\nfragment BAIArtifactDescriptionsFragment on Artifact {\n  name\n  description\n  source {\n    name\n    url\n  }\n  ...BAIArtifactTypeTagFragment\n}\n\nfragment BAIArtifactRevisionDeleteButtonFragment on ArtifactRevision {\n  status\n}\n\nfragment BAIArtifactRevisionDownloadButtonFragment on ArtifactRevision {\n  status\n}\n\nfragment BAIArtifactRevisionTableArtifactRevisionFragment on ArtifactRevision {\n  id\n  version\n  size\n  status\n  updatedAt\n  ...BAIArtifactStatusTagFragment\n  ...BAIArtifactRevisionDownloadButtonFragment\n  ...BAIArtifactRevisionDeleteButtonFragment\n}\n\nfragment BAIArtifactRevisionTableLatestRevisionFragment on ArtifactRevision {\n  id\n}\n\nfragment BAIArtifactStatusTagFragment on ArtifactRevision {\n  status\n}\n\nfragment BAIArtifactTypeTagFragment on Artifact {\n  type\n}\n\nfragment BAIDeleteArtifactModalArtifactFragment on Artifact {\n  id\n  ...BAIArtifactDescriptionsFragment\n}\n\nfragment BAIDeleteArtifactModalArtifactRevisionFragment on ArtifactRevision {\n  id\n  version\n  size\n  status\n}\n\nfragment BAIImportArtifactModalArtifactFragment on Artifact {\n  id\n  ...BAIArtifactDescriptionsFragment\n}\n\nfragment BAIImportArtifactModalArtifactRevisionFragment on ArtifactRevision {\n  id\n  version\n  size\n  status\n}\n\nfragment BAIPullingArtifactRevisionAlertFragment on ArtifactRevision {\n  id\n  status\n  version\n}\n"}}}();t.hash="dce1a9effcbbb4ad483a555df44b8c2e";const a=t;var l=i(27480),r=i(88153),s=i(84395),o=i(32677),d=i(60042),c=i(63872),u=i(4994),g=i.n(u),m=i(65288),f=i.n(m),A=i(8348),v=i.n(A),p=i(5343),y=i(66610),k=i(54070),F=i(89737),R=i(19022),I=i(84970),L=i(68314),b=i(19885),B=i(61774),h=i(68343),S=i(83203),D=i(66906);g().extend(f());const{Title:x,Text:T,Paragraph:E}=l.A,P=()=>{var e,n,i,t;const{token:u}=r.A.useToken(),{t:m}=(0,k.Bd)(),{artifactId:f}=(0,R.g)(),[A,P]=(0,b.Tw)(b.eI),[j,N]=(0,y.useTransition)(),[C,V]=(0,y.useState)([]),[K,O]=(0,y.useState)([]),[M,w]=(0,y.useState)([]),[z,$]=(0,h.R)({filter:(0,S.withDefault)(S.JsonParam,{})}),{baiPaginationOption:G,tablePaginationOption:U,setTablePaginationOption:_}=(0,B.aW)({current:1,pageSize:10}),q=(0,y.useMemo)((()=>({id:null!==f&&void 0!==f?f:"",offset:G.offset,limit:G.limit,filter:z.filter})),[f,G.limit,G.offset,z.filter]),Q=(0,y.useDeferredValue)(q),J=(0,y.useDeferredValue)(A),{artifact:Y}=(0,F.useLazyLoadQuery)(a,Q,{fetchKey:J===b.eI?void 0:J,fetchPolicy:J===b.eI?"store-and-network":"network-only"}),Z=null===Y||void 0===Y||null===(e=Y.latestVersion.edges[0])||void 0===e?void 0:e.node,H=(0,c.f)(null===Y||void 0===Y?void 0:Y.pullingArtifactRevisions.edges.map((e=>null===e||void 0===e?void 0:e.node)));return(0,D.jsxs)("div",{children:[(0,D.jsxs)(c.OO,{align:"center",style:{marginBottom:u.marginLG},justify:"between",children:[(0,D.jsxs)(c.OO,{align:"center",gap:"xs",children:[(0,D.jsx)(x,{level:3,style:{margin:0},children:null===Y||void 0===Y?void 0:Y.name}),Y&&(0,D.jsx)(c.bk,{artifactTypeFrgmt:Y})]}),(0,D.jsx)(I.A,{value:A,autoUpdateDelay:1e4,loading:j,onChange:()=>N((()=>P()))})]}),H.length>0&&(0,D.jsx)(c.OO,{direction:"column",gap:"sm",align:"stretch",style:{marginBottom:u.marginMD},children:H.map((e=>(0,D.jsx)(c.vy,{pullingArtifactRevisionFrgmt:e,onOk:()=>{P()}},e.id)))}),(0,D.jsx)(c.Zu,{title:m("reservoirPage.BasicInformation"),showDivider:!0,extra:(0,D.jsx)(s.Ay,{type:"primary",icon:(0,D.jsx)(p.A,{size:16}),onClick:()=>{Z&&w([Z])},disabled:!Z||"SCANNED"!==Z.status,children:Z?m("reservoirPage.PullLatestVersion",{version:Z.version}):"N/A"}),style:{marginBottom:u.marginMD},children:(0,D.jsxs)(o.A,{column:2,bordered:!0,children:[(0,D.jsx)(o.A.Item,{label:m("reservoirPage.Name"),children:null===Y||void 0===Y?void 0:Y.name}),(0,D.jsx)(o.A.Item,{label:m("reservoirPage.Type"),children:Y&&(0,D.jsx)(c.bk,{artifactTypeFrgmt:Y})}),(0,D.jsx)(o.A.Item,{label:m("reservoirPage.Size"),children:(0,D.jsx)(L.A,{monospace:!0,children:null!==Z&&void 0!==Z&&Z.size?null===(n=(0,c.Gh)(Z.size,"auto"))||void 0===n?void 0:n.displayValue:"N/A"})}),(0,D.jsx)(o.A.Item,{label:m("reservoirPage.Source"),children:null!==Y&&void 0!==Y&&Y.source?(0,D.jsx)(l.A.Link,{href:null!==(i=Y.source.url)&&void 0!==i?i:"",target:"_blank",rel:"noopener noreferrer",children:Y.source.name||"N/A"}):"N/A"}),(0,D.jsx)(o.A.Item,{label:m("reservoirPage.Registry"),children:(0,D.jsx)(l.A,{children:null!==Y&&void 0!==Y&&Y.registry?`${Y.registry.name}(${Y.registry.url})`:"N/A"})}),(0,D.jsx)(o.A.Item,{label:m("reservoirPage.LastUpdated"),span:2,children:null!==Y&&void 0!==Y&&Y.updatedAt?g()(null===Y||void 0===Y?void 0:Y.updatedAt).format("lll"):"N/A"}),(0,D.jsx)(o.A.Item,{label:m("reservoirPage.Description"),span:2,children:null!==Y&&void 0!==Y&&Y.description?(0,D.jsx)(E,{children:Y.description}):"N/A"})]})}),(0,D.jsx)(c.Zu,{title:m("reservoirPage.VersionList"),showDivider:!0,style:{marginBottom:u.marginMD},styles:{body:{padding:`${u.paddingSM}px ${u.paddingLG}px ${u.paddingLG}px ${u.paddingLG}px`}},children:(0,D.jsxs)(c.OO,{direction:"column",gap:"sm",align:"stretch",children:[(0,D.jsxs)(c.OO,{align:"stretch",justify:"between",children:[(0,D.jsx)(c.tX,{combinationMode:"AND",onChange:e=>{console.log("filter changed: ",e),N((()=>{$({filter:null!==e&&void 0!==e?e:{}},"replaceIn")}))},filterProperties:[{fixedOperator:"equals",propertyLabel:m("reservoirPage.Status"),key:"status",type:"enum",options:[{label:"SCANNED",value:"SCANNED"},{label:"PULLING",value:"PULLING"},{label:"PULLED",value:"PULLED"},{label:"VERIFYING",value:"VERIFYING"},{label:"NEEDS_APPROVAL",value:"NEEDS_APPROVAL"},{label:"FAILED",value:"FAILED"},{label:"AVAILABLE",value:"AVAILABLE"},{label:"REJECTED",value:"REJECTED"}]},{fixedOperator:"contains",propertyLabel:m("reservoirPage.Version"),key:"version",type:"string"},{propertyLabel:m("reservoirPage.ArtifactID"),key:"artifactId",valueMode:"scalar",type:"string"}]}),C.length>0?(0,D.jsxs)(c.OO,{gap:"xs",children:[(0,D.jsxs)(T,{children:[C.length," selected"]}),(0,D.jsx)(d.A,{title:m("reservoirPage.PullSelectedVersions"),children:(0,D.jsx)(c.eM,{revisionsFrgmt:C.flatMap((e=>e.data)),onClick:()=>{Y&&w(C.flatMap((e=>e.data)))}})}),(0,D.jsx)(d.A,{title:m("reservoirPage.RemoveSelectedVersions"),children:(0,D.jsx)(c.Ty,{revisionsFrgmt:C.flatMap((e=>e.data)),style:{borderColor:u.colorBorder,backgroundColor:u.colorBgContainer},onClick:()=>{Y&&O(C.flatMap((e=>e.data)))}})})]}):null]}),(0,D.jsx)(c.eU,{artifactRevisionFrgmt:(0,c.f)(null===Y||void 0===Y?void 0:Y.revisions.edges.map((e=>e.node))),latestRevisionFrgmt:null===Y||void 0===Y?void 0:Y.latestVersion.edges[0].node,loading:j,onClickDownload:e=>{null===Y||void 0===Y||Y.revisions.edges.forEach((n=>{if(n.node.id===e)return w([n.node])}))},onClickDelete:e=>{null===Y||void 0===Y||Y.revisions.edges.forEach((n=>{if(n.node.id===e)return O([n.node])}))},pagination:{current:U.current,pageSize:U.pageSize,total:null!==(t=null===Y||void 0===Y?void 0:Y.revisions.count)&&void 0!==t?t:0,onChange:(e,n)=>{N((()=>{v().isNumber(e)&&v().isNumber(n)&&_({current:e,pageSize:n})}))}},onRow:e=>({onClick:n=>{var i;n.stopPropagation();const t=n.target;if(t.closest("button")||t.closest("a"))return;if(!Y)return;const a=null===(i=Y.revisions.edges.find((n=>n.node.id===e.id)))||void 0===i?void 0:i.node;a&&V((n=>{const i=n.filter((n=>n.id!==e.id));return i.length===n.length?[...n,{id:e.id,data:a}]:i}))}}),rowSelection:{type:"checkbox",onChange:e=>{if(!Y)return;const n=Y.revisions,i=n.edges.map((e=>e.node.id));V((t=>{const a=t.filter((e=>!i.includes(e.id))),l=n.edges.filter((n=>e.includes(n.node.id))).map((e=>({id:e.node.id,data:e.node})));return a.concat(l)}))},selectedRowKeys:C.map((e=>e.id))}})]})}),(0,D.jsx)(c.VC,{selectedArtifactFrgmt:null!==Y&&void 0!==Y?Y:null,selectedArtifactRevisionFrgmt:M,open:!!Y&&!v().isEmpty(M),onOk:()=>{w([]),P()},onCancel:()=>{w([])}}),(0,D.jsx)(c.L4,{selectedArtifactFrgmt:null!==Y&&void 0!==Y?Y:null,selectedArtifactRevisionFrgmt:K,onOk:()=>{O([])},onCancel:()=>{O([])},open:!!Y&&!v().isEmpty(K)})]})}},5343:(e,n,i)=>{i.d(n,{A:()=>t});const t=(0,i(5335).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])}}]);
//# sourceMappingURL=1584.8bf7d666.chunk.js.map