"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[310],{23623:(e,n,s)=>{s.d(n,{A:()=>a});var l=s(76998);const t=(e,n,s)=>{const[t,a]=(0,l.useState)(e());return(0,l.useEffect)((()=>{s&&a(e())}),[s]),function(e,n){const s=(0,l.useRef)();(0,l.useEffect)((()=>{s.current=e})),(0,l.useEffect)((()=>{if(null!==n){let e=setInterval((function(){var e;null===(e=s.current)||void 0===e||e.call(s)}),n);return()=>clearInterval(e)}}),[n])}((()=>{const n=e();n!==t&&a(n)}),n),t},a=e=>{let{callback:n,delay:s,triggerKey:l}=e;return t(n,s,l)}},42989:(e,n,s)=>{s.d(n,{A:()=>d});var l=s(66464),t=s(60708),a=s(14455),r=s.n(a),o=s(45901),i=s.n(o),c=(s(76998),s(23446));const d=e=>{let{value:n,onChange:s,localFormat:a,...o}=e;const[,d]=(0,l.A)({value:n,onChange:s});return(0,c.jsx)(t.A,{value:n?r()(n):void 0,onChange:e=>{var n,s,l;i().isArray(e)&&(e=e[0]);const t=a?null===(n=e)||void 0===n?void 0:n.format():null===(s=e)||void 0===s||null===(l=s.tz())||void 0===l?void 0:l.toISOString();d(t)},...o})}},55256:(e,n,s)=>{s.d(n,{Ay:()=>y,Kk:()=>p,p3:()=>x,sT:()=>h,vB:()=>m});var l=s(83468),t=s(5621),a=s(29871),r=s(48713),o=s(45901),i=s.n(o),c=s(76998),d=s(23446);const u=e=>{let{image:n,...s}=e;n=n||"";const[,{getImageAliasName:a,getBaseVersion:r,tagAlias:o}]=(0,l.Gj)();return(0,d.jsx)(t.A,{values:[{label:o(a(n)),color:"blue"},{label:r(n),color:"green"}],...s})},m=e=>{let{image:n,...s}=e;n=n||"";const[,{getBaseVersion:t,tagAlias:a}]=(0,l.Gj)();return(0,d.jsx)(r.A,{color:"green",...s,children:a(t(n))})},h=e=>{let{image:n,...s}=e;n=n||"";const[,{getBaseImage:t,tagAlias:a}]=(0,l.Gj)();return(0,d.jsx)(r.A,{color:"green",...s,children:a(t(n))})},g=e=>{let{image:n,...s}=e;n=n||"";const[,{getArchitecture:t,tagAlias:a}]=(0,l.Gj)();return(0,d.jsx)(r.A,{color:"green",...s,children:a(t(n))})},p=e=>{let{image:n,...s}=e;n=n||"";const[,{getImageLang:t,tagAlias:a}]=(0,l.Gj)();return(0,d.jsx)(r.A,{color:"green",...s,children:a(t(n))})},x=e=>{let{image:n,labels:s,...o}=e;n=n||"",s=s||[];const[,{getFilteredRequirementsTags:c,getCustomTag:u,tagAlias:m}]=(0,l.Gj)();return(0,d.jsxs)(a.A,{children:[i().map(c(n),((e,n)=>(0,d.jsx)(r.A,{color:"blue",...o,children:m(e||"")},n))),(0,d.jsx)(t.A,{color:"cyan",values:[{label:"Customized",color:"cyan"},{label:u(s),color:"cyan"}],...o})]})},v=(e,n)=>{let{image:s,style:l={}}=e;return s=s||"",(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u,{image:s}),(0,d.jsx)(h,{image:s}),(0,d.jsx)(g,{image:s})]})},y=c.memo(v)},26165:(e,n,s)=>{s.r(n),s.d(n,{default:()=>t});const l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VFolderPermissionTag_VFolder",selections:[{alias:null,args:null,kind:"ScalarField",name:"permission",storageKey:null}],type:"VirtualFolder",abstractKey:null,hash:"d3b0f85629ac8c6f45ef363938f66067"},t=l},92478:(e,n,s)=>{s.r(n),s.d(n,{default:()=>t});const l=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"domain_name"},{defaultValue:null,kind:"LocalArgument",name:"group_id"},{defaultValue:null,kind:"LocalArgument",name:"keypair_resource_policy_name"}],n=[{alias:null,args:null,kind:"ScalarField",name:"allowed_vfolder_hosts",storageKey:null}],s=[{alias:null,args:[{kind:"Variable",name:"name",variableName:"domain_name"}],concreteType:"Domain",kind:"LinkedField",name:"domain",plural:!1,selections:n,storageKey:null},{alias:null,args:[{kind:"Variable",name:"domain_name",variableName:"domain_name"},{kind:"Variable",name:"id",variableName:"group_id"}],concreteType:"Group",kind:"LinkedField",name:"group",plural:!1,selections:n,storageKey:null},{alias:null,args:[{kind:"Variable",name:"name",variableName:"keypair_resource_policy_name"}],concreteType:"KeyPairResourcePolicy",kind:"LinkedField",name:"keypair_resource_policy",plural:!1,selections:n,storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"VFolderTableProjectQuery",selections:s,type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"VFolderTableProjectQuery",selections:s},params:{cacheID:"2c2ce905afd89e93c6d761f22ed59f3d",id:null,metadata:{},name:"VFolderTableProjectQuery",operationKind:"query",text:"query VFolderTableProjectQuery(\n  $domain_name: String!\n  $group_id: UUID!\n  $keypair_resource_policy_name: String!\n) {\n  domain(name: $domain_name) {\n    allowed_vfolder_hosts\n  }\n  group(id: $group_id, domain_name: $domain_name) {\n    allowed_vfolder_hosts\n  }\n  keypair_resource_policy(name: $keypair_resource_policy_name) {\n    allowed_vfolder_hosts\n  }\n}\n"}}}();l.hash="ccdbaa52a63c2ea005423e7c541eff80";const t=l},83310:(e,n,s)=>{s.r(n),s.d(n,{default:()=>Ee});var l=s(25344),t=s(82156),a=s(50840),r=s(6932),o=s(29475),i=s(45901),c=s.n(i),d=s(76998),u=s(23446);const m=e=>{let{status:n="default",extraButtonTitle:s,onClickExtraButton:i,extra:d,style:m,...h}=e;const{token:g}=a.A.useToken(),p=d||s&&(0,u.jsx)(r.Ay,{type:"link",icon:"error"===n?(0,u.jsx)(l.A,{twoToneColor:g.colorError}):"warning"===n?(0,u.jsx)(t.A,{twoToneColor:g.colorWarning}):void 0,onClick:i,children:s})||void 0;return(0,u.jsx)(o.A,{style:c().extend(m,{borderColor:"error"===n?g.colorError:"warning"===n?g.colorWarning:"success"===n?g.colorSuccess:null===m||void 0===m?void 0:m.borderColor}),extra:p,...h})};var h=s(23623),g=s(42989),p=s(5621),x=s(29871),v=s(94080),y=s(5336),A=s(65080),j=s(82028),f=s(77678);const b=e=>{let{formItemProps:n,...s}=e;const l=(0,d.useRef)(null),{t:t}=(0,f.Bd)(),a=A.A.useFormInstance();return(0,u.jsx)(A.A.List,{...s,children:(e,o)=>{let{add:i,remove:d}=o;return(0,u.jsxs)(x.A,{direction:"column",gap:"xs",align:"stretch",children:[e.map(((r,o)=>{let{key:i,name:m,...h}=r;return(0,u.jsxs)(x.A,{direction:"row",align:"baseline",gap:"xs",children:[(0,u.jsx)(A.A.Item,{...h,style:{marginBottom:0,flex:1},name:[m,"variable"],rules:[{required:!0,message:t("session.launcher.EnterEnvironmentVariable")},{pattern:/^[a-zA-Z_][a-zA-Z0-9_]*$/,message:t("session.launcher.EnvironmentVariableNamePatternError")},e=>{let{getFieldValue:n}=e;return{validator(e,l){const a=c().map(n(s.name),(e=>null===e||void 0===e?void 0:e.variable));return!c().isEmpty(l)&&a.length>0&&c().filter(a,(e=>e===l)).length>1?Promise.reject(t("session.launcher.EnvironmentVariableDuplicateName")):Promise.resolve()}}}],...n,children:(0,u.jsx)(j.A,{ref:o===e.length-1?l:null,placeholder:"Variable",onChange:()=>{const n=e.map(((e,n)=>[s.name,n,"variable"]));a.validateFields(n)}})}),(0,u.jsx)(A.A.Item,{...h,name:[m,"value"],style:{marginBottom:0,flex:1},rules:[{required:!0,message:t("session.launcher.EnvironmentVariableValueRequired")}],validateTrigger:["onChange","onBlur"],children:(0,u.jsx)(j.A,{placeholder:"Value"})}),(0,u.jsx)(v.A,{onClick:()=>d(m)})]},i)})),(0,u.jsx)(A.A.Item,{noStyle:!0,children:(0,u.jsx)(r.Ay,{type:"dashed",onClick:()=>{i(),setTimeout((()=>{l.current&&l.current.focus()}),0)},icon:(0,u.jsx)(y.A,{}),block:!0,children:t("session.launcher.AddEnvironmentVariable")})})]})}})};var F=s(85676),k=s(35051),_=s(55256),w=s(16788),V=s(83468),C=s(30217),T=s(48713);const S=e=>{let{value:n,...s}=e;const l=parseInt(n),t=l>=1024&&l<=65535;return(0,u.jsx)(T.A,{color:t?void 0:"red",...s})},I=e=>{let{...n}=e;const{t:s}=(0,f.Bd)(),l=(0,V.CX)();return(0,u.jsx)(A.A.Item,{label:s("session.launcher.PreOpenPortTitle"),name:"ports",tooltip:(0,u.jsx)(f.x6,{i18nKey:"session.launcher.DescSetPreOpenPort"}),extra:s("session.launcher.PreOpenPortRangeGuide"),rules:[{max:l._config.maxCountForPreopenPorts,type:"array",message:s("session.launcher.PreOpenPortMaxCountLimit",{count:l._config.maxCountForPreopenPorts})},e=>{let{getFieldValue:n}=e;return{validator:(e,n)=>c().every(n,(e=>{const n=parseInt(e);return n>=1024&&n<=65535}))?Promise.resolve():Promise.reject(new Error(s("session.launcher.PreOpenPortRange")))}}],...n,children:(0,u.jsx)(C.A,{mode:"tags",tagRender:e=>(0,u.jsx)(S,{closable:e.closable,onClose:e.onClose,onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},value:e.value,children:e.label}),style:{width:"100%"},suffixIcon:null,open:!1,tokenSeparators:[","," "]})})};var P=s(97443),E=s(8469);const N=e=>{let{...n}=e;const{t:s}=(0,f.Bd)();return(0,u.jsx)(A.A.Item,{label:s("session.launcher.SessionName"),name:"sessionName",rules:[{min:4,message:s("session.Validation.SessionNameTooShort")},{max:64,message:s("session.Validation.SessionNameTooLong64")},{validator:(e,n)=>c().isEmpty(n)?Promise.resolve():/^\w/.test(n)?/^[\w.-]*$/.test(n)?!/\w$/.test(n)&&n.length>=4?Promise.reject(s("session.Validation.SessionNameShouldEndWith")):Promise.resolve():Promise.reject(s("session.Validation.SessionNameInvalidCharacter")):Promise.reject(s("session.Validation.SessionNameShouldStartWith"))}],...n,children:(0,u.jsx)(j.A,{allowClear:!0,autoComplete:"off"})})};var M,D=s(30032),O=s(18611),z=s(57857),B=s(73987),R=s(91412),L=s(81638),K=s(3606);const q=e=>{let{vFolderFrgmt:n=null,permission:l}=e;const t=(0,K.useFragment)(void 0!==M?M:M=s(26165),n),a=c().chain({r:"green",w:"blue",d:"red"}).map(((e,n)=>{if(((e,n)=>!(null===e||void 0===e||!e.includes(n))||!(null===e||void 0===e||!e.includes("w")||"r"!==n))((null===t||void 0===t?void 0:t.permission)||l,n))return{label:n.toUpperCase(),color:e}})).compact().value();return(0,u.jsx)(p.A,{values:a})};var W,G=s(71155),U=s(8925),$=s(93792),J=s(66464),Q=s(13279),H=s(20307),Z=s(14862),X=s(22307),Y=s(14455),ee=s.n(Y);const ne=/^[a-zA-Z0-9_/-]*$/,se=e=>{let{filter:n,showAliasInput:l=!1,selectedRowKeys:t=[],onChangeSelectedRowKeys:a,aliasBasePath:o="/home/work/",aliasMap:i,onChangeAliasMap:m,rowKey:h="name",onChangeAutoMountedFolders:g,showAutoMountedFoldersSection:p,...v}=e;const y=d.useMemo((()=>e=>e&&e[h]),[h]),[b,F]=(0,J.A)({value:t,onChange:a},{defaultValue:[]}),[k,_]=(0,J.A)({value:i,onChange:m},{defaultValue:{}}),w=(0,V.CX)(),[C]=(0,O.x)(null===w||void 0===w?void 0:w._config.accessKey),[S]=A.A.useForm();(0,d.useEffect)((()=>{k&&(S.setFieldsValue(c().mapValues(k,(e=>e.startsWith(o)?e.slice(o.length):e))),S.validateFields())}),[k,S,o]);const{t:I}=(0,f.Bd)(),P=(0,D.QE)(),E=(0,V.hd)(),[N,M]=(0,V.Tw)("first"),[Y,se]=(0,d.useTransition)(),{data:le}=(0,z.n)({queryKey:["VFolderSelectQuery",N,E.id],queryFn:()=>P({method:"GET",url:"/folders?group_id=".concat(E.id)}),staleTime:1e3}),{domain:te,group:ae,keypair_resource_policy:re}=(0,K.useLazyLoadQuery)(void 0!==W?W:W=s(92478),{domain_name:w._config.domainName,group_id:E.id,keypair_resource_policy_name:(null===C||void 0===C?void 0:C.resource_policy)||""},{fetchPolicy:"network-only",fetchKey:N}),oe=(0,d.useMemo)((()=>{const e=JSON.parse((null===te||void 0===te?void 0:te.allowed_vfolder_hosts)||"{}"),n=JSON.parse((null===ae||void 0===ae?void 0:ae.allowed_vfolder_hosts)||"{}"),s=JSON.parse((null===re||void 0===re?void 0:re.allowed_vfolder_hosts)||"{}"),l=c().merge(e,n,s),t=Object.keys(l).filter((e=>l[e].includes("mount-in-session")));return null===le||void 0===le?void 0:le.filter((e=>t.includes(e.host)))}),[te,ae,re,le]),ie=(0,d.useMemo)((()=>c().chain(oe).filter((e=>{var n;return"ready"===e.status&&(null===(n=e.name)||void 0===n?void 0:n.startsWith("."))})).map((e=>e.name)).value()),[oe]);(0,d.useEffect)((()=>{c().isFunction(g)&&g(ie)}),[ie]);const[ce,de]=(0,d.useState)(""),ue=c().chain(oe).filter((e=>!n||n(e))).filter((e=>!!b.includes(y(e))||(!ce||e.name.includes(ce)))).value(),me=(0,B.E)(((e,n)=>c().isEmpty(n)?"".concat(o).concat(e):null!==n&&void 0!==n&&n.startsWith("/")?n:"".concat(o).concat(n))),he=(0,B.E)((()=>{_(c().mapValues(c().pickBy(S.getFieldsValue(),(e=>!!e)),((e,n)=>me(n,e)))),S.validateFields().catch((()=>{}))}));(0,d.useEffect)((()=>{he()}),[JSON.stringify(b),he]);const ge=(0,R.useShadowRoot)(),pe=[{title:(0,u.jsxs)(x.A,{direction:"row",gap:"xxs",children:[(0,u.jsx)(Q.A.Text,{children:I("data.folders.Name")}),l&&(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(Q.A.Text,{type:"secondary",style:{fontWeight:"normal"},children:["(",I("session.launcher.FolderAlias")," ",(0,u.jsx)(H.A,{title:(0,u.jsx)(f.x6,{i18nKey:"session.launcher.DescFolderAlias"}),getPopupContainer:()=>ge,children:(0,u.jsx)(G.A,{})}),")"]})})]}),dataIndex:"name",sorter:(e,n)=>e.name.localeCompare(n.name),render:(e,n)=>{const s=b.includes(y(n));return(0,u.jsxs)(x.A,{direction:"column",align:"stretch",gap:"xxs",style:l&&s?{display:"inline-flex",height:70,width:"100%"}:{maxWidth:200},children:[(0,u.jsx)(L.A,{keyword:ce,children:e}),l&&s&&(0,u.jsx)(A.A.Item,{noStyle:!0,shouldUpdate:(e,s)=>e[y(n)]!==s[y(n)],children:()=>{const e=c()(b).reduce(((e,n)=>(e[n]=(null===k||void 0===k?void 0:k[n])||me(n,void 0),e)),{});return(0,u.jsx)(A.A.Item,{name:y(n),rules:[{type:"string",pattern:ne,message:I("session.launcher.FolderAliasInvalid")},{type:"string",validator:async(s,l)=>l&&c().some(e,((e,s)=>s!==y(n)&&e===me(y(n),l)))?Promise.reject(I("session.launcher.FolderAliasOverlapping")):Promise.resolve()}],extra:me(n.name,S.getFieldValue(y(n))),children:(0,u.jsx)(j.A,{onClick:e=>{e.stopPropagation()},placeholder:I("session.launcher.FolderAlias"),allowClear:!0,onChange:()=>{he()}})})}})]})}},{title:I("data.UsageMode"),dataIndex:"usage_mode",sorter:(e,n)=>e.usage_mode.localeCompare(n.usage_mode)},{title:I("data.Host"),dataIndex:"host"},{title:I("data.Type"),dataIndex:"type",sorter:(e,n)=>e.type.localeCompare(n.type),render:(e,n)=>(0,u.jsxs)(x.A,{direction:"column",children:["user"===n.type?(0,u.jsx)(U.A,{title:"User"}):(0,u.jsx)("div",{children:"Group"}),"group"===n.type&&"(".concat(n.group_name,")")]})},{title:I("data.Permission"),dataIndex:"permission",sorter:(e,n)=>e.permission.localeCompare(n.permission),render:(e,n)=>(0,u.jsx)(q,{permission:n.permission})},{title:I("data.Created"),dataIndex:"created_at",sorter:(e,n)=>e.created_at.localeCompare(n.created_at),render:(e,n)=>ee()(e).format("L")}];return(0,u.jsxs)(x.A,{direction:"column",align:"stretch",gap:"xs",children:[(0,u.jsxs)(x.A,{direction:"row",gap:"xs",justify:"between",children:[(0,u.jsx)(j.A,{value:ce,onChange:e=>de(e.target.value),allowClear:!0,placeholder:I("data.SearchByName")}),(0,u.jsx)(r.Ay,{loading:Y,icon:(0,u.jsx)($.A,{}),onClick:()=>{se((()=>{M()}))}})]}),(0,u.jsx)(A.A,{form:S,component:!1,children:(0,u.jsx)(Z.A,{scroll:{x:"max-content"},rowKey:y,rowSelection:{selectedRowKeys:b,onChange:e=>{F(e)}},showSorterTooltip:!1,columns:pe,dataSource:ue,onRow:(e,n)=>({onClick:n=>{var s;const l=n.target;null!==l&&void 0!==l&&null!==(s=l.classList)&&void 0!==s&&s.contains("ant-table-selection-column")&&(n.stopPropagation(),b.includes(y(e))?F(b.filter((n=>n!==y(e)))):F([...b,y(e)]))}}),...v})}),p&&ie.length>0?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(X.A,{size:"small",children:(0,u.jsx)(X.A.Item,{label:I("data.AutomountFolders"),children:c().map(ie,(e=>(0,u.jsx)(T.A,{children:e},e)))})})}):null]})},le=e=>{let{filter:n,...s}=e;const l=A.A.useFormInstance(),{t:t}=(0,f.Bd)();return A.A.useWatch("vfoldersAliasMap",l),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(A.A.Item,{hidden:!0,name:"vfoldersAliasMap",rules:[{validator(e,n){const s=c().chain(l.getFieldValue("mounts")).reduce(((e,s)=>(e[s]=n[s]||"/home/work/"+s,e)),{}).values().value();return c().uniq(s).length!==s.length?Promise.reject(t("session.launcher.FolderAliasOverlapping")):c().some(s,(e=>!ne.test(e)))?Promise.reject(t("session.launcher.FolderAliasInvalid")):Promise.resolve()}}],children:(0,u.jsx)(j.A,{})}),(0,u.jsx)(A.A.Item,{hidden:!0,name:"autoMountedFolderNames"}),(0,u.jsx)(A.A.Item,{name:"mounts",...s,valuePropName:"selectedRowKeys",trigger:"onChangeSelectedRowKeys",children:(0,u.jsx)(se,{rowKey:"name",showAliasInput:!0,aliasMap:l.getFieldValue("vfoldersAliasMap"),onChangeAliasMap:e=>{l.setFieldValue("vfoldersAliasMap",e),l.validateFields(["vfoldersAliasMap"])},pagination:!1,filter:n,showAutoMountedFoldersSection:!0,onChangeAutoMountedFolders:e=>{l.setFieldValue("autoMountedFolderNames",e)}})})]})};var te=s(21454),ae=s(90660);var re=s(21186),oe=s(15618),ie=s(78474),ce=s(42290),de=s(40718),ue=s(76108),me=s(12620),he=s(33554),ge=s(41814),pe=s(17480),xe=s(87627),ve=s(82745),ye=s(7518),Ae=s(9788),je=s(91409),fe=s(41856),be=s(59065),Fe=s(67970),ke=s(34515),_e=s(81365),we=s(6592),Ve=s(52276),Ce=s(44442),Te=s(58346);const Se=e=>{let{form:n,containerCount:s=1}=e;return(0,u.jsxs)(u.Fragment,{children:[c().map(c().omit(n.getFieldsValue().resource,"shmem","accelerator","acceleratorType"),((e,l)=>{var t,a;return(0,u.jsx)(E.Ay,{type:l,value:"mem"===l?((null===(t=(0,D.Js)(e,"b"))||void 0===t?void 0:t.number)||0)*s+"":c().toNumber(e)*s+"",opts:{shmem:n.getFieldValue("resource").shmem?((null===(a=(0,D.Js)(n.getFieldValue("resource").shmem,"b"))||void 0===a?void 0:a.number)||0)*s:void 0}},l)})),c().isNumber(n.getFieldValue(["resource","accelerator"]))&&n.getFieldValue(["resource","acceleratorType"])&&(0,u.jsx)(E.Ay,{type:n.getFieldValue(["resource","acceleratorType"]),value:c().toString(n.getFieldValue(["resource","accelerator"])*s)})]})},Ie=()=>{let e="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let s=0;s<8;s++)e+=n.charAt(Math.floor(62*Math.random()));return e+"-session"},Pe=()=>{let e=Math.floor(52*Math.random()*52*52);let n="";for(let l=0;l<3;l++)n+=(s=e%52)<26?String.fromCharCode(65+s):String.fromCharCode(97+s-26),e=Math.floor(e/52);var s;return n},Ee=()=>{var e,n,s,l,t,i,v,y,E,M,O,z,B,R,L,K,q;const W=me.A.useApp();let U="normal";const $=(0,Ce.vc)(w.i7),J=(0,V.CX)(),[Y,ne]=(0,d.useState)(!1),se={sessionType:"interactive",allocationPreset:"auto-preset",hpcOptimization:{autoEnabled:!0,OMP_NUM_THREADS:"1",OPENBLAS_NUM_THREADS:"1"},batch:{enabled:!1,command:void 0,scheduleDate:void 0},envvars:[],...(null===(e=J._config)||void 0===e?void 0:e.default_session_environment)&&{environments:{environment:null===(n=J._config)||void 0===n?void 0:n.default_session_environment}},...P.jh},Ee=(0,Te.withDefault)(Te.NumberParam,0),Ne=(0,Te.withDefault)(Te.JsonParam,se),[{step:Me,formValues:De,redirectTo:Oe},ze]=(0,Te.useQueryParams)({step:Ee,formValues:Ne,redirectTo:Te.StringParam}),{isDarkMode:Be}=(0,ae.e)(),Re=(0,_e.Zp)(),Le=(0,V.f0)(),Ke=(0,V.hd)(),{upsertNotification:qe}=(0,te.js)(),{run:We}=(0,ue.A)((()=>{ze({formValues:c().omit(Qe.getFieldsValue(),["environments.image"],["environments.customizedTag"],["autoMountedFolderNames"])},"replaceIn")}),{leading:!1,wait:500,trailing:!0}),Ge=e=>{ze({step:e},"pushIn")},{token:Ue}=a.A.useToken(),{t:$e}=(0,f.Bd)(),Je=he.Ay.useBreakpoint(),[Qe]=A.A.useForm();(0,d.useEffect)((()=>{JSON.stringify(se)!==JSON.stringify(De)&&(Qe.setFieldsValue(De),Qe.validateFields().catch((e=>{})))}),[]),(0,d.useEffect)((()=>{var e;null===(e=$.current)||void 0===e||e.scrollTo(0,0)}),[Me]);const He=A.A.useWatch("sessionType",{form:Qe,preserve:!0})||Qe.getFieldValue("sessionType")||De.sessionType,Ze=c().filter([{title:$e("session.launcher.SessionType"),key:"sessionType"},{title:"".concat($e("session.launcher.Environments")," & ").concat($e("session.launcher.ResourceAllocation")," "),key:"environment"},"inference"!==He&&{title:$e("webui.menu.Data&Storage"),key:"storage"},{title:$e("session.launcher.Network"),key:"network"},{title:$e("session.launcher.ConfirmAndLaunch"),icon:(0,u.jsx)(re.A,{}),key:"review"}],(e=>!!e)),Xe=null===(s=Ze[Me])||void 0===s?void 0:s.key,Ye=c().some(Qe.getFieldsError(),(e=>e.errors.length>0)),[,en]=(0,V.Tw)("first");(0,d.useEffect)((()=>{Me===Ze.length-1&&Qe.validateFields().catch((()=>{})).finally((()=>en()))}),[Me,Qe,en,Ze.length]);return(0,u.jsxs)(x.A,{direction:"column",align:"stretch",style:{justifyContent:"revert"},gap:"md",children:[(0,u.jsx)("style",{children:".session-type-radio-group .ant-radio {\n  align-self: flex-start;\n  margin-top: 2px;\n}\n"}),Oe&&(0,u.jsx)(ge.A,{items:[{title:$e("webui.menu.Sessions"),onClick:e=>{e.preventDefault(),Le(Oe)},href:Oe},{title:$e("session.launcher.StartNewSession")}]}),(0,u.jsxs)(x.A,{direction:"row",gap:"md",align:"start",children:[(0,u.jsx)(x.A,{direction:"column",align:"stretch",style:{flex:1,maxWidth:700},children:(0,u.jsx)(A.A.Provider,{onFormChange:(e,n)=>{We()},children:(0,u.jsx)(A.A,{form:Qe,layout:"vertical",requiredMark:"optional",initialValues:se,children:(0,u.jsxs)(x.A,{direction:"column",align:"stretch",gap:"md",children:[(0,u.jsxs)(o.A,{title:$e("session.launcher.SessionType"),style:{display:"sessionType"===Xe?"block":"none"},children:[(0,u.jsx)(A.A.Item,{name:"sessionType",children:(0,u.jsx)(pe.Ay.Group,{className:"session-type-radio-group",options:[{label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Q.A.Text,{code:!0,children:$e("session.launcher.InteractiveMode")})," ",(0,u.jsx)(Q.A.Text,{type:"secondary",children:$e("session.launcher.InteractiveModeDesc")})]}),value:"interactive"},{label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Q.A.Text,{code:!0,children:$e("session.launcher.BatchMode")})," ",(0,u.jsx)(Q.A.Text,{type:"secondary",children:$e("session.launcher.BatchModeDesc")})]}),value:"batch"}]})}),(0,u.jsx)(N,{})]}),"batch"===He&&(0,u.jsxs)(o.A,{title:$e("session.launcher.BatchModeConfig"),style:{display:"sessionType"===Xe?"block":"none"},children:[(0,u.jsx)(A.A.Item,{label:$e("session.launcher.StartUpCommand"),name:["batch","command"],rules:[{required:!0,type:"string"}],children:(0,u.jsx)(j.A.TextArea,{autoSize:!0})}),(0,u.jsx)(A.A.Item,{label:$e("session.launcher.SessionStartTime"),extra:(0,u.jsx)(A.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>e.batch.scheduleDate!==n.batch.scheduleDate,children:()=>{const e=Qe.getFieldValue(["batch","scheduleDate"]);return(0,u.jsx)(h.A,{delay:1e3,callback:()=>{const e=Qe.getFieldValue(["batch","scheduleDate"]);return e?ee()(e).isBefore(ee()())?void(0===Qe.getFieldError(["batch","scheduleDate"]).length&&Qe.validateFields([["batch","scheduleDate"]])):ee()(e).fromNow():void 0},triggerKey:e||"none"})}}),children:(0,u.jsxs)(x.A,{direction:"row",gap:"xs",children:[(0,u.jsx)(A.A.Item,{noStyle:!0,name:["batch","enabled"],valuePropName:"checked",children:(0,u.jsx)(xe.A,{onChange:e=>{e.target.checked&&c().isEmpty(Qe.getFieldValue(["batch","scheduleDate"]))?Qe.setFieldValue(["batch","scheduleDate"],ee()().add(2,"minutes").toISOString()):!1===e.target.checked&&Qe.setFieldValue(["batch","scheduleDate"],void 0),Qe.validateFields([["batch","scheduleDate"]])},children:$e("session.launcher.Enable")})}),(0,u.jsx)(A.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>{var s,l;return(null===(s=e.batch)||void 0===s?void 0:s.enabled)!==(null===(l=n.batch)||void 0===l?void 0:l.enabled)},children:()=>{var e;const n=!0!==(null===(e=Qe.getFieldValue("batch"))||void 0===e?void 0:e.enabled);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(A.A.Item,{name:["batch","scheduleDate"],noStyle:!0,rules:[{validator:async(e,n)=>n&&ee()(n).isBefore(ee()())?Promise.reject($e("session.launcher.StartTimeMustBeInTheFuture")):Promise.resolve()}],children:(0,u.jsx)(g.A,{disabled:n,showTime:!0,localFormat:!0,disabledDate:e=>e.isBefore(ee()().startOf("day"))})})})}})]})})]}),"inference"===He&&(0,u.jsx)(o.A,{title:"Inference Mode Configuration",children:(0,u.jsx)(A.A.Item,{name:["inference","vFolderName"],label:$e("session.launcher.ModelStorageToMount"),rules:[{required:!0}],children:(0,u.jsx)(C.A,{})})}),(0,u.jsxs)(o.A,{title:$e("session.launcher.Environments"),style:{display:"environment"===Xe?"block":"none"},children:[(0,u.jsx)(ke.tH,{fallbackRender:e=>(console.log(e),null),children:(0,u.jsx)(F.A,{})}),(0,u.jsx)(A.A.Item,{label:$e("session.launcher.EnvironmentVariable"),children:(0,u.jsx)(b,{name:"envvars",formItemProps:{validateTrigger:["onChange","onBlur"]}})})]}),(0,u.jsx)(o.A,{title:$e("session.launcher.ResourceAllocation"),style:{display:"environment"===Xe?"block":"none"},children:(0,u.jsx)(P.Ay,{enableNumOfSessions:!0,enableResourcePresets:!0})}),(0,u.jsxs)(o.A,{title:$e("session.launcher.HPCOptimization"),style:{display:"environment"===Xe?"block":"none"},children:[(0,u.jsx)(A.A.Item,{noStyle:!0,children:(0,u.jsxs)(x.A,{direction:"row",gap:"sm",children:[(0,u.jsx)(Q.A.Text,{children:$e("session.launcher.SwitchOpenMPoptimization")}),(0,u.jsx)(A.A.Item,{label:$e("session.launcher.SwitchOpenMPoptimization"),name:["hpcOptimization","autoEnabled"],valuePropName:"checked",required:!0,noStyle:!0,children:(0,u.jsx)(ve.A,{checkedChildren:"ON",unCheckedChildren:"OFF",onChange:e=>{e&&Qe.setFieldsValue(c().pick(se,["hpcOptimization"]))}})})]})}),(0,u.jsx)(A.A.Item,{noStyle:!0,shouldUpdate:(e,n)=>{var s,l;return(null===(s=e.hpcOptimization)||void 0===s?void 0:s.autoEnabled)!==(null===(l=n.hpcOptimization)||void 0===l?void 0:l.autoEnabled)},children:()=>{const e=Qe.getFieldValue(["hpcOptimization","autoEnabled"]);return(0,u.jsxs)(ye.A,{gutter:Ue.marginMD,style:{display:e?"none":void 0,marginTop:Ue.marginMD},children:[(0,u.jsx)(Ae.A,{xs:24,sm:12,children:(0,u.jsx)(A.A.Item,{style:{flex:1},label:$e("session.launcher.NumOpenMPthreads"),name:["hpcOptimization","OMP_NUM_THREADS"],tooltip:(0,u.jsxs)(u.Fragment,{children:[$e("session.launcher.OpenMPOptimization"),(0,u.jsx)(f.x6,{i18nKey:"session.launcher.DescOpenMPOptimization"})]}),required:!0,children:(0,u.jsx)(je.A,{min:0,max:1e3,step:1,stringMode:!0,style:{width:"100%"}})})}),(0,u.jsx)(Ae.A,{xs:24,sm:12,children:(0,u.jsx)(A.A.Item,{style:{flex:1},label:$e("session.launcher.NumOpenBLASthreads"),name:["hpcOptimization","OPENBLAS_NUM_THREADS"],tooltip:(0,u.jsxs)(u.Fragment,{children:[$e("session.launcher.OpenMPOptimization"),(0,u.jsx)(f.x6,{i18nKey:"session.launcher.DescOpenMPOptimization"})]}),required:!0,children:(0,u.jsx)(je.A,{min:0,max:1e3,step:1,stringMode:!0,style:{width:"100%"}})})})]})}})]}),(0,u.jsx)(o.A,{title:$e("webui.menu.Data&Storage"),style:{display:"storage"===Xe?"block":"none"},children:(0,u.jsx)(le,{filter:e=>{var n;return"ready"===e.status&&!(null!==(n=e.name)&&void 0!==n&&n.startsWith("."))}})}),(0,u.jsx)(o.A,{title:$e("session.launcher.Network"),style:{display:"network"===Xe?"block":"none"},children:(0,u.jsx)(I,{})}),"review"===Xe&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(m,{title:$e("session.launcher.SessionType"),size:"small",status:Qe.getFieldError("sessionName").length>0||Qe.getFieldError(["batch","command"]).length>0||Qe.getFieldError(["batch","scheduleDate"]).length>0?"error":void 0,extraButtonTitle:$e("button.Edit"),onClickExtraButton:()=>{Ge(Ze.findIndex((e=>"sessionType"===e.key)))},children:(0,u.jsxs)(X.A,{size:"small",column:1,children:[(0,u.jsx)(X.A.Item,{label:$e("session.SessionType"),children:Qe.getFieldValue("sessionType")}),!c().isEmpty(Qe.getFieldValue("sessionName"))&&(0,u.jsx)(X.A.Item,{label:$e("session.launcher.SessionName"),children:Qe.getFieldValue("sessionName")}),"batch"===He&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(X.A.Item,{label:$e("session.launcher.StartUpCommand"),children:Qe.getFieldValue(["batch","command"])?(0,u.jsx)(we.A,{style:Be?Ve.A:void 0,language:"shell",customStyle:{margin:0,width:"100%"},children:Qe.getFieldValue(["batch","command"])}):(0,u.jsx)(Q.A.Text,{type:"secondary",children:$e("general.None")})}),(0,u.jsx)(X.A.Item,{label:$e("session.launcher.ScheduleTimeSimple"),children:Qe.getFieldValue(["batch","scheduleDate"])?ee()(Qe.getFieldValue(["batch","scheduleDate"])).format("LLL (Z)"):(0,u.jsx)(Q.A.Text,{type:"secondary",children:$e("general.None")})})]})]})}),(0,u.jsx)(m,{title:$e("session.launcher.Environments"),size:"small",status:c().some(Qe.getFieldValue("envvars"),((e,n)=>Qe.getFieldError(["envvars",n,"variable"]).length>0||Qe.getFieldError(["envvars",n,"value"]).length>0))?"error":void 0,extraButtonTitle:$e("button.Edit"),onClickExtraButton:()=>{Ge(Ze.findIndex((e=>"environment"===e.key)))},children:(0,u.jsxs)(X.A,{size:"small",column:1,children:[(0,u.jsx)(X.A.Item,{label:$e("session.launcher.Project"),children:Ke.name}),(0,u.jsx)(X.A.Item,{label:$e("general.Image"),children:(0,u.jsxs)(x.A,{direction:"row",gap:"xs",style:{flex:1},children:[(0,u.jsx)(k.A,{image:(null===(l=Qe.getFieldValue("environments"))||void 0===l?void 0:l.version)||(null===(t=Qe.getFieldValue("environments"))||void 0===t?void 0:t.manual)}),(0,u.jsx)(x.A,{direction:"row",children:null!==(i=Qe.getFieldValue("environments"))&&void 0!==i&&i.manual?(0,u.jsx)(Q.A.Text,{copyable:!0,code:!0,children:null===(v=Qe.getFieldValue("environments"))||void 0===v?void 0:v.manual}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(_.Ay,{image:null===(y=Qe.getFieldValue("environments"))||void 0===y?void 0:y.version}),null!==(E=Qe.getFieldValue("environments"))&&void 0!==E&&E.customizedTag?(0,u.jsx)(p.A,{values:[{label:"Customized",color:"cyan"},{label:null===(M=Qe.getFieldValue("environments"))||void 0===M?void 0:M.customizedTag,color:"cyan"}]}):null,(0,u.jsx)(Q.A.Text,{copyable:{text:null===(O=Qe.getFieldValue("environments"))||void 0===O?void 0:O.version}})]})})]})}),(null===(z=Qe.getFieldValue("envvars"))||void 0===z?void 0:z.length)>0&&(0,u.jsx)(X.A.Item,{label:$e("session.launcher.EnvironmentVariable"),children:null!==(B=Qe.getFieldValue("envvars"))&&void 0!==B&&B.length?(0,u.jsx)(we.A,{style:Be?Ve.A:void 0,codeTagProps:{style:{}},customStyle:{margin:0,width:"100%"},children:c().map(Qe.getFieldValue("envvars"),(e=>"".concat((null===e||void 0===e?void 0:e.variable)||"",'="').concat((null===e||void 0===e?void 0:e.value)||"",'"'))).join("\n")}):(0,u.jsx)(Q.A.Text,{type:"secondary",children:"-"})})]})}),(0,u.jsx)(m,{title:$e("session.launcher.ResourceAllocation"),status:c().some(Qe.getFieldValue("resource"),((e,n)=>Qe.getFieldError(["resource",n]).length>0))||Qe.getFieldError(["num_of_sessions"]).length>0||Qe.getFieldError("resourceGroup").length>0?"error":void 0,size:"small",extraButtonTitle:$e("button.Edit"),onClickExtraButton:()=>{Ge(Ze.findIndex((e=>"environment"===e.key)))},children:(0,u.jsxs)(x.A,{direction:"column",align:"stretch",children:[c().some(null===(R=Qe.getFieldValue("resource"))||void 0===R?void 0:R.resource,((e,n)=>Qe.getFieldWarning(["resource",n]).length>0))&&(0,u.jsx)(fe.A,{type:"warning",showIcon:!0,message:$e("session.launcher.EnqueueComputeSessionWarning")}),(0,u.jsxs)(X.A,{column:2,children:[(0,u.jsx)(X.A.Item,{label:$e("general.ResourceGroup"),span:2,children:Qe.getFieldValue("resourceGroup")||(0,u.jsx)(Q.A.Text,{type:"secondary",children:$e("general.None")})}),(0,u.jsx)(X.A.Item,{label:$e("session.launcher.ResourceAllocationPerContainer"),span:2,children:(0,u.jsxs)(x.A,{direction:"row",align:"start",gap:"sm",wrap:"wrap",style:{flex:1},children:["custom"===Qe.getFieldValue("allocationPreset")?"":(0,u.jsx)(T.A,{children:Qe.getFieldValue("allocationPreset")}),(0,u.jsx)(Se,{form:Qe})]})}),(0,u.jsx)(X.A.Item,{label:$e("session.launcher.NumberOfContainer"),children:1===Qe.getFieldValue("cluster_size")?Qe.getFieldValue("num_of_sessions"):Qe.getFieldValue("cluster_size")}),(0,u.jsx)(X.A.Item,{label:$e("session.launcher.ClusterMode"),children:"single-node"===Qe.getFieldValue("cluster_mode")?$e("session.launcher.SingleNode"):$e("session.launcher.MultiNode")})]}),(0,u.jsx)(o.A,{size:"small",type:"inner",title:$e("session.launcher.TotalAllocation"),children:(0,u.jsx)(x.A,{direction:"row",gap:"xxs",children:(0,u.jsx)(Se,{form:Qe,containerCount:1===Qe.getFieldValue("cluster_size")?Qe.getFieldValue("num_of_sessions"):Qe.getFieldValue("cluster_size")})})})]})}),(0,u.jsx)(m,{title:$e("webui.menu.Data&Storage"),size:"small",status:Qe.getFieldError("vfoldersAliasMap").length>0?"error":void 0,extraButtonTitle:$e("button.Edit"),onClickExtraButton:()=>{Ge(Ze.findIndex((e=>"storage"===e.key)))},children:(0,u.jsxs)(x.A,{direction:"column",align:"stretch",gap:"xs",children:[(null===(L=Qe.getFieldValue("mounts"))||void 0===L?void 0:L.length)>0?(0,u.jsx)(Z.A,{rowKey:"name",size:"small",pagination:!1,columns:[{dataIndex:"name",title:$e("data.folders.Name")},{dataIndex:"alias",title:$e("session.launcher.FolderAlias"),render:(e,n)=>c().isEmpty(e)?(0,u.jsx)(Q.A.Text,{type:"secondary",style:{opacity:.7},children:"/home/work/".concat(n.name)}):e}],dataSource:c().map(Qe.getFieldValue("mounts"),(e=>{var n;return{name:e,alias:null===(n=Qe.getFieldValue("vfoldersAliasMap"))||void 0===n?void 0:n[e]}}))}):(0,u.jsx)(fe.A,{type:"warning",showIcon:!0,message:$e("session.launcher.NoFolderMounted")}),(null===(K=Qe.getFieldValue("autoMountedFolderNames"))||void 0===K?void 0:K.length)>0?(0,u.jsx)(X.A,{size:"small",children:(0,u.jsx)(X.A.Item,{label:$e("data.AutomountFolders"),children:c().map(Qe.getFieldValue("autoMountedFolderNames"),(e=>(0,u.jsx)(T.A,{children:e})))})}):null]})}),(0,u.jsx)(m,{title:"Network",size:"small",status:Qe.getFieldError("ports").length>0?"error":void 0,extraButtonTitle:$e("button.Edit"),onClickExtraButton:()=>{Ge(Ze.findIndex((e=>"network"===e.key)))},children:(0,u.jsx)(X.A,{size:"small",children:(0,u.jsx)(X.A.Item,{label:$e("session.launcher.PreOpenPortTitle"),children:(0,u.jsxs)(x.A,{direction:"row",gap:"xs",style:{flex:1},wrap:"wrap",children:[c().sortBy(Qe.getFieldValue("ports"),(e=>parseInt(e))).map((e=>(0,u.jsx)(S,{value:e,style:{margin:0},children:e}))),c().isArray(Qe.getFieldValue("ports"))&&0!==(null===(q=Qe.getFieldValue("ports"))||void 0===q?void 0:q.length)?null:(0,u.jsx)(Q.A.Text,{type:"secondary",children:$e("general.None")})]})})})})]}),(0,u.jsxs)(x.A,{direction:"row",justify:"between",children:[(0,u.jsx)(x.A,{gap:"sm",children:(0,u.jsx)(be.A,{title:$e("button.Reset"),description:$e("session.launcher.ResetFormConfirm"),onConfirm:()=>{Qe.resetFields(),Re("/session/start")},icon:(0,u.jsx)(G.A,{style:{color:Ue.colorError}}),okText:$e("button.Reset"),okButtonProps:{danger:!0},children:(0,u.jsx)(r.Ay,{danger:!0,type:"link",style:{paddingRight:0,paddingLeft:0},children:$e("button.Reset")})})}),(0,u.jsxs)(x.A,{direction:"row",gap:"sm",children:[Me>0&&(0,u.jsx)(r.Ay,{onClick:()=>{Ge(Me-1)},icon:(0,u.jsx)(oe.A,{}),disabled:Y,children:$e("button.Previous")}),Me===Ze.length-1?(0,u.jsx)(H.A,{title:Ye?$e("session.launcher.PleaseCompleteForm"):void 0,children:(0,u.jsx)(r.Ay,{type:"primary",icon:(0,u.jsx)(ie.A,{}),disabled:Ye,onClick:()=>{ne(!0),Qe.validateFields().then((async e=>{if(c().isEmpty(e.mounts)||0===e.mounts.length){if(!await new Promise((e=>{W.modal.confirm({title:$e("session.launcher.NoFolderMounted"),content:(0,u.jsxs)(u.Fragment,{children:[$e("session.launcher.HomeDirectoryDeletionDialog"),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),$e("session.launcher.LaunchConfirmationDialog"),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),$e("dialog.ask.DoYouWantToProceed")]}),onOk:()=>{e(!0)},okText:$e("session.launcher.Start"),onCancel:()=>{e(!1)},closable:!0})})))return}const n=e.environments.manual||e.environments.version;let[s,l]=n?n.split("@"):["",""];const t=c().isEmpty(e.sessionName)?Ie():e.sessionName,a={kernelName:s,architecture:l,sessionName:t,config:{type:e.sessionType,..."batch"===e.sessionType?{startsAt:e.batch.enabled?e.batch.scheduleDate:void 0,startupCommand:e.batch.command}:{},group_name:Ke.name,domain:J._config.domainName,scaling_group:e.resourceGroup,cluster_mode:e.cluster_mode,cluster_size:e.cluster_size,maxWaitSeconds:15,cpu:e.resource.cpu,mem:e.resource.mem,shmem:(0,D.Mh)(e.resource.mem,"4g")>0&&(0,D.Mh)(e.resource.shmem,"1g")<0?"1g":e.resource.shmem,...e.resource.accelerator>0?{[e.resource.acceleratorType]:e.resource.accelerator}:void 0,mounts:e.mounts,mount_map:e.vfoldersAliasMap,env:{...c().fromPairs(e.envvars.map((e=>[e.variable,e.value]))),...c().omit(e.hpcOptimization,"autoEnabled")},preopen_ports:c().map(e.ports,(e=>parseInt(e)))}},r=c().map(c().range(e.num_of_sessions||1),(n=>{const s=(e.num_of_sessions||1)>1?"".concat(a.sessionName,"-").concat(Pe(),"-").concat(n):a.sessionName;return J.createIfNotExists(a.kernelName,s,a.config,2e4,a.architecture).then((e=>{if(null===e||void 0===e||!e.created)throw new Error($e("session.launcher.SessionAlreadyExists"));if("CANCELLED"===(null===e||void 0===e?void 0:e.status))throw new Error($e("session.launcher.FailedToStartNewSession"));return e})).catch((e=>{throw e}))}));Le(Oe||"/job"),qe({key:"session-launcher:"+t,backgroundTask:{promise:Promise.all(r),status:"pending",statusDescriptions:{pending:$e("session.PreparingSession"),resolved:$e("eduapi.ComputeSessionPrepared")}},duration:0,message:$e("general.Session")+": "+t,open:!0}),await Promise.all(r).then((n=>{let[s]=n;if(1===e.num_of_sessions&&"batch"!==e.sessionType){const e=s;let n;n="kernelId"in e?{"session-name":e.kernelId,"access-key":"",mode:U}:{"session-uuid":e.sessionId,"session-name":e.sessionName,"access-key":"",mode:U};const l=e.servicePorts;!0===Array.isArray(l)?n["app-services"]=l.map((e=>e.name)):n["app-services"]=[],l.length>0&&globalThis.appLauncher.showLauncher(n)}})).catch((()=>{}))})).catch((e=>{console.log("validation errors",e)})).finally((()=>{ne(!1)}))},loading:Y,children:$e("session.launcher.Launch")})}):(0,u.jsxs)(r.Ay,{type:"primary",ghost:!0,onClick:()=>{Ge(Me+1)},children:[$e("button.Next")," ",(0,u.jsx)(ce.A,{})]}),Me!==Ze.length-1&&(0,u.jsxs)(r.Ay,{onClick:()=>{Ge(Ze.length-1)},children:[$e("session.launcher.SkipToConfirmAndLaunch"),(0,u.jsx)(de.A,{})]})]})]})]})})})}),Je.lg&&(0,u.jsx)(x.A,{style:{position:"sticky",top:80},children:(0,u.jsx)(Fe.A,{size:"small",direction:"vertical",current:Me,onChange:e=>{Ge(e)},items:c().map(Ze,((e,n)=>({...e,status:n===Me?"process":"wait"})))})})]})]})}}}]);
//# sourceMappingURL=310.af2724a4.chunk.js.map